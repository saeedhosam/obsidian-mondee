/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var dJt=Object.create;var vz=Object.defineProperty;var fJt=Object.getOwnPropertyDescriptor;var pJt=Object.getOwnPropertyNames;var mJt=Object.getPrototypeOf,hJt=Object.prototype.hasOwnProperty;var c$e=t=>{throw TypeError(t)};var gJt=(t,e,r)=>e in t?vz(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var O=(t,e)=>()=>(t&&(e=t(t=0)),e);var v=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),Zf=(t,e)=>{for(var r in e)vz(t,r,{get:e[r],enumerable:!0})},d$e=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of pJt(e))!hJt.call(t,o)&&o!==r&&vz(t,o,{get:()=>e[o],enumerable:!(n=fJt(e,o))||n.enumerable});return t};var F=(t,e,r)=>(r=t!=null?dJt(mJt(t)):{},d$e(e||!t||!t.__esModule?vz(r,"default",{value:t,enumerable:!0}):r,t)),Rl=t=>d$e(vz({},"__esModule",{value:!0}),t);var dc=(t,e,r)=>gJt(t,typeof e!="symbol"?e+"":e,r),yJt=(t,e,r)=>e.has(t)||c$e("Cannot "+r);var f$e=(t,e,r)=>e.has(t)?c$e("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r);var p$e=(t,e,r)=>(yJt(t,e,"access private method"),r);function Fde(){if(!x9&&(x9=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!x9))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return x9(bJt)}var x9,bJt,m$e=O(()=>{bJt=new Uint8Array(16)});function h$e(t,e=0){return fc[t[e+0]]+fc[t[e+1]]+fc[t[e+2]]+fc[t[e+3]]+"-"+fc[t[e+4]]+fc[t[e+5]]+"-"+fc[t[e+6]]+fc[t[e+7]]+"-"+fc[t[e+8]]+fc[t[e+9]]+"-"+fc[t[e+10]]+fc[t[e+11]]+fc[t[e+12]]+fc[t[e+13]]+fc[t[e+14]]+fc[t[e+15]]}var fc,g$e=O(()=>{fc=[];for(let t=0;t<256;++t)fc.push((t+256).toString(16).slice(1))});var _Jt,kde,y$e=O(()=>{_Jt=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),kde={randomUUID:_Jt}});function vJt(t,e,r){if(kde.randomUUID&&!e&&!t)return kde.randomUUID();t=t||{};let n=t.random||(t.rng||Fde)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){r=r||0;for(let o=0;o<16;++o)e[r+o]=n[o];return e}return h$e(n)}var Jx,b$e=O(()=>{y$e();m$e();g$e();Jx=vJt});var wz=O(()=>{b$e()});function SJt(t){S$e=t}function C9(){return S$e}function ut(t,e){let r=C9(),n=O9({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,r,r===QD?void 0:QD].filter(o=>!!o)});t.common.issues.push(n)}function P9(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)}function x$e(t,e,r,n,o){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!o:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?o.call(t,r):o?o.value=r:e.set(t,r),r}function zr(t){if(!t)return{};let{errorMap:e,invalid_type_error:r,required_error:n,description:o}=t;if(e&&(r||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:o}:{errorMap:(a,s)=>{var u,l;let{message:c}=t;return a.code==="invalid_enum_value"?{message:c??s.defaultError}:typeof s.data>"u"?{message:(u=c??n)!==null&&u!==void 0?u:s.defaultError}:a.code!=="invalid_type"?{message:s.defaultError}:{message:(l=c??r)!==null&&l!==void 0?l:s.defaultError}},description:o}}function O$e(t){let e="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`),e}function BJt(t){return new RegExp(`^${O$e(t)}$`)}function P$e(t){let e=`${C$e}T${O$e(t)}`,r=[];return r.push(t.local?"Z?":"Z"),t.offset&&r.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${r.join("|")})`,new RegExp(`^${e}$`)}function qJt(t,e){return!!((e==="v4"||!e)&&jJt.test(t)||(e==="v6"||!e)&&DJt.test(t))}function UJt(t,e){if(!AJt.test(t))return!1;try{let[r]=t.split("."),n=r.replace(/-/g,"+").replace(/_/g,"/").padEnd(r.length+(4-r.length%4)%4,"="),o=JSON.parse(atob(n));return!(typeof o!="object"||o===null||!o.typ||!o.alg||e&&o.alg!==e)}catch{return!1}}function zJt(t,e){return!!((e==="v4"||!e)&&NJt.test(t)||(e==="v6"||!e)&&LJt.test(t))}function HJt(t,e){let r=(t.toString().split(".")[1]||"").length,n=(e.toString().split(".")[1]||"").length,o=r>n?r:n,i=parseInt(t.toFixed(o).replace(".","")),a=parseInt(e.toFixed(o).replace(".",""));return i%a/Math.pow(10,o)}function ZD(t){if(t instanceof Qf){let e={};for(let r in t.shape){let n=t.shape[r];e[r]=Xf.create(ZD(n))}return new Qf({...t._def,shape:()=>e})}else return t instanceof Qx?new Qx({...t._def,type:ZD(t.element)}):t instanceof Xf?Xf.create(ZD(t.unwrap())):t instanceof wb?wb.create(ZD(t.unwrap())):t instanceof vb?vb.create(t.items.map(e=>ZD(e))):t}function zde(t,e){let r=Zx(t),n=Zx(e);if(t===e)return{valid:!0,data:t};if(r===yt.object&&n===yt.object){let o=Kn.objectKeys(e),i=Kn.objectKeys(t).filter(s=>o.indexOf(s)!==-1),a={...t,...e};for(let s of i){let u=zde(t[s],e[s]);if(!u.valid)return{valid:!1};a[s]=u.data}return{valid:!0,data:a}}else if(r===yt.array&&n===yt.array){if(t.length!==e.length)return{valid:!1};let o=[];for(let i=0;i<t.length;i++){let a=t[i],s=e[i],u=zde(a,s);if(!u.valid)return{valid:!1};o.push(u.data)}return{valid:!0,data:o}}else return r===yt.date&&n===yt.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}function E$e(t,e){return new RM({values:t,typeName:ce.ZodEnum,...zr(e)})}function v$e(t,e){let r=typeof t=="function"?t(e):typeof t=="string"?{message:t}:t;return typeof r=="string"?{message:r}:r}function T$e(t,e={},r){return t?tE.create().superRefine((n,o)=>{var i,a;let s=t(n);if(s instanceof Promise)return s.then(u=>{var l,c;if(!u){let d=v$e(e,n),f=(c=(l=d.fatal)!==null&&l!==void 0?l:r)!==null&&c!==void 0?c:!0;o.addIssue({code:"custom",...d,fatal:f})}});if(!s){let u=v$e(e,n),l=(a=(i=u.fatal)!==null&&i!==void 0?i:r)!==null&&a!==void 0?a:!0;o.addIssue({code:"custom",...u,fatal:l})}}):tE.create()}var Kn,Bde,yt,Zx,Fe,wJt,tm,QD,S$e,O9,xJt,pd,mr,XD,cf,qde,Ude,wM,Cz,Ft,Sz,xz,oh,_$e,Hr,CJt,OJt,PJt,EJt,TJt,AJt,IJt,MJt,RJt,$de,jJt,NJt,DJt,LJt,FJt,kJt,C$e,$Jt,eE,SM,xM,CM,OM,eL,PM,EM,tE,Xx,Vg,tL,Qx,Qf,TM,Yx,E9,AM,vb,T9,rL,nL,A9,IM,MM,RM,jM,rE,rm,Xf,wb,NM,DM,oL,VJt,Oz,Pz,LM,WJt,ce,KJt,A$e,I$e,GJt,JJt,M$e,YJt,ZJt,XJt,QJt,e7t,t7t,r7t,n7t,o7t,i7t,a7t,s7t,u7t,l7t,c7t,d7t,f7t,p7t,m7t,h7t,g7t,y7t,b7t,_7t,w$e,v7t,w7t,S7t,x7t,C7t,O7t,P7t,E7t,T7t,Vr,md=O(()=>{(function(t){t.assertEqual=o=>o;function e(o){}t.assertIs=e;function r(o){throw new Error}t.assertNever=r,t.arrayToEnum=o=>{let i={};for(let a of o)i[a]=a;return i},t.getValidEnumValues=o=>{let i=t.objectKeys(o).filter(s=>typeof o[o[s]]!="number"),a={};for(let s of i)a[s]=o[s];return t.objectValues(a)},t.objectValues=o=>t.objectKeys(o).map(function(i){return o[i]}),t.objectKeys=typeof Object.keys=="function"?o=>Object.keys(o):o=>{let i=[];for(let a in o)Object.prototype.hasOwnProperty.call(o,a)&&i.push(a);return i},t.find=(o,i)=>{for(let a of o)if(i(a))return a},t.isInteger=typeof Number.isInteger=="function"?o=>Number.isInteger(o):o=>typeof o=="number"&&isFinite(o)&&Math.floor(o)===o;function n(o,i=" | "){return o.map(a=>typeof a=="string"?`'${a}'`:a).join(i)}t.joinValues=n,t.jsonStringifyReplacer=(o,i)=>typeof i=="bigint"?i.toString():i})(Kn||(Kn={}));(function(t){t.mergeShapes=(e,r)=>({...e,...r})})(Bde||(Bde={}));yt=Kn.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Zx=t=>{switch(typeof t){case"undefined":return yt.undefined;case"string":return yt.string;case"number":return isNaN(t)?yt.nan:yt.number;case"boolean":return yt.boolean;case"function":return yt.function;case"bigint":return yt.bigint;case"symbol":return yt.symbol;case"object":return Array.isArray(t)?yt.array:t===null?yt.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?yt.promise:typeof Map<"u"&&t instanceof Map?yt.map:typeof Set<"u"&&t instanceof Set?yt.set:typeof Date<"u"&&t instanceof Date?yt.date:yt.object;default:return yt.unknown}},Fe=Kn.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),wJt=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:"),tm=class t extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};let r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=e}format(e){let r=e||function(i){return i.message},n={_errors:[]},o=i=>{for(let a of i.issues)if(a.code==="invalid_union")a.unionErrors.map(o);else if(a.code==="invalid_return_type")o(a.returnTypeError);else if(a.code==="invalid_arguments")o(a.argumentsError);else if(a.path.length===0)n._errors.push(r(a));else{let s=n,u=0;for(;u<a.path.length;){let l=a.path[u];u===a.path.length-1?(s[l]=s[l]||{_errors:[]},s[l]._errors.push(r(a))):s[l]=s[l]||{_errors:[]},s=s[l],u++}}};return o(this),n}static assert(e){if(!(e instanceof t))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Kn.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=r=>r.message){let r={},n=[];for(let o of this.issues)o.path.length>0?(r[o.path[0]]=r[o.path[0]]||[],r[o.path[0]].push(e(o))):n.push(e(o));return{formErrors:n,fieldErrors:r}}get formErrors(){return this.flatten()}};tm.create=t=>new tm(t);QD=(t,e)=>{let r;switch(t.code){case Fe.invalid_type:t.received===yt.undefined?r="Required":r=`Expected ${t.expected}, received ${t.received}`;break;case Fe.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(t.expected,Kn.jsonStringifyReplacer)}`;break;case Fe.unrecognized_keys:r=`Unrecognized key(s) in object: ${Kn.joinValues(t.keys,", ")}`;break;case Fe.invalid_union:r="Invalid input";break;case Fe.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${Kn.joinValues(t.options)}`;break;case Fe.invalid_enum_value:r=`Invalid enum value. Expected ${Kn.joinValues(t.options)}, received '${t.received}'`;break;case Fe.invalid_arguments:r="Invalid function arguments";break;case Fe.invalid_return_type:r="Invalid function return type";break;case Fe.invalid_date:r="Invalid date";break;case Fe.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(r=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?r=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?r=`Invalid input: must end with "${t.validation.endsWith}"`:Kn.assertNever(t.validation):t.validation!=="regex"?r=`Invalid ${t.validation}`:r="Invalid";break;case Fe.too_small:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:r="Invalid input";break;case Fe.too_big:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?r=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:r="Invalid input";break;case Fe.custom:r="Invalid input";break;case Fe.invalid_intersection_types:r="Intersection results could not be merged";break;case Fe.not_multiple_of:r=`Number must be a multiple of ${t.multipleOf}`;break;case Fe.not_finite:r="Number must be finite";break;default:r=e.defaultError,Kn.assertNever(t)}return{message:r}},S$e=QD;O9=t=>{let{data:e,path:r,errorMaps:n,issueData:o}=t,i=[...r,...o.path||[]],a={...o,path:i};if(o.message!==void 0)return{...o,path:i,message:o.message};let s="",u=n.filter(l=>!!l).slice().reverse();for(let l of u)s=l(a,{data:e,defaultError:s}).message;return{...o,path:i,message:s}},xJt=[];pd=class t{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,r){let n=[];for(let o of r){if(o.status==="aborted")return mr;o.status==="dirty"&&e.dirty(),n.push(o.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,r){let n=[];for(let o of r){let i=await o.key,a=await o.value;n.push({key:i,value:a})}return t.mergeObjectSync(e,n)}static mergeObjectSync(e,r){let n={};for(let o of r){let{key:i,value:a}=o;if(i.status==="aborted"||a.status==="aborted")return mr;i.status==="dirty"&&e.dirty(),a.status==="dirty"&&e.dirty(),i.value!=="__proto__"&&(typeof a.value<"u"||o.alwaysSet)&&(n[i.value]=a.value)}return{status:e.value,value:n}}},mr=Object.freeze({status:"aborted"}),XD=t=>({status:"dirty",value:t}),cf=t=>({status:"valid",value:t}),qde=t=>t.status==="aborted",Ude=t=>t.status==="dirty",wM=t=>t.status==="valid",Cz=t=>typeof Promise<"u"&&t instanceof Promise;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e?.message})(Ft||(Ft={}));oh=class{constructor(e,r,n,o){this._cachedPath=[],this.parent=e,this.data=r,this._path=n,this._key=o}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}},_$e=(t,e)=>{if(wM(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let r=new tm(t.common.issues);return this._error=r,this._error}}};Hr=class{get description(){return this._def.description}_getType(e){return Zx(e.data)}_getOrReturnCtx(e,r){return r||{common:e.parent.common,data:e.data,parsedType:Zx(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new pd,ctx:{common:e.parent.common,data:e.data,parsedType:Zx(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){let r=this._parse(e);if(Cz(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(e){let r=this._parse(e);return Promise.resolve(r)}parse(e,r){let n=this.safeParse(e,r);if(n.success)return n.data;throw n.error}safeParse(e,r){var n;let o={common:{issues:[],async:(n=r?.async)!==null&&n!==void 0?n:!1,contextualErrorMap:r?.errorMap},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Zx(e)},i=this._parseSync({data:e,path:o.path,parent:o});return _$e(o,i)}"~validate"(e){var r,n;let o={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Zx(e)};if(!this["~standard"].async)try{let i=this._parseSync({data:e,path:[],parent:o});return wM(i)?{value:i.value}:{issues:o.common.issues}}catch(i){!((n=(r=i?.message)===null||r===void 0?void 0:r.toLowerCase())===null||n===void 0)&&n.includes("encountered")&&(this["~standard"].async=!0),o.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:o}).then(i=>wM(i)?{value:i.value}:{issues:o.common.issues})}async parseAsync(e,r){let n=await this.safeParseAsync(e,r);if(n.success)return n.data;throw n.error}async safeParseAsync(e,r){let n={common:{issues:[],contextualErrorMap:r?.errorMap,async:!0},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Zx(e)},o=this._parse({data:e,path:n.path,parent:n}),i=await(Cz(o)?o:Promise.resolve(o));return _$e(n,i)}refine(e,r){let n=o=>typeof r=="string"||typeof r>"u"?{message:r}:typeof r=="function"?r(o):r;return this._refinement((o,i)=>{let a=e(o),s=()=>i.addIssue({code:Fe.custom,...n(o)});return typeof Promise<"u"&&a instanceof Promise?a.then(u=>u?!0:(s(),!1)):a?!0:(s(),!1)})}refinement(e,r){return this._refinement((n,o)=>e(n)?!0:(o.addIssue(typeof r=="function"?r(n,o):r),!1))}_refinement(e){return new rm({schema:this,typeName:ce.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:r=>this["~validate"](r)}}optional(){return Xf.create(this,this._def)}nullable(){return wb.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Qx.create(this)}promise(){return rE.create(this,this._def)}or(e){return TM.create([this,e],this._def)}and(e){return AM.create(this,e,this._def)}transform(e){return new rm({...zr(this._def),schema:this,typeName:ce.ZodEffects,effect:{type:"transform",transform:e}})}default(e){let r=typeof e=="function"?e:()=>e;return new NM({...zr(this._def),innerType:this,defaultValue:r,typeName:ce.ZodDefault})}brand(){return new Oz({typeName:ce.ZodBranded,type:this,...zr(this._def)})}catch(e){let r=typeof e=="function"?e:()=>e;return new DM({...zr(this._def),innerType:this,catchValue:r,typeName:ce.ZodCatch})}describe(e){let r=this.constructor;return new r({...this._def,description:e})}pipe(e){return Pz.create(this,e)}readonly(){return LM.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}},CJt=/^c[^\s-]{8,}$/i,OJt=/^[0-9a-z]+$/,PJt=/^[0-9A-HJKMNP-TV-Z]{26}$/i,EJt=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,TJt=/^[a-z0-9_-]{21}$/i,AJt=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,IJt=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,MJt=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,RJt="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$",jJt=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,NJt=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,DJt=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,LJt=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,FJt=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,kJt=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,C$e="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",$Jt=new RegExp(`^${C$e}$`);eE=class t extends Hr{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==yt.string){let i=this._getOrReturnCtx(e);return ut(i,{code:Fe.invalid_type,expected:yt.string,received:i.parsedType}),mr}let n=new pd,o;for(let i of this._def.checks)if(i.kind==="min")e.data.length<i.value&&(o=this._getOrReturnCtx(e,o),ut(o,{code:Fe.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),n.dirty());else if(i.kind==="max")e.data.length>i.value&&(o=this._getOrReturnCtx(e,o),ut(o,{code:Fe.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),n.dirty());else if(i.kind==="length"){let a=e.data.length>i.value,s=e.data.length<i.value;(a||s)&&(o=this._getOrReturnCtx(e,o),a?ut(o,{code:Fe.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):s&&ut(o,{code:Fe.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),n.dirty())}else if(i.kind==="email")MJt.test(e.data)||(o=this._getOrReturnCtx(e,o),ut(o,{validation:"email",code:Fe.invalid_string,message:i.message}),n.dirty());else if(i.kind==="emoji")$de||($de=new RegExp(RJt,"u")),$de.test(e.data)||(o=this._getOrReturnCtx(e,o),ut(o,{validation:"emoji",code:Fe.invalid_string,message:i.message}),n.dirty());else if(i.kind==="uuid")EJt.test(e.data)||(o=this._getOrReturnCtx(e,o),ut(o,{validation:"uuid",code:Fe.invalid_string,message:i.message}),n.dirty());else if(i.kind==="nanoid")TJt.test(e.data)||(o=this._getOrReturnCtx(e,o),ut(o,{validation:"nanoid",code:Fe.invalid_string,message:i.message}),n.dirty());else if(i.kind==="cuid")CJt.test(e.data)||(o=this._getOrReturnCtx(e,o),ut(o,{validation:"cuid",code:Fe.invalid_string,message:i.message}),n.dirty());else if(i.kind==="cuid2")OJt.test(e.data)||(o=this._getOrReturnCtx(e,o),ut(o,{validation:"cuid2",code:Fe.invalid_string,message:i.message}),n.dirty());else if(i.kind==="ulid")PJt.test(e.data)||(o=this._getOrReturnCtx(e,o),ut(o,{validation:"ulid",code:Fe.invalid_string,message:i.message}),n.dirty());else if(i.kind==="url")try{new URL(e.data)}catch{o=this._getOrReturnCtx(e,o),ut(o,{validation:"url",code:Fe.invalid_string,message:i.message}),n.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(e.data)||(o=this._getOrReturnCtx(e,o),ut(o,{validation:"regex",code:Fe.invalid_string,message:i.message}),n.dirty())):i.kind==="trim"?e.data=e.data.trim():i.kind==="includes"?e.data.includes(i.value,i.position)||(o=this._getOrReturnCtx(e,o),ut(o,{code:Fe.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),n.dirty()):i.kind==="toLowerCase"?e.data=e.data.toLowerCase():i.kind==="toUpperCase"?e.data=e.data.toUpperCase():i.kind==="startsWith"?e.data.startsWith(i.value)||(o=this._getOrReturnCtx(e,o),ut(o,{code:Fe.invalid_string,validation:{startsWith:i.value},message:i.message}),n.dirty()):i.kind==="endsWith"?e.data.endsWith(i.value)||(o=this._getOrReturnCtx(e,o),ut(o,{code:Fe.invalid_string,validation:{endsWith:i.value},message:i.message}),n.dirty()):i.kind==="datetime"?P$e(i).test(e.data)||(o=this._getOrReturnCtx(e,o),ut(o,{code:Fe.invalid_string,validation:"datetime",message:i.message}),n.dirty()):i.kind==="date"?$Jt.test(e.data)||(o=this._getOrReturnCtx(e,o),ut(o,{code:Fe.invalid_string,validation:"date",message:i.message}),n.dirty()):i.kind==="time"?BJt(i).test(e.data)||(o=this._getOrReturnCtx(e,o),ut(o,{code:Fe.invalid_string,validation:"time",message:i.message}),n.dirty()):i.kind==="duration"?IJt.test(e.data)||(o=this._getOrReturnCtx(e,o),ut(o,{validation:"duration",code:Fe.invalid_string,message:i.message}),n.dirty()):i.kind==="ip"?qJt(e.data,i.version)||(o=this._getOrReturnCtx(e,o),ut(o,{validation:"ip",code:Fe.invalid_string,message:i.message}),n.dirty()):i.kind==="jwt"?UJt(e.data,i.alg)||(o=this._getOrReturnCtx(e,o),ut(o,{validation:"jwt",code:Fe.invalid_string,message:i.message}),n.dirty()):i.kind==="cidr"?zJt(e.data,i.version)||(o=this._getOrReturnCtx(e,o),ut(o,{validation:"cidr",code:Fe.invalid_string,message:i.message}),n.dirty()):i.kind==="base64"?FJt.test(e.data)||(o=this._getOrReturnCtx(e,o),ut(o,{validation:"base64",code:Fe.invalid_string,message:i.message}),n.dirty()):i.kind==="base64url"?kJt.test(e.data)||(o=this._getOrReturnCtx(e,o),ut(o,{validation:"base64url",code:Fe.invalid_string,message:i.message}),n.dirty()):Kn.assertNever(i);return{status:n.value,value:e.data}}_regex(e,r,n){return this.refinement(o=>e.test(o),{validation:r,code:Fe.invalid_string,...Ft.errToObj(n)})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...Ft.errToObj(e)})}url(e){return this._addCheck({kind:"url",...Ft.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...Ft.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...Ft.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...Ft.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...Ft.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...Ft.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...Ft.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...Ft.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...Ft.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...Ft.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...Ft.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...Ft.errToObj(e)})}datetime(e){var r,n;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof e?.precision>"u"?null:e?.precision,offset:(r=e?.offset)!==null&&r!==void 0?r:!1,local:(n=e?.local)!==null&&n!==void 0?n:!1,...Ft.errToObj(e?.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof e?.precision>"u"?null:e?.precision,...Ft.errToObj(e?.message)})}duration(e){return this._addCheck({kind:"duration",...Ft.errToObj(e)})}regex(e,r){return this._addCheck({kind:"regex",regex:e,...Ft.errToObj(r)})}includes(e,r){return this._addCheck({kind:"includes",value:e,position:r?.position,...Ft.errToObj(r?.message)})}startsWith(e,r){return this._addCheck({kind:"startsWith",value:e,...Ft.errToObj(r)})}endsWith(e,r){return this._addCheck({kind:"endsWith",value:e,...Ft.errToObj(r)})}min(e,r){return this._addCheck({kind:"min",value:e,...Ft.errToObj(r)})}max(e,r){return this._addCheck({kind:"max",value:e,...Ft.errToObj(r)})}length(e,r){return this._addCheck({kind:"length",value:e,...Ft.errToObj(r)})}nonempty(e){return this.min(1,Ft.errToObj(e))}trim(){return new t({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new t({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new t({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxLength(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}};eE.create=t=>{var e;return new eE({checks:[],typeName:ce.ZodString,coerce:(e=t?.coerce)!==null&&e!==void 0?e:!1,...zr(t)})};SM=class t extends Hr{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==yt.number){let i=this._getOrReturnCtx(e);return ut(i,{code:Fe.invalid_type,expected:yt.number,received:i.parsedType}),mr}let n,o=new pd;for(let i of this._def.checks)i.kind==="int"?Kn.isInteger(e.data)||(n=this._getOrReturnCtx(e,n),ut(n,{code:Fe.invalid_type,expected:"integer",received:"float",message:i.message}),o.dirty()):i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(n=this._getOrReturnCtx(e,n),ut(n,{code:Fe.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),o.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(n=this._getOrReturnCtx(e,n),ut(n,{code:Fe.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),o.dirty()):i.kind==="multipleOf"?HJt(e.data,i.value)!==0&&(n=this._getOrReturnCtx(e,n),ut(n,{code:Fe.not_multiple_of,multipleOf:i.value,message:i.message}),o.dirty()):i.kind==="finite"?Number.isFinite(e.data)||(n=this._getOrReturnCtx(e,n),ut(n,{code:Fe.not_finite,message:i.message}),o.dirty()):Kn.assertNever(i);return{status:o.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,Ft.toString(r))}gt(e,r){return this.setLimit("min",e,!1,Ft.toString(r))}lte(e,r){return this.setLimit("max",e,!0,Ft.toString(r))}lt(e,r){return this.setLimit("max",e,!1,Ft.toString(r))}setLimit(e,r,n,o){return new t({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:Ft.toString(o)}]})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:Ft.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Ft.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Ft.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Ft.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Ft.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:Ft.toString(r)})}finite(e){return this._addCheck({kind:"finite",message:Ft.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Ft.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Ft.toString(e)})}get minValue(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&Kn.isInteger(e.value))}get isFinite(){let e=null,r=null;for(let n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(r===null||n.value>r)&&(r=n.value):n.kind==="max"&&(e===null||n.value<e)&&(e=n.value)}return Number.isFinite(r)&&Number.isFinite(e)}};SM.create=t=>new SM({checks:[],typeName:ce.ZodNumber,coerce:t?.coerce||!1,...zr(t)});xM=class t extends Hr{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==yt.bigint)return this._getInvalidInput(e);let n,o=new pd;for(let i of this._def.checks)i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(n=this._getOrReturnCtx(e,n),ut(n,{code:Fe.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),o.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(n=this._getOrReturnCtx(e,n),ut(n,{code:Fe.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),o.dirty()):i.kind==="multipleOf"?e.data%i.value!==BigInt(0)&&(n=this._getOrReturnCtx(e,n),ut(n,{code:Fe.not_multiple_of,multipleOf:i.value,message:i.message}),o.dirty()):Kn.assertNever(i);return{status:o.value,value:e.data}}_getInvalidInput(e){let r=this._getOrReturnCtx(e);return ut(r,{code:Fe.invalid_type,expected:yt.bigint,received:r.parsedType}),mr}gte(e,r){return this.setLimit("min",e,!0,Ft.toString(r))}gt(e,r){return this.setLimit("min",e,!1,Ft.toString(r))}lte(e,r){return this.setLimit("max",e,!0,Ft.toString(r))}lt(e,r){return this.setLimit("max",e,!1,Ft.toString(r))}setLimit(e,r,n,o){return new t({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:Ft.toString(o)}]})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Ft.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Ft.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Ft.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Ft.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:Ft.toString(r)})}get minValue(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}};xM.create=t=>{var e;return new xM({checks:[],typeName:ce.ZodBigInt,coerce:(e=t?.coerce)!==null&&e!==void 0?e:!1,...zr(t)})};CM=class extends Hr{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==yt.boolean){let n=this._getOrReturnCtx(e);return ut(n,{code:Fe.invalid_type,expected:yt.boolean,received:n.parsedType}),mr}return cf(e.data)}};CM.create=t=>new CM({typeName:ce.ZodBoolean,coerce:t?.coerce||!1,...zr(t)});OM=class t extends Hr{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==yt.date){let i=this._getOrReturnCtx(e);return ut(i,{code:Fe.invalid_type,expected:yt.date,received:i.parsedType}),mr}if(isNaN(e.data.getTime())){let i=this._getOrReturnCtx(e);return ut(i,{code:Fe.invalid_date}),mr}let n=new pd,o;for(let i of this._def.checks)i.kind==="min"?e.data.getTime()<i.value&&(o=this._getOrReturnCtx(e,o),ut(o,{code:Fe.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),n.dirty()):i.kind==="max"?e.data.getTime()>i.value&&(o=this._getOrReturnCtx(e,o),ut(o,{code:Fe.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),n.dirty()):Kn.assertNever(i);return{status:n.value,value:new Date(e.data.getTime())}}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}min(e,r){return this._addCheck({kind:"min",value:e.getTime(),message:Ft.toString(r)})}max(e,r){return this._addCheck({kind:"max",value:e.getTime(),message:Ft.toString(r)})}get minDate(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e!=null?new Date(e):null}};OM.create=t=>new OM({checks:[],coerce:t?.coerce||!1,typeName:ce.ZodDate,...zr(t)});eL=class extends Hr{_parse(e){if(this._getType(e)!==yt.symbol){let n=this._getOrReturnCtx(e);return ut(n,{code:Fe.invalid_type,expected:yt.symbol,received:n.parsedType}),mr}return cf(e.data)}};eL.create=t=>new eL({typeName:ce.ZodSymbol,...zr(t)});PM=class extends Hr{_parse(e){if(this._getType(e)!==yt.undefined){let n=this._getOrReturnCtx(e);return ut(n,{code:Fe.invalid_type,expected:yt.undefined,received:n.parsedType}),mr}return cf(e.data)}};PM.create=t=>new PM({typeName:ce.ZodUndefined,...zr(t)});EM=class extends Hr{_parse(e){if(this._getType(e)!==yt.null){let n=this._getOrReturnCtx(e);return ut(n,{code:Fe.invalid_type,expected:yt.null,received:n.parsedType}),mr}return cf(e.data)}};EM.create=t=>new EM({typeName:ce.ZodNull,...zr(t)});tE=class extends Hr{constructor(){super(...arguments),this._any=!0}_parse(e){return cf(e.data)}};tE.create=t=>new tE({typeName:ce.ZodAny,...zr(t)});Xx=class extends Hr{constructor(){super(...arguments),this._unknown=!0}_parse(e){return cf(e.data)}};Xx.create=t=>new Xx({typeName:ce.ZodUnknown,...zr(t)});Vg=class extends Hr{_parse(e){let r=this._getOrReturnCtx(e);return ut(r,{code:Fe.invalid_type,expected:yt.never,received:r.parsedType}),mr}};Vg.create=t=>new Vg({typeName:ce.ZodNever,...zr(t)});tL=class extends Hr{_parse(e){if(this._getType(e)!==yt.undefined){let n=this._getOrReturnCtx(e);return ut(n,{code:Fe.invalid_type,expected:yt.void,received:n.parsedType}),mr}return cf(e.data)}};tL.create=t=>new tL({typeName:ce.ZodVoid,...zr(t)});Qx=class t extends Hr{_parse(e){let{ctx:r,status:n}=this._processInputParams(e),o=this._def;if(r.parsedType!==yt.array)return ut(r,{code:Fe.invalid_type,expected:yt.array,received:r.parsedType}),mr;if(o.exactLength!==null){let a=r.data.length>o.exactLength.value,s=r.data.length<o.exactLength.value;(a||s)&&(ut(r,{code:a?Fe.too_big:Fe.too_small,minimum:s?o.exactLength.value:void 0,maximum:a?o.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:o.exactLength.message}),n.dirty())}if(o.minLength!==null&&r.data.length<o.minLength.value&&(ut(r,{code:Fe.too_small,minimum:o.minLength.value,type:"array",inclusive:!0,exact:!1,message:o.minLength.message}),n.dirty()),o.maxLength!==null&&r.data.length>o.maxLength.value&&(ut(r,{code:Fe.too_big,maximum:o.maxLength.value,type:"array",inclusive:!0,exact:!1,message:o.maxLength.message}),n.dirty()),r.common.async)return Promise.all([...r.data].map((a,s)=>o.type._parseAsync(new oh(r,a,r.path,s)))).then(a=>pd.mergeArray(n,a));let i=[...r.data].map((a,s)=>o.type._parseSync(new oh(r,a,r.path,s)));return pd.mergeArray(n,i)}get element(){return this._def.type}min(e,r){return new t({...this._def,minLength:{value:e,message:Ft.toString(r)}})}max(e,r){return new t({...this._def,maxLength:{value:e,message:Ft.toString(r)}})}length(e,r){return new t({...this._def,exactLength:{value:e,message:Ft.toString(r)}})}nonempty(e){return this.min(1,e)}};Qx.create=(t,e)=>new Qx({type:t,minLength:null,maxLength:null,exactLength:null,typeName:ce.ZodArray,...zr(e)});Qf=class t extends Hr{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;let e=this._def.shape(),r=Kn.objectKeys(e);return this._cached={shape:e,keys:r}}_parse(e){if(this._getType(e)!==yt.object){let l=this._getOrReturnCtx(e);return ut(l,{code:Fe.invalid_type,expected:yt.object,received:l.parsedType}),mr}let{status:n,ctx:o}=this._processInputParams(e),{shape:i,keys:a}=this._getCached(),s=[];if(!(this._def.catchall instanceof Vg&&this._def.unknownKeys==="strip"))for(let l in o.data)a.includes(l)||s.push(l);let u=[];for(let l of a){let c=i[l],d=o.data[l];u.push({key:{status:"valid",value:l},value:c._parse(new oh(o,d,o.path,l)),alwaysSet:l in o.data})}if(this._def.catchall instanceof Vg){let l=this._def.unknownKeys;if(l==="passthrough")for(let c of s)u.push({key:{status:"valid",value:c},value:{status:"valid",value:o.data[c]}});else if(l==="strict")s.length>0&&(ut(o,{code:Fe.unrecognized_keys,keys:s}),n.dirty());else if(l!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{let l=this._def.catchall;for(let c of s){let d=o.data[c];u.push({key:{status:"valid",value:c},value:l._parse(new oh(o,d,o.path,c)),alwaysSet:c in o.data})}}return o.common.async?Promise.resolve().then(async()=>{let l=[];for(let c of u){let d=await c.key,f=await c.value;l.push({key:d,value:f,alwaysSet:c.alwaysSet})}return l}).then(l=>pd.mergeObjectSync(n,l)):pd.mergeObjectSync(n,u)}get shape(){return this._def.shape()}strict(e){return Ft.errToObj,new t({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(r,n)=>{var o,i,a,s;let u=(a=(i=(o=this._def).errorMap)===null||i===void 0?void 0:i.call(o,r,n).message)!==null&&a!==void 0?a:n.defaultError;return r.code==="unrecognized_keys"?{message:(s=Ft.errToObj(e).message)!==null&&s!==void 0?s:u}:{message:u}}}:{}})}strip(){return new t({...this._def,unknownKeys:"strip"})}passthrough(){return new t({...this._def,unknownKeys:"passthrough"})}extend(e){return new t({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new t({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:ce.ZodObject})}setKey(e,r){return this.augment({[e]:r})}catchall(e){return new t({...this._def,catchall:e})}pick(e){let r={};return Kn.objectKeys(e).forEach(n=>{e[n]&&this.shape[n]&&(r[n]=this.shape[n])}),new t({...this._def,shape:()=>r})}omit(e){let r={};return Kn.objectKeys(this.shape).forEach(n=>{e[n]||(r[n]=this.shape[n])}),new t({...this._def,shape:()=>r})}deepPartial(){return ZD(this)}partial(e){let r={};return Kn.objectKeys(this.shape).forEach(n=>{let o=this.shape[n];e&&!e[n]?r[n]=o:r[n]=o.optional()}),new t({...this._def,shape:()=>r})}required(e){let r={};return Kn.objectKeys(this.shape).forEach(n=>{if(e&&!e[n])r[n]=this.shape[n];else{let i=this.shape[n];for(;i instanceof Xf;)i=i._def.innerType;r[n]=i}}),new t({...this._def,shape:()=>r})}keyof(){return E$e(Kn.objectKeys(this.shape))}};Qf.create=(t,e)=>new Qf({shape:()=>t,unknownKeys:"strip",catchall:Vg.create(),typeName:ce.ZodObject,...zr(e)});Qf.strictCreate=(t,e)=>new Qf({shape:()=>t,unknownKeys:"strict",catchall:Vg.create(),typeName:ce.ZodObject,...zr(e)});Qf.lazycreate=(t,e)=>new Qf({shape:t,unknownKeys:"strip",catchall:Vg.create(),typeName:ce.ZodObject,...zr(e)});TM=class extends Hr{_parse(e){let{ctx:r}=this._processInputParams(e),n=this._def.options;function o(i){for(let s of i)if(s.result.status==="valid")return s.result;for(let s of i)if(s.result.status==="dirty")return r.common.issues.push(...s.ctx.common.issues),s.result;let a=i.map(s=>new tm(s.ctx.common.issues));return ut(r,{code:Fe.invalid_union,unionErrors:a}),mr}if(r.common.async)return Promise.all(n.map(async i=>{let a={...r,common:{...r.common,issues:[]},parent:null};return{result:await i._parseAsync({data:r.data,path:r.path,parent:a}),ctx:a}})).then(o);{let i,a=[];for(let u of n){let l={...r,common:{...r.common,issues:[]},parent:null},c=u._parseSync({data:r.data,path:r.path,parent:l});if(c.status==="valid")return c;c.status==="dirty"&&!i&&(i={result:c,ctx:l}),l.common.issues.length&&a.push(l.common.issues)}if(i)return r.common.issues.push(...i.ctx.common.issues),i.result;let s=a.map(u=>new tm(u));return ut(r,{code:Fe.invalid_union,unionErrors:s}),mr}}get options(){return this._def.options}};TM.create=(t,e)=>new TM({options:t,typeName:ce.ZodUnion,...zr(e)});Yx=t=>t instanceof IM?Yx(t.schema):t instanceof rm?Yx(t.innerType()):t instanceof MM?[t.value]:t instanceof RM?t.options:t instanceof jM?Kn.objectValues(t.enum):t instanceof NM?Yx(t._def.innerType):t instanceof PM?[void 0]:t instanceof EM?[null]:t instanceof Xf?[void 0,...Yx(t.unwrap())]:t instanceof wb?[null,...Yx(t.unwrap())]:t instanceof Oz||t instanceof LM?Yx(t.unwrap()):t instanceof DM?Yx(t._def.innerType):[],E9=class t extends Hr{_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==yt.object)return ut(r,{code:Fe.invalid_type,expected:yt.object,received:r.parsedType}),mr;let n=this.discriminator,o=r.data[n],i=this.optionsMap.get(o);return i?r.common.async?i._parseAsync({data:r.data,path:r.path,parent:r}):i._parseSync({data:r.data,path:r.path,parent:r}):(ut(r,{code:Fe.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),mr)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,r,n){let o=new Map;for(let i of r){let a=Yx(i.shape[e]);if(!a.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(let s of a){if(o.has(s))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(s)}`);o.set(s,i)}}return new t({typeName:ce.ZodDiscriminatedUnion,discriminator:e,options:r,optionsMap:o,...zr(n)})}};AM=class extends Hr{_parse(e){let{status:r,ctx:n}=this._processInputParams(e),o=(i,a)=>{if(qde(i)||qde(a))return mr;let s=zde(i.value,a.value);return s.valid?((Ude(i)||Ude(a))&&r.dirty(),{status:r.value,value:s.data}):(ut(n,{code:Fe.invalid_intersection_types}),mr)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([i,a])=>o(i,a)):o(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}};AM.create=(t,e,r)=>new AM({left:t,right:e,typeName:ce.ZodIntersection,...zr(r)});vb=class t extends Hr{_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==yt.array)return ut(n,{code:Fe.invalid_type,expected:yt.array,received:n.parsedType}),mr;if(n.data.length<this._def.items.length)return ut(n,{code:Fe.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),mr;!this._def.rest&&n.data.length>this._def.items.length&&(ut(n,{code:Fe.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());let i=[...n.data].map((a,s)=>{let u=this._def.items[s]||this._def.rest;return u?u._parse(new oh(n,a,n.path,s)):null}).filter(a=>!!a);return n.common.async?Promise.all(i).then(a=>pd.mergeArray(r,a)):pd.mergeArray(r,i)}get items(){return this._def.items}rest(e){return new t({...this._def,rest:e})}};vb.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new vb({items:t,typeName:ce.ZodTuple,rest:null,...zr(e)})};T9=class t extends Hr{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==yt.object)return ut(n,{code:Fe.invalid_type,expected:yt.object,received:n.parsedType}),mr;let o=[],i=this._def.keyType,a=this._def.valueType;for(let s in n.data)o.push({key:i._parse(new oh(n,s,n.path,s)),value:a._parse(new oh(n,n.data[s],n.path,s)),alwaysSet:s in n.data});return n.common.async?pd.mergeObjectAsync(r,o):pd.mergeObjectSync(r,o)}get element(){return this._def.valueType}static create(e,r,n){return r instanceof Hr?new t({keyType:e,valueType:r,typeName:ce.ZodRecord,...zr(n)}):new t({keyType:eE.create(),valueType:e,typeName:ce.ZodRecord,...zr(r)})}},rL=class extends Hr{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==yt.map)return ut(n,{code:Fe.invalid_type,expected:yt.map,received:n.parsedType}),mr;let o=this._def.keyType,i=this._def.valueType,a=[...n.data.entries()].map(([s,u],l)=>({key:o._parse(new oh(n,s,n.path,[l,"key"])),value:i._parse(new oh(n,u,n.path,[l,"value"]))}));if(n.common.async){let s=new Map;return Promise.resolve().then(async()=>{for(let u of a){let l=await u.key,c=await u.value;if(l.status==="aborted"||c.status==="aborted")return mr;(l.status==="dirty"||c.status==="dirty")&&r.dirty(),s.set(l.value,c.value)}return{status:r.value,value:s}})}else{let s=new Map;for(let u of a){let l=u.key,c=u.value;if(l.status==="aborted"||c.status==="aborted")return mr;(l.status==="dirty"||c.status==="dirty")&&r.dirty(),s.set(l.value,c.value)}return{status:r.value,value:s}}}};rL.create=(t,e,r)=>new rL({valueType:e,keyType:t,typeName:ce.ZodMap,...zr(r)});nL=class t extends Hr{_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==yt.set)return ut(n,{code:Fe.invalid_type,expected:yt.set,received:n.parsedType}),mr;let o=this._def;o.minSize!==null&&n.data.size<o.minSize.value&&(ut(n,{code:Fe.too_small,minimum:o.minSize.value,type:"set",inclusive:!0,exact:!1,message:o.minSize.message}),r.dirty()),o.maxSize!==null&&n.data.size>o.maxSize.value&&(ut(n,{code:Fe.too_big,maximum:o.maxSize.value,type:"set",inclusive:!0,exact:!1,message:o.maxSize.message}),r.dirty());let i=this._def.valueType;function a(u){let l=new Set;for(let c of u){if(c.status==="aborted")return mr;c.status==="dirty"&&r.dirty(),l.add(c.value)}return{status:r.value,value:l}}let s=[...n.data.values()].map((u,l)=>i._parse(new oh(n,u,n.path,l)));return n.common.async?Promise.all(s).then(u=>a(u)):a(s)}min(e,r){return new t({...this._def,minSize:{value:e,message:Ft.toString(r)}})}max(e,r){return new t({...this._def,maxSize:{value:e,message:Ft.toString(r)}})}size(e,r){return this.min(e,r).max(e,r)}nonempty(e){return this.min(1,e)}};nL.create=(t,e)=>new nL({valueType:t,minSize:null,maxSize:null,typeName:ce.ZodSet,...zr(e)});A9=class t extends Hr{constructor(){super(...arguments),this.validate=this.implement}_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==yt.function)return ut(r,{code:Fe.invalid_type,expected:yt.function,received:r.parsedType}),mr;function n(s,u){return O9({data:s,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,C9(),QD].filter(l=>!!l),issueData:{code:Fe.invalid_arguments,argumentsError:u}})}function o(s,u){return O9({data:s,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,C9(),QD].filter(l=>!!l),issueData:{code:Fe.invalid_return_type,returnTypeError:u}})}let i={errorMap:r.common.contextualErrorMap},a=r.data;if(this._def.returns instanceof rE){let s=this;return cf(async function(...u){let l=new tm([]),c=await s._def.args.parseAsync(u,i).catch(p=>{throw l.addIssue(n(u,p)),l}),d=await Reflect.apply(a,this,c);return await s._def.returns._def.type.parseAsync(d,i).catch(p=>{throw l.addIssue(o(d,p)),l})})}else{let s=this;return cf(function(...u){let l=s._def.args.safeParse(u,i);if(!l.success)throw new tm([n(u,l.error)]);let c=Reflect.apply(a,this,l.data),d=s._def.returns.safeParse(c,i);if(!d.success)throw new tm([o(c,d.error)]);return d.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new t({...this._def,args:vb.create(e).rest(Xx.create())})}returns(e){return new t({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,r,n){return new t({args:e||vb.create([]).rest(Xx.create()),returns:r||Xx.create(),typeName:ce.ZodFunction,...zr(n)})}},IM=class extends Hr{get schema(){return this._def.getter()}_parse(e){let{ctx:r}=this._processInputParams(e);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}};IM.create=(t,e)=>new IM({getter:t,typeName:ce.ZodLazy,...zr(e)});MM=class extends Hr{_parse(e){if(e.data!==this._def.value){let r=this._getOrReturnCtx(e);return ut(r,{received:r.data,code:Fe.invalid_literal,expected:this._def.value}),mr}return{status:"valid",value:e.data}}get value(){return this._def.value}};MM.create=(t,e)=>new MM({value:t,typeName:ce.ZodLiteral,...zr(e)});RM=class t extends Hr{constructor(){super(...arguments),Sz.set(this,void 0)}_parse(e){if(typeof e.data!="string"){let r=this._getOrReturnCtx(e),n=this._def.values;return ut(r,{expected:Kn.joinValues(n),received:r.parsedType,code:Fe.invalid_type}),mr}if(P9(this,Sz,"f")||x$e(this,Sz,new Set(this._def.values),"f"),!P9(this,Sz,"f").has(e.data)){let r=this._getOrReturnCtx(e),n=this._def.values;return ut(r,{received:r.data,code:Fe.invalid_enum_value,options:n}),mr}return cf(e.data)}get options(){return this._def.values}get enum(){let e={};for(let r of this._def.values)e[r]=r;return e}get Values(){let e={};for(let r of this._def.values)e[r]=r;return e}get Enum(){let e={};for(let r of this._def.values)e[r]=r;return e}extract(e,r=this._def){return t.create(e,{...this._def,...r})}exclude(e,r=this._def){return t.create(this.options.filter(n=>!e.includes(n)),{...this._def,...r})}};Sz=new WeakMap;RM.create=E$e;jM=class extends Hr{constructor(){super(...arguments),xz.set(this,void 0)}_parse(e){let r=Kn.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==yt.string&&n.parsedType!==yt.number){let o=Kn.objectValues(r);return ut(n,{expected:Kn.joinValues(o),received:n.parsedType,code:Fe.invalid_type}),mr}if(P9(this,xz,"f")||x$e(this,xz,new Set(Kn.getValidEnumValues(this._def.values)),"f"),!P9(this,xz,"f").has(e.data)){let o=Kn.objectValues(r);return ut(n,{received:n.data,code:Fe.invalid_enum_value,options:o}),mr}return cf(e.data)}get enum(){return this._def.values}};xz=new WeakMap;jM.create=(t,e)=>new jM({values:t,typeName:ce.ZodNativeEnum,...zr(e)});rE=class extends Hr{unwrap(){return this._def.type}_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==yt.promise&&r.common.async===!1)return ut(r,{code:Fe.invalid_type,expected:yt.promise,received:r.parsedType}),mr;let n=r.parsedType===yt.promise?r.data:Promise.resolve(r.data);return cf(n.then(o=>this._def.type.parseAsync(o,{path:r.path,errorMap:r.common.contextualErrorMap})))}};rE.create=(t,e)=>new rE({type:t,typeName:ce.ZodPromise,...zr(e)});rm=class extends Hr{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===ce.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){let{status:r,ctx:n}=this._processInputParams(e),o=this._def.effect||null,i={addIssue:a=>{ut(n,a),a.fatal?r.abort():r.dirty()},get path(){return n.path}};if(i.addIssue=i.addIssue.bind(i),o.type==="preprocess"){let a=o.transform(n.data,i);if(n.common.async)return Promise.resolve(a).then(async s=>{if(r.value==="aborted")return mr;let u=await this._def.schema._parseAsync({data:s,path:n.path,parent:n});return u.status==="aborted"?mr:u.status==="dirty"||r.value==="dirty"?XD(u.value):u});{if(r.value==="aborted")return mr;let s=this._def.schema._parseSync({data:a,path:n.path,parent:n});return s.status==="aborted"?mr:s.status==="dirty"||r.value==="dirty"?XD(s.value):s}}if(o.type==="refinement"){let a=s=>{let u=o.refinement(s,i);if(n.common.async)return Promise.resolve(u);if(u instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return s};if(n.common.async===!1){let s=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return s.status==="aborted"?mr:(s.status==="dirty"&&r.dirty(),a(s.value),{status:r.value,value:s.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(s=>s.status==="aborted"?mr:(s.status==="dirty"&&r.dirty(),a(s.value).then(()=>({status:r.value,value:s.value}))))}if(o.type==="transform")if(n.common.async===!1){let a=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!wM(a))return a;let s=o.transform(a.value,i);if(s instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:s}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(a=>wM(a)?Promise.resolve(o.transform(a.value,i)).then(s=>({status:r.value,value:s})):a);Kn.assertNever(o)}};rm.create=(t,e,r)=>new rm({schema:t,typeName:ce.ZodEffects,effect:e,...zr(r)});rm.createWithPreprocess=(t,e,r)=>new rm({schema:e,effect:{type:"preprocess",transform:t},typeName:ce.ZodEffects,...zr(r)});Xf=class extends Hr{_parse(e){return this._getType(e)===yt.undefined?cf(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};Xf.create=(t,e)=>new Xf({innerType:t,typeName:ce.ZodOptional,...zr(e)});wb=class extends Hr{_parse(e){return this._getType(e)===yt.null?cf(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};wb.create=(t,e)=>new wb({innerType:t,typeName:ce.ZodNullable,...zr(e)});NM=class extends Hr{_parse(e){let{ctx:r}=this._processInputParams(e),n=r.data;return r.parsedType===yt.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:r.path,parent:r})}removeDefault(){return this._def.innerType}};NM.create=(t,e)=>new NM({innerType:t,typeName:ce.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...zr(e)});DM=class extends Hr{_parse(e){let{ctx:r}=this._processInputParams(e),n={...r,common:{...r.common,issues:[]}},o=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return Cz(o)?o.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new tm(n.common.issues)},input:n.data})})):{status:"valid",value:o.status==="valid"?o.value:this._def.catchValue({get error(){return new tm(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}};DM.create=(t,e)=>new DM({innerType:t,typeName:ce.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...zr(e)});oL=class extends Hr{_parse(e){if(this._getType(e)!==yt.nan){let n=this._getOrReturnCtx(e);return ut(n,{code:Fe.invalid_type,expected:yt.nan,received:n.parsedType}),mr}return{status:"valid",value:e.data}}};oL.create=t=>new oL({typeName:ce.ZodNaN,...zr(t)});VJt=Symbol("zod_brand"),Oz=class extends Hr{_parse(e){let{ctx:r}=this._processInputParams(e),n=r.data;return this._def.type._parse({data:n,path:r.path,parent:r})}unwrap(){return this._def.type}},Pz=class t extends Hr{_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.common.async)return(async()=>{let i=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return i.status==="aborted"?mr:i.status==="dirty"?(r.dirty(),XD(i.value)):this._def.out._parseAsync({data:i.value,path:n.path,parent:n})})();{let o=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return o.status==="aborted"?mr:o.status==="dirty"?(r.dirty(),{status:"dirty",value:o.value}):this._def.out._parseSync({data:o.value,path:n.path,parent:n})}}static create(e,r){return new t({in:e,out:r,typeName:ce.ZodPipeline})}},LM=class extends Hr{_parse(e){let r=this._def.innerType._parse(e),n=o=>(wM(o)&&(o.value=Object.freeze(o.value)),o);return Cz(r)?r.then(o=>n(o)):n(r)}unwrap(){return this._def.innerType}};LM.create=(t,e)=>new LM({innerType:t,typeName:ce.ZodReadonly,...zr(e)});WJt={object:Qf.lazycreate};(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(ce||(ce={}));KJt=(t,e={message:`Input not instance of ${t.name}`})=>T$e(r=>r instanceof t,e),A$e=eE.create,I$e=SM.create,GJt=oL.create,JJt=xM.create,M$e=CM.create,YJt=OM.create,ZJt=eL.create,XJt=PM.create,QJt=EM.create,e7t=tE.create,t7t=Xx.create,r7t=Vg.create,n7t=tL.create,o7t=Qx.create,i7t=Qf.create,a7t=Qf.strictCreate,s7t=TM.create,u7t=E9.create,l7t=AM.create,c7t=vb.create,d7t=T9.create,f7t=rL.create,p7t=nL.create,m7t=A9.create,h7t=IM.create,g7t=MM.create,y7t=RM.create,b7t=jM.create,_7t=rE.create,w$e=rm.create,v7t=Xf.create,w7t=wb.create,S7t=rm.createWithPreprocess,x7t=Pz.create,C7t=()=>A$e().optional(),O7t=()=>I$e().optional(),P7t=()=>M$e().optional(),E7t={string:t=>eE.create({...t,coerce:!0}),number:t=>SM.create({...t,coerce:!0}),boolean:t=>CM.create({...t,coerce:!0}),bigint:t=>xM.create({...t,coerce:!0}),date:t=>OM.create({...t,coerce:!0})},T7t=mr,Vr=Object.freeze({__proto__:null,defaultErrorMap:QD,setErrorMap:SJt,getErrorMap:C9,makeIssue:O9,EMPTY_PATH:xJt,addIssueToContext:ut,ParseStatus:pd,INVALID:mr,DIRTY:XD,OK:cf,isAborted:qde,isDirty:Ude,isValid:wM,isAsync:Cz,get util(){return Kn},get objectUtil(){return Bde},ZodParsedType:yt,getParsedType:Zx,ZodType:Hr,datetimeRegex:P$e,ZodString:eE,ZodNumber:SM,ZodBigInt:xM,ZodBoolean:CM,ZodDate:OM,ZodSymbol:eL,ZodUndefined:PM,ZodNull:EM,ZodAny:tE,ZodUnknown:Xx,ZodNever:Vg,ZodVoid:tL,ZodArray:Qx,ZodObject:Qf,ZodUnion:TM,ZodDiscriminatedUnion:E9,ZodIntersection:AM,ZodTuple:vb,ZodRecord:T9,ZodMap:rL,ZodSet:nL,ZodFunction:A9,ZodLazy:IM,ZodLiteral:MM,ZodEnum:RM,ZodNativeEnum:jM,ZodPromise:rE,ZodEffects:rm,ZodTransformer:rm,ZodOptional:Xf,ZodNullable:wb,ZodDefault:NM,ZodCatch:DM,ZodNaN:oL,BRAND:VJt,ZodBranded:Oz,ZodPipeline:Pz,ZodReadonly:LM,custom:T$e,Schema:Hr,ZodSchema:Hr,late:WJt,get ZodFirstPartyTypeKind(){return ce},coerce:E7t,any:e7t,array:o7t,bigint:JJt,boolean:M$e,date:YJt,discriminatedUnion:u7t,effect:w$e,enum:y7t,function:m7t,instanceof:KJt,intersection:l7t,lazy:h7t,literal:g7t,map:f7t,nan:GJt,nativeEnum:b7t,never:r7t,null:QJt,nullable:w7t,number:I$e,object:i7t,oboolean:P7t,onumber:O7t,optional:v7t,ostring:C7t,pipeline:x7t,preprocess:S7t,promise:_7t,record:d7t,set:p7t,strictObject:a7t,string:A$e,symbol:ZJt,transformer:w$e,tuple:c7t,undefined:XJt,union:s7t,unknown:t7t,void:n7t,NEVER:T7t,ZodIssueCode:Fe,quotelessJson:wJt,ZodError:tm})});var j$e=v((ZPn,R$e)=>{function ih(t,e){typeof e=="boolean"&&(e={forever:e}),this._originalTimeouts=JSON.parse(JSON.stringify(t)),this._timeouts=t,this._options=e||{},this._maxRetryTime=e&&e.maxRetryTime||1/0,this._fn=null,this._errors=[],this._attempts=1,this._operationTimeout=null,this._operationTimeoutCb=null,this._timeout=null,this._operationStart=null,this._timer=null,this._options.forever&&(this._cachedTimeouts=this._timeouts.slice(0))}R$e.exports=ih;ih.prototype.reset=function(){this._attempts=1,this._timeouts=this._originalTimeouts.slice(0)};ih.prototype.stop=function(){this._timeout&&clearTimeout(this._timeout),this._timer&&clearTimeout(this._timer),this._timeouts=[],this._cachedTimeouts=null};ih.prototype.retry=function(t){if(this._timeout&&clearTimeout(this._timeout),!t)return!1;var e=new Date().getTime();if(t&&e-this._operationStart>=this._maxRetryTime)return this._errors.push(t),this._errors.unshift(new Error("RetryOperation timeout occurred")),!1;this._errors.push(t);var r=this._timeouts.shift();if(r===void 0)if(this._cachedTimeouts)this._errors.splice(0,this._errors.length-1),r=this._cachedTimeouts.slice(-1);else return!1;var n=this;return this._timer=setTimeout(function(){n._attempts++,n._operationTimeoutCb&&(n._timeout=setTimeout(function(){n._operationTimeoutCb(n._attempts)},n._operationTimeout),n._options.unref&&n._timeout.unref()),n._fn(n._attempts)},r),this._options.unref&&this._timer.unref(),!0};ih.prototype.attempt=function(t,e){this._fn=t,e&&(e.timeout&&(this._operationTimeout=e.timeout),e.cb&&(this._operationTimeoutCb=e.cb));var r=this;this._operationTimeoutCb&&(this._timeout=setTimeout(function(){r._operationTimeoutCb()},r._operationTimeout)),this._operationStart=new Date().getTime(),this._fn(this._attempts)};ih.prototype.try=function(t){console.log("Using RetryOperation.try() is deprecated"),this.attempt(t)};ih.prototype.start=function(t){console.log("Using RetryOperation.start() is deprecated"),this.attempt(t)};ih.prototype.start=ih.prototype.try;ih.prototype.errors=function(){return this._errors};ih.prototype.attempts=function(){return this._attempts};ih.prototype.mainError=function(){if(this._errors.length===0)return null;for(var t={},e=null,r=0,n=0;n<this._errors.length;n++){var o=this._errors[n],i=o.message,a=(t[i]||0)+1;t[i]=a,a>=r&&(e=o,r=a)}return e}});var N$e=v(FM=>{var A7t=j$e();FM.operation=function(t){var e=FM.timeouts(t);return new A7t(e,{forever:t&&(t.forever||t.retries===1/0),unref:t&&t.unref,maxRetryTime:t&&t.maxRetryTime})};FM.timeouts=function(t){if(t instanceof Array)return[].concat(t);var e={retries:10,factor:2,minTimeout:1*1e3,maxTimeout:1/0,randomize:!1};for(var r in t)e[r]=t[r];if(e.minTimeout>e.maxTimeout)throw new Error("minTimeout is greater than maxTimeout");for(var n=[],o=0;o<e.retries;o++)n.push(this.createTimeout(o,e));return t&&t.forever&&!n.length&&n.push(this.createTimeout(o,e)),n.sort(function(i,a){return i-a}),n};FM.createTimeout=function(t,e){var r=e.randomize?Math.random()+1:1,n=Math.round(r*Math.max(e.minTimeout,1)*Math.pow(e.factor,t));return n=Math.min(n,e.maxTimeout),n};FM.wrap=function(t,e,r){if(e instanceof Array&&(r=e,e=null),!r){r=[];for(var n in t)typeof t[n]=="function"&&r.push(n)}for(var o=0;o<r.length;o++){var i=r[o],a=t[i];t[i]=function(u){var l=FM.operation(e),c=Array.prototype.slice.call(arguments,1),d=c.pop();c.push(function(f){l.retry(f)||(f&&(arguments[0]=l.mainError()),d.apply(this,arguments))}),l.attempt(function(){u.apply(t,c)})}.bind(t,a),t[i].options=e}}});var L$e=v((QPn,D$e)=>{D$e.exports=N$e()});var R9=v((eEn,M9)=>{"use strict";var I7t=L$e(),M7t=["Failed to fetch","NetworkError when attempting to fetch resource.","The Internet connection appears to be offline.","Network request failed"],I9=class extends Error{constructor(e){super(),e instanceof Error?(this.originalError=e,{message:e}=e):(this.originalError=new Error(e),this.originalError.stack=this.stack),this.name="AbortError",this.message=e}},R7t=(t,e,r)=>{let n=r.retries-(e-1);return t.attemptNumber=e,t.retriesLeft=n,t},j7t=t=>M7t.includes(t),F$e=(t,e)=>new Promise((r,n)=>{e={onFailedAttempt:()=>{},retries:10,...e};let o=I7t.operation(e);o.attempt(async i=>{try{r(await t(i))}catch(a){if(!(a instanceof Error)){n(new TypeError(`Non-error was thrown: "${a}". You should only throw errors.`));return}if(a instanceof I9)o.stop(),n(a.originalError);else if(a instanceof TypeError&&!j7t(a.message))o.stop(),n(a);else{R7t(a,i,e);try{await e.onFailedAttempt(a)}catch(s){n(s);return}o.retry(a)||n(o.mainError())}}})});M9.exports=F$e;M9.exports.default=F$e;M9.exports.AbortError=I9});var k$e,$$e=O(()=>{k$e=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-8][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/i});function N7t(t){return typeof t=="string"&&k$e.test(t)}var nE,B$e=O(()=>{$$e();nE=N7t});function q$e(t,e=0){return(pc[t[e+0]]+pc[t[e+1]]+pc[t[e+2]]+pc[t[e+3]]+"-"+pc[t[e+4]]+pc[t[e+5]]+"-"+pc[t[e+6]]+pc[t[e+7]]+"-"+pc[t[e+8]]+pc[t[e+9]]+"-"+pc[t[e+10]]+pc[t[e+11]]+pc[t[e+12]]+pc[t[e+13]]+pc[t[e+14]]+pc[t[e+15]]).toLowerCase()}var pc,j9,U$e=O(()=>{pc=[];for(j9=0;j9<256;++j9)pc.push((j9+256).toString(16).slice(1))});function Hde(){if(!N9&&(N9=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!N9))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return N9(D7t)}var N9,D7t,z$e=O(()=>{D7t=new Uint8Array(16)});var L7t,Vde,H$e=O(()=>{L7t=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Vde={randomUUID:L7t}});function F7t(t,e,r){if(Vde.randomUUID&&!e&&!t)return Vde.randomUUID();t=t||{};var n=t.random||(t.rng||Hde)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){r=r||0;for(var o=0;o<16;++o)e[r+o]=n[o];return e}return q$e(n)}var Qa,V$e=O(()=>{H$e();z$e();U$e();Qa=F7t});var oE=O(()=>{V$e();B$e()});var K$e=v((pEn,Wde)=>{"use strict";var k7t=Object.prototype.hasOwnProperty,df="~";function Ez(){}Object.create&&(Ez.prototype=Object.create(null),new Ez().__proto__||(df=!1));function $7t(t,e,r){this.fn=t,this.context=e,this.once=r||!1}function W$e(t,e,r,n,o){if(typeof r!="function")throw new TypeError("The listener must be a function");var i=new $7t(r,n||t,o),a=df?df+e:e;return t._events[a]?t._events[a].fn?t._events[a]=[t._events[a],i]:t._events[a].push(i):(t._events[a]=i,t._eventsCount++),t}function L9(t,e){--t._eventsCount===0?t._events=new Ez:delete t._events[e]}function hd(){this._events=new Ez,this._eventsCount=0}hd.prototype.eventNames=function(){var e=[],r,n;if(this._eventsCount===0)return e;for(n in r=this._events)k7t.call(r,n)&&e.push(df?n.slice(1):n);return Object.getOwnPropertySymbols?e.concat(Object.getOwnPropertySymbols(r)):e};hd.prototype.listeners=function(e){var r=df?df+e:e,n=this._events[r];if(!n)return[];if(n.fn)return[n.fn];for(var o=0,i=n.length,a=new Array(i);o<i;o++)a[o]=n[o].fn;return a};hd.prototype.listenerCount=function(e){var r=df?df+e:e,n=this._events[r];return n?n.fn?1:n.length:0};hd.prototype.emit=function(e,r,n,o,i,a){var s=df?df+e:e;if(!this._events[s])return!1;var u=this._events[s],l=arguments.length,c,d;if(u.fn){switch(u.once&&this.removeListener(e,u.fn,void 0,!0),l){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,r),!0;case 3:return u.fn.call(u.context,r,n),!0;case 4:return u.fn.call(u.context,r,n,o),!0;case 5:return u.fn.call(u.context,r,n,o,i),!0;case 6:return u.fn.call(u.context,r,n,o,i,a),!0}for(d=1,c=new Array(l-1);d<l;d++)c[d-1]=arguments[d];u.fn.apply(u.context,c)}else{var f=u.length,p;for(d=0;d<f;d++)switch(u[d].once&&this.removeListener(e,u[d].fn,void 0,!0),l){case 1:u[d].fn.call(u[d].context);break;case 2:u[d].fn.call(u[d].context,r);break;case 3:u[d].fn.call(u[d].context,r,n);break;case 4:u[d].fn.call(u[d].context,r,n,o);break;default:if(!c)for(p=1,c=new Array(l-1);p<l;p++)c[p-1]=arguments[p];u[d].fn.apply(u[d].context,c)}}return!0};hd.prototype.on=function(e,r,n){return W$e(this,e,r,n,!1)};hd.prototype.once=function(e,r,n){return W$e(this,e,r,n,!0)};hd.prototype.removeListener=function(e,r,n,o){var i=df?df+e:e;if(!this._events[i])return this;if(!r)return L9(this,i),this;var a=this._events[i];if(a.fn)a.fn===r&&(!o||a.once)&&(!n||a.context===n)&&L9(this,i);else{for(var s=0,u=[],l=a.length;s<l;s++)(a[s].fn!==r||o&&!a[s].once||n&&a[s].context!==n)&&u.push(a[s]);u.length?this._events[i]=u.length===1?u[0]:u:L9(this,i)}return this};hd.prototype.removeAllListeners=function(e){var r;return e?(r=df?df+e:e,this._events[r]&&L9(this,r)):(this._events=new Ez,this._eventsCount=0),this};hd.prototype.off=hd.prototype.removeListener;hd.prototype.addListener=hd.prototype.on;hd.prefixed=df;hd.EventEmitter=hd;typeof Wde<"u"&&(Wde.exports=hd)});var J$e=v((mEn,G$e)=>{"use strict";G$e.exports=(t,e)=>(e=e||(()=>{}),t.then(r=>new Promise(n=>{n(e())}).then(()=>r),r=>new Promise(n=>{n(e())}).then(()=>{throw r})))});var Z$e=v((hEn,k9)=>{"use strict";var B7t=J$e(),F9=class extends Error{constructor(e){super(e),this.name="TimeoutError"}},Y$e=(t,e,r)=>new Promise((n,o)=>{if(typeof e!="number"||e<0)throw new TypeError("Expected `milliseconds` to be a positive number");if(e===1/0){n(t);return}let i=setTimeout(()=>{if(typeof r=="function"){try{n(r())}catch(u){o(u)}return}let a=typeof r=="string"?r:`Promise timed out after ${e} milliseconds`,s=r instanceof Error?r:new F9(a);typeof t.cancel=="function"&&t.cancel(),o(s)},e);B7t(t.then(n,o),()=>{clearTimeout(i)})});k9.exports=Y$e;k9.exports.default=Y$e;k9.exports.TimeoutError=F9});var X$e=v(Kde=>{"use strict";Object.defineProperty(Kde,"__esModule",{value:!0});function q7t(t,e,r){let n=0,o=t.length;for(;o>0;){let i=o/2|0,a=n+i;r(t[a],e)<=0?(n=++a,o-=i+1):o=i}return n}Kde.default=q7t});var Q$e=v(Jde=>{"use strict";Object.defineProperty(Jde,"__esModule",{value:!0});var U7t=X$e(),Gde=class{constructor(){this._queue=[]}enqueue(e,r){r=Object.assign({priority:0},r);let n={priority:r.priority,run:e};if(this.size&&this._queue[this.size-1].priority>=r.priority){this._queue.push(n);return}let o=U7t.default(this._queue,n,(i,a)=>a.priority-i.priority);this._queue.splice(o,0,n)}dequeue(){let e=this._queue.shift();return e?.run}filter(e){return this._queue.filter(r=>r.priority===e.priority).map(r=>r.run)}get size(){return this._queue.length}};Jde.default=Gde});var B9=v(Zde=>{"use strict";Object.defineProperty(Zde,"__esModule",{value:!0});var z7t=K$e(),eBe=Z$e(),H7t=Q$e(),$9=()=>{},V7t=new eBe.TimeoutError,Yde=class extends z7t{constructor(e){var r,n,o,i;if(super(),this._intervalCount=0,this._intervalEnd=0,this._pendingCount=0,this._resolveEmpty=$9,this._resolveIdle=$9,e=Object.assign({carryoverConcurrencyCount:!1,intervalCap:1/0,interval:0,concurrency:1/0,autoStart:!0,queueClass:H7t.default},e),!(typeof e.intervalCap=="number"&&e.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${(n=(r=e.intervalCap)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:""}\` (${typeof e.intervalCap})`);if(e.interval===void 0||!(Number.isFinite(e.interval)&&e.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${(i=(o=e.interval)===null||o===void 0?void 0:o.toString())!==null&&i!==void 0?i:""}\` (${typeof e.interval})`);this._carryoverConcurrencyCount=e.carryoverConcurrencyCount,this._isIntervalIgnored=e.intervalCap===1/0||e.interval===0,this._intervalCap=e.intervalCap,this._interval=e.interval,this._queue=new e.queueClass,this._queueClass=e.queueClass,this.concurrency=e.concurrency,this._timeout=e.timeout,this._throwOnTimeout=e.throwOnTimeout===!0,this._isPaused=e.autoStart===!1}get _doesIntervalAllowAnother(){return this._isIntervalIgnored||this._intervalCount<this._intervalCap}get _doesConcurrentAllowAnother(){return this._pendingCount<this._concurrency}_next(){this._pendingCount--,this._tryToStartAnother(),this.emit("next")}_resolvePromises(){this._resolveEmpty(),this._resolveEmpty=$9,this._pendingCount===0&&(this._resolveIdle(),this._resolveIdle=$9,this.emit("idle"))}_onResumeInterval(){this._onInterval(),this._initializeIntervalIfNeeded(),this._timeoutId=void 0}_isIntervalPaused(){let e=Date.now();if(this._intervalId===void 0){let r=this._intervalEnd-e;if(r<0)this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0;else return this._timeoutId===void 0&&(this._timeoutId=setTimeout(()=>{this._onResumeInterval()},r)),!0}return!1}_tryToStartAnother(){if(this._queue.size===0)return this._intervalId&&clearInterval(this._intervalId),this._intervalId=void 0,this._resolvePromises(),!1;if(!this._isPaused){let e=!this._isIntervalPaused();if(this._doesIntervalAllowAnother&&this._doesConcurrentAllowAnother){let r=this._queue.dequeue();return r?(this.emit("active"),r(),e&&this._initializeIntervalIfNeeded(),!0):!1}}return!1}_initializeIntervalIfNeeded(){this._isIntervalIgnored||this._intervalId!==void 0||(this._intervalId=setInterval(()=>{this._onInterval()},this._interval),this._intervalEnd=Date.now()+this._interval)}_onInterval(){this._intervalCount===0&&this._pendingCount===0&&this._intervalId&&(clearInterval(this._intervalId),this._intervalId=void 0),this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0,this._processQueue()}_processQueue(){for(;this._tryToStartAnother(););}get concurrency(){return this._concurrency}set concurrency(e){if(!(typeof e=="number"&&e>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${e}\` (${typeof e})`);this._concurrency=e,this._processQueue()}async add(e,r={}){return new Promise((n,o)=>{let i=async()=>{this._pendingCount++,this._intervalCount++;try{let a=this._timeout===void 0&&r.timeout===void 0?e():eBe.default(Promise.resolve(e()),r.timeout===void 0?this._timeout:r.timeout,()=>{(r.throwOnTimeout===void 0?this._throwOnTimeout:r.throwOnTimeout)&&o(V7t)});n(await a)}catch(a){o(a)}this._next()};this._queue.enqueue(i,r),this._tryToStartAnother(),this.emit("add")})}async addAll(e,r){return Promise.all(e.map(async n=>this.add(n,r)))}start(){return this._isPaused?(this._isPaused=!1,this._processQueue(),this):this}pause(){this._isPaused=!0}clear(){this._queue=new this._queueClass}async onEmpty(){if(this._queue.size!==0)return new Promise(e=>{let r=this._resolveEmpty;this._resolveEmpty=()=>{r(),e()}})}async onIdle(){if(!(this._pendingCount===0&&this._queue.size===0))return new Promise(e=>{let r=this._resolveIdle;this._resolveIdle=()=>{r(),e()}})}get size(){return this._queue.size}sizeBy(e){return this._queue.filter(e).length}get pending(){return this._pendingCount}get isPaused(){return this._isPaused}get timeout(){return this._timeout}set timeout(e){this._timeout=e}};Zde.default=Yde});var W7t,K7t,Ht,q9=O(()=>{Tz();W7t=(...t)=>fetch(...t),K7t=Symbol.for("ls:fetch_implementation"),Ht=t=>async(...e)=>{if(t||ep("DEBUG")==="true"){let[n,o]=e;console.log(`\u2192 ${o?.method||"GET"} ${n}`)}let r=await(globalThis[K7t]??W7t)(...e);return(t||ep("DEBUG")==="true")&&console.log(`\u2190 ${r.status} ${r.statusText} ${r.url}`),r}});var tBe,U9,G7t,J7t,Az,rBe=O(()=>{tBe=F(R9(),1),U9=F(B9(),1);q9();G7t=[400,401,403,404,405,406,407,408],J7t=[409],Az=class{constructor(e){Object.defineProperty(this,"maxConcurrency",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"maxRetries",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"queue",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"onFailedResponseHook",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"debug",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxConcurrency=e.maxConcurrency??1/0,this.maxRetries=e.maxRetries??6,this.debug=e.debug,"default"in U9.default?this.queue=new U9.default.default({concurrency:this.maxConcurrency}):this.queue=new U9.default({concurrency:this.maxConcurrency}),this.onFailedResponseHook=e?.onFailedResponseHook}call(e,...r){let n=this.onFailedResponseHook;return this.queue.add(()=>(0,tBe.default)(()=>e(...r).catch(o=>{throw o instanceof Error?o:new Error(o)}),{async onFailedAttempt(o){if(o.message.startsWith("Cancel")||o.message.startsWith("TimeoutError")||o.message.startsWith("AbortError")||o?.code==="ECONNABORTED")throw o;let i=o?.response,a=i?.status;if(a){if(G7t.includes(+a))throw o;if(J7t.includes(+a))return;n&&await n(i)}},retries:this.maxRetries,randomize:!0}),{throwOnTimeout:!0})}callWithOptions(e,r,...n){return e.signal?Promise.race([this.call(r,...n),new Promise((o,i)=>{e.signal?.addEventListener("abort",()=>{i(new Error("AbortError"))})})]):this.call(r,...n)}fetch(...e){return this.call(()=>Ht(this.debug)(...e).then(r=>r.ok?r:Promise.reject(r)))}}});function Xde(t){return typeof t?._getType=="function"}function Qde(t){let e={type:t._getType(),data:{content:t.content}};return t?.additional_kwargs&&Object.keys(t.additional_kwargs).length>0&&(e.data.additional_kwargs={...t.additional_kwargs}),e}var nBe=O(()=>{});function Wr(t,e){if(!nE(t)){let r=e!==void 0?`Invalid UUID for ${e}: ${t}`:`Invalid UUID: ${t}`;throw new Error(r)}return t}var oBe=O(()=>{oE()});function z9(t){iBe[t]||(console.warn(t),iBe[t]=!0)}var iBe,efe=O(()=>{iBe={}});var Iz=v((PEn,aBe)=>{var Y7t="2.0.0",Z7t=Number.MAX_SAFE_INTEGER||9007199254740991,X7t=16,Q7t=250,eYt=["major","premajor","minor","preminor","patch","prepatch","prerelease"];aBe.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:X7t,MAX_SAFE_BUILD_LENGTH:Q7t,MAX_SAFE_INTEGER:Z7t,RELEASE_TYPES:eYt,SEMVER_SPEC_VERSION:Y7t,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}});var Mz=v((EEn,sBe)=>{var tYt=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...t)=>console.error("SEMVER",...t):()=>{};sBe.exports=tYt});var iL=v((eC,uBe)=>{var{MAX_SAFE_COMPONENT_LENGTH:tfe,MAX_SAFE_BUILD_LENGTH:rYt,MAX_LENGTH:nYt}=Iz(),oYt=Mz();eC=uBe.exports={};var iYt=eC.re=[],aYt=eC.safeRe=[],wt=eC.src=[],St=eC.t={},sYt=0,rfe="[a-zA-Z0-9-]",uYt=[["\\s",1],["\\d",nYt],[rfe,rYt]],lYt=t=>{for(let[e,r]of uYt)t=t.split(`${e}*`).join(`${e}{0,${r}}`).split(`${e}+`).join(`${e}{1,${r}}`);return t},Lr=(t,e,r)=>{let n=lYt(e),o=sYt++;oYt(t,o,e),St[t]=o,wt[o]=e,iYt[o]=new RegExp(e,r?"g":void 0),aYt[o]=new RegExp(n,r?"g":void 0)};Lr("NUMERICIDENTIFIER","0|[1-9]\\d*");Lr("NUMERICIDENTIFIERLOOSE","\\d+");Lr("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${rfe}*`);Lr("MAINVERSION",`(${wt[St.NUMERICIDENTIFIER]})\\.(${wt[St.NUMERICIDENTIFIER]})\\.(${wt[St.NUMERICIDENTIFIER]})`);Lr("MAINVERSIONLOOSE",`(${wt[St.NUMERICIDENTIFIERLOOSE]})\\.(${wt[St.NUMERICIDENTIFIERLOOSE]})\\.(${wt[St.NUMERICIDENTIFIERLOOSE]})`);Lr("PRERELEASEIDENTIFIER",`(?:${wt[St.NUMERICIDENTIFIER]}|${wt[St.NONNUMERICIDENTIFIER]})`);Lr("PRERELEASEIDENTIFIERLOOSE",`(?:${wt[St.NUMERICIDENTIFIERLOOSE]}|${wt[St.NONNUMERICIDENTIFIER]})`);Lr("PRERELEASE",`(?:-(${wt[St.PRERELEASEIDENTIFIER]}(?:\\.${wt[St.PRERELEASEIDENTIFIER]})*))`);Lr("PRERELEASELOOSE",`(?:-?(${wt[St.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${wt[St.PRERELEASEIDENTIFIERLOOSE]})*))`);Lr("BUILDIDENTIFIER",`${rfe}+`);Lr("BUILD",`(?:\\+(${wt[St.BUILDIDENTIFIER]}(?:\\.${wt[St.BUILDIDENTIFIER]})*))`);Lr("FULLPLAIN",`v?${wt[St.MAINVERSION]}${wt[St.PRERELEASE]}?${wt[St.BUILD]}?`);Lr("FULL",`^${wt[St.FULLPLAIN]}$`);Lr("LOOSEPLAIN",`[v=\\s]*${wt[St.MAINVERSIONLOOSE]}${wt[St.PRERELEASELOOSE]}?${wt[St.BUILD]}?`);Lr("LOOSE",`^${wt[St.LOOSEPLAIN]}$`);Lr("GTLT","((?:<|>)?=?)");Lr("XRANGEIDENTIFIERLOOSE",`${wt[St.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`);Lr("XRANGEIDENTIFIER",`${wt[St.NUMERICIDENTIFIER]}|x|X|\\*`);Lr("XRANGEPLAIN",`[v=\\s]*(${wt[St.XRANGEIDENTIFIER]})(?:\\.(${wt[St.XRANGEIDENTIFIER]})(?:\\.(${wt[St.XRANGEIDENTIFIER]})(?:${wt[St.PRERELEASE]})?${wt[St.BUILD]}?)?)?`);Lr("XRANGEPLAINLOOSE",`[v=\\s]*(${wt[St.XRANGEIDENTIFIERLOOSE]})(?:\\.(${wt[St.XRANGEIDENTIFIERLOOSE]})(?:\\.(${wt[St.XRANGEIDENTIFIERLOOSE]})(?:${wt[St.PRERELEASELOOSE]})?${wt[St.BUILD]}?)?)?`);Lr("XRANGE",`^${wt[St.GTLT]}\\s*${wt[St.XRANGEPLAIN]}$`);Lr("XRANGELOOSE",`^${wt[St.GTLT]}\\s*${wt[St.XRANGEPLAINLOOSE]}$`);Lr("COERCEPLAIN",`(^|[^\\d])(\\d{1,${tfe}})(?:\\.(\\d{1,${tfe}}))?(?:\\.(\\d{1,${tfe}}))?`);Lr("COERCE",`${wt[St.COERCEPLAIN]}(?:$|[^\\d])`);Lr("COERCEFULL",wt[St.COERCEPLAIN]+`(?:${wt[St.PRERELEASE]})?(?:${wt[St.BUILD]})?(?:$|[^\\d])`);Lr("COERCERTL",wt[St.COERCE],!0);Lr("COERCERTLFULL",wt[St.COERCEFULL],!0);Lr("LONETILDE","(?:~>?)");Lr("TILDETRIM",`(\\s*)${wt[St.LONETILDE]}\\s+`,!0);eC.tildeTrimReplace="$1~";Lr("TILDE",`^${wt[St.LONETILDE]}${wt[St.XRANGEPLAIN]}$`);Lr("TILDELOOSE",`^${wt[St.LONETILDE]}${wt[St.XRANGEPLAINLOOSE]}$`);Lr("LONECARET","(?:\\^)");Lr("CARETTRIM",`(\\s*)${wt[St.LONECARET]}\\s+`,!0);eC.caretTrimReplace="$1^";Lr("CARET",`^${wt[St.LONECARET]}${wt[St.XRANGEPLAIN]}$`);Lr("CARETLOOSE",`^${wt[St.LONECARET]}${wt[St.XRANGEPLAINLOOSE]}$`);Lr("COMPARATORLOOSE",`^${wt[St.GTLT]}\\s*(${wt[St.LOOSEPLAIN]})$|^$`);Lr("COMPARATOR",`^${wt[St.GTLT]}\\s*(${wt[St.FULLPLAIN]})$|^$`);Lr("COMPARATORTRIM",`(\\s*)${wt[St.GTLT]}\\s*(${wt[St.LOOSEPLAIN]}|${wt[St.XRANGEPLAIN]})`,!0);eC.comparatorTrimReplace="$1$2$3";Lr("HYPHENRANGE",`^\\s*(${wt[St.XRANGEPLAIN]})\\s+-\\s+(${wt[St.XRANGEPLAIN]})\\s*$`);Lr("HYPHENRANGELOOSE",`^\\s*(${wt[St.XRANGEPLAINLOOSE]})\\s+-\\s+(${wt[St.XRANGEPLAINLOOSE]})\\s*$`);Lr("STAR","(<|>)?=?\\s*\\*");Lr("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$");Lr("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")});var H9=v((TEn,lBe)=>{var cYt=Object.freeze({loose:!0}),dYt=Object.freeze({}),fYt=t=>t?typeof t!="object"?cYt:t:dYt;lBe.exports=fYt});var nfe=v((AEn,fBe)=>{var cBe=/^[0-9]+$/,dBe=(t,e)=>{let r=cBe.test(t),n=cBe.test(e);return r&&n&&(t=+t,e=+e),t===e?0:r&&!n?-1:n&&!r?1:t<e?-1:1},pYt=(t,e)=>dBe(e,t);fBe.exports={compareIdentifiers:dBe,rcompareIdentifiers:pYt}});var gd=v((IEn,gBe)=>{var V9=Mz(),{MAX_LENGTH:pBe,MAX_SAFE_INTEGER:W9}=Iz(),{safeRe:mBe,t:hBe}=iL(),mYt=H9(),{compareIdentifiers:aL}=nfe(),ofe=class t{constructor(e,r){if(r=mYt(r),e instanceof t){if(e.loose===!!r.loose&&e.includePrerelease===!!r.includePrerelease)return e;e=e.version}else if(typeof e!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof e}".`);if(e.length>pBe)throw new TypeError(`version is longer than ${pBe} characters`);V9("SemVer",e,r),this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease;let n=e.trim().match(r.loose?mBe[hBe.LOOSE]:mBe[hBe.FULL]);if(!n)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>W9||this.major<0)throw new TypeError("Invalid major version");if(this.minor>W9||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>W9||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map(o=>{if(/^[0-9]+$/.test(o)){let i=+o;if(i>=0&&i<W9)return i}return o}):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(V9("SemVer.compare",this.version,this.options,e),!(e instanceof t)){if(typeof e=="string"&&e===this.version)return 0;e=new t(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof t||(e=new t(e,this.options)),aL(this.major,e.major)||aL(this.minor,e.minor)||aL(this.patch,e.patch)}comparePre(e){if(e instanceof t||(e=new t(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let r=0;do{let n=this.prerelease[r],o=e.prerelease[r];if(V9("prerelease compare",r,n,o),n===void 0&&o===void 0)return 0;if(o===void 0)return 1;if(n===void 0)return-1;if(n===o)continue;return aL(n,o)}while(++r)}compareBuild(e){e instanceof t||(e=new t(e,this.options));let r=0;do{let n=this.build[r],o=e.build[r];if(V9("build compare",r,n,o),n===void 0&&o===void 0)return 0;if(o===void 0)return 1;if(n===void 0)return-1;if(n===o)continue;return aL(n,o)}while(++r)}inc(e,r,n){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",r,n);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",r,n);break;case"prepatch":this.prerelease.length=0,this.inc("patch",r,n),this.inc("pre",r,n);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",r,n),this.inc("pre",r,n);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{let o=Number(n)?1:0;if(!r&&n===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[o];else{let i=this.prerelease.length;for(;--i>=0;)typeof this.prerelease[i]=="number"&&(this.prerelease[i]++,i=-2);if(i===-1){if(r===this.prerelease.join(".")&&n===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(o)}}if(r){let i=[r,o];n===!1&&(i=[r]),aL(this.prerelease[0],r)===0?isNaN(this.prerelease[1])&&(this.prerelease=i):this.prerelease=i}break}default:throw new Error(`invalid increment argument: ${e}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};gBe.exports=ofe});var kM=v((MEn,bBe)=>{var yBe=gd(),hYt=(t,e,r=!1)=>{if(t instanceof yBe)return t;try{return new yBe(t,e)}catch(n){if(!r)return null;throw n}};bBe.exports=hYt});var vBe=v((REn,_Be)=>{var gYt=kM(),yYt=(t,e)=>{let r=gYt(t,e);return r?r.version:null};_Be.exports=yYt});var SBe=v((jEn,wBe)=>{var bYt=kM(),_Yt=(t,e)=>{let r=bYt(t.trim().replace(/^[=v]+/,""),e);return r?r.version:null};wBe.exports=_Yt});var OBe=v((NEn,CBe)=>{var xBe=gd(),vYt=(t,e,r,n,o)=>{typeof r=="string"&&(o=n,n=r,r=void 0);try{return new xBe(t instanceof xBe?t.version:t,r).inc(e,n,o).version}catch{return null}};CBe.exports=vYt});var TBe=v((DEn,EBe)=>{var PBe=kM(),wYt=(t,e)=>{let r=PBe(t,null,!0),n=PBe(e,null,!0),o=r.compare(n);if(o===0)return null;let i=o>0,a=i?r:n,s=i?n:r,u=!!a.prerelease.length;if(!!s.prerelease.length&&!u)return!s.patch&&!s.minor?"major":a.patch?"patch":a.minor?"minor":"major";let c=u?"pre":"";return r.major!==n.major?c+"major":r.minor!==n.minor?c+"minor":r.patch!==n.patch?c+"patch":"prerelease"};EBe.exports=wYt});var IBe=v((LEn,ABe)=>{var SYt=gd(),xYt=(t,e)=>new SYt(t,e).major;ABe.exports=xYt});var RBe=v((FEn,MBe)=>{var CYt=gd(),OYt=(t,e)=>new CYt(t,e).minor;MBe.exports=OYt});var NBe=v((kEn,jBe)=>{var PYt=gd(),EYt=(t,e)=>new PYt(t,e).patch;jBe.exports=EYt});var LBe=v(($En,DBe)=>{var TYt=kM(),AYt=(t,e)=>{let r=TYt(t,e);return r&&r.prerelease.length?r.prerelease:null};DBe.exports=AYt});var ah=v((BEn,kBe)=>{var FBe=gd(),IYt=(t,e,r)=>new FBe(t,r).compare(new FBe(e,r));kBe.exports=IYt});var BBe=v((qEn,$Be)=>{var MYt=ah(),RYt=(t,e,r)=>MYt(e,t,r);$Be.exports=RYt});var UBe=v((UEn,qBe)=>{var jYt=ah(),NYt=(t,e)=>jYt(t,e,!0);qBe.exports=NYt});var K9=v((zEn,HBe)=>{var zBe=gd(),DYt=(t,e,r)=>{let n=new zBe(t,r),o=new zBe(e,r);return n.compare(o)||n.compareBuild(o)};HBe.exports=DYt});var WBe=v((HEn,VBe)=>{var LYt=K9(),FYt=(t,e)=>t.sort((r,n)=>LYt(r,n,e));VBe.exports=FYt});var GBe=v((VEn,KBe)=>{var kYt=K9(),$Yt=(t,e)=>t.sort((r,n)=>kYt(n,r,e));KBe.exports=$Yt});var Rz=v((WEn,JBe)=>{var BYt=ah(),qYt=(t,e,r)=>BYt(t,e,r)>0;JBe.exports=qYt});var G9=v((KEn,YBe)=>{var UYt=ah(),zYt=(t,e,r)=>UYt(t,e,r)<0;YBe.exports=zYt});var ife=v((GEn,ZBe)=>{var HYt=ah(),VYt=(t,e,r)=>HYt(t,e,r)===0;ZBe.exports=VYt});var afe=v((JEn,XBe)=>{var WYt=ah(),KYt=(t,e,r)=>WYt(t,e,r)!==0;XBe.exports=KYt});var J9=v((YEn,QBe)=>{var GYt=ah(),JYt=(t,e,r)=>GYt(t,e,r)>=0;QBe.exports=JYt});var Y9=v((ZEn,eqe)=>{var YYt=ah(),ZYt=(t,e,r)=>YYt(t,e,r)<=0;eqe.exports=ZYt});var sfe=v((XEn,tqe)=>{var XYt=ife(),QYt=afe(),eZt=Rz(),tZt=J9(),rZt=G9(),nZt=Y9(),oZt=(t,e,r,n)=>{switch(e){case"===":return typeof t=="object"&&(t=t.version),typeof r=="object"&&(r=r.version),t===r;case"!==":return typeof t=="object"&&(t=t.version),typeof r=="object"&&(r=r.version),t!==r;case"":case"=":case"==":return XYt(t,r,n);case"!=":return QYt(t,r,n);case">":return eZt(t,r,n);case">=":return tZt(t,r,n);case"<":return rZt(t,r,n);case"<=":return nZt(t,r,n);default:throw new TypeError(`Invalid operator: ${e}`)}};tqe.exports=oZt});var nqe=v((QEn,rqe)=>{var iZt=gd(),aZt=kM(),{safeRe:Z9,t:X9}=iL(),sZt=(t,e)=>{if(t instanceof iZt)return t;if(typeof t=="number"&&(t=String(t)),typeof t!="string")return null;e=e||{};let r=null;if(!e.rtl)r=t.match(e.includePrerelease?Z9[X9.COERCEFULL]:Z9[X9.COERCE]);else{let u=e.includePrerelease?Z9[X9.COERCERTLFULL]:Z9[X9.COERCERTL],l;for(;(l=u.exec(t))&&(!r||r.index+r[0].length!==t.length);)(!r||l.index+l[0].length!==r.index+r[0].length)&&(r=l),u.lastIndex=l.index+l[1].length+l[2].length;u.lastIndex=-1}if(r===null)return null;let n=r[2],o=r[3]||"0",i=r[4]||"0",a=e.includePrerelease&&r[5]?`-${r[5]}`:"",s=e.includePrerelease&&r[6]?`+${r[6]}`:"";return aZt(`${n}.${o}.${i}${a}${s}`,e)};rqe.exports=sZt});var iqe=v((eTn,oqe)=>{var ufe=class{constructor(){this.max=1e3,this.map=new Map}get(e){let r=this.map.get(e);if(r!==void 0)return this.map.delete(e),this.map.set(e,r),r}delete(e){return this.map.delete(e)}set(e,r){if(!this.delete(e)&&r!==void 0){if(this.map.size>=this.max){let o=this.map.keys().next().value;this.delete(o)}this.map.set(e,r)}return this}};oqe.exports=ufe});var sh=v((tTn,lqe)=>{var uZt=/\s+/g,lfe=class t{constructor(e,r){if(r=cZt(r),e instanceof t)return e.loose===!!r.loose&&e.includePrerelease===!!r.includePrerelease?e:new t(e.raw,r);if(e instanceof cfe)return this.raw=e.value,this.set=[[e]],this.formatted=void 0,this;if(this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease,this.raw=e.trim().replace(uZt," "),this.set=this.raw.split("||").map(n=>this.parseRange(n.trim())).filter(n=>n.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){let n=this.set[0];if(this.set=this.set.filter(o=>!sqe(o[0])),this.set.length===0)this.set=[n];else if(this.set.length>1){for(let o of this.set)if(o.length===1&&yZt(o[0])){this.set=[o];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let e=0;e<this.set.length;e++){e>0&&(this.formatted+="||");let r=this.set[e];for(let n=0;n<r.length;n++)n>0&&(this.formatted+=" "),this.formatted+=r[n].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(e){let n=((this.options.includePrerelease&&hZt)|(this.options.loose&&gZt))+":"+e,o=aqe.get(n);if(o)return o;let i=this.options.loose,a=i?tp[ff.HYPHENRANGELOOSE]:tp[ff.HYPHENRANGE];e=e.replace(a,EZt(this.options.includePrerelease)),Zi("hyphen replace",e),e=e.replace(tp[ff.COMPARATORTRIM],fZt),Zi("comparator trim",e),e=e.replace(tp[ff.TILDETRIM],pZt),Zi("tilde trim",e),e=e.replace(tp[ff.CARETTRIM],mZt),Zi("caret trim",e);let s=e.split(" ").map(d=>bZt(d,this.options)).join(" ").split(/\s+/).map(d=>PZt(d,this.options));i&&(s=s.filter(d=>(Zi("loose invalid filter",d,this.options),!!d.match(tp[ff.COMPARATORLOOSE])))),Zi("range list",s);let u=new Map,l=s.map(d=>new cfe(d,this.options));for(let d of l){if(sqe(d))return[d];u.set(d.value,d)}u.size>1&&u.has("")&&u.delete("");let c=[...u.values()];return aqe.set(n,c),c}intersects(e,r){if(!(e instanceof t))throw new TypeError("a Range is required");return this.set.some(n=>uqe(n,r)&&e.set.some(o=>uqe(o,r)&&n.every(i=>o.every(a=>i.intersects(a,r)))))}test(e){if(!e)return!1;if(typeof e=="string")try{e=new dZt(e,this.options)}catch{return!1}for(let r=0;r<this.set.length;r++)if(TZt(this.set[r],e,this.options))return!0;return!1}};lqe.exports=lfe;var lZt=iqe(),aqe=new lZt,cZt=H9(),cfe=jz(),Zi=Mz(),dZt=gd(),{safeRe:tp,t:ff,comparatorTrimReplace:fZt,tildeTrimReplace:pZt,caretTrimReplace:mZt}=iL(),{FLAG_INCLUDE_PRERELEASE:hZt,FLAG_LOOSE:gZt}=Iz(),sqe=t=>t.value==="<0.0.0-0",yZt=t=>t.value==="",uqe=(t,e)=>{let r=!0,n=t.slice(),o=n.pop();for(;r&&n.length;)r=n.every(i=>o.intersects(i,e)),o=n.pop();return r},bZt=(t,e)=>(Zi("comp",t,e),t=wZt(t,e),Zi("caret",t),t=_Zt(t,e),Zi("tildes",t),t=xZt(t,e),Zi("xrange",t),t=OZt(t,e),Zi("stars",t),t),pf=t=>!t||t.toLowerCase()==="x"||t==="*",_Zt=(t,e)=>t.trim().split(/\s+/).map(r=>vZt(r,e)).join(" "),vZt=(t,e)=>{let r=e.loose?tp[ff.TILDELOOSE]:tp[ff.TILDE];return t.replace(r,(n,o,i,a,s)=>{Zi("tilde",t,n,o,i,a,s);let u;return pf(o)?u="":pf(i)?u=`>=${o}.0.0 <${+o+1}.0.0-0`:pf(a)?u=`>=${o}.${i}.0 <${o}.${+i+1}.0-0`:s?(Zi("replaceTilde pr",s),u=`>=${o}.${i}.${a}-${s} <${o}.${+i+1}.0-0`):u=`>=${o}.${i}.${a} <${o}.${+i+1}.0-0`,Zi("tilde return",u),u})},wZt=(t,e)=>t.trim().split(/\s+/).map(r=>SZt(r,e)).join(" "),SZt=(t,e)=>{Zi("caret",t,e);let r=e.loose?tp[ff.CARETLOOSE]:tp[ff.CARET],n=e.includePrerelease?"-0":"";return t.replace(r,(o,i,a,s,u)=>{Zi("caret",t,o,i,a,s,u);let l;return pf(i)?l="":pf(a)?l=`>=${i}.0.0${n} <${+i+1}.0.0-0`:pf(s)?i==="0"?l=`>=${i}.${a}.0${n} <${i}.${+a+1}.0-0`:l=`>=${i}.${a}.0${n} <${+i+1}.0.0-0`:u?(Zi("replaceCaret pr",u),i==="0"?a==="0"?l=`>=${i}.${a}.${s}-${u} <${i}.${a}.${+s+1}-0`:l=`>=${i}.${a}.${s}-${u} <${i}.${+a+1}.0-0`:l=`>=${i}.${a}.${s}-${u} <${+i+1}.0.0-0`):(Zi("no pr"),i==="0"?a==="0"?l=`>=${i}.${a}.${s}${n} <${i}.${a}.${+s+1}-0`:l=`>=${i}.${a}.${s}${n} <${i}.${+a+1}.0-0`:l=`>=${i}.${a}.${s} <${+i+1}.0.0-0`),Zi("caret return",l),l})},xZt=(t,e)=>(Zi("replaceXRanges",t,e),t.split(/\s+/).map(r=>CZt(r,e)).join(" ")),CZt=(t,e)=>{t=t.trim();let r=e.loose?tp[ff.XRANGELOOSE]:tp[ff.XRANGE];return t.replace(r,(n,o,i,a,s,u)=>{Zi("xRange",t,n,o,i,a,s,u);let l=pf(i),c=l||pf(a),d=c||pf(s),f=d;return o==="="&&f&&(o=""),u=e.includePrerelease?"-0":"",l?o===">"||o==="<"?n="<0.0.0-0":n="*":o&&f?(c&&(a=0),s=0,o===">"?(o=">=",c?(i=+i+1,a=0,s=0):(a=+a+1,s=0)):o==="<="&&(o="<",c?i=+i+1:a=+a+1),o==="<"&&(u="-0"),n=`${o+i}.${a}.${s}${u}`):c?n=`>=${i}.0.0${u} <${+i+1}.0.0-0`:d&&(n=`>=${i}.${a}.0${u} <${i}.${+a+1}.0-0`),Zi("xRange return",n),n})},OZt=(t,e)=>(Zi("replaceStars",t,e),t.trim().replace(tp[ff.STAR],"")),PZt=(t,e)=>(Zi("replaceGTE0",t,e),t.trim().replace(tp[e.includePrerelease?ff.GTE0PRE:ff.GTE0],"")),EZt=t=>(e,r,n,o,i,a,s,u,l,c,d,f)=>(pf(n)?r="":pf(o)?r=`>=${n}.0.0${t?"-0":""}`:pf(i)?r=`>=${n}.${o}.0${t?"-0":""}`:a?r=`>=${r}`:r=`>=${r}${t?"-0":""}`,pf(l)?u="":pf(c)?u=`<${+l+1}.0.0-0`:pf(d)?u=`<${l}.${+c+1}.0-0`:f?u=`<=${l}.${c}.${d}-${f}`:t?u=`<${l}.${c}.${+d+1}-0`:u=`<=${u}`,`${r} ${u}`.trim()),TZt=(t,e,r)=>{for(let n=0;n<t.length;n++)if(!t[n].test(e))return!1;if(e.prerelease.length&&!r.includePrerelease){for(let n=0;n<t.length;n++)if(Zi(t[n].semver),t[n].semver!==cfe.ANY&&t[n].semver.prerelease.length>0){let o=t[n].semver;if(o.major===e.major&&o.minor===e.minor&&o.patch===e.patch)return!0}return!1}return!0}});var jz=v((rTn,hqe)=>{var Nz=Symbol("SemVer ANY"),pfe=class t{static get ANY(){return Nz}constructor(e,r){if(r=cqe(r),e instanceof t){if(e.loose===!!r.loose)return e;e=e.value}e=e.trim().split(/\s+/).join(" "),ffe("comparator",e,r),this.options=r,this.loose=!!r.loose,this.parse(e),this.semver===Nz?this.value="":this.value=this.operator+this.semver.version,ffe("comp",this)}parse(e){let r=this.options.loose?dqe[fqe.COMPARATORLOOSE]:dqe[fqe.COMPARATOR],n=e.match(r);if(!n)throw new TypeError(`Invalid comparator: ${e}`);this.operator=n[1]!==void 0?n[1]:"",this.operator==="="&&(this.operator=""),n[2]?this.semver=new pqe(n[2],this.options.loose):this.semver=Nz}toString(){return this.value}test(e){if(ffe("Comparator.test",e,this.options.loose),this.semver===Nz||e===Nz)return!0;if(typeof e=="string")try{e=new pqe(e,this.options)}catch{return!1}return dfe(e,this.operator,this.semver,this.options)}intersects(e,r){if(!(e instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new mqe(e.value,r).test(this.value):e.operator===""?e.value===""?!0:new mqe(this.value,r).test(e.semver):(r=cqe(r),r.includePrerelease&&(this.value==="<0.0.0-0"||e.value==="<0.0.0-0")||!r.includePrerelease&&(this.value.startsWith("<0.0.0")||e.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&e.operator.startsWith(">")||this.operator.startsWith("<")&&e.operator.startsWith("<")||this.semver.version===e.semver.version&&this.operator.includes("=")&&e.operator.includes("=")||dfe(this.semver,"<",e.semver,r)&&this.operator.startsWith(">")&&e.operator.startsWith("<")||dfe(this.semver,">",e.semver,r)&&this.operator.startsWith("<")&&e.operator.startsWith(">")))}};hqe.exports=pfe;var cqe=H9(),{safeRe:dqe,t:fqe}=iL(),dfe=sfe(),ffe=Mz(),pqe=gd(),mqe=sh()});var Dz=v((nTn,gqe)=>{var AZt=sh(),IZt=(t,e,r)=>{try{e=new AZt(e,r)}catch{return!1}return e.test(t)};gqe.exports=IZt});var bqe=v((oTn,yqe)=>{var MZt=sh(),RZt=(t,e)=>new MZt(t,e).set.map(r=>r.map(n=>n.value).join(" ").trim().split(" "));yqe.exports=RZt});var vqe=v((iTn,_qe)=>{var jZt=gd(),NZt=sh(),DZt=(t,e,r)=>{let n=null,o=null,i=null;try{i=new NZt(e,r)}catch{return null}return t.forEach(a=>{i.test(a)&&(!n||o.compare(a)===-1)&&(n=a,o=new jZt(n,r))}),n};_qe.exports=DZt});var Sqe=v((aTn,wqe)=>{var LZt=gd(),FZt=sh(),kZt=(t,e,r)=>{let n=null,o=null,i=null;try{i=new FZt(e,r)}catch{return null}return t.forEach(a=>{i.test(a)&&(!n||o.compare(a)===1)&&(n=a,o=new LZt(n,r))}),n};wqe.exports=kZt});var Oqe=v((sTn,Cqe)=>{var mfe=gd(),$Zt=sh(),xqe=Rz(),BZt=(t,e)=>{t=new $Zt(t,e);let r=new mfe("0.0.0");if(t.test(r)||(r=new mfe("0.0.0-0"),t.test(r)))return r;r=null;for(let n=0;n<t.set.length;++n){let o=t.set[n],i=null;o.forEach(a=>{let s=new mfe(a.semver.version);switch(a.operator){case">":s.prerelease.length===0?s.patch++:s.prerelease.push(0),s.raw=s.format();case"":case">=":(!i||xqe(s,i))&&(i=s);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${a.operator}`)}}),i&&(!r||xqe(r,i))&&(r=i)}return r&&t.test(r)?r:null};Cqe.exports=BZt});var Eqe=v((uTn,Pqe)=>{var qZt=sh(),UZt=(t,e)=>{try{return new qZt(t,e).range||"*"}catch{return null}};Pqe.exports=UZt});var Q9=v((lTn,Mqe)=>{var zZt=gd(),Iqe=jz(),{ANY:HZt}=Iqe,VZt=sh(),WZt=Dz(),Tqe=Rz(),Aqe=G9(),KZt=Y9(),GZt=J9(),JZt=(t,e,r,n)=>{t=new zZt(t,n),e=new VZt(e,n);let o,i,a,s,u;switch(r){case">":o=Tqe,i=KZt,a=Aqe,s=">",u=">=";break;case"<":o=Aqe,i=GZt,a=Tqe,s="<",u="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(WZt(t,e,n))return!1;for(let l=0;l<e.set.length;++l){let c=e.set[l],d=null,f=null;if(c.forEach(p=>{p.semver===HZt&&(p=new Iqe(">=0.0.0")),d=d||p,f=f||p,o(p.semver,d.semver,n)?d=p:a(p.semver,f.semver,n)&&(f=p)}),d.operator===s||d.operator===u||(!f.operator||f.operator===s)&&i(t,f.semver))return!1;if(f.operator===u&&a(t,f.semver))return!1}return!0};Mqe.exports=JZt});var jqe=v((cTn,Rqe)=>{var YZt=Q9(),ZZt=(t,e,r)=>YZt(t,e,">",r);Rqe.exports=ZZt});var Dqe=v((dTn,Nqe)=>{var XZt=Q9(),QZt=(t,e,r)=>XZt(t,e,"<",r);Nqe.exports=QZt});var kqe=v((fTn,Fqe)=>{var Lqe=sh(),eXt=(t,e,r)=>(t=new Lqe(t,r),e=new Lqe(e,r),t.intersects(e,r));Fqe.exports=eXt});var Bqe=v((pTn,$qe)=>{var tXt=Dz(),rXt=ah();$qe.exports=(t,e,r)=>{let n=[],o=null,i=null,a=t.sort((c,d)=>rXt(c,d,r));for(let c of a)tXt(c,e,r)?(i=c,o||(o=c)):(i&&n.push([o,i]),i=null,o=null);o&&n.push([o,null]);let s=[];for(let[c,d]of n)c===d?s.push(c):!d&&c===a[0]?s.push("*"):d?c===a[0]?s.push(`<=${d}`):s.push(`${c} - ${d}`):s.push(`>=${c}`);let u=s.join(" || "),l=typeof e.raw=="string"?e.raw:String(e);return u.length<l.length?u:e}});var Wqe=v((mTn,Vqe)=>{var qqe=sh(),gfe=jz(),{ANY:hfe}=gfe,Lz=Dz(),yfe=ah(),nXt=(t,e,r={})=>{if(t===e)return!0;t=new qqe(t,r),e=new qqe(e,r);let n=!1;e:for(let o of t.set){for(let i of e.set){let a=iXt(o,i,r);if(n=n||a!==null,a)continue e}if(n)return!1}return!0},oXt=[new gfe(">=0.0.0-0")],Uqe=[new gfe(">=0.0.0")],iXt=(t,e,r)=>{if(t===e)return!0;if(t.length===1&&t[0].semver===hfe){if(e.length===1&&e[0].semver===hfe)return!0;r.includePrerelease?t=oXt:t=Uqe}if(e.length===1&&e[0].semver===hfe){if(r.includePrerelease)return!0;e=Uqe}let n=new Set,o,i;for(let p of t)p.operator===">"||p.operator===">="?o=zqe(o,p,r):p.operator==="<"||p.operator==="<="?i=Hqe(i,p,r):n.add(p.semver);if(n.size>1)return null;let a;if(o&&i){if(a=yfe(o.semver,i.semver,r),a>0)return null;if(a===0&&(o.operator!==">="||i.operator!=="<="))return null}for(let p of n){if(o&&!Lz(p,String(o),r)||i&&!Lz(p,String(i),r))return null;for(let m of e)if(!Lz(p,String(m),r))return!1;return!0}let s,u,l,c,d=i&&!r.includePrerelease&&i.semver.prerelease.length?i.semver:!1,f=o&&!r.includePrerelease&&o.semver.prerelease.length?o.semver:!1;d&&d.prerelease.length===1&&i.operator==="<"&&d.prerelease[0]===0&&(d=!1);for(let p of e){if(c=c||p.operator===">"||p.operator===">=",l=l||p.operator==="<"||p.operator==="<=",o){if(f&&p.semver.prerelease&&p.semver.prerelease.length&&p.semver.major===f.major&&p.semver.minor===f.minor&&p.semver.patch===f.patch&&(f=!1),p.operator===">"||p.operator===">="){if(s=zqe(o,p,r),s===p&&s!==o)return!1}else if(o.operator===">="&&!Lz(o.semver,String(p),r))return!1}if(i){if(d&&p.semver.prerelease&&p.semver.prerelease.length&&p.semver.major===d.major&&p.semver.minor===d.minor&&p.semver.patch===d.patch&&(d=!1),p.operator==="<"||p.operator==="<="){if(u=Hqe(i,p,r),u===p&&u!==i)return!1}else if(i.operator==="<="&&!Lz(i.semver,String(p),r))return!1}if(!p.operator&&(i||o)&&a!==0)return!1}return!(o&&l&&!i&&a!==0||i&&c&&!o&&a!==0||f||d)},zqe=(t,e,r)=>{if(!t)return e;let n=yfe(t.semver,e.semver,r);return n>0?t:n<0||e.operator===">"&&t.operator===">="?e:t},Hqe=(t,e,r)=>{if(!t)return e;let n=yfe(t.semver,e.semver,r);return n<0?t:n>0||e.operator==="<"&&t.operator==="<="?e:t};Vqe.exports=nXt});var Yqe=v((hTn,Jqe)=>{var bfe=iL(),Kqe=Iz(),aXt=gd(),Gqe=nfe(),sXt=kM(),uXt=vBe(),lXt=SBe(),cXt=OBe(),dXt=TBe(),fXt=IBe(),pXt=RBe(),mXt=NBe(),hXt=LBe(),gXt=ah(),yXt=BBe(),bXt=UBe(),_Xt=K9(),vXt=WBe(),wXt=GBe(),SXt=Rz(),xXt=G9(),CXt=ife(),OXt=afe(),PXt=J9(),EXt=Y9(),TXt=sfe(),AXt=nqe(),IXt=jz(),MXt=sh(),RXt=Dz(),jXt=bqe(),NXt=vqe(),DXt=Sqe(),LXt=Oqe(),FXt=Eqe(),kXt=Q9(),$Xt=jqe(),BXt=Dqe(),qXt=kqe(),UXt=Bqe(),zXt=Wqe();Jqe.exports={parse:sXt,valid:uXt,clean:lXt,inc:cXt,diff:dXt,major:fXt,minor:pXt,patch:mXt,prerelease:hXt,compare:gXt,rcompare:yXt,compareLoose:bXt,compareBuild:_Xt,sort:vXt,rsort:wXt,gt:SXt,lt:xXt,eq:CXt,neq:OXt,gte:PXt,lte:EXt,cmp:TXt,coerce:AXt,Comparator:IXt,Range:MXt,satisfies:RXt,toComparators:jXt,maxSatisfying:NXt,minSatisfying:DXt,minVersion:LXt,validRange:FXt,outside:kXt,gtr:$Xt,ltr:BXt,intersects:qXt,simplifyRange:UXt,subset:zXt,SemVer:aXt,re:bfe.re,src:bfe.src,tokens:bfe.t,SEMVER_SPEC_VERSION:Kqe.SEMVER_SPEC_VERSION,RELEASE_TYPES:Kqe.RELEASE_TYPES,compareIdentifiers:Gqe.compareIdentifiers,rcompareIdentifiers:Gqe.rcompareIdentifiers}});function tC(t){if(!t||t.split("/").length>2||t.startsWith("/")||t.endsWith("/")||t.split(":").length>2)throw new Error(`Invalid identifier format: ${t}`);let[e,r]=t.split(":"),n=r||"latest";if(e.includes("/")){let[o,i]=e.split("/",2);if(!o||!i)throw new Error(`Invalid identifier format: ${t}`);return[o,i,n]}else{if(!e)throw new Error(`Invalid identifier format: ${t}`);return["-",e,n]}}var HXt,Zqe=O(()=>{HXt=F(Yqe(),1)});async function on(t,e,r){let n;if(t.ok){r&&(n=await t.text());return}n=await t.text();let o=`Failed to ${e}. Received status [${t.status}]: ${t.statusText}. Server response: ${n}`;throw t.status===409?new _fe(o):new Error(o)}var _fe,Xqe=O(()=>{_fe=class extends Error{constructor(e){super(e),this.name="LangSmithConflictError"}}});function KXt(){return{depthLimit:Number.MAX_SAFE_INTEGER,edgesLimit:Number.MAX_SAFE_INTEGER}}function eK(t){return WXt.encode(t)}function rp(t,e,r,n){try{let o=JSON.stringify(t,e,r);return eK(o)}catch(o){if(!o.message?.includes("Converting circular structure to JSON"))return console.warn("[WARNING]: LangSmith received unserializable value."),eK("[Unserializable]");console.warn("[WARNING]: LangSmith received circular JSON. This will decrease tracer performance."),typeof n>"u"&&(n=KXt()),wfe(t,"",0,[],void 0,0,n);let i;try{sL.length===0?i=JSON.stringify(t,e,r):i=JSON.stringify(t,GXt(e),r)}catch{return eK("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;tK.length!==0;){let a=tK.pop();a.length===4?Object.defineProperty(a[0],a[1],a[3]):a[0][a[1]]=a[2]}}return eK(i)}}function vfe(t,e,r,n){var o=Object.getOwnPropertyDescriptor(n,r);o.get!==void 0?o.configurable?(Object.defineProperty(n,r,{value:t}),tK.push([n,r,e,o])):sL.push([e,r,t]):(n[r]=t,tK.push([n,r,e]))}function wfe(t,e,r,n,o,i,a){i+=1;var s;if(typeof t=="object"&&t!==null){for(s=0;s<n.length;s++)if(n[s]===t){vfe(VXt,t,e,o);return}if(typeof a.depthLimit<"u"&&i>a.depthLimit){vfe(Qqe,t,e,o);return}if(typeof a.edgesLimit<"u"&&r+1>a.edgesLimit){vfe(Qqe,t,e,o);return}if(n.push(t),Array.isArray(t))for(s=0;s<t.length;s++)wfe(t[s],s,s,n,t,i,a);else{var u=Object.keys(t);for(s=0;s<u.length;s++){var l=u[s];wfe(t[l],l,s,n,t,i,a)}}n.pop()}}function GXt(t){return t=typeof t<"u"?t:function(e,r){return r},function(e,r){if(sL.length>0)for(var n=0;n<sL.length;n++){var o=sL[n];if(o[1]===e&&o[0]===r){r=o[2],sL.splice(n,1);break}}return t.call(this,e,r)}}var Qqe,VXt,tK,sL,WXt,eUe=O(()=>{Qqe="[...]",VXt={result:"[Circular]"},tK=[],sL=[],WXt=new TextEncoder});function tUe(t){let e=oK(),r=oUe(),n=t.extra??{},o=n.metadata;return t.extra={...n,runtime:{...e,...n?.runtime},metadata:{...r,...r.revision_id||t.revision_id?{revision_id:t.revision_id??r.revision_id}:{},...o}},t}async function ZXt(t){let e=[];for await(let r of t)e.push(r);return e}function Sfe(t){if(t!==void 0)return t.trim().replace(/^"(.*)"$/,"$1").replace(/^'(.*)'$/,"$1")}function rUe(t){return typeof t=="number"?Number(t.toFixed(4)):t}function nUe(t){return"dataset_id"in t||"dataset_name"in t}var JXt,YXt,XXt,xfe,QXt,eQt,$M,Cfe=O(()=>{oE();rBe();nBe();Tz();nK();oBe();efe();Zqe();Xqe();q9();eUe();JXt=t=>{let e=t?.toString()??ep("TRACING_SAMPLING_RATE");if(e===void 0)return;let r=parseFloat(e);if(r<0||r>1)throw new Error(`LANGSMITH_TRACING_SAMPLING_RATE must be between 0 and 1 if set. Got: ${r}`);return r},YXt=t=>{let r=t.replace("http://","").replace("https://","").split("/")[0].split(":")[0];return r==="localhost"||r==="127.0.0.1"||r==="::1"};XXt=async t=>{if(t?.status===429){let e=parseInt(t.headers.get("retry-after")??"30",10)*1e3;if(e>0)return await new Promise(r=>setTimeout(r,e)),!0}return!1};xfe=class{constructor(){Object.defineProperty(this,"items",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"sizeBytes",{enumerable:!0,configurable:!0,writable:!0,value:0})}peek(){return this.items[0]}push(e){let r,n=new Promise(i=>{r=i}),o=rp(e.item).length;return this.items.push({action:e.action,payload:e.item,itemPromiseResolve:r,itemPromise:n,size:o}),this.sizeBytes+=o,n}pop(e){if(e<1)throw new Error("Number of bytes to pop off may not be less than 1.");let r=[],n=0;for(;n+(this.peek()?.size??0)<e&&this.items.length>0;){let o=this.items.shift();o&&(r.push(o),n+=o.size,this.sizeBytes-=o.size)}if(r.length===0&&this.items.length>0){let o=this.items.shift();r.push(o),n+=o.size,this.sizeBytes-=o.size}return[r.map(o=>({action:o.action,item:o.payload})),()=>r.forEach(o=>o.itemPromiseResolve())]}},QXt=20971520,eQt=2500,$M=class t{constructor(e={}){Object.defineProperty(this,"apiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"apiUrl",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"webUrl",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"caller",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"batchIngestCaller",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"timeout_ms",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_tenantId",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"hideInputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"hideOutputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tracingSampleRate",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"filteredPostUuids",{enumerable:!0,configurable:!0,writable:!0,value:new Set}),Object.defineProperty(this,"autoBatchTracing",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"autoBatchQueue",{enumerable:!0,configurable:!0,writable:!0,value:new xfe}),Object.defineProperty(this,"autoBatchTimeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"autoBatchAggregationDelayMs",{enumerable:!0,configurable:!0,writable:!0,value:250}),Object.defineProperty(this,"batchSizeBytesLimit",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fetchOptions",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"settings",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"blockOnRootRunFinalization",{enumerable:!0,configurable:!0,writable:!0,value:Sb("LANGSMITH_TRACING_BACKGROUND")==="false"}),Object.defineProperty(this,"traceBatchConcurrency",{enumerable:!0,configurable:!0,writable:!0,value:5}),Object.defineProperty(this,"_serverInfo",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_getServerInfoPromise",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"manualFlushMode",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"debug",{enumerable:!0,configurable:!0,writable:!0,value:Sb("LANGSMITH_DEBUG")==="true"});let r=t.getDefaultClientConfig();if(this.tracingSampleRate=JXt(e.tracingSamplingRate),this.apiUrl=Sfe(e.apiUrl??r.apiUrl)??"",this.apiUrl.endsWith("/")&&(this.apiUrl=this.apiUrl.slice(0,-1)),this.apiKey=Sfe(e.apiKey??r.apiKey),this.webUrl=Sfe(e.webUrl??r.webUrl),this.webUrl?.endsWith("/")&&(this.webUrl=this.webUrl.slice(0,-1)),this.timeout_ms=e.timeout_ms??9e4,this.caller=new Az({...e.callerOptions??{},debug:e.debug??this.debug}),this.traceBatchConcurrency=e.traceBatchConcurrency??this.traceBatchConcurrency,this.traceBatchConcurrency<1)throw new Error("Trace batch concurrency must be positive.");this.debug=e.debug??this.debug,this.batchIngestCaller=new Az({maxRetries:2,maxConcurrency:this.traceBatchConcurrency,...e.callerOptions??{},onFailedResponseHook:XXt,debug:e.debug??this.debug}),this.hideInputs=e.hideInputs??e.anonymizer??r.hideInputs,this.hideOutputs=e.hideOutputs??e.anonymizer??r.hideOutputs,this.autoBatchTracing=e.autoBatchTracing??this.autoBatchTracing,this.blockOnRootRunFinalization=e.blockOnRootRunFinalization??this.blockOnRootRunFinalization,this.batchSizeBytesLimit=e.batchSizeBytesLimit,this.fetchOptions=e.fetchOptions||{},this.manualFlushMode=e.manualFlushMode??this.manualFlushMode}static getDefaultClientConfig(){let e=ep("API_KEY"),r=ep("ENDPOINT")??"https://api.smith.langchain.com",n=ep("HIDE_INPUTS")==="true",o=ep("HIDE_OUTPUTS")==="true";return{apiUrl:r,apiKey:e,webUrl:void 0,hideInputs:n,hideOutputs:o}}getHostUrl(){return this.webUrl?this.webUrl:YXt(this.apiUrl)?(this.webUrl="http://localhost:3000",this.webUrl):this.apiUrl.endsWith("/api/v1")?(this.webUrl=this.apiUrl.replace("/api/v1",""),this.webUrl):this.apiUrl.includes("/api")&&!this.apiUrl.split(".",1)[0].endsWith("api")?(this.webUrl=this.apiUrl.replace("/api",""),this.webUrl):this.apiUrl.split(".",1)[0].includes("dev")?(this.webUrl="https://dev.smith.langchain.com",this.webUrl):this.apiUrl.split(".",1)[0].includes("eu")?(this.webUrl="https://eu.smith.langchain.com",this.webUrl):this.apiUrl.split(".",1)[0].includes("beta")?(this.webUrl="https://beta.smith.langchain.com",this.webUrl):(this.webUrl="https://smith.langchain.com",this.webUrl)}get headers(){let e={"User-Agent":`langsmith-js/${rK}`};return this.apiKey&&(e["x-api-key"]=`${this.apiKey}`),e}async processInputs(e){return this.hideInputs===!1?e:this.hideInputs===!0?{}:typeof this.hideInputs=="function"?this.hideInputs(e):e}async processOutputs(e){return this.hideOutputs===!1?e:this.hideOutputs===!0?{}:typeof this.hideOutputs=="function"?this.hideOutputs(e):e}async prepareRunCreateOrUpdateInputs(e){let r={...e};return r.inputs!==void 0&&(r.inputs=await this.processInputs(r.inputs)),r.outputs!==void 0&&(r.outputs=await this.processOutputs(r.outputs)),r}async _getResponse(e,r){let n=r?.toString()??"",o=`${this.apiUrl}${e}?${n}`,i=await this.caller.call(Ht(this.debug),o,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await on(i,`Failed to fetch ${e}`),i}async _get(e,r){return(await this._getResponse(e,r)).json()}async*_getPaginated(e,r=new URLSearchParams,n){let o=Number(r.get("offset"))||0,i=Number(r.get("limit"))||100;for(;;){r.set("offset",String(o)),r.set("limit",String(i));let a=`${this.apiUrl}${e}?${r}`,s=await this.caller.call(Ht(this.debug),a,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await on(s,`Failed to fetch ${e}`);let u=n?n(await s.json()):await s.json();if(u.length===0||(yield u,u.length<i))break;o+=u.length}}async*_getCursorPaginatedList(e,r=null,n="POST",o="runs"){let i=r?{...r}:{};for(;;){let s=await(await this.caller.call(Ht(this.debug),`${this.apiUrl}${e}`,{method:n,headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:JSON.stringify(i)})).json();if(!s||!s[o])break;yield s[o];let u=s.cursors;if(!u||!u.next)break;i.cursor=u.next}}_shouldSample(){return this.tracingSampleRate===void 0?!0:Math.random()<this.tracingSampleRate}_filterForSampling(e,r=!1){if(this.tracingSampleRate===void 0)return e;if(r){let n=[];for(let o of e)this.filteredPostUuids.has(o.id)?this.filteredPostUuids.delete(o.id):n.push(o);return n}else{let n=[];for(let o of e){let i=o.trace_id??o.id;this.filteredPostUuids.has(i)||(o.id===i?this._shouldSample()?n.push(o):this.filteredPostUuids.add(i):n.push(o))}return n}}async _getBatchSizeLimitBytes(){let e=await this._ensureServerInfo();return this.batchSizeBytesLimit??e.batch_ingest_config?.size_limit_bytes??QXt}async _getMultiPartSupport(){return(await this._ensureServerInfo()).instance_flags?.dataset_examples_multipart_enabled??!1}drainAutoBatchQueue(e){let r=[];for(;this.autoBatchQueue.items.length>0;){let[n,o]=this.autoBatchQueue.pop(e);if(!n.length){o();break}let i=this._processBatch(n,o).catch(console.error);r.push(i)}return Promise.all(r)}async _processBatch(e,r){if(!e.length){r();return}try{let n={runCreates:e.filter(i=>i.action==="create").map(i=>i.item),runUpdates:e.filter(i=>i.action==="update").map(i=>i.item)};(await this._ensureServerInfo())?.batch_ingest_config?.use_multipart_endpoint?await this.multipartIngestRuns(n):await this.batchIngestRuns(n)}finally{r()}}async processRunOperation(e){clearTimeout(this.autoBatchTimeout),this.autoBatchTimeout=void 0,e.action==="create"&&(e.item=tUe(e.item));let r=this.autoBatchQueue.push(e);if(this.manualFlushMode)return r;let n=await this._getBatchSizeLimitBytes();return this.autoBatchQueue.sizeBytes>n&&this.drainAutoBatchQueue(n),this.autoBatchQueue.items.length>0&&(this.autoBatchTimeout=setTimeout(()=>{this.autoBatchTimeout=void 0,this.drainAutoBatchQueue(n)},this.autoBatchAggregationDelayMs)),r}async _getServerInfo(){let e=await Ht(this.debug)(`${this.apiUrl}/info`,{method:"GET",headers:{Accept:"application/json"},signal:AbortSignal.timeout(eQt),...this.fetchOptions});await on(e,"get server info");let r=await e.json();return this.debug&&console.log(`
=== LangSmith Server Configuration ===
`+JSON.stringify(r,null,2)+`
`),r}async _ensureServerInfo(){return this._getServerInfoPromise===void 0&&(this._getServerInfoPromise=(async()=>{if(this._serverInfo===void 0)try{this._serverInfo=await this._getServerInfo()}catch{console.warn("[WARNING]: LangSmith failed to fetch info on supported operations. Falling back to batch operations and default limits.")}return this._serverInfo??{}})()),this._getServerInfoPromise.then(e=>(this._serverInfo===void 0&&(this._getServerInfoPromise=void 0),e))}async _getSettings(){return this.settings||(this.settings=this._get("/settings")),await this.settings}async flush(){let e=await this._getBatchSizeLimitBytes();await this.drainAutoBatchQueue(e)}async createRun(e){if(!this._filterForSampling([e]).length)return;let r={...this.headers,"Content-Type":"application/json"},n=e.project_name;delete e.project_name;let o=await this.prepareRunCreateOrUpdateInputs({session_name:n,...e,start_time:e.start_time??Date.now()});if(this.autoBatchTracing&&o.trace_id!==void 0&&o.dotted_order!==void 0){this.processRunOperation({action:"create",item:o}).catch(console.error);return}let i=tUe(o),a=await this.caller.call(Ht(this.debug),`${this.apiUrl}/runs`,{method:"POST",headers:r,body:rp(i),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await on(a,"create run",!0)}async batchIngestRuns({runCreates:e,runUpdates:r}){if(e===void 0&&r===void 0)return;let n=await Promise.all(e?.map(s=>this.prepareRunCreateOrUpdateInputs(s))??[]),o=await Promise.all(r?.map(s=>this.prepareRunCreateOrUpdateInputs(s))??[]);if(n.length>0&&o.length>0){let s=n.reduce((l,c)=>(c.id&&(l[c.id]=c),l),{}),u=[];for(let l of o)l.id!==void 0&&s[l.id]?s[l.id]={...s[l.id],...l}:u.push(l);n=Object.values(s),o=u}let i={post:n,patch:o};if(!i.post.length&&!i.patch.length)return;let a={post:[],patch:[]};for(let s of["post","patch"]){let u=s,l=i[u].reverse(),c=l.pop();for(;c!==void 0;)a[u].push(c),c=l.pop()}(a.post.length>0||a.patch.length>0)&&await this._postBatchIngestRuns(rp(a))}async _postBatchIngestRuns(e){let r={...this.headers,"Content-Type":"application/json",Accept:"application/json"},n=await this.batchIngestCaller.call(Ht(this.debug),`${this.apiUrl}/runs/batch`,{method:"POST",headers:r,body:e,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await on(n,"batch create run",!0)}async multipartIngestRuns({runCreates:e,runUpdates:r}){if(e===void 0&&r===void 0)return;let n={},o=[];for(let c of e??[]){let d=await this.prepareRunCreateOrUpdateInputs(c);d.id!==void 0&&d.attachments!==void 0&&(n[d.id]=d.attachments),delete d.attachments,o.push(d)}let i=[];for(let c of r??[])i.push(await this.prepareRunCreateOrUpdateInputs(c));if(o.find(c=>c.trace_id===void 0||c.dotted_order===void 0)!==void 0)throw new Error('Multipart ingest requires "trace_id" and "dotted_order" to be set when creating a run');if(i.find(c=>c.trace_id===void 0||c.dotted_order===void 0)!==void 0)throw new Error('Multipart ingest requires "trace_id" and "dotted_order" to be set when updating a run');if(o.length>0&&i.length>0){let c=o.reduce((f,p)=>(p.id&&(f[p.id]=p),f),{}),d=[];for(let f of i)f.id!==void 0&&c[f.id]?c[f.id]={...c[f.id],...f}:d.push(f);o=Object.values(c),i=d}if(o.length===0&&i.length===0)return;let u=[],l=[];for(let[c,d]of[["post",o],["patch",i]])for(let f of d){let{inputs:p,outputs:m,events:h,attachments:b,...g}=f,y={inputs:p,outputs:m,events:h},w=rp(g);l.push({name:`${c}.${g.id}`,payload:new Blob([w],{type:`application/json; length=${w.length}`})});for(let[S,C]of Object.entries(y)){if(C===void 0)continue;let P=rp(C);l.push({name:`${c}.${g.id}.${S}`,payload:new Blob([P],{type:`application/json; length=${P.length}`})})}if(g.id!==void 0){let S=n[g.id];if(S){delete n[g.id];for(let[C,P]of Object.entries(S)){let E,A;if(Array.isArray(P)?[E,A]=P:(E=P.mimeType,A=P.data),C.includes(".")){console.warn(`Skipping attachment '${C}' for run ${g.id}: Invalid attachment name. Attachment names must not contain periods ('.'). Please rename the attachment and try again.`);continue}l.push({name:`attachment.${g.id}.${C}`,payload:new Blob([A],{type:`${E}; length=${A.byteLength}`})})}}}u.push(`trace=${g.trace_id},id=${g.id}`)}await this._sendMultipartRequest(l,u.join("; "))}async _sendMultipartRequest(e,r){try{let n="----LangSmithFormBoundary"+Math.random().toString(36).slice(2),o=[];for(let u of e)o.push(new Blob([`--${n}\r
`])),o.push(new Blob([`Content-Disposition: form-data; name="${u.name}"\r
`,`Content-Type: ${u.payload.type}\r
\r
`])),o.push(u.payload),o.push(new Blob([`\r
`]));o.push(new Blob([`--${n}--\r
`]));let a=await new Blob(o).arrayBuffer(),s=await this.batchIngestCaller.call(Ht(this.debug),`${this.apiUrl}/runs/multipart`,{method:"POST",headers:{...this.headers,"Content-Type":`multipart/form-data; boundary=${n}`},body:a,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await on(s,"ingest multipart runs",!0)}catch(n){console.warn(`${n.message.trim()}

Context: ${r}`)}}async updateRun(e,r){Wr(e),r.inputs&&(r.inputs=await this.processInputs(r.inputs)),r.outputs&&(r.outputs=await this.processOutputs(r.outputs));let n={...r,id:e};if(!this._filterForSampling([n],!0).length)return;if(this.autoBatchTracing&&n.trace_id!==void 0&&n.dotted_order!==void 0){if(r.end_time!==void 0&&n.parent_run_id===void 0&&this.blockOnRootRunFinalization&&!this.manualFlushMode){await this.processRunOperation({action:"update",item:n}).catch(console.error);return}else this.processRunOperation({action:"update",item:n}).catch(console.error);return}let o={...this.headers,"Content-Type":"application/json"},i=await this.caller.call(Ht(this.debug),`${this.apiUrl}/runs/${e}`,{method:"PATCH",headers:o,body:rp(r),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await on(i,"update run",!0)}async readRun(e,{loadChildRuns:r}={loadChildRuns:!1}){Wr(e);let n=await this._get(`/runs/${e}`);return r&&n.child_run_ids&&(n=await this._loadChildRuns(n)),n}async getRunUrl({runId:e,run:r,projectOpts:n}){if(r!==void 0){let o;r.session_id?o=r.session_id:n?.projectName?o=(await this.readProject({projectName:n?.projectName})).id:n?.projectId?o=n?.projectId:o=(await this.readProject({projectName:ep("PROJECT")||"default"})).id;let i=await this._getTenantId();return`${this.getHostUrl()}/o/${i}/projects/p/${o}/r/${r.id}?poll=true`}else if(e!==void 0){let o=await this.readRun(e);if(!o.app_path)throw new Error(`Run ${e} has no app_path`);return`${this.getHostUrl()}${o.app_path}`}else throw new Error("Must provide either runId or run")}async _loadChildRuns(e){let r=await ZXt(this.listRuns({id:e.child_run_ids})),n={},o={};r.sort((i,a)=>(i?.dotted_order??"").localeCompare(a?.dotted_order??""));for(let i of r){if(i.parent_run_id===null||i.parent_run_id===void 0)throw new Error(`Child run ${i.id} has no parent`);i.parent_run_id in n||(n[i.parent_run_id]=[]),n[i.parent_run_id].push(i),o[i.id]=i}e.child_runs=n[e.id]||[];for(let i in n)i!==e.id&&(o[i].child_runs=n[i]);return e}async*listRuns(e){let{projectId:r,projectName:n,parentRunId:o,traceId:i,referenceExampleId:a,startTime:s,executionOrder:u,isRoot:l,runType:c,error:d,id:f,query:p,filter:m,traceFilter:h,treeFilter:b,limit:g,select:y}=e,w=[];if(r&&(w=Array.isArray(r)?r:[r]),n){let E=Array.isArray(n)?n:[n],A=await Promise.all(E.map(I=>this.readProject({projectName:I}).then(R=>R.id)));w.push(...A)}let S=["app_path","child_run_ids","completion_cost","completion_tokens","dotted_order","end_time","error","events","extra","feedback_stats","first_token_time","id","inputs","name","outputs","parent_run_id","parent_run_ids","prompt_cost","prompt_tokens","reference_example_id","run_type","session_id","start_time","status","tags","total_cost","total_tokens","trace_id"],C={session:w.length?w:null,run_type:c,reference_example:a,query:p,filter:m,trace_filter:h,tree_filter:b,execution_order:u,parent_run:o,start_time:s?s.toISOString():null,error:d,id:f,limit:g,trace:i,select:y||S,is_root:l},P=0;for await(let E of this._getCursorPaginatedList("/runs/query",C))if(g){if(P>=g)break;if(E.length+P>g){yield*E.slice(0,g-P);break}P+=E.length,yield*E}else yield*E}async getRunStats({id:e,trace:r,parentRun:n,runType:o,projectNames:i,projectIds:a,referenceExampleIds:s,startTime:u,endTime:l,error:c,query:d,filter:f,traceFilter:p,treeFilter:m,isRoot:h,dataSourceType:b}){let g=a||[];i&&(g=[...a||[],...await Promise.all(i.map(P=>this.readProject({projectName:P}).then(E=>E.id)))]);let w=Object.fromEntries(Object.entries({id:e,trace:r,parent_run:n,run_type:o,session:g,reference_example:s,start_time:u,end_time:l,error:c,query:d,filter:f,trace_filter:p,tree_filter:m,is_root:h,data_source_type:b}).filter(([P,E])=>E!==void 0));return await(await this.caller.call(Ht(this.debug),`${this.apiUrl}/runs/stats`,{method:"POST",headers:this.headers,body:JSON.stringify(w),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json()}async shareRun(e,{shareId:r}={}){let n={run_id:e,share_token:r||Qa()};Wr(e);let i=await(await this.caller.call(Ht(this.debug),`${this.apiUrl}/runs/${e}/share`,{method:"PUT",headers:this.headers,body:JSON.stringify(n),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json();if(i===null||!("share_token"in i))throw new Error("Invalid response from server");return`${this.getHostUrl()}/public/${i.share_token}/r`}async unshareRun(e){Wr(e);let r=await this.caller.call(Ht(this.debug),`${this.apiUrl}/runs/${e}/share`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await on(r,"unshare run",!0)}async readRunSharedLink(e){Wr(e);let n=await(await this.caller.call(Ht(this.debug),`${this.apiUrl}/runs/${e}/share`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json();if(!(n===null||!("share_token"in n)))return`${this.getHostUrl()}/public/${n.share_token}/r`}async listSharedRuns(e,{runIds:r}={}){let n=new URLSearchParams({share_token:e});if(r!==void 0)for(let a of r)n.append("id",a);return Wr(e),await(await this.caller.call(Ht(this.debug),`${this.apiUrl}/public/${e}/runs${n}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json()}async readDatasetSharedSchema(e,r){if(!e&&!r)throw new Error("Either datasetId or datasetName must be given");e||(e=(await this.readDataset({datasetName:r})).id),Wr(e);let o=await(await this.caller.call(Ht(this.debug),`${this.apiUrl}/datasets/${e}/share`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json();return o.url=`${this.getHostUrl()}/public/${o.share_token}/d`,o}async shareDataset(e,r){if(!e&&!r)throw new Error("Either datasetId or datasetName must be given");e||(e=(await this.readDataset({datasetName:r})).id);let n={dataset_id:e};Wr(e);let i=await(await this.caller.call(Ht(this.debug),`${this.apiUrl}/datasets/${e}/share`,{method:"PUT",headers:this.headers,body:JSON.stringify(n),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json();return i.url=`${this.getHostUrl()}/public/${i.share_token}/d`,i}async unshareDataset(e){Wr(e);let r=await this.caller.call(Ht(this.debug),`${this.apiUrl}/datasets/${e}/share`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await on(r,"unshare dataset",!0)}async readSharedDataset(e){return Wr(e),await(await this.caller.call(Ht(this.debug),`${this.apiUrl}/public/${e}/datasets`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json()}async listSharedExamples(e,r){let n={};r?.exampleIds&&(n.id=r.exampleIds);let o=new URLSearchParams;Object.entries(n).forEach(([s,u])=>{Array.isArray(u)?u.forEach(l=>o.append(s,l)):o.append(s,u)});let i=await this.caller.call(Ht(this.debug),`${this.apiUrl}/public/${e}/examples?${o.toString()}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions}),a=await i.json();if(!i.ok)throw"detail"in a?new Error(`Failed to list shared examples.
Status: ${i.status}
Message: ${a.detail.join(`
`)}`):new Error(`Failed to list shared examples: ${i.status} ${i.statusText}`);return a.map(s=>({...s,_hostUrl:this.getHostUrl()}))}async createProject({projectName:e,description:r=null,metadata:n=null,upsert:o=!1,projectExtra:i=null,referenceDatasetId:a=null}){let s=o?"?upsert=true":"",u=`${this.apiUrl}/sessions${s}`,l=i||{};n&&(l.metadata=n);let c={name:e,extra:l,description:r};a!==null&&(c.reference_dataset_id=a);let d=await this.caller.call(Ht(this.debug),u,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(c),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await on(d,"create project"),await d.json()}async updateProject(e,{name:r=null,description:n=null,metadata:o=null,projectExtra:i=null,endTime:a=null}){let s=`${this.apiUrl}/sessions/${e}`,u=i;o&&(u={...u||{},metadata:o});let l={name:r,extra:u,description:n,end_time:a?new Date(a).toISOString():null},c=await this.caller.call(Ht(this.debug),s,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(l),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await on(c,"update project"),await c.json()}async hasProject({projectId:e,projectName:r}){let n="/sessions",o=new URLSearchParams;if(e!==void 0&&r!==void 0)throw new Error("Must provide either projectName or projectId, not both");if(e!==void 0)Wr(e),n+=`/${e}`;else if(r!==void 0)o.append("name",r);else throw new Error("Must provide projectName or projectId");let i=await this.caller.call(Ht(this.debug),`${this.apiUrl}${n}?${o}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});try{let a=await i.json();return i.ok?Array.isArray(a)?a.length>0:!0:!1}catch{return!1}}async readProject({projectId:e,projectName:r,includeStats:n}){let o="/sessions",i=new URLSearchParams;if(e!==void 0&&r!==void 0)throw new Error("Must provide either projectName or projectId, not both");if(e!==void 0)Wr(e),o+=`/${e}`;else if(r!==void 0)i.append("name",r);else throw new Error("Must provide projectName or projectId");n!==void 0&&i.append("include_stats",n.toString());let a=await this._get(o,i),s;if(Array.isArray(a)){if(a.length===0)throw new Error(`Project[id=${e}, name=${r}] not found`);s=a[0]}else s=a;return s}async getProjectUrl({projectId:e,projectName:r}){if(e===void 0&&r===void 0)throw new Error("Must provide either projectName or projectId");let n=await this.readProject({projectId:e,projectName:r}),o=await this._getTenantId();return`${this.getHostUrl()}/o/${o}/projects/p/${n.id}`}async getDatasetUrl({datasetId:e,datasetName:r}){if(e===void 0&&r===void 0)throw new Error("Must provide either datasetName or datasetId");let n=await this.readDataset({datasetId:e,datasetName:r}),o=await this._getTenantId();return`${this.getHostUrl()}/o/${o}/datasets/${n.id}`}async _getTenantId(){if(this._tenantId!==null)return this._tenantId;let e=new URLSearchParams({limit:"1"});for await(let r of this._getPaginated("/sessions",e))return this._tenantId=r[0].tenant_id,r[0].tenant_id;throw new Error("No projects found to resolve tenant.")}async*listProjects({projectIds:e,name:r,nameContains:n,referenceDatasetId:o,referenceDatasetName:i,referenceFree:a,metadata:s}={}){let u=new URLSearchParams;if(e!==void 0)for(let l of e)u.append("id",l);if(r!==void 0&&u.append("name",r),n!==void 0&&u.append("name_contains",n),o!==void 0)u.append("reference_dataset",o);else if(i!==void 0){let l=await this.readDataset({datasetName:i});u.append("reference_dataset",l.id)}a!==void 0&&u.append("reference_free",a.toString()),s!==void 0&&u.append("metadata",JSON.stringify(s));for await(let l of this._getPaginated("/sessions",u))yield*l}async deleteProject({projectId:e,projectName:r}){let n;if(e===void 0&&r===void 0)throw new Error("Must provide projectName or projectId");if(e!==void 0&&r!==void 0)throw new Error("Must provide either projectName or projectId, not both");e===void 0?n=(await this.readProject({projectName:r})).id:n=e,Wr(n);let o=await this.caller.call(Ht(this.debug),`${this.apiUrl}/sessions/${n}`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await on(o,`delete session ${n} (${r})`,!0)}async uploadCsv({csvFile:e,fileName:r,inputKeys:n,outputKeys:o,description:i,dataType:a,name:s}){let u=`${this.apiUrl}/datasets/upload`,l=new FormData;l.append("file",e,r),n.forEach(f=>{l.append("input_keys",f)}),o.forEach(f=>{l.append("output_keys",f)}),i&&l.append("description",i),a&&l.append("data_type",a),s&&l.append("name",s);let c=await this.caller.call(Ht(this.debug),u,{method:"POST",headers:this.headers,body:l,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await on(c,"upload CSV"),await c.json()}async createDataset(e,{description:r,dataType:n,inputsSchema:o,outputsSchema:i,metadata:a}={}){let s={name:e,description:r,extra:a?{metadata:a}:void 0};n&&(s.data_type=n),o&&(s.inputs_schema_definition=o),i&&(s.outputs_schema_definition=i);let u=await this.caller.call(Ht(this.debug),`${this.apiUrl}/datasets`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(s),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await on(u,"create dataset"),await u.json()}async readDataset({datasetId:e,datasetName:r}){let n="/datasets",o=new URLSearchParams({limit:"1"});if(e!==void 0&&r!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");if(e!==void 0)Wr(e),n+=`/${e}`;else if(r!==void 0)o.append("name",r);else throw new Error("Must provide datasetName or datasetId");let i=await this._get(n,o),a;if(Array.isArray(i)){if(i.length===0)throw new Error(`Dataset[id=${e}, name=${r}] not found`);a=i[0]}else a=i;return a}async hasDataset({datasetId:e,datasetName:r}){try{return await this.readDataset({datasetId:e,datasetName:r}),!0}catch(n){if(n instanceof Error&&n.message.toLocaleLowerCase().includes("not found"))return!1;throw n}}async diffDatasetVersions({datasetId:e,datasetName:r,fromVersion:n,toVersion:o}){let i=e;if(i===void 0&&r===void 0)throw new Error("Must provide either datasetName or datasetId");if(i!==void 0&&r!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");i===void 0&&(i=(await this.readDataset({datasetName:r})).id);let a=new URLSearchParams({from_version:typeof n=="string"?n:n.toISOString(),to_version:typeof o=="string"?o:o.toISOString()});return await this._get(`/datasets/${i}/versions/diff`,a)}async readDatasetOpenaiFinetuning({datasetId:e,datasetName:r}){let n="/datasets";if(e===void 0)if(r!==void 0)e=(await this.readDataset({datasetName:r})).id;else throw new Error("Must provide either datasetName or datasetId");return(await(await this._getResponse(`${n}/${e}/openai_ft`)).text()).trim().split(`
`).map(s=>JSON.parse(s))}async*listDatasets({limit:e=100,offset:r=0,datasetIds:n,datasetName:o,datasetNameContains:i,metadata:a}={}){let s="/datasets",u=new URLSearchParams({limit:e.toString(),offset:r.toString()});if(n!==void 0)for(let l of n)u.append("id",l);o!==void 0&&u.append("name",o),i!==void 0&&u.append("name_contains",i),a!==void 0&&u.append("metadata",JSON.stringify(a));for await(let l of this._getPaginated(s,u))yield*l}async updateDataset(e){let{datasetId:r,datasetName:n,...o}=e;if(!r&&!n)throw new Error("Must provide either datasetName or datasetId");let i=r??(await this.readDataset({datasetName:n})).id;Wr(i);let a=await this.caller.call(Ht(this.debug),`${this.apiUrl}/datasets/${i}`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(o),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await on(a,"update dataset"),await a.json()}async updateDatasetTag(e){let{datasetId:r,datasetName:n,asOf:o,tag:i}=e;if(!r&&!n)throw new Error("Must provide either datasetName or datasetId");let a=r??(await this.readDataset({datasetName:n})).id;Wr(a);let s=await this.caller.call(Ht(this.debug),`${this.apiUrl}/datasets/${a}/tags`,{method:"PUT",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify({as_of:typeof o=="string"?o:o.toISOString(),tag:i}),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await on(s,"update dataset tags")}async deleteDataset({datasetId:e,datasetName:r}){let n="/datasets",o=e;if(e!==void 0&&r!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");if(r!==void 0&&(o=(await this.readDataset({datasetName:r})).id),o!==void 0)Wr(o),n+=`/${o}`;else throw new Error("Must provide datasetName or datasetId");let i=await this.caller.call(Ht(this.debug),this.apiUrl+n,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await on(i,`delete ${n}`),await i.json()}async indexDataset({datasetId:e,datasetName:r,tag:n}){let o=e;if(!o&&!r)throw new Error("Must provide either datasetName or datasetId");if(o&&r)throw new Error("Must provide either datasetName or datasetId, not both");o||(o=(await this.readDataset({datasetName:r})).id),Wr(o);let i={tag:n},a=await this.caller.call(Ht(this.debug),`${this.apiUrl}/datasets/${o}/index`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(i),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await on(a,"index dataset"),await a.json()}async similarExamples(e,r,n,{filter:o}={}){let i={limit:n,inputs:e};o!==void 0&&(i.filter=o),Wr(r);let a=await this.caller.call(Ht(this.debug),`${this.apiUrl}/datasets/${r}/search`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(i),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await on(a,"fetch similar examples"),(await a.json()).examples}async createExample(e,r,n){if(nUe(e)&&(r!==void 0||n!==void 0))throw new Error("Cannot provide outputs or options when using ExampleCreate object");let o=r?n?.datasetId:e.dataset_id,i=r?n?.datasetName:e.dataset_name;if(o===void 0&&i===void 0)throw new Error("Must provide either datasetName or datasetId");if(o!==void 0&&i!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");o===void 0&&(o=(await this.readDataset({datasetName:i})).id);let a=(r?n?.createdAt:e.created_at)||new Date,s;nUe(e)?s=e:s={inputs:e,outputs:r,created_at:a?.toISOString(),id:n?.exampleId,metadata:n?.metadata,split:n?.split,source_run_id:n?.sourceRunId,use_source_run_io:n?.useSourceRunIO,use_source_run_attachments:n?.useSourceRunAttachments,attachments:n?.attachments};let u=await this._uploadExamplesMultipart(o,[s]);return await this.readExample(u.example_ids?.[0]??Qa())}async createExamples(e){if(Array.isArray(e)){if(e.length===0)return[];let y=e,w=y[0].dataset_id,S=y[0].dataset_name;if(w===void 0&&S===void 0)throw new Error("Must provide either datasetName or datasetId");if(w!==void 0&&S!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");w===void 0&&(w=(await this.readDataset({datasetName:S})).id);let C=await this._uploadExamplesMultipart(w,y);return await Promise.all(C.example_ids.map(E=>this.readExample(E)))}let{inputs:r,outputs:n,metadata:o,splits:i,sourceRunIds:a,useSourceRunIOs:s,useSourceRunAttachments:u,attachments:l,exampleIds:c,datasetId:d,datasetName:f}=e;if(r===void 0)throw new Error("Must provide inputs when using legacy parameters");let p=d,m=f;if(p===void 0&&m===void 0)throw new Error("Must provide either datasetName or datasetId");if(p!==void 0&&m!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");p===void 0&&(p=(await this.readDataset({datasetName:m})).id);let h=r.map((y,w)=>({dataset_id:p,inputs:y,outputs:n?.[w],metadata:o?.[w],split:i?.[w],id:c?.[w],attachments:l?.[w],source_run_id:a?.[w],use_source_run_io:s?.[w],use_source_run_attachments:u?.[w]})),b=await this._uploadExamplesMultipart(p,h);return await Promise.all(b.example_ids.map(y=>this.readExample(y)))}async createLLMExample(e,r,n){return this.createExample({input:e},{output:r},n)}async createChatExample(e,r,n){let o=e.map(a=>Xde(a)?Qde(a):a),i=Xde(r)?Qde(r):r;return this.createExample({input:o},{output:i},n)}async readExample(e){Wr(e);let r=`/examples/${e}`,n=await this._get(r),{attachment_urls:o,...i}=n,a=i;return o&&(a.attachments=Object.entries(o).reduce((s,[u,l])=>(s[u.slice(11)]={presigned_url:l.presigned_url,mime_type:l.mime_type},s),{})),a}async*listExamples({datasetId:e,datasetName:r,exampleIds:n,asOf:o,splits:i,inlineS3Urls:a,metadata:s,limit:u,offset:l,filter:c,includeAttachments:d}={}){let f;if(e!==void 0&&r!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");if(e!==void 0)f=e;else if(r!==void 0)f=(await this.readDataset({datasetName:r})).id;else throw new Error("Must provide a datasetName or datasetId");let p=new URLSearchParams({dataset:f}),m=o?typeof o=="string"?o:o?.toISOString():void 0;m&&p.append("as_of",m);let h=a??!0;if(p.append("inline_s3_urls",h.toString()),n!==void 0)for(let g of n)p.append("id",g);if(i!==void 0)for(let g of i)p.append("splits",g);if(s!==void 0){let g=JSON.stringify(s);p.append("metadata",g)}u!==void 0&&p.append("limit",u.toString()),l!==void 0&&p.append("offset",l.toString()),c!==void 0&&p.append("filter",c),d===!0&&["attachment_urls","outputs","metadata"].forEach(g=>p.append("select",g));let b=0;for await(let g of this._getPaginated("/examples",p)){for(let y of g){let{attachment_urls:w,...S}=y,C=S;w&&(C.attachments=Object.entries(w).reduce((P,[E,A])=>(P[E.slice(11)]={presigned_url:A.presigned_url,mime_type:A.mime_type||void 0},P),{})),yield C,b++}if(u!==void 0&&b>=u)break}}async deleteExample(e){Wr(e);let r=`/examples/${e}`,n=await this.caller.call(Ht(this.debug),this.apiUrl+r,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await on(n,`delete ${r}`),await n.json()}async updateExample(e,r){let n;r?n=e:n=e.id,Wr(n);let o;r?o={id:n,...r}:o=e;let i;return o.dataset_id!==void 0?i=o.dataset_id:i=(await this.readExample(n)).dataset_id,this._updateExamplesMultipart(i,[o])}async updateExamples(e){let r;return e[0].dataset_id===void 0?r=(await this.readExample(e[0].id)).dataset_id:r=e[0].dataset_id,this._updateExamplesMultipart(r,e)}async readDatasetVersion({datasetId:e,datasetName:r,asOf:n,tag:o}){let i;if(e?i=e:i=(await this.readDataset({datasetName:r})).id,Wr(i),n&&o||!n&&!o)throw new Error("Exactly one of asOf and tag must be specified.");let a=new URLSearchParams;n!==void 0&&a.append("as_of",typeof n=="string"?n:n.toISOString()),o!==void 0&&a.append("tag",o);let s=await this.caller.call(Ht(this.debug),`${this.apiUrl}/datasets/${i}/version?${a.toString()}`,{method:"GET",headers:{...this.headers},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await on(s,"read dataset version"),await s.json()}async listDatasetSplits({datasetId:e,datasetName:r,asOf:n}){let o;if(e===void 0&&r===void 0)throw new Error("Must provide dataset name or ID");if(e!==void 0&&r!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");e===void 0?o=(await this.readDataset({datasetName:r})).id:o=e,Wr(o);let i=new URLSearchParams,a=n?typeof n=="string"?n:n?.toISOString():void 0;return a&&i.append("as_of",a),await this._get(`/datasets/${o}/splits`,i)}async updateDatasetSplits({datasetId:e,datasetName:r,splitName:n,exampleIds:o,remove:i=!1}){let a;if(e===void 0&&r===void 0)throw new Error("Must provide dataset name or ID");if(e!==void 0&&r!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");e===void 0?a=(await this.readDataset({datasetName:r})).id:a=e,Wr(a);let s={split_name:n,examples:o.map(l=>(Wr(l),l)),remove:i},u=await this.caller.call(Ht(this.debug),`${this.apiUrl}/datasets/${a}/splits`,{method:"PUT",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(s),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await on(u,"update dataset splits",!0)}async evaluateRun(e,r,{sourceInfo:n,loadChildRuns:o,referenceExample:i}={loadChildRuns:!1}){z9("This method is deprecated and will be removed in future LangSmith versions, use `evaluate` from `langsmith/evaluation` instead.");let a;if(typeof e=="string")a=await this.readRun(e,{loadChildRuns:o});else if(typeof e=="object"&&"id"in e)a=e;else throw new Error(`Invalid run type: ${typeof e}`);a.reference_example_id!==null&&a.reference_example_id!==void 0&&(i=await this.readExample(a.reference_example_id));let s=await r.evaluateRun(a,i),[u,l]=await this._logEvaluationFeedback(s,a,n);return l[0]}async createFeedback(e,r,{score:n,value:o,correction:i,comment:a,sourceInfo:s,feedbackSourceType:u="api",sourceRunId:l,feedbackId:c,feedbackConfig:d,projectId:f,comparativeExperimentId:p}){if(!e&&!f)throw new Error("One of runId or projectId must be provided");if(e&&f)throw new Error("Only one of runId or projectId can be provided");let m={type:u??"api",metadata:s??{}};l!==void 0&&m?.metadata!==void 0&&!m.metadata.__run&&(m.metadata.__run={run_id:l}),m?.metadata!==void 0&&m.metadata.__run?.run_id!==void 0&&Wr(m.metadata.__run.run_id);let h={id:c??Qa(),run_id:e,key:r,score:rUe(n),value:o,correction:i,comment:a,feedback_source:m,comparative_experiment_id:p,feedbackConfig:d,session_id:f},b=`${this.apiUrl}/feedback`,g=await this.caller.call(Ht(this.debug),b,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(h),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await on(g,"create feedback",!0),h}async updateFeedback(e,{score:r,value:n,correction:o,comment:i}){let a={};r!=null&&(a.score=rUe(r)),n!=null&&(a.value=n),o!=null&&(a.correction=o),i!=null&&(a.comment=i),Wr(e);let s=await this.caller.call(Ht(this.debug),`${this.apiUrl}/feedback/${e}`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(a),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await on(s,"update feedback",!0)}async readFeedback(e){Wr(e);let r=`/feedback/${e}`;return await this._get(r)}async deleteFeedback(e){Wr(e);let r=`/feedback/${e}`,n=await this.caller.call(Ht(this.debug),this.apiUrl+r,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await on(n,`delete ${r}`),await n.json()}async*listFeedback({runIds:e,feedbackKeys:r,feedbackSourceTypes:n}={}){let o=new URLSearchParams;if(e&&o.append("run",e.join(",")),r)for(let i of r)o.append("key",i);if(n)for(let i of n)o.append("source",i);for await(let i of this._getPaginated("/feedback",o))yield*i}async createPresignedFeedbackToken(e,r,{expiration:n,feedbackConfig:o}={}){let i={run_id:e,feedback_key:r,feedback_config:o};return n?typeof n=="string"?i.expires_at=n:(n?.hours||n?.minutes||n?.days)&&(i.expires_in=n):i.expires_in={hours:3},await(await this.caller.call(Ht(this.debug),`${this.apiUrl}/feedback/tokens`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(i),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json()}async createComparativeExperiment({name:e,experimentIds:r,referenceDatasetId:n,createdAt:o,description:i,metadata:a,id:s}){if(r.length===0)throw new Error("At least one experiment is required");if(n||(n=(await this.readProject({projectId:r[0]})).reference_dataset_id),!n==null)throw new Error("A reference dataset is required");let u={id:s,name:e,experiment_ids:r,reference_dataset_id:n,description:i,created_at:(o??new Date)?.toISOString(),extra:{}};return a&&(u.extra.metadata=a),await(await this.caller.call(Ht(this.debug),`${this.apiUrl}/datasets/comparative`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(u),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json()}async*listPresignedFeedbackTokens(e){Wr(e);let r=new URLSearchParams({run_id:e});for await(let n of this._getPaginated("/feedback/tokens",r))yield*n}_selectEvalResults(e){let r;return"results"in e?r=e.results:Array.isArray(e)?r=e:r=[e],r}async _logEvaluationFeedback(e,r,n){let o=this._selectEvalResults(e),i=[];for(let a of o){let s=n||{};a.evaluatorInfo&&(s={...a.evaluatorInfo,...s});let u=null;a.targetRunId?u=a.targetRunId:r&&(u=r.id),i.push(await this.createFeedback(u,a.key,{score:a.score,value:a.value,comment:a.comment,correction:a.correction,sourceInfo:s,sourceRunId:a.sourceRunId,feedbackConfig:a.feedbackConfig,feedbackSourceType:"model"}))}return[o,i]}async logEvaluationFeedback(e,r,n){let[o]=await this._logEvaluationFeedback(e,r,n);return o}async*listAnnotationQueues(e={}){let{queueIds:r,name:n,nameContains:o,limit:i}=e,a=new URLSearchParams;r&&r.forEach((u,l)=>{Wr(u,`queueIds[${l}]`),a.append("ids",u)}),n&&a.append("name",n),o&&a.append("name_contains",o),a.append("limit",(i!==void 0?Math.min(i,100):100).toString());let s=0;for await(let u of this._getPaginated("/annotation-queues",a))if(yield*u,s++,i!==void 0&&s>=i)break}async createAnnotationQueue(e){let{name:r,description:n,queueId:o}=e,i={name:r,description:n,id:o||Qa()},a=await this.caller.call(Ht(this.debug),`${this.apiUrl}/annotation-queues`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(Object.fromEntries(Object.entries(i).filter(([u,l])=>l!==void 0))),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await on(a,"create annotation queue"),await a.json()}async readAnnotationQueue(e){let r=await this.listAnnotationQueues({queueIds:[e]}).next();if(r.done)throw new Error(`Annotation queue with ID ${e} not found`);return r.value}async updateAnnotationQueue(e,r){let{name:n,description:o}=r,i=await this.caller.call(Ht(this.debug),`${this.apiUrl}/annotation-queues/${Wr(e,"queueId")}`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify({name:n,description:o}),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await on(i,"update annotation queue")}async deleteAnnotationQueue(e){let r=await this.caller.call(Ht(this.debug),`${this.apiUrl}/annotation-queues/${Wr(e,"queueId")}`,{method:"DELETE",headers:{...this.headers,Accept:"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await on(r,"delete annotation queue")}async addRunsToAnnotationQueue(e,r){let n=await this.caller.call(Ht(this.debug),`${this.apiUrl}/annotation-queues/${Wr(e,"queueId")}/runs`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(r.map((o,i)=>Wr(o,`runIds[${i}]`).toString())),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await on(n,"add runs to annotation queue")}async getRunFromAnnotationQueue(e,r){let n=`/annotation-queues/${Wr(e,"queueId")}/run`,o=await this.caller.call(Ht(this.debug),`${this.apiUrl}${n}/${r}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await on(o,"get run from annotation queue"),await o.json()}async deleteRunFromAnnotationQueue(e,r){let n=await this.caller.call(Ht(this.debug),`${this.apiUrl}/annotation-queues/${Wr(e,"queueId")}/runs/${Wr(r,"queueRunId")}`,{method:"DELETE",headers:{...this.headers,Accept:"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await on(n,"delete run from annotation queue")}async getSizeFromAnnotationQueue(e){let r=await this.caller.call(Ht(this.debug),`${this.apiUrl}/annotation-queues/${Wr(e,"queueId")}/size`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await on(r,"get size from annotation queue"),await r.json()}async _currentTenantIsOwner(e){let r=await this._getSettings();return e=="-"||r.tenant_handle===e}async _ownerConflictError(e,r){let n=await this._getSettings();return new Error(`Cannot ${e} for another tenant.

      Current tenant: ${n.tenant_handle}

      Requested tenant: ${r}`)}async _getLatestCommitHash(e){let r=await this.caller.call(Ht(this.debug),`${this.apiUrl}/commits/${e}/?limit=1&offset=0`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions}),n=await r.json();if(!r.ok){let o=typeof n.detail=="string"?n.detail:JSON.stringify(n.detail),i=new Error(`Error ${r.status}: ${r.statusText}
${o}`);throw i.statusCode=r.status,i}if(n.commits.length!==0)return n.commits[0].commit_hash}async _likeOrUnlikePrompt(e,r){let[n,o,i]=tC(e),a=await this.caller.call(Ht(this.debug),`${this.apiUrl}/likes/${n}/${o}`,{method:"POST",body:JSON.stringify({like:r}),headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await on(a,`${r?"like":"unlike"} prompt`),await a.json()}async _getPromptUrl(e){let[r,n,o]=tC(e);if(await this._currentTenantIsOwner(r)){let i=await this._getSettings();return o!=="latest"?`${this.getHostUrl()}/prompts/${n}/${o.substring(0,8)}?organizationId=${i.id}`:`${this.getHostUrl()}/prompts/${n}?organizationId=${i.id}`}else return o!=="latest"?`${this.getHostUrl()}/hub/${r}/${n}/${o.substring(0,8)}`:`${this.getHostUrl()}/hub/${r}/${n}`}async promptExists(e){return!!await this.getPrompt(e)}async likePrompt(e){return this._likeOrUnlikePrompt(e,!0)}async unlikePrompt(e){return this._likeOrUnlikePrompt(e,!1)}async*listCommits(e){for await(let r of this._getPaginated(`/commits/${e}/`,new URLSearchParams,n=>n.commits))yield*r}async*listPrompts(e){let r=new URLSearchParams;r.append("sort_field",e?.sortField??"updated_at"),r.append("sort_direction","desc"),r.append("is_archived",(!!e?.isArchived).toString()),e?.isPublic!==void 0&&r.append("is_public",e.isPublic.toString()),e?.query&&r.append("query",e.query);for await(let n of this._getPaginated("/repos",r,o=>o.repos))yield*n}async getPrompt(e){let[r,n,o]=tC(e),i=await this.caller.call(Ht(this.debug),`${this.apiUrl}/repos/${r}/${n}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});if(i.status===404)return null;await on(i,"get prompt");let a=await i.json();return a.repo?a.repo:null}async createPrompt(e,r){let n=await this._getSettings();if(r?.isPublic&&!n.tenant_handle)throw new Error(`Cannot create a public prompt without first

        creating a LangChain Hub handle. 
        You can add a handle by creating a public prompt at:

        https://smith.langchain.com/prompts`);let[o,i,a]=tC(e);if(!await this._currentTenantIsOwner(o))throw await this._ownerConflictError("create a prompt",o);let s={repo_handle:i,...r?.description&&{description:r.description},...r?.readme&&{readme:r.readme},...r?.tags&&{tags:r.tags},is_public:!!r?.isPublic},u=await this.caller.call(Ht(this.debug),`${this.apiUrl}/repos/`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(s),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await on(u,"create prompt");let{repo:l}=await u.json();return l}async createCommit(e,r,n){if(!await this.promptExists(e))throw new Error("Prompt does not exist, you must create it first.");let[o,i,a]=tC(e),s=n?.parentCommitHash==="latest"||!n?.parentCommitHash?await this._getLatestCommitHash(`${o}/${i}`):n?.parentCommitHash,u={manifest:JSON.parse(JSON.stringify(r)),parent_commit:s},l=await this.caller.call(Ht(this.debug),`${this.apiUrl}/commits/${o}/${i}`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(u),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await on(l,"create commit");let c=await l.json();return this._getPromptUrl(`${o}/${i}${c.commit_hash?`:${c.commit_hash}`:""}`)}async updateExamplesMultipart(e,r=[]){return this._updateExamplesMultipart(e,r)}async _updateExamplesMultipart(e,r=[]){if(!await this._getMultiPartSupport())throw new Error("Your LangSmith deployment does not allow using the multipart examples endpoint, please upgrade your deployment to the latest version.");let n=new FormData;for(let s of r){let u=s.id,l={...s.metadata&&{metadata:s.metadata},...s.split&&{split:s.split}},c=rp(l),d=new Blob([c],{type:"application/json"});if(n.append(u,d),s.inputs){let f=rp(s.inputs),p=new Blob([f],{type:"application/json"});n.append(`${u}.inputs`,p)}if(s.outputs){let f=rp(s.outputs),p=new Blob([f],{type:"application/json"});n.append(`${u}.outputs`,p)}if(s.attachments)for(let[f,p]of Object.entries(s.attachments)){let m,h;Array.isArray(p)?[m,h]=p:(m=p.mimeType,h=p.data);let b=new Blob([h],{type:`${m}; length=${h.byteLength}`});n.append(`${u}.attachment.${f}`,b)}if(s.attachments_operations){let f=rp(s.attachments_operations),p=new Blob([f],{type:"application/json"});n.append(`${u}.attachments_operations`,p)}}let o=e??r[0]?.dataset_id;return await(await this.caller.call(Ht(this.debug),`${this.apiUrl}/v1/platform/datasets/${o}/examples`,{method:"PATCH",headers:this.headers,body:n})).json()}async uploadExamplesMultipart(e,r=[]){return this._uploadExamplesMultipart(e,r)}async _uploadExamplesMultipart(e,r=[]){if(!await this._getMultiPartSupport())throw new Error("Your LangSmith deployment does not allow using the multipart examples endpoint, please upgrade your deployment to the latest version.");let n=new FormData;for(let a of r){let s=(a.id??Qa()).toString(),u={created_at:a.created_at,...a.metadata&&{metadata:a.metadata},...a.split&&{split:a.split},...a.source_run_id&&{source_run_id:a.source_run_id},...a.use_source_run_io&&{use_source_run_io:a.use_source_run_io},...a.use_source_run_attachments&&{use_source_run_attachments:a.use_source_run_attachments}},l=rp(u),c=new Blob([l],{type:"application/json"});if(n.append(s,c),a.inputs){let d=rp(a.inputs),f=new Blob([d],{type:"application/json"});n.append(`${s}.inputs`,f)}if(a.outputs){let d=rp(a.outputs),f=new Blob([d],{type:"application/json"});n.append(`${s}.outputs`,f)}if(a.attachments)for(let[d,f]of Object.entries(a.attachments)){let p,m;Array.isArray(f)?[p,m]=f:(p=f.mimeType,m=f.data);let h=new Blob([m],{type:`${p}; length=${m.byteLength}`});n.append(`${s}.attachment.${d}`,h)}}let o=await this.caller.call(Ht(this.debug),`${this.apiUrl}/v1/platform/datasets/${e}/examples`,{method:"POST",headers:this.headers,body:n});return await on(o,"upload examples"),await o.json()}async updatePrompt(e,r){if(!await this.promptExists(e))throw new Error("Prompt does not exist, you must create it first.");let[n,o]=tC(e);if(!await this._currentTenantIsOwner(n))throw await this._ownerConflictError("update a prompt",n);let i={};if(r?.description!==void 0&&(i.description=r.description),r?.readme!==void 0&&(i.readme=r.readme),r?.tags!==void 0&&(i.tags=r.tags),r?.isPublic!==void 0&&(i.is_public=r.isPublic),r?.isArchived!==void 0&&(i.is_archived=r.isArchived),Object.keys(i).length===0)throw new Error("No valid update options provided");let a=await this.caller.call(Ht(this.debug),`${this.apiUrl}/repos/${n}/${o}`,{method:"PATCH",body:JSON.stringify(i),headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await on(a,"update prompt"),a.json()}async deletePrompt(e){if(!await this.promptExists(e))throw new Error("Prompt does not exist, you must create it first.");let[r,n,o]=tC(e);if(!await this._currentTenantIsOwner(r))throw await this._ownerConflictError("delete a prompt",r);return await(await this.caller.call(Ht(this.debug),`${this.apiUrl}/repos/${r}/${n}`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json()}async pullPromptCommit(e,r){let[n,o,i]=tC(e),a=await this.caller.call(Ht(this.debug),`${this.apiUrl}/commits/${n}/${o}/${i}${r?.includeModel?"?include_model=true":""}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await on(a,"pull prompt commit");let s=await a.json();return{owner:n,repo:o,commit_hash:s.commit_hash,manifest:s.manifest,examples:s.examples}}async _pullPrompt(e,r){let n=await this.pullPromptCommit(e,{includeModel:r?.includeModel});return JSON.stringify(n.manifest)}async pushPrompt(e,r){return await this.promptExists(e)?r&&Object.keys(r).some(o=>o!=="object")&&await this.updatePrompt(e,{description:r?.description,readme:r?.readme,tags:r?.tags,isPublic:r?.isPublic}):await this.createPrompt(e,{description:r?.description,readme:r?.readme,tags:r?.tags,isPublic:r?.isPublic}),r?.object?await this.createCommit(e,r?.object,{parentCommitHash:r?.parentCommitHash}):await this._getPromptUrl(e)}async clonePublicDataset(e,r={}){let{sourceApiUrl:n=this.apiUrl,datasetName:o}=r,[i,a]=this.parseTokenOrUrl(e,n),s=new t({apiUrl:i,apiKey:"placeholder"}),u=await s.readSharedDataset(a),l=o||u.name;try{if(await this.hasDataset({datasetId:l})){console.log(`Dataset ${l} already exists in your tenant. Skipping.`);return}}catch{}let c=await s.listSharedExamples(a),d=await this.createDataset(l,{description:u.description,dataType:u.data_type||"kv",inputsSchema:u.inputs_schema_definition??void 0,outputsSchema:u.outputs_schema_definition??void 0});try{await this.createExamples({inputs:c.map(f=>f.inputs),outputs:c.flatMap(f=>f.outputs?[f.outputs]:[]),datasetId:d.id})}catch(f){throw console.error(`An error occurred while creating dataset ${l}. You should delete it manually.`),f}}parseTokenOrUrl(e,r,n=2,o="dataset"){try{return Wr(e),[r,e]}catch{}try{let a=new URL(e).pathname.split("/").filter(s=>s!=="");if(a.length>=n){let s=a[a.length-n];return[r,s]}else throw new Error(`Invalid public ${o} URL: ${e}`)}catch{throw new Error(`Invalid public ${o} URL or token: ${e}`)}}awaitPendingTraceBatches(){return this.manualFlushMode?(console.warn("[WARNING]: When tracing in manual flush mode, you must call `await client.flush()` manually to submit trace batches."),Promise.resolve()):Promise.all([...this.autoBatchQueue.items.map(({itemPromise:e})=>e),this.batchIngestCaller.queue.onIdle()])}}});var rK,nK=O(()=>{Cfe();iK();q9();rK="0.3.20"});function oK(){if(Ofe===void 0){let t=iQt(),e=sQt();Ofe={library:"langsmith",runtime:t,sdk:"langsmith-js",sdk_version:rK,...e}}return Ofe}function oUe(){let t=aQt()||{},e={},r=["LANGCHAIN_API_KEY","LANGCHAIN_ENDPOINT","LANGCHAIN_TRACING_V2","LANGCHAIN_PROJECT","LANGCHAIN_SESSION","LANGSMITH_API_KEY","LANGSMITH_ENDPOINT","LANGSMITH_TRACING_V2","LANGSMITH_PROJECT","LANGSMITH_SESSION"];for(let[n,o]of Object.entries(t))(n.startsWith("LANGCHAIN_")||n.startsWith("LANGSMITH_"))&&typeof o=="string"&&!r.includes(n)&&!n.toLowerCase().includes("key")&&!n.toLowerCase().includes("secret")&&!n.toLowerCase().includes("token")&&(n==="LANGCHAIN_REVISION_ID"?e.revision_id=o:e[n]=o);return e}function aQt(){try{return typeof process<"u"&&process.env?Object.entries(process.env).reduce((t,[e,r])=>(t[e]=String(r),t),{}):void 0}catch{return}}function Sb(t){try{return typeof process<"u"?process.env?.[t]:void 0}catch{return}}function ep(t){return Sb(`LANGSMITH_${t}`)||Sb(`LANGCHAIN_${t}`)}function sQt(){if(Pfe!==void 0)return Pfe;let t=["VERCEL_GIT_COMMIT_SHA","NEXT_PUBLIC_VERCEL_GIT_COMMIT_SHA","COMMIT_REF","RENDER_GIT_COMMIT","CI_COMMIT_SHA","CIRCLE_SHA1","CF_PAGES_COMMIT_SHA","REACT_APP_GIT_SHA","SOURCE_VERSION","GITHUB_SHA","TRAVIS_COMMIT","GIT_COMMIT","BUILD_VCS_NUMBER","bamboo_planRepository_revision","Build.SourceVersion","BITBUCKET_COMMIT","DRONE_COMMIT_SHA","SEMAPHORE_GIT_SHA","BUILDKITE_COMMIT"],e={};for(let r of t){let n=Sb(r);n!==void 0&&(e[r]=n)}return Pfe=e,e}var nC,tQt,rQt,nQt,iUe,oQt,iQt,Ofe,Pfe,Tz=O(()=>{nK();tQt=()=>typeof window<"u"&&typeof window.document<"u",rQt=()=>typeof globalThis=="object"&&globalThis.constructor&&globalThis.constructor.name==="DedicatedWorkerGlobalScope",nQt=()=>typeof window<"u"&&window.name==="nodejs"||typeof navigator<"u"&&(navigator.userAgent.includes("Node.js")||navigator.userAgent.includes("jsdom")),iUe=()=>typeof Deno<"u",oQt=()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"&&!iUe(),iQt=()=>nC||(tQt()?nC="browser":oQt()?nC="node":rQt()?nC="webworker":nQt()?nC="jsdom":iUe()?nC="deno":nC="other",nC)});var aUe,sUe=O(()=>{Tz();aUe=t=>t!==void 0?t:!!["TRACING_V2","TRACING"].find(r=>ep(r)==="true")});var aK,uUe=O(()=>{aK=Symbol.for("lc:context_variables")});function uQt(t){return t.replace(/[-:.]/g,"")}function lQt(t,e,r=1){let n=r.toFixed(0).slice(0,3).padStart(3,"0");return uQt(`${new Date(t).toISOString().slice(0,-1)}${n}Z`)+e}function uK(t){return t!==void 0&&typeof t.createChild=="function"&&typeof t.postRun=="function"}function cUe(t){return typeof t=="object"&&t!=null&&typeof t.name=="string"&&t.name==="langchain_tracer"}function lUe(t){return Array.isArray(t)&&t.some(e=>cUe(e))}function cQt(t){return typeof t=="object"&&t!=null&&Array.isArray(t.handlers)}function dQt(t){return t!==void 0&&typeof t.callbacks=="object"&&(lUe(t.callbacks?.handlers)||lUe(t.callbacks))}var sK,rC,iK=O(()=>{oE();Tz();Cfe();sUe();efe();uUe();sK=class t{constructor(e,r,n){Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"project_name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.metadata=e,this.tags=r,this.project_name=n}static fromHeader(e){let r=e.split(","),n={},o=[],i;for(let a of r){let[s,u]=a.split("="),l=decodeURIComponent(u);s==="langsmith-metadata"?n=JSON.parse(l):s==="langsmith-tags"?o=l.split(","):s==="langsmith-project"&&(i=l)}return new t(n,o,i)}toHeader(){let e=[];return this.metadata&&Object.keys(this.metadata).length>0&&e.push(`langsmith-metadata=${encodeURIComponent(JSON.stringify(this.metadata))}`),this.tags&&this.tags.length>0&&e.push(`langsmith-tags=${encodeURIComponent(this.tags.join(","))}`),this.project_name&&e.push(`langsmith-project=${encodeURIComponent(this.project_name)}`),e.join(",")}},rC=class t{constructor(e){if(Object.defineProperty(this,"id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"run_type",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"project_name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"parent_run",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"child_runs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"start_time",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"end_time",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"extra",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"error",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"serialized",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"inputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"outputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reference_example_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"events",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"trace_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"dotted_order",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tracingEnabled",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"execution_order",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"child_execution_order",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"attachments",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),uK(e)){Object.assign(this,{...e});return}let r=t.getDefaultConfig(),{metadata:n,...o}=e,i=o.client??t.getSharedClient(),a={...n,...o?.extra?.metadata};if(o.extra={...o.extra,metadata:a},Object.assign(this,{...r,...o,client:i}),this.trace_id||(this.parent_run?this.trace_id=this.parent_run.trace_id??this.id:this.trace_id=this.id),this.execution_order??(this.execution_order=1),this.child_execution_order??(this.child_execution_order=1),!this.dotted_order){let s=lQt(this.start_time,this.id,this.execution_order);this.parent_run?this.dotted_order=this.parent_run.dotted_order+"."+s:this.dotted_order=s}}static getDefaultConfig(){return{id:Qa(),run_type:"chain",project_name:ep("PROJECT")??Sb("LANGCHAIN_SESSION")??"default",child_runs:[],api_url:Sb("LANGCHAIN_ENDPOINT")??"http://localhost:1984",api_key:Sb("LANGCHAIN_API_KEY"),caller_options:{},start_time:Date.now(),serialized:{},inputs:{},extra:{}}}static getSharedClient(){return t.sharedClient||(t.sharedClient=new $M),t.sharedClient}createChild(e){let r=this.child_execution_order+1,n=new t({...e,parent_run:this,project_name:this.project_name,client:this.client,tracingEnabled:this.tracingEnabled,execution_order:r,child_execution_order:r});aK in this&&(n[aK]=this[aK]);let o=Symbol.for("lc:child_config"),i=e.extra?.[o]??this.extra[o];if(dQt(i)){let u={...i},l=cQt(u.callbacks)?u.callbacks.copy?.():void 0;l&&(Object.assign(l,{_parentRunId:n.id}),l.handlers?.find(cUe)?.updateFromRunTree?.(n),u.callbacks=l),n.extra[o]=u}let a=new Set,s=this;for(;s!=null&&!a.has(s.id);)a.add(s.id),s.child_execution_order=Math.max(s.child_execution_order,r),s=s.parent_run;return this.child_runs.push(n),n}async end(e,r,n=Date.now(),o){this.outputs=this.outputs??e,this.error=this.error??r,this.end_time=this.end_time??n,o&&Object.keys(o).length>0&&(this.extra=this.extra?{...this.extra,metadata:{...this.extra.metadata,...o}}:{metadata:o})}_convertToCreate(e,r,n=!0){let o=e.extra??{};if(o.runtime||(o.runtime={}),r)for(let[u,l]of Object.entries(r))o.runtime[u]||(o.runtime[u]=l);let i,a;return n?(a=e.parent_run?.id,i=[]):(i=e.child_runs.map(u=>this._convertToCreate(u,r,n)),a=void 0),{id:e.id,name:e.name,start_time:e.start_time,end_time:e.end_time,run_type:e.run_type,reference_example_id:e.reference_example_id,extra:o,serialized:e.serialized,error:e.error,inputs:e.inputs,outputs:e.outputs,session_name:e.project_name,child_runs:i,parent_run_id:a,trace_id:e.trace_id,dotted_order:e.dotted_order,tags:e.tags,attachments:e.attachments}}async postRun(e=!0){try{let r=oK(),n=await this._convertToCreate(this,r,!0);if(await this.client.createRun(n),!e){z9("Posting with excludeChildRuns=false is deprecated and will be removed in a future version.");for(let o of this.child_runs)await o.postRun(!1)}}catch(r){console.error(`Error in postRun for run ${this.id}:`,r)}}async patchRun(){try{let e={end_time:this.end_time,error:this.error,inputs:this.inputs,outputs:this.outputs,parent_run_id:this.parent_run?.id,reference_example_id:this.reference_example_id,extra:this.extra,events:this.events,dotted_order:this.dotted_order,trace_id:this.trace_id,tags:this.tags,attachments:this.attachments,session_name:this.project_name};await this.client.updateRun(this.id,e)}catch(e){console.error(`Error in patchRun for run ${this.id}`,e)}}toJSON(){return this._convertToCreate(this,void 0,!1)}addEvent(e){this.events||(this.events=[]),typeof e=="string"?this.events.push({name:"event",time:new Date().toISOString(),message:e}):this.events.push({...e,time:e.time??new Date().toISOString()})}static fromRunnableConfig(e,r){let n=e?.callbacks,o,i,a,s=aUe();if(n){let l=n?.getParentRunId?.()??"",c=n?.handlers?.find(d=>d?.name=="langchain_tracer");o=c?.getRun?.(l),i=c?.projectName,a=c?.client,s=s||!!c}return o?new t({name:o.name,id:o.id,trace_id:o.trace_id,dotted_order:o.dotted_order,client:a,tracingEnabled:s,project_name:i,tags:[...new Set((o?.tags??[]).concat(e?.tags??[]))],extra:{metadata:{...o?.extra?.metadata,...e?.metadata}}}).createChild(r):new t({...r,client:a,tracingEnabled:s,project_name:i})}static fromDottedOrder(e){return this.fromHeaders({"langsmith-trace":e})}static fromHeaders(e,r){let n="get"in e&&typeof e.get=="function"?{"langsmith-trace":e.get("langsmith-trace"),baggage:e.get("baggage")}:e,o=n["langsmith-trace"];if(!o||typeof o!="string")return;let i=o.trim(),a=i.split(".").map(l=>{let[c,d]=l.split("Z");return{strTime:c,time:Date.parse(c+"Z"),uuid:d}}),s=a[0].uuid,u={...r,name:r?.name??"parent",run_type:r?.run_type??"chain",start_time:r?.start_time??Date.now(),id:a.at(-1)?.uuid,trace_id:s,dotted_order:i};if(n.baggage&&typeof n.baggage=="string"){let l=sK.fromHeader(n.baggage);u.metadata=l.metadata,u.tags=l.tags,u.project_name=l.project_name}return new t(u)}toHeaders(e){let r={"langsmith-trace":this.dotted_order,baggage:new sK(this.extra?.metadata,this.tags,this.project_name).toHeader()};if(e)for(let[n,o]of Object.entries(r))e.set(n,o);return r}};Object.defineProperty(rC,"sharedClient",{enumerable:!0,configurable:!0,writable:!0,value:null})});function lK(t){return typeof t=="function"&&"langsmith:traceable"in t}var Tfe,Efe,fQt,Afe,pQt,dUe,KTn,fUe=O(()=>{iK();Tfe=class{getStore(){}run(e,r){return r()}},Efe=Symbol.for("ls:tracing_async_local_storage"),fQt=new Tfe,Afe=class{getInstance(){return globalThis[Efe]??fQt}initializeGlobalInstance(e){globalThis[Efe]===void 0&&(globalThis[Efe]=e)}},pQt=new Afe,dUe=()=>{let t=pQt.getInstance().getStore();if(!uK(t))throw new Error(["Could not get the current run tree.","","Please make sure you are calling this method within a traceable function and that tracing is enabled."].join(`
`));return t},KTn=Symbol.for("langsmith:traceable:root")});var Ife=O(()=>{fUe()});function dK(t,e){return mQt.call(t,e)}function fK(t){if(Array.isArray(t)){let r=new Array(t.length);for(let n=0;n<r.length;n++)r[n]=""+n;return r}if(Object.keys)return Object.keys(t);let e=[];for(let r in t)dK(t,r)&&e.push(r);return e}function yd(t){switch(typeof t){case"object":return JSON.parse(JSON.stringify(t));case"undefined":return null;default:return t}}function pK(t){let e=0,r=t.length,n;for(;e<r;){if(n=t.charCodeAt(e),n>=48&&n<=57){e++;continue}return!1}return!0}function xb(t){return t.indexOf("/")===-1&&t.indexOf("~")===-1?t:t.replace(/~/g,"~0").replace(/\//g,"~1")}function Fz(t){return t.replace(/~1/g,"/").replace(/~0/g,"~")}function cK(t){if(t===void 0)return!0;if(t){if(Array.isArray(t)){for(let r=0,n=t.length;r<n;r++)if(cK(t[r]))return!0}else if(typeof t=="object"){let r=fK(t),n=r.length;for(var e=0;e<n;e++)if(cK(t[r[e]]))return!0}}return!1}function pUe(t,e){let r=[t];for(let n in e){let o=typeof e[n]=="object"?JSON.stringify(e[n],null,2):e[n];typeof o<"u"&&r.push(`${n}: ${o}`)}return r.join(`
`)}var mQt,BM,kz=O(()=>{mQt=Object.prototype.hasOwnProperty;BM=class extends Error{constructor(e,r,n,o,i){super(pUe(e,{name:r,index:n,operation:o,tree:i})),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"index",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"operation",{enumerable:!0,configurable:!0,writable:!0,value:o}),Object.defineProperty(this,"tree",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.setPrototypeOf(this,new.target.prototype),this.message=pUe(e,{name:r,index:n,operation:o,tree:i})}}});var Mfe={};Zf(Mfe,{JsonPatchError:()=>es,_areEquals:()=>$z,applyOperation:()=>qM,applyPatch:()=>iE,applyReducer:()=>yQt,deepClone:()=>hQt,getValueByPointer:()=>mK,validate:()=>mUe,validator:()=>hK});function mK(t,e){if(e=="")return t;var r={op:"_get",path:e};return qM(t,r),r.value}function qM(t,e,r=!1,n=!0,o=!0,i=0){if(r&&(typeof r=="function"?r(e,0,t,e.path):hK(e,0)),e.path===""){let a={newDocument:t};if(e.op==="add")return a.newDocument=e.value,a;if(e.op==="replace")return a.newDocument=e.value,a.removed=t,a;if(e.op==="move"||e.op==="copy")return a.newDocument=mK(t,e.from),e.op==="move"&&(a.removed=t),a;if(e.op==="test"){if(a.test=$z(t,e.value),a.test===!1)throw new es("Test operation failed","TEST_OPERATION_FAILED",i,e,t);return a.newDocument=t,a}else{if(e.op==="remove")return a.removed=t,a.newDocument=null,a;if(e.op==="_get")return e.value=t,a;if(r)throw new es("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",i,e,t);return a}}else{n||(t=yd(t));let s=(e.path||"").split("/"),u=t,l=1,c=s.length,d,f,p;for(typeof r=="function"?p=r:p=hK;;){if(f=s[l],f&&f.indexOf("~")!=-1&&(f=Fz(f)),o&&(f=="__proto__"||f=="prototype"&&l>0&&s[l-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(r&&d===void 0&&(u[f]===void 0?d=s.slice(0,l).join("/"):l==c-1&&(d=e.path),d!==void 0&&p(e,0,t,d)),l++,Array.isArray(u)){if(f==="-")f=u.length;else{if(r&&!pK(f))throw new es("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",i,e,t);pK(f)&&(f=~~f)}if(l>=c){if(r&&e.op==="add"&&f>u.length)throw new es("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",i,e,t);let m=gQt[e.op].call(e,u,f,t);if(m.test===!1)throw new es("Test operation failed","TEST_OPERATION_FAILED",i,e,t);return m}}else if(l>=c){let m=uL[e.op].call(e,u,f,t);if(m.test===!1)throw new es("Test operation failed","TEST_OPERATION_FAILED",i,e,t);return m}if(u=u[f],r&&l<c&&(!u||typeof u!="object"))throw new es("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",i,e,t)}}}function iE(t,e,r,n=!0,o=!0){if(r&&!Array.isArray(e))throw new es("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");n||(t=yd(t));let i=new Array(e.length);for(let a=0,s=e.length;a<s;a++)i[a]=qM(t,e[a],r,!0,o,a),t=i[a].newDocument;return i.newDocument=t,i}function yQt(t,e,r){let n=qM(t,e);if(n.test===!1)throw new es("Test operation failed","TEST_OPERATION_FAILED",r,e,t);return n.newDocument}function hK(t,e,r,n){if(typeof t!="object"||t===null||Array.isArray(t))throw new es("Operation is not an object","OPERATION_NOT_AN_OBJECT",e,t,r);if(uL[t.op]){if(typeof t.path!="string")throw new es("Operation `path` property is not a string","OPERATION_PATH_INVALID",e,t,r);if(t.path.indexOf("/")!==0&&t.path.length>0)throw new es('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",e,t,r);if((t.op==="move"||t.op==="copy")&&typeof t.from!="string")throw new es("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",e,t,r);if((t.op==="add"||t.op==="replace"||t.op==="test")&&t.value===void 0)throw new es("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",e,t,r);if((t.op==="add"||t.op==="replace"||t.op==="test")&&cK(t.value))throw new es("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",e,t,r);if(r){if(t.op=="add"){var o=t.path.split("/").length,i=n.split("/").length;if(o!==i+1&&o!==i)throw new es("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",e,t,r)}else if(t.op==="replace"||t.op==="remove"||t.op==="_get"){if(t.path!==n)throw new es("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",e,t,r)}else if(t.op==="move"||t.op==="copy"){var a={op:"_get",path:t.from,value:void 0},s=mUe([a],r);if(s&&s.name==="OPERATION_PATH_UNRESOLVABLE")throw new es("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",e,t,r)}}}else throw new es("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",e,t,r)}function mUe(t,e,r){try{if(!Array.isArray(t))throw new es("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(e)iE(yd(e),yd(t),r||!0);else{r=r||hK;for(var n=0;n<t.length;n++)r(t[n],n,e,void 0)}}catch(o){if(o instanceof es)return o;throw o}}function $z(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){var r=Array.isArray(t),n=Array.isArray(e),o,i,a;if(r&&n){if(i=t.length,i!=e.length)return!1;for(o=i;o--!==0;)if(!$z(t[o],e[o]))return!1;return!0}if(r!=n)return!1;var s=Object.keys(t);if(i=s.length,i!==Object.keys(e).length)return!1;for(o=i;o--!==0;)if(!e.hasOwnProperty(s[o]))return!1;for(o=i;o--!==0;)if(a=s[o],!$z(t[a],e[a]))return!1;return!0}return t!==t&&e!==e}var es,hQt,uL,gQt,gK=O(()=>{kz();es=BM,hQt=yd,uL={add:function(t,e,r){return t[e]=this.value,{newDocument:r}},remove:function(t,e,r){var n=t[e];return delete t[e],{newDocument:r,removed:n}},replace:function(t,e,r){var n=t[e];return t[e]=this.value,{newDocument:r,removed:n}},move:function(t,e,r){let n=mK(r,this.path);n&&(n=yd(n));let o=qM(r,{op:"remove",path:this.from}).removed;return qM(r,{op:"add",path:this.path,value:o}),{newDocument:r,removed:n}},copy:function(t,e,r){let n=mK(r,this.from);return qM(r,{op:"add",path:this.path,value:yd(n)}),{newDocument:r}},test:function(t,e,r){return{newDocument:r,test:$z(t[e],this.value)}},_get:function(t,e,r){return this.value=t[e],{newDocument:r}}},gQt={add:function(t,e,r){return pK(e)?t.splice(e,0,this.value):t[e]=this.value,{newDocument:r,index:e}},remove:function(t,e,r){var n=t.splice(e,1);return{newDocument:r,removed:n[0]}},replace:function(t,e,r){var n=t[e];return t[e]=this.value,{newDocument:r,removed:n}},move:uL.move,copy:uL.copy,test:uL.test,_get:uL._get}});function hUe(t,e,r,n,o){if(e!==t){typeof e.toJSON=="function"&&(e=e.toJSON());for(var i=fK(e),a=fK(t),s=!1,u=!1,l=a.length-1;l>=0;l--){var c=a[l],d=t[c];if(dK(e,c)&&!(e[c]===void 0&&d!==void 0&&Array.isArray(e)===!1)){var f=e[c];typeof d=="object"&&d!=null&&typeof f=="object"&&f!=null&&Array.isArray(d)===Array.isArray(f)?hUe(d,f,r,n+"/"+xb(c),o):d!==f&&(s=!0,o&&r.push({op:"test",path:n+"/"+xb(c),value:yd(d)}),r.push({op:"replace",path:n+"/"+xb(c),value:yd(f)}))}else Array.isArray(t)===Array.isArray(e)?(o&&r.push({op:"test",path:n+"/"+xb(c),value:yd(d)}),r.push({op:"remove",path:n+"/"+xb(c)}),u=!0):(o&&r.push({op:"test",path:n,value:t}),r.push({op:"replace",path:n,value:e}),s=!0)}if(!(!u&&i.length==a.length))for(var l=0;l<i.length;l++){var c=i[l];!dK(t,c)&&e[c]!==void 0&&r.push({op:"add",path:n+"/"+xb(c),value:yd(e[c])})}}}function yK(t,e,r=!1){var n=[];return hUe(t,e,n,"",r),n}var gUe=O(()=>{kz();gK();});var nAn,Rfe=O(()=>{gK();gUe();kz();gK();kz();nAn={...Mfe,JsonPatchError:BM,deepClone:yd,escapePathComponent:xb,unescapePathComponent:Fz}});var bUe=v((uAn,yUe)=>{"use strict";yUe.exports=function(t,e){if(typeof t!="string")throw new TypeError("Expected a string");return e=typeof e>"u"?"_":e,t.replace(/([a-z\d])([A-Z])/g,"$1"+e+"$2").replace(/([A-Z]+)([A-Z][a-z\d]+)/g,"$1"+e+"$2").toLowerCase()}});var OUe=v((lAn,jfe)=>{"use strict";var bQt=/[\p{Lu}]/u,_Qt=/[\p{Ll}]/u,_Ue=/^[\p{Lu}](?![\p{Lu}])/gu,SUe=/([\p{Alpha}\p{N}_]|$)/u,xUe=/[_.\- ]+/,vQt=new RegExp("^"+xUe.source),vUe=new RegExp(xUe.source+SUe.source,"gu"),wUe=new RegExp("\\d+"+SUe.source,"gu"),wQt=(t,e,r)=>{let n=!1,o=!1,i=!1;for(let a=0;a<t.length;a++){let s=t[a];n&&bQt.test(s)?(t=t.slice(0,a)+"-"+t.slice(a),n=!1,i=o,o=!0,a++):o&&i&&_Qt.test(s)?(t=t.slice(0,a-1)+"-"+t.slice(a-1),i=o,o=!1,n=!0):(n=e(s)===s&&r(s)!==s,i=o,o=r(s)===s&&e(s)!==s)}return t},SQt=(t,e)=>(_Ue.lastIndex=0,t.replace(_Ue,r=>e(r))),xQt=(t,e)=>(vUe.lastIndex=0,wUe.lastIndex=0,t.replace(vUe,(r,n)=>e(n)).replace(wUe,r=>e(r))),CUe=(t,e)=>{if(!(typeof t=="string"||Array.isArray(t)))throw new TypeError("Expected the input to be `string | string[]`");if(e={pascalCase:!1,preserveConsecutiveUppercase:!1,...e},Array.isArray(t)?t=t.map(i=>i.trim()).filter(i=>i.length).join("-"):t=t.trim(),t.length===0)return"";let r=e.locale===!1?i=>i.toLowerCase():i=>i.toLocaleLowerCase(e.locale),n=e.locale===!1?i=>i.toUpperCase():i=>i.toLocaleUpperCase(e.locale);return t.length===1?e.pascalCase?n(t):r(t):(t!==r(t)&&(t=wQt(t,r,n)),t=t.replace(vQt,""),e.preserveConsecutiveUppercase?t=SQt(t,r):t=r(t),e.pascalCase&&(t=n(t.charAt(0))+t.slice(1)),xQt(t,n))};jfe.exports=CUe;jfe.exports.default=CUe});function EUe(t,e){return e?.[t]||(0,PUe.default)(t)}function TUe(t,e,r){let n={};for(let o in t)Object.hasOwn(t,o)&&(n[e(o,r)]=t[o]);return n}var PUe,CQt,AUe=O(()=>{PUe=F(bUe(),1),CQt=F(OUe(),1)});function IUe(t){return Array.isArray(t)?[...t]:{...t}}function OQt(t,e){let r=IUe(t);for(let[n,o]of Object.entries(e)){let[i,...a]=n.split(".").reverse(),s=r;for(let u of a.reverse()){if(s[u]===void 0)break;s[u]=IUe(s[u]),s=s[u]}s[i]!==void 0&&(s[i]={lc:1,type:"secret",id:[o]})}return r}function Nfe(t){let e=Object.getPrototypeOf(t);return typeof t.lc_name=="function"&&(typeof e.lc_name!="function"||t.lc_name()!==e.lc_name())?t.lc_name():t.name}var np,UM=O(()=>{AUe();np=class t{static lc_name(){return this.name}get lc_id(){return[...this.lc_namespace,Nfe(this.constructor)]}get lc_secrets(){}get lc_attributes(){}get lc_aliases(){}get lc_serializable_keys(){}constructor(e,...r){Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lc_kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.lc_serializable_keys!==void 0?this.lc_kwargs=Object.fromEntries(Object.entries(e||{}).filter(([n])=>this.lc_serializable_keys?.includes(n))):this.lc_kwargs=e??{}}toJSON(){if(!this.lc_serializable)return this.toJSONNotImplemented();if(this.lc_kwargs instanceof t||typeof this.lc_kwargs!="object"||Array.isArray(this.lc_kwargs))return this.toJSONNotImplemented();let e={},r={},n=Object.keys(this.lc_kwargs).reduce((o,i)=>(o[i]=i in this?this[i]:this.lc_kwargs[i],o),{});for(let o=Object.getPrototypeOf(this);o;o=Object.getPrototypeOf(o))Object.assign(e,Reflect.get(o,"lc_aliases",this)),Object.assign(r,Reflect.get(o,"lc_secrets",this)),Object.assign(n,Reflect.get(o,"lc_attributes",this));return Object.keys(r).forEach(o=>{let i=this,a=n,[s,...u]=o.split(".").reverse();for(let l of u.reverse()){if(!(l in i)||i[l]===void 0)return;(!(l in a)||a[l]===void 0)&&(typeof i[l]=="object"&&i[l]!=null?a[l]={}:Array.isArray(i[l])&&(a[l]=[])),i=i[l],a=a[l]}s in i&&i[s]!==void 0&&(a[s]=a[s]||i[s])}),{lc:1,type:"constructor",id:this.lc_id,kwargs:TUe(Object.keys(r).length?OQt(n,r):n,EUe,e)}}toJSONNotImplemented(){return{lc:1,type:"not_implemented",id:this.lc_id}}}});async function MUe(){return Dfe===void 0&&(Dfe={library:"langchain-js",runtime:bK()}),Dfe}function ot(t){try{return typeof process<"u"?process.env?.[t]:Lfe()?Deno?.env.get(t):void 0}catch{return}}var PQt,EQt,TQt,Lfe,AQt,bK,Dfe,zM=O(()=>{PQt=()=>typeof window<"u"&&typeof window.document<"u",EQt=()=>typeof globalThis=="object"&&globalThis.constructor&&globalThis.constructor.name==="DedicatedWorkerGlobalScope",TQt=()=>typeof window<"u"&&window.name==="nodejs"||typeof navigator<"u"&&(navigator.userAgent.includes("Node.js")||navigator.userAgent.includes("jsdom")),Lfe=()=>typeof Deno<"u",AQt=()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"&&!Lfe(),bK=()=>{let t;return PQt()?t="browser":AQt()?t="node":EQt()?t="webworker":TQt()?t="jsdom":Lfe()?t="deno":t="other",t}});function kfe(t){return"lc_prefer_streaming"in t&&t.lc_prefer_streaming}var Ffe,HM,RUe,Bz=O(()=>{oE();UM();zM();Ffe=class{};HM=class t extends Ffe{get lc_namespace(){return["langchain_core","callbacks",this.name]}get lc_secrets(){}get lc_attributes(){}get lc_aliases(){}get lc_serializable_keys(){}static lc_name(){return this.name}get lc_id(){return[...this.lc_namespace,Nfe(this.constructor)]}constructor(e){super(),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lc_kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"ignoreLLM",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreChain",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreAgent",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreRetriever",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreCustomEvent",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"raiseError",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"awaitHandlers",{enumerable:!0,configurable:!0,writable:!0,value:ot("LANGCHAIN_CALLBACKS_BACKGROUND")==="false"}),this.lc_kwargs=e||{},e&&(this.ignoreLLM=e.ignoreLLM??this.ignoreLLM,this.ignoreChain=e.ignoreChain??this.ignoreChain,this.ignoreAgent=e.ignoreAgent??this.ignoreAgent,this.ignoreRetriever=e.ignoreRetriever??this.ignoreRetriever,this.ignoreCustomEvent=e.ignoreCustomEvent??this.ignoreCustomEvent,this.raiseError=e.raiseError??this.raiseError,this.awaitHandlers=this.raiseError||(e._awaitHandler??this.awaitHandlers))}copy(){return new this.constructor(this)}toJSON(){return np.prototype.toJSON.call(this)}toJSONNotImplemented(){return np.prototype.toJSONNotImplemented.call(this)}static fromMethods(e){class r extends t{constructor(){super(),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:Qa()}),Object.assign(this,e)}}return new r}},RUe=t=>{let e=t;return e!==void 0&&typeof e.copy=="function"&&typeof e.name=="string"&&typeof e.awaitHandlers=="boolean"}});function $fe(t,e){return t&&!Array.isArray(t)&&typeof t=="object"?t:{[e]:t}}function IQt(t){return t.replace(/[-:.]/g,"")}function MQt(t,e,r){let n=r.toFixed(0).slice(0,3).padStart(3,"0");return IQt(`${new Date(t).toISOString().slice(0,-1)}${n}Z`)+e}function lL(t){return typeof t._addRunToRunMap=="function"}var uh,VM=O(()=>{Bz();uh=class extends HM{constructor(e){super(...arguments),Object.defineProperty(this,"runMap",{enumerable:!0,configurable:!0,writable:!0,value:new Map})}copy(){return this}stringifyError(e){return e instanceof Error?e.message+(e?.stack?`

${e.stack}`:""):typeof e=="string"?e:`${e}`}_addChildRun(e,r){e.child_runs.push(r)}_addRunToRunMap(e){let r=MQt(e.start_time,e.id,e.execution_order),n={...e};if(n.parent_run_id!==void 0){let o=this.runMap.get(n.parent_run_id);o&&(this._addChildRun(o,n),o.child_execution_order=Math.max(o.child_execution_order,n.child_execution_order),n.trace_id=o.trace_id,o.dotted_order!==void 0&&(n.dotted_order=[o.dotted_order,r].join(".")))}else n.trace_id=n.id,n.dotted_order=r;return this.runMap.set(n.id,n),n}async _endTrace(e){let r=e.parent_run_id!==void 0&&this.runMap.get(e.parent_run_id);r?r.child_execution_order=Math.max(r.child_execution_order,e.child_execution_order):await this.persistRun(e),this.runMap.delete(e.id),await this.onRunUpdate?.(e)}_getExecutionOrder(e){let r=e!==void 0&&this.runMap.get(e);return r?r.child_execution_order+1:1}_createRunForLLMStart(e,r,n,o,i,a,s,u){let l=this._getExecutionOrder(o),c=Date.now(),d=s?{...i,metadata:s}:i,f={id:n,name:u??e.id[e.id.length-1],parent_run_id:o,start_time:c,serialized:e,events:[{name:"start",time:new Date(c).toISOString()}],inputs:{prompts:r},execution_order:l,child_runs:[],child_execution_order:l,run_type:"llm",extra:d??{},tags:a||[]};return this._addRunToRunMap(f)}async handleLLMStart(e,r,n,o,i,a,s,u){let l=this.runMap.get(n)??this._createRunForLLMStart(e,r,n,o,i,a,s,u);return await this.onRunCreate?.(l),await this.onLLMStart?.(l),l}_createRunForChatModelStart(e,r,n,o,i,a,s,u){let l=this._getExecutionOrder(o),c=Date.now(),d=s?{...i,metadata:s}:i,f={id:n,name:u??e.id[e.id.length-1],parent_run_id:o,start_time:c,serialized:e,events:[{name:"start",time:new Date(c).toISOString()}],inputs:{messages:r},execution_order:l,child_runs:[],child_execution_order:l,run_type:"llm",extra:d??{},tags:a||[]};return this._addRunToRunMap(f)}async handleChatModelStart(e,r,n,o,i,a,s,u){let l=this.runMap.get(n)??this._createRunForChatModelStart(e,r,n,o,i,a,s,u);return await this.onRunCreate?.(l),await this.onLLMStart?.(l),l}async handleLLMEnd(e,r,n,o,i){let a=this.runMap.get(r);if(!a||a?.run_type!=="llm")throw new Error("No LLM run to end.");return a.end_time=Date.now(),a.outputs=e,a.events.push({name:"end",time:new Date(a.end_time).toISOString()}),a.extra={...a.extra,...i},await this.onLLMEnd?.(a),await this._endTrace(a),a}async handleLLMError(e,r,n,o,i){let a=this.runMap.get(r);if(!a||a?.run_type!=="llm")throw new Error("No LLM run to end.");return a.end_time=Date.now(),a.error=this.stringifyError(e),a.events.push({name:"error",time:new Date(a.end_time).toISOString()}),a.extra={...a.extra,...i},await this.onLLMError?.(a),await this._endTrace(a),a}_createRunForChainStart(e,r,n,o,i,a,s,u){let l=this._getExecutionOrder(o),c=Date.now(),d={id:n,name:u??e.id[e.id.length-1],parent_run_id:o,start_time:c,serialized:e,events:[{name:"start",time:new Date(c).toISOString()}],inputs:r,execution_order:l,child_execution_order:l,run_type:s??"chain",child_runs:[],extra:a?{metadata:a}:{},tags:i||[]};return this._addRunToRunMap(d)}async handleChainStart(e,r,n,o,i,a,s,u){let l=this.runMap.get(n)??this._createRunForChainStart(e,r,n,o,i,a,s,u);return await this.onRunCreate?.(l),await this.onChainStart?.(l),l}async handleChainEnd(e,r,n,o,i){let a=this.runMap.get(r);if(!a)throw new Error("No chain run to end.");return a.end_time=Date.now(),a.outputs=$fe(e,"output"),a.events.push({name:"end",time:new Date(a.end_time).toISOString()}),i?.inputs!==void 0&&(a.inputs=$fe(i.inputs,"input")),await this.onChainEnd?.(a),await this._endTrace(a),a}async handleChainError(e,r,n,o,i){let a=this.runMap.get(r);if(!a)throw new Error("No chain run to end.");return a.end_time=Date.now(),a.error=this.stringifyError(e),a.events.push({name:"error",time:new Date(a.end_time).toISOString()}),i?.inputs!==void 0&&(a.inputs=$fe(i.inputs,"input")),await this.onChainError?.(a),await this._endTrace(a),a}_createRunForToolStart(e,r,n,o,i,a,s){let u=this._getExecutionOrder(o),l=Date.now(),c={id:n,name:s??e.id[e.id.length-1],parent_run_id:o,start_time:l,serialized:e,events:[{name:"start",time:new Date(l).toISOString()}],inputs:{input:r},execution_order:u,child_execution_order:u,run_type:"tool",child_runs:[],extra:a?{metadata:a}:{},tags:i||[]};return this._addRunToRunMap(c)}async handleToolStart(e,r,n,o,i,a,s){let u=this.runMap.get(n)??this._createRunForToolStart(e,r,n,o,i,a,s);return await this.onRunCreate?.(u),await this.onToolStart?.(u),u}async handleToolEnd(e,r){let n=this.runMap.get(r);if(!n||n?.run_type!=="tool")throw new Error("No tool run to end");return n.end_time=Date.now(),n.outputs={output:e},n.events.push({name:"end",time:new Date(n.end_time).toISOString()}),await this.onToolEnd?.(n),await this._endTrace(n),n}async handleToolError(e,r){let n=this.runMap.get(r);if(!n||n?.run_type!=="tool")throw new Error("No tool run to end");return n.end_time=Date.now(),n.error=this.stringifyError(e),n.events.push({name:"error",time:new Date(n.end_time).toISOString()}),await this.onToolError?.(n),await this._endTrace(n),n}async handleAgentAction(e,r){let n=this.runMap.get(r);if(!n||n?.run_type!=="chain")return;let o=n;o.actions=o.actions||[],o.actions.push(e),o.events.push({name:"agent_action",time:new Date().toISOString(),kwargs:{action:e}}),await this.onAgentAction?.(n)}async handleAgentEnd(e,r){let n=this.runMap.get(r);!n||n?.run_type!=="chain"||(n.events.push({name:"agent_end",time:new Date().toISOString(),kwargs:{action:e}}),await this.onAgentEnd?.(n))}_createRunForRetrieverStart(e,r,n,o,i,a,s){let u=this._getExecutionOrder(o),l=Date.now(),c={id:n,name:s??e.id[e.id.length-1],parent_run_id:o,start_time:l,serialized:e,events:[{name:"start",time:new Date(l).toISOString()}],inputs:{query:r},execution_order:u,child_execution_order:u,run_type:"retriever",child_runs:[],extra:a?{metadata:a}:{},tags:i||[]};return this._addRunToRunMap(c)}async handleRetrieverStart(e,r,n,o,i,a,s){let u=this.runMap.get(n)??this._createRunForRetrieverStart(e,r,n,o,i,a,s);return await this.onRunCreate?.(u),await this.onRetrieverStart?.(u),u}async handleRetrieverEnd(e,r){let n=this.runMap.get(r);if(!n||n?.run_type!=="retriever")throw new Error("No retriever run to end");return n.end_time=Date.now(),n.outputs={documents:e},n.events.push({name:"end",time:new Date(n.end_time).toISOString()}),await this.onRetrieverEnd?.(n),await this._endTrace(n),n}async handleRetrieverError(e,r){let n=this.runMap.get(r);if(!n||n?.run_type!=="retriever")throw new Error("No retriever run to end");return n.end_time=Date.now(),n.error=this.stringifyError(e),n.events.push({name:"error",time:new Date(n.end_time).toISOString()}),await this.onRetrieverError?.(n),await this._endTrace(n),n}async handleText(e,r){let n=this.runMap.get(r);!n||n?.run_type!=="chain"||(n.events.push({name:"text",time:new Date().toISOString(),kwargs:{text:e}}),await this.onText?.(n))}async handleLLMNewToken(e,r,n,o,i,a){let s=this.runMap.get(n);if(!s||s?.run_type!=="llm")throw new Error('Invalid "runId" provided to "handleLLMNewToken" callback.');return s.events.push({name:"new_token",time:new Date().toISOString(),kwargs:{token:e,idx:r,chunk:a?.chunk}}),await this.onLLMNewToken?.(s,e,{chunk:a?.chunk}),s}}});var LUe=v((_An,DUe)=>{"use strict";var jUe=(t=0)=>e=>`\x1B[${38+t};5;${e}m`,NUe=(t=0)=>(e,r,n)=>`\x1B[${38+t};2;${e};${r};${n}m`;function RQt(){let t=new Map,e={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],overline:[53,55],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}};e.color.gray=e.color.blackBright,e.bgColor.bgGray=e.bgColor.bgBlackBright,e.color.grey=e.color.blackBright,e.bgColor.bgGrey=e.bgColor.bgBlackBright;for(let[r,n]of Object.entries(e)){for(let[o,i]of Object.entries(n))e[o]={open:`\x1B[${i[0]}m`,close:`\x1B[${i[1]}m`},n[o]=e[o],t.set(i[0],i[1]);Object.defineProperty(e,r,{value:n,enumerable:!1})}return Object.defineProperty(e,"codes",{value:t,enumerable:!1}),e.color.close="\x1B[39m",e.bgColor.close="\x1B[49m",e.color.ansi256=jUe(),e.color.ansi16m=NUe(),e.bgColor.ansi256=jUe(10),e.bgColor.ansi16m=NUe(10),Object.defineProperties(e,{rgbToAnsi256:{value:(r,n,o)=>r===n&&n===o?r<8?16:r>248?231:Math.round((r-8)/247*24)+232:16+36*Math.round(r/255*5)+6*Math.round(n/255*5)+Math.round(o/255*5),enumerable:!1},hexToRgb:{value:r=>{let n=/(?<colorString>[a-f\d]{6}|[a-f\d]{3})/i.exec(r.toString(16));if(!n)return[0,0,0];let{colorString:o}=n.groups;o.length===3&&(o=o.split("").map(a=>a+a).join(""));let i=Number.parseInt(o,16);return[i>>16&255,i>>8&255,i&255]},enumerable:!1},hexToAnsi256:{value:r=>e.rgbToAnsi256(...e.hexToRgb(r)),enumerable:!1}}),e}Object.defineProperty(DUe,"exports",{enumerable:!0,get:RQt})});function mf(t,e){return`${t.open}${e}${t.close}`}function lh(t,e){try{return JSON.stringify(t,null,2)}catch{return e}}function FUe(t){return typeof t=="string"?t.trim():t==null?t:lh(t,t.toString())}function aE(t){if(!t.end_time)return"";let e=t.end_time-t.start_time;return e<1e3?`${e}ms`:`${(e/1e3).toFixed(2)}s`}var Bfe,op,qz,kUe=O(()=>{Bfe=F(LUe(),1);VM();({color:op}=Bfe.default),qz=class extends uh{constructor(){super(...arguments),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"console_callback_handler"})}persistRun(e){return Promise.resolve()}getParents(e){let r=[],n=e;for(;n.parent_run_id;){let o=this.runMap.get(n.parent_run_id);if(o)r.push(o),n=o;else break}return r}getBreadcrumbs(e){let n=[...this.getParents(e).reverse(),e].map((o,i,a)=>{let s=`${o.execution_order}:${o.run_type}:${o.name}`;return i===a.length-1?mf(Bfe.default.bold,s):s}).join(" > ");return mf(op.grey,n)}onChainStart(e){let r=this.getBreadcrumbs(e);console.log(`${mf(op.green,"[chain/start]")} [${r}] Entering Chain run with input: ${lh(e.inputs,"[inputs]")}`)}onChainEnd(e){let r=this.getBreadcrumbs(e);console.log(`${mf(op.cyan,"[chain/end]")} [${r}] [${aE(e)}] Exiting Chain run with output: ${lh(e.outputs,"[outputs]")}`)}onChainError(e){let r=this.getBreadcrumbs(e);console.log(`${mf(op.red,"[chain/error]")} [${r}] [${aE(e)}] Chain run errored with error: ${lh(e.error,"[error]")}`)}onLLMStart(e){let r=this.getBreadcrumbs(e),n="prompts"in e.inputs?{prompts:e.inputs.prompts.map(o=>o.trim())}:e.inputs;console.log(`${mf(op.green,"[llm/start]")} [${r}] Entering LLM run with input: ${lh(n,"[inputs]")}`)}onLLMEnd(e){let r=this.getBreadcrumbs(e);console.log(`${mf(op.cyan,"[llm/end]")} [${r}] [${aE(e)}] Exiting LLM run with output: ${lh(e.outputs,"[response]")}`)}onLLMError(e){let r=this.getBreadcrumbs(e);console.log(`${mf(op.red,"[llm/error]")} [${r}] [${aE(e)}] LLM run errored with error: ${lh(e.error,"[error]")}`)}onToolStart(e){let r=this.getBreadcrumbs(e);console.log(`${mf(op.green,"[tool/start]")} [${r}] Entering Tool run with input: "${FUe(e.inputs.input)}"`)}onToolEnd(e){let r=this.getBreadcrumbs(e);console.log(`${mf(op.cyan,"[tool/end]")} [${r}] [${aE(e)}] Exiting Tool run with output: "${FUe(e.outputs?.output)}"`)}onToolError(e){let r=this.getBreadcrumbs(e);console.log(`${mf(op.red,"[tool/error]")} [${r}] [${aE(e)}] Tool run errored with error: ${lh(e.error,"[error]")}`)}onRetrieverStart(e){let r=this.getBreadcrumbs(e);console.log(`${mf(op.green,"[retriever/start]")} [${r}] Entering Retriever run with input: ${lh(e.inputs,"[inputs]")}`)}onRetrieverEnd(e){let r=this.getBreadcrumbs(e);console.log(`${mf(op.cyan,"[retriever/end]")} [${r}] [${aE(e)}] Exiting Retriever run with output: ${lh(e.outputs,"[outputs]")}`)}onRetrieverError(e){let r=this.getBreadcrumbs(e);console.log(`${mf(op.red,"[retriever/error]")} [${r}] [${aE(e)}] Retriever run errored with error: ${lh(e.error,"[error]")}`)}onAgentAction(e){let r=e,n=this.getBreadcrumbs(e);console.log(`${mf(op.blue,"[agent/action]")} [${n}] Agent selected action: ${lh(r.actions[r.actions.length-1],"[action]")}`)}}});function sE(t,e){return t.lc_error_code=e,t.message=`${t.message}

Troubleshooting URL: https://js.langchain.com/docs/troubleshooting/errors/${e}/
`,t}var Uz=O(()=>{});function uE(t){return!!(t&&typeof t=="object"&&"type"in t&&t.type==="tool_call")}function $Ue(t){return!!(t&&typeof t=="object"&&"toolCall"in t&&t.toolCall!=null&&typeof t.toolCall=="object"&&"id"in t.toolCall&&typeof t.toolCall.id=="string")}var WM,_K=O(()=>{WM=class extends Error{constructor(e,r){super(e),Object.defineProperty(this,"output",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.output=r}}});function qfe(t,e=cL){t=t.trim();let r=t.indexOf("```");if(r===-1)return e(t);let n=t.substring(r+3);n.startsWith(`json
`)?n=n.substring(5):n.startsWith("json")?n=n.substring(4):n.startsWith(`
`)&&(n=n.substring(1));let o=n.indexOf("```"),i=n;return o!==-1&&(i=n.substring(0,o)),e(i.trim())}function cL(t){if(typeof t>"u")return null;try{return JSON.parse(t)}catch{}let e="",r=[],n=!1,o=!1;for(let i of t){if(n)i==='"'&&!o?n=!1:i===`
`&&!o?i="\\n":i==="\\"?o=!o:o=!1;else if(i==='"')n=!0,o=!1;else if(i==="{")r.push("}");else if(i==="[")r.push("]");else if(i==="}"||i==="]")if(r&&r[r.length-1]===i)r.pop();else return null;e+=i}n&&(e+='"');for(let i=r.length-1;i>=0;i-=1)e+=r[i];try{return JSON.parse(e)}catch{return null}}var Ufe=O(()=>{});function lE(t){return typeof t=="object"&&t!==null&&"type"in t&&typeof t.type=="string"&&"source_type"in t&&(t.source_type==="url"||t.source_type==="base64"||t.source_type==="text"||t.source_type==="id")}function BUe(t){return lE(t)&&t.source_type==="url"&&"url"in t&&typeof t.url=="string"}function qUe(t){return lE(t)&&t.source_type==="base64"&&"data"in t&&typeof t.data=="string"}function UUe(t){if(lE(t)){if(t.source_type==="url")return{type:"image_url",image_url:{url:t.url}};if(t.source_type==="base64"){if(!t.mime_type)throw new Error("mime_type key is required for base64 data.");return{type:"image_url",image_url:{url:`data:${t.mime_type};base64,${t.data}`}}}}throw new Error("Unsupported source type. Only 'url' and 'base64' are supported.")}function zfe({dataUrl:t,asTypedArray:e=!1}){let r=t.match(/^data:(\w+\/\w+);base64,([A-Za-z0-9+/]+=*)$/),n;if(r){n=r[1].toLowerCase();let o=e?Uint8Array.from(atob(r[2]),i=>i.charCodeAt(0)):r[2];return{mime_type:n,data:o}}}function zUe(t,e){if(t.type==="text"){if(!e.fromStandardTextBlock)throw new Error(`Converter for ${e.providerName} does not implement \`fromStandardTextBlock\` method.`);return e.fromStandardTextBlock(t)}if(t.type==="image"){if(!e.fromStandardImageBlock)throw new Error(`Converter for ${e.providerName} does not implement \`fromStandardImageBlock\` method.`);return e.fromStandardImageBlock(t)}if(t.type==="audio"){if(!e.fromStandardAudioBlock)throw new Error(`Converter for ${e.providerName} does not implement \`fromStandardAudioBlock\` method.`);return e.fromStandardAudioBlock(t)}if(t.type==="file"){if(!e.fromStandardFileBlock)throw new Error(`Converter for ${e.providerName} does not implement \`fromStandardFileBlock\` method.`);return e.fromStandardFileBlock(t)}throw new Error(`Unable to convert content block type '${t.type}' to provider-specific format: not recognized.`)}var Hfe=O(()=>{});function ch(t,e){return typeof t=="string"?t===""?e:typeof e=="string"?t+e:Array.isArray(e)&&e.some(r=>lE(r))?[{type:"text",source_type:"text",text:t},...e]:[{type:"text",text:t},...e]:Array.isArray(e)?zz(t,e)??[...t,...e]:e===""?t:Array.isArray(t)&&t.some(r=>lE(r))?[...t,{type:"file",source_type:"text",text:e}]:[...t,{type:"text",text:e}]}function HUe(t,e){return t==="error"||e==="error"?"error":"success"}function jQt(t,e){function r(n,o){if(typeof n!="object"||n===null||n===void 0)return n;if(o>=e)return Array.isArray(n)?"[Array]":"[Object]";if(Array.isArray(n))return n.map(a=>r(a,o+1));let i={};for(let a of Object.keys(n))i[a]=r(n[a],o+1);return i}return JSON.stringify(r(t,0),null,2)}function hs(t,e){let r={...t};for(let[n,o]of Object.entries(e))if(r[n]==null)r[n]=o;else{if(o==null)continue;if(typeof r[n]!=typeof o||Array.isArray(r[n])!==Array.isArray(o))throw new Error(`field[${n}] already exists in the message chunk, but with a different type.`);if(typeof r[n]=="string"){if(n==="type")continue;r[n]+=o}else if(typeof r[n]=="object"&&!Array.isArray(r[n]))r[n]=hs(r[n],o);else if(Array.isArray(r[n]))r[n]=zz(r[n],o);else{if(r[n]===o)continue;console.warn(`field[${n}] already exists in this message chunk and value has unsupported type.`)}}return r}function zz(t,e){if(!(t===void 0&&e===void 0)){if(t===void 0||e===void 0)return t||e;{let r=[...t];for(let n of e)if(typeof n=="object"&&"index"in n&&typeof n.index=="number"){let o=r.findIndex(i=>i.index===n.index);o!==-1?r[o]=hs(r[o],n):r.push(n)}else{if(typeof n=="object"&&"text"in n&&n.text==="")continue;r.push(n)}return r}}}function VUe(t,e){if(!t&&!e)throw new Error("Cannot merge two undefined objects.");if(!t||!e)return t||e;if(typeof t!=typeof e)throw new Error(`Cannot merge objects of different types.
Left ${typeof t}
Right ${typeof e}`);if(typeof t=="string"&&typeof e=="string")return t+e;if(Array.isArray(t)&&Array.isArray(e))return zz(t,e);if(typeof t=="object"&&typeof e=="object")return hs(t,e);if(t===e)return t;throw new Error(`Can not merge objects of different types.
Left ${t}
Right ${e}`)}function WUe(t){return typeof t.role=="string"}function dh(t){return typeof t?._getType=="function"}function Vfe(t){return dh(t)&&typeof t.concat=="function"}var fl,ip,fh=O(()=>{UM();Hfe();fl=class extends np{get lc_aliases(){return{additional_kwargs:"additional_kwargs",response_metadata:"response_metadata"}}get text(){return typeof this.content=="string"?this.content:Array.isArray(this.content)?this.content.map(e=>typeof e=="string"?e:e.type==="text"?e.text:"").join(""):""}getType(){return this._getType()}constructor(e,r){typeof e=="string"&&(e={content:e,additional_kwargs:r,response_metadata:{}}),e.additional_kwargs||(e.additional_kwargs={}),e.response_metadata||(e.response_metadata={}),super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","messages"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"content",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"additional_kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"response_metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=e.name,this.content=e.content,this.additional_kwargs=e.additional_kwargs,this.response_metadata=e.response_metadata,this.id=e.id}toDict(){return{type:this._getType(),data:this.toJSON().kwargs}}static lc_name(){return"BaseMessage"}get _printableFields(){return{id:this.id,content:this.content,name:this.name,additional_kwargs:this.additional_kwargs,response_metadata:this.response_metadata}}_updateId(e){this.id=e,this.lc_kwargs.id=e}get[Symbol.toStringTag](){return this.constructor.lc_name()}[Symbol.for("nodejs.util.inspect.custom")](e){if(e===null)return this;let r=jQt(this._printableFields,Math.max(4,e));return`${this.constructor.lc_name()} ${r}`}};ip=class extends fl{}});function KUe(t){return t!=null&&typeof t=="object"&&"lc_direct_tool_output"in t&&t.lc_direct_tool_output===!0}function GUe(t){let e=[],r=[];for(let n of t)if(n.function){let o=n.function.name;try{let i=JSON.parse(n.function.arguments),a={name:o||"",args:i||{},id:n.id};e.push(a)}catch{r.push({name:o,args:n.function.arguments,id:n.id,error:"Malformed args."})}}else continue;return[e,r]}var oC,ph,dL=O(()=>{fh();oC=class extends fl{static lc_name(){return"ToolMessage"}get lc_aliases(){return{tool_call_id:"tool_call_id"}}constructor(e,r,n){typeof e=="string"&&(e={content:e,name:n,tool_call_id:r}),super(e),Object.defineProperty(this,"lc_direct_tool_output",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tool_call_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"artifact",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.tool_call_id=e.tool_call_id,this.artifact=e.artifact,this.status=e.status}_getType(){return"tool"}static isInstance(e){return e._getType()==="tool"}get _printableFields(){return{...super._printableFields,tool_call_id:this.tool_call_id,artifact:this.artifact}}},ph=class t extends ip{constructor(e){super(e),Object.defineProperty(this,"tool_call_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"artifact",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.tool_call_id=e.tool_call_id,this.artifact=e.artifact,this.status=e.status}static lc_name(){return"ToolMessageChunk"}_getType(){return"tool"}concat(e){return new t({content:ch(this.content,e.content),additional_kwargs:hs(this.additional_kwargs,e.additional_kwargs),response_metadata:hs(this.response_metadata,e.response_metadata),artifact:VUe(this.artifact,e.artifact),tool_call_id:this.tool_call_id,id:this.id??e.id,status:HUe(this.status,e.status)})}get _printableFields(){return{...super._printableFields,tool_call_id:this.tool_call_id,artifact:this.artifact}}}});function bi(t){return t._getType()==="ai"}function Wfe(t){return t._getType()==="ai"}var mn,cr,KM=O(()=>{Ufe();fh();dL();mn=class extends fl{get lc_aliases(){return{...super.lc_aliases,tool_calls:"tool_calls",invalid_tool_calls:"invalid_tool_calls"}}constructor(e,r){let n;if(typeof e=="string")n={content:e,tool_calls:[],invalid_tool_calls:[],additional_kwargs:r??{}};else{n=e;let o=n.additional_kwargs?.tool_calls,i=n.tool_calls;o!=null&&o.length>0&&(i===void 0||i.length===0)&&console.warn(["New LangChain packages are available that more efficiently handle",`tool calling.

Please upgrade your packages to versions that set`,"message tool calls. e.g., `yarn add @langchain/anthropic`,","yarn add @langchain/openai`, etc."].join(" "));try{if(o!=null&&i===void 0){let[a,s]=GUe(o);n.tool_calls=a??[],n.invalid_tool_calls=s??[]}else n.tool_calls=n.tool_calls??[],n.invalid_tool_calls=n.invalid_tool_calls??[]}catch{n.tool_calls=[],n.invalid_tool_calls=[]}}super(n),Object.defineProperty(this,"tool_calls",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"invalid_tool_calls",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"usage_metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),typeof n!="string"&&(this.tool_calls=n.tool_calls??this.tool_calls,this.invalid_tool_calls=n.invalid_tool_calls??this.invalid_tool_calls),this.usage_metadata=n.usage_metadata}static lc_name(){return"AIMessage"}_getType(){return"ai"}get _printableFields(){return{...super._printableFields,tool_calls:this.tool_calls,invalid_tool_calls:this.invalid_tool_calls,usage_metadata:this.usage_metadata}}};cr=class t extends ip{constructor(e){let r;if(typeof e=="string")r={content:e,tool_calls:[],invalid_tool_calls:[],tool_call_chunks:[]};else if(e.tool_call_chunks===void 0)r={...e,tool_calls:e.tool_calls??[],invalid_tool_calls:[],tool_call_chunks:[],usage_metadata:e.usage_metadata!==void 0?e.usage_metadata:void 0};else{let n=[],o=[];for(let i of e.tool_call_chunks){let a={};try{if(a=cL(i.args||"{}"),a===null||typeof a!="object"||Array.isArray(a))throw new Error("Malformed tool call chunk args.");n.push({name:i.name??"",args:a,id:i.id,type:"tool_call"})}catch{o.push({name:i.name,args:i.args,id:i.id,error:"Malformed args.",type:"invalid_tool_call"})}}r={...e,tool_calls:n,invalid_tool_calls:o,usage_metadata:e.usage_metadata!==void 0?e.usage_metadata:void 0}}super(r),Object.defineProperty(this,"tool_calls",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"invalid_tool_calls",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"tool_call_chunks",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"usage_metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.tool_call_chunks=r.tool_call_chunks??this.tool_call_chunks,this.tool_calls=r.tool_calls??this.tool_calls,this.invalid_tool_calls=r.invalid_tool_calls??this.invalid_tool_calls,this.usage_metadata=r.usage_metadata}get lc_aliases(){return{...super.lc_aliases,tool_calls:"tool_calls",invalid_tool_calls:"invalid_tool_calls",tool_call_chunks:"tool_call_chunks"}}static lc_name(){return"AIMessageChunk"}_getType(){return"ai"}get _printableFields(){return{...super._printableFields,tool_calls:this.tool_calls,tool_call_chunks:this.tool_call_chunks,invalid_tool_calls:this.invalid_tool_calls,usage_metadata:this.usage_metadata}}concat(e){let r={content:ch(this.content,e.content),additional_kwargs:hs(this.additional_kwargs,e.additional_kwargs),response_metadata:hs(this.response_metadata,e.response_metadata),tool_call_chunks:[],id:this.id??e.id};if(this.tool_call_chunks!==void 0||e.tool_call_chunks!==void 0){let n=zz(this.tool_call_chunks,e.tool_call_chunks);n!==void 0&&n.length>0&&(r.tool_call_chunks=n)}if(this.usage_metadata!==void 0||e.usage_metadata!==void 0){let n={...(this.usage_metadata?.input_token_details?.audio!==void 0||e.usage_metadata?.input_token_details?.audio!==void 0)&&{audio:(this.usage_metadata?.input_token_details?.audio??0)+(e.usage_metadata?.input_token_details?.audio??0)},...(this.usage_metadata?.input_token_details?.cache_read!==void 0||e.usage_metadata?.input_token_details?.cache_read!==void 0)&&{cache_read:(this.usage_metadata?.input_token_details?.cache_read??0)+(e.usage_metadata?.input_token_details?.cache_read??0)},...(this.usage_metadata?.input_token_details?.cache_creation!==void 0||e.usage_metadata?.input_token_details?.cache_creation!==void 0)&&{cache_creation:(this.usage_metadata?.input_token_details?.cache_creation??0)+(e.usage_metadata?.input_token_details?.cache_creation??0)}},o={...(this.usage_metadata?.output_token_details?.audio!==void 0||e.usage_metadata?.output_token_details?.audio!==void 0)&&{audio:(this.usage_metadata?.output_token_details?.audio??0)+(e.usage_metadata?.output_token_details?.audio??0)},...(this.usage_metadata?.output_token_details?.reasoning!==void 0||e.usage_metadata?.output_token_details?.reasoning!==void 0)&&{reasoning:(this.usage_metadata?.output_token_details?.reasoning??0)+(e.usage_metadata?.output_token_details?.reasoning??0)}},i=this.usage_metadata??{input_tokens:0,output_tokens:0,total_tokens:0},a=e.usage_metadata??{input_tokens:0,output_tokens:0,total_tokens:0},s={input_tokens:i.input_tokens+a.input_tokens,output_tokens:i.output_tokens+a.output_tokens,total_tokens:i.total_tokens+a.total_tokens,...Object.keys(n).length>0&&{input_token_details:n},...Object.keys(o).length>0&&{output_token_details:o}};r.usage_metadata=s}return new t(r)}}});var gs,hf,vK=O(()=>{fh();gs=class t extends fl{static lc_name(){return"ChatMessage"}static _chatMessageClass(){return t}constructor(e,r){typeof e=="string"&&(e={content:e,role:r}),super(e),Object.defineProperty(this,"role",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.role=e.role}_getType(){return"generic"}static isInstance(e){return e._getType()==="generic"}get _printableFields(){return{...super._printableFields,role:this.role}}},hf=class t extends ip{static lc_name(){return"ChatMessageChunk"}constructor(e,r){typeof e=="string"&&(e={content:e,role:r}),super(e),Object.defineProperty(this,"role",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.role=e.role}_getType(){return"generic"}concat(e){return new t({content:ch(this.content,e.content),additional_kwargs:hs(this.additional_kwargs,e.additional_kwargs),response_metadata:hs(this.response_metadata,e.response_metadata),role:this.role,id:this.id??e.id})}get _printableFields(){return{...super._printableFields,role:this.role}}}});var nm,wK=O(()=>{fh();nm=class t extends ip{static lc_name(){return"FunctionMessageChunk"}_getType(){return"function"}concat(e){return new t({content:ch(this.content,e.content),additional_kwargs:hs(this.additional_kwargs,e.additional_kwargs),response_metadata:hs(this.response_metadata,e.response_metadata),name:this.name??"",id:this.id??e.id})}}});var ys,gf,Hz=O(()=>{fh();ys=class extends fl{static lc_name(){return"HumanMessage"}_getType(){return"human"}constructor(e,r){super(e,r)}},gf=class t extends ip{static lc_name(){return"HumanMessageChunk"}_getType(){return"human"}constructor(e,r){super(e,r)}concat(e){return new t({content:ch(this.content,e.content),additional_kwargs:hs(this.additional_kwargs,e.additional_kwargs),response_metadata:hs(this.response_metadata,e.response_metadata),id:this.id??e.id})}}});var iC,bd,SK=O(()=>{fh();iC=class extends fl{static lc_name(){return"SystemMessage"}_getType(){return"system"}constructor(e,r){super(e,r)}},bd=class t extends ip{static lc_name(){return"SystemMessageChunk"}_getType(){return"system"}constructor(e,r){super(e,r)}concat(e){return new t({content:ch(this.content,e.content),additional_kwargs:hs(this.additional_kwargs,e.additional_kwargs),response_metadata:hs(this.response_metadata,e.response_metadata),id:this.id??e.id})}}});function DQt(t){return uE(t)?t:typeof t.id=="string"&&t.type==="function"&&typeof t.function=="object"&&t.function!==null&&"arguments"in t.function&&typeof t.function.arguments=="string"&&"name"in t.function&&typeof t.function.name=="string"?{id:t.id,args:JSON.parse(t.function.arguments),name:t.function.name,type:"tool_call"}:t}function LQt(t){return typeof t=="object"&&t!=null&&t.lc===1&&Array.isArray(t.id)&&t.kwargs!=null&&typeof t.kwargs=="object"}function Kfe(t){let e,r;if(LQt(t)){let n=t.id.at(-1);n==="HumanMessage"||n==="HumanMessageChunk"?e="user":n==="AIMessage"||n==="AIMessageChunk"?e="assistant":n==="SystemMessage"||n==="SystemMessageChunk"?e="system":n==="FunctionMessage"||n==="FunctionMessageChunk"?e="function":n==="ToolMessage"||n==="ToolMessageChunk"?e="tool":e="unknown",r=t.kwargs}else{let{type:n,...o}=t;e=n,r=o}if(e==="human"||e==="user")return new ys(r);if(e==="ai"||e==="assistant"){let{tool_calls:n,...o}=r;if(!Array.isArray(n))return new mn(r);let i=n.map(DQt);return new mn({...o,tool_calls:i})}else{if(e==="system")return new iC(r);if(e==="developer")return new iC({...r,additional_kwargs:{...r.additional_kwargs,__openai_role__:"developer"}});if(e==="tool"&&"tool_call_id"in r)return new oC({...r,content:r.content,tool_call_id:r.tool_call_id,name:r.name});throw sE(new Error(`Unable to coerce message from array: only human, AI, system, developer, or tool message coercion is currently supported.

Received: ${JSON.stringify(t,null,2)}`),"MESSAGE_COERCION_FAILURE")}}function Wg(t){if(typeof t=="string")return new ys(t);if(dh(t))return t;if(Array.isArray(t)){let[e,r]=t;return Kfe({type:e,content:r})}else if(WUe(t)){let{role:e,...r}=t;return Kfe({...r,type:e})}else return Kfe(t)}function yf(t,e="Human",r="AI"){let n=[];for(let o of t){let i;if(o._getType()==="human")i=e;else if(o._getType()==="ai")i=r;else if(o._getType()==="system")i="System";else if(o._getType()==="function")i="Function";else if(o._getType()==="tool")i="Tool";else if(o._getType()==="generic")i=o.role;else throw new Error(`Got unsupported message type: ${o._getType()}`);let a=o.name?`${o.name}, `:"",s=typeof o.content=="string"?o.content:JSON.stringify(o.content,null,2);n.push(`${i}: ${a}${s}`)}return n.join(`
`)}function Gfe(t){let e=t._getType();if(e==="human")return new gf({...t});if(e==="ai"){let r={...t};return"tool_calls"in r&&(r={...r,tool_call_chunks:r.tool_calls?.map(n=>({...n,type:"tool_call_chunk",index:void 0,args:JSON.stringify(n.args)}))}),new cr({...r})}else{if(e==="system")return new bd({...t});if(e==="function")return new nm({...t});if(gs.isInstance(t))return new hf({...t});throw new Error("Unknown message type.")}}var cE=O(()=>{Uz();_K();KM();fh();vK();wK();Hz();SK();dL()});var Jfe=O(()=>{iK()});var Yfe=O(()=>{nK()});var Zfe,JUe,YUe=O(()=>{Yfe();zM();JUe=()=>{if(Zfe===void 0){let t=ot("LANGCHAIN_CALLBACKS_BACKGROUND")==="false"?{blockOnRootRunFinalization:!0}:{};Zfe=new $M(t)}return Zfe}});var fL,ZUe=O(()=>{Jfe();Ife();zM();VM();YUe();fL=class t extends uh{constructor(e={}){super(e),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"langchain_tracer"}),Object.defineProperty(this,"projectName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"exampleId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0});let{exampleId:r,projectName:n,client:o}=e;this.projectName=n??ot("LANGCHAIN_PROJECT")??ot("LANGCHAIN_SESSION"),this.exampleId=r,this.client=o??JUe();let i=t.getTraceableRunTree();i&&this.updateFromRunTree(i)}async _convertToCreate(e,r=void 0){return{...e,extra:{...e.extra,runtime:await MUe()},child_runs:void 0,session_name:this.projectName,reference_example_id:e.parent_run_id?void 0:r}}async persistRun(e){}async onRunCreate(e){let r=await this._convertToCreate(e,this.exampleId);await this.client.createRun(r)}async onRunUpdate(e){let r={end_time:e.end_time,error:e.error,outputs:e.outputs,events:e.events,inputs:e.inputs,trace_id:e.trace_id,dotted_order:e.dotted_order,parent_run_id:e.parent_run_id,extra:e.extra,session_name:this.projectName};await this.client.updateRun(e.id,r)}getRun(e){return this.runMap.get(e)}updateFromRunTree(e){let r=e,n=new Set;for(;r.parent_run&&!(n.has(r.id)||(n.add(r.id),!r.parent_run));)r=r.parent_run;n.clear();let o=[r];for(;o.length>0;){let i=o.shift();!i||n.has(i.id)||(n.add(i.id),this.runMap.set(i.id,i),i.child_runs&&o.push(...i.child_runs))}this.client=e.client??this.client,this.projectName=e.project_name??this.projectName,this.exampleId=e.reference_example_id??this.exampleId}convertToRunTree(e){let r={},n=[];for(let[o,i]of this.runMap){let a=new rC({...i,child_runs:[],parent_run:void 0,client:this.client,project_name:this.projectName,reference_example_id:this.exampleId,tracingEnabled:!0});r[o]=a,n.push([o,i.dotted_order])}n.sort((o,i)=>!o[1]||!i[1]?0:o[1].localeCompare(i[1]));for(let[o]of n){let i=this.runMap.get(o),a=r[o];if(!(!i||!a)&&i.parent_run_id){let s=r[i.parent_run_id];s&&(s.child_runs.push(a),a.parent_run=s)}}return r[e]}static getTraceableRunTree(){try{return dUe()}catch{return}}}});var XUe,GM,QUe,dE,Vz=O(()=>{XUe=Symbol.for("ls:tracing_async_local_storage"),GM=Symbol.for("lc:context_variables"),QUe=t=>{globalThis[XUe]=t},dE=()=>globalThis[XUe]});function FQt(){let t="default"in xK.default?xK.default.default:xK.default;return new t({autoStart:!0,concurrency:1})}function kQt(){return typeof Wz>"u"&&(Wz=FQt()),Wz}async function bs(t,e){if(e===!0){let r=dE();r!==void 0?await r.run(void 0,async()=>t()):await t()}else Wz=kQt(),Wz.add(async()=>{let r=dE();r!==void 0?await r.run(void 0,async()=>t()):await t()})}var xK,Wz,eze=O(()=>{xK=F(B9(),1);Vz()});var tze=O(()=>{eze()});var rze,nze=O(()=>{zM();rze=t=>t!==void 0?t:!!["LANGSMITH_TRACING_V2","LANGCHAIN_TRACING_V2","LANGSMITH_TRACING","LANGCHAIN_TRACING"].find(r=>ot(r)==="true")});function Xfe(t){let e=dE();return e===void 0?void 0:e.getStore()?.[GM]?.[t]}var $Qt,oze,ize=O(()=>{Jfe();Vz();$Qt=Symbol("lc:configure_hooks"),oze=()=>Xfe($Qt)||[]});function JM(t){return t?Array.isArray(t)||"name"in t?{callbacks:t}:t:{}}function Kz(t){return"name"in t?t:HM.fromMethods(t)}var Qfe,pL,epe,CK,tpe,rpe,Ms,fE=O(()=>{oE();Bz();kUe();cE();zM();ZUe();tze();nze();VM();ize();Qfe=class{setHandler(e){return this.setHandlers([e])}},pL=class{constructor(e,r,n,o,i,a,s,u){Object.defineProperty(this,"runId",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"handlers",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"inheritableHandlers",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:o}),Object.defineProperty(this,"inheritableTags",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:a}),Object.defineProperty(this,"inheritableMetadata",{enumerable:!0,configurable:!0,writable:!0,value:s}),Object.defineProperty(this,"_parentRunId",{enumerable:!0,configurable:!0,writable:!0,value:u})}get parentRunId(){return this._parentRunId}async handleText(e){await Promise.all(this.handlers.map(r=>bs(async()=>{try{await r.handleText?.(e,this.runId,this._parentRunId,this.tags)}catch(n){if((r.raiseError?console.error:console.warn)(`Error in handler ${r.constructor.name}, handleText: ${n}`),r.raiseError)throw n}},r.awaitHandlers)))}async handleCustomEvent(e,r,n,o,i){await Promise.all(this.handlers.map(a=>bs(async()=>{try{await a.handleCustomEvent?.(e,r,this.runId,this.tags,this.metadata)}catch(s){if((a.raiseError?console.error:console.warn)(`Error in handler ${a.constructor.name}, handleCustomEvent: ${s}`),a.raiseError)throw s}},a.awaitHandlers)))}},epe=class extends pL{getChild(e){let r=new Ms(this.runId);return r.setHandlers(this.inheritableHandlers),r.addTags(this.inheritableTags),r.addMetadata(this.inheritableMetadata),e&&r.addTags([e],!1),r}async handleRetrieverEnd(e){await Promise.all(this.handlers.map(r=>bs(async()=>{if(!r.ignoreRetriever)try{await r.handleRetrieverEnd?.(e,this.runId,this._parentRunId,this.tags)}catch(n){if((r.raiseError?console.error:console.warn)(`Error in handler ${r.constructor.name}, handleRetriever`),r.raiseError)throw n}},r.awaitHandlers)))}async handleRetrieverError(e){await Promise.all(this.handlers.map(r=>bs(async()=>{if(!r.ignoreRetriever)try{await r.handleRetrieverError?.(e,this.runId,this._parentRunId,this.tags)}catch(n){if((r.raiseError?console.error:console.warn)(`Error in handler ${r.constructor.name}, handleRetrieverError: ${n}`),r.raiseError)throw e}},r.awaitHandlers)))}},CK=class extends pL{async handleLLMNewToken(e,r,n,o,i,a){await Promise.all(this.handlers.map(s=>bs(async()=>{if(!s.ignoreLLM)try{await s.handleLLMNewToken?.(e,r??{prompt:0,completion:0},this.runId,this._parentRunId,this.tags,a)}catch(u){if((s.raiseError?console.error:console.warn)(`Error in handler ${s.constructor.name}, handleLLMNewToken: ${u}`),s.raiseError)throw u}},s.awaitHandlers)))}async handleLLMError(e,r,n,o,i){await Promise.all(this.handlers.map(a=>bs(async()=>{if(!a.ignoreLLM)try{await a.handleLLMError?.(e,this.runId,this._parentRunId,this.tags,i)}catch(s){if((a.raiseError?console.error:console.warn)(`Error in handler ${a.constructor.name}, handleLLMError: ${s}`),a.raiseError)throw s}},a.awaitHandlers)))}async handleLLMEnd(e,r,n,o,i){await Promise.all(this.handlers.map(a=>bs(async()=>{if(!a.ignoreLLM)try{await a.handleLLMEnd?.(e,this.runId,this._parentRunId,this.tags,i)}catch(s){if((a.raiseError?console.error:console.warn)(`Error in handler ${a.constructor.name}, handleLLMEnd: ${s}`),a.raiseError)throw s}},a.awaitHandlers)))}},tpe=class extends pL{getChild(e){let r=new Ms(this.runId);return r.setHandlers(this.inheritableHandlers),r.addTags(this.inheritableTags),r.addMetadata(this.inheritableMetadata),e&&r.addTags([e],!1),r}async handleChainError(e,r,n,o,i){await Promise.all(this.handlers.map(a=>bs(async()=>{if(!a.ignoreChain)try{await a.handleChainError?.(e,this.runId,this._parentRunId,this.tags,i)}catch(s){if((a.raiseError?console.error:console.warn)(`Error in handler ${a.constructor.name}, handleChainError: ${s}`),a.raiseError)throw s}},a.awaitHandlers)))}async handleChainEnd(e,r,n,o,i){await Promise.all(this.handlers.map(a=>bs(async()=>{if(!a.ignoreChain)try{await a.handleChainEnd?.(e,this.runId,this._parentRunId,this.tags,i)}catch(s){if((a.raiseError?console.error:console.warn)(`Error in handler ${a.constructor.name}, handleChainEnd: ${s}`),a.raiseError)throw s}},a.awaitHandlers)))}async handleAgentAction(e){await Promise.all(this.handlers.map(r=>bs(async()=>{if(!r.ignoreAgent)try{await r.handleAgentAction?.(e,this.runId,this._parentRunId,this.tags)}catch(n){if((r.raiseError?console.error:console.warn)(`Error in handler ${r.constructor.name}, handleAgentAction: ${n}`),r.raiseError)throw n}},r.awaitHandlers)))}async handleAgentEnd(e){await Promise.all(this.handlers.map(r=>bs(async()=>{if(!r.ignoreAgent)try{await r.handleAgentEnd?.(e,this.runId,this._parentRunId,this.tags)}catch(n){if((r.raiseError?console.error:console.warn)(`Error in handler ${r.constructor.name}, handleAgentEnd: ${n}`),r.raiseError)throw n}},r.awaitHandlers)))}},rpe=class extends pL{getChild(e){let r=new Ms(this.runId);return r.setHandlers(this.inheritableHandlers),r.addTags(this.inheritableTags),r.addMetadata(this.inheritableMetadata),e&&r.addTags([e],!1),r}async handleToolError(e){await Promise.all(this.handlers.map(r=>bs(async()=>{if(!r.ignoreAgent)try{await r.handleToolError?.(e,this.runId,this._parentRunId,this.tags)}catch(n){if((r.raiseError?console.error:console.warn)(`Error in handler ${r.constructor.name}, handleToolError: ${n}`),r.raiseError)throw n}},r.awaitHandlers)))}async handleToolEnd(e){await Promise.all(this.handlers.map(r=>bs(async()=>{if(!r.ignoreAgent)try{await r.handleToolEnd?.(e,this.runId,this._parentRunId,this.tags)}catch(n){if((r.raiseError?console.error:console.warn)(`Error in handler ${r.constructor.name}, handleToolEnd: ${n}`),r.raiseError)throw n}},r.awaitHandlers)))}},Ms=class t extends Qfe{constructor(e,r){super(),Object.defineProperty(this,"handlers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"inheritableHandlers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"inheritableTags",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"inheritableMetadata",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"callback_manager"}),Object.defineProperty(this,"_parentRunId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.handlers=r?.handlers??this.handlers,this.inheritableHandlers=r?.inheritableHandlers??this.inheritableHandlers,this.tags=r?.tags??this.tags,this.inheritableTags=r?.inheritableTags??this.inheritableTags,this.metadata=r?.metadata??this.metadata,this.inheritableMetadata=r?.inheritableMetadata??this.inheritableMetadata,this._parentRunId=e}getParentRunId(){return this._parentRunId}async handleLLMStart(e,r,n=void 0,o=void 0,i=void 0,a=void 0,s=void 0,u=void 0){return Promise.all(r.map(async(l,c)=>{let d=c===0&&n?n:Qa();return await Promise.all(this.handlers.map(f=>{if(!f.ignoreLLM)return lL(f)&&f._createRunForLLMStart(e,[l],d,this._parentRunId,i,this.tags,this.metadata,u),bs(async()=>{try{await f.handleLLMStart?.(e,[l],d,this._parentRunId,i,this.tags,this.metadata,u)}catch(p){if((f.raiseError?console.error:console.warn)(`Error in handler ${f.constructor.name}, handleLLMStart: ${p}`),f.raiseError)throw p}},f.awaitHandlers)})),new CK(d,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}))}async handleChatModelStart(e,r,n=void 0,o=void 0,i=void 0,a=void 0,s=void 0,u=void 0){return Promise.all(r.map(async(l,c)=>{let d=c===0&&n?n:Qa();return await Promise.all(this.handlers.map(f=>{if(!f.ignoreLLM)return lL(f)&&f._createRunForChatModelStart(e,[l],d,this._parentRunId,i,this.tags,this.metadata,u),bs(async()=>{try{if(f.handleChatModelStart)await f.handleChatModelStart?.(e,[l],d,this._parentRunId,i,this.tags,this.metadata,u);else if(f.handleLLMStart){let p=yf(l);await f.handleLLMStart?.(e,[p],d,this._parentRunId,i,this.tags,this.metadata,u)}}catch(p){if((f.raiseError?console.error:console.warn)(`Error in handler ${f.constructor.name}, handleLLMStart: ${p}`),f.raiseError)throw p}},f.awaitHandlers)})),new CK(d,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}))}async handleChainStart(e,r,n=Qa(),o=void 0,i=void 0,a=void 0,s=void 0){return await Promise.all(this.handlers.map(u=>{if(!u.ignoreChain)return lL(u)&&u._createRunForChainStart(e,r,n,this._parentRunId,this.tags,this.metadata,o,s),bs(async()=>{try{await u.handleChainStart?.(e,r,n,this._parentRunId,this.tags,this.metadata,o,s)}catch(l){if((u.raiseError?console.error:console.warn)(`Error in handler ${u.constructor.name}, handleChainStart: ${l}`),u.raiseError)throw l}},u.awaitHandlers)})),new tpe(n,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}async handleToolStart(e,r,n=Qa(),o=void 0,i=void 0,a=void 0,s=void 0){return await Promise.all(this.handlers.map(u=>{if(!u.ignoreAgent)return lL(u)&&u._createRunForToolStart(e,r,n,this._parentRunId,this.tags,this.metadata,s),bs(async()=>{try{await u.handleToolStart?.(e,r,n,this._parentRunId,this.tags,this.metadata,s)}catch(l){if((u.raiseError?console.error:console.warn)(`Error in handler ${u.constructor.name}, handleToolStart: ${l}`),u.raiseError)throw l}},u.awaitHandlers)})),new rpe(n,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}async handleRetrieverStart(e,r,n=Qa(),o=void 0,i=void 0,a=void 0,s=void 0){return await Promise.all(this.handlers.map(u=>{if(!u.ignoreRetriever)return lL(u)&&u._createRunForRetrieverStart(e,r,n,this._parentRunId,this.tags,this.metadata,s),bs(async()=>{try{await u.handleRetrieverStart?.(e,r,n,this._parentRunId,this.tags,this.metadata,s)}catch(l){if((u.raiseError?console.error:console.warn)(`Error in handler ${u.constructor.name}, handleRetrieverStart: ${l}`),u.raiseError)throw l}},u.awaitHandlers)})),new epe(n,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}async handleCustomEvent(e,r,n,o,i){await Promise.all(this.handlers.map(a=>bs(async()=>{if(!a.ignoreCustomEvent)try{await a.handleCustomEvent?.(e,r,n,this.tags,this.metadata)}catch(s){if((a.raiseError?console.error:console.warn)(`Error in handler ${a.constructor.name}, handleCustomEvent: ${s}`),a.raiseError)throw s}},a.awaitHandlers)))}addHandler(e,r=!0){this.handlers.push(e),r&&this.inheritableHandlers.push(e)}removeHandler(e){this.handlers=this.handlers.filter(r=>r!==e),this.inheritableHandlers=this.inheritableHandlers.filter(r=>r!==e)}setHandlers(e,r=!0){this.handlers=[],this.inheritableHandlers=[];for(let n of e)this.addHandler(n,r)}addTags(e,r=!0){this.removeTags(e),this.tags.push(...e),r&&this.inheritableTags.push(...e)}removeTags(e){this.tags=this.tags.filter(r=>!e.includes(r)),this.inheritableTags=this.inheritableTags.filter(r=>!e.includes(r))}addMetadata(e,r=!0){this.metadata={...this.metadata,...e},r&&(this.inheritableMetadata={...this.inheritableMetadata,...e})}removeMetadata(e){for(let r of Object.keys(e))delete this.metadata[r],delete this.inheritableMetadata[r]}copy(e=[],r=!0){let n=new t(this._parentRunId);for(let o of this.handlers){let i=this.inheritableHandlers.includes(o);n.addHandler(o,i)}for(let o of this.tags){let i=this.inheritableTags.includes(o);n.addTags([o],i)}for(let o of Object.keys(this.metadata)){let i=Object.keys(this.inheritableMetadata).includes(o);n.addMetadata({[o]:this.metadata[o]},i)}for(let o of e)n.handlers.filter(i=>i.name==="console_callback_handler").some(i=>i.name===o.name)||n.addHandler(o,r);return n}static fromHandlers(e){class r extends HM{constructor(){super(),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:Qa()}),Object.assign(this,e)}}let n=new this;return n.addHandler(new r),n}static configure(e,r,n,o,i,a,s){return this._configureSync(e,r,n,o,i,a,s)}static _configureSync(e,r,n,o,i,a,s){let u;(e||r)&&(Array.isArray(e)||!e?(u=new t,u.setHandlers(e?.map(Kz)??[],!0)):u=e,u=u.copy(Array.isArray(r)?r.map(Kz):r?.handlers,!1));let l=ot("LANGCHAIN_VERBOSE")==="true"||s?.verbose,c=fL.getTraceableRunTree()?.tracingEnabled||rze(),d=c||(ot("LANGCHAIN_TRACING")??!1);if(l||d){if(u||(u=new t),l&&!u.handlers.some(f=>f.name===qz.prototype.name)){let f=new qz;u.addHandler(f,!0)}if(d&&!u.handlers.some(f=>f.name==="langchain_tracer")&&c){let f=new fL;u.addHandler(f,!0),u._parentRunId=fL.getTraceableRunTree()?.id??u._parentRunId}}for(let{contextVar:f,inheritable:p=!0,handlerClass:m,envVar:h}of oze()){let b=h&&ot(h)==="true"&&m,g,y=f!==void 0?Xfe(f):void 0;y&&RUe(y)?g=y:b&&(g=new m({})),g!==void 0&&(u||(u=new t),u.handlers.some(w=>w.name===g.name)||u.addHandler(g,p))}return(n||o)&&u&&(u.addTags(n??[]),u.addTags(o??[],!1)),(i||a)&&u&&(u.addMetadata(i??{}),u.addMetadata(a??{},!1)),u}}});var OK,BQt,aze,npe,_d,sze=O(()=>{Yfe();Vz();fE();OK=class{getStore(){}run(e,r){return r()}enterWith(e){}},BQt=new OK,aze=Symbol.for("lc:child_config"),npe=class{getInstance(){return dE()??BQt}getRunnableConfig(){return this.getInstance().getStore()?.extra?.[aze]}runWithConfig(e,r,n){let o=Ms._configureSync(e?.callbacks,void 0,e?.tags,void 0,e?.metadata),i=this.getInstance(),a=i.getStore(),s=o?.getParentRunId(),u=o?.handlers?.find(c=>c?.name==="langchain_tracer"),l;return u&&s?l=u.convertToRunTree(s):n||(l=new rC({name:"<runnable_lambda>",tracingEnabled:!1})),l&&(l.extra={...l.extra,[aze]:e}),a!==void 0&&a[GM]!==void 0&&(l===void 0&&(l={}),l[GM]=a[GM]),i.run(l,r)}initializeGlobalInstance(e){dE()===void 0&&QUe(e)}},_d=new npe});var mL=O(()=>{sze();Vz()});async function ap(t){return Ms._configureSync(t?.callbacks,void 0,t?.tags,void 0,t?.metadata)}function EK(...t){let e={};for(let r of t.filter(n=>!!n))for(let n of Object.keys(r))if(n==="metadata")e[n]={...e[n],...r[n]};else if(n==="tags"){let o=e[n]??[];e[n]=[...new Set(o.concat(r[n]??[]))]}else if(n==="configurable")e[n]={...e[n],...r[n]};else if(n==="timeout")e.timeout===void 0?e.timeout=r.timeout:r.timeout!==void 0&&(e.timeout=Math.min(e.timeout,r.timeout));else if(n==="signal")e.signal===void 0?e.signal=r.signal:r.signal!==void 0&&("any"in AbortSignal?e.signal=AbortSignal.any([e.signal,r.signal]):e.signal=r.signal);else if(n==="callbacks"){let o=e.callbacks,i=r.callbacks;if(Array.isArray(i))if(!o)e.callbacks=i;else if(Array.isArray(o))e.callbacks=o.concat(i);else{let a=o.copy();for(let s of i)a.addHandler(Kz(s),!0);e.callbacks=a}else if(i)if(!o)e.callbacks=i;else if(Array.isArray(o)){let a=i.copy();for(let s of o)a.addHandler(Kz(s),!0);e.callbacks=a}else e.callbacks=new Ms(i._parentRunId,{handlers:o.handlers.concat(i.handlers),inheritableHandlers:o.inheritableHandlers.concat(i.inheritableHandlers),tags:Array.from(new Set(o.tags.concat(i.tags))),inheritableTags:Array.from(new Set(o.inheritableTags.concat(i.inheritableTags))),metadata:{...o.metadata,...i.metadata}})}else{let o=n;e[o]=r[o]??e[o]}return e}function an(t){let e=_d.getRunnableConfig(),r={tags:[],metadata:{},recursionLimit:25,runId:void 0};if(e){let{runId:n,runName:o,...i}=e;r=Object.entries(i).reduce((a,[s,u])=>(u!==void 0&&(a[s]=u),a),r)}if(t&&(r=Object.entries(t).reduce((n,[o,i])=>(i!==void 0&&(n[o]=i),n),r)),r?.configurable)for(let n of Object.keys(r.configurable))qQt.has(typeof r.configurable[n])&&!r.metadata?.[n]&&(r.metadata||(r.metadata={}),r.metadata[n]=r.configurable[n]);if(r.timeout!==void 0){if(r.timeout<=0)throw new Error("Timeout must be a positive number");let n=AbortSignal.timeout(r.timeout);r.signal!==void 0?"any"in AbortSignal&&(r.signal=AbortSignal.any([r.signal,n])):r.signal=n,delete r.timeout}return r}function ts(t={},{callbacks:e,maxConcurrency:r,recursionLimit:n,runName:o,configurable:i,runId:a}={}){let s=an(t);return e!==void 0&&(delete s.runName,s.callbacks=e),n!==void 0&&(s.recursionLimit=n),r!==void 0&&(s.maxConcurrency=r),o!==void 0&&(s.runName=o),i!==void 0&&(s.configurable={...s.configurable,...i}),a!==void 0&&delete s.runId,s}function om(t){return t?{configurable:t.configurable,recursionLimit:t.recursionLimit,callbacks:t.callbacks,tags:t.tags,metadata:t.metadata,maxConcurrency:t.maxConcurrency,timeout:t.timeout,signal:t.signal}:void 0}var PK,qQt,Cb=O(()=>{fE();mL();PK=25;qQt=new Set(["string","number","boolean"])});async function Ob(t,e){if(e===void 0)return t;let r;return Promise.race([t.catch(n=>{if(!e?.aborted)throw n}),new Promise((n,o)=>{r=()=>{o(new Error("Aborted"))},e.addEventListener("abort",r),e.aborted&&o(new Error("Aborted"))})]).finally(()=>e.removeEventListener("abort",r))}var ope=O(()=>{});function ipe(t,e=2){let r=Array.from({length:e},()=>[]);return r.map(async function*(o){for(;;)if(o.length===0){let i=await t.next();for(let a of r)a.push(i)}else{if(o[0].done)return;yield o.shift().value}})}function jl(t,e){if(Array.isArray(t)&&Array.isArray(e))return t.concat(e);if(typeof t=="string"&&typeof e=="string")return t+e;if(typeof t=="number"&&typeof e=="number")return t+e;if("concat"in t&&typeof t.concat=="function")return t.concat(e);if(typeof t=="object"&&typeof e=="object"){let r={...t};for(let[n,o]of Object.entries(e))n in r&&!Array.isArray(r[n])?r[n]=jl(r[n],o):r[n]=o;return r}else throw new Error(`Cannot concat ${typeof t} and ${typeof e}`)}async function uze(t,e,r,n,...o){let i=new aC({generator:e,startSetup:r,signal:n}),a=await i.setup;return{output:t(i,a,...o),setup:a}}var vd,aC,Pb=O(()=>{Cb();mL();ope();vd=class t extends ReadableStream{constructor(){super(...arguments),Object.defineProperty(this,"reader",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}ensureReader(){this.reader||(this.reader=this.getReader())}async next(){this.ensureReader();try{let e=await this.reader.read();return e.done?(this.reader.releaseLock(),{done:!0,value:void 0}):{done:!1,value:e.value}}catch(e){throw this.reader.releaseLock(),e}}async return(){if(this.ensureReader(),this.locked){let e=this.reader.cancel();this.reader.releaseLock(),await e}return{done:!0,value:void 0}}async throw(e){if(this.ensureReader(),this.locked){let r=this.reader.cancel();this.reader.releaseLock(),await r}throw e}[Symbol.asyncIterator](){return this}async[Symbol.asyncDispose](){await this.return()}static fromReadableStream(e){let r=e.getReader();return new t({start(n){return o();function o(){return r.read().then(({done:i,value:a})=>{if(i){n.close();return}return n.enqueue(a),o()})}},cancel(){r.releaseLock()}})}static fromAsyncGenerator(e){return new t({async pull(r){let{value:n,done:o}=await e.next();o&&r.close(),r.enqueue(n)},async cancel(r){await e.return(r)}})}};aC=class{constructor(e){Object.defineProperty(this,"generator",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"setup",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"config",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"signal",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"firstResult",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"firstResultUsed",{enumerable:!0,configurable:!0,writable:!0,value:!1}),this.generator=e.generator,this.config=e.config,this.signal=e.signal??this.config?.signal,this.setup=new Promise((r,n)=>{_d.runWithConfig(om(e.config),async()=>{this.firstResult=e.generator.next(),e.startSetup?this.firstResult.then(e.startSetup).then(r,n):this.firstResult.then(o=>r(void 0),n)},!0)})}async next(...e){return this.signal?.throwIfAborted(),this.firstResultUsed?_d.runWithConfig(om(this.config),this.signal?async()=>Ob(this.generator.next(...e),this.signal):async()=>this.generator.next(...e),!0):(this.firstResultUsed=!0,this.firstResult)}async return(e){return this.generator.return(e)}async throw(e){return this.generator.throw(e)}[Symbol.asyncIterator](){return this}async[Symbol.asyncDispose](){await this.return()}}});async function lze(t,e){if(e==="original")throw new Error("Do not assign inputs with original schema drop the key for now. When inputs are added to streamLog they should be added with standardized schema for streaming events.");let{inputs:r}=t;if(["retriever","llm","prompt"].includes(t.run_type))return r;if(!(Object.keys(r).length===1&&r?.input===""))return r.input}async function cze(t,e){let{outputs:r}=t;return e==="original"||["retriever","llm","prompt"].includes(t.run_type)?r:r!==void 0&&Object.keys(r).length===1&&r?.output!==void 0?r.output:r}function UQt(t){return t!==void 0&&t.message!==void 0}var Kg,Gz,dze,Jz,fze=O(()=>{Rfe();VM();Pb();KM();Kg=class{constructor(e){Object.defineProperty(this,"ops",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.ops=e.ops??[]}concat(e){let r=this.ops.concat(e.ops),n=iE({},r);return new Gz({ops:r,state:n[n.length-1].newDocument})}},Gz=class t extends Kg{constructor(e){super(e),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.state=e.state}concat(e){let r=this.ops.concat(e.ops),n=iE(this.state,e.ops);return new t({ops:r,state:n[n.length-1].newDocument})}static fromRunLogPatch(e){let r=iE({},e.ops);return new t({ops:e.ops,state:r[r.length-1].newDocument})}},dze=t=>t.name==="log_stream_tracer";Jz=class extends uh{constructor(e){super({_awaitHandler:!0,...e}),Object.defineProperty(this,"autoClose",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"includeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_schemaFormat",{enumerable:!0,configurable:!0,writable:!0,value:"original"}),Object.defineProperty(this,"rootId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"keyMapByRunId",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"counterMapByRunName",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"transformStream",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"writer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"receiveStream",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"log_stream_tracer"}),Object.defineProperty(this,"lc_prefer_streaming",{enumerable:!0,configurable:!0,writable:!0,value:!0}),this.autoClose=e?.autoClose??!0,this.includeNames=e?.includeNames,this.includeTypes=e?.includeTypes,this.includeTags=e?.includeTags,this.excludeNames=e?.excludeNames,this.excludeTypes=e?.excludeTypes,this.excludeTags=e?.excludeTags,this._schemaFormat=e?._schemaFormat??this._schemaFormat,this.transformStream=new TransformStream,this.writer=this.transformStream.writable.getWriter(),this.receiveStream=vd.fromReadableStream(this.transformStream.readable)}[Symbol.asyncIterator](){return this.receiveStream}async persistRun(e){}_includeRun(e){if(e.id===this.rootId)return!1;let r=e.tags??[],n=this.includeNames===void 0&&this.includeTags===void 0&&this.includeTypes===void 0;return this.includeNames!==void 0&&(n=n||this.includeNames.includes(e.name)),this.includeTypes!==void 0&&(n=n||this.includeTypes.includes(e.run_type)),this.includeTags!==void 0&&(n=n||r.find(o=>this.includeTags?.includes(o))!==void 0),this.excludeNames!==void 0&&(n=n&&!this.excludeNames.includes(e.name)),this.excludeTypes!==void 0&&(n=n&&!this.excludeTypes.includes(e.run_type)),this.excludeTags!==void 0&&(n=n&&r.every(o=>!this.excludeTags?.includes(o))),n}async*tapOutputIterable(e,r){for await(let n of r){if(e!==this.rootId){let o=this.keyMapByRunId[e];o&&await this.writer.write(new Kg({ops:[{op:"add",path:`/logs/${o}/streamed_output/-`,value:n}]}))}yield n}}async onRunCreate(e){if(this.rootId===void 0&&(this.rootId=e.id,await this.writer.write(new Kg({ops:[{op:"replace",path:"",value:{id:e.id,name:e.name,type:e.run_type,streamed_output:[],final_output:void 0,logs:{}}}]}))),!this._includeRun(e))return;this.counterMapByRunName[e.name]===void 0&&(this.counterMapByRunName[e.name]=0),this.counterMapByRunName[e.name]+=1;let r=this.counterMapByRunName[e.name];this.keyMapByRunId[e.id]=r===1?e.name:`${e.name}:${r}`;let n={id:e.id,name:e.name,type:e.run_type,tags:e.tags??[],metadata:e.extra?.metadata??{},start_time:new Date(e.start_time).toISOString(),streamed_output:[],streamed_output_str:[],final_output:void 0,end_time:void 0};this._schemaFormat==="streaming_events"&&(n.inputs=await lze(e,this._schemaFormat)),await this.writer.write(new Kg({ops:[{op:"add",path:`/logs/${this.keyMapByRunId[e.id]}`,value:n}]}))}async onRunUpdate(e){try{let r=this.keyMapByRunId[e.id];if(r===void 0)return;let n=[];this._schemaFormat==="streaming_events"&&n.push({op:"replace",path:`/logs/${r}/inputs`,value:await lze(e,this._schemaFormat)}),n.push({op:"add",path:`/logs/${r}/final_output`,value:await cze(e,this._schemaFormat)}),e.end_time!==void 0&&n.push({op:"add",path:`/logs/${r}/end_time`,value:new Date(e.end_time).toISOString()});let o=new Kg({ops:n});await this.writer.write(o)}finally{if(e.id===this.rootId){let r=new Kg({ops:[{op:"replace",path:"/final_output",value:await cze(e,this._schemaFormat)}]});await this.writer.write(r),this.autoClose&&await this.writer.close()}}}async onLLMNewToken(e,r,n){let o=this.keyMapByRunId[e.id];if(o===void 0)return;let i=e.inputs.messages!==void 0,a;i?UQt(n?.chunk)?a=n?.chunk:a=new cr({id:`run-${e.id}`,content:r}):a=r;let s=new Kg({ops:[{op:"add",path:`/logs/${o}/streamed_output_str/-`,value:r},{op:"add",path:`/logs/${o}/streamed_output/-`,value:a}]});await this.writer.write(s)}}});var Yz,sp,Ln,hL=O(()=>{Yz="__run",sp=class t{constructor(e){Object.defineProperty(this,"text",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"generationInfo",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.text=e.text,this.generationInfo=e.generationInfo}concat(e){return new t({text:this.text+e.text,generationInfo:{...this.generationInfo,...e.generationInfo}})}},Ln=class t extends sp{constructor(e){super(e),Object.defineProperty(this,"message",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.message=e.message}concat(e){return new t({text:this.text+e.text,generationInfo:{...this.generationInfo,...e.generationInfo},message:this.message.concat(e.message)})}}});function TK({name:t,serialized:e}){return t!==void 0?t:e?.name!==void 0?e.name:e?.id!==void 0&&Array.isArray(e?.id)?e.id[e.id.length-1]:"Unnamed"}var pze,AK,mze=O(()=>{VM();Pb();KM();hL();pze=t=>t.name==="event_stream_tracer",AK=class extends uh{constructor(e){super({_awaitHandler:!0,...e}),Object.defineProperty(this,"autoClose",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"includeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"runInfoMap",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"tappedPromises",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"transformStream",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"writer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"receiveStream",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"event_stream_tracer"}),Object.defineProperty(this,"lc_prefer_streaming",{enumerable:!0,configurable:!0,writable:!0,value:!0}),this.autoClose=e?.autoClose??!0,this.includeNames=e?.includeNames,this.includeTypes=e?.includeTypes,this.includeTags=e?.includeTags,this.excludeNames=e?.excludeNames,this.excludeTypes=e?.excludeTypes,this.excludeTags=e?.excludeTags,this.transformStream=new TransformStream,this.writer=this.transformStream.writable.getWriter(),this.receiveStream=vd.fromReadableStream(this.transformStream.readable)}[Symbol.asyncIterator](){return this.receiveStream}async persistRun(e){}_includeRun(e){let r=e.tags??[],n=this.includeNames===void 0&&this.includeTags===void 0&&this.includeTypes===void 0;return this.includeNames!==void 0&&(n=n||this.includeNames.includes(e.name)),this.includeTypes!==void 0&&(n=n||this.includeTypes.includes(e.runType)),this.includeTags!==void 0&&(n=n||r.find(o=>this.includeTags?.includes(o))!==void 0),this.excludeNames!==void 0&&(n=n&&!this.excludeNames.includes(e.name)),this.excludeTypes!==void 0&&(n=n&&!this.excludeTypes.includes(e.runType)),this.excludeTags!==void 0&&(n=n&&r.every(o=>!this.excludeTags?.includes(o))),n}async*tapOutputIterable(e,r){let n=await r.next();if(n.done)return;let o=this.runInfoMap.get(e);if(o===void 0){yield n.value;return}function i(s,u){return s==="llm"&&typeof u=="string"?new sp({text:u}):u}let a=this.tappedPromises.get(e);if(a===void 0){let s;a=new Promise(u=>{s=u}),this.tappedPromises.set(e,a);try{let u={event:`on_${o.runType}_stream`,run_id:e,name:o.name,tags:o.tags,metadata:o.metadata,data:{}};await this.send({...u,data:{chunk:i(o.runType,n.value)}},o),yield n.value;for await(let l of r)o.runType!=="tool"&&o.runType!=="retriever"&&await this.send({...u,data:{chunk:i(o.runType,l)}},o),yield l}finally{s()}}else{yield n.value;for await(let s of r)yield s}}async send(e,r){this._includeRun(r)&&await this.writer.write(e)}async sendEndEvent(e,r){let n=this.tappedPromises.get(e.run_id);n!==void 0?n.then(()=>{this.send(e,r)}):await this.send(e,r)}async onLLMStart(e){let r=TK(e),n=e.inputs.messages!==void 0?"chat_model":"llm",o={tags:e.tags??[],metadata:e.extra?.metadata??{},name:r,runType:n,inputs:e.inputs};this.runInfoMap.set(e.id,o);let i=`on_${n}_start`;await this.send({event:i,data:{input:e.inputs},name:r,tags:e.tags??[],run_id:e.id,metadata:e.extra?.metadata??{}},o)}async onLLMNewToken(e,r,n){let o=this.runInfoMap.get(e.id),i,a;if(o===void 0)throw new Error(`onLLMNewToken: Run ID ${e.id} not found in run map.`);if(this.runInfoMap.size!==1){if(o.runType==="chat_model")a="on_chat_model_stream",n?.chunk===void 0?i=new cr({content:r,id:`run-${e.id}`}):i=n.chunk.message;else if(o.runType==="llm")a="on_llm_stream",n?.chunk===void 0?i=new sp({text:r}):i=n.chunk;else throw new Error(`Unexpected run type ${o.runType}`);await this.send({event:a,data:{chunk:i},run_id:e.id,name:o.name,tags:o.tags,metadata:o.metadata},o)}}async onLLMEnd(e){let r=this.runInfoMap.get(e.id);this.runInfoMap.delete(e.id);let n;if(r===void 0)throw new Error(`onLLMEnd: Run ID ${e.id} not found in run map.`);let o=e.outputs?.generations,i;if(r.runType==="chat_model"){for(let a of o??[]){if(i!==void 0)break;i=a[0]?.message}n="on_chat_model_end"}else if(r.runType==="llm")i={generations:o?.map(a=>a.map(s=>({text:s.text,generationInfo:s.generationInfo}))),llmOutput:e.outputs?.llmOutput??{}},n="on_llm_end";else throw new Error(`onLLMEnd: Unexpected run type: ${r.runType}`);await this.sendEndEvent({event:n,data:{output:i,input:r.inputs},run_id:e.id,name:r.name,tags:r.tags,metadata:r.metadata},r)}async onChainStart(e){let r=TK(e),n=e.run_type??"chain",o={tags:e.tags??[],metadata:e.extra?.metadata??{},name:r,runType:e.run_type},i={};e.inputs.input===""&&Object.keys(e.inputs).length===1?(i={},o.inputs={}):e.inputs.input!==void 0?(i.input=e.inputs.input,o.inputs=e.inputs.input):(i.input=e.inputs,o.inputs=e.inputs),this.runInfoMap.set(e.id,o),await this.send({event:`on_${n}_start`,data:i,name:r,tags:e.tags??[],run_id:e.id,metadata:e.extra?.metadata??{}},o)}async onChainEnd(e){let r=this.runInfoMap.get(e.id);if(this.runInfoMap.delete(e.id),r===void 0)throw new Error(`onChainEnd: Run ID ${e.id} not found in run map.`);let n=`on_${e.run_type}_end`,o=e.inputs??r.inputs??{},a={output:e.outputs?.output??e.outputs,input:o};o.input&&Object.keys(o).length===1&&(a.input=o.input,r.inputs=o.input),await this.sendEndEvent({event:n,data:a,run_id:e.id,name:r.name,tags:r.tags,metadata:r.metadata??{}},r)}async onToolStart(e){let r=TK(e),n={tags:e.tags??[],metadata:e.extra?.metadata??{},name:r,runType:"tool",inputs:e.inputs??{}};this.runInfoMap.set(e.id,n),await this.send({event:"on_tool_start",data:{input:e.inputs??{}},name:r,run_id:e.id,tags:e.tags??[],metadata:e.extra?.metadata??{}},n)}async onToolEnd(e){let r=this.runInfoMap.get(e.id);if(this.runInfoMap.delete(e.id),r===void 0)throw new Error(`onToolEnd: Run ID ${e.id} not found in run map.`);if(r.inputs===void 0)throw new Error(`onToolEnd: Run ID ${e.id} is a tool call, and is expected to have traced inputs.`);let n=e.outputs?.output===void 0?e.outputs:e.outputs.output;await this.sendEndEvent({event:"on_tool_end",data:{output:n,input:r.inputs},run_id:e.id,name:r.name,tags:r.tags,metadata:r.metadata},r)}async onRetrieverStart(e){let r=TK(e),o={tags:e.tags??[],metadata:e.extra?.metadata??{},name:r,runType:"retriever",inputs:{query:e.inputs.query}};this.runInfoMap.set(e.id,o),await this.send({event:"on_retriever_start",data:{input:{query:e.inputs.query}},name:r,tags:e.tags??[],run_id:e.id,metadata:e.extra?.metadata??{}},o)}async onRetrieverEnd(e){let r=this.runInfoMap.get(e.id);if(this.runInfoMap.delete(e.id),r===void 0)throw new Error(`onRetrieverEnd: Run ID ${e.id} not found in run map.`);await this.sendEndEvent({event:"on_retriever_end",data:{output:e.outputs?.documents??e.outputs,input:r.inputs},run_id:e.id,name:r.name,tags:r.tags,metadata:r.metadata},r)}async handleCustomEvent(e,r,n){let o=this.runInfoMap.get(n);if(o===void 0)throw new Error(`handleCustomEvent: Run ID ${n} not found in run map.`);await this.send({event:"on_custom_event",run_id:n,name:e,tags:o.tags,metadata:o.metadata,data:r},o)}async finish(){let e=[...this.tappedPromises.values()];Promise.all(e).finally(()=>{this.writer.close()})}}});var hze,IK,zQt,HQt,im,gL=O(()=>{hze=F(R9(),1),IK=F(B9(),1),zQt=[400,401,402,403,404,405,406,407,409],HQt=t=>{if(t.message.startsWith("Cancel")||t.message.startsWith("AbortError")||t.name==="AbortError"||t?.code==="ECONNABORTED")throw t;let e=t?.response?.status??t?.status;if(e&&zQt.includes(+e))throw t;if(t?.error?.code==="insufficient_quota"){let r=new Error(t?.message);throw r.name="InsufficientQuotaError",r}},im=class{constructor(e){Object.defineProperty(this,"maxConcurrency",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"maxRetries",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"onFailedAttempt",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"queue",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxConcurrency=e.maxConcurrency??1/0,this.maxRetries=e.maxRetries??6,this.onFailedAttempt=e.onFailedAttempt??HQt;let r="default"in IK.default?IK.default.default:IK.default;this.queue=new r({concurrency:this.maxConcurrency})}call(e,...r){return this.queue.add(()=>(0,hze.default)(()=>e(...r).catch(n=>{throw n instanceof Error?n:new Error(n)}),{onFailedAttempt:this.onFailedAttempt,retries:this.maxRetries,randomize:!0}),{throwOnTimeout:!0})}callWithOptions(e,r,...n){return e.signal?Promise.race([this.call(r,...n),new Promise((o,i)=>{e.signal?.addEventListener("abort",()=>{i(new Error("AbortError"))})})]):this.call(r,...n)}fetch(...e){return this.call(()=>fetch(...e).then(r=>r.ok?r:Promise.reject(r)))}}});var Zz,gze=O(()=>{VM();Zz=class extends uh{constructor({config:e,onStart:r,onEnd:n,onError:o}){super({_awaitHandler:!0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RootListenersTracer"}),Object.defineProperty(this,"rootId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"config",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"argOnStart",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"argOnEnd",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"argOnError",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.config=e,this.argOnStart=r,this.argOnEnd=n,this.argOnError=o}persistRun(e){return Promise.resolve()}async onRunCreate(e){this.rootId||(this.rootId=e.id,this.argOnStart&&await this.argOnStart(e,this.config))}async onRunUpdate(e){e.id===this.rootId&&(e.error?this.argOnError&&await this.argOnError(e,this.config):this.argOnEnd&&await this.argOnEnd(e,this.config))}}});function Xz(t){return t?t.lc_runnable:!1}var MK,ape=O(()=>{MK=class{constructor(e){Object.defineProperty(this,"includeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.includeNames=e.includeNames,this.includeTypes=e.includeTypes,this.includeTags=e.includeTags,this.excludeNames=e.excludeNames,this.excludeTypes=e.excludeTypes,this.excludeTags=e.excludeTags}includeEvent(e,r){let n=this.includeNames===void 0&&this.includeTypes===void 0&&this.includeTags===void 0,o=e.tags??[];return this.includeNames!==void 0&&(n=n||this.includeNames.includes(e.name)),this.includeTypes!==void 0&&(n=n||this.includeTypes.includes(r)),this.includeTags!==void 0&&(n=n||o.some(i=>this.includeTags?.includes(i))),this.excludeNames!==void 0&&(n=n&&!this.excludeNames.includes(e.name)),this.excludeTypes!==void 0&&(n=n&&!this.excludeTypes.includes(r)),this.excludeTags!==void 0&&(n=n&&o.every(i=>!this.excludeTags?.includes(i))),n}}});var bze,yze,_ze,RK=O(()=>{bze=Symbol("Let zodToJsonSchema decide on which parser to use"),yze={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,definitions:{},errorMessages:!1,markdownDescription:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref"},_ze=t=>typeof t=="string"?{...yze,name:t}:{...yze,...t}});var vze,spe=O(()=>{RK();vze=t=>{let e=_ze(t),r=e.name!==void 0?[...e.basePath,e.definitionPath,e.name]:e.basePath;return{...e,currentPath:r,propertyPath:void 0,seen:new Map(Object.entries(e.definitions).map(([n,o])=>[o._def,{def:o._def,path:[...e.basePath,e.definitionPath,n],jsonSchema:void 0}]))}}});function upe(t,e,r,n){n?.errorMessages&&r&&(t.errorMessage={...t.errorMessage,[e]:r})}function Fn(t,e,r,n,o){t[e]=r,upe(t,e,n,o)}var pE=O(()=>{});function wze(){return{}}var lpe=O(()=>{});function Sze(t,e){let r={type:"array"};return t.type?._def&&t.type?._def?.typeName!==ce.ZodAny&&(r.items=dr(t.type._def,{...e,currentPath:[...e.currentPath,"items"]})),t.minLength&&Fn(r,"minItems",t.minLength.value,t.minLength.message,e),t.maxLength&&Fn(r,"maxItems",t.maxLength.value,t.maxLength.message,e),t.exactLength&&(Fn(r,"minItems",t.exactLength.value,t.exactLength.message,e),Fn(r,"maxItems",t.exactLength.value,t.exactLength.message,e)),r}var cpe=O(()=>{md();pE();Rs()});function xze(t,e){let r={type:"integer",format:"int64"};if(!t.checks)return r;for(let n of t.checks)switch(n.kind){case"min":e.target==="jsonSchema7"?n.inclusive?Fn(r,"minimum",n.value,n.message,e):Fn(r,"exclusiveMinimum",n.value,n.message,e):(n.inclusive||(r.exclusiveMinimum=!0),Fn(r,"minimum",n.value,n.message,e));break;case"max":e.target==="jsonSchema7"?n.inclusive?Fn(r,"maximum",n.value,n.message,e):Fn(r,"exclusiveMaximum",n.value,n.message,e):(n.inclusive||(r.exclusiveMaximum=!0),Fn(r,"maximum",n.value,n.message,e));break;case"multipleOf":Fn(r,"multipleOf",n.value,n.message,e);break}return r}var dpe=O(()=>{pE()});function Cze(){return{type:"boolean"}}var fpe=O(()=>{});function jK(t,e){return dr(t.type._def,e)}var NK=O(()=>{Rs()});var Oze,ppe=O(()=>{Rs();Oze=(t,e)=>dr(t.innerType._def,e)});function mpe(t,e,r){let n=r??e.dateStrategy;if(Array.isArray(n))return{anyOf:n.map((o,i)=>mpe(t,e,o))};switch(n){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return VQt(t,e)}}var VQt,hpe=O(()=>{pE();VQt=(t,e)=>{let r={type:"integer",format:"unix-time"};if(e.target==="openApi3")return r;for(let n of t.checks)switch(n.kind){case"min":Fn(r,"minimum",n.value,n.message,e);break;case"max":Fn(r,"maximum",n.value,n.message,e);break}return r}});function Pze(t,e){return{...dr(t.innerType._def,e),default:t.defaultValue()}}var gpe=O(()=>{Rs()});function Eze(t,e){return e.effectStrategy==="input"?dr(t.schema._def,e):{}}var ype=O(()=>{Rs()});function Tze(t){return{type:"string",enum:Array.from(t.values)}}var bpe=O(()=>{});function Aze(t,e){let r=[dr(t.left._def,{...e,currentPath:[...e.currentPath,"allOf","0"]}),dr(t.right._def,{...e,currentPath:[...e.currentPath,"allOf","1"]})].filter(i=>!!i),n=e.target==="jsonSchema2019-09"?{unevaluatedProperties:!1}:void 0,o=[];return r.forEach(i=>{if(WQt(i))o.push(...i.allOf),i.unevaluatedProperties===void 0&&(n=void 0);else{let a=i;if("additionalProperties"in i&&i.additionalProperties===!1){let{additionalProperties:s,...u}=i;a=u}else n=void 0;o.push(a)}}),o.length?{allOf:o,...n}:void 0}var WQt,_pe=O(()=>{Rs();WQt=t=>"type"in t&&t.type==="string"?!1:"allOf"in t});function Ize(t,e){let r=typeof t.value;return r!=="bigint"&&r!=="number"&&r!=="boolean"&&r!=="string"?{type:Array.isArray(t.value)?"array":"object"}:e.target==="openApi3"?{type:r==="bigint"?"integer":r,enum:[t.value]}:{type:r==="bigint"?"integer":r,const:t.value}}var vpe=O(()=>{});function DK(t,e){let r={type:"string"};if(t.checks)for(let n of t.checks)switch(n.kind){case"min":Fn(r,"minLength",typeof r.minLength=="number"?Math.max(r.minLength,n.value):n.value,n.message,e);break;case"max":Fn(r,"maxLength",typeof r.maxLength=="number"?Math.min(r.maxLength,n.value):n.value,n.message,e);break;case"email":switch(e.emailStrategy){case"format:email":Jg(r,"email",n.message,e);break;case"format:idn-email":Jg(r,"idn-email",n.message,e);break;case"pattern:zod":bf(r,Gg.email,n.message,e);break}break;case"url":Jg(r,"uri",n.message,e);break;case"uuid":Jg(r,"uuid",n.message,e);break;case"regex":bf(r,n.regex,n.message,e);break;case"cuid":bf(r,Gg.cuid,n.message,e);break;case"cuid2":bf(r,Gg.cuid2,n.message,e);break;case"startsWith":bf(r,RegExp(`^${Spe(n.value,e)}`),n.message,e);break;case"endsWith":bf(r,RegExp(`${Spe(n.value,e)}$`),n.message,e);break;case"datetime":Jg(r,"date-time",n.message,e);break;case"date":Jg(r,"date",n.message,e);break;case"time":Jg(r,"time",n.message,e);break;case"duration":Jg(r,"duration",n.message,e);break;case"length":Fn(r,"minLength",typeof r.minLength=="number"?Math.max(r.minLength,n.value):n.value,n.message,e),Fn(r,"maxLength",typeof r.maxLength=="number"?Math.min(r.maxLength,n.value):n.value,n.message,e);break;case"includes":{bf(r,RegExp(Spe(n.value,e)),n.message,e);break}case"ip":{n.version!=="v6"&&Jg(r,"ipv4",n.message,e),n.version!=="v4"&&Jg(r,"ipv6",n.message,e);break}case"base64url":bf(r,Gg.base64url,n.message,e);break;case"jwt":bf(r,Gg.jwt,n.message,e);break;case"cidr":{n.version!=="v6"&&bf(r,Gg.ipv4Cidr,n.message,e),n.version!=="v4"&&bf(r,Gg.ipv6Cidr,n.message,e);break}case"emoji":bf(r,Gg.emoji(),n.message,e);break;case"ulid":{bf(r,Gg.ulid,n.message,e);break}case"base64":{switch(e.base64Strategy){case"format:binary":{Jg(r,"binary",n.message,e);break}case"contentEncoding:base64":{Fn(r,"contentEncoding","base64",n.message,e);break}case"pattern:zod":{bf(r,Gg.base64,n.message,e);break}}break}case"nanoid":bf(r,Gg.nanoid,n.message,e);case"toLowerCase":case"toUpperCase":case"trim":break;default:}return r}function Spe(t,e){return e.patternStrategy==="escape"?GQt(t):t}function GQt(t){let e="";for(let r=0;r<t.length;r++)KQt.has(t[r])||(e+="\\"),e+=t[r];return e}function Jg(t,e,r,n){t.format||t.anyOf?.some(o=>o.format)?(t.anyOf||(t.anyOf=[]),t.format&&(t.anyOf.push({format:t.format,...t.errorMessage&&n.errorMessages&&{errorMessage:{format:t.errorMessage.format}}}),delete t.format,t.errorMessage&&(delete t.errorMessage.format,Object.keys(t.errorMessage).length===0&&delete t.errorMessage)),t.anyOf.push({format:e,...r&&n.errorMessages&&{errorMessage:{format:r}}})):Fn(t,"format",e,r,n)}function bf(t,e,r,n){t.pattern||t.allOf?.some(o=>o.pattern)?(t.allOf||(t.allOf=[]),t.pattern&&(t.allOf.push({pattern:t.pattern,...t.errorMessage&&n.errorMessages&&{errorMessage:{pattern:t.errorMessage.pattern}}}),delete t.pattern,t.errorMessage&&(delete t.errorMessage.pattern,Object.keys(t.errorMessage).length===0&&delete t.errorMessage)),t.allOf.push({pattern:Mze(e,n),...r&&n.errorMessages&&{errorMessage:{pattern:r}}})):Fn(t,"pattern",Mze(e,n),r,n)}function Mze(t,e){if(!e.applyRegexFlags||!t.flags)return t.source;let r={i:t.flags.includes("i"),m:t.flags.includes("m"),s:t.flags.includes("s")},n=r.i?t.source.toLowerCase():t.source,o="",i=!1,a=!1,s=!1;for(let u=0;u<n.length;u++){if(i){o+=n[u],i=!1;continue}if(r.i){if(a){if(n[u].match(/[a-z]/)){s?(o+=n[u],o+=`${n[u-2]}-${n[u]}`.toUpperCase(),s=!1):n[u+1]==="-"&&n[u+2]?.match(/[a-z]/)?(o+=n[u],s=!0):o+=`${n[u]}${n[u].toUpperCase()}`;continue}}else if(n[u].match(/[a-z]/)){o+=`[${n[u]}${n[u].toUpperCase()}]`;continue}}if(r.m){if(n[u]==="^"){o+=`(^|(?<=[\r
]))`;continue}else if(n[u]==="$"){o+=`($|(?=[\r
]))`;continue}}if(r.s&&n[u]==="."){o+=a?`${n[u]}\r
`:`[${n[u]}\r
]`;continue}o+=n[u],n[u]==="\\"?i=!0:a&&n[u]==="]"?a=!1:!a&&n[u]==="["&&(a=!0)}try{new RegExp(o)}catch{return console.warn(`Could not convert regex pattern at ${e.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),t.source}return o}var wpe,Gg,KQt,LK=O(()=>{pE();Gg={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>(wpe===void 0&&(wpe=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),wpe),uuid:/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/,ipv4:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv4Cidr:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ipv6:/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,ipv6Cidr:/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,base64url:/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/,jwt:/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/};KQt=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789")});function FK(t,e){if(e.target==="openAi"&&console.warn("Warning: OpenAI may not support records in schemas! Try an array of key-value pairs instead."),e.target==="openApi3"&&t.keyType?._def.typeName===ce.ZodEnum)return{type:"object",required:t.keyType._def.values,properties:t.keyType._def.values.reduce((n,o)=>({...n,[o]:dr(t.valueType._def,{...e,currentPath:[...e.currentPath,"properties",o]})??{}}),{}),additionalProperties:!1};let r={type:"object",additionalProperties:dr(t.valueType._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]})??{}};if(e.target==="openApi3")return r;if(t.keyType?._def.typeName===ce.ZodString&&t.keyType._def.checks?.length){let{type:n,...o}=DK(t.keyType._def,e);return{...r,propertyNames:o}}else{if(t.keyType?._def.typeName===ce.ZodEnum)return{...r,propertyNames:{enum:t.keyType._def.values}};if(t.keyType?._def.typeName===ce.ZodBranded&&t.keyType._def.type._def.typeName===ce.ZodString&&t.keyType._def.type._def.checks?.length){let{type:n,...o}=jK(t.keyType._def,e);return{...r,propertyNames:o}}}return r}var kK=O(()=>{md();Rs();LK();NK()});function Rze(t,e){if(e.mapStrategy==="record")return FK(t,e);let r=dr(t.keyType._def,{...e,currentPath:[...e.currentPath,"items","items","0"]})||{},n=dr(t.valueType._def,{...e,currentPath:[...e.currentPath,"items","items","1"]})||{};return{type:"array",maxItems:125,items:{type:"array",items:[r,n],minItems:2,maxItems:2}}}var xpe=O(()=>{Rs();kK()});function jze(t){let e=t.values,n=Object.keys(t.values).filter(i=>typeof e[e[i]]!="number").map(i=>e[i]),o=Array.from(new Set(n.map(i=>typeof i)));return{type:o.length===1?o[0]==="string"?"string":"number":["string","number"],enum:n}}var Cpe=O(()=>{});function Nze(){return{not:{}}}var Ope=O(()=>{});function Dze(t){return t.target==="openApi3"?{enum:["null"],nullable:!0}:{type:"null"}}var Ppe=O(()=>{});function Fze(t,e){if(e.target==="openApi3")return Lze(t,e);let r=t.options instanceof Map?Array.from(t.options.values()):t.options;if(r.every(n=>n._def.typeName in Qz&&(!n._def.checks||!n._def.checks.length))){let n=r.reduce((o,i)=>{let a=Qz[i._def.typeName];return a&&!o.includes(a)?[...o,a]:o},[]);return{type:n.length>1?n:n[0]}}else if(r.every(n=>n._def.typeName==="ZodLiteral"&&!n.description)){let n=r.reduce((o,i)=>{let a=typeof i._def.value;switch(a){case"string":case"number":case"boolean":return[...o,a];case"bigint":return[...o,"integer"];case"object":if(i._def.value===null)return[...o,"null"];case"symbol":case"undefined":case"function":default:return o}},[]);if(n.length===r.length){let o=n.filter((i,a,s)=>s.indexOf(i)===a);return{type:o.length>1?o:o[0],enum:r.reduce((i,a)=>i.includes(a._def.value)?i:[...i,a._def.value],[])}}}else if(r.every(n=>n._def.typeName==="ZodEnum"))return{type:"string",enum:r.reduce((n,o)=>[...n,...o._def.values.filter(i=>!n.includes(i))],[])};return Lze(t,e)}var Qz,Lze,$K=O(()=>{Rs();Qz={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};Lze=(t,e)=>{let r=(t.options instanceof Map?Array.from(t.options.values()):t.options).map((n,o)=>dr(n._def,{...e,currentPath:[...e.currentPath,"anyOf",`${o}`]})).filter(n=>!!n&&(!e.strictUnions||typeof n=="object"&&Object.keys(n).length>0));return r.length?{anyOf:r}:void 0}});function kze(t,e){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(t.innerType._def.typeName)&&(!t.innerType._def.checks||!t.innerType._def.checks.length))return e.target==="openApi3"?{type:Qz[t.innerType._def.typeName],nullable:!0}:{type:[Qz[t.innerType._def.typeName],"null"]};if(e.target==="openApi3"){let n=dr(t.innerType._def,{...e,currentPath:[...e.currentPath]});return n&&"$ref"in n?{allOf:[n],nullable:!0}:n&&{...n,nullable:!0}}let r=dr(t.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","0"]});return r&&{anyOf:[r,{type:"null"}]}}var Epe=O(()=>{Rs();$K()});function $ze(t,e){let r={type:"number"};if(!t.checks)return r;for(let n of t.checks)switch(n.kind){case"int":r.type="integer",upe(r,"type",n.message,e);break;case"min":e.target==="jsonSchema7"?n.inclusive?Fn(r,"minimum",n.value,n.message,e):Fn(r,"exclusiveMinimum",n.value,n.message,e):(n.inclusive||(r.exclusiveMinimum=!0),Fn(r,"minimum",n.value,n.message,e));break;case"max":e.target==="jsonSchema7"?n.inclusive?Fn(r,"maximum",n.value,n.message,e):Fn(r,"exclusiveMaximum",n.value,n.message,e):(n.inclusive||(r.exclusiveMaximum=!0),Fn(r,"maximum",n.value,n.message,e));break;case"multipleOf":Fn(r,"multipleOf",n.value,n.message,e);break}return r}var Tpe=O(()=>{pE()});function JQt(t,e){return e.removeAdditionalStrategy==="strict"?t.catchall._def.typeName==="ZodNever"?t.unknownKeys!=="strict":dr(t.catchall._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]})??!0:t.catchall._def.typeName==="ZodNever"?t.unknownKeys==="passthrough":dr(t.catchall._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]})??!0}function Bze(t,e){let r=e.target==="openAi",n={type:"object",...Object.entries(t.shape()).reduce((o,[i,a])=>{if(a===void 0||a._def===void 0)return o;let s=a.isOptional();s&&r&&(a instanceof Xf&&(a=a._def.innerType),a.isNullable()||(a=a.nullable()),s=!1);let u=dr(a._def,{...e,currentPath:[...e.currentPath,"properties",i],propertyPath:[...e.currentPath,"properties",i]});return u===void 0?o:{properties:{...o.properties,[i]:u},required:s?o.required:[...o.required,i]}},{properties:{},required:[]}),additionalProperties:JQt(t,e)};return n.required.length||delete n.required,n}var Ape=O(()=>{md();Rs()});var qze,Ipe=O(()=>{Rs();qze=(t,e)=>{if(e.currentPath.toString()===e.propertyPath?.toString())return dr(t.innerType._def,e);let r=dr(t.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","1"]});return r?{anyOf:[{not:{}},r]}:{}}});var Uze,Mpe=O(()=>{Rs();Uze=(t,e)=>{if(e.pipeStrategy==="input")return dr(t.in._def,e);if(e.pipeStrategy==="output")return dr(t.out._def,e);let r=dr(t.in._def,{...e,currentPath:[...e.currentPath,"allOf","0"]}),n=dr(t.out._def,{...e,currentPath:[...e.currentPath,"allOf",r?"1":"0"]});return{allOf:[r,n].filter(o=>o!==void 0)}}});function zze(t,e){return dr(t.type._def,e)}var Rpe=O(()=>{Rs()});function Hze(t,e){let n={type:"array",uniqueItems:!0,items:dr(t.valueType._def,{...e,currentPath:[...e.currentPath,"items"]})};return t.minSize&&Fn(n,"minItems",t.minSize.value,t.minSize.message,e),t.maxSize&&Fn(n,"maxItems",t.maxSize.value,t.maxSize.message,e),n}var jpe=O(()=>{pE();Rs()});function Vze(t,e){return t.rest?{type:"array",minItems:t.items.length,items:t.items.map((r,n)=>dr(r._def,{...e,currentPath:[...e.currentPath,"items",`${n}`]})).reduce((r,n)=>n===void 0?r:[...r,n],[]),additionalItems:dr(t.rest._def,{...e,currentPath:[...e.currentPath,"additionalItems"]})}:{type:"array",minItems:t.items.length,maxItems:t.items.length,items:t.items.map((r,n)=>dr(r._def,{...e,currentPath:[...e.currentPath,"items",`${n}`]})).reduce((r,n)=>n===void 0?r:[...r,n],[])}}var Npe=O(()=>{Rs()});function Wze(){return{not:{}}}var Dpe=O(()=>{});function Kze(){return{}}var Lpe=O(()=>{});var Gze,Fpe=O(()=>{Rs();Gze=(t,e)=>dr(t.innerType._def,e)});function dr(t,e,r=!1){let n=e.seen.get(t);if(e.override){let a=e.override?.(t,e,n,r);if(a!==bze)return a}if(n&&!r){let a=YQt(n,e);if(a!==void 0)return a}let o={def:t,path:e.currentPath,jsonSchema:void 0};e.seen.set(t,o);let i=XQt(t,t.typeName,e);return i&&QQt(t,e,i),o.jsonSchema=i,i}var YQt,ZQt,XQt,QQt,Rs=O(()=>{md();lpe();cpe();dpe();fpe();NK();ppe();hpe();gpe();ype();bpe();_pe();vpe();xpe();Cpe();Ope();Ppe();Epe();Tpe();Ape();Ipe();Mpe();Rpe();kK();jpe();LK();Npe();Dpe();$K();Lpe();Fpe();RK();YQt=(t,e)=>{switch(e.$refStrategy){case"root":return{$ref:t.path.join("/")};case"relative":return{$ref:ZQt(e.currentPath,t.path)};case"none":case"seen":return t.path.length<e.currentPath.length&&t.path.every((r,n)=>e.currentPath[n]===r)?(console.warn(`Recursive reference detected at ${e.currentPath.join("/")}! Defaulting to any`),{}):e.$refStrategy==="seen"?{}:void 0}},ZQt=(t,e)=>{let r=0;for(;r<t.length&&r<e.length&&t[r]===e[r];r++);return[(t.length-r).toString(),...e.slice(r)].join("/")},XQt=(t,e,r)=>{switch(e){case ce.ZodString:return DK(t,r);case ce.ZodNumber:return $ze(t,r);case ce.ZodObject:return Bze(t,r);case ce.ZodBigInt:return xze(t,r);case ce.ZodBoolean:return Cze();case ce.ZodDate:return mpe(t,r);case ce.ZodUndefined:return Wze();case ce.ZodNull:return Dze(r);case ce.ZodArray:return Sze(t,r);case ce.ZodUnion:case ce.ZodDiscriminatedUnion:return Fze(t,r);case ce.ZodIntersection:return Aze(t,r);case ce.ZodTuple:return Vze(t,r);case ce.ZodRecord:return FK(t,r);case ce.ZodLiteral:return Ize(t,r);case ce.ZodEnum:return Tze(t);case ce.ZodNativeEnum:return jze(t);case ce.ZodNullable:return kze(t,r);case ce.ZodOptional:return qze(t,r);case ce.ZodMap:return Rze(t,r);case ce.ZodSet:return Hze(t,r);case ce.ZodLazy:return dr(t.getter()._def,r);case ce.ZodPromise:return zze(t,r);case ce.ZodNaN:case ce.ZodNever:return Nze();case ce.ZodEffects:return Eze(t,r);case ce.ZodAny:return wze();case ce.ZodUnknown:return Kze();case ce.ZodDefault:return Pze(t,r);case ce.ZodBranded:return jK(t,r);case ce.ZodReadonly:return Gze(t,r);case ce.ZodCatch:return Oze(t,r);case ce.ZodPipeline:return Uze(t,r);case ce.ZodFunction:case ce.ZodVoid:case ce.ZodSymbol:return;default:return(n=>{})(e)}},QQt=(t,e,r)=>(t.description&&(r.description=t.description,e.markdownDescription&&(r.markdownDescription=t.description)),r)});var ho,kpe=O(()=>{Rs();spe();ho=(t,e)=>{let r=vze(e),n=typeof e=="object"&&e.definitions?Object.entries(e.definitions).reduce((u,[l,c])=>({...u,[l]:dr(c._def,{...r,currentPath:[...r.basePath,r.definitionPath,l]},!0)??{}}),{}):void 0,o=typeof e=="string"?e:e?.nameStrategy==="title"?void 0:e?.name,i=dr(t._def,o===void 0?r:{...r,currentPath:[...r.basePath,r.definitionPath,o]},!1)??{},a=typeof e=="object"&&e.name!==void 0&&e.nameStrategy==="title"?e.name:void 0;a!==void 0&&(i.title=a);let s=o===void 0?n?{...i,[r.definitionPath]:n}:i:{$ref:[...r.$refStrategy==="relative"?[]:r.basePath,r.definitionPath,o].join("/"),[r.definitionPath]:{...n,[o]:i}};return r.target==="jsonSchema7"?s.$schema="http://json-schema.org/draft-07/schema#":(r.target==="jsonSchema2019-09"||r.target==="openAi")&&(s.$schema="https://json-schema.org/draft/2019-09/schema#"),r.target==="openAi"&&("anyOf"in s||"oneOf"in s||"allOf"in s||"type"in s&&Array.isArray(s.type))&&console.warn("Warning: OpenAI may not support schemas with unions as roots! Try wrapping it in an object property."),s}});var mc=O(()=>{RK();spe();pE();Rs();lpe();cpe();dpe();fpe();NK();ppe();hpe();gpe();ype();bpe();_pe();vpe();xpe();Cpe();Ope();Ppe();Epe();Tpe();Ape();Ipe();Mpe();Rpe();Fpe();kK();jpe();LK();Npe();Dpe();$K();Lpe();kpe();kpe()});function $pe(t){return t.replace(/[^a-zA-Z-_0-9]/g,"_")}function ter(t){let e="";for(let[r,n]of Object.entries(t))e+=`	classDef ${r} ${n};
`;return e}function Jze(t,e,r){let{firstNode:n,lastNode:o,nodeColors:i,withStyles:a=!0,curveStyle:s="linear",wrapLabelNWords:u=9}=r??{},l=a?`%%{init: {'flowchart': {'curve': '${s}'}}}%%
graph TD;
`:`graph TD;
`;if(a){let p="default",m={[p]:"{0}({1})"};n!==void 0&&(m[n]="{0}([{1}]):::first"),o!==void 0&&(m[o]="{0}([{1}]):::last");for(let[h,b]of Object.entries(t)){let g=b.name.split(":").pop()??"",w=eer.some(C=>g.startsWith(C)&&g.endsWith(C))?`<p>${g}</p>`:g;Object.keys(b.metadata??{}).length&&(w+=`<hr/><small><em>${Object.entries(b.metadata??{}).map(([C,P])=>`${C} = ${P}`).join(`
`)}</em></small>`);let S=(m[h]??m[p]).replace("{0}",$pe(h)).replace("{1}",w);l+=`	${S}
`}}let c={};for(let p of e){let m=p.source.split(":"),h=p.target.split(":"),b=m.filter((g,y)=>g===h[y]).join(":");c[b]||(c[b]=[]),c[b].push(p)}let d=new Set;function f(p,m){let h=p.length===1&&p[0].source===p[0].target;if(m&&!h){let b=m.split(":").pop();if(d.has(b))throw new Error(`Found duplicate subgraph '${b}' -- this likely means that you're reusing a subgraph node with the same name. Please adjust your graph to have subgraph nodes with unique names.`);d.add(b),l+=`	subgraph ${b}
`}for(let b of p){let{source:g,target:y,data:w,conditional:S}=b,C="";if(w!==void 0){let P=w,E=P.split(" ");E.length>u&&(P=Array.from({length:Math.ceil(E.length/u)},(A,I)=>E.slice(I*u,(I+1)*u).join(" ")).join("&nbsp;<br>&nbsp;")),C=S?` -. &nbsp;${P}&nbsp; .-> `:` -- &nbsp;${P}&nbsp; --> `}else C=S?" -.-> ":" --> ";l+=`	${$pe(g)}${C}${$pe(y)};
`}for(let b in c)b.startsWith(`${m}:`)&&b!==m&&f(c[b],b);m&&!h&&(l+=`	end
`)}f(c[""]??[],"");for(let p in c)!p.includes(":")&&p!==""&&f(c[p],p);return a&&(l+=ter(i??{})),l}async function Yze(t,e){let{backgroundColor:r="white"}=e??{},n=btoa(t);r!==void 0&&(/^#(?:[0-9a-fA-F]{3}){1,2}$/.test(r)||(r=`!${r}`));let o=`https://mermaid.ink/img/${n}?bgColor=${r}`,i=await fetch(o);if(!i.ok)throw new Error(["Failed to render the graph using the Mermaid.INK API.",`Status code: ${i.status}`,`Status text: ${i.statusText}`].join(`
`));return await i.blob()}var eer,Zze=O(()=>{eer=["*","_","`"]});function rer(t,e){if(t!==void 0&&!nE(t))return t;if(Xz(e))try{let r=e.getName();return r=r.startsWith("Runnable")?r.slice(8):r,r}catch{return e.getName()}else return e.name??"UnknownSchema"}function ner(t){return Xz(t.data)?{type:"runnable",data:{id:t.data.lc_id,name:t.data.getName()}}:{type:"schema",data:{...ho(t.data.schema),title:t.data.name}}}function Xze(t,e=[]){let r=new Set(t.edges.filter(o=>!e.includes(o.source)).map(o=>o.target)),n=[];for(let o of Object.values(t.nodes))!e.includes(o.id)&&!r.has(o.id)&&n.push(o);return n.length===1?n[0]:void 0}function Qze(t,e=[]){let r=new Set(t.edges.filter(o=>!e.includes(o.target)).map(o=>o.source)),n=[];for(let o of Object.values(t.nodes))!e.includes(o.id)&&!r.has(o.id)&&n.push(o);return n.length===1?n[0]:void 0}var e2,e2e=O(()=>{mc();oE();ape();Zze();e2=class t{constructor(e){Object.defineProperty(this,"nodes",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"edges",{enumerable:!0,configurable:!0,writable:!0,value:[]}),this.nodes=e?.nodes??this.nodes,this.edges=e?.edges??this.edges}toJSON(){let e={};return Object.values(this.nodes).forEach((r,n)=>{e[r.id]=nE(r.id)?n:r.id}),{nodes:Object.values(this.nodes).map(r=>({id:e[r.id],...ner(r)})),edges:this.edges.map(r=>{let n={source:e[r.source],target:e[r.target]};return typeof r.data<"u"&&(n.data=r.data),typeof r.conditional<"u"&&(n.conditional=r.conditional),n})}}addNode(e,r,n){if(r!==void 0&&this.nodes[r]!==void 0)throw new Error(`Node with id ${r} already exists`);let o=r??Qa(),i={id:o,data:e,name:rer(r,e),metadata:n};return this.nodes[o]=i,i}removeNode(e){delete this.nodes[e.id],this.edges=this.edges.filter(r=>r.source!==e.id&&r.target!==e.id)}addEdge(e,r,n,o){if(this.nodes[e.id]===void 0)throw new Error(`Source node ${e.id} not in graph`);if(this.nodes[r.id]===void 0)throw new Error(`Target node ${r.id} not in graph`);let i={source:e.id,target:r.id,data:n,conditional:o};return this.edges.push(i),i}firstNode(){return Xze(this)}lastNode(){return Qze(this)}extend(e,r=""){let n=r;Object.values(e.nodes).map(l=>l.id).every(nE)&&(n="");let i=l=>n?`${n}:${l}`:l;Object.entries(e.nodes).forEach(([l,c])=>{this.nodes[i(l)]={...c,id:i(l)}});let a=e.edges.map(l=>({...l,source:i(l.source),target:i(l.target)}));this.edges=[...this.edges,...a];let s=e.firstNode(),u=e.lastNode();return[s?{id:i(s.id),data:s.data}:void 0,u?{id:i(u.id),data:u.data}:void 0]}trimFirstNode(){let e=this.firstNode();e&&Xze(this,[e.id])&&this.removeNode(e)}trimLastNode(){let e=this.lastNode();e&&Qze(this,[e.id])&&this.removeNode(e)}reid(){let e=Object.fromEntries(Object.values(this.nodes).map(o=>[o.id,o.name])),r=new Map;Object.values(e).forEach(o=>{r.set(o,(r.get(o)||0)+1)});let n=o=>{let i=e[o];return nE(o)&&r.get(i)===1?i:o};return new t({nodes:Object.fromEntries(Object.entries(this.nodes).map(([o,i])=>[n(o),{...i,id:n(o)}])),edges:this.edges.map(o=>({...o,source:n(o.source),target:n(o.target)}))})}drawMermaid(e){let{withStyles:r,curveStyle:n,nodeColors:o={default:"fill:#f2f0ff,line-height:1.2",first:"fill-opacity:0",last:"fill:#bfb6fc"},wrapLabelNWords:i}=e??{},a=this.reid(),s=a.firstNode(),u=a.lastNode();return Jze(a.nodes,a.edges,{firstNode:s?.id,lastNode:u?.id,withStyles:r,curveStyle:n,nodeColors:o,wrapLabelNWords:i})}async drawMermaidPng(e){let r=this.drawMermaid(e);return Yze(r,{backgroundColor:e?.backgroundColor})}}});function t2e(t){let e=new TextEncoder,r=new ReadableStream({async start(n){for await(let o of t)n.enqueue(e.encode(`event: data
data: ${JSON.stringify(o)}

`));n.enqueue(e.encode(`event: end

`)),n.close()}});return vd.fromReadableStream(r)}var r2e=O(()=>{Pb()});function Bpe(t){return typeof t=="object"&&t!==null&&typeof t[Symbol.iterator]=="function"&&typeof t.next=="function"}function BK(t){return typeof t=="object"&&t!==null&&typeof t[Symbol.asyncIterator]=="function"}function*qpe(t,e){for(;;){let{value:r,done:n}=_d.runWithConfig(om(t),e.next.bind(e),!0);if(n)break;yield r}}async function*qK(t,e){let r=e[Symbol.asyncIterator]();for(;;){let{value:n,done:o}=await _d.runWithConfig(om(t),r.next.bind(e),!0);if(o)break;yield n}}var n2e,o2e=O(()=>{mL();Cb();n2e=t=>t!=null&&typeof t=="object"&&"next"in t&&typeof t.next=="function"});function pl(t,e){return t&&!Array.isArray(t)&&!(t instanceof Date)&&typeof t=="object"?t:{[e]:t}}function oer(t){if(lK(t))throw new Error("RunnableLambda requires a function that is not wrapped in traceable higher-order function. This shouldn't happen.")}function sC(t){if(typeof t=="function")return new _f({func:t});if(vn.isRunnable(t))return t;if(!Array.isArray(t)&&typeof t=="object"){let e={};for(let[r,n]of Object.entries(t))e[r]=sC(n);return new mE({steps:e})}else throw new Error(`Expected a Runnable, function or object.
Instead got an unsupported type.`)}function ier(t,e){let r=e.name??t.getName(),n=e.description??e.schema?.description;return e.schema.constructor===Vr.ZodString?new t2({name:r,description:n,schema:Vr.object({input:Vr.string()}).transform(o=>o.input),bound:t}):new t2({name:r,description:n,schema:e.schema,bound:t})}var Upe,vn,uC,UK,zK,di,mE,zpe,_f,HK,yL,VK,t2,vf=O(()=>{md();Upe=F(R9(),1);oE();Ife();fze();mze();UM();Pb();ope();Cb();gL();gze();ape();mL();e2e();r2e();o2e();_K();vn=class extends np{constructor(){super(...arguments),Object.defineProperty(this,"lc_runnable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}getName(e){let r=this.name??this.constructor.lc_name()??this.constructor.name;return e?`${r}${e}`:r}bind(e){return new uC({bound:this,kwargs:e,config:{}})}map(){return new UK({bound:this})}withRetry(e){return new zK({bound:this,kwargs:{},config:{},maxAttemptNumber:e?.stopAfterAttempt,...e})}withConfig(e){return new uC({bound:this,config:e,kwargs:{}})}withFallbacks(e){let r=Array.isArray(e)?e:e.fallbacks;return new HK({runnable:this,fallbacks:r})}_getOptionsList(e,r=0){if(Array.isArray(e)&&e.length!==r)throw new Error(`Passed "options" must be an array with the same length as the inputs, but got ${e.length} options for ${r} inputs`);if(Array.isArray(e))return e.map(an);if(r>1&&!Array.isArray(e)&&e.runId){console.warn("Provided runId will be used only for the first element of the batch.");let n=Object.fromEntries(Object.entries(e).filter(([o])=>o!=="runId"));return Array.from({length:r},(o,i)=>an(i===0?e:n))}return Array.from({length:r},()=>an(e))}async batch(e,r,n){let o=this._getOptionsList(r??{},e.length),i=o[0]?.maxConcurrency??n?.maxConcurrency,a=new im({maxConcurrency:i,onFailedAttempt:u=>{throw u}}),s=e.map((u,l)=>a.call(async()=>{try{return await this.invoke(u,o[l])}catch(c){if(n?.returnExceptions)return c;throw c}}));return Promise.all(s)}async*_streamIterator(e,r){yield this.invoke(e,r)}async stream(e,r){let n=an(r),o=new aC({generator:this._streamIterator(e,n),config:n});return await o.setup,vd.fromAsyncGenerator(o)}_separateRunnableConfigFromCallOptions(e){let r;e===void 0?r=an(e):r=an({callbacks:e.callbacks,tags:e.tags,metadata:e.metadata,runName:e.runName,configurable:e.configurable,recursionLimit:e.recursionLimit,maxConcurrency:e.maxConcurrency,runId:e.runId,timeout:e.timeout,signal:e.signal});let n={...e};return delete n.callbacks,delete n.tags,delete n.metadata,delete n.runName,delete n.configurable,delete n.recursionLimit,delete n.maxConcurrency,delete n.runId,delete n.timeout,delete n.signal,[r,n]}async _callWithConfig(e,r,n){let o=an(n),a=await(await ap(o))?.handleChainStart(this.toJSON(),pl(r,"input"),o.runId,o?.runType,void 0,void 0,o?.runName??this.getName());delete o.runId;let s;try{let u=e.call(this,r,o,a);s=await Ob(u,n?.signal)}catch(u){throw await a?.handleChainError(u),u}return await a?.handleChainEnd(pl(s,"output")),s}async _batchWithConfig(e,r,n,o){let i=this._getOptionsList(n??{},r.length),a=await Promise.all(i.map(ap)),s=await Promise.all(a.map(async(l,c)=>{let d=await l?.handleChainStart(this.toJSON(),pl(r[c],"input"),i[c].runId,i[c].runType,void 0,void 0,i[c].runName??this.getName());return delete i[c].runId,d})),u;try{let l=e.call(this,r,i,s,o);u=await Ob(l,i?.[0]?.signal)}catch(l){throw await Promise.all(s.map(c=>c?.handleChainError(l))),l}return await Promise.all(s.map(l=>l?.handleChainEnd(pl(u,"output")))),u}async*_transformStreamWithConfig(e,r,n){let o,i=!0,a,s=!0,u=an(n),l=await ap(u);async function*c(){for await(let f of e){if(i)if(o===void 0)o=f;else try{o=jl(o,f)}catch{o=void 0,i=!1}yield f}}let d;try{let f=await uze(r.bind(this),c(),async()=>l?.handleChainStart(this.toJSON(),{input:""},u.runId,u.runType,void 0,void 0,u.runName??this.getName()),n?.signal,u);delete u.runId,d=f.setup;let p=d?.handlers.find(pze),m=f.output;p!==void 0&&d!==void 0&&(m=p.tapOutputIterable(d.runId,m));let h=d?.handlers.find(dze);h!==void 0&&d!==void 0&&(m=h.tapOutputIterable(d.runId,m));for await(let b of m)if(yield b,s)if(a===void 0)a=b;else try{a=jl(a,b)}catch{a=void 0,s=!1}}catch(f){throw await d?.handleChainError(f,void 0,void 0,void 0,{inputs:pl(o,"input")}),f}await d?.handleChainEnd(a??{},void 0,void 0,void 0,{inputs:pl(o,"input")})}getGraph(e){let r=new e2,n=r.addNode({name:`${this.getName()}Input`,schema:Vr.any()}),o=r.addNode(this),i=r.addNode({name:`${this.getName()}Output`,schema:Vr.any()});return r.addEdge(n,o),r.addEdge(o,i),r}pipe(e){return new di({first:this,last:sC(e)})}pick(e){return this.pipe(new VK(e))}assign(e){return this.pipe(new yL(new mE({steps:e})))}async*transform(e,r){let n;for await(let o of e)n===void 0?n=o:n=jl(n,o);yield*this._streamIterator(n,an(r))}async*streamLog(e,r,n){let o=new Jz({...n,autoClose:!1,_schemaFormat:"original"}),i=an(r);yield*this._streamLog(e,o,i)}async*_streamLog(e,r,n){let{callbacks:o}=n;if(o===void 0)n.callbacks=[r];else if(Array.isArray(o))n.callbacks=o.concat([r]);else{let u=o.copy();u.addHandler(r,!0),n.callbacks=u}let i=this.stream(e,n);async function a(){try{let u=await i;for await(let l of u){let c=new Kg({ops:[{op:"add",path:"/streamed_output/-",value:l}]});await r.writer.write(c)}}finally{await r.writer.close()}}let s=a();try{for await(let u of r)yield u}finally{await s}}streamEvents(e,r,n){let o;if(r.version==="v1")o=this._streamEventsV1(e,r,n);else if(r.version==="v2")o=this._streamEventsV2(e,r,n);else throw new Error('Only versions "v1" and "v2" of the schema are currently supported.');return r.encoding==="text/event-stream"?t2e(o):vd.fromAsyncGenerator(o)}async*_streamEventsV2(e,r,n){let o=new AK({...n,autoClose:!1}),i=an(r),a=i.runId??Qa();i.runId=a;let s=i.callbacks;if(s===void 0)i.callbacks=[o];else if(Array.isArray(s))i.callbacks=s.concat(o);else{let m=s.copy();m.addHandler(o,!0),i.callbacks=m}let u=new AbortController,l=this;async function c(){try{let m;r?.signal?"any"in AbortSignal?m=AbortSignal.any([u.signal,r.signal]):(m=r.signal,r.signal.addEventListener("abort",()=>{u.abort()},{once:!0})):m=u.signal;let h=await l.stream(e,{...i,signal:m}),b=o.tapOutputIterable(a,h);for await(let g of b)if(u.signal.aborted)break}finally{await o.finish()}}let d=c(),f=!1,p;try{for await(let m of o){if(!f){m.data.input=e,f=!0,p=m.run_id,yield m;continue}m.run_id===p&&m.event.endsWith("_end")&&m.data?.input&&delete m.data.input,yield m}}finally{u.abort(),await d}}async*_streamEventsV1(e,r,n){let o,i=!1,a=an(r),s=a.tags??[],u=a.metadata??{},l=a.runName??this.getName(),c=new Jz({...n,autoClose:!1,_schemaFormat:"streaming_events"}),d=new MK({...n}),f=this._streamLog(e,c,a);for await(let m of f){if(o?o=o.concat(m):o=Gz.fromRunLogPatch(m),o.state===void 0)throw new Error('Internal error: "streamEvents" state is missing. Please open a bug report.');if(!i){i=!0;let y={...o.state},w={run_id:y.id,event:`on_${y.type}_start`,name:l,tags:s,metadata:u,data:{input:e}};d.includeEvent(w,y.type)&&(yield w)}let h=m.ops.filter(y=>y.path.startsWith("/logs/")).map(y=>y.path.split("/")[2]),b=[...new Set(h)];for(let y of b){let w,S={},C=o.state.logs[y];if(C.end_time===void 0?C.streamed_output.length>0?w="stream":w="start":w="end",w==="start")C.inputs!==void 0&&(S.input=C.inputs);else if(w==="end")C.inputs!==void 0&&(S.input=C.inputs),S.output=C.final_output;else if(w==="stream"){let P=C.streamed_output.length;if(P!==1)throw new Error(`Expected exactly one chunk of streamed output, got ${P} instead. Encountered in: "${C.name}"`);S={chunk:C.streamed_output[0]},C.streamed_output=[]}yield{event:`on_${C.type}_${w}`,name:C.name,run_id:C.id,tags:C.tags,metadata:C.metadata,data:S}}let{state:g}=o;if(g.streamed_output.length>0){let y=g.streamed_output.length;if(y!==1)throw new Error(`Expected exactly one chunk of streamed output, got ${y} instead. Encountered in: "${g.name}"`);let w={chunk:g.streamed_output[0]};g.streamed_output=[];let S={event:`on_${g.type}_stream`,run_id:g.id,tags:s,metadata:u,name:l,data:w};d.includeEvent(S,g.type)&&(yield S)}}let p=o?.state;if(p!==void 0){let m={event:`on_${p.type}_end`,name:l,run_id:p.id,tags:s,metadata:u,data:{output:p.final_output}};d.includeEvent(m,p.type)&&(yield m)}}static isRunnable(e){return Xz(e)}withListeners({onStart:e,onEnd:r,onError:n}){return new uC({bound:this,config:{},configFactories:[o=>({callbacks:[new Zz({config:o,onStart:e,onEnd:r,onError:n})]})]})}asTool(e){return ier(this,e)}},uC=class t extends vn{static lc_name(){return"RunnableBinding"}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"bound",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"config",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"configFactories",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.bound=e.bound,this.kwargs=e.kwargs,this.config=e.config,this.configFactories=e.configFactories}getName(e){return this.bound.getName(e)}async _mergeConfig(...e){let r=EK(this.config,...e);return EK(r,...this.configFactories?await Promise.all(this.configFactories.map(async n=>await n(r))):[])}bind(e){return new this.constructor({bound:this.bound,kwargs:{...this.kwargs,...e},config:this.config})}withConfig(e){return new this.constructor({bound:this.bound,kwargs:this.kwargs,config:{...this.config,...e}})}withRetry(e){return new this.constructor({bound:this.bound.withRetry(e),kwargs:this.kwargs,config:this.config})}async invoke(e,r){return this.bound.invoke(e,await this._mergeConfig(an(r),this.kwargs))}async batch(e,r,n){let o=Array.isArray(r)?await Promise.all(r.map(async i=>this._mergeConfig(an(i),this.kwargs))):await this._mergeConfig(an(r),this.kwargs);return this.bound.batch(e,o,n)}async*_streamIterator(e,r){yield*this.bound._streamIterator(e,await this._mergeConfig(an(r),this.kwargs))}async stream(e,r){return this.bound.stream(e,await this._mergeConfig(an(r),this.kwargs))}async*transform(e,r){yield*this.bound.transform(e,await this._mergeConfig(an(r),this.kwargs))}streamEvents(e,r,n){let o=this,i=async function*(){yield*o.bound.streamEvents(e,{...await o._mergeConfig(an(r),o.kwargs),version:r.version},n)};return vd.fromAsyncGenerator(i())}static isRunnableBinding(e){return e.bound&&vn.isRunnable(e.bound)}withListeners({onStart:e,onEnd:r,onError:n}){return new t({bound:this.bound,kwargs:this.kwargs,config:this.config,configFactories:[o=>({callbacks:[new Zz({config:o,onStart:e,onEnd:r,onError:n})]})]})}},UK=class t extends vn{static lc_name(){return"RunnableEach"}constructor(e){super(e),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"bound",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.bound=e.bound}bind(e){return new t({bound:this.bound.bind(e)})}async invoke(e,r){return this._callWithConfig(this._invoke.bind(this),e,r)}async _invoke(e,r,n){return this.bound.batch(e,ts(r,{callbacks:n?.getChild()}))}withListeners({onStart:e,onEnd:r,onError:n}){return new t({bound:this.bound.withListeners({onStart:e,onEnd:r,onError:n})})}},zK=class extends uC{static lc_name(){return"RunnableRetry"}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"maxAttemptNumber",{enumerable:!0,configurable:!0,writable:!0,value:3}),Object.defineProperty(this,"onFailedAttempt",{enumerable:!0,configurable:!0,writable:!0,value:()=>{}}),this.maxAttemptNumber=e.maxAttemptNumber??this.maxAttemptNumber,this.onFailedAttempt=e.onFailedAttempt??this.onFailedAttempt}_patchConfigForRetry(e,r,n){let o=e>1?`retry:attempt:${e}`:void 0;return ts(r,{callbacks:n?.getChild(o)})}async _invoke(e,r,n){return(0,Upe.default)(o=>super.invoke(e,this._patchConfigForRetry(o,r,n)),{onFailedAttempt:o=>this.onFailedAttempt(o,e),retries:Math.max(this.maxAttemptNumber-1,0),randomize:!0})}async invoke(e,r){return this._callWithConfig(this._invoke.bind(this),e,r)}async _batch(e,r,n,o){let i={};try{await(0,Upe.default)(async a=>{let s=e.map((f,p)=>p).filter(f=>i[f.toString()]===void 0||i[f.toString()]instanceof Error),u=s.map(f=>e[f]),l=s.map(f=>this._patchConfigForRetry(a,r?.[f],n?.[f])),c=await super.batch(u,l,{...o,returnExceptions:!0}),d;for(let f=0;f<c.length;f+=1){let p=c[f],m=s[f];p instanceof Error&&d===void 0&&(d=p,d.input=u[f]),i[m.toString()]=p}if(d)throw d;return c},{onFailedAttempt:a=>this.onFailedAttempt(a,a.input),retries:Math.max(this.maxAttemptNumber-1,0),randomize:!0})}catch(a){if(o?.returnExceptions!==!0)throw a}return Object.keys(i).sort((a,s)=>parseInt(a,10)-parseInt(s,10)).map(a=>i[parseInt(a,10)])}async batch(e,r,n){return this._batchWithConfig(this._batch.bind(this),e,r,n)}},di=class t extends vn{static lc_name(){return"RunnableSequence"}constructor(e){super(e),Object.defineProperty(this,"first",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"middle",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"last",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"omitSequenceTags",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),this.first=e.first,this.middle=e.middle??this.middle,this.last=e.last,this.name=e.name,this.omitSequenceTags=e.omitSequenceTags??this.omitSequenceTags}get steps(){return[this.first,...this.middle,this.last]}async invoke(e,r){let n=an(r),i=await(await ap(n))?.handleChainStart(this.toJSON(),pl(e,"input"),n.runId,void 0,void 0,void 0,n?.runName);delete n.runId;let a=e,s;try{let u=[this.first,...this.middle];for(let l=0;l<u.length;l+=1){let d=u[l].invoke(a,ts(n,{callbacks:i?.getChild(this.omitSequenceTags?void 0:`seq:step:${l+1}`)}));a=await Ob(d,r?.signal)}if(r?.signal?.aborted)throw new Error("Aborted");s=await this.last.invoke(a,ts(n,{callbacks:i?.getChild(this.omitSequenceTags?void 0:`seq:step:${this.steps.length}`)}))}catch(u){throw await i?.handleChainError(u),u}return await i?.handleChainEnd(pl(s,"output")),s}async batch(e,r,n){let o=this._getOptionsList(r??{},e.length),i=await Promise.all(o.map(ap)),a=await Promise.all(i.map(async(u,l)=>{let c=await u?.handleChainStart(this.toJSON(),pl(e[l],"input"),o[l].runId,void 0,void 0,void 0,o[l].runName);return delete o[l].runId,c})),s=e;try{for(let u=0;u<this.steps.length;u+=1){let c=this.steps[u].batch(s,a.map((d,f)=>{let p=d?.getChild(this.omitSequenceTags?void 0:`seq:step:${u+1}`);return ts(o[f],{callbacks:p})}),n);s=await Ob(c,o[0]?.signal)}}catch(u){throw await Promise.all(a.map(l=>l?.handleChainError(u))),u}return await Promise.all(a.map(u=>u?.handleChainEnd(pl(s,"output")))),s}async*_streamIterator(e,r){let n=await ap(r),{runId:o,...i}=r??{},a=await n?.handleChainStart(this.toJSON(),pl(e,"input"),o,void 0,void 0,void 0,i?.runName),s=[this.first,...this.middle,this.last],u=!0,l;async function*c(){yield e}try{let d=s[0].transform(c(),ts(i,{callbacks:a?.getChild(this.omitSequenceTags?void 0:"seq:step:1")}));for(let f=1;f<s.length;f+=1)d=await s[f].transform(d,ts(i,{callbacks:a?.getChild(this.omitSequenceTags?void 0:`seq:step:${f+1}`)}));for await(let f of d)if(r?.signal?.throwIfAborted(),yield f,u)if(l===void 0)l=f;else try{l=jl(l,f)}catch{l=void 0,u=!1}}catch(d){throw await a?.handleChainError(d),d}await a?.handleChainEnd(pl(l,"output"))}getGraph(e){let r=new e2,n=null;return this.steps.forEach((o,i)=>{let a=o.getGraph(e);i!==0&&a.trimFirstNode(),i!==this.steps.length-1&&a.trimLastNode(),r.extend(a);let s=a.firstNode();if(!s)throw new Error(`Runnable ${o} has no first node`);n&&r.addEdge(n,s),n=a.lastNode()}),r}pipe(e){return t.isRunnableSequence(e)?new t({first:this.first,middle:this.middle.concat([this.last,e.first,...e.middle]),last:e.last,name:this.name??e.name}):new t({first:this.first,middle:[...this.middle,this.last],last:sC(e),name:this.name})}static isRunnableSequence(e){return Array.isArray(e.middle)&&vn.isRunnable(e)}static from([e,...r],n){let o={};return typeof n=="string"?o.name=n:n!==void 0&&(o=n),new t({...o,first:sC(e),middle:r.slice(0,-1).map(sC),last:sC(r[r.length-1])})}},mE=class t extends vn{static lc_name(){return"RunnableMap"}getStepsKeys(){return Object.keys(this.steps)}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"steps",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.steps={};for(let[r,n]of Object.entries(e.steps))this.steps[r]=sC(n)}static from(e){return new t({steps:e})}async invoke(e,r){let n=an(r),i=await(await ap(n))?.handleChainStart(this.toJSON(),{input:e},n.runId,void 0,void 0,void 0,n?.runName);delete n.runId;let a={};try{let s=Object.entries(this.steps).map(async([u,l])=>{a[u]=await l.invoke(e,ts(n,{callbacks:i?.getChild(`map:key:${u}`)}))});await Ob(Promise.all(s),r?.signal)}catch(s){throw await i?.handleChainError(s),s}return await i?.handleChainEnd(a),a}async*_transform(e,r,n){let o={...this.steps},i=ipe(e,Object.keys(o).length),a=new Map(Object.entries(o).map(([s,u],l)=>{let c=u.transform(i[l],ts(n,{callbacks:r?.getChild(`map:key:${s}`)}));return[s,c.next().then(d=>({key:s,gen:c,result:d}))]}));for(;a.size;){let s=Promise.race(a.values()),{key:u,result:l,gen:c}=await Ob(s,n?.signal);a.delete(u),l.done||(yield{[u]:l.value},a.set(u,c.next().then(d=>({key:u,gen:c,result:d}))))}}transform(e,r){return this._transformStreamWithConfig(e,this._transform.bind(this),r)}async stream(e,r){async function*n(){yield e}let o=an(r),i=new aC({generator:this.transform(n(),o),config:o});return await i.setup,vd.fromAsyncGenerator(i)}},zpe=class t extends vn{constructor(e){if(super(e),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"func",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),!lK(e.func))throw new Error("RunnableTraceable requires a function that is wrapped in traceable higher-order function");this.func=e.func}async invoke(e,r){let[n]=this._getOptionsList(r??{},1),o=await ap(n),i=this.func(ts(n,{callbacks:o}),e);return Ob(i,n?.signal)}async*_streamIterator(e,r){let[n]=this._getOptionsList(r??{},1),o=await this.invoke(e,r);if(BK(o)){for await(let i of o)n?.signal?.throwIfAborted(),yield i;return}if(n2e(o)){for(;;){n?.signal?.throwIfAborted();let i=o.next();if(i.done)break;yield i.value}return}yield o}static from(e){return new t({func:e})}};_f=class t extends vn{static lc_name(){return"RunnableLambda"}constructor(e){if(lK(e.func))return zpe.from(e.func);super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"func",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),oer(e.func),this.func=e.func}static from(e){return new t({func:e})}async _invoke(e,r,n){return new Promise((o,i)=>{let a=ts(r,{callbacks:n?.getChild(),recursionLimit:(r?.recursionLimit??PK)-1});_d.runWithConfig(om(a),async()=>{try{let s=await this.func(e,{...a});if(s&&vn.isRunnable(s)){if(r?.recursionLimit===0)throw new Error("Recursion limit reached.");s=await s.invoke(e,{...a,recursionLimit:(a.recursionLimit??PK)-1})}else if(BK(s)){let u;for await(let l of qK(a,s))if(r?.signal?.throwIfAborted(),u===void 0)u=l;else try{u=jl(u,l)}catch{u=l}s=u}else if(Bpe(s)){let u;for(let l of qpe(a,s))if(r?.signal?.throwIfAborted(),u===void 0)u=l;else try{u=jl(u,l)}catch{u=l}s=u}o(s)}catch(s){i(s)}})})}async invoke(e,r){return this._callWithConfig(this._invoke.bind(this),e,r)}async*_transform(e,r,n){let o;for await(let s of e)if(o===void 0)o=s;else try{o=jl(o,s)}catch{o=s}let i=ts(n,{callbacks:r?.getChild(),recursionLimit:(n?.recursionLimit??PK)-1}),a=await new Promise((s,u)=>{_d.runWithConfig(om(i),async()=>{try{let l=await this.func(o,{...i,config:i});s(l)}catch(l){u(l)}})});if(a&&vn.isRunnable(a)){if(n?.recursionLimit===0)throw new Error("Recursion limit reached.");let s=await a.stream(o,i);for await(let u of s)yield u}else if(BK(a))for await(let s of qK(i,a))n?.signal?.throwIfAborted(),yield s;else if(Bpe(a))for(let s of qpe(i,a))n?.signal?.throwIfAborted(),yield s;else yield a}transform(e,r){return this._transformStreamWithConfig(e,this._transform.bind(this),r)}async stream(e,r){async function*n(){yield e}let o=an(r),i=new aC({generator:this.transform(n(),o),config:o});return await i.setup,vd.fromAsyncGenerator(i)}},HK=class extends vn{static lc_name(){return"RunnableWithFallbacks"}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"runnable",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fallbacks",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.runnable=e.runnable,this.fallbacks=e.fallbacks}*runnables(){yield this.runnable;for(let e of this.fallbacks)yield e}async invoke(e,r){let n=an(r),o=await ap(n),{runId:i,...a}=n,s=await o?.handleChainStart(this.toJSON(),pl(e,"input"),i,void 0,void 0,void 0,a?.runName),u=ts(a,{callbacks:s?.getChild()});return await _d.runWithConfig(u,async()=>{let c;for(let d of this.runnables()){n?.signal?.throwIfAborted();try{let f=await d.invoke(e,u);return await s?.handleChainEnd(pl(f,"output")),f}catch(f){c===void 0&&(c=f)}}throw c===void 0?new Error("No error stored at end of fallback."):(await s?.handleChainError(c),c)})}async*_streamIterator(e,r){let n=an(r),o=await ap(n),{runId:i,...a}=n,s=await o?.handleChainStart(this.toJSON(),pl(e,"input"),i,void 0,void 0,void 0,a?.runName),u,l;for(let d of this.runnables()){n?.signal?.throwIfAborted();let f=ts(a,{callbacks:s?.getChild()});try{let p=await d.stream(e,f);l=qK(f,p);break}catch(p){u===void 0&&(u=p)}}if(l===void 0){let d=u??new Error("No error stored at end of fallback.");throw await s?.handleChainError(d),d}let c;try{for await(let d of l){yield d;try{c=c===void 0?c:jl(c,d)}catch{c=void 0}}}catch(d){throw await s?.handleChainError(d),d}await s?.handleChainEnd(pl(c,"output"))}async batch(e,r,n){if(n?.returnExceptions)throw new Error("Not implemented.");let o=this._getOptionsList(r??{},e.length),i=await Promise.all(o.map(u=>ap(u))),a=await Promise.all(i.map(async(u,l)=>{let c=await u?.handleChainStart(this.toJSON(),pl(e[l],"input"),o[l].runId,void 0,void 0,void 0,o[l].runName);return delete o[l].runId,c})),s;for(let u of this.runnables()){o[0].signal?.throwIfAborted();try{let l=await u.batch(e,a.map((c,d)=>ts(o[d],{callbacks:c?.getChild()})),n);return await Promise.all(a.map((c,d)=>c?.handleChainEnd(pl(l[d],"output")))),l}catch(l){s===void 0&&(s=l)}}throw s?(await Promise.all(a.map(u=>u?.handleChainError(s))),s):new Error("No error stored at end of fallbacks.")}};yL=class extends vn{static lc_name(){return"RunnableAssign"}constructor(e){e instanceof mE&&(e={mapper:e}),super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"mapper",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.mapper=e.mapper}async invoke(e,r){let n=await this.mapper.invoke(e,r);return{...e,...n}}async*_transform(e,r,n){let o=this.mapper.getStepsKeys(),[i,a]=ipe(e),s=this.mapper.transform(a,ts(n,{callbacks:r?.getChild()})),u=s.next();for await(let l of i){if(typeof l!="object"||Array.isArray(l))throw new Error(`RunnableAssign can only be used with objects as input, got ${typeof l}`);let c=Object.fromEntries(Object.entries(l).filter(([d])=>!o.includes(d)));Object.keys(c).length>0&&(yield c)}yield(await u).value;for await(let l of s)yield l}transform(e,r){return this._transformStreamWithConfig(e,this._transform.bind(this),r)}async stream(e,r){async function*n(){yield e}let o=an(r),i=new aC({generator:this.transform(n(),o),config:o});return await i.setup,vd.fromAsyncGenerator(i)}},VK=class extends vn{static lc_name(){return"RunnablePick"}constructor(e){(typeof e=="string"||Array.isArray(e))&&(e={keys:e}),super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"keys",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.keys=e.keys}async _pick(e){if(typeof this.keys=="string")return e[this.keys];{let r=this.keys.map(n=>[n,e[n]]).filter(n=>n[1]!==void 0);return r.length===0?void 0:Object.fromEntries(r)}}async invoke(e,r){return this._callWithConfig(this._pick.bind(this),e,r)}async*_transform(e){for await(let r of e){let n=await this._pick(r);n!==void 0&&(yield n)}}transform(e,r){return this._transformStreamWithConfig(e,this._transform.bind(this),r)}async stream(e,r){async function*n(){yield e}let o=an(r),i=new aC({generator:this.transform(n(),o),config:o});return await i.setup,vd.fromAsyncGenerator(i)}},t2=class extends uC{constructor(e){let r=di.from([_f.from(async n=>{let o;if(uE(n))try{o=await this.schema.parseAsync(n.args)}catch{throw new WM("Received tool input did not match expected schema",JSON.stringify(n.args))}else o=n;return o}).withConfig({runName:`${e.name}:parse_input`}),e.bound]).withConfig({runName:e.name});super({bound:r,config:e.config??{}}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"description",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"schema",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=e.name,this.description=e.description,this.schema=e.schema}static lc_name(){return"RunnableToolLike"}}});var lo,WK=O(()=>{Pb();vf();Cb();lo=class extends vn{static lc_name(){return"RunnablePassthrough"}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"func",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),e&&(this.func=e.func)}async invoke(e,r){let n=an(r);return this.func&&await this.func(e,n),this._callWithConfig(o=>Promise.resolve(o),e,n)}async*transform(e,r){let n=an(r),o,i=!0;for await(let a of this._transformStreamWithConfig(e,s=>s,n))if(yield a,i)if(o===void 0)o=a;else try{o=jl(o,a)}catch{o=void 0,i=!1}this.func&&o!==void 0&&await this.func(o,n)}static assign(e){return new yL(new mE({steps:e}))}}});var i2e=O(()=>{vf();Cb()});var a2e=O(()=>{vf();Cb();Pb()});var Hpe=O(()=>{fh()});var s2e=O(()=>{vf();KM();fh();vK();wK();Hz();Hpe();SK();dL();cE()});var YM=O(()=>{KM();fh();vK();wK();Hz();SK();cE();s2e();Hpe();Hfe();dL()});var u2e=O(()=>{YM();vf();WK()});var Vpe=O(()=>{vf();Cb();WK();i2e();a2e();u2e()});var ZM,XM,am,bL=O(()=>{Vpe();Uz();ZM=class extends vn{parseResultWithPrompt(e,r,n){return this.parseResult(e,n)}_baseMessageToString(e){return typeof e.content=="string"?e.content:this._baseMessageContentToString(e.content)}_baseMessageContentToString(e){return JSON.stringify(e)}async invoke(e,r){return typeof e=="string"?this._callWithConfig(async(n,o)=>this.parseResult([{text:n}],o?.callbacks),e,{...r,runType:"parser"}):this._callWithConfig(async(n,o)=>this.parseResult([{message:n,text:this._baseMessageToString(n)}],o?.callbacks),e,{...r,runType:"parser"})}},XM=class extends ZM{parseResult(e,r){return this.parse(e[0].text,r)}async parseWithPrompt(e,r,n){return this.parse(e,n)}_type(){throw new Error("_type not implemented")}},am=class extends Error{constructor(e,r,n,o=!1){if(super(e),Object.defineProperty(this,"llmOutput",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"observation",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sendToLLM",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.llmOutput=r,this.observation=n,this.sendToLLM=o,o&&(n===void 0||r===void 0))throw new Error("Arguments 'observation' & 'llmOutput' are required if 'sendToLlm' is true");sE(this,"OUTPUT_PARSING_FAILURE")}}});function lC(t,e){let r=typeof t;if(r!==typeof e)return!1;if(Array.isArray(t)){if(!Array.isArray(e))return!1;let n=t.length;if(n!==e.length)return!1;for(let o=0;o<n;o++)if(!lC(t[o],e[o]))return!1;return!0}if(r==="object"){if(!t||!e)return t===e;let n=Object.keys(t),o=Object.keys(e);if(n.length!==o.length)return!1;for(let a of n)if(!lC(t[a],e[a]))return!1;return!0}return t===e}var Wpe=O(()=>{});function sm(t){return encodeURI(aer(t))}function aer(t){return t.replace(/~/g,"~0").replace(/\//g,"~1")}var KK=O(()=>{});function cC(t,e=Object.create(null),r=cer,n=""){if(t&&typeof t=="object"&&!Array.isArray(t)){let i=t.$id||t.id;if(i){let a=new URL(i,r.href);a.hash.length>1?e[a.href]=t:(a.hash="",n===""?r=a:cC(t,e,r))}}else if(t!==!0&&t!==!1)return e;let o=r.href+(n?"#"+n:"");if(e[o]!==void 0)throw new Error(`Duplicate schema URI "${o}".`);if(e[o]=t,t===!0||t===!1)return e;if(t.__absolute_uri__===void 0&&Object.defineProperty(t,"__absolute_uri__",{enumerable:!1,value:o}),t.$ref&&t.__absolute_ref__===void 0){let i=new URL(t.$ref,r.href);i.hash=i.hash,Object.defineProperty(t,"__absolute_ref__",{enumerable:!1,value:i.href})}if(t.$recursiveRef&&t.__absolute_recursive_ref__===void 0){let i=new URL(t.$recursiveRef,r.href);i.hash=i.hash,Object.defineProperty(t,"__absolute_recursive_ref__",{enumerable:!1,value:i.href})}if(t.$anchor){let i=new URL("#"+t.$anchor,r.href);e[i.href]=t}for(let i in t){if(ler[i])continue;let a=`${n}/${sm(i)}`,s=t[i];if(Array.isArray(s)){if(ser[i]){let u=s.length;for(let l=0;l<u;l++)cC(s[l],e,r,`${a}/${l}`)}}else if(uer[i])for(let u in s)cC(s[u],e,r,`${a}/${sm(u)}`);else cC(s,e,r,a)}return e}var ser,uer,ler,cer,GK=O(()=>{KK();ser={prefixItems:!0,items:!0,allOf:!0,anyOf:!0,oneOf:!0},uer={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependentSchemas:!0},ler={id:!0,$id:!0,$ref:!0,$schema:!0,$anchor:!0,$vocabulary:!0,$comment:!0,default:!0,enum:!0,const:!0,required:!0,type:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0},cer=typeof self<"u"&&self.location&&self.location.origin!=="null"?new URL(self.location.origin+self.location.pathname+location.search):new URL("https://github.com/cfworker")});function up(t){return t.test.bind(t)}function Mer(t){return t%4===0&&(t%100!==0||t%400===0)}function l2e(t){let e=t.match(der);if(!e)return!1;let r=+e[1],n=+e[2],o=+e[3];return n>=1&&n<=12&&o>=1&&o<=(n==2&&Mer(r)?29:fer[n])}function c2e(t,e){let r=e.match(per);if(!r)return!1;let n=+r[1],o=+r[2],i=+r[3],a=!!r[5];return(n<=23&&o<=59&&i<=59||n==23&&o==59&&i==60)&&(!t||a)}function jer(t){let e=t.split(Rer);return e.length==2&&l2e(e[0])&&c2e(!0,e[1])}function Ler(t){return Ner.test(t)&&Der.test(t)}function ker(t){if(Fer.test(t))return!1;try{return new RegExp(t,"u"),!0}catch{return!1}}var der,fer,per,mer,her,ger,yer,ber,_er,ver,wer,Ser,xer,Cer,Oer,Per,Eer,Ter,Aer,Ier,Kpe,Rer,Ner,Der,Fer,Gpe=O(()=>{der=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,fer=[0,31,28,31,30,31,30,31,31,30,31,30,31],per=/^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d(?::?\d\d)?)?$/i,mer=/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,her=/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,ger=/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,yer=/^(?:(?:https?|ftp):\/\/)(?:\S+(?::\S*)?@)?(?:(?!10(?:\.\d{1,3}){3})(?!127(?:\.\d{1,3}){3})(?!169\.254(?:\.\d{1,3}){2})(?!192\.168(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u{00a1}-\u{ffff}0-9]+-?)*[a-z\u{00a1}-\u{ffff}0-9]+)(?:\.(?:[a-z\u{00a1}-\u{ffff}0-9]+-?)*[a-z\u{00a1}-\u{ffff}0-9]+)*(?:\.(?:[a-z\u{00a1}-\u{ffff}]{2,})))(?::\d{2,5})?(?:\/[^\s]*)?$/iu,ber=/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,_er=/^(?:\/(?:[^~/]|~0|~1)*)*$/,ver=/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,wer=/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/,Ser=/^\d\d\d\d-[0-1]\d-[0-3]\d$/,xer=/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,Cer=/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,Oer=/^(?:(?:[a-z][a-z0-9+-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,Per=t=>{if(t[0]==='"')return!1;let[e,r,...n]=t.split("@");return!e||!r||n.length!==0||e.length>64||r.length>253||e[0]==="."||e.endsWith(".")||e.includes("..")||!/^[a-z0-9.-]+$/i.test(r)||!/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+$/i.test(e)?!1:r.split(".").every(o=>/^[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?$/i.test(o))},Eer=/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,Ter=/^((([0-9a-f]{1,4}:){7}([0-9a-f]{1,4}|:))|(([0-9a-f]{1,4}:){6}(:[0-9a-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){5}(((:[0-9a-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){4}(((:[0-9a-f]{1,4}){1,3})|((:[0-9a-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){3}(((:[0-9a-f]{1,4}){1,4})|((:[0-9a-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){2}(((:[0-9a-f]{1,4}){1,5})|((:[0-9a-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){1}(((:[0-9a-f]{1,4}){1,6})|((:[0-9a-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9a-f]{1,4}){1,7})|((:[0-9a-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))$/i,Aer=t=>t.length>1&&t.length<80&&(/^P\d+([.,]\d+)?W$/.test(t)||/^P[\dYMDTHS]*(\d[.,]\d+)?[YMDHS]$/.test(t)&&/^P([.,\d]+Y)?([.,\d]+M)?([.,\d]+D)?(T([.,\d]+H)?([.,\d]+M)?([.,\d]+S)?)?$/.test(t));Ier={date:l2e,time:c2e.bind(void 0,!1),"date-time":jer,duration:Aer,uri:Ler,"uri-reference":up(her),"uri-template":up(ger),url:up(yer),email:Per,hostname:up(mer),ipv4:up(Eer),ipv6:up(Ter),regex:ker,uuid:up(ber),"json-pointer":up(_er),"json-pointer-uri-fragment":up(ver),"relative-json-pointer":up(wer)},Kpe={...Ier,date:up(Ser),time:up(xer),"date-time":up(Cer),"uri-reference":up(Oer)};Rer=/t|\s/i;Ner=/\/|:/,Der=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i;Fer=/[^\\]\\Z/});var d2e,f2e=O(()=>{(function(t){t[t.Flag=1]="Flag",t[t.Basic=2]="Basic",t[t.Detailed=4]="Detailed"})(d2e||(d2e={}))});function p2e(t){let e=0,r=t.length,n=0,o;for(;n<r;)e++,o=t.charCodeAt(n++),o>=55296&&o<=56319&&n<r&&(o=t.charCodeAt(n),(o&64512)==56320&&n++);return e}var Jpe=O(()=>{});function Xi(t,e,r="2019-09",n=cC(e),o=!0,i=null,a="#",s="#",u=Object.create(null)){if(e===!0)return{valid:!0,errors:[]};if(e===!1)return{valid:!1,errors:[{instanceLocation:a,keyword:"false",keywordLocation:a,error:"False boolean schema."}]};let l=typeof t,c;switch(l){case"boolean":case"number":case"string":c=l;break;case"object":t===null?c="null":Array.isArray(t)?c="array":c="object";break;default:throw new Error(`Instances of "${l}" type are not supported.`)}let{$ref:d,$recursiveRef:f,$recursiveAnchor:p,type:m,const:h,enum:b,required:g,not:y,anyOf:w,allOf:S,oneOf:C,if:P,then:E,else:A,format:I,properties:R,patternProperties:j,additionalProperties:N,unevaluatedProperties:$,minProperties:k,maxProperties:H,propertyNames:V,dependentRequired:Q,dependentSchemas:G,dependencies:D,prefixItems:B,items:q,additionalItems:K,unevaluatedItems:U,contains:te,minContains:z,maxContains:W,minItems:Y,maxItems:ae,uniqueItems:we,minimum:de,maximum:Ue,exclusiveMinimum:Ve,exclusiveMaximum:rt,multipleOf:lr,minLength:bn,maxLength:Le,pattern:gt,__absolute_ref__:vt,__absolute_recursive_ref__:pt}=e,ee=[];if(p===!0&&i===null&&(i=e),f==="#"){let Re=i===null?n[pt]:i,Pe=`${s}/$recursiveRef`,oe=Xi(t,i===null?e:i,r,n,o,Re,a,Pe,u);oe.valid||ee.push({instanceLocation:a,keyword:"$recursiveRef",keywordLocation:Pe,error:"A subschema had errors."},...oe.errors)}if(d!==void 0){let Pe=n[vt||d];if(Pe===void 0){let le=`Unresolved $ref "${d}".`;throw vt&&vt!==d&&(le+=`  Absolute URI "${vt}".`),le+=`
Known schemas:
- ${Object.keys(n).join(`
- `)}`,new Error(le)}let oe=`${s}/$ref`,se=Xi(t,Pe,r,n,o,i,a,oe,u);if(se.valid||ee.push({instanceLocation:a,keyword:"$ref",keywordLocation:oe,error:"A subschema had errors."},...se.errors),r==="4"||r==="7")return{valid:ee.length===0,errors:ee}}if(Array.isArray(m)){let Re=m.length,Pe=!1;for(let oe=0;oe<Re;oe++)if(c===m[oe]||m[oe]==="integer"&&c==="number"&&t%1===0&&t===t){Pe=!0;break}Pe||ee.push({instanceLocation:a,keyword:"type",keywordLocation:`${s}/type`,error:`Instance type "${c}" is invalid. Expected "${m.join('", "')}".`})}else m==="integer"?(c!=="number"||t%1||t!==t)&&ee.push({instanceLocation:a,keyword:"type",keywordLocation:`${s}/type`,error:`Instance type "${c}" is invalid. Expected "${m}".`}):m!==void 0&&c!==m&&ee.push({instanceLocation:a,keyword:"type",keywordLocation:`${s}/type`,error:`Instance type "${c}" is invalid. Expected "${m}".`});if(h!==void 0&&(c==="object"||c==="array"?lC(t,h)||ee.push({instanceLocation:a,keyword:"const",keywordLocation:`${s}/const`,error:`Instance does not match ${JSON.stringify(h)}.`}):t!==h&&ee.push({instanceLocation:a,keyword:"const",keywordLocation:`${s}/const`,error:`Instance does not match ${JSON.stringify(h)}.`})),b!==void 0&&(c==="object"||c==="array"?b.some(Re=>lC(t,Re))||ee.push({instanceLocation:a,keyword:"enum",keywordLocation:`${s}/enum`,error:`Instance does not match any of ${JSON.stringify(b)}.`}):b.some(Re=>t===Re)||ee.push({instanceLocation:a,keyword:"enum",keywordLocation:`${s}/enum`,error:`Instance does not match any of ${JSON.stringify(b)}.`})),y!==void 0){let Re=`${s}/not`;Xi(t,y,r,n,o,i,a,Re).valid&&ee.push({instanceLocation:a,keyword:"not",keywordLocation:Re,error:'Instance matched "not" schema.'})}let et=[];if(w!==void 0){let Re=`${s}/anyOf`,Pe=ee.length,oe=!1;for(let se=0;se<w.length;se++){let le=w[se],Oe=Object.create(u),Je=Xi(t,le,r,n,o,p===!0?i:null,a,`${Re}/${se}`,Oe);ee.push(...Je.errors),oe=oe||Je.valid,Je.valid&&et.push(Oe)}oe?ee.length=Pe:ee.splice(Pe,0,{instanceLocation:a,keyword:"anyOf",keywordLocation:Re,error:"Instance does not match any subschemas."})}if(S!==void 0){let Re=`${s}/allOf`,Pe=ee.length,oe=!0;for(let se=0;se<S.length;se++){let le=S[se],Oe=Object.create(u),Je=Xi(t,le,r,n,o,p===!0?i:null,a,`${Re}/${se}`,Oe);ee.push(...Je.errors),oe=oe&&Je.valid,Je.valid&&et.push(Oe)}oe?ee.length=Pe:ee.splice(Pe,0,{instanceLocation:a,keyword:"allOf",keywordLocation:Re,error:"Instance does not match every subschema."})}if(C!==void 0){let Re=`${s}/oneOf`,Pe=ee.length,oe=C.filter((se,le)=>{let Oe=Object.create(u),Je=Xi(t,se,r,n,o,p===!0?i:null,a,`${Re}/${le}`,Oe);return ee.push(...Je.errors),Je.valid&&et.push(Oe),Je.valid}).length;oe===1?ee.length=Pe:ee.splice(Pe,0,{instanceLocation:a,keyword:"oneOf",keywordLocation:Re,error:`Instance does not match exactly one subschema (${oe} matches).`})}if((c==="object"||c==="array")&&Object.assign(u,...et),P!==void 0){let Re=`${s}/if`;if(Xi(t,P,r,n,o,i,a,Re,u).valid){if(E!==void 0){let oe=Xi(t,E,r,n,o,i,a,`${s}/then`,u);oe.valid||ee.push({instanceLocation:a,keyword:"if",keywordLocation:Re,error:'Instance does not match "then" schema.'},...oe.errors)}}else if(A!==void 0){let oe=Xi(t,A,r,n,o,i,a,`${s}/else`,u);oe.valid||ee.push({instanceLocation:a,keyword:"if",keywordLocation:Re,error:'Instance does not match "else" schema.'},...oe.errors)}}if(c==="object"){if(g!==void 0)for(let se of g)se in t||ee.push({instanceLocation:a,keyword:"required",keywordLocation:`${s}/required`,error:`Instance does not have required property "${se}".`});let Re=Object.keys(t);if(k!==void 0&&Re.length<k&&ee.push({instanceLocation:a,keyword:"minProperties",keywordLocation:`${s}/minProperties`,error:`Instance does not have at least ${k} properties.`}),H!==void 0&&Re.length>H&&ee.push({instanceLocation:a,keyword:"maxProperties",keywordLocation:`${s}/maxProperties`,error:`Instance does not have at least ${H} properties.`}),V!==void 0){let se=`${s}/propertyNames`;for(let le in t){let Oe=`${a}/${sm(le)}`,Je=Xi(le,V,r,n,o,i,Oe,se);Je.valid||ee.push({instanceLocation:a,keyword:"propertyNames",keywordLocation:se,error:`Property name "${le}" does not match schema.`},...Je.errors)}}if(Q!==void 0){let se=`${s}/dependantRequired`;for(let le in Q)if(le in t){let Oe=Q[le];for(let Je of Oe)Je in t||ee.push({instanceLocation:a,keyword:"dependentRequired",keywordLocation:se,error:`Instance has "${le}" but does not have "${Je}".`})}}if(G!==void 0)for(let se in G){let le=`${s}/dependentSchemas`;if(se in t){let Oe=Xi(t,G[se],r,n,o,i,a,`${le}/${sm(se)}`,u);Oe.valid||ee.push({instanceLocation:a,keyword:"dependentSchemas",keywordLocation:le,error:`Instance has "${se}" but does not match dependant schema.`},...Oe.errors)}}if(D!==void 0){let se=`${s}/dependencies`;for(let le in D)if(le in t){let Oe=D[le];if(Array.isArray(Oe))for(let Je of Oe)Je in t||ee.push({instanceLocation:a,keyword:"dependencies",keywordLocation:se,error:`Instance has "${le}" but does not have "${Je}".`});else{let Je=Xi(t,Oe,r,n,o,i,a,`${se}/${sm(le)}`);Je.valid||ee.push({instanceLocation:a,keyword:"dependencies",keywordLocation:se,error:`Instance has "${le}" but does not match dependant schema.`},...Je.errors)}}}let Pe=Object.create(null),oe=!1;if(R!==void 0){let se=`${s}/properties`;for(let le in R){if(!(le in t))continue;let Oe=`${a}/${sm(le)}`,Je=Xi(t[le],R[le],r,n,o,i,Oe,`${se}/${sm(le)}`);if(Je.valid)u[le]=Pe[le]=!0;else if(oe=o,ee.push({instanceLocation:a,keyword:"properties",keywordLocation:se,error:`Property "${le}" does not match schema.`},...Je.errors),oe)break}}if(!oe&&j!==void 0){let se=`${s}/patternProperties`;for(let le in j){let Oe=new RegExp(le,"u"),Je=j[le];for(let nr in t){if(!Oe.test(nr))continue;let Ji=`${a}/${sm(nr)}`,Ni=Xi(t[nr],Je,r,n,o,i,Ji,`${se}/${sm(le)}`);Ni.valid?u[nr]=Pe[nr]=!0:(oe=o,ee.push({instanceLocation:a,keyword:"patternProperties",keywordLocation:se,error:`Property "${nr}" matches pattern "${le}" but does not match associated schema.`},...Ni.errors))}}}if(!oe&&N!==void 0){let se=`${s}/additionalProperties`;for(let le in t){if(Pe[le])continue;let Oe=`${a}/${sm(le)}`,Je=Xi(t[le],N,r,n,o,i,Oe,se);Je.valid?u[le]=!0:(oe=o,ee.push({instanceLocation:a,keyword:"additionalProperties",keywordLocation:se,error:`Property "${le}" does not match additional properties schema.`},...Je.errors))}}else if(!oe&&$!==void 0){let se=`${s}/unevaluatedProperties`;for(let le in t)if(!u[le]){let Oe=`${a}/${sm(le)}`,Je=Xi(t[le],$,r,n,o,i,Oe,se);Je.valid?u[le]=!0:ee.push({instanceLocation:a,keyword:"unevaluatedProperties",keywordLocation:se,error:`Property "${le}" does not match unevaluated properties schema.`},...Je.errors)}}}else if(c==="array"){ae!==void 0&&t.length>ae&&ee.push({instanceLocation:a,keyword:"maxItems",keywordLocation:`${s}/maxItems`,error:`Array has too many items (${t.length} > ${ae}).`}),Y!==void 0&&t.length<Y&&ee.push({instanceLocation:a,keyword:"minItems",keywordLocation:`${s}/minItems`,error:`Array has too few items (${t.length} < ${Y}).`});let Re=t.length,Pe=0,oe=!1;if(B!==void 0){let se=`${s}/prefixItems`,le=Math.min(B.length,Re);for(;Pe<le;Pe++){let Oe=Xi(t[Pe],B[Pe],r,n,o,i,`${a}/${Pe}`,`${se}/${Pe}`);if(u[Pe]=!0,!Oe.valid&&(oe=o,ee.push({instanceLocation:a,keyword:"prefixItems",keywordLocation:se,error:"Items did not match schema."},...Oe.errors),oe))break}}if(q!==void 0){let se=`${s}/items`;if(Array.isArray(q)){let le=Math.min(q.length,Re);for(;Pe<le;Pe++){let Oe=Xi(t[Pe],q[Pe],r,n,o,i,`${a}/${Pe}`,`${se}/${Pe}`);if(u[Pe]=!0,!Oe.valid&&(oe=o,ee.push({instanceLocation:a,keyword:"items",keywordLocation:se,error:"Items did not match schema."},...Oe.errors),oe))break}}else for(;Pe<Re;Pe++){let le=Xi(t[Pe],q,r,n,o,i,`${a}/${Pe}`,se);if(u[Pe]=!0,!le.valid&&(oe=o,ee.push({instanceLocation:a,keyword:"items",keywordLocation:se,error:"Items did not match schema."},...le.errors),oe))break}if(!oe&&K!==void 0){let le=`${s}/additionalItems`;for(;Pe<Re;Pe++){let Oe=Xi(t[Pe],K,r,n,o,i,`${a}/${Pe}`,le);u[Pe]=!0,Oe.valid||(oe=o,ee.push({instanceLocation:a,keyword:"additionalItems",keywordLocation:le,error:"Items did not match additional items schema."},...Oe.errors))}}}if(te!==void 0)if(Re===0&&z===void 0)ee.push({instanceLocation:a,keyword:"contains",keywordLocation:`${s}/contains`,error:"Array is empty. It must contain at least one item matching the schema."});else if(z!==void 0&&Re<z)ee.push({instanceLocation:a,keyword:"minContains",keywordLocation:`${s}/minContains`,error:`Array has less items (${Re}) than minContains (${z}).`});else{let se=`${s}/contains`,le=ee.length,Oe=0;for(let Je=0;Je<Re;Je++){let nr=Xi(t[Je],te,r,n,o,i,`${a}/${Je}`,se);nr.valid?(u[Je]=!0,Oe++):ee.push(...nr.errors)}Oe>=(z||0)&&(ee.length=le),z===void 0&&W===void 0&&Oe===0?ee.splice(le,0,{instanceLocation:a,keyword:"contains",keywordLocation:se,error:"Array does not contain item matching schema."}):z!==void 0&&Oe<z?ee.push({instanceLocation:a,keyword:"minContains",keywordLocation:`${s}/minContains`,error:`Array must contain at least ${z} items matching schema. Only ${Oe} items were found.`}):W!==void 0&&Oe>W&&ee.push({instanceLocation:a,keyword:"maxContains",keywordLocation:`${s}/maxContains`,error:`Array may contain at most ${W} items matching schema. ${Oe} items were found.`})}if(!oe&&U!==void 0){let se=`${s}/unevaluatedItems`;for(Pe;Pe<Re;Pe++){if(u[Pe])continue;let le=Xi(t[Pe],U,r,n,o,i,`${a}/${Pe}`,se);u[Pe]=!0,le.valid||ee.push({instanceLocation:a,keyword:"unevaluatedItems",keywordLocation:se,error:"Items did not match unevaluated items schema."},...le.errors)}}if(we)for(let se=0;se<Re;se++){let le=t[se],Oe=typeof le=="object"&&le!==null;for(let Je=0;Je<Re;Je++){if(se===Je)continue;let nr=t[Je];(le===nr||Oe&&(typeof nr=="object"&&nr!==null)&&lC(le,nr))&&(ee.push({instanceLocation:a,keyword:"uniqueItems",keywordLocation:`${s}/uniqueItems`,error:`Duplicate items at indexes ${se} and ${Je}.`}),se=Number.MAX_SAFE_INTEGER,Je=Number.MAX_SAFE_INTEGER)}}}else if(c==="number"){if(r==="4"?(de!==void 0&&(Ve===!0&&t<=de||t<de)&&ee.push({instanceLocation:a,keyword:"minimum",keywordLocation:`${s}/minimum`,error:`${t} is less than ${Ve?"or equal to ":""} ${de}.`}),Ue!==void 0&&(rt===!0&&t>=Ue||t>Ue)&&ee.push({instanceLocation:a,keyword:"maximum",keywordLocation:`${s}/maximum`,error:`${t} is greater than ${rt?"or equal to ":""} ${Ue}.`})):(de!==void 0&&t<de&&ee.push({instanceLocation:a,keyword:"minimum",keywordLocation:`${s}/minimum`,error:`${t} is less than ${de}.`}),Ue!==void 0&&t>Ue&&ee.push({instanceLocation:a,keyword:"maximum",keywordLocation:`${s}/maximum`,error:`${t} is greater than ${Ue}.`}),Ve!==void 0&&t<=Ve&&ee.push({instanceLocation:a,keyword:"exclusiveMinimum",keywordLocation:`${s}/exclusiveMinimum`,error:`${t} is less than ${Ve}.`}),rt!==void 0&&t>=rt&&ee.push({instanceLocation:a,keyword:"exclusiveMaximum",keywordLocation:`${s}/exclusiveMaximum`,error:`${t} is greater than or equal to ${rt}.`})),lr!==void 0){let Re=t%lr;Math.abs(0-Re)>=11920929e-14&&Math.abs(lr-Re)>=11920929e-14&&ee.push({instanceLocation:a,keyword:"multipleOf",keywordLocation:`${s}/multipleOf`,error:`${t} is not a multiple of ${lr}.`})}}else if(c==="string"){let Re=bn===void 0&&Le===void 0?0:p2e(t);bn!==void 0&&Re<bn&&ee.push({instanceLocation:a,keyword:"minLength",keywordLocation:`${s}/minLength`,error:`String is too short (${Re} < ${bn}).`}),Le!==void 0&&Re>Le&&ee.push({instanceLocation:a,keyword:"maxLength",keywordLocation:`${s}/maxLength`,error:`String is too long (${Re} > ${Le}).`}),gt!==void 0&&!new RegExp(gt,"u").test(t)&&ee.push({instanceLocation:a,keyword:"pattern",keywordLocation:`${s}/pattern`,error:"String does not match pattern."}),I!==void 0&&Kpe[I]&&!Kpe[I](t)&&ee.push({instanceLocation:a,keyword:"format",keywordLocation:`${s}/format`,error:`String does not match format "${I}".`})}return{valid:ee.length===0,errors:ee}}var Ype=O(()=>{Wpe();GK();Gpe();KK();Jpe()});var m2e=O(()=>{GK();Ype()});var r2=O(()=>{Wpe();GK();Gpe();KK();f2e();Jpe();Ype();m2e()});var QM,eR,hE=O(()=>{r2();bL();fh();cE();hL();QM=class extends XM{async*_transform(e){for await(let r of e)typeof r=="string"?yield this.parseResult([{text:r}]):yield this.parseResult([{message:r,text:this._baseMessageToString(r)}])}async*transform(e,r){yield*this._transformStreamWithConfig(e,this._transform.bind(this),{...r,runType:"parser"})}},eR=class extends QM{constructor(e){super(e),Object.defineProperty(this,"diff",{enumerable:!0,configurable:!0,writable:!0,value:!1}),this.diff=e?.diff??this.diff}async*_transform(e){let r,n;for await(let o of e){if(typeof o!="string"&&typeof o.content!="string")throw new Error("Cannot handle non-string output.");let i;if(Vfe(o)){if(typeof o.content!="string")throw new Error("Cannot handle non-string message output.");i=new Ln({message:o,text:o.content})}else if(dh(o)){if(typeof o.content!="string")throw new Error("Cannot handle non-string message output.");i=new Ln({message:Gfe(o),text:o.content})}else i=new sp({text:o});n===void 0?n=i:n=n.concat(i);let a=await this.parsePartialResult([n]);a!=null&&!lC(a,r)&&(this.diff?yield this._diff(r,a):yield a,r=a)}}getFormatInstructions(){return""}}});var h2e=O(()=>{hE()});var g2e=O(()=>{bL();hE()});var JK,y2e=O(()=>{hE();JK=class extends QM{constructor(){super(...arguments),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","output_parsers","string"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0})}static lc_name(){return"StrOutputParser"}parse(e){return Promise.resolve(e)}getFormatInstructions(){return""}_textContentToString(e){return e.text}_imageUrlContentToString(e){throw new Error('Cannot coerce a multimodal "image_url" message part into a string.')}_messageContentComplexToString(e){switch(e.type){case"text":case"text_delta":if("text"in e)return this._textContentToString(e);break;case"image_url":if("image_url"in e)return this._imageUrlContentToString(e);break;default:throw new Error(`Cannot coerce "${e.type}" message part into a string.`)}throw new Error(`Invalid content type: ${e.type}`)}_baseMessageContentToString(e){return e.reduce((r,n)=>r+this._messageContentComplexToString(n),"")}}});var hc,b2e=O(()=>{md();mc();bL();hc=class extends XM{static lc_name(){return"StructuredOutputParser"}toJSON(){return this.toJSONNotImplemented()}constructor(e){super(e),Object.defineProperty(this,"schema",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","output_parsers","structured"]})}static fromZodSchema(e){return new this(e)}static fromNamesAndDescriptions(e){let r=Vr.object(Object.fromEntries(Object.entries(e).map(([n,o])=>[n,Vr.string().describe(o)])));return new this(r)}getFormatInstructions(){return`You must format your output as a JSON value that adheres to a given "JSON Schema" instance.

"JSON Schema" is a declarative language that allows you to annotate and validate JSON documents.

For example, the example "JSON Schema" instance {{"properties": {{"foo": {{"description": "a list of test words", "type": "array", "items": {{"type": "string"}}}}}}, "required": ["foo"]}}
would match an object with one required property, "foo". The "type" property specifies "foo" must be an "array", and the "description" property semantically describes it as "a list of test words". The items within "foo" must be strings.
Thus, the object {{"foo": ["bar", "baz"]}} is a well-formatted instance of this example "JSON Schema". The object {{"properties": {{"foo": ["bar", "baz"]}}}} is not well-formatted.

Your output will be parsed and type-checked according to the provided schema instance, so make sure all fields in your output match the schema exactly and there are no trailing commas!

Here is the JSON Schema instance your output must adhere to. Include the enclosing markdown codeblock:
\`\`\`json
${JSON.stringify(ho(this.schema))}
\`\`\`
`}async parse(e){try{let n=(e.includes("```")?e.trim().split(/```(?:json)?/)[1]:e.trim()).replace(/"([^"\\]*(\\.[^"\\]*)*)"/g,(o,i)=>`"${i.replace(/\n/g,"\\n")}"`).replace(/\n/g,"");return await this.schema.parseAsync(JSON.parse(n))}catch(r){throw new am(`Failed to parse. Text: "${e}". Error: ${r}`,e)}}}});var Zpe=O(()=>{Rfe()});var gc,Xpe=O(()=>{hE();Zpe();Ufe();gc=class extends eR{constructor(){super(...arguments),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","output_parsers"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0})}static lc_name(){return"JsonOutputParser"}_diff(e,r){if(r)return e?yK(e,r):[{op:"replace",path:"",value:r}]}async parsePartialResult(e){return qfe(e[0].text)}async parse(e){return qfe(e,JSON.parse)}getFormatInstructions(){return""}}});var _2e=O(()=>{});var v2e=O(()=>{hE();Zpe();_2e()});var w2e=O(()=>{bL();h2e();g2e();y2e();b2e();hE();Xpe();v2e()});var Yg=O(()=>{w2e()});var n2,_L,vL,YK,o2=O(()=>{UM();Hz();cE();n2=class extends np{},_L=class extends n2{static lc_name(){return"StringPromptValue"}constructor(e){super({value:e}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","prompt_values"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.value=e}toString(){return this.value}toChatMessages(){return[new ys(this.value)]}},vL=class extends n2{static lc_name(){return"ChatPromptValue"}constructor(e){Array.isArray(e)&&(e={messages:e}),super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","prompt_values"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"messages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.messages=e.messages}toString(){return yf(this.messages)}toChatMessages(){return this.messages}},YK=class extends n2{static lc_name(){return"ImagePromptValue"}constructor(e){"imageUrl"in e||(e={imageUrl:e}),super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","prompt_values"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"imageUrl",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.imageUrl=e.imageUrl}toString(){return this.imageUrl.url}toChatMessages(){return[new ys({content:[{type:"image_url",image_url:{detail:this.imageUrl.detail,url:this.imageUrl.url}}]})]}}});var dC,i2=O(()=>{o2();wL();dC=class extends Eb{async formatPromptValue(e){let r=await this.format(e);return new _L(r)}}});function eme(t){return typeof t=="function"}function Ber(t){return xL(t)?"array":typeof t}function Qpe(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function S2e(t,e){return t!=null&&typeof t=="object"&&e in t}function qer(t,e){return t!=null&&typeof t!="object"&&t.hasOwnProperty&&t.hasOwnProperty(e)}function zer(t,e){return Uer.call(t,e)}function Ver(t){return!zer(Her,t)}function Ker(t){return String(t).replace(/[&<>"'`=\/]/g,function(r){return Wer[r]})}function Xer(t,e){if(!t)return[];var r=!1,n=[],o=[],i=[],a=!1,s=!1,u="",l=0;function c(){if(a&&!s)for(;i.length;)delete o[i.pop()];else i=[];a=!1,s=!1}var d,f,p;function m(A){if(typeof A=="string"&&(A=A.split(Jer,2)),!xL(A)||A.length!==2)throw new Error("Invalid tags: "+A);d=new RegExp(Qpe(A[0])+"\\s*"),f=new RegExp("\\s*"+Qpe(A[1])),p=new RegExp("\\s*"+Qpe("}"+A[1]))}m(e||mh.tags);for(var h=new s2(t),b,g,y,w,S,C;!h.eos();){if(b=h.pos,y=h.scanUntil(d),y)for(var P=0,E=y.length;P<E;++P)w=y.charAt(P),Ver(w)?(i.push(o.length),u+=w):(s=!0,r=!0,u+=" "),o.push(["text",w,b,b+1]),b+=1,w===`
`&&(c(),u="",l=0,r=!1);if(!h.scan(d))break;if(a=!0,g=h.scan(Zer)||"name",h.scan(Ger),g==="="?(y=h.scanUntil(x2e),h.scan(x2e),h.scanUntil(f)):g==="{"?(y=h.scanUntil(p),h.scan(Yer),h.scanUntil(f),g="&"):y=h.scanUntil(f),!h.scan(f))throw new Error("Unclosed tag at "+h.pos);if(g==">"?S=[g,y,b,h.pos,u,l,r]:S=[g,y,b,h.pos],l++,o.push(S),g==="#"||g==="^")n.push(S);else if(g==="/"){if(C=n.pop(),!C)throw new Error('Unopened section "'+y+'" at '+b);if(C[1]!==y)throw new Error('Unclosed section "'+C[1]+'" at '+b)}else g==="name"||g==="{"||g==="&"?s=!0:g==="="&&m(y)}if(c(),C=n.pop(),C)throw new Error('Unclosed section "'+C[1]+'" at '+h.pos);return etr(Qer(o))}function Qer(t){for(var e=[],r,n,o=0,i=t.length;o<i;++o)r=t[o],r&&(r[0]==="text"&&n&&n[0]==="text"?(n[1]+=r[1],n[3]=r[3]):(e.push(r),n=r));return e}function etr(t){for(var e=[],r=e,n=[],o,i,a=0,s=t.length;a<s;++a)switch(o=t[a],o[0]){case"#":case"^":r.push(o),n.push(o),r=o[4]=[];break;case"/":i=n.pop(),i[5]=o[2],r=n.length>0?n[n.length-1][4]:e;break;default:r.push(o)}return e}function s2(t){this.string=t,this.tail=t,this.pos=0}function SL(t,e){this.view=t,this.cache={".":this.view},this.parent=e}function wf(){this.templateCache={_cache:{},set:function(e,r){this._cache[e]=r},get:function(e){return this._cache[e]},clear:function(){this._cache={}}}}var $er,xL,Uer,Her,Wer,Ger,Jer,x2e,Yer,Zer,mh,a2,ZK,C2e=O(()=>{$er=Object.prototype.toString,xL=Array.isArray||function(e){return $er.call(e)==="[object Array]"};Uer=RegExp.prototype.test;Her=/\S/;Wer={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};Ger=/\s*/,Jer=/\s+/,x2e=/\s*=/,Yer=/\s*\}/,Zer=/#|\^|\/|>|\{|&|=|!/;s2.prototype.eos=function(){return this.tail===""};s2.prototype.scan=function(e){var r=this.tail.match(e);if(!r||r.index!==0)return"";var n=r[0];return this.tail=this.tail.substring(n.length),this.pos+=n.length,n};s2.prototype.scanUntil=function(e){var r=this.tail.search(e),n;switch(r){case-1:n=this.tail,this.tail="";break;case 0:n="";break;default:n=this.tail.substring(0,r),this.tail=this.tail.substring(r)}return this.pos+=n.length,n};SL.prototype.push=function(e){return new SL(e,this)};SL.prototype.lookup=function(e){var r=this.cache,n;if(r.hasOwnProperty(e))n=r[e];else{for(var o=this,i,a,s,u=!1;o;){if(e.indexOf(".")>0)for(i=o.view,a=e.split("."),s=0;i!=null&&s<a.length;)s===a.length-1&&(u=S2e(i,a[s])||qer(i,a[s])),i=i[a[s++]];else i=o.view[e],u=S2e(o.view,e);if(u){n=i;break}o=o.parent}r[e]=n}return eme(n)&&(n=n.call(this.view)),n};wf.prototype.clearCache=function(){typeof this.templateCache<"u"&&this.templateCache.clear()};wf.prototype.parse=function(e,r){var n=this.templateCache,o=e+":"+(r||mh.tags).join(":"),i=typeof n<"u",a=i?n.get(o):void 0;return a==null&&(a=Xer(e,r),i&&n.set(o,a)),a};wf.prototype.render=function(e,r,n,o){var i=this.getConfigTags(o),a=this.parse(e,i),s=r instanceof SL?r:new SL(r,void 0);return this.renderTokens(a,s,n,e,o)};wf.prototype.renderTokens=function(e,r,n,o,i){for(var a="",s,u,l,c=0,d=e.length;c<d;++c)l=void 0,s=e[c],u=s[0],u==="#"?l=this.renderSection(s,r,n,o,i):u==="^"?l=this.renderInverted(s,r,n,o,i):u===">"?l=this.renderPartial(s,r,n,i):u==="&"?l=this.unescapedValue(s,r):u==="name"?l=this.escapedValue(s,r,i):u==="text"&&(l=this.rawValue(s)),l!==void 0&&(a+=l);return a};wf.prototype.renderSection=function(e,r,n,o,i){var a=this,s="",u=r.lookup(e[1]);function l(f){return a.render(f,r,n,i)}if(u){if(xL(u))for(var c=0,d=u.length;c<d;++c)s+=this.renderTokens(e[4],r.push(u[c]),n,o,i);else if(typeof u=="object"||typeof u=="string"||typeof u=="number")s+=this.renderTokens(e[4],r.push(u),n,o,i);else if(eme(u)){if(typeof o!="string")throw new Error("Cannot use higher-order sections without the original template");u=u.call(r.view,o.slice(e[3],e[5]),l),u!=null&&(s+=u)}else s+=this.renderTokens(e[4],r,n,o,i);return s}};wf.prototype.renderInverted=function(e,r,n,o,i){var a=r.lookup(e[1]);if(!a||xL(a)&&a.length===0)return this.renderTokens(e[4],r,n,o,i)};wf.prototype.indentPartial=function(e,r,n){for(var o=r.replace(/[^ \t]/g,""),i=e.split(`
`),a=0;a<i.length;a++)i[a].length&&(a>0||!n)&&(i[a]=o+i[a]);return i.join(`
`)};wf.prototype.renderPartial=function(e,r,n,o){if(n){var i=this.getConfigTags(o),a=eme(n)?n(e[1]):n[e[1]];if(a!=null){var s=e[6],u=e[5],l=e[4],c=a;u==0&&l&&(c=this.indentPartial(a,l,s));var d=this.parse(c,i);return this.renderTokens(d,r,n,c,o)}}};wf.prototype.unescapedValue=function(e,r){var n=r.lookup(e[1]);if(n!=null)return n};wf.prototype.escapedValue=function(e,r,n){var o=this.getConfigEscape(n)||mh.escape,i=r.lookup(e[1]);if(i!=null)return typeof i=="number"&&o===mh.escape?String(i):o(i)};wf.prototype.rawValue=function(e){return e[1]};wf.prototype.getConfigTags=function(e){return xL(e)?e:e&&typeof e=="object"?e.tags:void 0};wf.prototype.getConfigEscape=function(e){if(e&&typeof e=="object"&&!xL(e))return e.escape};mh={name:"mustache.js",version:"4.2.0",tags:["{{","}}"],clearCache:void 0,escape:void 0,parse:void 0,render:void 0,Scanner:void 0,Context:void 0,Writer:void 0,set templateCache(t){a2.templateCache=t},get templateCache(){return a2.templateCache}},a2=new wf;mh.clearCache=function(){return a2.clearCache()};mh.parse=function(e,r){return a2.parse(e,r)};mh.render=function(e,r,n,o){if(typeof e!="string")throw new TypeError('Invalid template! Template should be a "string" but "'+Ber(e)+'" was given as the first argument for mustache#render(template, view, partials)');return a2.render(e,r,n,o)};mh.escape=Ker;mh.Scanner=s2;mh.Context=SL;mh.Writer=wf;ZK=mh});function O2e(){ZK.escape=t=>t}var u2,ttr,XK,rtr,ntr,tme,otr,lp,l2,tR,rR=O(()=>{C2e();Uz();u2=t=>{let e=t.split(""),r=[],n=(i,a)=>{for(let s=a;s<e.length;s+=1)if(i.includes(e[s]))return s;return-1},o=0;for(;o<e.length;)if(e[o]==="{"&&o+1<e.length&&e[o+1]==="{")r.push({type:"literal",text:"{"}),o+=2;else if(e[o]==="}"&&o+1<e.length&&e[o+1]==="}")r.push({type:"literal",text:"}"}),o+=2;else if(e[o]==="{"){let i=n("}",o);if(i<0)throw new Error("Unclosed '{' in template.");r.push({type:"variable",name:e.slice(o+1,i).join("")}),o=i+1}else{if(e[o]==="}")throw new Error("Single '}' in template.");{let i=n("{}",o),a=(i<0?e.slice(o):e.slice(o,i)).join("");r.push({type:"literal",text:a}),o=i<0?e.length:i}}return r},ttr=t=>t.map(e=>e[0]==="name"?{type:"variable",name:e[1].includes(".")?e[1].split(".")[0]:e[1]}:["#","&","^",">"].includes(e[0])?{type:"variable",name:e[1]}:{type:"literal",text:e[1]}),XK=t=>{O2e();let e=ZK.parse(t);return ttr(e)},rtr=(t,e)=>u2(t).reduce((r,n)=>{if(n.type==="variable"){if(n.name in e){let o=typeof e[n.name]=="string"?e[n.name]:JSON.stringify(e[n.name]);return r+o}throw new Error(`(f-string) Missing value for input ${n.name}`)}return r+n.text},""),ntr=(t,e)=>(O2e(),ZK.render(t,e)),tme={"f-string":rtr,mustache:ntr},otr={"f-string":u2,mustache:XK},lp=(t,e,r)=>{try{return tme[e](t,r)}catch(n){throw sE(n,"INVALID_PROMPT_INPUT")}},l2=(t,e)=>otr[e](t),tR=(t,e,r)=>{if(!(e in tme)){let n=Object.keys(tme);throw new Error(`Invalid template format. Got \`${e}\`;
                         should be one of ${n}`)}try{let n=r.reduce((o,i)=>(o[i]="foo",o),{});Array.isArray(t)?t.forEach(o=>{if(o.type==="text")lp(o.text,e,n);else if(o.type==="image_url")if(typeof o.image_url=="string")lp(o.image_url,e,n);else{let i=o.image_url.url;lp(i,e,n)}else throw new Error(`Invalid message template received. ${JSON.stringify(o,null,2)}`)}):lp(t,e,n)}catch(n){throw new Error(`Invalid prompt schema: ${n.message}`)}}});var rme={};Zf(rme,{PromptTemplate:()=>wd});var wd,CL=O(()=>{i2();rR();wd=class t extends dC{static lc_name(){return"PromptTemplate"}constructor(e){if(super(e),Object.defineProperty(this,"template",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"templateFormat",{enumerable:!0,configurable:!0,writable:!0,value:"f-string"}),Object.defineProperty(this,"validateTemplate",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"additionalContentFields",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),e.templateFormat==="mustache"&&e.validateTemplate===void 0&&(this.validateTemplate=!1),Object.assign(this,e),this.validateTemplate){if(this.templateFormat==="mustache")throw new Error("Mustache templates cannot be validated.");let r=this.inputVariables;this.partialVariables&&(r=r.concat(Object.keys(this.partialVariables))),tR(this.template,this.templateFormat,r)}}_getPromptType(){return"prompt"}async format(e){let r=await this.mergePartialAndUserVariables(e);return lp(this.template,this.templateFormat,r)}static fromExamples(e,r,n,o=`

`,i=""){let a=[i,...e,r].join(o);return new t({inputVariables:n,template:a})}static fromTemplate(e,r){let{templateFormat:n="f-string",...o}=r??{},i=new Set;return l2(e,n).forEach(a=>{a.type==="variable"&&i.add(a.name)}),new t({inputVariables:[...i],templateFormat:n,template:e,...o})}async partial(e){let r=this.inputVariables.filter(i=>!(i in e)),n={...this.partialVariables??{},...e},o={...this,inputVariables:r,partialVariables:n};return new t(o)}serialize(){if(this.outputParser!==void 0)throw new Error("Cannot serialize a prompt template with an output parser");return{_type:this._getPromptType(),input_variables:this.inputVariables,template:this.template,template_format:this.templateFormat}}static async deserialize(e){if(!e.template)throw new Error("Prompt template must have a template");return new t({inputVariables:e.input_variables,template:e.template,templateFormat:e.template_format})}}});var OL,nme=O(()=>{o2();wL();rR();OL=class t extends Eb{static lc_name(){return"ImagePromptTemplate"}constructor(e){if(super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","prompts","image"]}),Object.defineProperty(this,"template",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"templateFormat",{enumerable:!0,configurable:!0,writable:!0,value:"f-string"}),Object.defineProperty(this,"validateTemplate",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"additionalContentFields",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.template=e.template,this.templateFormat=e.templateFormat??this.templateFormat,this.validateTemplate=e.validateTemplate??this.validateTemplate,this.additionalContentFields=e.additionalContentFields,this.validateTemplate){let r=this.inputVariables;this.partialVariables&&(r=r.concat(Object.keys(this.partialVariables))),tR([{type:"image_url",image_url:this.template}],this.templateFormat,r)}}_getPromptType(){return"prompt"}async partial(e){let r=this.inputVariables.filter(i=>!(i in e)),n={...this.partialVariables??{},...e},o={...this,inputVariables:r,partialVariables:n};return new t(o)}async format(e){let r={};for(let[a,s]of Object.entries(this.template))typeof s=="string"?r[a]=lp(s,this.templateFormat,e):r[a]=s;let n=e.url||r.url,o=e.detail||r.detail;if(!n)throw new Error("Must provide either an image URL.");if(typeof n!="string")throw new Error("url must be a string.");let i={url:n};return o&&(i.detail=o),i}async formatPromptValue(e){let r=await this.format(e);return new YK(r)}}});function ome(t,e){let r=[];for(let n of Object.values(t))if(typeof n=="string")l2(n,e).forEach(o=>{o.type==="variable"&&r.push(o.name)});else if(Array.isArray(n))for(let o of n)typeof o=="string"?l2(o,e).forEach(i=>{i.type==="variable"&&r.push(i.name)}):typeof o=="object"&&r.push(...ome(o,e));else typeof n=="object"&&n!==null&&r.push(...ome(n,e));return Array.from(new Set(r))}function ime(t,e,r){let n={};for(let[o,i]of Object.entries(t))if(typeof i=="string")n[o]=lp(i,r,e);else if(Array.isArray(i)){let a=[];for(let s of i)typeof s=="string"?a.push(lp(s,r,e)):typeof s=="object"&&a.push(ime(s,e,r));n[o]=a}else typeof i=="object"&&i!==null?n[o]=ime(i,e,r):n[o]=i;return n}var c2,ame=O(()=>{vf();rR();c2=class extends vn{static lc_name(){return"DictPromptTemplate"}constructor(e){let r=e.templateFormat??"f-string",n=ome(e.template,r);super({inputVariables:n,...e}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","prompts","dict"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"template",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"templateFormat",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"inputVariables",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.template=e.template,this.templateFormat=r,this.inputVariables=n}async format(e){return ime(this.template,e,this.templateFormat)}async invoke(e){return await this._callWithConfig(this.format.bind(this),e,{runType:"prompt"})}}});function itr(t){return t===null||typeof t!="object"||Array.isArray(t)?!1:Object.keys(t).length===1&&"text"in t&&typeof t.text=="string"}function atr(t){return t===null||typeof t!="object"||Array.isArray(t)?!1:"image_url"in t&&(typeof t.image_url=="string"||typeof t.image_url=="object"&&t.image_url!==null&&"url"in t.image_url&&typeof t.image_url.url=="string")}function str(t){return typeof t.formatMessages=="function"}function utr(t,e){if(str(t)||dh(t))return t;if(Array.isArray(t)&&t[0]==="placeholder"){let o=t[1];if(e?.templateFormat==="mustache"&&typeof o=="string"&&o.slice(0,2)==="{{"&&o.slice(-2)==="}}"){let i=o.slice(2,-2);return new Tb({variableName:i,optional:!0})}else if(typeof o=="string"&&o[0]==="{"&&o[o.length-1]==="}"){let i=o.slice(1,-1);return new Tb({variableName:i,optional:!0})}throw new Error(`Invalid placeholder template for format ${e?.templateFormat??'"f-string"'}: "${t[1]}". Expected a variable name surrounded by ${e?.templateFormat==="mustache"?"double":"single"} curly braces.`)}let r=Wg(t),n;if(typeof r.content=="string"?n=r.content:n=r.content.map(o=>"text"in o?{...o,text:o.text}:"image_url"in o?{...o,image_url:o.image_url}:o),r._getType()==="human")return Ab.fromTemplate(n,e);if(r._getType()==="ai")return lme.fromTemplate(n,e);if(r._getType()==="system")return gE.fromTemplate(n,e);if(gs.isInstance(r))return ume.fromTemplate(r.content,r.role,e);throw new Error(`Could not coerce message prompt template from input. Received message type: "${r._getType()}".`)}function ltr(t){return t.constructor.lc_name()==="MessagesPlaceholder"}var d2,Tb,sme,f2,ume,p2,Ab,lme,gE,cp,m2=O(()=>{YM();o2();vf();i2();wL();CL();nme();rR();Uz();ame();d2=class extends vn{constructor(){super(...arguments),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","prompts","chat"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0})}async invoke(e,r){return this._callWithConfig(n=>this.formatMessages(n),e,{...r,runType:"prompt"})}},Tb=class extends d2{static lc_name(){return"MessagesPlaceholder"}constructor(e){typeof e=="string"&&(e={variableName:e}),super(e),Object.defineProperty(this,"variableName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"optional",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.variableName=e.variableName,this.optional=e.optional??!1}get inputVariables(){return[this.variableName]}async formatMessages(e){let r=e[this.variableName];if(this.optional&&!r)return[];if(!r){let o=new Error(`Field "${this.variableName}" in prompt uses a MessagesPlaceholder, which expects an array of BaseMessages as an input value. Received: undefined`);throw o.name="InputFormatError",o}let n;try{Array.isArray(r)?n=r.map(Wg):n=[Wg(r)]}catch(o){let i=typeof r=="string"?r:JSON.stringify(r,null,2),a=new Error([`Field "${this.variableName}" in prompt uses a MessagesPlaceholder, which expects an array of BaseMessages or coerceable values as input.`,`Received value: ${i}`,`Additional message: ${o.message}`].join(`

`));throw a.name="InputFormatError",a.lc_error_code=o.lc_error_code,a}return n}},sme=class extends d2{constructor(e){"prompt"in e||(e={prompt:e}),super(e),Object.defineProperty(this,"prompt",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.prompt=e.prompt}get inputVariables(){return this.prompt.inputVariables}async formatMessages(e){return[await this.format(e)]}},f2=class extends Eb{constructor(e){super(e)}async format(e){return(await this.formatPromptValue(e)).toString()}async formatPromptValue(e){let r=await this.formatMessages(e);return new vL(r)}},ume=class extends sme{static lc_name(){return"ChatMessagePromptTemplate"}constructor(e,r){"prompt"in e||(e={prompt:e,role:r}),super(e),Object.defineProperty(this,"role",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.role=e.role}async format(e){return new gs(await this.prompt.format(e),this.role)}static fromTemplate(e,r,n){return new this(wd.fromTemplate(e,{templateFormat:n?.templateFormat}),r)}};p2=class extends d2{static _messageClass(){throw new Error("Can not invoke _messageClass from inside _StringImageMessagePromptTemplate")}constructor(e,r){if("prompt"in e||(e={prompt:e}),super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","prompts","chat"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"inputVariables",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"additionalOptions",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"prompt",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"messageClass",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"chatMessageClass",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.prompt=e.prompt,Array.isArray(this.prompt)){let n=[];this.prompt.forEach(o=>{"inputVariables"in o&&(n=n.concat(o.inputVariables))}),this.inputVariables=n}else this.inputVariables=this.prompt.inputVariables;this.additionalOptions=r??this.additionalOptions}createMessage(e){let r=this.constructor;if(r._messageClass()){let n=r._messageClass();return new n({content:e})}else if(r.chatMessageClass){let n=r.chatMessageClass();return new n({content:e,role:this.getRoleFromMessageClass(n.lc_name())})}else throw new Error("No message class defined")}getRoleFromMessageClass(e){switch(e){case"HumanMessage":return"human";case"AIMessage":return"ai";case"SystemMessage":return"system";case"ChatMessage":return"chat";default:throw new Error("Invalid message class name")}}static fromTemplate(e,r){if(typeof e=="string")return new this(wd.fromTemplate(e,r));let n=[];for(let o of e)if(typeof o=="string")n.push(wd.fromTemplate(o,r));else if(o!==null)if(itr(o)){let i="";typeof o.text=="string"&&(i=o.text??"");let a={...r,additionalContentFields:o};n.push(wd.fromTemplate(i,a))}else if(atr(o)){let i=o.image_url??"",a,s=[];if(typeof i=="string"){let u;r?.templateFormat==="mustache"?u=XK(i):u=u2(i);let l=u.flatMap(c=>c.type==="variable"?[c.name]:[]);if((l?.length??0)>0){if(l.length>1)throw new Error(`Only one format variable allowed per image template.
Got: ${l}
From: ${i}`);s=[l[0]]}else s=[];i={url:i},a=new OL({template:i,inputVariables:s,templateFormat:r?.templateFormat,additionalContentFields:o})}else if(typeof i=="object"){if("url"in i){let u;r?.templateFormat==="mustache"?u=XK(i.url):u=u2(i.url),s=u.flatMap(l=>l.type==="variable"?[l.name]:[])}else s=[];a=new OL({template:i,inputVariables:s,templateFormat:r?.templateFormat,additionalContentFields:o})}else throw new Error("Invalid image template");n.push(a)}else typeof o=="object"&&n.push(new c2({template:o,templateFormat:r?.templateFormat}));return new this({prompt:n,additionalOptions:r})}async format(e){if(this.prompt instanceof dC){let r=await this.prompt.format(e);return this.createMessage(r)}else{let r=[];for(let n of this.prompt){let o={};if(!("inputVariables"in n))throw new Error(`Prompt ${n} does not have inputVariables defined.`);for(let i of n.inputVariables)o||(o={[i]:e[i]}),o={...o,[i]:e[i]};if(n instanceof dC){let i=await n.format(o),a;"additionalContentFields"in n&&(a=n.additionalContentFields),r.push({...a,type:"text",text:i})}else if(n instanceof OL){let i=await n.format(o),a;"additionalContentFields"in n&&(a=n.additionalContentFields),r.push({...a,type:"image_url",image_url:i})}else if(n instanceof c2){let i=await n.format(o),a;"additionalContentFields"in n&&(a=n.additionalContentFields),r.push({...a,...i})}}return this.createMessage(r)}}async formatMessages(e){return[await this.format(e)]}},Ab=class extends p2{static _messageClass(){return ys}static lc_name(){return"HumanMessagePromptTemplate"}},lme=class extends p2{static _messageClass(){return mn}static lc_name(){return"AIMessagePromptTemplate"}},gE=class extends p2{static _messageClass(){return iC}static lc_name(){return"SystemMessagePromptTemplate"}};cp=class t extends f2{static lc_name(){return"ChatPromptTemplate"}get lc_aliases(){return{promptMessages:"messages"}}constructor(e){if(super(e),Object.defineProperty(this,"promptMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"validateTemplate",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"templateFormat",{enumerable:!0,configurable:!0,writable:!0,value:"f-string"}),e.templateFormat==="mustache"&&e.validateTemplate===void 0&&(this.validateTemplate=!1),Object.assign(this,e),this.validateTemplate){let r=new Set;for(let s of this.promptMessages)if(!(s instanceof fl))for(let u of s.inputVariables)r.add(u);let n=this.inputVariables,o=new Set(this.partialVariables?n.concat(Object.keys(this.partialVariables)):n),i=new Set([...o].filter(s=>!r.has(s)));if(i.size>0)throw new Error(`Input variables \`${[...i]}\` are not used in any of the prompt messages.`);let a=new Set([...r].filter(s=>!o.has(s)));if(a.size>0)throw new Error(`Input variables \`${[...a]}\` are used in prompt messages but not in the prompt template.`)}}_getPromptType(){return"chat"}async _parseImagePrompts(e,r){if(typeof e.content=="string")return e;let n=await Promise.all(e.content.map(async o=>{if(o.type!=="image_url")return o;let i="";typeof o.image_url=="string"?i=o.image_url:i=o.image_url.url;let s=await wd.fromTemplate(i,{templateFormat:this.templateFormat}).format(r);return typeof o.image_url!="string"&&"url"in o.image_url?o.image_url.url=s:o.image_url=s,o}));return e.content=n,e}async formatMessages(e){let r=await this.mergePartialAndUserVariables(e),n=[];for(let o of this.promptMessages)if(o instanceof fl)n.push(await this._parseImagePrompts(o,r));else{let i=o.inputVariables.reduce((s,u)=>{if(!(u in r)&&!(ltr(o)&&o.optional))throw sE(new Error(`Missing value for input variable \`${u.toString()}\``),"INVALID_PROMPT_INPUT");return s[u]=r[u],s},{}),a=await o.formatMessages(i);n=n.concat(a)}return n}async partial(e){let r=this.inputVariables.filter(i=>!(i in e)),n={...this.partialVariables??{},...e},o={...this,inputVariables:r,partialVariables:n};return new t(o)}static fromTemplate(e,r){let n=wd.fromTemplate(e,r),o=new Ab({prompt:n});return this.fromMessages([o])}static fromMessages(e,r){let n=e.reduce((a,s)=>a.concat(s instanceof t?s.promptMessages:[utr(s,r)]),[]),o=e.reduce((a,s)=>s instanceof t?Object.assign(a,s.partialVariables):a,Object.create(null)),i=new Set;for(let a of n)if(!(a instanceof fl))for(let s of a.inputVariables)s in o||i.add(s);return new this({...r,inputVariables:[...i],promptMessages:n,partialVariables:o,templateFormat:r?.templateFormat})}static fromPromptMessages(e){return this.fromMessages(e)}}});var P2e={};Zf(P2e,{FewShotChatMessagePromptTemplate:()=>dme,FewShotPromptTemplate:()=>cme});var cme,dme,fme=O(()=>{i2();rR();CL();m2();cme=class t extends dC{constructor(e){if(super(e),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"examples",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"exampleSelector",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"examplePrompt",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"suffix",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(this,"exampleSeparator",{enumerable:!0,configurable:!0,writable:!0,value:`

`}),Object.defineProperty(this,"prefix",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(this,"templateFormat",{enumerable:!0,configurable:!0,writable:!0,value:"f-string"}),Object.defineProperty(this,"validateTemplate",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.assign(this,e),this.examples!==void 0&&this.exampleSelector!==void 0)throw new Error("Only one of 'examples' and 'example_selector' should be provided");if(this.examples===void 0&&this.exampleSelector===void 0)throw new Error("One of 'examples' and 'example_selector' should be provided");if(this.validateTemplate){let r=this.inputVariables;this.partialVariables&&(r=r.concat(Object.keys(this.partialVariables))),tR(this.prefix+this.suffix,this.templateFormat,r)}}_getPromptType(){return"few_shot"}static lc_name(){return"FewShotPromptTemplate"}async getExamples(e){if(this.examples!==void 0)return this.examples;if(this.exampleSelector!==void 0)return this.exampleSelector.selectExamples(e);throw new Error("One of 'examples' and 'example_selector' should be provided")}async partial(e){let r=this.inputVariables.filter(i=>!(i in e)),n={...this.partialVariables??{},...e},o={...this,inputVariables:r,partialVariables:n};return new t(o)}async format(e){let r=await this.mergePartialAndUserVariables(e),n=await this.getExamples(r),o=await Promise.all(n.map(a=>this.examplePrompt.format(a))),i=[this.prefix,...o,this.suffix].join(this.exampleSeparator);return lp(i,this.templateFormat,r)}serialize(){if(this.exampleSelector||!this.examples)throw new Error("Serializing an example selector is not currently supported");if(this.outputParser!==void 0)throw new Error("Serializing an output parser is not currently supported");return{_type:this._getPromptType(),input_variables:this.inputVariables,example_prompt:this.examplePrompt.serialize(),example_separator:this.exampleSeparator,suffix:this.suffix,prefix:this.prefix,template_format:this.templateFormat,examples:this.examples}}static async deserialize(e){let{example_prompt:r}=e;if(!r)throw new Error("Missing example prompt");let n=await wd.deserialize(r),o;if(Array.isArray(e.examples))o=e.examples;else throw new Error("Invalid examples format. Only list or string are supported.");return new t({inputVariables:e.input_variables,examplePrompt:n,examples:o,exampleSeparator:e.example_separator,prefix:e.prefix,suffix:e.suffix,templateFormat:e.template_format})}},dme=class t extends f2{_getPromptType(){return"few_shot_chat"}static lc_name(){return"FewShotChatMessagePromptTemplate"}constructor(e){if(super(e),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"examples",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"exampleSelector",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"examplePrompt",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"suffix",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(this,"exampleSeparator",{enumerable:!0,configurable:!0,writable:!0,value:`

`}),Object.defineProperty(this,"prefix",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(this,"templateFormat",{enumerable:!0,configurable:!0,writable:!0,value:"f-string"}),Object.defineProperty(this,"validateTemplate",{enumerable:!0,configurable:!0,writable:!0,value:!0}),this.examples=e.examples,this.examplePrompt=e.examplePrompt,this.exampleSeparator=e.exampleSeparator??`

`,this.exampleSelector=e.exampleSelector,this.prefix=e.prefix??"",this.suffix=e.suffix??"",this.templateFormat=e.templateFormat??"f-string",this.validateTemplate=e.validateTemplate??!0,this.examples!==void 0&&this.exampleSelector!==void 0)throw new Error("Only one of 'examples' and 'example_selector' should be provided");if(this.examples===void 0&&this.exampleSelector===void 0)throw new Error("One of 'examples' and 'example_selector' should be provided");if(this.validateTemplate){let r=this.inputVariables;this.partialVariables&&(r=r.concat(Object.keys(this.partialVariables))),tR(this.prefix+this.suffix,this.templateFormat,r)}}async getExamples(e){if(this.examples!==void 0)return this.examples;if(this.exampleSelector!==void 0)return this.exampleSelector.selectExamples(e);throw new Error("One of 'examples' and 'example_selector' should be provided")}async formatMessages(e){let r=await this.mergePartialAndUserVariables(e),n=await this.getExamples(r);n=n.map(i=>{let a={};return this.examplePrompt.inputVariables.forEach(s=>{a[s]=i[s]}),a});let o=[];for(let i of n){let a=await this.examplePrompt.formatMessages(i);o.push(...a)}return o}async format(e){let r=await this.mergePartialAndUserVariables(e),n=await this.getExamples(r),i=(await Promise.all(n.map(s=>this.examplePrompt.formatMessages(s)))).flat().map(s=>s.content),a=[this.prefix,...i,this.suffix].join(this.exampleSeparator);return lp(a,this.templateFormat,r)}async partial(e){let r=this.inputVariables.filter(i=>!(i in e)),n={...this.partialVariables??{},...e},o={...this,inputVariables:r,partialVariables:n};return new t(o)}}});var Eb,wL=O(()=>{vf();Eb=class extends vn{get lc_attributes(){return{partialVariables:void 0}}constructor(e){super(e),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","prompts",this._getPromptType()]}),Object.defineProperty(this,"inputVariables",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"outputParser",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"partialVariables",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:void 0});let{inputVariables:r}=e;if(r.includes("stop"))throw new Error("Cannot have an input variable named 'stop', as it is used internally, please rename.");Object.assign(this,e)}async mergePartialAndUserVariables(e){let r=this.partialVariables??{},n={};for(let[i,a]of Object.entries(r))typeof a=="string"?n[i]=a:n[i]=await a();return{...n,...e}}async invoke(e,r){let n={...this.metadata,...r?.metadata},o=[...this.tags??[],...r?.tags??[]];return this._callWithConfig(i=>this.formatPromptValue(i),e,{...r,tags:o,metadata:n,runType:"prompt"})}serialize(){throw new Error("Use .toJSON() instead")}static async deserialize(e){switch(e._type){case"prompt":{let{PromptTemplate:r}=await Promise.resolve().then(()=>(CL(),rme));return r.deserialize(e)}case void 0:{let{PromptTemplate:r}=await Promise.resolve().then(()=>(CL(),rme));return r.deserialize({...e,_type:"prompt"})}case"few_shot":{let{FewShotPromptTemplate:r}=await Promise.resolve().then(()=>(fme(),P2e));return r.deserialize(e)}default:throw new Error(`Invalid prompt type in config: ${e._type}`)}}}});var E2e=O(()=>{wL();m2()});var T2e=O(()=>{});var A2e=O(()=>{m2()});var I2e=O(()=>{wL();m2();fme();E2e();CL();T2e();i2();rR();nme();A2e();ame()});var yE=O(()=>{I2e()});var um=O(()=>{Vpe()});var pme,mme=O(()=>{pme=t=>t.map(e=>e.pageContent).join(`

`)});var M2e=O(()=>{mme()});function hh(t,e){let r=`atom${++ctr}`,n={toString(){return(ha.env?ha.env.MODE:void 0)!=="production"&&this.debugLabel?r+":"+this.debugLabel:r}};return typeof t=="function"?n.read=t:(n.init=t,n.read=dtr,n.write=ftr),e&&(n.write=e),n}function dtr(t){return t(this)}function ftr(t,e,r){return e(this,typeof r=="function"?r(t(this)):r)}var ha,ctr,R2e,hme,gme,eG,bme,ptr,mtr,_me,j2e,QK,L2e,N2e,PL,yme,htr,gtr,D2e,bE,F2e,EL,h2,k2e,vme=O(()=>{ha={},ctr=0;R2e=(t,e)=>t.unstable_is?t.unstable_is(e):e===t,hme=t=>"init"in t,gme=t=>!!t.write,eG=new WeakMap,bme=t=>{var e;return _me(t)&&!((e=eG.get(t))!=null&&e[1])},ptr=(t,e)=>{let r=eG.get(t);if(r)r[1]=!0,r[0].forEach(n=>n(e));else if((ha.env?ha.env.MODE:void 0)!=="production")throw new Error("[Bug] cancelable promise not found")},mtr=t=>{if(eG.has(t))return;let e=[new Set,!1];eG.set(t,e);let r=()=>{e[1]=!0};t.then(r,r),t.onCancel=n=>{e[0].add(n)}},_me=t=>typeof t?.then=="function",j2e=t=>"v"in t||"e"in t,QK=t=>{if("e"in t)throw t.e;if((ha.env?ha.env.MODE:void 0)!=="production"&&!("v"in t))throw new Error("[Bug] atom state is not initialized");return t.v},L2e=(t,e,r)=>{r.p.has(t)||(r.p.add(t),e.then(()=>{r.p.delete(t)},()=>{r.p.delete(t)}))},N2e=(t,e,r,n,o)=>{var i;if((ha.env?ha.env.MODE:void 0)!=="production"&&n===e)throw new Error("[Bug] atom cannot depend on itself");r.d.set(n,o.n),bme(r.v)&&L2e(e,r.v,o),(i=o.m)==null||i.t.add(e),t&&htr(t,n,e)},PL=()=>[new Map,new Map,new Set],yme=(t,e,r)=>{t[0].has(e)||t[0].set(e,new Set),t[1].set(e,r)},htr=(t,e,r)=>{let n=t[0].get(e);n&&n.add(r)},gtr=(t,e)=>t[0].get(e),D2e=(t,e)=>{t[2].add(e)},bE=t=>{let e,r=!1,n=o=>{try{o()}catch(i){r||(e=i,r=!0)}};for(;t[1].size||t[2].size;){t[0].clear();let o=new Set(t[1].values());t[1].clear();let i=new Set(t[2]);t[2].clear(),o.forEach(a=>{var s;return(s=a.m)==null?void 0:s.l.forEach(n)}),i.forEach(n)}if(r)throw e},F2e=(...[t,e,r,n])=>{let o;(ha.env?ha.env.MODE:void 0)!=="production"&&(o=new Set);let i=(w,S,C)=>{let P="v"in S,E=S.v,A=bme(S.v)?S.v:null;if(_me(C)){mtr(C);for(let I of S.d.keys())L2e(w,C,t(I));S.v=C,delete S.e}else S.v=C,delete S.e;(!P||!Object.is(E,S.v))&&(++S.n,A&&ptr(A,C))},a=(w,S,C)=>{var P;let E=t(S);if(j2e(E)&&(E.m&&!C?.has(S)||Array.from(E.d).every(([$,k])=>a(w,$,C).n===k)))return E;E.d.clear();let A=!0,I=$=>{if(R2e(S,$)){let H=t($);if(!j2e(H))if(hme($))i($,H,$.init);else throw new Error("no atom init");return QK(H)}let k=a(w,$,C);try{return QK(k)}finally{if(A)N2e(w,S,E,$,k);else{let H=PL();N2e(H,S,E,$,k),p(H,S,E),bE(H)}}},R,j,N={get signal(){return R||(R=new AbortController),R.signal},get setSelf(){return(ha.env?ha.env.MODE:void 0)!=="production"&&!gme(S)&&console.warn("setSelf function cannot be used with read-only atom"),!j&&gme(S)&&(j=(...$)=>{if((ha.env?ha.env.MODE:void 0)!=="production"&&A&&console.warn("setSelf function cannot be called in sync"),!A)return f(S,...$)}),j}};try{let $=e(S,I,N);if(i(S,E,$),_me($)){(P=$.onCancel)==null||P.call($,()=>R?.abort());let k=()=>{if(E.m){let H=PL();p(H,S,E),bE(H)}};$.then(k,k)}return E}catch($){return delete E.v,E.e=$,++E.n,E}finally{A=!1}},s=w=>QK(a(void 0,w)),u=(w,S,C)=>{var P,E;let A=new Map;for(let I of((P=C.m)==null?void 0:P.t)||[])A.set(I,t(I));for(let I of C.p)A.set(I,t(I));return(E=gtr(w,S))==null||E.forEach(I=>{A.set(I,t(I))}),A};function l(w,S,C){let P=[],E=new Set,A=new Set,I=[[S,C]];for(;I.length>0;){let[R,j]=I[I.length-1];if(A.has(R)){I.pop();continue}if(E.has(R)){P.push([R,j,j.n]),A.add(R),I.pop();continue}E.add(R);for(let[N,$]of u(w,R,j))R!==N&&!E.has(N)&&I.push([N,$])}return[P,A]}let c=(w,S,C)=>{let[P,E]=l(w,S,C),A=new Set([S]);for(let I=P.length-1;I>=0;--I){let[R,j,N]=P[I],$=!1;for(let k of j.d.keys())if(k!==R&&A.has(k)){$=!0;break}$&&(a(w,R,E),p(w,R,j),N!==j.n&&(yme(w,R,j),A.add(R))),E.delete(R)}},d=(w,S,...C)=>{let P=!0,E=I=>QK(a(w,I)),A=(I,...R)=>{let j=t(I);try{if(R2e(S,I)){if(!hme(I))throw new Error("atom not writable");let N=j.n,$=R[0];i(I,j,$),p(w,I,j),N!==j.n&&(yme(w,I,j),c(w,I,j));return}else return d(w,I,...R)}finally{P||bE(w)}};try{return r(S,E,A,...C)}finally{P=!1}},f=(w,...S)=>{let C=PL();try{return d(C,w,...S)}finally{bE(C)}},p=(w,S,C)=>{if(C.m&&!bme(C.v)){for(let P of C.d.keys())C.m.d.has(P)||(m(w,P,t(P)).t.add(S),C.m.d.add(P));for(let P of C.m.d||[])if(!C.d.has(P)){C.m.d.delete(P);let E=h(w,P,t(P));E?.t.delete(S)}}},m=(w,S,C)=>{if(!C.m){a(w,S);for(let P of C.d.keys())m(w,P,t(P)).t.add(S);if(C.m={l:new Set,d:new Set(C.d.keys()),t:new Set},(ha.env?ha.env.MODE:void 0)!=="production"&&o.add(S),gme(S)){let P=C.m,E,A=(I,R)=>{let j=!0;E=(...N)=>{try{return d(I,S,...N)}finally{j||bE(I)}};try{return R()}finally{j=!1}};D2e(w,()=>{let I=A(w,()=>n(S,(...R)=>E(...R)));I&&(P.u=R=>A(R,I))})}}return C.m},h=(w,S,C)=>{if(C.m&&!C.m.l.size&&!Array.from(C.m.t).some(P=>{var E;return(E=t(P).m)==null?void 0:E.d.has(S)})){let P=C.m.u;P&&D2e(w,()=>P(w)),delete C.m,(ha.env?ha.env.MODE:void 0)!=="production"&&o.delete(S);for(let E of C.d.keys()){let A=h(w,E,t(E));A?.t.delete(S)}return}return C.m},y={get:s,set:f,sub:(w,S)=>{let C=PL(),P=t(w),A=m(C,w,P).l;return A.add(S),bE(C),()=>{A.delete(S);let I=PL();h(I,w,P),bE(I)}},unstable_derive:w=>F2e(...w(t,e,r,n))};return(ha.env?ha.env.MODE:void 0)!=="production"&&Object.assign(y,{dev4_get_internal_weak_map:()=>({get:S=>{let C=t(S);if(C.n!==0)return C}}),dev4_get_mounted_atoms:()=>o,dev4_restore_atoms:S=>{let C=PL();for(let[P,E]of S)if(hme(P)){let A=t(P),I=A.n;i(P,A,E),p(C,P,A),I!==A.n&&(yme(C,P,A),c(C,P,A))}bE(C)}}),y},EL=()=>{let t=new WeakMap;return F2e(r=>{if((ha.env?ha.env.MODE:void 0)!=="production"&&!r)throw new Error("Atom is undefined or null");let n=t.get(r);return n||(n={d:new Map,p:new Set,n:0},t.set(r,n)),n},(r,...n)=>r.read(...n),(r,...n)=>r.write(...n),(r,...n)=>{var o;return(o=r.onMount)==null?void 0:o.call(r,...n)})},k2e=()=>(h2||(h2=EL(),(ha.env?ha.env.MODE:void 0)!=="production"&&(globalThis.__JOTAI_DEFAULT_STORE__||(globalThis.__JOTAI_DEFAULT_STORE__=h2),globalThis.__JOTAI_DEFAULT_STORE__!==h2&&console.warn("Detected multiple Jotai instances. It may cause unexpected behavior with the default store. https://github.com/pmndrs/jotai/discussions/2044"))),h2)});var J2e=v(En=>{"use strict";var g2=Symbol.for("react.element"),ytr=Symbol.for("react.portal"),btr=Symbol.for("react.fragment"),_tr=Symbol.for("react.strict_mode"),vtr=Symbol.for("react.profiler"),wtr=Symbol.for("react.provider"),Str=Symbol.for("react.context"),xtr=Symbol.for("react.forward_ref"),Ctr=Symbol.for("react.suspense"),Otr=Symbol.for("react.memo"),Ptr=Symbol.for("react.lazy"),$2e=Symbol.iterator;function Etr(t){return t===null||typeof t!="object"?null:(t=$2e&&t[$2e]||t["@@iterator"],typeof t=="function"?t:null)}var U2e={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},z2e=Object.assign,H2e={};function TL(t,e,r){this.props=t,this.context=e,this.refs=H2e,this.updater=r||U2e}TL.prototype.isReactComponent={};TL.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};TL.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function V2e(){}V2e.prototype=TL.prototype;function Sme(t,e,r){this.props=t,this.context=e,this.refs=H2e,this.updater=r||U2e}var xme=Sme.prototype=new V2e;xme.constructor=Sme;z2e(xme,TL.prototype);xme.isPureReactComponent=!0;var B2e=Array.isArray,W2e=Object.prototype.hasOwnProperty,Cme={current:null},K2e={key:!0,ref:!0,__self:!0,__source:!0};function G2e(t,e,r){var n,o={},i=null,a=null;if(e!=null)for(n in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(i=""+e.key),e)W2e.call(e,n)&&!K2e.hasOwnProperty(n)&&(o[n]=e[n]);var s=arguments.length-2;if(s===1)o.children=r;else if(1<s){for(var u=Array(s),l=0;l<s;l++)u[l]=arguments[l+2];o.children=u}if(t&&t.defaultProps)for(n in s=t.defaultProps,s)o[n]===void 0&&(o[n]=s[n]);return{$$typeof:g2,type:t,key:i,ref:a,props:o,_owner:Cme.current}}function Ttr(t,e){return{$$typeof:g2,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Ome(t){return typeof t=="object"&&t!==null&&t.$$typeof===g2}function Atr(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var q2e=/\/+/g;function wme(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Atr(""+t.key):e.toString(36)}function rG(t,e,r,n,o){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case g2:case ytr:a=!0}}if(a)return a=t,o=o(a),t=n===""?"."+wme(a,0):n,B2e(o)?(r="",t!=null&&(r=t.replace(q2e,"$&/")+"/"),rG(o,e,r,"",function(l){return l})):o!=null&&(Ome(o)&&(o=Ttr(o,r+(!o.key||a&&a.key===o.key?"":(""+o.key).replace(q2e,"$&/")+"/")+t)),e.push(o)),1;if(a=0,n=n===""?".":n+":",B2e(t))for(var s=0;s<t.length;s++){i=t[s];var u=n+wme(i,s);a+=rG(i,e,r,u,o)}else if(u=Etr(t),typeof u=="function")for(t=u.call(t),s=0;!(i=t.next()).done;)i=i.value,u=n+wme(i,s++),a+=rG(i,e,r,u,o);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function tG(t,e,r){if(t==null)return t;var n=[],o=0;return rG(t,n,"","",function(i){return e.call(r,i,o++)}),n}function Itr(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Sf={current:null},nG={transition:null},Mtr={ReactCurrentDispatcher:Sf,ReactCurrentBatchConfig:nG,ReactCurrentOwner:Cme};En.Children={map:tG,forEach:function(t,e,r){tG(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return tG(t,function(){e++}),e},toArray:function(t){return tG(t,function(e){return e})||[]},only:function(t){if(!Ome(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};En.Component=TL;En.Fragment=btr;En.Profiler=vtr;En.PureComponent=Sme;En.StrictMode=_tr;En.Suspense=Ctr;En.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Mtr;En.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=z2e({},t.props),o=t.key,i=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,a=Cme.current),e.key!==void 0&&(o=""+e.key),t.type&&t.type.defaultProps)var s=t.type.defaultProps;for(u in e)W2e.call(e,u)&&!K2e.hasOwnProperty(u)&&(n[u]=e[u]===void 0&&s!==void 0?s[u]:e[u])}var u=arguments.length-2;if(u===1)n.children=r;else if(1<u){s=Array(u);for(var l=0;l<u;l++)s[l]=arguments[l+2];n.children=s}return{$$typeof:g2,type:t.type,key:o,ref:i,props:n,_owner:a}};En.createContext=function(t){return t={$$typeof:Str,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:wtr,_context:t},t.Consumer=t};En.createElement=G2e;En.createFactory=function(t){var e=G2e.bind(null,t);return e.type=t,e};En.createRef=function(){return{current:null}};En.forwardRef=function(t){return{$$typeof:xtr,render:t}};En.isValidElement=Ome;En.lazy=function(t){return{$$typeof:Ptr,_payload:{_status:-1,_result:t},_init:Itr}};En.memo=function(t,e){return{$$typeof:Otr,type:t,compare:e===void 0?null:e}};En.startTransition=function(t){var e=nG.transition;nG.transition={};try{t()}finally{nG.transition=e}};En.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};En.useCallback=function(t,e){return Sf.current.useCallback(t,e)};En.useContext=function(t){return Sf.current.useContext(t)};En.useDebugValue=function(){};En.useDeferredValue=function(t){return Sf.current.useDeferredValue(t)};En.useEffect=function(t,e){return Sf.current.useEffect(t,e)};En.useId=function(){return Sf.current.useId()};En.useImperativeHandle=function(t,e,r){return Sf.current.useImperativeHandle(t,e,r)};En.useInsertionEffect=function(t,e){return Sf.current.useInsertionEffect(t,e)};En.useLayoutEffect=function(t,e){return Sf.current.useLayoutEffect(t,e)};En.useMemo=function(t,e){return Sf.current.useMemo(t,e)};En.useReducer=function(t,e,r){return Sf.current.useReducer(t,e,r)};En.useRef=function(t){return Sf.current.useRef(t)};En.useState=function(t){return Sf.current.useState(t)};En.useSyncExternalStore=function(t,e,r){return Sf.current.useSyncExternalStore(t,e,r)};En.useTransition=function(){return Sf.current.useTransition()};En.version="18.2.0"});var X=v((kLn,Y2e)=>{"use strict";Y2e.exports=J2e()});function y2(t,e){let r=X2e(e),[[n,o,i],a]=(0,Sd.useReducer)(l=>{let c=r.get(t);return Object.is(l[0],c)&&l[1]===r&&l[2]===t?l:[c,r,t]},void 0,()=>[r.get(t),r,t]),s=n;(o!==r||i!==t)&&(a(),s=r.get(t));let u=e?.delay;if((0,Sd.useEffect)(()=>{let l=r.sub(t,()=>{if(typeof u=="number"){let c=r.get(t);Eme(c)&&Q2e(Z2e(c)),setTimeout(a,u);return}a()});return a(),l},[r,t,u]),(0,Sd.useDebugValue)(s),Eme(s)){let l=Z2e(s);return jtr(l)}return s}function Ntr(t,e){let r=X2e(e);return(0,Sd.useCallback)((...o)=>{if((oG.env?oG.env.MODE:void 0)!=="production"&&!("write"in t))throw new Error("not writable atom");return r.set(t,...o)},[r,t])}function b2(t,e){return[y2(t,e),Ntr(t,e)]}var Sd,oG,Rtr,X2e,Eme,Q2e,jtr,Pme,Z2e,e4e=O(()=>{"use client";Sd=F(X(),1);vme();oG={},Rtr=(0,Sd.createContext)(void 0),X2e=t=>{let e=(0,Sd.useContext)(Rtr);return t?.store||e||k2e()},Eme=t=>typeof t?.then=="function",Q2e=t=>{t.status="pending",t.then(e=>{t.status="fulfilled",t.value=e},e=>{t.status="rejected",t.reason=e})},jtr=Sd.default.use||(t=>{if(t.status==="pending")throw t;if(t.status==="fulfilled")return t.value;throw t.status==="rejected"?t.reason:(Q2e(t),t)}),Pme=new WeakMap,Z2e=t=>{let e=Pme.get(t);return e||(e=new Promise((r,n)=>{let o=t,i=u=>l=>{o===u&&r(l)},a=u=>l=>{o===u&&n(l)},s=u=>{"onCancel"in u&&typeof u.onCancel=="function"&&u.onCancel(l=>{if((oG.env?oG.env.MODE:void 0)!=="production"&&l===u)throw new Error("[Bug] p is not updated even after cancelation");Eme(l)?(Pme.set(l,e),o=l,l.then(i(l),a(l)),s(l)):r(l)})};t.then(i(t),a(t)),s(t)}),Pme.set(t,e)),e}});var _2=O(()=>{vme();e4e()});function _E(t){let e=Dtr({...ue(),...t});rs.set(nR,e)}function dt(t,e){let r=ue();_E({...r,[t]:e})}function ue(){return rs.get(nR)}function r4e(){let t={...dp,activeModels:Mb.map(e=>({...e,enabled:!0})),activeEmbeddingModels:oR.map(e=>({...e,enabled:!0}))};_E(t)}function ga(t){let e=ue();return rs.sub(nR,()=>{let r=ue();t(e,r),e=r})}function Tn(){return y2(nR,{store:rs})}function n4e(t){let e=t||dp;e.userId||(e.userId=Jx()),e.activeEmbeddingModels?e.activeEmbeddingModels=e.activeEmbeddingModels.map(u=>({...u,provider:u.provider==="azure_openai"?"azure openai":u.provider})):e.activeEmbeddingModels=oR.map(u=>({...u,enabled:!0}));let r={...e},n=Number(e.temperature);r.temperature=isNaN(n)?dp.temperature:n;let o=Number(e.maxTokens);r.maxTokens=isNaN(o)?dp.maxTokens:o;let i=Number(e.contextTurns);r.contextTurns=isNaN(i)?dp.contextTurns:i;let a=Number(e.embeddingRequestsPerMin);r.embeddingRequestsPerMin=isNaN(a)?dp.embeddingRequestsPerMin:a;let s=Number(e.embeddingBatchSize);return r.embeddingBatchSize=isNaN(s)?dp.embeddingBatchSize:s,typeof r.includeActiveNoteAsContext!="boolean"&&(r.includeActiveNoteAsContext=dp.includeActiveNoteAsContext),typeof r.passMarkdownImages!="boolean"&&(r.passMarkdownImages=dp.passMarkdownImages),typeof r.enableCustomPromptTemplating!="boolean"&&(r.enableCustomPromptTemplating=dp.enableCustomPromptTemplating),typeof r.allowAdditionalContext!="boolean"&&(r.allowAdditionalContext=dp.allowAdditionalContext),typeof r.enableWordCompletion!="boolean"&&(r.enableWordCompletion=dp.enableWordCompletion),r}function o4e(){return ue().isPlusUser?a4e:""}function Ib(){let t=ue().userSystemPrompt,e=i4e;return t?`${e}
<user_custom_instructions>
${t}
</user_custom_instructions>`:e}function Dtr(t){return t.activeModels=t4e(t.activeModels,Mb),t.activeEmbeddingModels=t4e(t.activeEmbeddingModels,oR),t}function Fr(t){return`${t.name}|${t.provider}`}function t4e(t,e){let r=new Map;return e.filter(n=>n.core).forEach(n=>{r.set(Fr(n),{...n})}),t.forEach(n=>{let o=Fr(n),i=r.get(o);if(i){let a=e.find(s=>s.name===n.name&&s.provider===n.provider);a?r.set(o,{...a,...n,isBuiltIn:!0,believerExclusive:a.believerExclusive}):r.set(o,{...n,isBuiltIn:i.isBuiltIn})}else r.set(o,n)}),Array.from(r.values())}var rs,nR,tr=O(()=>{_2();wz();kr();rs=EL(),nR=hh(dp)});function ie(...t){ue().debug&&console.log(...t)}function fe(...t){ue().debug&&console.error(...t)}function gh(...t){ue().debug&&console.warn(...t)}var Ko=O(()=>{tr()});var s4e=v((Tme,AL)=>{(function(t,e){typeof Tme=="object"&&typeof AL<"u"?AL.exports=e():typeof define=="function"&&define.amd?define(e):t.moment=e()})(Tme,function(){"use strict";var t;function e(){return t.apply(null,arguments)}function r(_){t=_}function n(_){return _ instanceof Array||Object.prototype.toString.call(_)==="[object Array]"}function o(_){return _!=null&&Object.prototype.toString.call(_)==="[object Object]"}function i(_,x){return Object.prototype.hasOwnProperty.call(_,x)}function a(_){if(Object.getOwnPropertyNames)return Object.getOwnPropertyNames(_).length===0;var x;for(x in _)if(i(_,x))return!1;return!0}function s(_){return _===void 0}function u(_){return typeof _=="number"||Object.prototype.toString.call(_)==="[object Number]"}function l(_){return _ instanceof Date||Object.prototype.toString.call(_)==="[object Date]"}function c(_,x){var T=[],M,L=_.length;for(M=0;M<L;++M)T.push(x(_[M],M));return T}function d(_,x){for(var T in x)i(x,T)&&(_[T]=x[T]);return i(x,"toString")&&(_.toString=x.toString),i(x,"valueOf")&&(_.valueOf=x.valueOf),_}function f(_,x,T,M){return Uke(_,x,T,M,!0).utc()}function p(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function m(_){return _._pf==null&&(_._pf=p()),_._pf}var h;Array.prototype.some?h=Array.prototype.some:h=function(_){var x=Object(this),T=x.length>>>0,M;for(M=0;M<T;M++)if(M in x&&_.call(this,x[M],M,x))return!0;return!1};function b(_){if(_._isValid==null){var x=m(_),T=h.call(x.parsedDateParts,function(L){return L!=null}),M=!isNaN(_._d.getTime())&&x.overflow<0&&!x.empty&&!x.invalidEra&&!x.invalidMonth&&!x.invalidWeekday&&!x.weekdayMismatch&&!x.nullInput&&!x.invalidFormat&&!x.userInvalidated&&(!x.meridiem||x.meridiem&&T);if(_._strict&&(M=M&&x.charsLeftOver===0&&x.unusedTokens.length===0&&x.bigHour===void 0),Object.isFrozen==null||!Object.isFrozen(_))_._isValid=M;else return M}return _._isValid}function g(_){var x=f(NaN);return _!=null?d(m(x),_):m(x).userInvalidated=!0,x}var y=e.momentProperties=[],w=!1;function S(_,x){var T,M,L,Z=y.length;if(s(x._isAMomentObject)||(_._isAMomentObject=x._isAMomentObject),s(x._i)||(_._i=x._i),s(x._f)||(_._f=x._f),s(x._l)||(_._l=x._l),s(x._strict)||(_._strict=x._strict),s(x._tzm)||(_._tzm=x._tzm),s(x._isUTC)||(_._isUTC=x._isUTC),s(x._offset)||(_._offset=x._offset),s(x._pf)||(_._pf=m(x)),s(x._locale)||(_._locale=x._locale),Z>0)for(T=0;T<Z;T++)M=y[T],L=x[M],s(L)||(_[M]=L);return _}function C(_){S(this,_),this._d=new Date(_._d!=null?_._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),w===!1&&(w=!0,e.updateOffset(this),w=!1)}function P(_){return _ instanceof C||_!=null&&_._isAMomentObject!=null}function E(_){e.suppressDeprecationWarnings===!1&&typeof console<"u"&&console.warn&&console.warn("Deprecation warning: "+_)}function A(_,x){var T=!0;return d(function(){if(e.deprecationHandler!=null&&e.deprecationHandler(null,_),T){var M=[],L,Z,he,Qt=arguments.length;for(Z=0;Z<Qt;Z++){if(L="",typeof arguments[Z]=="object"){L+=`
[`+Z+"] ";for(he in arguments[0])i(arguments[0],he)&&(L+=he+": "+arguments[0][he]+", ");L=L.slice(0,-2)}else L=arguments[Z];M.push(L)}E(_+`
Arguments: `+Array.prototype.slice.call(M).join("")+`
`+new Error().stack),T=!1}return x.apply(this,arguments)},x)}var I={};function R(_,x){e.deprecationHandler!=null&&e.deprecationHandler(_,x),I[_]||(E(x),I[_]=!0)}e.suppressDeprecationWarnings=!1,e.deprecationHandler=null;function j(_){return typeof Function<"u"&&_ instanceof Function||Object.prototype.toString.call(_)==="[object Function]"}function N(_){var x,T;for(T in _)i(_,T)&&(x=_[T],j(x)?this[T]=x:this["_"+T]=x);this._config=_,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function $(_,x){var T=d({},_),M;for(M in x)i(x,M)&&(o(_[M])&&o(x[M])?(T[M]={},d(T[M],_[M]),d(T[M],x[M])):x[M]!=null?T[M]=x[M]:delete T[M]);for(M in _)i(_,M)&&!i(x,M)&&o(_[M])&&(T[M]=d({},T[M]));return T}function k(_){_!=null&&this.set(_)}var H;Object.keys?H=Object.keys:H=function(_){var x,T=[];for(x in _)i(_,x)&&T.push(x);return T};var V={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function Q(_,x,T){var M=this._calendar[_]||this._calendar.sameElse;return j(M)?M.call(x,T):M}function G(_,x,T){var M=""+Math.abs(_),L=x-M.length,Z=_>=0;return(Z?T?"+":"":"-")+Math.pow(10,Math.max(0,L)).toString().substr(1)+M}var D=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,B=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,q={},K={};function U(_,x,T,M){var L=M;typeof M=="string"&&(L=function(){return this[M]()}),_&&(K[_]=L),x&&(K[x[0]]=function(){return G(L.apply(this,arguments),x[1],x[2])}),T&&(K[T]=function(){return this.localeData().ordinal(L.apply(this,arguments),_)})}function te(_){return _.match(/\[[\s\S]/)?_.replace(/^\[|\]$/g,""):_.replace(/\\/g,"")}function z(_){var x=_.match(D),T,M;for(T=0,M=x.length;T<M;T++)K[x[T]]?x[T]=K[x[T]]:x[T]=te(x[T]);return function(L){var Z="",he;for(he=0;he<M;he++)Z+=j(x[he])?x[he].call(L,_):x[he];return Z}}function W(_,x){return _.isValid()?(x=Y(x,_.localeData()),q[x]=q[x]||z(x),q[x](_)):_.localeData().invalidDate()}function Y(_,x){var T=5;function M(L){return x.longDateFormat(L)||L}for(B.lastIndex=0;T>=0&&B.test(_);)_=_.replace(B,M),B.lastIndex=0,T-=1;return _}var ae={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function we(_){var x=this._longDateFormat[_],T=this._longDateFormat[_.toUpperCase()];return x||!T?x:(this._longDateFormat[_]=T.match(D).map(function(M){return M==="MMMM"||M==="MM"||M==="DD"||M==="dddd"?M.slice(1):M}).join(""),this._longDateFormat[_])}var de="Invalid date";function Ue(){return this._invalidDate}var Ve="%d",rt=/\d{1,2}/;function lr(_){return this._ordinal.replace("%d",_)}var bn={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function Le(_,x,T,M){var L=this._relativeTime[T];return j(L)?L(_,x,T,M):L.replace(/%d/i,_)}function gt(_,x){var T=this._relativeTime[_>0?"future":"past"];return j(T)?T(x):T.replace(/%s/i,x)}var vt={};function pt(_,x){var T=_.toLowerCase();vt[T]=vt[T+"s"]=vt[x]=_}function ee(_){return typeof _=="string"?vt[_]||vt[_.toLowerCase()]:void 0}function et(_){var x={},T,M;for(M in _)i(_,M)&&(T=ee(M),T&&(x[T]=_[M]));return x}var Re={};function Pe(_,x){Re[_]=x}function oe(_){var x=[],T;for(T in _)i(_,T)&&x.push({unit:T,priority:Re[T]});return x.sort(function(M,L){return M.priority-L.priority}),x}function se(_){return _%4===0&&_%100!==0||_%400===0}function le(_){return _<0?Math.ceil(_)||0:Math.floor(_)}function Oe(_){var x=+_,T=0;return x!==0&&isFinite(x)&&(T=le(x)),T}function Je(_,x){return function(T){return T!=null?(Ji(this,_,T),e.updateOffset(this,x),this):nr(this,_)}}function nr(_,x){return _.isValid()?_._d["get"+(_._isUTC?"UTC":"")+x]():NaN}function Ji(_,x,T){_.isValid()&&!isNaN(T)&&(x==="FullYear"&&se(_.year())&&_.month()===1&&_.date()===29?(T=Oe(T),_._d["set"+(_._isUTC?"UTC":"")+x](T,_.month(),d9(T,_.month()))):_._d["set"+(_._isUTC?"UTC":"")+x](T))}function Ni(_){return _=ee(_),j(this[_])?this[_]():this}function cc(_,x){if(typeof _=="object"){_=et(_);var T=oe(_),M,L=T.length;for(M=0;M<L;M++)this[T[M].unit](_[T[M].unit])}else if(_=ee(_),j(this[_]))return this[_](x);return this}var cd=/\d/,Di=/\d\d/,Jf=/\d{3}/,rf=/\d{4}/,nf=/[+-]?\d{6}/,_n=/\d\d?/,of=/\d\d\d\d?/,$x=/\d\d\d\d\d\d?/,bb=/\d{1,3}/,Xa=/\d{1,4}/,Is=/[+-]?\d{1,6}/,Aa=/\d+/,af=/[+-]?\d+/,dd=/Z|[+-]\d\d:?\d\d/gi,ps=/Z|[+-]\d\d(?::?\d\d)?/gi,Yf=/[+-]?\d+(\.\d{1,3})?/,sf=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,Pn;Pn={};function Ye(_,x,T){Pn[_]=j(x)?x:function(M,L){return M&&T?T:x}}function uf(_,x){return i(Pn,_)?Pn[_](x._strict,x._locale):new RegExp(em(_))}function em(_){return cl(_.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(x,T,M,L,Z){return T||M||L||Z}))}function cl(_){return _.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}var Bx={};function Cn(_,x){var T,M=x,L;for(typeof _=="string"&&(_=[_]),u(x)&&(M=function(Z,he){he[x]=Oe(Z)}),L=_.length,T=0;T<L;T++)Bx[_[T]]=M}function Ug(_,x){Cn(_,function(T,M,L,Z){L._w=L._w||{},x(T,L._w,L,Z)})}function pz(_,x,T){x!=null&&i(Bx,_)&&Bx[_](x,T._a,T,_)}var fd=0,qx=1,_b=2,dl=3,zg=4,Ux=5,bM=6,LWt=7,FWt=8;function kWt(_,x){return(_%x+x)%x}var ms;Array.prototype.indexOf?ms=Array.prototype.indexOf:ms=function(_){var x;for(x=0;x<this.length;++x)if(this[x]===_)return x;return-1};function d9(_,x){if(isNaN(_)||isNaN(x))return NaN;var T=kWt(x,12);return _+=(x-T)/12,T===1?se(_)?29:28:31-T%7%2}U("M",["MM",2],"Mo",function(){return this.month()+1}),U("MMM",0,0,function(_){return this.localeData().monthsShort(this,_)}),U("MMMM",0,0,function(_){return this.localeData().months(this,_)}),pt("month","M"),Pe("month",8),Ye("M",_n),Ye("MM",_n,Di),Ye("MMM",function(_,x){return x.monthsShortRegex(_)}),Ye("MMMM",function(_,x){return x.monthsRegex(_)}),Cn(["M","MM"],function(_,x){x[qx]=Oe(_)-1}),Cn(["MMM","MMMM"],function(_,x,T,M){var L=T._locale.monthsParse(_,M,T._strict);L!=null?x[qx]=L:m(T).invalidMonth=_});var $Wt="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),Eke="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),Tke=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,BWt=sf,qWt=sf;function UWt(_,x){return _?n(this._months)?this._months[_.month()]:this._months[(this._months.isFormat||Tke).test(x)?"format":"standalone"][_.month()]:n(this._months)?this._months:this._months.standalone}function zWt(_,x){return _?n(this._monthsShort)?this._monthsShort[_.month()]:this._monthsShort[Tke.test(x)?"format":"standalone"][_.month()]:n(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function HWt(_,x,T){var M,L,Z,he=_.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],M=0;M<12;++M)Z=f([2e3,M]),this._shortMonthsParse[M]=this.monthsShort(Z,"").toLocaleLowerCase(),this._longMonthsParse[M]=this.months(Z,"").toLocaleLowerCase();return T?x==="MMM"?(L=ms.call(this._shortMonthsParse,he),L!==-1?L:null):(L=ms.call(this._longMonthsParse,he),L!==-1?L:null):x==="MMM"?(L=ms.call(this._shortMonthsParse,he),L!==-1?L:(L=ms.call(this._longMonthsParse,he),L!==-1?L:null)):(L=ms.call(this._longMonthsParse,he),L!==-1?L:(L=ms.call(this._shortMonthsParse,he),L!==-1?L:null))}function VWt(_,x,T){var M,L,Z;if(this._monthsParseExact)return HWt.call(this,_,x,T);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),M=0;M<12;M++){if(L=f([2e3,M]),T&&!this._longMonthsParse[M]&&(this._longMonthsParse[M]=new RegExp("^"+this.months(L,"").replace(".","")+"$","i"),this._shortMonthsParse[M]=new RegExp("^"+this.monthsShort(L,"").replace(".","")+"$","i")),!T&&!this._monthsParse[M]&&(Z="^"+this.months(L,"")+"|^"+this.monthsShort(L,""),this._monthsParse[M]=new RegExp(Z.replace(".",""),"i")),T&&x==="MMMM"&&this._longMonthsParse[M].test(_))return M;if(T&&x==="MMM"&&this._shortMonthsParse[M].test(_))return M;if(!T&&this._monthsParse[M].test(_))return M}}function Ake(_,x){var T;if(!_.isValid())return _;if(typeof x=="string"){if(/^\d+$/.test(x))x=Oe(x);else if(x=_.localeData().monthsParse(x),!u(x))return _}return T=Math.min(_.date(),d9(_.year(),x)),_._d["set"+(_._isUTC?"UTC":"")+"Month"](x,T),_}function Ike(_){return _!=null?(Ake(this,_),e.updateOffset(this,!0),this):nr(this,"Month")}function WWt(){return d9(this.year(),this.month())}function KWt(_){return this._monthsParseExact?(i(this,"_monthsRegex")||Mke.call(this),_?this._monthsShortStrictRegex:this._monthsShortRegex):(i(this,"_monthsShortRegex")||(this._monthsShortRegex=BWt),this._monthsShortStrictRegex&&_?this._monthsShortStrictRegex:this._monthsShortRegex)}function GWt(_){return this._monthsParseExact?(i(this,"_monthsRegex")||Mke.call(this),_?this._monthsStrictRegex:this._monthsRegex):(i(this,"_monthsRegex")||(this._monthsRegex=qWt),this._monthsStrictRegex&&_?this._monthsStrictRegex:this._monthsRegex)}function Mke(){function _(he,Qt){return Qt.length-he.length}var x=[],T=[],M=[],L,Z;for(L=0;L<12;L++)Z=f([2e3,L]),x.push(this.monthsShort(Z,"")),T.push(this.months(Z,"")),M.push(this.months(Z,"")),M.push(this.monthsShort(Z,""));for(x.sort(_),T.sort(_),M.sort(_),L=0;L<12;L++)x[L]=cl(x[L]),T[L]=cl(T[L]);for(L=0;L<24;L++)M[L]=cl(M[L]);this._monthsRegex=new RegExp("^("+M.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+T.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+x.join("|")+")","i")}U("Y",0,0,function(){var _=this.year();return _<=9999?G(_,4):"+"+_}),U(0,["YY",2],0,function(){return this.year()%100}),U(0,["YYYY",4],0,"year"),U(0,["YYYYY",5],0,"year"),U(0,["YYYYYY",6,!0],0,"year"),pt("year","y"),Pe("year",1),Ye("Y",af),Ye("YY",_n,Di),Ye("YYYY",Xa,rf),Ye("YYYYY",Is,nf),Ye("YYYYYY",Is,nf),Cn(["YYYYY","YYYYYY"],fd),Cn("YYYY",function(_,x){x[fd]=_.length===2?e.parseTwoDigitYear(_):Oe(_)}),Cn("YY",function(_,x){x[fd]=e.parseTwoDigitYear(_)}),Cn("Y",function(_,x){x[fd]=parseInt(_,10)});function mz(_){return se(_)?366:365}e.parseTwoDigitYear=function(_){return Oe(_)+(Oe(_)>68?1900:2e3)};var Rke=Je("FullYear",!0);function JWt(){return se(this.year())}function YWt(_,x,T,M,L,Z,he){var Qt;return _<100&&_>=0?(Qt=new Date(_+400,x,T,M,L,Z,he),isFinite(Qt.getFullYear())&&Qt.setFullYear(_)):Qt=new Date(_,x,T,M,L,Z,he),Qt}function hz(_){var x,T;return _<100&&_>=0?(T=Array.prototype.slice.call(arguments),T[0]=_+400,x=new Date(Date.UTC.apply(null,T)),isFinite(x.getUTCFullYear())&&x.setUTCFullYear(_)):x=new Date(Date.UTC.apply(null,arguments)),x}function f9(_,x,T){var M=7+x-T,L=(7+hz(_,0,M).getUTCDay()-x)%7;return-L+M-1}function jke(_,x,T,M,L){var Z=(7+T-M)%7,he=f9(_,M,L),Qt=1+7*(x-1)+Z+he,nn,yi;return Qt<=0?(nn=_-1,yi=mz(nn)+Qt):Qt>mz(_)?(nn=_+1,yi=Qt-mz(_)):(nn=_,yi=Qt),{year:nn,dayOfYear:yi}}function gz(_,x,T){var M=f9(_.year(),x,T),L=Math.floor((_.dayOfYear()-M-1)/7)+1,Z,he;return L<1?(he=_.year()-1,Z=L+zx(he,x,T)):L>zx(_.year(),x,T)?(Z=L-zx(_.year(),x,T),he=_.year()+1):(he=_.year(),Z=L),{week:Z,year:he}}function zx(_,x,T){var M=f9(_,x,T),L=f9(_+1,x,T);return(mz(_)-M+L)/7}U("w",["ww",2],"wo","week"),U("W",["WW",2],"Wo","isoWeek"),pt("week","w"),pt("isoWeek","W"),Pe("week",5),Pe("isoWeek",5),Ye("w",_n),Ye("ww",_n,Di),Ye("W",_n),Ye("WW",_n,Di),Ug(["w","ww","W","WW"],function(_,x,T,M){x[M.substr(0,1)]=Oe(_)});function ZWt(_){return gz(_,this._week.dow,this._week.doy).week}var XWt={dow:0,doy:6};function QWt(){return this._week.dow}function e9t(){return this._week.doy}function t9t(_){var x=this.localeData().week(this);return _==null?x:this.add((_-x)*7,"d")}function r9t(_){var x=gz(this,1,4).week;return _==null?x:this.add((_-x)*7,"d")}U("d",0,"do","day"),U("dd",0,0,function(_){return this.localeData().weekdaysMin(this,_)}),U("ddd",0,0,function(_){return this.localeData().weekdaysShort(this,_)}),U("dddd",0,0,function(_){return this.localeData().weekdays(this,_)}),U("e",0,0,"weekday"),U("E",0,0,"isoWeekday"),pt("day","d"),pt("weekday","e"),pt("isoWeekday","E"),Pe("day",11),Pe("weekday",11),Pe("isoWeekday",11),Ye("d",_n),Ye("e",_n),Ye("E",_n),Ye("dd",function(_,x){return x.weekdaysMinRegex(_)}),Ye("ddd",function(_,x){return x.weekdaysShortRegex(_)}),Ye("dddd",function(_,x){return x.weekdaysRegex(_)}),Ug(["dd","ddd","dddd"],function(_,x,T,M){var L=T._locale.weekdaysParse(_,M,T._strict);L!=null?x.d=L:m(T).invalidWeekday=_}),Ug(["d","e","E"],function(_,x,T,M){x[M]=Oe(_)});function n9t(_,x){return typeof _!="string"?_:isNaN(_)?(_=x.weekdaysParse(_),typeof _=="number"?_:null):parseInt(_,10)}function o9t(_,x){return typeof _=="string"?x.weekdaysParse(_)%7||7:isNaN(_)?null:_}function vde(_,x){return _.slice(x,7).concat(_.slice(0,x))}var i9t="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Nke="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),a9t="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),s9t=sf,u9t=sf,l9t=sf;function c9t(_,x){var T=n(this._weekdays)?this._weekdays:this._weekdays[_&&_!==!0&&this._weekdays.isFormat.test(x)?"format":"standalone"];return _===!0?vde(T,this._week.dow):_?T[_.day()]:T}function d9t(_){return _===!0?vde(this._weekdaysShort,this._week.dow):_?this._weekdaysShort[_.day()]:this._weekdaysShort}function f9t(_){return _===!0?vde(this._weekdaysMin,this._week.dow):_?this._weekdaysMin[_.day()]:this._weekdaysMin}function p9t(_,x,T){var M,L,Z,he=_.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],M=0;M<7;++M)Z=f([2e3,1]).day(M),this._minWeekdaysParse[M]=this.weekdaysMin(Z,"").toLocaleLowerCase(),this._shortWeekdaysParse[M]=this.weekdaysShort(Z,"").toLocaleLowerCase(),this._weekdaysParse[M]=this.weekdays(Z,"").toLocaleLowerCase();return T?x==="dddd"?(L=ms.call(this._weekdaysParse,he),L!==-1?L:null):x==="ddd"?(L=ms.call(this._shortWeekdaysParse,he),L!==-1?L:null):(L=ms.call(this._minWeekdaysParse,he),L!==-1?L:null):x==="dddd"?(L=ms.call(this._weekdaysParse,he),L!==-1||(L=ms.call(this._shortWeekdaysParse,he),L!==-1)?L:(L=ms.call(this._minWeekdaysParse,he),L!==-1?L:null)):x==="ddd"?(L=ms.call(this._shortWeekdaysParse,he),L!==-1||(L=ms.call(this._weekdaysParse,he),L!==-1)?L:(L=ms.call(this._minWeekdaysParse,he),L!==-1?L:null)):(L=ms.call(this._minWeekdaysParse,he),L!==-1||(L=ms.call(this._weekdaysParse,he),L!==-1)?L:(L=ms.call(this._shortWeekdaysParse,he),L!==-1?L:null))}function m9t(_,x,T){var M,L,Z;if(this._weekdaysParseExact)return p9t.call(this,_,x,T);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),M=0;M<7;M++){if(L=f([2e3,1]).day(M),T&&!this._fullWeekdaysParse[M]&&(this._fullWeekdaysParse[M]=new RegExp("^"+this.weekdays(L,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[M]=new RegExp("^"+this.weekdaysShort(L,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[M]=new RegExp("^"+this.weekdaysMin(L,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[M]||(Z="^"+this.weekdays(L,"")+"|^"+this.weekdaysShort(L,"")+"|^"+this.weekdaysMin(L,""),this._weekdaysParse[M]=new RegExp(Z.replace(".",""),"i")),T&&x==="dddd"&&this._fullWeekdaysParse[M].test(_))return M;if(T&&x==="ddd"&&this._shortWeekdaysParse[M].test(_))return M;if(T&&x==="dd"&&this._minWeekdaysParse[M].test(_))return M;if(!T&&this._weekdaysParse[M].test(_))return M}}function h9t(_){if(!this.isValid())return _!=null?this:NaN;var x=this._isUTC?this._d.getUTCDay():this._d.getDay();return _!=null?(_=n9t(_,this.localeData()),this.add(_-x,"d")):x}function g9t(_){if(!this.isValid())return _!=null?this:NaN;var x=(this.day()+7-this.localeData()._week.dow)%7;return _==null?x:this.add(_-x,"d")}function y9t(_){if(!this.isValid())return _!=null?this:NaN;if(_!=null){var x=o9t(_,this.localeData());return this.day(this.day()%7?x:x-7)}else return this.day()||7}function b9t(_){return this._weekdaysParseExact?(i(this,"_weekdaysRegex")||wde.call(this),_?this._weekdaysStrictRegex:this._weekdaysRegex):(i(this,"_weekdaysRegex")||(this._weekdaysRegex=s9t),this._weekdaysStrictRegex&&_?this._weekdaysStrictRegex:this._weekdaysRegex)}function _9t(_){return this._weekdaysParseExact?(i(this,"_weekdaysRegex")||wde.call(this),_?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(i(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=u9t),this._weekdaysShortStrictRegex&&_?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function v9t(_){return this._weekdaysParseExact?(i(this,"_weekdaysRegex")||wde.call(this),_?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(i(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=l9t),this._weekdaysMinStrictRegex&&_?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function wde(){function _(lf,Gx){return Gx.length-lf.length}var x=[],T=[],M=[],L=[],Z,he,Qt,nn,yi;for(Z=0;Z<7;Z++)he=f([2e3,1]).day(Z),Qt=cl(this.weekdaysMin(he,"")),nn=cl(this.weekdaysShort(he,"")),yi=cl(this.weekdays(he,"")),x.push(Qt),T.push(nn),M.push(yi),L.push(Qt),L.push(nn),L.push(yi);x.sort(_),T.sort(_),M.sort(_),L.sort(_),this._weekdaysRegex=new RegExp("^("+L.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+M.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+T.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+x.join("|")+")","i")}function Sde(){return this.hours()%12||12}function w9t(){return this.hours()||24}U("H",["HH",2],0,"hour"),U("h",["hh",2],0,Sde),U("k",["kk",2],0,w9t),U("hmm",0,0,function(){return""+Sde.apply(this)+G(this.minutes(),2)}),U("hmmss",0,0,function(){return""+Sde.apply(this)+G(this.minutes(),2)+G(this.seconds(),2)}),U("Hmm",0,0,function(){return""+this.hours()+G(this.minutes(),2)}),U("Hmmss",0,0,function(){return""+this.hours()+G(this.minutes(),2)+G(this.seconds(),2)});function Dke(_,x){U(_,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),x)})}Dke("a",!0),Dke("A",!1),pt("hour","h"),Pe("hour",13);function Lke(_,x){return x._meridiemParse}Ye("a",Lke),Ye("A",Lke),Ye("H",_n),Ye("h",_n),Ye("k",_n),Ye("HH",_n,Di),Ye("hh",_n,Di),Ye("kk",_n,Di),Ye("hmm",of),Ye("hmmss",$x),Ye("Hmm",of),Ye("Hmmss",$x),Cn(["H","HH"],dl),Cn(["k","kk"],function(_,x,T){var M=Oe(_);x[dl]=M===24?0:M}),Cn(["a","A"],function(_,x,T){T._isPm=T._locale.isPM(_),T._meridiem=_}),Cn(["h","hh"],function(_,x,T){x[dl]=Oe(_),m(T).bigHour=!0}),Cn("hmm",function(_,x,T){var M=_.length-2;x[dl]=Oe(_.substr(0,M)),x[zg]=Oe(_.substr(M)),m(T).bigHour=!0}),Cn("hmmss",function(_,x,T){var M=_.length-4,L=_.length-2;x[dl]=Oe(_.substr(0,M)),x[zg]=Oe(_.substr(M,2)),x[Ux]=Oe(_.substr(L)),m(T).bigHour=!0}),Cn("Hmm",function(_,x,T){var M=_.length-2;x[dl]=Oe(_.substr(0,M)),x[zg]=Oe(_.substr(M))}),Cn("Hmmss",function(_,x,T){var M=_.length-4,L=_.length-2;x[dl]=Oe(_.substr(0,M)),x[zg]=Oe(_.substr(M,2)),x[Ux]=Oe(_.substr(L))});function S9t(_){return(_+"").toLowerCase().charAt(0)==="p"}var x9t=/[ap]\.?m?\.?/i,C9t=Je("Hours",!0);function O9t(_,x,T){return _>11?T?"pm":"PM":T?"am":"AM"}var Fke={calendar:V,longDateFormat:ae,invalidDate:de,ordinal:Ve,dayOfMonthOrdinalParse:rt,relativeTime:bn,months:$Wt,monthsShort:Eke,week:XWt,weekdays:i9t,weekdaysMin:a9t,weekdaysShort:Nke,meridiemParse:x9t},ma={},yz={},bz;function P9t(_,x){var T,M=Math.min(_.length,x.length);for(T=0;T<M;T+=1)if(_[T]!==x[T])return T;return M}function kke(_){return _&&_.toLowerCase().replace("_","-")}function E9t(_){for(var x=0,T,M,L,Z;x<_.length;){for(Z=kke(_[x]).split("-"),T=Z.length,M=kke(_[x+1]),M=M?M.split("-"):null;T>0;){if(L=p9(Z.slice(0,T).join("-")),L)return L;if(M&&M.length>=T&&P9t(Z,M)>=T-1)break;T--}x++}return bz}function T9t(_){return _.match("^[^/\\\\]*$")!=null}function p9(_){var x=null,T;if(ma[_]===void 0&&typeof AL<"u"&&AL&&AL.exports&&T9t(_))try{x=bz._abbr,T=require,T("./locale/"+_),ZP(x)}catch{ma[_]=null}return ma[_]}function ZP(_,x){var T;return _&&(s(x)?T=Hx(_):T=xde(_,x),T?bz=T:typeof console<"u"&&console.warn&&console.warn("Locale "+_+" not found. Did you forget to load it?")),bz._abbr}function xde(_,x){if(x!==null){var T,M=Fke;if(x.abbr=_,ma[_]!=null)R("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),M=ma[_]._config;else if(x.parentLocale!=null)if(ma[x.parentLocale]!=null)M=ma[x.parentLocale]._config;else if(T=p9(x.parentLocale),T!=null)M=T._config;else return yz[x.parentLocale]||(yz[x.parentLocale]=[]),yz[x.parentLocale].push({name:_,config:x}),null;return ma[_]=new k($(M,x)),yz[_]&&yz[_].forEach(function(L){xde(L.name,L.config)}),ZP(_),ma[_]}else return delete ma[_],null}function A9t(_,x){if(x!=null){var T,M,L=Fke;ma[_]!=null&&ma[_].parentLocale!=null?ma[_].set($(ma[_]._config,x)):(M=p9(_),M!=null&&(L=M._config),x=$(L,x),M==null&&(x.abbr=_),T=new k(x),T.parentLocale=ma[_],ma[_]=T),ZP(_)}else ma[_]!=null&&(ma[_].parentLocale!=null?(ma[_]=ma[_].parentLocale,_===ZP()&&ZP(_)):ma[_]!=null&&delete ma[_]);return ma[_]}function Hx(_){var x;if(_&&_._locale&&_._locale._abbr&&(_=_._locale._abbr),!_)return bz;if(!n(_)){if(x=p9(_),x)return x;_=[_]}return E9t(_)}function I9t(){return H(ma)}function Cde(_){var x,T=_._a;return T&&m(_).overflow===-2&&(x=T[qx]<0||T[qx]>11?qx:T[_b]<1||T[_b]>d9(T[fd],T[qx])?_b:T[dl]<0||T[dl]>24||T[dl]===24&&(T[zg]!==0||T[Ux]!==0||T[bM]!==0)?dl:T[zg]<0||T[zg]>59?zg:T[Ux]<0||T[Ux]>59?Ux:T[bM]<0||T[bM]>999?bM:-1,m(_)._overflowDayOfYear&&(x<fd||x>_b)&&(x=_b),m(_)._overflowWeeks&&x===-1&&(x=LWt),m(_)._overflowWeekday&&x===-1&&(x=FWt),m(_).overflow=x),_}var M9t=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,R9t=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,j9t=/Z|[+-]\d\d(?::?\d\d)?/,m9=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],Ode=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],N9t=/^\/?Date\((-?\d+)/i,D9t=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,L9t={UT:0,GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function $ke(_){var x,T,M=_._i,L=M9t.exec(M)||R9t.exec(M),Z,he,Qt,nn,yi=m9.length,lf=Ode.length;if(L){for(m(_).iso=!0,x=0,T=yi;x<T;x++)if(m9[x][1].exec(L[1])){he=m9[x][0],Z=m9[x][2]!==!1;break}if(he==null){_._isValid=!1;return}if(L[3]){for(x=0,T=lf;x<T;x++)if(Ode[x][1].exec(L[3])){Qt=(L[2]||" ")+Ode[x][0];break}if(Qt==null){_._isValid=!1;return}}if(!Z&&Qt!=null){_._isValid=!1;return}if(L[4])if(j9t.exec(L[4]))nn="Z";else{_._isValid=!1;return}_._f=he+(Qt||"")+(nn||""),Ede(_)}else _._isValid=!1}function F9t(_,x,T,M,L,Z){var he=[k9t(_),Eke.indexOf(x),parseInt(T,10),parseInt(M,10),parseInt(L,10)];return Z&&he.push(parseInt(Z,10)),he}function k9t(_){var x=parseInt(_,10);return x<=49?2e3+x:x<=999?1900+x:x}function $9t(_){return _.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function B9t(_,x,T){if(_){var M=Nke.indexOf(_),L=new Date(x[0],x[1],x[2]).getDay();if(M!==L)return m(T).weekdayMismatch=!0,T._isValid=!1,!1}return!0}function q9t(_,x,T){if(_)return L9t[_];if(x)return 0;var M=parseInt(T,10),L=M%100,Z=(M-L)/100;return Z*60+L}function Bke(_){var x=D9t.exec($9t(_._i)),T;if(x){if(T=F9t(x[4],x[3],x[2],x[5],x[6],x[7]),!B9t(x[1],T,_))return;_._a=T,_._tzm=q9t(x[8],x[9],x[10]),_._d=hz.apply(null,_._a),_._d.setUTCMinutes(_._d.getUTCMinutes()-_._tzm),m(_).rfc2822=!0}else _._isValid=!1}function U9t(_){var x=N9t.exec(_._i);if(x!==null){_._d=new Date(+x[1]);return}if($ke(_),_._isValid===!1)delete _._isValid;else return;if(Bke(_),_._isValid===!1)delete _._isValid;else return;_._strict?_._isValid=!1:e.createFromInputFallback(_)}e.createFromInputFallback=A("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(_){_._d=new Date(_._i+(_._useUTC?" UTC":""))});function WD(_,x,T){return _??x??T}function z9t(_){var x=new Date(e.now());return _._useUTC?[x.getUTCFullYear(),x.getUTCMonth(),x.getUTCDate()]:[x.getFullYear(),x.getMonth(),x.getDate()]}function Pde(_){var x,T,M=[],L,Z,he;if(!_._d){for(L=z9t(_),_._w&&_._a[_b]==null&&_._a[qx]==null&&H9t(_),_._dayOfYear!=null&&(he=WD(_._a[fd],L[fd]),(_._dayOfYear>mz(he)||_._dayOfYear===0)&&(m(_)._overflowDayOfYear=!0),T=hz(he,0,_._dayOfYear),_._a[qx]=T.getUTCMonth(),_._a[_b]=T.getUTCDate()),x=0;x<3&&_._a[x]==null;++x)_._a[x]=M[x]=L[x];for(;x<7;x++)_._a[x]=M[x]=_._a[x]==null?x===2?1:0:_._a[x];_._a[dl]===24&&_._a[zg]===0&&_._a[Ux]===0&&_._a[bM]===0&&(_._nextDay=!0,_._a[dl]=0),_._d=(_._useUTC?hz:YWt).apply(null,M),Z=_._useUTC?_._d.getUTCDay():_._d.getDay(),_._tzm!=null&&_._d.setUTCMinutes(_._d.getUTCMinutes()-_._tzm),_._nextDay&&(_._a[dl]=24),_._w&&typeof _._w.d<"u"&&_._w.d!==Z&&(m(_).weekdayMismatch=!0)}}function H9t(_){var x,T,M,L,Z,he,Qt,nn,yi;x=_._w,x.GG!=null||x.W!=null||x.E!=null?(Z=1,he=4,T=WD(x.GG,_._a[fd],gz(Yi(),1,4).year),M=WD(x.W,1),L=WD(x.E,1),(L<1||L>7)&&(nn=!0)):(Z=_._locale._week.dow,he=_._locale._week.doy,yi=gz(Yi(),Z,he),T=WD(x.gg,_._a[fd],yi.year),M=WD(x.w,yi.week),x.d!=null?(L=x.d,(L<0||L>6)&&(nn=!0)):x.e!=null?(L=x.e+Z,(x.e<0||x.e>6)&&(nn=!0)):L=Z),M<1||M>zx(T,Z,he)?m(_)._overflowWeeks=!0:nn!=null?m(_)._overflowWeekday=!0:(Qt=jke(T,M,L,Z,he),_._a[fd]=Qt.year,_._dayOfYear=Qt.dayOfYear)}e.ISO_8601=function(){},e.RFC_2822=function(){};function Ede(_){if(_._f===e.ISO_8601){$ke(_);return}if(_._f===e.RFC_2822){Bke(_);return}_._a=[],m(_).empty=!0;var x=""+_._i,T,M,L,Z,he,Qt=x.length,nn=0,yi,lf;for(L=Y(_._f,_._locale).match(D)||[],lf=L.length,T=0;T<lf;T++)Z=L[T],M=(x.match(uf(Z,_))||[])[0],M&&(he=x.substr(0,x.indexOf(M)),he.length>0&&m(_).unusedInput.push(he),x=x.slice(x.indexOf(M)+M.length),nn+=M.length),K[Z]?(M?m(_).empty=!1:m(_).unusedTokens.push(Z),pz(Z,M,_)):_._strict&&!M&&m(_).unusedTokens.push(Z);m(_).charsLeftOver=Qt-nn,x.length>0&&m(_).unusedInput.push(x),_._a[dl]<=12&&m(_).bigHour===!0&&_._a[dl]>0&&(m(_).bigHour=void 0),m(_).parsedDateParts=_._a.slice(0),m(_).meridiem=_._meridiem,_._a[dl]=V9t(_._locale,_._a[dl],_._meridiem),yi=m(_).era,yi!==null&&(_._a[fd]=_._locale.erasConvertYear(yi,_._a[fd])),Pde(_),Cde(_)}function V9t(_,x,T){var M;return T==null?x:_.meridiemHour!=null?_.meridiemHour(x,T):(_.isPM!=null&&(M=_.isPM(T),M&&x<12&&(x+=12),!M&&x===12&&(x=0)),x)}function W9t(_){var x,T,M,L,Z,he,Qt=!1,nn=_._f.length;if(nn===0){m(_).invalidFormat=!0,_._d=new Date(NaN);return}for(L=0;L<nn;L++)Z=0,he=!1,x=S({},_),_._useUTC!=null&&(x._useUTC=_._useUTC),x._f=_._f[L],Ede(x),b(x)&&(he=!0),Z+=m(x).charsLeftOver,Z+=m(x).unusedTokens.length*10,m(x).score=Z,Qt?Z<M&&(M=Z,T=x):(M==null||Z<M||he)&&(M=Z,T=x,he&&(Qt=!0));d(_,T||x)}function K9t(_){if(!_._d){var x=et(_._i),T=x.day===void 0?x.date:x.day;_._a=c([x.year,x.month,T,x.hour,x.minute,x.second,x.millisecond],function(M){return M&&parseInt(M,10)}),Pde(_)}}function G9t(_){var x=new C(Cde(qke(_)));return x._nextDay&&(x.add(1,"d"),x._nextDay=void 0),x}function qke(_){var x=_._i,T=_._f;return _._locale=_._locale||Hx(_._l),x===null||T===void 0&&x===""?g({nullInput:!0}):(typeof x=="string"&&(_._i=x=_._locale.preparse(x)),P(x)?new C(Cde(x)):(l(x)?_._d=x:n(T)?W9t(_):T?Ede(_):J9t(_),b(_)||(_._d=null),_))}function J9t(_){var x=_._i;s(x)?_._d=new Date(e.now()):l(x)?_._d=new Date(x.valueOf()):typeof x=="string"?U9t(_):n(x)?(_._a=c(x.slice(0),function(T){return parseInt(T,10)}),Pde(_)):o(x)?K9t(_):u(x)?_._d=new Date(x):e.createFromInputFallback(_)}function Uke(_,x,T,M,L){var Z={};return(x===!0||x===!1)&&(M=x,x=void 0),(T===!0||T===!1)&&(M=T,T=void 0),(o(_)&&a(_)||n(_)&&_.length===0)&&(_=void 0),Z._isAMomentObject=!0,Z._useUTC=Z._isUTC=L,Z._l=T,Z._i=_,Z._f=x,Z._strict=M,G9t(Z)}function Yi(_,x,T,M){return Uke(_,x,T,M,!1)}var Y9t=A("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var _=Yi.apply(null,arguments);return this.isValid()&&_.isValid()?_<this?this:_:g()}),Z9t=A("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var _=Yi.apply(null,arguments);return this.isValid()&&_.isValid()?_>this?this:_:g()});function zke(_,x){var T,M;if(x.length===1&&n(x[0])&&(x=x[0]),!x.length)return Yi();for(T=x[0],M=1;M<x.length;++M)(!x[M].isValid()||x[M][_](T))&&(T=x[M]);return T}function X9t(){var _=[].slice.call(arguments,0);return zke("isBefore",_)}function Q9t(){var _=[].slice.call(arguments,0);return zke("isAfter",_)}var eKt=function(){return Date.now?Date.now():+new Date},_z=["year","quarter","month","week","day","hour","minute","second","millisecond"];function tKt(_){var x,T=!1,M,L=_z.length;for(x in _)if(i(_,x)&&!(ms.call(_z,x)!==-1&&(_[x]==null||!isNaN(_[x]))))return!1;for(M=0;M<L;++M)if(_[_z[M]]){if(T)return!1;parseFloat(_[_z[M]])!==Oe(_[_z[M]])&&(T=!0)}return!0}function rKt(){return this._isValid}function nKt(){return Hg(NaN)}function h9(_){var x=et(_),T=x.year||0,M=x.quarter||0,L=x.month||0,Z=x.week||x.isoWeek||0,he=x.day||0,Qt=x.hour||0,nn=x.minute||0,yi=x.second||0,lf=x.millisecond||0;this._isValid=tKt(x),this._milliseconds=+lf+yi*1e3+nn*6e4+Qt*1e3*60*60,this._days=+he+Z*7,this._months=+L+M*3+T*12,this._data={},this._locale=Hx(),this._bubble()}function g9(_){return _ instanceof h9}function Tde(_){return _<0?Math.round(-1*_)*-1:Math.round(_)}function oKt(_,x,T){var M=Math.min(_.length,x.length),L=Math.abs(_.length-x.length),Z=0,he;for(he=0;he<M;he++)(T&&_[he]!==x[he]||!T&&Oe(_[he])!==Oe(x[he]))&&Z++;return Z+L}function Hke(_,x){U(_,0,0,function(){var T=this.utcOffset(),M="+";return T<0&&(T=-T,M="-"),M+G(~~(T/60),2)+x+G(~~T%60,2)})}Hke("Z",":"),Hke("ZZ",""),Ye("Z",ps),Ye("ZZ",ps),Cn(["Z","ZZ"],function(_,x,T){T._useUTC=!0,T._tzm=Ade(ps,_)});var iKt=/([\+\-]|\d\d)/gi;function Ade(_,x){var T=(x||"").match(_),M,L,Z;return T===null?null:(M=T[T.length-1]||[],L=(M+"").match(iKt)||["-",0,0],Z=+(L[1]*60)+Oe(L[2]),Z===0?0:L[0]==="+"?Z:-Z)}function Ide(_,x){var T,M;return x._isUTC?(T=x.clone(),M=(P(_)||l(_)?_.valueOf():Yi(_).valueOf())-T.valueOf(),T._d.setTime(T._d.valueOf()+M),e.updateOffset(T,!1),T):Yi(_).local()}function Mde(_){return-Math.round(_._d.getTimezoneOffset())}e.updateOffset=function(){};function aKt(_,x,T){var M=this._offset||0,L;if(!this.isValid())return _!=null?this:NaN;if(_!=null){if(typeof _=="string"){if(_=Ade(ps,_),_===null)return this}else Math.abs(_)<16&&!T&&(_=_*60);return!this._isUTC&&x&&(L=Mde(this)),this._offset=_,this._isUTC=!0,L!=null&&this.add(L,"m"),M!==_&&(!x||this._changeInProgress?Gke(this,Hg(_-M,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,e.updateOffset(this,!0),this._changeInProgress=null)),this}else return this._isUTC?M:Mde(this)}function sKt(_,x){return _!=null?(typeof _!="string"&&(_=-_),this.utcOffset(_,x),this):-this.utcOffset()}function uKt(_){return this.utcOffset(0,_)}function lKt(_){return this._isUTC&&(this.utcOffset(0,_),this._isUTC=!1,_&&this.subtract(Mde(this),"m")),this}function cKt(){if(this._tzm!=null)this.utcOffset(this._tzm,!1,!0);else if(typeof this._i=="string"){var _=Ade(dd,this._i);_!=null?this.utcOffset(_):this.utcOffset(0,!0)}return this}function dKt(_){return this.isValid()?(_=_?Yi(_).utcOffset():0,(this.utcOffset()-_)%60===0):!1}function fKt(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function pKt(){if(!s(this._isDSTShifted))return this._isDSTShifted;var _={},x;return S(_,this),_=qke(_),_._a?(x=_._isUTC?f(_._a):Yi(_._a),this._isDSTShifted=this.isValid()&&oKt(_._a,x.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function mKt(){return this.isValid()?!this._isUTC:!1}function hKt(){return this.isValid()?this._isUTC:!1}function Vke(){return this.isValid()?this._isUTC&&this._offset===0:!1}var gKt=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,yKt=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function Hg(_,x){var T=_,M=null,L,Z,he;return g9(_)?T={ms:_._milliseconds,d:_._days,M:_._months}:u(_)||!isNaN(+_)?(T={},x?T[x]=+_:T.milliseconds=+_):(M=gKt.exec(_))?(L=M[1]==="-"?-1:1,T={y:0,d:Oe(M[_b])*L,h:Oe(M[dl])*L,m:Oe(M[zg])*L,s:Oe(M[Ux])*L,ms:Oe(Tde(M[bM]*1e3))*L}):(M=yKt.exec(_))?(L=M[1]==="-"?-1:1,T={y:_M(M[2],L),M:_M(M[3],L),w:_M(M[4],L),d:_M(M[5],L),h:_M(M[6],L),m:_M(M[7],L),s:_M(M[8],L)}):T==null?T={}:typeof T=="object"&&("from"in T||"to"in T)&&(he=bKt(Yi(T.from),Yi(T.to)),T={},T.ms=he.milliseconds,T.M=he.months),Z=new h9(T),g9(_)&&i(_,"_locale")&&(Z._locale=_._locale),g9(_)&&i(_,"_isValid")&&(Z._isValid=_._isValid),Z}Hg.fn=h9.prototype,Hg.invalid=nKt;function _M(_,x){var T=_&&parseFloat(_.replace(",","."));return(isNaN(T)?0:T)*x}function Wke(_,x){var T={};return T.months=x.month()-_.month()+(x.year()-_.year())*12,_.clone().add(T.months,"M").isAfter(x)&&--T.months,T.milliseconds=+x-+_.clone().add(T.months,"M"),T}function bKt(_,x){var T;return _.isValid()&&x.isValid()?(x=Ide(x,_),_.isBefore(x)?T=Wke(_,x):(T=Wke(x,_),T.milliseconds=-T.milliseconds,T.months=-T.months),T):{milliseconds:0,months:0}}function Kke(_,x){return function(T,M){var L,Z;return M!==null&&!isNaN(+M)&&(R(x,"moment()."+x+"(period, number) is deprecated. Please use moment()."+x+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),Z=T,T=M,M=Z),L=Hg(T,M),Gke(this,L,_),this}}function Gke(_,x,T,M){var L=x._milliseconds,Z=Tde(x._days),he=Tde(x._months);_.isValid()&&(M=M??!0,he&&Ake(_,nr(_,"Month")+he*T),Z&&Ji(_,"Date",nr(_,"Date")+Z*T),L&&_._d.setTime(_._d.valueOf()+L*T),M&&e.updateOffset(_,Z||he))}var _Kt=Kke(1,"add"),vKt=Kke(-1,"subtract");function Jke(_){return typeof _=="string"||_ instanceof String}function wKt(_){return P(_)||l(_)||Jke(_)||u(_)||xKt(_)||SKt(_)||_===null||_===void 0}function SKt(_){var x=o(_)&&!a(_),T=!1,M=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],L,Z,he=M.length;for(L=0;L<he;L+=1)Z=M[L],T=T||i(_,Z);return x&&T}function xKt(_){var x=n(_),T=!1;return x&&(T=_.filter(function(M){return!u(M)&&Jke(_)}).length===0),x&&T}function CKt(_){var x=o(_)&&!a(_),T=!1,M=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],L,Z;for(L=0;L<M.length;L+=1)Z=M[L],T=T||i(_,Z);return x&&T}function OKt(_,x){var T=_.diff(x,"days",!0);return T<-6?"sameElse":T<-1?"lastWeek":T<0?"lastDay":T<1?"sameDay":T<2?"nextDay":T<7?"nextWeek":"sameElse"}function PKt(_,x){arguments.length===1&&(arguments[0]?wKt(arguments[0])?(_=arguments[0],x=void 0):CKt(arguments[0])&&(x=arguments[0],_=void 0):(_=void 0,x=void 0));var T=_||Yi(),M=Ide(T,this).startOf("day"),L=e.calendarFormat(this,M)||"sameElse",Z=x&&(j(x[L])?x[L].call(this,T):x[L]);return this.format(Z||this.localeData().calendar(L,this,Yi(T)))}function EKt(){return new C(this)}function TKt(_,x){var T=P(_)?_:Yi(_);return this.isValid()&&T.isValid()?(x=ee(x)||"millisecond",x==="millisecond"?this.valueOf()>T.valueOf():T.valueOf()<this.clone().startOf(x).valueOf()):!1}function AKt(_,x){var T=P(_)?_:Yi(_);return this.isValid()&&T.isValid()?(x=ee(x)||"millisecond",x==="millisecond"?this.valueOf()<T.valueOf():this.clone().endOf(x).valueOf()<T.valueOf()):!1}function IKt(_,x,T,M){var L=P(_)?_:Yi(_),Z=P(x)?x:Yi(x);return this.isValid()&&L.isValid()&&Z.isValid()?(M=M||"()",(M[0]==="("?this.isAfter(L,T):!this.isBefore(L,T))&&(M[1]===")"?this.isBefore(Z,T):!this.isAfter(Z,T))):!1}function MKt(_,x){var T=P(_)?_:Yi(_),M;return this.isValid()&&T.isValid()?(x=ee(x)||"millisecond",x==="millisecond"?this.valueOf()===T.valueOf():(M=T.valueOf(),this.clone().startOf(x).valueOf()<=M&&M<=this.clone().endOf(x).valueOf())):!1}function RKt(_,x){return this.isSame(_,x)||this.isAfter(_,x)}function jKt(_,x){return this.isSame(_,x)||this.isBefore(_,x)}function NKt(_,x,T){var M,L,Z;if(!this.isValid())return NaN;if(M=Ide(_,this),!M.isValid())return NaN;switch(L=(M.utcOffset()-this.utcOffset())*6e4,x=ee(x),x){case"year":Z=y9(this,M)/12;break;case"month":Z=y9(this,M);break;case"quarter":Z=y9(this,M)/3;break;case"second":Z=(this-M)/1e3;break;case"minute":Z=(this-M)/6e4;break;case"hour":Z=(this-M)/36e5;break;case"day":Z=(this-M-L)/864e5;break;case"week":Z=(this-M-L)/6048e5;break;default:Z=this-M}return T?Z:le(Z)}function y9(_,x){if(_.date()<x.date())return-y9(x,_);var T=(x.year()-_.year())*12+(x.month()-_.month()),M=_.clone().add(T,"months"),L,Z;return x-M<0?(L=_.clone().add(T-1,"months"),Z=(x-M)/(M-L)):(L=_.clone().add(T+1,"months"),Z=(x-M)/(L-M)),-(T+Z)||0}e.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",e.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";function DKt(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function LKt(_){if(!this.isValid())return null;var x=_!==!0,T=x?this.clone().utc():this;return T.year()<0||T.year()>9999?W(T,x?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):j(Date.prototype.toISOString)?x?this.toDate().toISOString():new Date(this.valueOf()+this.utcOffset()*60*1e3).toISOString().replace("Z",W(T,"Z")):W(T,x?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function FKt(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var _="moment",x="",T,M,L,Z;return this.isLocal()||(_=this.utcOffset()===0?"moment.utc":"moment.parseZone",x="Z"),T="["+_+'("]',M=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",L="-MM-DD[T]HH:mm:ss.SSS",Z=x+'[")]',this.format(T+M+L+Z)}function kKt(_){_||(_=this.isUtc()?e.defaultFormatUtc:e.defaultFormat);var x=W(this,_);return this.localeData().postformat(x)}function $Kt(_,x){return this.isValid()&&(P(_)&&_.isValid()||Yi(_).isValid())?Hg({to:this,from:_}).locale(this.locale()).humanize(!x):this.localeData().invalidDate()}function BKt(_){return this.from(Yi(),_)}function qKt(_,x){return this.isValid()&&(P(_)&&_.isValid()||Yi(_).isValid())?Hg({from:this,to:_}).locale(this.locale()).humanize(!x):this.localeData().invalidDate()}function UKt(_){return this.to(Yi(),_)}function Yke(_){var x;return _===void 0?this._locale._abbr:(x=Hx(_),x!=null&&(this._locale=x),this)}var Zke=A("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(_){return _===void 0?this.localeData():this.locale(_)});function Xke(){return this._locale}var b9=1e3,KD=60*b9,_9=60*KD,Qke=(365*400+97)*24*_9;function GD(_,x){return(_%x+x)%x}function e$e(_,x,T){return _<100&&_>=0?new Date(_+400,x,T)-Qke:new Date(_,x,T).valueOf()}function t$e(_,x,T){return _<100&&_>=0?Date.UTC(_+400,x,T)-Qke:Date.UTC(_,x,T)}function zKt(_){var x,T;if(_=ee(_),_===void 0||_==="millisecond"||!this.isValid())return this;switch(T=this._isUTC?t$e:e$e,_){case"year":x=T(this.year(),0,1);break;case"quarter":x=T(this.year(),this.month()-this.month()%3,1);break;case"month":x=T(this.year(),this.month(),1);break;case"week":x=T(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":x=T(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":x=T(this.year(),this.month(),this.date());break;case"hour":x=this._d.valueOf(),x-=GD(x+(this._isUTC?0:this.utcOffset()*KD),_9);break;case"minute":x=this._d.valueOf(),x-=GD(x,KD);break;case"second":x=this._d.valueOf(),x-=GD(x,b9);break}return this._d.setTime(x),e.updateOffset(this,!0),this}function HKt(_){var x,T;if(_=ee(_),_===void 0||_==="millisecond"||!this.isValid())return this;switch(T=this._isUTC?t$e:e$e,_){case"year":x=T(this.year()+1,0,1)-1;break;case"quarter":x=T(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":x=T(this.year(),this.month()+1,1)-1;break;case"week":x=T(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":x=T(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":x=T(this.year(),this.month(),this.date()+1)-1;break;case"hour":x=this._d.valueOf(),x+=_9-GD(x+(this._isUTC?0:this.utcOffset()*KD),_9)-1;break;case"minute":x=this._d.valueOf(),x+=KD-GD(x,KD)-1;break;case"second":x=this._d.valueOf(),x+=b9-GD(x,b9)-1;break}return this._d.setTime(x),e.updateOffset(this,!0),this}function VKt(){return this._d.valueOf()-(this._offset||0)*6e4}function WKt(){return Math.floor(this.valueOf()/1e3)}function KKt(){return new Date(this.valueOf())}function GKt(){var _=this;return[_.year(),_.month(),_.date(),_.hour(),_.minute(),_.second(),_.millisecond()]}function JKt(){var _=this;return{years:_.year(),months:_.month(),date:_.date(),hours:_.hours(),minutes:_.minutes(),seconds:_.seconds(),milliseconds:_.milliseconds()}}function YKt(){return this.isValid()?this.toISOString():null}function ZKt(){return b(this)}function XKt(){return d({},m(this))}function QKt(){return m(this).overflow}function eGt(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}U("N",0,0,"eraAbbr"),U("NN",0,0,"eraAbbr"),U("NNN",0,0,"eraAbbr"),U("NNNN",0,0,"eraName"),U("NNNNN",0,0,"eraNarrow"),U("y",["y",1],"yo","eraYear"),U("y",["yy",2],0,"eraYear"),U("y",["yyy",3],0,"eraYear"),U("y",["yyyy",4],0,"eraYear"),Ye("N",Rde),Ye("NN",Rde),Ye("NNN",Rde),Ye("NNNN",dGt),Ye("NNNNN",fGt),Cn(["N","NN","NNN","NNNN","NNNNN"],function(_,x,T,M){var L=T._locale.erasParse(_,M,T._strict);L?m(T).era=L:m(T).invalidEra=_}),Ye("y",Aa),Ye("yy",Aa),Ye("yyy",Aa),Ye("yyyy",Aa),Ye("yo",pGt),Cn(["y","yy","yyy","yyyy"],fd),Cn(["yo"],function(_,x,T,M){var L;T._locale._eraYearOrdinalRegex&&(L=_.match(T._locale._eraYearOrdinalRegex)),T._locale.eraYearOrdinalParse?x[fd]=T._locale.eraYearOrdinalParse(_,L):x[fd]=parseInt(_,10)});function tGt(_,x){var T,M,L,Z=this._eras||Hx("en")._eras;for(T=0,M=Z.length;T<M;++T){switch(typeof Z[T].since){case"string":L=e(Z[T].since).startOf("day"),Z[T].since=L.valueOf();break}switch(typeof Z[T].until){case"undefined":Z[T].until=1/0;break;case"string":L=e(Z[T].until).startOf("day").valueOf(),Z[T].until=L.valueOf();break}}return Z}function rGt(_,x,T){var M,L,Z=this.eras(),he,Qt,nn;for(_=_.toUpperCase(),M=0,L=Z.length;M<L;++M)if(he=Z[M].name.toUpperCase(),Qt=Z[M].abbr.toUpperCase(),nn=Z[M].narrow.toUpperCase(),T)switch(x){case"N":case"NN":case"NNN":if(Qt===_)return Z[M];break;case"NNNN":if(he===_)return Z[M];break;case"NNNNN":if(nn===_)return Z[M];break}else if([he,Qt,nn].indexOf(_)>=0)return Z[M]}function nGt(_,x){var T=_.since<=_.until?1:-1;return x===void 0?e(_.since).year():e(_.since).year()+(x-_.offset)*T}function oGt(){var _,x,T,M=this.localeData().eras();for(_=0,x=M.length;_<x;++_)if(T=this.clone().startOf("day").valueOf(),M[_].since<=T&&T<=M[_].until||M[_].until<=T&&T<=M[_].since)return M[_].name;return""}function iGt(){var _,x,T,M=this.localeData().eras();for(_=0,x=M.length;_<x;++_)if(T=this.clone().startOf("day").valueOf(),M[_].since<=T&&T<=M[_].until||M[_].until<=T&&T<=M[_].since)return M[_].narrow;return""}function aGt(){var _,x,T,M=this.localeData().eras();for(_=0,x=M.length;_<x;++_)if(T=this.clone().startOf("day").valueOf(),M[_].since<=T&&T<=M[_].until||M[_].until<=T&&T<=M[_].since)return M[_].abbr;return""}function sGt(){var _,x,T,M,L=this.localeData().eras();for(_=0,x=L.length;_<x;++_)if(T=L[_].since<=L[_].until?1:-1,M=this.clone().startOf("day").valueOf(),L[_].since<=M&&M<=L[_].until||L[_].until<=M&&M<=L[_].since)return(this.year()-e(L[_].since).year())*T+L[_].offset;return this.year()}function uGt(_){return i(this,"_erasNameRegex")||jde.call(this),_?this._erasNameRegex:this._erasRegex}function lGt(_){return i(this,"_erasAbbrRegex")||jde.call(this),_?this._erasAbbrRegex:this._erasRegex}function cGt(_){return i(this,"_erasNarrowRegex")||jde.call(this),_?this._erasNarrowRegex:this._erasRegex}function Rde(_,x){return x.erasAbbrRegex(_)}function dGt(_,x){return x.erasNameRegex(_)}function fGt(_,x){return x.erasNarrowRegex(_)}function pGt(_,x){return x._eraYearOrdinalRegex||Aa}function jde(){var _=[],x=[],T=[],M=[],L,Z,he=this.eras();for(L=0,Z=he.length;L<Z;++L)x.push(cl(he[L].name)),_.push(cl(he[L].abbr)),T.push(cl(he[L].narrow)),M.push(cl(he[L].name)),M.push(cl(he[L].abbr)),M.push(cl(he[L].narrow));this._erasRegex=new RegExp("^("+M.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+x.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+_.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+T.join("|")+")","i")}U(0,["gg",2],0,function(){return this.weekYear()%100}),U(0,["GG",2],0,function(){return this.isoWeekYear()%100});function v9(_,x){U(0,[_,_.length],0,x)}v9("gggg","weekYear"),v9("ggggg","weekYear"),v9("GGGG","isoWeekYear"),v9("GGGGG","isoWeekYear"),pt("weekYear","gg"),pt("isoWeekYear","GG"),Pe("weekYear",1),Pe("isoWeekYear",1),Ye("G",af),Ye("g",af),Ye("GG",_n,Di),Ye("gg",_n,Di),Ye("GGGG",Xa,rf),Ye("gggg",Xa,rf),Ye("GGGGG",Is,nf),Ye("ggggg",Is,nf),Ug(["gggg","ggggg","GGGG","GGGGG"],function(_,x,T,M){x[M.substr(0,2)]=Oe(_)}),Ug(["gg","GG"],function(_,x,T,M){x[M]=e.parseTwoDigitYear(_)});function mGt(_){return r$e.call(this,_,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)}function hGt(_){return r$e.call(this,_,this.isoWeek(),this.isoWeekday(),1,4)}function gGt(){return zx(this.year(),1,4)}function yGt(){return zx(this.isoWeekYear(),1,4)}function bGt(){var _=this.localeData()._week;return zx(this.year(),_.dow,_.doy)}function _Gt(){var _=this.localeData()._week;return zx(this.weekYear(),_.dow,_.doy)}function r$e(_,x,T,M,L){var Z;return _==null?gz(this,M,L).year:(Z=zx(_,M,L),x>Z&&(x=Z),vGt.call(this,_,x,T,M,L))}function vGt(_,x,T,M,L){var Z=jke(_,x,T,M,L),he=hz(Z.year,0,Z.dayOfYear);return this.year(he.getUTCFullYear()),this.month(he.getUTCMonth()),this.date(he.getUTCDate()),this}U("Q",0,"Qo","quarter"),pt("quarter","Q"),Pe("quarter",7),Ye("Q",cd),Cn("Q",function(_,x){x[qx]=(Oe(_)-1)*3});function wGt(_){return _==null?Math.ceil((this.month()+1)/3):this.month((_-1)*3+this.month()%3)}U("D",["DD",2],"Do","date"),pt("date","D"),Pe("date",9),Ye("D",_n),Ye("DD",_n,Di),Ye("Do",function(_,x){return _?x._dayOfMonthOrdinalParse||x._ordinalParse:x._dayOfMonthOrdinalParseLenient}),Cn(["D","DD"],_b),Cn("Do",function(_,x){x[_b]=Oe(_.match(_n)[0])});var n$e=Je("Date",!0);U("DDD",["DDDD",3],"DDDo","dayOfYear"),pt("dayOfYear","DDD"),Pe("dayOfYear",4),Ye("DDD",bb),Ye("DDDD",Jf),Cn(["DDD","DDDD"],function(_,x,T){T._dayOfYear=Oe(_)});function SGt(_){var x=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return _==null?x:this.add(_-x,"d")}U("m",["mm",2],0,"minute"),pt("minute","m"),Pe("minute",14),Ye("m",_n),Ye("mm",_n,Di),Cn(["m","mm"],zg);var xGt=Je("Minutes",!1);U("s",["ss",2],0,"second"),pt("second","s"),Pe("second",15),Ye("s",_n),Ye("ss",_n,Di),Cn(["s","ss"],Ux);var CGt=Je("Seconds",!1);U("S",0,0,function(){return~~(this.millisecond()/100)}),U(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),U(0,["SSS",3],0,"millisecond"),U(0,["SSSS",4],0,function(){return this.millisecond()*10}),U(0,["SSSSS",5],0,function(){return this.millisecond()*100}),U(0,["SSSSSS",6],0,function(){return this.millisecond()*1e3}),U(0,["SSSSSSS",7],0,function(){return this.millisecond()*1e4}),U(0,["SSSSSSSS",8],0,function(){return this.millisecond()*1e5}),U(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1e6}),pt("millisecond","ms"),Pe("millisecond",16),Ye("S",bb,cd),Ye("SS",bb,Di),Ye("SSS",bb,Jf);var XP,o$e;for(XP="SSSS";XP.length<=9;XP+="S")Ye(XP,Aa);function OGt(_,x){x[bM]=Oe(("0."+_)*1e3)}for(XP="S";XP.length<=9;XP+="S")Cn(XP,OGt);o$e=Je("Milliseconds",!1),U("z",0,0,"zoneAbbr"),U("zz",0,0,"zoneName");function PGt(){return this._isUTC?"UTC":""}function EGt(){return this._isUTC?"Coordinated Universal Time":""}var ze=C.prototype;ze.add=_Kt,ze.calendar=PKt,ze.clone=EKt,ze.diff=NKt,ze.endOf=HKt,ze.format=kKt,ze.from=$Kt,ze.fromNow=BKt,ze.to=qKt,ze.toNow=UKt,ze.get=Ni,ze.invalidAt=QKt,ze.isAfter=TKt,ze.isBefore=AKt,ze.isBetween=IKt,ze.isSame=MKt,ze.isSameOrAfter=RKt,ze.isSameOrBefore=jKt,ze.isValid=ZKt,ze.lang=Zke,ze.locale=Yke,ze.localeData=Xke,ze.max=Z9t,ze.min=Y9t,ze.parsingFlags=XKt,ze.set=cc,ze.startOf=zKt,ze.subtract=vKt,ze.toArray=GKt,ze.toObject=JKt,ze.toDate=KKt,ze.toISOString=LKt,ze.inspect=FKt,typeof Symbol<"u"&&Symbol.for!=null&&(ze[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"}),ze.toJSON=YKt,ze.toString=DKt,ze.unix=WKt,ze.valueOf=VKt,ze.creationData=eGt,ze.eraName=oGt,ze.eraNarrow=iGt,ze.eraAbbr=aGt,ze.eraYear=sGt,ze.year=Rke,ze.isLeapYear=JWt,ze.weekYear=mGt,ze.isoWeekYear=hGt,ze.quarter=ze.quarters=wGt,ze.month=Ike,ze.daysInMonth=WWt,ze.week=ze.weeks=t9t,ze.isoWeek=ze.isoWeeks=r9t,ze.weeksInYear=bGt,ze.weeksInWeekYear=_Gt,ze.isoWeeksInYear=gGt,ze.isoWeeksInISOWeekYear=yGt,ze.date=n$e,ze.day=ze.days=h9t,ze.weekday=g9t,ze.isoWeekday=y9t,ze.dayOfYear=SGt,ze.hour=ze.hours=C9t,ze.minute=ze.minutes=xGt,ze.second=ze.seconds=CGt,ze.millisecond=ze.milliseconds=o$e,ze.utcOffset=aKt,ze.utc=uKt,ze.local=lKt,ze.parseZone=cKt,ze.hasAlignedHourOffset=dKt,ze.isDST=fKt,ze.isLocal=mKt,ze.isUtcOffset=hKt,ze.isUtc=Vke,ze.isUTC=Vke,ze.zoneAbbr=PGt,ze.zoneName=EGt,ze.dates=A("dates accessor is deprecated. Use date instead.",n$e),ze.months=A("months accessor is deprecated. Use month instead",Ike),ze.years=A("years accessor is deprecated. Use year instead",Rke),ze.zone=A("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",sKt),ze.isDSTShifted=A("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",pKt);function TGt(_){return Yi(_*1e3)}function AGt(){return Yi.apply(null,arguments).parseZone()}function i$e(_){return _}var mo=k.prototype;mo.calendar=Q,mo.longDateFormat=we,mo.invalidDate=Ue,mo.ordinal=lr,mo.preparse=i$e,mo.postformat=i$e,mo.relativeTime=Le,mo.pastFuture=gt,mo.set=N,mo.eras=tGt,mo.erasParse=rGt,mo.erasConvertYear=nGt,mo.erasAbbrRegex=lGt,mo.erasNameRegex=uGt,mo.erasNarrowRegex=cGt,mo.months=UWt,mo.monthsShort=zWt,mo.monthsParse=VWt,mo.monthsRegex=GWt,mo.monthsShortRegex=KWt,mo.week=ZWt,mo.firstDayOfYear=e9t,mo.firstDayOfWeek=QWt,mo.weekdays=c9t,mo.weekdaysMin=f9t,mo.weekdaysShort=d9t,mo.weekdaysParse=m9t,mo.weekdaysRegex=b9t,mo.weekdaysShortRegex=_9t,mo.weekdaysMinRegex=v9t,mo.isPM=S9t,mo.meridiem=O9t;function w9(_,x,T,M){var L=Hx(),Z=f().set(M,x);return L[T](Z,_)}function a$e(_,x,T){if(u(_)&&(x=_,_=void 0),_=_||"",x!=null)return w9(_,x,T,"month");var M,L=[];for(M=0;M<12;M++)L[M]=w9(_,M,T,"month");return L}function Nde(_,x,T,M){typeof _=="boolean"?(u(x)&&(T=x,x=void 0),x=x||""):(x=_,T=x,_=!1,u(x)&&(T=x,x=void 0),x=x||"");var L=Hx(),Z=_?L._week.dow:0,he,Qt=[];if(T!=null)return w9(x,(T+Z)%7,M,"day");for(he=0;he<7;he++)Qt[he]=w9(x,(he+Z)%7,M,"day");return Qt}function IGt(_,x){return a$e(_,x,"months")}function MGt(_,x){return a$e(_,x,"monthsShort")}function RGt(_,x,T){return Nde(_,x,T,"weekdays")}function jGt(_,x,T){return Nde(_,x,T,"weekdaysShort")}function NGt(_,x,T){return Nde(_,x,T,"weekdaysMin")}ZP("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(_){var x=_%10,T=Oe(_%100/10)===1?"th":x===1?"st":x===2?"nd":x===3?"rd":"th";return _+T}}),e.lang=A("moment.lang is deprecated. Use moment.locale instead.",ZP),e.langData=A("moment.langData is deprecated. Use moment.localeData instead.",Hx);var Vx=Math.abs;function DGt(){var _=this._data;return this._milliseconds=Vx(this._milliseconds),this._days=Vx(this._days),this._months=Vx(this._months),_.milliseconds=Vx(_.milliseconds),_.seconds=Vx(_.seconds),_.minutes=Vx(_.minutes),_.hours=Vx(_.hours),_.months=Vx(_.months),_.years=Vx(_.years),this}function s$e(_,x,T,M){var L=Hg(x,T);return _._milliseconds+=M*L._milliseconds,_._days+=M*L._days,_._months+=M*L._months,_._bubble()}function LGt(_,x){return s$e(this,_,x,1)}function FGt(_,x){return s$e(this,_,x,-1)}function u$e(_){return _<0?Math.floor(_):Math.ceil(_)}function kGt(){var _=this._milliseconds,x=this._days,T=this._months,M=this._data,L,Z,he,Qt,nn;return _>=0&&x>=0&&T>=0||_<=0&&x<=0&&T<=0||(_+=u$e(Dde(T)+x)*864e5,x=0,T=0),M.milliseconds=_%1e3,L=le(_/1e3),M.seconds=L%60,Z=le(L/60),M.minutes=Z%60,he=le(Z/60),M.hours=he%24,x+=le(he/24),nn=le(l$e(x)),T+=nn,x-=u$e(Dde(nn)),Qt=le(T/12),T%=12,M.days=x,M.months=T,M.years=Qt,this}function l$e(_){return _*4800/146097}function Dde(_){return _*146097/4800}function $Gt(_){if(!this.isValid())return NaN;var x,T,M=this._milliseconds;if(_=ee(_),_==="month"||_==="quarter"||_==="year")switch(x=this._days+M/864e5,T=this._months+l$e(x),_){case"month":return T;case"quarter":return T/3;case"year":return T/12}else switch(x=this._days+Math.round(Dde(this._months)),_){case"week":return x/7+M/6048e5;case"day":return x+M/864e5;case"hour":return x*24+M/36e5;case"minute":return x*1440+M/6e4;case"second":return x*86400+M/1e3;case"millisecond":return Math.floor(x*864e5)+M;default:throw new Error("Unknown unit "+_)}}function BGt(){return this.isValid()?this._milliseconds+this._days*864e5+this._months%12*2592e6+Oe(this._months/12)*31536e6:NaN}function Wx(_){return function(){return this.as(_)}}var qGt=Wx("ms"),UGt=Wx("s"),zGt=Wx("m"),HGt=Wx("h"),VGt=Wx("d"),WGt=Wx("w"),KGt=Wx("M"),GGt=Wx("Q"),JGt=Wx("y");function YGt(){return Hg(this)}function ZGt(_){return _=ee(_),this.isValid()?this[_+"s"]():NaN}function vM(_){return function(){return this.isValid()?this._data[_]:NaN}}var XGt=vM("milliseconds"),QGt=vM("seconds"),eJt=vM("minutes"),tJt=vM("hours"),rJt=vM("days"),nJt=vM("months"),oJt=vM("years");function iJt(){return le(this.days()/7)}var Kx=Math.round,JD={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function aJt(_,x,T,M,L){return L.relativeTime(x||1,!!T,_,M)}function sJt(_,x,T,M){var L=Hg(_).abs(),Z=Kx(L.as("s")),he=Kx(L.as("m")),Qt=Kx(L.as("h")),nn=Kx(L.as("d")),yi=Kx(L.as("M")),lf=Kx(L.as("w")),Gx=Kx(L.as("y")),QP=Z<=T.ss&&["s",Z]||Z<T.s&&["ss",Z]||he<=1&&["m"]||he<T.m&&["mm",he]||Qt<=1&&["h"]||Qt<T.h&&["hh",Qt]||nn<=1&&["d"]||nn<T.d&&["dd",nn];return T.w!=null&&(QP=QP||lf<=1&&["w"]||lf<T.w&&["ww",lf]),QP=QP||yi<=1&&["M"]||yi<T.M&&["MM",yi]||Gx<=1&&["y"]||["yy",Gx],QP[2]=x,QP[3]=+_>0,QP[4]=M,aJt.apply(null,QP)}function uJt(_){return _===void 0?Kx:typeof _=="function"?(Kx=_,!0):!1}function lJt(_,x){return JD[_]===void 0?!1:x===void 0?JD[_]:(JD[_]=x,_==="s"&&(JD.ss=x-1),!0)}function cJt(_,x){if(!this.isValid())return this.localeData().invalidDate();var T=!1,M=JD,L,Z;return typeof _=="object"&&(x=_,_=!1),typeof _=="boolean"&&(T=_),typeof x=="object"&&(M=Object.assign({},JD,x),x.s!=null&&x.ss==null&&(M.ss=x.s-1)),L=this.localeData(),Z=sJt(this,!T,M,L),T&&(Z=L.pastFuture(+this,Z)),L.postformat(Z)}var Lde=Math.abs;function YD(_){return(_>0)-(_<0)||+_}function S9(){if(!this.isValid())return this.localeData().invalidDate();var _=Lde(this._milliseconds)/1e3,x=Lde(this._days),T=Lde(this._months),M,L,Z,he,Qt=this.asSeconds(),nn,yi,lf,Gx;return Qt?(M=le(_/60),L=le(M/60),_%=60,M%=60,Z=le(T/12),T%=12,he=_?_.toFixed(3).replace(/\.?0+$/,""):"",nn=Qt<0?"-":"",yi=YD(this._months)!==YD(Qt)?"-":"",lf=YD(this._days)!==YD(Qt)?"-":"",Gx=YD(this._milliseconds)!==YD(Qt)?"-":"",nn+"P"+(Z?yi+Z+"Y":"")+(T?yi+T+"M":"")+(x?lf+x+"D":"")+(L||M||_?"T":"")+(L?Gx+L+"H":"")+(M?Gx+M+"M":"")+(_?Gx+he+"S":"")):"P0D"}var Wn=h9.prototype;Wn.isValid=rKt,Wn.abs=DGt,Wn.add=LGt,Wn.subtract=FGt,Wn.as=$Gt,Wn.asMilliseconds=qGt,Wn.asSeconds=UGt,Wn.asMinutes=zGt,Wn.asHours=HGt,Wn.asDays=VGt,Wn.asWeeks=WGt,Wn.asMonths=KGt,Wn.asQuarters=GGt,Wn.asYears=JGt,Wn.valueOf=BGt,Wn._bubble=kGt,Wn.clone=YGt,Wn.get=ZGt,Wn.milliseconds=XGt,Wn.seconds=QGt,Wn.minutes=eJt,Wn.hours=tJt,Wn.days=rJt,Wn.weeks=iJt,Wn.months=nJt,Wn.years=oJt,Wn.humanize=cJt,Wn.toISOString=S9,Wn.toString=S9,Wn.toJSON=S9,Wn.locale=Yke,Wn.localeData=Xke,Wn.toIsoString=A("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",S9),Wn.lang=Zke,U("X",0,0,"unix"),U("x",0,0,"valueOf"),Ye("x",af),Ye("X",Yf),Cn("X",function(_,x,T){T._d=new Date(parseFloat(_)*1e3)}),Cn("x",function(_,x,T){T._d=new Date(Oe(_))});return e.version="2.29.4",r(Yi),e.fn=ze,e.min=X9t,e.max=Q9t,e.now=eKt,e.utc=f,e.unix=TGt,e.months=IGt,e.isDate=l,e.locale=ZP,e.invalid=g,e.duration=Hg,e.isMoment=P,e.weekdays=RGt,e.parseZone=AGt,e.localeData=Hx,e.isDuration=g9,e.monthsShort=MGt,e.weekdaysMin=NGt,e.defineLocale=xde,e.updateLocale=A9t,e.locales=I9t,e.weekdaysShort=jGt,e.normalizeUnits=ee,e.relativeTimeRounding=uJt,e.relativeTimeThreshold=lJt,e.calendarFormat=OKt,e.prototype=ze,e.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"},e})});function u4e(t){let e=t?.detail||{};return{status:e.status,message:e.message||t?.message,reason:e.reason}}function Ltr(t){let e=u4e(t);return e.reason==="Invalid license key"||t?.message==="Invalid license key"||t?.message?.includes("status 403")||e.status===403}function l4e(t){let e=u4e(t);return Ltr(t)?Ame.INVALID_LICENSE_KEY_USER:e.message||(e.reason?`Error: ${e.reason}`:Ame.UNKNOWN_ERROR)}function IL(t){return t.replace(/^#/,"").trim().toLowerCase()}function iR(t,e=!0){let r=app.metadataCache.getFileCache(t),n=r?.frontmatter?.tags,o=new Set;if(!e){let i=r?.tags?.map(a=>a.tag);i&&i.forEach(a=>o.add(IL(a)))}return n&&(Array.isArray(n)?n.forEach(i=>{typeof i=="string"&&o.add(IL(i))}):typeof n=="string"&&o.add(IL(n))),Array.from(o)}function c4e(t,e,r){if(e.length===0)return[];e=e.map(i=>IL(i));let n=r&&r.length>0?r:Rme(t,"/"),o=[];for(let i of n){let a=iR(i);e.some(s=>a.includes(s))&&o.push(i)}return o}function jme(t){let e=(0,Mme.default)(t,"YYYY/MM/DD HH:mm:ss");return e.isValid()?{fileName:e.format("YYYYMMDD_HHmmss"),display:e.format("YYYY/MM/DD HH:mm:ss"),epoch:e.valueOf()}:Nl(new Date)}async function ML(t,e){return t.extension!="md"&&t.extension!="canvas"?null:await e.cachedRead(t)}function iG(t){return t.basename}function f4e(t,e){return!t||!e?!1:t.includes(Ime)&&e.includes(Ime)||t==="small"&&e==="cohereai"||t==="cohereai"&&e==="small"?!0:t===e}function aR(t){let e=[],{history:r}=t;for(let n=0;n<r.length;n+=2){let o=r[n]?.content||"",i=r[n+1]?.content||"";e.push({role:"user",content:o},{role:"assistant",content:i})}return e}function fC(t,e){let r=/\[\[(.*?)\]\]/g,n=t.match(r),o=new Map;return n&&n.forEach(i=>{let a=i.slice(2,-2),s=e.getAbstractFileByPath(a);if(s instanceof yh.TFile)o.set(s.path,s);else{let l=e.getMarkdownFiles().filter(c=>c.basename===a);l.length>0&&(Nme(a,e)?o.set(l[0].path,l[0]):console.warn(`Found multiple files with title "${a}". Expected a full path for duplicate titles.`))}}),Array.from(o.values())}function Nme(t,e){return e.getMarkdownFiles().filter(n=>n.basename===t).length===1}function p4e(t){return t=t.trim(),t.startsWith("[[")&&t.endsWith("]]")?`${t.slice(2,-2).trim()}.md`:t}function m4e(t){let e=new Set;return t.forEach(r=>{r.metadata?.title&&e.add(r.metadata?.title)}),Array.from(e)}function g4e(t){return h4e.test(t)}function v2(t){let e=t.match(h4e);return e?e[0]:null}async function js(t,e={}){let r=e.headers?{...e.headers}:{};delete r["content-length"],ie("==== safeFetch method request ====");let n=e.method?.toUpperCase()||"POST",i=await(0,yh.requestUrl)({url:t,contentType:"application/json",headers:r,method:n,...["POST","PUT","PATCH"].includes(n)&&{body:e.body?.toString()},throw:!1});if(i.status>=400){let a;try{a=typeof i.json=="string"?JSON.parse(i.json):i.json}catch{try{a=typeof i.text=="string"?JSON.parse(i.text):i.text}catch{a=null}}let s=new Error(Ame.REQUEST_FAILED(i.status));if(s.json=a,a?.detail?.reason==="Invalid license key"||a?.reason==="Invalid license key")s.message="Invalid license key";else if(a?.detail?.message||a?.message){let u=a?.detail?.message||a?.message,l=a?.detail?.reason||a?.reason;s.message=l?`${u}: ${l}`:u}else a?.detail&&(s.message=JSON.stringify(a.detail));throw s}return{ok:i.status>=200&&i.status<300,status:i.status,statusText:i.status.toString(),headers:new Headers(i.headers),url:t,type:"basic",redirected:!1,bytes:()=>Promise.resolve(new Uint8Array(0)),body:$tr(i.text),bodyUsed:!0,json:()=>i.json,text:async()=>i.text,arrayBuffer:async()=>{if(i.arrayBuffer)return i.arrayBuffer;let a=i.text.replace(/^data:.*;base64,/,""),s=atob(a),u=new Uint8Array(s.length);for(let l=0;l<s.length;l++)u[l]=s.charCodeAt(l);return u.buffer},blob:()=>{throw new Error("not implemented")},formData:()=>{throw new Error("not implemented")},clone:()=>{throw new Error("not implemented")}}}function $tr(t){return new ReadableStream({start(e){let n=new TextEncoder().encode(t);e.enqueue(n),e.close()}})}function Go(t,e=!1){return t instanceof Error?t.message+`
${t?.cause?"more message: "+t.cause.message:""}
${e?t.stack:""}`:JSON.stringify(t)}function w2(t,e){let r={...t};return e.forEach(n=>{delete r[n]}),r}function aG(t,e){let[r,n]=t.split("|"),o=e.find(i=>i.name===r&&i.provider===n);if(!o)throw new Error(`No model configuration found for: ${t}`);return o}function Rb(t){let e=jL[t];return{...e,label:e.label||t}}function xf(t,e){let r=jL[t]?.label||t;return r+(e?.believerExclusive&&r==="Copilot Plus"?"(Believer)":"")}async function S2(t,e=!1){let r=app.workspace.getMostRecentLeaf();if(!r){new yh.Notice("No active leaf found.");return}if(r.view instanceof yh.MarkdownView||(r=app.workspace.getLeaf(!1),await r.setViewState({type:"markdown",state:r.view.getState()})),!(r.view instanceof yh.MarkdownView)){new yh.Notice("Failed to open a markdown view.");return}let n=r.view.editor,o=n.getCursor("from"),i=n.getCursor("to"),a=uR(t);e?n.replaceRange(a,o,i):n.replaceRange(a,i),new yh.Notice("Message inserted into the active note.")}function sG(t,e){let r;return(...n)=>{clearTimeout(r),r=setTimeout(()=>t(...n),e)}}function uG(t,e){let r=t.split(".").map(Number),n=e.split(".").map(Number);for(let o=0;o<3;o++){if(r[o]>n[o])return!0;if(r[o]<n[o])return!1}return!1}async function y4e(){try{return{version:(await(0,yh.requestUrl)({url:"https://api.github.com/repos/logancyang/obsidian-copilot/releases/latest",method:"GET"})).json.tag_name.replace("v",""),error:null}}catch(t){return{version:null,error:t instanceof Error?t.message:"Failed to check for updates"}}}function sR(t){if(typeof t=="string")return t.startsWith("o1")||t.startsWith("o3")||t.startsWith("o4");let e=t.modelName||t.model||"";return e.startsWith("o1")||e.startsWith("o3")||e.startsWith("o4")}function lG(t,e="system"){return sR(t)?"human":e}function Dme(){let t=["3rd party (openai-format)","ollama","lm-studio","azure openai","copilot-plus","copilot-plus-jina"];return Object.entries(jL).filter(([e])=>!t.includes(e)).map(([e])=>e)}function RL(t,e){let r=!!Dme().find(i=>i===t.provider),n=jb[t.provider],o=!t.apiKey&&!e[n];return r&&o?{hasApiKey:!1,errorNotice:`Please configure API Key for ${t.name} in settings first.
Path: Settings > copilot plugin > Basic Tab > Set Keys`}:{hasApiKey:!0}}function Btr(t){return typeof t=="string"?t:Array.isArray(t)?t.filter(e=>e.type==="text").map(e=>e.text).join(""):String(t||"")}function uR(t){let r=Btr(t).replace(/<think>[\s\S]*?<\/think>/g,"");return r=r.replace(/<think>[\s\S]*$/g,""),r.trim()}function b4e(){return crypto.randomUUID()}async function Zg(t){let e=console.warn;try{return console.warn=function(...r){if(!(r[0]?.includes&&(r[0].includes("Failed to calculate number of tokens")||r[0].includes("Unknown model"))))return e.apply(console,r)},await t()}finally{console.warn=e}}var Mme,yh,Ame,Rme,Ftr,ktr,d4e,Nl,h4e,wn=O(()=>{xd();kr();Ko();Mme=F(s4e()),yh=require("obsidian"),Ame={INVALID_LICENSE_KEY_USER:"Invalid Copilot Plus license key. Please check your license key in settings.",UNKNOWN_ERROR:"An unknown error occurred",REQUEST_FAILED:t=>`Request failed, status ${t}`};Rme=(t,e)=>{let r=t.getMarkdownFiles();if(e==="/")return r;let n=e.toLowerCase().replace(/^\/|\/$/g,"");return r.filter(o=>{let a=o.path.toLowerCase().split("/"),s=n.split("/"),u=0;for(let l of s){for(;u<a.length&&a[u]!==l;)u++;if(u>=a.length)return!1}return!0})};Ftr=t=>t.last.bound.modelName||t.last.bound.model,ktr=t=>t.last.bound.retriever!==void 0,d4e=t=>Ftr(t)||ktr(t),Nl=(t,e="local")=>{let r=(0,Mme.default)(t);return e==="utc"&&r.utc(),{fileName:r.format("YYYYMMDD_HHmmss"),display:r.format("YYYY/MM/DD HH:mm:ss"),epoch:r.valueOf()}};h4e=/(?:https?:\/\/)?(?:www\.)?(?:youtube\.com\/(?:watch\?v=|shorts\/)|youtu\.be\/)([^\s&]+)/});var NL,Lme,x2,xd=O(()=>{Yg();yE();um();M2e();wn();NL=class NL{static createNewLLMChain(e){let{llm:r,memory:n,prompt:o,abortController:i}=e,a=r.bind({signal:i?.signal}),s=di.from([{input:u=>u.input,memory:()=>n.loadMemoryVariables({})},{input:u=>u.input,history:u=>u.memory.history},o,a]);return NL.instances.set("llm_chain",s),console.log("New LLM chain created."),s}static getLLMChainFromMap(e){let r=NL.instances.get("llm_chain");return r||(r=NL.createNewLLMChain(e)),r}static createConversationalRetrievalChain(e,r,n){let{llm:o,retriever:i,systemMessage:a}=e,u=wd.fromTemplate(`Given the following conversation and a follow up question,
    summarize the conversation as context and keep the follow up question unchanged, in its original language.
    If the follow up question is unrelated to its preceding messages, return this follow up question directly.
    If it is related, then combine the summary and the follow up question to construct a standalone question.
    Make sure to keep any [[]] wrapped note titles in the question unchanged.

    Chat History:
    {chat_history}
    Follow Up Input: {question}
    Standalone question:`),c=wd.fromTemplate(`{system_message}

Answer the question with as detailed as possible based only on the following context:
{context}

Question: {question}
`),d=b=>b.map(y=>`Human: ${y[0]}
Assistant: ${y[1]}`).join(`
`),f=di.from([{question:b=>(n&&console.log("Input Question: ",b.question),b.question),chat_history:b=>{let g=d(b.chat_history);return n&&console.log("Formatted Chat History: ",g),g}},u,o,new JK,b=>{let g=uR(b);return n&&console.log("Standalone Question: ",g),g}]),p=async b=>(r(b),pme(b)),m=di.from([{context:i.pipe(p),question:new lo,system_message:()=>a},c,o]);return f.pipe(m)}};NL.instances=new Map;Lme=NL,x2=Lme});var C2=O(()=>{});var wE,_s,_i,Nb,i4e,a4e,O2,cG,v4e,Fme,w4e,kme,$me,Db,mC,bh,pC,SE,Mb,vE,oR,Ime,jL,jb,S4e,$r,Bme,_h,dp,vh,kr=O(()=>{wz();xd();C2();wE="https://api.brevilabs.com/v1",_s="copilot-chat-view",_i="user",Nb="ai",i4e=`You are Obsidian Copilot, a helpful assistant that integrates AI to Obsidian note-taking.
  1. Never mention that you do not have access to something. Always rely on the user provided context.
  2. Always answer to the best of your knowledge. If you are unsure about something, say so and ask the user to provide more context.
  3. If the user mentions "note", it most likely means an Obsidian note in the vault, not the generic meaning of a note.
  4. If the user mentions "@vault", it means the user wants you to search the Obsidian vault for information relevant to the query. The search results will be provided to you in the context along with the user query, read it carefully and answer the question based on the information provided. If there's no relevant information in the vault, just say so.
  5. If the user mentions any other tool with the @ symbol, check the context for their results. If nothing is found, just ignore the @ symbol in the query.
  6. Always use $'s instead of \\[ etc. for LaTeX equations.
  7. When showing note titles, use [[title]] format and do not wrap them in \` \`.
  8. When showing **Obsidian internal** image links, use ![[link]] format and do not wrap them in \` \`.
  9. When showing **web** image links, use ![link](url) format and do not wrap them in \` \`.
  10. When generating a table, use compact formatting without excessive whitespace.
  11. Always respond in the language of the user's query.
  12. Do NOT mention the additional context provided such as getCurrentTime and getTimeRangeMs if it's irrelevant to the user message.
  13. If the user mentions "tags", it most likely means tags in Obsidian note properties.`,a4e=`Return the new note content or canvas JSON in a special JSON format.

  # Steps to find the the target notes
  1. Extract the target note information from user message and find out the note path from the context below.
  2. If target note is not specified, use the <active_note> as the target note.
  3. If still failed to find the target note or the note path, ask the user to specify the target note.

  # JSON Format
  Provide the content in JSON format and wrap it in a code block with the following structure:

  For a single markdown file:
  \`\`\`json
  {
    "type": "composer",
    "path": "path/to/file.md",
    "content": "The FULL CONTENT of the md note goes here"
  }
  \`\`\`

  For a canvas file:
  \`\`\`json
  {
    "type": "composer",
    "path": "path/to/file.canvas",
    "canvas_json": {
      "nodes": [
        {
          "id": "1",
          "type": "text",
          "text": "Hello, world!",
          "x": 0,
          "y": 0,
          "width": 200,
          "height": 50
        }
      ],
      "edges": [
        {
          "id": "e1-2",
          "fromNode": "1",
          "toNode": "2",
          "label": "connects to"
        }
      ]
    }
  }
  \`\`\`

  # Important
  * ALL JSON objects must be complete and valid - ensure all arrays and objects have matching closing brackets
  * For canvas files, both 'nodes' and 'edges' arrays must be properly closed with ]
  * Properly escape all special characters in the content field, especially backticks and quotes
  * Prefer to create new files in existing folders or root folder unless the user's request specifies otherwise
  * File paths must end with a .md or .canvas extension
  * When generating changes on multiple files, output multiple JSON objects
  * Each JSON object must be parseable independently
  * For canvas files:
    - Every node must have: id, type, x, y, width, height
    - Every edge must have: id, fromNode, toNode
    - All IDs must be unique
    - Edge fromNode and toNode must reference existing node IDs`,O2="note_context",cG=`Copilot index does not exist. Please index your vault first!

1. Set a working embedding model in QA settings. If it's not a local model, don't forget to set the API key. 

2. Click 'Refresh Index for Vault' and wait for indexing to complete. If you encounter the rate limiting error, please turn your request per second down in QA setting.`,v4e=6e3,Fme=.4,w4e=.4,kme=15,$me=448e3,Db={DEFAULT:"",READING_FILES:"Reading files",SEARCHING_WEB:"Searching the web",READING_FILE_TREE:"Reading file tree"},mC={SETTINGS:"settings",EXPIRED_MODAL:"expired_modal",CHAT_MODE_SELECT:"chat_mode_select",MODE_SELECT_TOOLTIP:"mode_select_tooltip"},bh={MAX_TOKENS:6e3,TEMPERATURE:.1},pC=(m=>(m.OPENAI="openai",m.OPENAI_FORMAT="3rd party (openai-format)",m.AZURE_OPENAI="azure openai",m.ANTHROPIC="anthropic",m.COHEREAI="cohereai",m.GOOGLE="google",m.XAI="xai",m.OPENROUTERAI="openrouterai",m.GROQ="groq",m.OLLAMA="ollama",m.LM_STUDIO="lm-studio",m.COPILOT_PLUS="copilot-plus",m.MISTRAL="mistralai",m.DEEPSEEK="deepseek",m))(pC||{}),SE={reasoning:"This model supports general reasoning tasks.",vision:"This model supports image inputs.",websearch:"This model can access the internet."},Mb=[{name:"copilot-plus-flash",provider:"copilot-plus",enabled:!0,isBuiltIn:!0,core:!0,plusExclusive:!0,projectEnabled:!1,capabilities:["vision"]},{name:"google/gemini-2.5-flash-lite-preview-06-17",provider:"openrouterai",enabled:!0,isBuiltIn:!0,core:!0,projectEnabled:!0,capabilities:["vision"]},{name:"google/gemini-2.5-flash",provider:"openrouterai",enabled:!0,isBuiltIn:!0,core:!0,projectEnabled:!0,capabilities:["vision"]},{name:"google/gemini-2.5-pro",provider:"openrouterai",enabled:!0,isBuiltIn:!0,core:!0,projectEnabled:!0,capabilities:["vision"]},{name:"gpt-4.1",provider:"openai",enabled:!0,isBuiltIn:!0,core:!0,projectEnabled:!0,capabilities:["vision"]},{name:"gpt-4.1-mini",provider:"openai",enabled:!0,isBuiltIn:!0,core:!0,projectEnabled:!0,capabilities:["vision"]},{name:"gpt-4.1-nano",provider:"openai",enabled:!0,isBuiltIn:!0,core:!0,capabilities:["vision"]},{name:"o4-mini",provider:"openai",enabled:!0,isBuiltIn:!0,core:!0,capabilities:["reasoning"]},{name:"claude-sonnet-4-20250514",provider:"anthropic",enabled:!0,isBuiltIn:!0,capabilities:["vision","reasoning"]},{name:"claude-3-7-sonnet-latest",provider:"anthropic",enabled:!0,isBuiltIn:!0,capabilities:["vision","reasoning"]},{name:"claude-3-5-sonnet-latest",provider:"anthropic",enabled:!0,isBuiltIn:!0,core:!0,capabilities:["vision"]},{name:"claude-3-5-haiku-latest",provider:"anthropic",enabled:!0,isBuiltIn:!0},{name:"grok-3-beta",provider:"xai",enabled:!0,isBuiltIn:!0},{name:"grok-3-mini-beta",provider:"xai",enabled:!0,isBuiltIn:!0},{name:"gemini-2.5-flash",provider:"google",enabled:!0,isBuiltIn:!0,projectEnabled:!0,capabilities:["vision"]},{name:"gemini-2.5-pro",provider:"google",enabled:!0,isBuiltIn:!0,projectEnabled:!0,capabilities:["vision"]},{name:"command-r",provider:"cohereai",enabled:!0,isBuiltIn:!0},{name:"command-r-plus",provider:"cohereai",enabled:!0,isBuiltIn:!0},{name:"azure-openai",provider:"azure openai",enabled:!0,isBuiltIn:!0},{name:"deepseek-chat",provider:"deepseek",enabled:!0,isBuiltIn:!0},{name:"deepseek-reasoner",provider:"deepseek",enabled:!0,isBuiltIn:!0,capabilities:["reasoning"]}],vE=(l=>(l.OPENAI="openai",l.COHEREAI="cohereai",l.GOOGLE="google",l.AZURE_OPENAI="azure openai",l.OLLAMA="ollama",l.LM_STUDIO="lm-studio",l.OPENAI_FORMAT="3rd party (openai-format)",l.COPILOT_PLUS="copilot-plus",l.COPILOT_PLUS_JINA="copilot-plus-jina",l))(vE||{}),oR=[{name:"copilot-plus-small",provider:"copilot-plus",enabled:!0,isBuiltIn:!0,isEmbeddingModel:!0,core:!0,plusExclusive:!0},{name:"copilot-plus-large",provider:"copilot-plus-jina",enabled:!0,isBuiltIn:!0,isEmbeddingModel:!0,core:!0,plusExclusive:!0,believerExclusive:!0,dimensions:1024},{name:"copilot-plus-multilingual",provider:"copilot-plus-jina",enabled:!0,isBuiltIn:!0,isEmbeddingModel:!0,core:!0,plusExclusive:!0,dimensions:512},{name:"text-embedding-3-small",provider:"openai",enabled:!0,isBuiltIn:!0,isEmbeddingModel:!0,core:!0},{name:"text-embedding-3-large",provider:"openai",enabled:!0,isBuiltIn:!0,isEmbeddingModel:!0},{name:"embed-multilingual-light-v3.0",provider:"cohereai",enabled:!0,isBuiltIn:!0,isEmbeddingModel:!0},{name:"text-embedding-004",provider:"google",enabled:!0,isBuiltIn:!0,isEmbeddingModel:!0},{name:"azure-openai",provider:"azure openai",enabled:!0,isBuiltIn:!0,isEmbeddingModel:!0}],Ime="nomic-embed-text",jL={openai:{label:"OpenAI",host:"https://api.openai.com",keyManagementURL:"https://platform.openai.com/api-keys",listModelURL:"https://api.openai.com/v1/models",testModel:"gpt-4.1"},"azure openai":{label:"Azure OpenAI",host:"",keyManagementURL:"",listModelURL:"",testModel:"azure-openai"},anthropic:{label:"Anthropic",host:"https://api.anthropic.com/",keyManagementURL:"https://console.anthropic.com/settings/keys",listModelURL:"https://api.anthropic.com/v1/models",testModel:"claude-3-5-sonnet-latest"},cohereai:{label:"Cohere",host:"https://api.cohere.com",keyManagementURL:"https://dashboard.cohere.ai/api-keys",listModelURL:"https://api.cohere.com/v1/models",testModel:"command-r"},google:{label:"Gemini",host:"https://generativelanguage.googleapis.com",keyManagementURL:"https://makersuite.google.com/app/apikey",listModelURL:"https://generativelanguage.googleapis.com/v1beta/models",testModel:"gemini-2.5-flash"},xai:{label:"XAI",host:"https://api.x.ai/v1",keyManagementURL:"https://console.x.ai",listModelURL:"https://api.x.ai/v1/models",testModel:"grok-3-beta"},openrouterai:{label:"OpenRouter",host:"https://openrouter.ai/api/v1/",keyManagementURL:"https://openrouter.ai/keys",listModelURL:"https://openrouter.ai/api/v1/models",testModel:"openai/chatgpt-4o-latest"},groq:{label:"Groq",host:"https://api.groq.com/openai",keyManagementURL:"https://console.groq.com/keys",listModelURL:"https://api.groq.com/openai/v1/models",testModel:"llama3-8b-8192"},ollama:{label:"Ollama",host:"http://localhost:11434/v1/",keyManagementURL:"",listModelURL:""},"lm-studio":{label:"LM Studio",host:"http://localhost:1234/v1",keyManagementURL:"",listModelURL:""},"3rd party (openai-format)":{label:"OpenAI Format",host:"https://api.example.com/v1",keyManagementURL:"",listModelURL:""},mistralai:{label:"Mistral",host:"https://api.mistral.ai/v1",keyManagementURL:"https://console.mistral.ai/api-keys",listModelURL:"https://api.mistral.ai/v1/models",testModel:"mistral-tiny-latest"},deepseek:{label:"DeepSeek",host:"https://api.deepseek.com/",keyManagementURL:"https://platform.deepseek.com/api-keys",listModelURL:"https://api.deepseek.com/models",testModel:"deepseek-chat"},"copilot-plus":{label:"Copilot Plus",host:"https://api.brevilabs.com/v1",keyManagementURL:"",listModelURL:""},"copilot-plus-jina":{label:"Copilot Plus",host:"https://api.brevilabs.com/v1",keyManagementURL:"",listModelURL:""}},jb={anthropic:"anthropicApiKey",openai:"openAIApiKey","azure openai":"azureOpenAIApiKey",google:"googleApiKey",groq:"groqApiKey",openrouterai:"openRouterAiApiKey",cohereai:"cohereApiKey",xai:"xaiApiKey","copilot-plus":"plusLicenseKey",mistralai:"mistralApiKey",deepseek:"deepseekApiKey"},S4e=["NEVER","ON STARTUP","ON MODE SWITCH"],$r={APPLY_ADHOC_PROMPT:"apply-adhoc-prompt",CLEAR_LOCAL_COPILOT_INDEX:"clear-local-copilot-index",CLEAR_COPILOT_CACHE:"clear-copilot-cache",COUNT_WORD_AND_TOKENS_SELECTION:"count-word-and-tokens-selection",COUNT_TOTAL_VAULT_TOKENS:"count-total-vault-tokens",DEBUG_WORD_COMPLETION:"debug-word-completion",FORCE_REINDEX_VAULT_TO_COPILOT_INDEX:"force-reindex-vault-to-copilot-index",GARBAGE_COLLECT_COPILOT_INDEX:"garbage-collect-copilot-index",INDEX_VAULT_TO_COPILOT_INDEX:"index-vault-to-copilot-index",INSPECT_COPILOT_INDEX_BY_NOTE_PATHS:"copilot-inspect-index-by-note-paths",LIST_INDEXED_FILES:"copilot-list-indexed-files",LOAD_COPILOT_CHAT_CONVERSATION:"load-copilot-chat-conversation",NEW_CHAT:"new-chat",OPEN_COPILOT_CHAT_WINDOW:"chat-open-window",REMOVE_FILES_FROM_COPILOT_INDEX:"remove-files-from-copilot-index",SEARCH_ORAMA_DB:"copilot-search-orama-db",TOGGLE_COPILOT_CHAT_WINDOW:"chat-toggle-window",TOGGLE_AUTOCOMPLETE:"toggle-autocomplete",ADD_SELECTION_TO_CHAT_CONTEXT:"add-selection-to-chat-context"},Bme={[$r.APPLY_ADHOC_PROMPT]:"Apply ad-hoc custom prompt",[$r.CLEAR_LOCAL_COPILOT_INDEX]:"Clear local Copilot index",[$r.CLEAR_COPILOT_CACHE]:"Clear Copilot cache",[$r.COUNT_TOTAL_VAULT_TOKENS]:"Count total tokens in your vault",[$r.COUNT_WORD_AND_TOKENS_SELECTION]:"Count words and tokens in selection",[$r.DEBUG_WORD_COMPLETION]:"Word completion: Debug",[$r.FORCE_REINDEX_VAULT_TO_COPILOT_INDEX]:"Force reindex vault",[$r.GARBAGE_COLLECT_COPILOT_INDEX]:"Garbage collect Copilot index (remove files that no longer exist in vault)",[$r.INDEX_VAULT_TO_COPILOT_INDEX]:"Index (refresh) vault",[$r.INSPECT_COPILOT_INDEX_BY_NOTE_PATHS]:"Inspect Copilot index by note paths (debug)",[$r.LIST_INDEXED_FILES]:"List all indexed files (debug)",[$r.LOAD_COPILOT_CHAT_CONVERSATION]:"Load Copilot chat conversation",[$r.NEW_CHAT]:"New Copilot Chat",[$r.OPEN_COPILOT_CHAT_WINDOW]:"Open Copilot Chat Window",[$r.REMOVE_FILES_FROM_COPILOT_INDEX]:"Remove files from Copilot index (debug)",[$r.SEARCH_ORAMA_DB]:"Search OramaDB (debug)",[$r.TOGGLE_COPILOT_CHAT_WINDOW]:"Toggle Copilot Chat Window",[$r.TOGGLE_AUTOCOMPLETE]:"Toggle autocomplete",[$r.ADD_SELECTION_TO_CHAT_CONTEXT]:"Add selection to chat context"},_h={DELAY_MS:600,MIN_TRIGGER_LENGTH:3,MAX_CONTEXT_LENGTH:1e4,KEYBIND:"Tab"},dp={userId:Jx(),isPlusUser:!1,plusLicenseKey:"",openAIApiKey:"",openAIOrgId:"",huggingfaceApiKey:"",cohereApiKey:"",anthropicApiKey:"",azureOpenAIApiKey:"",azureOpenAIApiInstanceName:"",azureOpenAIApiDeploymentName:"",azureOpenAIApiVersion:"",azureOpenAIApiEmbeddingDeploymentName:"",googleApiKey:"",openRouterAiApiKey:"",xaiApiKey:"",mistralApiKey:"",deepseekApiKey:"",defaultChainType:"llm_chain",defaultModelKey:"gpt-4.1|openai",embeddingModelKey:"text-embedding-3-small|openai",temperature:bh.TEMPERATURE,maxTokens:bh.MAX_TOKENS,contextTurns:15,userSystemPrompt:"",openAIProxyBaseUrl:"",openAIEmbeddingProxyBaseUrl:"",stream:!0,defaultSaveFolder:"copilot-conversations",defaultConversationTag:"copilot-conversation",autosaveChat:!1,includeActiveNoteAsContext:!0,defaultOpenArea:"view",customPromptsFolder:"copilot-custom-prompts",indexVaultToVectorStore:"ON MODE SWITCH",qaExclusions:"",qaInclusions:"",chatNoteContextPath:"",chatNoteContextTags:[],enableIndexSync:!0,debug:!1,enableEncryption:!1,maxSourceChunks:3,groqApiKey:"",activeModels:Mb,activeEmbeddingModels:oR,embeddingRequestsPerMin:90,embeddingBatchSize:16,disableIndexOnMobile:!0,showSuggestedPrompts:!0,showRelevantNotes:!0,numPartitions:1,promptUsageTimestamps:{},promptSortStrategy:"timestamp",defaultConversationNoteName:"{$topic}@{$date}_{$time}",inlineEditCommands:[],projectList:[],enableAutocomplete:!0,autocompleteAcceptKey:_h.KEYBIND,allowAdditionalContext:!0,enableWordCompletion:!1,lastDismissedVersion:null,passMarkdownImages:!0,enableCustomPromptTemplating:!0,suggestedDefaultCommands:!1},vh={CHAT_IS_VISIBLE:"chat-is-visible",ACTIVE_LEAF_CHANGE:"active-leaf-change",ABORT_STREAM:"abort-stream"}});var Ume=v(dG=>{"use strict";dG.byteLength=Utr;dG.toByteArray=Htr;dG.fromByteArray=Ktr;var Lb=[],wh=[],qtr=typeof Uint8Array<"u"?Uint8Array:Array,qme="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(lR=0,x4e=qme.length;lR<x4e;++lR)Lb[lR]=qme[lR],wh[qme.charCodeAt(lR)]=lR;var lR,x4e;wh[45]=62;wh[95]=63;function C4e(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");r===-1&&(r=e);var n=r===e?0:4-r%4;return[r,n]}function Utr(t){var e=C4e(t),r=e[0],n=e[1];return(r+n)*3/4-n}function ztr(t,e,r){return(e+r)*3/4-r}function Htr(t){var e,r=C4e(t),n=r[0],o=r[1],i=new qtr(ztr(t,n,o)),a=0,s=o>0?n-4:n,u;for(u=0;u<s;u+=4)e=wh[t.charCodeAt(u)]<<18|wh[t.charCodeAt(u+1)]<<12|wh[t.charCodeAt(u+2)]<<6|wh[t.charCodeAt(u+3)],i[a++]=e>>16&255,i[a++]=e>>8&255,i[a++]=e&255;return o===2&&(e=wh[t.charCodeAt(u)]<<2|wh[t.charCodeAt(u+1)]>>4,i[a++]=e&255),o===1&&(e=wh[t.charCodeAt(u)]<<10|wh[t.charCodeAt(u+1)]<<4|wh[t.charCodeAt(u+2)]>>2,i[a++]=e>>8&255,i[a++]=e&255),i}function Vtr(t){return Lb[t>>18&63]+Lb[t>>12&63]+Lb[t>>6&63]+Lb[t&63]}function Wtr(t,e,r){for(var n,o=[],i=e;i<r;i+=3)n=(t[i]<<16&16711680)+(t[i+1]<<8&65280)+(t[i+2]&255),o.push(Vtr(n));return o.join("")}function Ktr(t){for(var e,r=t.length,n=r%3,o=[],i=16383,a=0,s=r-n;a<s;a+=i)o.push(Wtr(t,a,a+i>s?s:a+i));return n===1?(e=t[r-1],o.push(Lb[e>>2]+Lb[e<<4&63]+"==")):n===2&&(e=(t[r-2]<<8)+t[r-1],o.push(Lb[e>>10]+Lb[e>>4&63]+Lb[e<<2&63]+"=")),o.join("")}});var O4e=v(zme=>{zme.read=function(t,e,r,n,o){var i,a,s=o*8-n-1,u=(1<<s)-1,l=u>>1,c=-7,d=r?o-1:0,f=r?-1:1,p=t[e+d];for(d+=f,i=p&(1<<-c)-1,p>>=-c,c+=s;c>0;i=i*256+t[e+d],d+=f,c-=8);for(a=i&(1<<-c)-1,i>>=-c,c+=n;c>0;a=a*256+t[e+d],d+=f,c-=8);if(i===0)i=1-l;else{if(i===u)return a?NaN:(p?-1:1)*(1/0);a=a+Math.pow(2,n),i=i-l}return(p?-1:1)*a*Math.pow(2,i-n)};zme.write=function(t,e,r,n,o,i){var a,s,u,l=i*8-o-1,c=(1<<l)-1,d=c>>1,f=o===23?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:i-1,m=n?1:-1,h=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=c):(a=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-a))<1&&(a--,u*=2),a+d>=1?e+=f/u:e+=f*Math.pow(2,1-d),e*u>=2&&(a++,u/=2),a+d>=c?(s=0,a=c):a+d>=1?(s=(e*u-1)*Math.pow(2,o),a=a+d):(s=e*Math.pow(2,d-1)*Math.pow(2,o),a=0));o>=8;t[r+p]=s&255,p+=m,s/=256,o-=8);for(a=a<<o|s,l+=o;l>0;t[r+p]=a&255,p+=m,a/=256,l-=8);t[r+p-m]|=h*128}});var mp=v(kL=>{"use strict";var Hme=Ume(),LL=O4e(),P4e=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;kL.Buffer=be;kL.SlowBuffer=Qtr;kL.INSPECT_MAX_BYTES=50;var fG=2147483647;kL.kMaxLength=fG;be.TYPED_ARRAY_SUPPORT=Gtr();!be.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function Gtr(){try{let t=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),t.foo()===42}catch{return!1}}Object.defineProperty(be.prototype,"parent",{enumerable:!0,get:function(){if(be.isBuffer(this))return this.buffer}});Object.defineProperty(be.prototype,"offset",{enumerable:!0,get:function(){if(be.isBuffer(this))return this.byteOffset}});function hC(t){if(t>fG)throw new RangeError('The value "'+t+'" is invalid for option "size"');let e=new Uint8Array(t);return Object.setPrototypeOf(e,be.prototype),e}function be(t,e,r){if(typeof t=="number"){if(typeof e=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return Gme(t)}return I4e(t,e,r)}be.poolSize=8192;function I4e(t,e,r){if(typeof t=="string")return Ytr(t,e);if(ArrayBuffer.isView(t))return Ztr(t);if(t==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(Fb(t,ArrayBuffer)||t&&Fb(t.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Fb(t,SharedArrayBuffer)||t&&Fb(t.buffer,SharedArrayBuffer)))return Wme(t,e,r);if(typeof t=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let n=t.valueOf&&t.valueOf();if(n!=null&&n!==t)return be.from(n,e,r);let o=Xtr(t);if(o)return o;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof t[Symbol.toPrimitive]=="function")return be.from(t[Symbol.toPrimitive]("string"),e,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}be.from=function(t,e,r){return I4e(t,e,r)};Object.setPrototypeOf(be.prototype,Uint8Array.prototype);Object.setPrototypeOf(be,Uint8Array);function M4e(t){if(typeof t!="number")throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function Jtr(t,e,r){return M4e(t),t<=0?hC(t):e!==void 0?typeof r=="string"?hC(t).fill(e,r):hC(t).fill(e):hC(t)}be.alloc=function(t,e,r){return Jtr(t,e,r)};function Gme(t){return M4e(t),hC(t<0?0:Jme(t)|0)}be.allocUnsafe=function(t){return Gme(t)};be.allocUnsafeSlow=function(t){return Gme(t)};function Ytr(t,e){if((typeof e!="string"||e==="")&&(e="utf8"),!be.isEncoding(e))throw new TypeError("Unknown encoding: "+e);let r=R4e(t,e)|0,n=hC(r),o=n.write(t,e);return o!==r&&(n=n.slice(0,o)),n}function Vme(t){let e=t.length<0?0:Jme(t.length)|0,r=hC(e);for(let n=0;n<e;n+=1)r[n]=t[n]&255;return r}function Ztr(t){if(Fb(t,Uint8Array)){let e=new Uint8Array(t);return Wme(e.buffer,e.byteOffset,e.byteLength)}return Vme(t)}function Wme(t,e,r){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(r||0))throw new RangeError('"length" is outside of buffer bounds');let n;return e===void 0&&r===void 0?n=new Uint8Array(t):r===void 0?n=new Uint8Array(t,e):n=new Uint8Array(t,e,r),Object.setPrototypeOf(n,be.prototype),n}function Xtr(t){if(be.isBuffer(t)){let e=Jme(t.length)|0,r=hC(e);return r.length===0||t.copy(r,0,0,e),r}if(t.length!==void 0)return typeof t.length!="number"||Zme(t.length)?hC(0):Vme(t);if(t.type==="Buffer"&&Array.isArray(t.data))return Vme(t.data)}function Jme(t){if(t>=fG)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+fG.toString(16)+" bytes");return t|0}function Qtr(t){return+t!=t&&(t=0),be.alloc(+t)}be.isBuffer=function(e){return e!=null&&e._isBuffer===!0&&e!==be.prototype};be.compare=function(e,r){if(Fb(e,Uint8Array)&&(e=be.from(e,e.offset,e.byteLength)),Fb(r,Uint8Array)&&(r=be.from(r,r.offset,r.byteLength)),!be.isBuffer(e)||!be.isBuffer(r))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===r)return 0;let n=e.length,o=r.length;for(let i=0,a=Math.min(n,o);i<a;++i)if(e[i]!==r[i]){n=e[i],o=r[i];break}return n<o?-1:o<n?1:0};be.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};be.concat=function(e,r){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(e.length===0)return be.alloc(0);let n;if(r===void 0)for(r=0,n=0;n<e.length;++n)r+=e[n].length;let o=be.allocUnsafe(r),i=0;for(n=0;n<e.length;++n){let a=e[n];if(Fb(a,Uint8Array))i+a.length>o.length?(be.isBuffer(a)||(a=be.from(a)),a.copy(o,i)):Uint8Array.prototype.set.call(o,a,i);else if(be.isBuffer(a))a.copy(o,i);else throw new TypeError('"list" argument must be an Array of Buffers');i+=a.length}return o};function R4e(t,e){if(be.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||Fb(t,ArrayBuffer))return t.byteLength;if(typeof t!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);let r=t.length,n=arguments.length>2&&arguments[2]===!0;if(!n&&r===0)return 0;let o=!1;for(;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return Kme(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return r*2;case"hex":return r>>>1;case"base64":return q4e(t).length;default:if(o)return n?-1:Kme(t).length;e=(""+e).toLowerCase(),o=!0}}be.byteLength=R4e;function err(t,e,r){let n=!1;if((e===void 0||e<0)&&(e=0),e>this.length||((r===void 0||r>this.length)&&(r=this.length),r<=0)||(r>>>=0,e>>>=0,r<=e))return"";for(t||(t="utf8");;)switch(t){case"hex":return crr(this,e,r);case"utf8":case"utf-8":return N4e(this,e,r);case"ascii":return urr(this,e,r);case"latin1":case"binary":return lrr(this,e,r);case"base64":return arr(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return drr(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}be.prototype._isBuffer=!0;function cR(t,e,r){let n=t[e];t[e]=t[r],t[r]=n}be.prototype.swap16=function(){let e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let r=0;r<e;r+=2)cR(this,r,r+1);return this};be.prototype.swap32=function(){let e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let r=0;r<e;r+=4)cR(this,r,r+3),cR(this,r+1,r+2);return this};be.prototype.swap64=function(){let e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let r=0;r<e;r+=8)cR(this,r,r+7),cR(this,r+1,r+6),cR(this,r+2,r+5),cR(this,r+3,r+4);return this};be.prototype.toString=function(){let e=this.length;return e===0?"":arguments.length===0?N4e(this,0,e):err.apply(this,arguments)};be.prototype.toLocaleString=be.prototype.toString;be.prototype.equals=function(e){if(!be.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:be.compare(this,e)===0};be.prototype.inspect=function(){let e="",r=kL.INSPECT_MAX_BYTES;return e=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(e+=" ... "),"<Buffer "+e+">"};P4e&&(be.prototype[P4e]=be.prototype.inspect);be.prototype.compare=function(e,r,n,o,i){if(Fb(e,Uint8Array)&&(e=be.from(e,e.offset,e.byteLength)),!be.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(r===void 0&&(r=0),n===void 0&&(n=e?e.length:0),o===void 0&&(o=0),i===void 0&&(i=this.length),r<0||n>e.length||o<0||i>this.length)throw new RangeError("out of range index");if(o>=i&&r>=n)return 0;if(o>=i)return-1;if(r>=n)return 1;if(r>>>=0,n>>>=0,o>>>=0,i>>>=0,this===e)return 0;let a=i-o,s=n-r,u=Math.min(a,s),l=this.slice(o,i),c=e.slice(r,n);for(let d=0;d<u;++d)if(l[d]!==c[d]){a=l[d],s=c[d];break}return a<s?-1:s<a?1:0};function j4e(t,e,r,n,o){if(t.length===0)return-1;if(typeof r=="string"?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,Zme(r)&&(r=o?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(o)return-1;r=t.length-1}else if(r<0)if(o)r=0;else return-1;if(typeof e=="string"&&(e=be.from(e,n)),be.isBuffer(e))return e.length===0?-1:E4e(t,e,r,n,o);if(typeof e=="number")return e=e&255,typeof Uint8Array.prototype.indexOf=="function"?o?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):E4e(t,[e],r,n,o);throw new TypeError("val must be string, number or Buffer")}function E4e(t,e,r,n,o){let i=1,a=t.length,s=e.length;if(n!==void 0&&(n=String(n).toLowerCase(),n==="ucs2"||n==="ucs-2"||n==="utf16le"||n==="utf-16le")){if(t.length<2||e.length<2)return-1;i=2,a/=2,s/=2,r/=2}function u(c,d){return i===1?c[d]:c.readUInt16BE(d*i)}let l;if(o){let c=-1;for(l=r;l<a;l++)if(u(t,l)===u(e,c===-1?0:l-c)){if(c===-1&&(c=l),l-c+1===s)return c*i}else c!==-1&&(l-=l-c),c=-1}else for(r+s>a&&(r=a-s),l=r;l>=0;l--){let c=!0;for(let d=0;d<s;d++)if(u(t,l+d)!==u(e,d)){c=!1;break}if(c)return l}return-1}be.prototype.includes=function(e,r,n){return this.indexOf(e,r,n)!==-1};be.prototype.indexOf=function(e,r,n){return j4e(this,e,r,n,!0)};be.prototype.lastIndexOf=function(e,r,n){return j4e(this,e,r,n,!1)};function trr(t,e,r,n){r=Number(r)||0;let o=t.length-r;n?(n=Number(n),n>o&&(n=o)):n=o;let i=e.length;n>i/2&&(n=i/2);let a;for(a=0;a<n;++a){let s=parseInt(e.substr(a*2,2),16);if(Zme(s))return a;t[r+a]=s}return a}function rrr(t,e,r,n){return pG(Kme(e,t.length-r),t,r,n)}function nrr(t,e,r,n){return pG(hrr(e),t,r,n)}function orr(t,e,r,n){return pG(q4e(e),t,r,n)}function irr(t,e,r,n){return pG(grr(e,t.length-r),t,r,n)}be.prototype.write=function(e,r,n,o){if(r===void 0)o="utf8",n=this.length,r=0;else if(n===void 0&&typeof r=="string")o=r,n=this.length,r=0;else if(isFinite(r))r=r>>>0,isFinite(n)?(n=n>>>0,o===void 0&&(o="utf8")):(o=n,n=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let i=this.length-r;if((n===void 0||n>i)&&(n=i),e.length>0&&(n<0||r<0)||r>this.length)throw new RangeError("Attempt to write outside buffer bounds");o||(o="utf8");let a=!1;for(;;)switch(o){case"hex":return trr(this,e,r,n);case"utf8":case"utf-8":return rrr(this,e,r,n);case"ascii":case"latin1":case"binary":return nrr(this,e,r,n);case"base64":return orr(this,e,r,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return irr(this,e,r,n);default:if(a)throw new TypeError("Unknown encoding: "+o);o=(""+o).toLowerCase(),a=!0}};be.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function arr(t,e,r){return e===0&&r===t.length?Hme.fromByteArray(t):Hme.fromByteArray(t.slice(e,r))}function N4e(t,e,r){r=Math.min(t.length,r);let n=[],o=e;for(;o<r;){let i=t[o],a=null,s=i>239?4:i>223?3:i>191?2:1;if(o+s<=r){let u,l,c,d;switch(s){case 1:i<128&&(a=i);break;case 2:u=t[o+1],(u&192)===128&&(d=(i&31)<<6|u&63,d>127&&(a=d));break;case 3:u=t[o+1],l=t[o+2],(u&192)===128&&(l&192)===128&&(d=(i&15)<<12|(u&63)<<6|l&63,d>2047&&(d<55296||d>57343)&&(a=d));break;case 4:u=t[o+1],l=t[o+2],c=t[o+3],(u&192)===128&&(l&192)===128&&(c&192)===128&&(d=(i&15)<<18|(u&63)<<12|(l&63)<<6|c&63,d>65535&&d<1114112&&(a=d))}}a===null?(a=65533,s=1):a>65535&&(a-=65536,n.push(a>>>10&1023|55296),a=56320|a&1023),n.push(a),o+=s}return srr(n)}var T4e=4096;function srr(t){let e=t.length;if(e<=T4e)return String.fromCharCode.apply(String,t);let r="",n=0;for(;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=T4e));return r}function urr(t,e,r){let n="";r=Math.min(t.length,r);for(let o=e;o<r;++o)n+=String.fromCharCode(t[o]&127);return n}function lrr(t,e,r){let n="";r=Math.min(t.length,r);for(let o=e;o<r;++o)n+=String.fromCharCode(t[o]);return n}function crr(t,e,r){let n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);let o="";for(let i=e;i<r;++i)o+=yrr[t[i]];return o}function drr(t,e,r){let n=t.slice(e,r),o="";for(let i=0;i<n.length-1;i+=2)o+=String.fromCharCode(n[i]+n[i+1]*256);return o}be.prototype.slice=function(e,r){let n=this.length;e=~~e,r=r===void 0?n:~~r,e<0?(e+=n,e<0&&(e=0)):e>n&&(e=n),r<0?(r+=n,r<0&&(r=0)):r>n&&(r=n),r<e&&(r=e);let o=this.subarray(e,r);return Object.setPrototypeOf(o,be.prototype),o};function Dl(t,e,r){if(t%1!==0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}be.prototype.readUintLE=be.prototype.readUIntLE=function(e,r,n){e=e>>>0,r=r>>>0,n||Dl(e,r,this.length);let o=this[e],i=1,a=0;for(;++a<r&&(i*=256);)o+=this[e+a]*i;return o};be.prototype.readUintBE=be.prototype.readUIntBE=function(e,r,n){e=e>>>0,r=r>>>0,n||Dl(e,r,this.length);let o=this[e+--r],i=1;for(;r>0&&(i*=256);)o+=this[e+--r]*i;return o};be.prototype.readUint8=be.prototype.readUInt8=function(e,r){return e=e>>>0,r||Dl(e,1,this.length),this[e]};be.prototype.readUint16LE=be.prototype.readUInt16LE=function(e,r){return e=e>>>0,r||Dl(e,2,this.length),this[e]|this[e+1]<<8};be.prototype.readUint16BE=be.prototype.readUInt16BE=function(e,r){return e=e>>>0,r||Dl(e,2,this.length),this[e]<<8|this[e+1]};be.prototype.readUint32LE=be.prototype.readUInt32LE=function(e,r){return e=e>>>0,r||Dl(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+this[e+3]*16777216};be.prototype.readUint32BE=be.prototype.readUInt32BE=function(e,r){return e=e>>>0,r||Dl(e,4,this.length),this[e]*16777216+(this[e+1]<<16|this[e+2]<<8|this[e+3])};be.prototype.readBigUInt64LE=xE(function(e){e=e>>>0,FL(e,"offset");let r=this[e],n=this[e+7];(r===void 0||n===void 0)&&P2(e,this.length-8);let o=r+this[++e]*2**8+this[++e]*2**16+this[++e]*2**24,i=this[++e]+this[++e]*2**8+this[++e]*2**16+n*2**24;return BigInt(o)+(BigInt(i)<<BigInt(32))});be.prototype.readBigUInt64BE=xE(function(e){e=e>>>0,FL(e,"offset");let r=this[e],n=this[e+7];(r===void 0||n===void 0)&&P2(e,this.length-8);let o=r*2**24+this[++e]*2**16+this[++e]*2**8+this[++e],i=this[++e]*2**24+this[++e]*2**16+this[++e]*2**8+n;return(BigInt(o)<<BigInt(32))+BigInt(i)});be.prototype.readIntLE=function(e,r,n){e=e>>>0,r=r>>>0,n||Dl(e,r,this.length);let o=this[e],i=1,a=0;for(;++a<r&&(i*=256);)o+=this[e+a]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*r)),o};be.prototype.readIntBE=function(e,r,n){e=e>>>0,r=r>>>0,n||Dl(e,r,this.length);let o=r,i=1,a=this[e+--o];for(;o>0&&(i*=256);)a+=this[e+--o]*i;return i*=128,a>=i&&(a-=Math.pow(2,8*r)),a};be.prototype.readInt8=function(e,r){return e=e>>>0,r||Dl(e,1,this.length),this[e]&128?(255-this[e]+1)*-1:this[e]};be.prototype.readInt16LE=function(e,r){e=e>>>0,r||Dl(e,2,this.length);let n=this[e]|this[e+1]<<8;return n&32768?n|4294901760:n};be.prototype.readInt16BE=function(e,r){e=e>>>0,r||Dl(e,2,this.length);let n=this[e+1]|this[e]<<8;return n&32768?n|4294901760:n};be.prototype.readInt32LE=function(e,r){return e=e>>>0,r||Dl(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24};be.prototype.readInt32BE=function(e,r){return e=e>>>0,r||Dl(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]};be.prototype.readBigInt64LE=xE(function(e){e=e>>>0,FL(e,"offset");let r=this[e],n=this[e+7];(r===void 0||n===void 0)&&P2(e,this.length-8);let o=this[e+4]+this[e+5]*2**8+this[e+6]*2**16+(n<<24);return(BigInt(o)<<BigInt(32))+BigInt(r+this[++e]*2**8+this[++e]*2**16+this[++e]*2**24)});be.prototype.readBigInt64BE=xE(function(e){e=e>>>0,FL(e,"offset");let r=this[e],n=this[e+7];(r===void 0||n===void 0)&&P2(e,this.length-8);let o=(r<<24)+this[++e]*2**16+this[++e]*2**8+this[++e];return(BigInt(o)<<BigInt(32))+BigInt(this[++e]*2**24+this[++e]*2**16+this[++e]*2**8+n)});be.prototype.readFloatLE=function(e,r){return e=e>>>0,r||Dl(e,4,this.length),LL.read(this,e,!0,23,4)};be.prototype.readFloatBE=function(e,r){return e=e>>>0,r||Dl(e,4,this.length),LL.read(this,e,!1,23,4)};be.prototype.readDoubleLE=function(e,r){return e=e>>>0,r||Dl(e,8,this.length),LL.read(this,e,!0,52,8)};be.prototype.readDoubleBE=function(e,r){return e=e>>>0,r||Dl(e,8,this.length),LL.read(this,e,!1,52,8)};function pp(t,e,r,n,o,i){if(!be.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>o||e<i)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}be.prototype.writeUintLE=be.prototype.writeUIntLE=function(e,r,n,o){if(e=+e,r=r>>>0,n=n>>>0,!o){let s=Math.pow(2,8*n)-1;pp(this,e,r,n,s,0)}let i=1,a=0;for(this[r]=e&255;++a<n&&(i*=256);)this[r+a]=e/i&255;return r+n};be.prototype.writeUintBE=be.prototype.writeUIntBE=function(e,r,n,o){if(e=+e,r=r>>>0,n=n>>>0,!o){let s=Math.pow(2,8*n)-1;pp(this,e,r,n,s,0)}let i=n-1,a=1;for(this[r+i]=e&255;--i>=0&&(a*=256);)this[r+i]=e/a&255;return r+n};be.prototype.writeUint8=be.prototype.writeUInt8=function(e,r,n){return e=+e,r=r>>>0,n||pp(this,e,r,1,255,0),this[r]=e&255,r+1};be.prototype.writeUint16LE=be.prototype.writeUInt16LE=function(e,r,n){return e=+e,r=r>>>0,n||pp(this,e,r,2,65535,0),this[r]=e&255,this[r+1]=e>>>8,r+2};be.prototype.writeUint16BE=be.prototype.writeUInt16BE=function(e,r,n){return e=+e,r=r>>>0,n||pp(this,e,r,2,65535,0),this[r]=e>>>8,this[r+1]=e&255,r+2};be.prototype.writeUint32LE=be.prototype.writeUInt32LE=function(e,r,n){return e=+e,r=r>>>0,n||pp(this,e,r,4,4294967295,0),this[r+3]=e>>>24,this[r+2]=e>>>16,this[r+1]=e>>>8,this[r]=e&255,r+4};be.prototype.writeUint32BE=be.prototype.writeUInt32BE=function(e,r,n){return e=+e,r=r>>>0,n||pp(this,e,r,4,4294967295,0),this[r]=e>>>24,this[r+1]=e>>>16,this[r+2]=e>>>8,this[r+3]=e&255,r+4};function D4e(t,e,r,n,o){B4e(e,n,o,t,r,7);let i=Number(e&BigInt(4294967295));t[r++]=i,i=i>>8,t[r++]=i,i=i>>8,t[r++]=i,i=i>>8,t[r++]=i;let a=Number(e>>BigInt(32)&BigInt(4294967295));return t[r++]=a,a=a>>8,t[r++]=a,a=a>>8,t[r++]=a,a=a>>8,t[r++]=a,r}function L4e(t,e,r,n,o){B4e(e,n,o,t,r,7);let i=Number(e&BigInt(4294967295));t[r+7]=i,i=i>>8,t[r+6]=i,i=i>>8,t[r+5]=i,i=i>>8,t[r+4]=i;let a=Number(e>>BigInt(32)&BigInt(4294967295));return t[r+3]=a,a=a>>8,t[r+2]=a,a=a>>8,t[r+1]=a,a=a>>8,t[r]=a,r+8}be.prototype.writeBigUInt64LE=xE(function(e,r=0){return D4e(this,e,r,BigInt(0),BigInt("0xffffffffffffffff"))});be.prototype.writeBigUInt64BE=xE(function(e,r=0){return L4e(this,e,r,BigInt(0),BigInt("0xffffffffffffffff"))});be.prototype.writeIntLE=function(e,r,n,o){if(e=+e,r=r>>>0,!o){let u=Math.pow(2,8*n-1);pp(this,e,r,n,u-1,-u)}let i=0,a=1,s=0;for(this[r]=e&255;++i<n&&(a*=256);)e<0&&s===0&&this[r+i-1]!==0&&(s=1),this[r+i]=(e/a>>0)-s&255;return r+n};be.prototype.writeIntBE=function(e,r,n,o){if(e=+e,r=r>>>0,!o){let u=Math.pow(2,8*n-1);pp(this,e,r,n,u-1,-u)}let i=n-1,a=1,s=0;for(this[r+i]=e&255;--i>=0&&(a*=256);)e<0&&s===0&&this[r+i+1]!==0&&(s=1),this[r+i]=(e/a>>0)-s&255;return r+n};be.prototype.writeInt8=function(e,r,n){return e=+e,r=r>>>0,n||pp(this,e,r,1,127,-128),e<0&&(e=255+e+1),this[r]=e&255,r+1};be.prototype.writeInt16LE=function(e,r,n){return e=+e,r=r>>>0,n||pp(this,e,r,2,32767,-32768),this[r]=e&255,this[r+1]=e>>>8,r+2};be.prototype.writeInt16BE=function(e,r,n){return e=+e,r=r>>>0,n||pp(this,e,r,2,32767,-32768),this[r]=e>>>8,this[r+1]=e&255,r+2};be.prototype.writeInt32LE=function(e,r,n){return e=+e,r=r>>>0,n||pp(this,e,r,4,2147483647,-2147483648),this[r]=e&255,this[r+1]=e>>>8,this[r+2]=e>>>16,this[r+3]=e>>>24,r+4};be.prototype.writeInt32BE=function(e,r,n){return e=+e,r=r>>>0,n||pp(this,e,r,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[r]=e>>>24,this[r+1]=e>>>16,this[r+2]=e>>>8,this[r+3]=e&255,r+4};be.prototype.writeBigInt64LE=xE(function(e,r=0){return D4e(this,e,r,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});be.prototype.writeBigInt64BE=xE(function(e,r=0){return L4e(this,e,r,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function F4e(t,e,r,n,o,i){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function k4e(t,e,r,n,o){return e=+e,r=r>>>0,o||F4e(t,e,r,4,34028234663852886e22,-34028234663852886e22),LL.write(t,e,r,n,23,4),r+4}be.prototype.writeFloatLE=function(e,r,n){return k4e(this,e,r,!0,n)};be.prototype.writeFloatBE=function(e,r,n){return k4e(this,e,r,!1,n)};function $4e(t,e,r,n,o){return e=+e,r=r>>>0,o||F4e(t,e,r,8,17976931348623157e292,-17976931348623157e292),LL.write(t,e,r,n,52,8),r+8}be.prototype.writeDoubleLE=function(e,r,n){return $4e(this,e,r,!0,n)};be.prototype.writeDoubleBE=function(e,r,n){return $4e(this,e,r,!1,n)};be.prototype.copy=function(e,r,n,o){if(!be.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),!o&&o!==0&&(o=this.length),r>=e.length&&(r=e.length),r||(r=0),o>0&&o<n&&(o=n),o===n||e.length===0||this.length===0)return 0;if(r<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(o<0)throw new RangeError("sourceEnd out of bounds");o>this.length&&(o=this.length),e.length-r<o-n&&(o=e.length-r+n);let i=o-n;return this===e&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(r,n,o):Uint8Array.prototype.set.call(e,this.subarray(n,o),r),i};be.prototype.fill=function(e,r,n,o){if(typeof e=="string"){if(typeof r=="string"?(o=r,r=0,n=this.length):typeof n=="string"&&(o=n,n=this.length),o!==void 0&&typeof o!="string")throw new TypeError("encoding must be a string");if(typeof o=="string"&&!be.isEncoding(o))throw new TypeError("Unknown encoding: "+o);if(e.length===1){let a=e.charCodeAt(0);(o==="utf8"&&a<128||o==="latin1")&&(e=a)}}else typeof e=="number"?e=e&255:typeof e=="boolean"&&(e=Number(e));if(r<0||this.length<r||this.length<n)throw new RangeError("Out of range index");if(n<=r)return this;r=r>>>0,n=n===void 0?this.length:n>>>0,e||(e=0);let i;if(typeof e=="number")for(i=r;i<n;++i)this[i]=e;else{let a=be.isBuffer(e)?e:be.from(e,o),s=a.length;if(s===0)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(i=0;i<n-r;++i)this[i+r]=a[i%s]}return this};var DL={};function Yme(t,e,r){DL[t]=class extends r{constructor(){super(),Object.defineProperty(this,"message",{value:e.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${t}]`,this.stack,delete this.name}get code(){return t}set code(o){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:o,writable:!0})}toString(){return`${this.name} [${t}]: ${this.message}`}}}Yme("ERR_BUFFER_OUT_OF_BOUNDS",function(t){return t?`${t} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError);Yme("ERR_INVALID_ARG_TYPE",function(t,e){return`The "${t}" argument must be of type number. Received type ${typeof e}`},TypeError);Yme("ERR_OUT_OF_RANGE",function(t,e,r){let n=`The value of "${t}" is out of range.`,o=r;return Number.isInteger(r)&&Math.abs(r)>2**32?o=A4e(String(r)):typeof r=="bigint"&&(o=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(o=A4e(o)),o+="n"),n+=` It must be ${e}. Received ${o}`,n},RangeError);function A4e(t){let e="",r=t.length,n=t[0]==="-"?1:0;for(;r>=n+4;r-=3)e=`_${t.slice(r-3,r)}${e}`;return`${t.slice(0,r)}${e}`}function frr(t,e,r){FL(e,"offset"),(t[e]===void 0||t[e+r]===void 0)&&P2(e,t.length-(r+1))}function B4e(t,e,r,n,o,i){if(t>r||t<e){let a=typeof e=="bigint"?"n":"",s;throw i>3?e===0||e===BigInt(0)?s=`>= 0${a} and < 2${a} ** ${(i+1)*8}${a}`:s=`>= -(2${a} ** ${(i+1)*8-1}${a}) and < 2 ** ${(i+1)*8-1}${a}`:s=`>= ${e}${a} and <= ${r}${a}`,new DL.ERR_OUT_OF_RANGE("value",s,t)}frr(n,o,i)}function FL(t,e){if(typeof t!="number")throw new DL.ERR_INVALID_ARG_TYPE(e,"number",t)}function P2(t,e,r){throw Math.floor(t)!==t?(FL(t,r),new DL.ERR_OUT_OF_RANGE(r||"offset","an integer",t)):e<0?new DL.ERR_BUFFER_OUT_OF_BOUNDS:new DL.ERR_OUT_OF_RANGE(r||"offset",`>= ${r?1:0} and <= ${e}`,t)}var prr=/[^+/0-9A-Za-z-_]/g;function mrr(t){if(t=t.split("=")[0],t=t.trim().replace(prr,""),t.length<2)return"";for(;t.length%4!==0;)t=t+"=";return t}function Kme(t,e){e=e||1/0;let r,n=t.length,o=null,i=[];for(let a=0;a<n;++a){if(r=t.charCodeAt(a),r>55295&&r<57344){if(!o){if(r>56319){(e-=3)>-1&&i.push(239,191,189);continue}else if(a+1===n){(e-=3)>-1&&i.push(239,191,189);continue}o=r;continue}if(r<56320){(e-=3)>-1&&i.push(239,191,189),o=r;continue}r=(o-55296<<10|r-56320)+65536}else o&&(e-=3)>-1&&i.push(239,191,189);if(o=null,r<128){if((e-=1)<0)break;i.push(r)}else if(r<2048){if((e-=2)<0)break;i.push(r>>6|192,r&63|128)}else if(r<65536){if((e-=3)<0)break;i.push(r>>12|224,r>>6&63|128,r&63|128)}else if(r<1114112){if((e-=4)<0)break;i.push(r>>18|240,r>>12&63|128,r>>6&63|128,r&63|128)}else throw new Error("Invalid code point")}return i}function hrr(t){let e=[];for(let r=0;r<t.length;++r)e.push(t.charCodeAt(r)&255);return e}function grr(t,e){let r,n,o,i=[];for(let a=0;a<t.length&&!((e-=2)<0);++a)r=t.charCodeAt(a),n=r>>8,o=r%256,i.push(o),i.push(n);return i}function q4e(t){return Hme.toByteArray(mrr(t))}function pG(t,e,r,n){let o;for(o=0;o<n&&!(o+r>=e.length||o>=t.length);++o)e[o+r]=t[o];return o}function Fb(t,e){return t instanceof e||t!=null&&t.constructor!=null&&t.constructor.name!=null&&t.constructor.name===e.name}function Zme(t){return t!==t}var yrr=function(){let t="0123456789abcdef",e=new Array(256);for(let r=0;r<16;++r){let n=r*16;for(let o=0;o<16;++o)e[n+o]=t[r]+t[o]}return e}();function xE(t){return typeof BigInt>"u"?brr:t}function brr(){throw new Error("BigInt not supported")}});var f3e=v(Li=>{"use strict";function lhe(t,e){var r=t.length;t.push(e);e:for(;0<r;){var n=r-1>>>1,o=t[n];if(0<SG(o,e))t[n]=e,t[r]=o,r=n;else break e}}function Qg(t){return t.length===0?null:t[0]}function CG(t){if(t.length===0)return null;var e=t[0],r=t.pop();if(r!==e){t[0]=r;e:for(var n=0,o=t.length,i=o>>>1;n<i;){var a=2*(n+1)-1,s=t[a],u=a+1,l=t[u];if(0>SG(s,r))u<o&&0>SG(l,s)?(t[n]=l,t[u]=r,n=u):(t[n]=s,t[a]=r,n=a);else if(u<o&&0>SG(l,r))t[n]=l,t[u]=r,n=u;else break e}}return e}function SG(t,e){var r=t.sortIndex-e.sortIndex;return r!==0?r:t.id-e.id}typeof performance=="object"&&typeof performance.now=="function"?(n3e=performance,Li.unstable_now=function(){return n3e.now()}):(ahe=Date,o3e=ahe.now(),Li.unstable_now=function(){return ahe.now()-o3e});var n3e,ahe,o3e,kb=[],OE=[],Srr=1,xh=null,Cd=3,OG=!1,mR=!1,A2=!1,s3e=typeof setTimeout=="function"?setTimeout:null,u3e=typeof clearTimeout=="function"?clearTimeout:null,i3e=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function che(t){for(var e=Qg(OE);e!==null;){if(e.callback===null)CG(OE);else if(e.startTime<=t)CG(OE),e.sortIndex=e.expirationTime,lhe(kb,e);else break;e=Qg(OE)}}function dhe(t){if(A2=!1,che(t),!mR)if(Qg(kb)!==null)mR=!0,phe(fhe);else{var e=Qg(OE);e!==null&&mhe(dhe,e.startTime-t)}}function fhe(t,e){mR=!1,A2&&(A2=!1,u3e(I2),I2=-1),OG=!0;var r=Cd;try{for(che(e),xh=Qg(kb);xh!==null&&(!(xh.expirationTime>e)||t&&!d3e());){var n=xh.callback;if(typeof n=="function"){xh.callback=null,Cd=xh.priorityLevel;var o=n(xh.expirationTime<=e);e=Li.unstable_now(),typeof o=="function"?xh.callback=o:xh===Qg(kb)&&CG(kb),che(e)}else CG(kb);xh=Qg(kb)}if(xh!==null)var i=!0;else{var a=Qg(OE);a!==null&&mhe(dhe,a.startTime-e),i=!1}return i}finally{xh=null,Cd=r,OG=!1}}var PG=!1,xG=null,I2=-1,l3e=5,c3e=-1;function d3e(){return!(Li.unstable_now()-c3e<l3e)}function she(){if(xG!==null){var t=Li.unstable_now();c3e=t;var e=!0;try{e=xG(!0,t)}finally{e?T2():(PG=!1,xG=null)}}else PG=!1}var T2;typeof i3e=="function"?T2=function(){i3e(she)}:typeof MessageChannel<"u"?(uhe=new MessageChannel,a3e=uhe.port2,uhe.port1.onmessage=she,T2=function(){a3e.postMessage(null)}):T2=function(){s3e(she,0)};var uhe,a3e;function phe(t){xG=t,PG||(PG=!0,T2())}function mhe(t,e){I2=s3e(function(){t(Li.unstable_now())},e)}Li.unstable_IdlePriority=5;Li.unstable_ImmediatePriority=1;Li.unstable_LowPriority=4;Li.unstable_NormalPriority=3;Li.unstable_Profiling=null;Li.unstable_UserBlockingPriority=2;Li.unstable_cancelCallback=function(t){t.callback=null};Li.unstable_continueExecution=function(){mR||OG||(mR=!0,phe(fhe))};Li.unstable_forceFrameRate=function(t){0>t||125<t?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):l3e=0<t?Math.floor(1e3/t):5};Li.unstable_getCurrentPriorityLevel=function(){return Cd};Li.unstable_getFirstCallbackNode=function(){return Qg(kb)};Li.unstable_next=function(t){switch(Cd){case 1:case 2:case 3:var e=3;break;default:e=Cd}var r=Cd;Cd=e;try{return t()}finally{Cd=r}};Li.unstable_pauseExecution=function(){};Li.unstable_requestPaint=function(){};Li.unstable_runWithPriority=function(t,e){switch(t){case 1:case 2:case 3:case 4:case 5:break;default:t=3}var r=Cd;Cd=t;try{return e()}finally{Cd=r}};Li.unstable_scheduleCallback=function(t,e,r){var n=Li.unstable_now();switch(typeof r=="object"&&r!==null?(r=r.delay,r=typeof r=="number"&&0<r?n+r:n):r=n,t){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return o=r+o,t={id:Srr++,callback:e,priorityLevel:t,startTime:r,expirationTime:o,sortIndex:-1},r>n?(t.sortIndex=r,lhe(OE,t),Qg(kb)===null&&t===Qg(OE)&&(A2?(u3e(I2),I2=-1):A2=!0,mhe(dhe,r-n))):(t.sortIndex=o,lhe(kb,t),mR||OG||(mR=!0,phe(fhe))),t};Li.unstable_shouldYield=d3e;Li.unstable_wrapCallback=function(t){var e=Cd;return function(){var r=Cd;Cd=e;try{return t.apply(this,arguments)}finally{Cd=r}}}});var m3e=v((TFn,p3e)=>{"use strict";p3e.exports=f3e()});var v8e=v(mm=>{"use strict";var wHe=X(),fm=m3e();function Be(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var SHe=new Set,X2={};function ER(t,e){sF(t,e),sF(t+"Capture",e)}function sF(t,e){for(X2[t]=e,t=0;t<e.length;t++)SHe.add(e[t])}var wC=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Fhe=Object.prototype.hasOwnProperty,xrr=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,h3e={},g3e={};function Crr(t){return Fhe.call(g3e,t)?!0:Fhe.call(h3e,t)?!1:xrr.test(t)?g3e[t]=!0:(h3e[t]=!0,!1)}function Orr(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Prr(t,e,r,n){if(e===null||typeof e>"u"||Orr(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Pf(t,e,r,n,o,i,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=o,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=a}var vc={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){vc[t]=new Pf(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];vc[e]=new Pf(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){vc[t]=new Pf(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){vc[t]=new Pf(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){vc[t]=new Pf(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){vc[t]=new Pf(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){vc[t]=new Pf(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){vc[t]=new Pf(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){vc[t]=new Pf(t,5,!1,t.toLowerCase(),null,!1,!1)});var Age=/[\-:]([a-z])/g;function Ige(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Age,Ige);vc[e]=new Pf(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Age,Ige);vc[e]=new Pf(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Age,Ige);vc[e]=new Pf(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){vc[t]=new Pf(t,1,!1,t.toLowerCase(),null,!1,!1)});vc.xlinkHref=new Pf("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){vc[t]=new Pf(t,1,!1,t.toLowerCase(),null,!0,!0)});function Mge(t,e,r,n){var o=vc.hasOwnProperty(e)?vc[e]:null;(o!==null?o.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Prr(e,r,o,n)&&(r=null),n||o===null?Crr(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):o.mustUseProperty?t[o.propertyName]=r===null?o.type===3?!1:"":r:(e=o.attributeName,n=o.attributeNamespace,r===null?t.removeAttribute(e):(o=o.type,r=o===3||o===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var OC=wHe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,EG=Symbol.for("react.element"),zL=Symbol.for("react.portal"),HL=Symbol.for("react.fragment"),Rge=Symbol.for("react.strict_mode"),khe=Symbol.for("react.profiler"),xHe=Symbol.for("react.provider"),CHe=Symbol.for("react.context"),jge=Symbol.for("react.forward_ref"),$he=Symbol.for("react.suspense"),Bhe=Symbol.for("react.suspense_list"),Nge=Symbol.for("react.memo"),EE=Symbol.for("react.lazy");Symbol.for("react.scope");Symbol.for("react.debug_trace_mode");var OHe=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden");Symbol.for("react.cache");Symbol.for("react.tracing_marker");var y3e=Symbol.iterator;function M2(t){return t===null||typeof t!="object"?null:(t=y3e&&t[y3e]||t["@@iterator"],typeof t=="function"?t:null)}var Ra=Object.assign,hhe;function $2(t){if(hhe===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);hhe=e&&e[1]||""}return`
`+hhe+t}var ghe=!1;function yhe(t,e){if(!t||ghe)return"";ghe=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(l){var n=l}Reflect.construct(t,[],e)}else{try{e.call()}catch(l){n=l}t.call(e.prototype)}else{try{throw Error()}catch(l){n=l}t()}}catch(l){if(l&&n&&typeof l.stack=="string"){for(var o=l.stack.split(`
`),i=n.stack.split(`
`),a=o.length-1,s=i.length-1;1<=a&&0<=s&&o[a]!==i[s];)s--;for(;1<=a&&0<=s;a--,s--)if(o[a]!==i[s]){if(a!==1||s!==1)do if(a--,s--,0>s||o[a]!==i[s]){var u=`
`+o[a].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=a&&0<=s);break}}}finally{ghe=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?$2(t):""}function Err(t){switch(t.tag){case 5:return $2(t.type);case 16:return $2("Lazy");case 13:return $2("Suspense");case 19:return $2("SuspenseList");case 0:case 2:case 15:return t=yhe(t.type,!1),t;case 11:return t=yhe(t.type.render,!1),t;case 1:return t=yhe(t.type,!0),t;default:return""}}function qhe(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case HL:return"Fragment";case zL:return"Portal";case khe:return"Profiler";case Rge:return"StrictMode";case $he:return"Suspense";case Bhe:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case CHe:return(t.displayName||"Context")+".Consumer";case xHe:return(t._context.displayName||"Context")+".Provider";case jge:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Nge:return e=t.displayName||null,e!==null?e:qhe(t.type)||"Memo";case EE:e=t._payload,t=t._init;try{return qhe(t(e))}catch{}}return null}function Trr(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return qhe(e);case 8:return e===Rge?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function qE(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function PHe(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Arr(t){var e=PHe(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var o=r.get,i=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return o.call(this)},set:function(a){n=""+a,i.call(this,a)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(a){n=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function TG(t){t._valueTracker||(t._valueTracker=Arr(t))}function EHe(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=PHe(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function rJ(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Uhe(t,e){var r=e.checked;return Ra({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function b3e(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=qE(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function THe(t,e){e=e.checked,e!=null&&Mge(t,"checked",e,!1)}function zhe(t,e){THe(t,e);var r=qE(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Hhe(t,e.type,r):e.hasOwnProperty("defaultValue")&&Hhe(t,e.type,qE(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function _3e(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function Hhe(t,e,r){(e!=="number"||rJ(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var B2=Array.isArray;function tF(t,e,r,n){if(t=t.options,e){e={};for(var o=0;o<r.length;o++)e["$"+r[o]]=!0;for(r=0;r<t.length;r++)o=e.hasOwnProperty("$"+t[r].value),t[r].selected!==o&&(t[r].selected=o),o&&n&&(t[r].defaultSelected=!0)}else{for(r=""+qE(r),e=null,o=0;o<t.length;o++){if(t[o].value===r){t[o].selected=!0,n&&(t[o].defaultSelected=!0);return}e!==null||t[o].disabled||(e=t[o])}e!==null&&(e.selected=!0)}}function Vhe(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Be(91));return Ra({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function v3e(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(Be(92));if(B2(r)){if(1<r.length)throw Error(Be(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:qE(r)}}function AHe(t,e){var r=qE(e.value),n=qE(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function w3e(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function IHe(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Whe(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?IHe(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var AG,MHe=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,o){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,o)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(AG=AG||document.createElement("div"),AG.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=AG.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Q2(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var z2={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Irr=["Webkit","ms","Moz","O"];Object.keys(z2).forEach(function(t){Irr.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),z2[e]=z2[t]})});function RHe(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||z2.hasOwnProperty(t)&&z2[t]?(""+e).trim():e+"px"}function jHe(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,o=RHe(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,o):t[r]=o}}var Mrr=Ra({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Khe(t,e){if(e){if(Mrr[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Be(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Be(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Be(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Be(62))}}function Ghe(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Jhe=null;function Dge(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Yhe=null,rF=null,nF=null;function S3e(t){if(t=y4(t)){if(typeof Yhe!="function")throw Error(Be(280));var e=t.stateNode;e&&(e=IJ(e),Yhe(t.stateNode,t.type,e))}}function NHe(t){rF?nF?nF.push(t):nF=[t]:rF=t}function DHe(){if(rF){var t=rF,e=nF;if(nF=rF=null,S3e(t),e)for(t=0;t<e.length;t++)S3e(e[t])}}function LHe(t,e){return t(e)}function FHe(){}var bhe=!1;function kHe(t,e,r){if(bhe)return t(e,r);bhe=!0;try{return LHe(t,e,r)}finally{bhe=!1,(rF!==null||nF!==null)&&(FHe(),DHe())}}function e4(t,e){var r=t.stateNode;if(r===null)return null;var n=IJ(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(Be(231,e,typeof r));return r}var Zhe=!1;if(wC)try{qL={},Object.defineProperty(qL,"passive",{get:function(){Zhe=!0}}),window.addEventListener("test",qL,qL),window.removeEventListener("test",qL,qL)}catch{Zhe=!1}var qL;function Rrr(t,e,r,n,o,i,a,s,u){var l=Array.prototype.slice.call(arguments,3);try{e.apply(r,l)}catch(c){this.onError(c)}}var H2=!1,nJ=null,oJ=!1,Xhe=null,jrr={onError:function(t){H2=!0,nJ=t}};function Nrr(t,e,r,n,o,i,a,s,u){H2=!1,nJ=null,Rrr.apply(jrr,arguments)}function Drr(t,e,r,n,o,i,a,s,u){if(Nrr.apply(this,arguments),H2){if(H2){var l=nJ;H2=!1,nJ=null}else throw Error(Be(198));oJ||(oJ=!0,Xhe=l)}}function TR(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,(e.flags&4098)!==0&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function $He(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function x3e(t){if(TR(t)!==t)throw Error(Be(188))}function Lrr(t){var e=t.alternate;if(!e){if(e=TR(t),e===null)throw Error(Be(188));return e!==t?null:t}for(var r=t,n=e;;){var o=r.return;if(o===null)break;var i=o.alternate;if(i===null){if(n=o.return,n!==null){r=n;continue}break}if(o.child===i.child){for(i=o.child;i;){if(i===r)return x3e(o),t;if(i===n)return x3e(o),e;i=i.sibling}throw Error(Be(188))}if(r.return!==n.return)r=o,n=i;else{for(var a=!1,s=o.child;s;){if(s===r){a=!0,r=o,n=i;break}if(s===n){a=!0,n=o,r=i;break}s=s.sibling}if(!a){for(s=i.child;s;){if(s===r){a=!0,r=i,n=o;break}if(s===n){a=!0,n=i,r=o;break}s=s.sibling}if(!a)throw Error(Be(189))}}if(r.alternate!==n)throw Error(Be(190))}if(r.tag!==3)throw Error(Be(188));return r.stateNode.current===r?t:e}function BHe(t){return t=Lrr(t),t!==null?qHe(t):null}function qHe(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=qHe(t);if(e!==null)return e;t=t.sibling}return null}var UHe=fm.unstable_scheduleCallback,C3e=fm.unstable_cancelCallback,Frr=fm.unstable_shouldYield,krr=fm.unstable_requestPaint,vs=fm.unstable_now,$rr=fm.unstable_getCurrentPriorityLevel,Lge=fm.unstable_ImmediatePriority,zHe=fm.unstable_UserBlockingPriority,iJ=fm.unstable_NormalPriority,Brr=fm.unstable_LowPriority,HHe=fm.unstable_IdlePriority,PJ=null,Ub=null;function qrr(t){if(Ub&&typeof Ub.onCommitFiberRoot=="function")try{Ub.onCommitFiberRoot(PJ,t,void 0,(t.current.flags&128)===128)}catch{}}var oy=Math.clz32?Math.clz32:Hrr,Urr=Math.log,zrr=Math.LN2;function Hrr(t){return t>>>=0,t===0?32:31-(Urr(t)/zrr|0)|0}var IG=64,MG=4194304;function q2(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function aJ(t,e){var r=t.pendingLanes;if(r===0)return 0;var n=0,o=t.suspendedLanes,i=t.pingedLanes,a=r&268435455;if(a!==0){var s=a&~o;s!==0?n=q2(s):(i&=a,i!==0&&(n=q2(i)))}else a=r&~o,a!==0?n=q2(a):i!==0&&(n=q2(i));if(n===0)return 0;if(e!==0&&e!==n&&(e&o)===0&&(o=n&-n,i=e&-e,o>=i||o===16&&(i&4194240)!==0))return e;if((n&4)!==0&&(n|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-oy(e),o=1<<r,n|=t[r],e&=~o;return n}function Vrr(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Wrr(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,o=t.expirationTimes,i=t.pendingLanes;0<i;){var a=31-oy(i),s=1<<a,u=o[a];u===-1?((s&r)===0||(s&n)!==0)&&(o[a]=Vrr(s,e)):u<=e&&(t.expiredLanes|=s),i&=~s}}function Qhe(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function VHe(){var t=IG;return IG<<=1,(IG&4194240)===0&&(IG=64),t}function _he(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function h4(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-oy(e),t[e]=r}function Krr(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var o=31-oy(r),i=1<<o;e[o]=0,n[o]=-1,t[o]=-1,r&=~i}}function Fge(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-oy(r),o=1<<n;o&e|t[n]&e&&(t[n]|=e),r&=~o}}var fi=0;function WHe(t){return t&=-t,1<t?4<t?(t&268435455)!==0?16:536870912:4:1}var KHe,kge,GHe,JHe,YHe,ege=!1,RG=[],jE=null,NE=null,DE=null,t4=new Map,r4=new Map,AE=[],Grr="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function O3e(t,e){switch(t){case"focusin":case"focusout":jE=null;break;case"dragenter":case"dragleave":NE=null;break;case"mouseover":case"mouseout":DE=null;break;case"pointerover":case"pointerout":t4.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":r4.delete(e.pointerId)}}function R2(t,e,r,n,o,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[o]},e!==null&&(e=y4(e),e!==null&&kge(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,o!==null&&e.indexOf(o)===-1&&e.push(o),t)}function Jrr(t,e,r,n,o){switch(e){case"focusin":return jE=R2(jE,t,e,r,n,o),!0;case"dragenter":return NE=R2(NE,t,e,r,n,o),!0;case"mouseover":return DE=R2(DE,t,e,r,n,o),!0;case"pointerover":var i=o.pointerId;return t4.set(i,R2(t4.get(i)||null,t,e,r,n,o)),!0;case"gotpointercapture":return i=o.pointerId,r4.set(i,R2(r4.get(i)||null,t,e,r,n,o)),!0}return!1}function ZHe(t){var e=yR(t.target);if(e!==null){var r=TR(e);if(r!==null){if(e=r.tag,e===13){if(e=$He(r),e!==null){t.blockedOn=e,YHe(t.priority,function(){GHe(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function WG(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=tge(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);Jhe=n,r.target.dispatchEvent(n),Jhe=null}else return e=y4(r),e!==null&&kge(e),t.blockedOn=r,!1;e.shift()}return!0}function P3e(t,e,r){WG(t)&&r.delete(e)}function Yrr(){ege=!1,jE!==null&&WG(jE)&&(jE=null),NE!==null&&WG(NE)&&(NE=null),DE!==null&&WG(DE)&&(DE=null),t4.forEach(P3e),r4.forEach(P3e)}function j2(t,e){t.blockedOn===e&&(t.blockedOn=null,ege||(ege=!0,fm.unstable_scheduleCallback(fm.unstable_NormalPriority,Yrr)))}function n4(t){function e(o){return j2(o,t)}if(0<RG.length){j2(RG[0],t);for(var r=1;r<RG.length;r++){var n=RG[r];n.blockedOn===t&&(n.blockedOn=null)}}for(jE!==null&&j2(jE,t),NE!==null&&j2(NE,t),DE!==null&&j2(DE,t),t4.forEach(e),r4.forEach(e),r=0;r<AE.length;r++)n=AE[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<AE.length&&(r=AE[0],r.blockedOn===null);)ZHe(r),r.blockedOn===null&&AE.shift()}var oF=OC.ReactCurrentBatchConfig,sJ=!0;function Zrr(t,e,r,n){var o=fi,i=oF.transition;oF.transition=null;try{fi=1,$ge(t,e,r,n)}finally{fi=o,oF.transition=i}}function Xrr(t,e,r,n){var o=fi,i=oF.transition;oF.transition=null;try{fi=4,$ge(t,e,r,n)}finally{fi=o,oF.transition=i}}function $ge(t,e,r,n){if(sJ){var o=tge(t,e,r,n);if(o===null)Phe(t,e,n,uJ,r),O3e(t,n);else if(Jrr(o,t,e,r,n))n.stopPropagation();else if(O3e(t,n),e&4&&-1<Grr.indexOf(t)){for(;o!==null;){var i=y4(o);if(i!==null&&KHe(i),i=tge(t,e,r,n),i===null&&Phe(t,e,n,uJ,r),i===o)break;o=i}o!==null&&n.stopPropagation()}else Phe(t,e,n,null,r)}}var uJ=null;function tge(t,e,r,n){if(uJ=null,t=Dge(n),t=yR(t),t!==null)if(e=TR(t),e===null)t=null;else if(r=e.tag,r===13){if(t=$He(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return uJ=t,null}function XHe(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch($rr()){case Lge:return 1;case zHe:return 4;case iJ:case Brr:return 16;case HHe:return 536870912;default:return 16}default:return 16}}var ME=null,Bge=null,KG=null;function QHe(){if(KG)return KG;var t,e=Bge,r=e.length,n,o="value"in ME?ME.value:ME.textContent,i=o.length;for(t=0;t<r&&e[t]===o[t];t++);var a=r-t;for(n=1;n<=a&&e[r-n]===o[i-n];n++);return KG=o.slice(t,1<n?1-n:void 0)}function GG(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function jG(){return!0}function E3e(){return!1}function pm(t){function e(r,n,o,i,a){this._reactName=r,this._targetInst=o,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null;for(var s in t)t.hasOwnProperty(s)&&(r=t[s],this[s]=r?r(i):i[s]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?jG:E3e,this.isPropagationStopped=E3e,this}return Ra(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=jG)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=jG)},persist:function(){},isPersistent:jG}),e}var mF={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},qge=pm(mF),g4=Ra({},mF,{view:0,detail:0}),Qrr=pm(g4),vhe,whe,N2,EJ=Ra({},g4,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Uge,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==N2&&(N2&&t.type==="mousemove"?(vhe=t.screenX-N2.screenX,whe=t.screenY-N2.screenY):whe=vhe=0,N2=t),vhe)},movementY:function(t){return"movementY"in t?t.movementY:whe}}),T3e=pm(EJ),enr=Ra({},EJ,{dataTransfer:0}),tnr=pm(enr),rnr=Ra({},g4,{relatedTarget:0}),She=pm(rnr),nnr=Ra({},mF,{animationName:0,elapsedTime:0,pseudoElement:0}),onr=pm(nnr),inr=Ra({},mF,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),anr=pm(inr),snr=Ra({},mF,{data:0}),A3e=pm(snr),unr={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},lnr={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},cnr={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function dnr(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=cnr[t])?!!e[t]:!1}function Uge(){return dnr}var fnr=Ra({},g4,{key:function(t){if(t.key){var e=unr[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=GG(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?lnr[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Uge,charCode:function(t){return t.type==="keypress"?GG(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?GG(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),pnr=pm(fnr),mnr=Ra({},EJ,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),I3e=pm(mnr),hnr=Ra({},g4,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Uge}),gnr=pm(hnr),ynr=Ra({},mF,{propertyName:0,elapsedTime:0,pseudoElement:0}),bnr=pm(ynr),_nr=Ra({},EJ,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),vnr=pm(_nr),wnr=[9,13,27,32],zge=wC&&"CompositionEvent"in window,V2=null;wC&&"documentMode"in document&&(V2=document.documentMode);var Snr=wC&&"TextEvent"in window&&!V2,eVe=wC&&(!zge||V2&&8<V2&&11>=V2),M3e=" ",R3e=!1;function tVe(t,e){switch(t){case"keyup":return wnr.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function rVe(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var VL=!1;function xnr(t,e){switch(t){case"compositionend":return rVe(e);case"keypress":return e.which!==32?null:(R3e=!0,M3e);case"textInput":return t=e.data,t===M3e&&R3e?null:t;default:return null}}function Cnr(t,e){if(VL)return t==="compositionend"||!zge&&tVe(t,e)?(t=QHe(),KG=Bge=ME=null,VL=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return eVe&&e.locale!=="ko"?null:e.data;default:return null}}var Onr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function j3e(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Onr[t.type]:e==="textarea"}function nVe(t,e,r,n){NHe(n),e=lJ(e,"onChange"),0<e.length&&(r=new qge("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var W2=null,o4=null;function Pnr(t){mVe(t,0)}function TJ(t){var e=GL(t);if(EHe(e))return t}function Enr(t,e){if(t==="change")return e}var oVe=!1;wC&&(wC?(DG="oninput"in document,DG||(xhe=document.createElement("div"),xhe.setAttribute("oninput","return;"),DG=typeof xhe.oninput=="function"),NG=DG):NG=!1,oVe=NG&&(!document.documentMode||9<document.documentMode));var NG,DG,xhe;function N3e(){W2&&(W2.detachEvent("onpropertychange",iVe),o4=W2=null)}function iVe(t){if(t.propertyName==="value"&&TJ(o4)){var e=[];nVe(e,o4,t,Dge(t)),kHe(Pnr,e)}}function Tnr(t,e,r){t==="focusin"?(N3e(),W2=e,o4=r,W2.attachEvent("onpropertychange",iVe)):t==="focusout"&&N3e()}function Anr(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return TJ(o4)}function Inr(t,e){if(t==="click")return TJ(e)}function Mnr(t,e){if(t==="input"||t==="change")return TJ(e)}function Rnr(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var ay=typeof Object.is=="function"?Object.is:Rnr;function i4(t,e){if(ay(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var o=r[n];if(!Fhe.call(e,o)||!ay(t[o],e[o]))return!1}return!0}function D3e(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function L3e(t,e){var r=D3e(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=D3e(r)}}function aVe(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?aVe(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function sVe(){for(var t=window,e=rJ();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=rJ(t.document)}return e}function Hge(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function jnr(t){var e=sVe(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&aVe(r.ownerDocument.documentElement,r)){if(n!==null&&Hge(r)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var o=r.textContent.length,i=Math.min(n.start,o);n=n.end===void 0?i:Math.min(n.end,o),!t.extend&&i>n&&(o=n,n=i,i=o),o=L3e(r,i);var a=L3e(r,n);o&&a&&(t.rangeCount!==1||t.anchorNode!==o.node||t.anchorOffset!==o.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(o.node,o.offset),t.removeAllRanges(),i>n?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Nnr=wC&&"documentMode"in document&&11>=document.documentMode,WL=null,rge=null,K2=null,nge=!1;function F3e(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;nge||WL==null||WL!==rJ(n)||(n=WL,"selectionStart"in n&&Hge(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),K2&&i4(K2,n)||(K2=n,n=lJ(rge,"onSelect"),0<n.length&&(e=new qge("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=WL)))}function LG(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var KL={animationend:LG("Animation","AnimationEnd"),animationiteration:LG("Animation","AnimationIteration"),animationstart:LG("Animation","AnimationStart"),transitionend:LG("Transition","TransitionEnd")},Che={},uVe={};wC&&(uVe=document.createElement("div").style,"AnimationEvent"in window||(delete KL.animationend.animation,delete KL.animationiteration.animation,delete KL.animationstart.animation),"TransitionEvent"in window||delete KL.transitionend.transition);function AJ(t){if(Che[t])return Che[t];if(!KL[t])return t;var e=KL[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in uVe)return Che[t]=e[r];return t}var lVe=AJ("animationend"),cVe=AJ("animationiteration"),dVe=AJ("animationstart"),fVe=AJ("transitionend"),pVe=new Map,k3e="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function zE(t,e){pVe.set(t,e),ER(e,[t])}for(FG=0;FG<k3e.length;FG++)kG=k3e[FG],$3e=kG.toLowerCase(),B3e=kG[0].toUpperCase()+kG.slice(1),zE($3e,"on"+B3e);var kG,$3e,B3e,FG;zE(lVe,"onAnimationEnd");zE(cVe,"onAnimationIteration");zE(dVe,"onAnimationStart");zE("dblclick","onDoubleClick");zE("focusin","onFocus");zE("focusout","onBlur");zE(fVe,"onTransitionEnd");sF("onMouseEnter",["mouseout","mouseover"]);sF("onMouseLeave",["mouseout","mouseover"]);sF("onPointerEnter",["pointerout","pointerover"]);sF("onPointerLeave",["pointerout","pointerover"]);ER("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ER("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ER("onBeforeInput",["compositionend","keypress","textInput","paste"]);ER("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ER("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ER("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var U2="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Dnr=new Set("cancel close invalid load scroll toggle".split(" ").concat(U2));function q3e(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,Drr(n,e,void 0,t),t.currentTarget=null}function mVe(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],o=n.event;n=n.listeners;e:{var i=void 0;if(e)for(var a=n.length-1;0<=a;a--){var s=n[a],u=s.instance,l=s.currentTarget;if(s=s.listener,u!==i&&o.isPropagationStopped())break e;q3e(o,s,l),i=u}else for(a=0;a<n.length;a++){if(s=n[a],u=s.instance,l=s.currentTarget,s=s.listener,u!==i&&o.isPropagationStopped())break e;q3e(o,s,l),i=u}}}if(oJ)throw t=Xhe,oJ=!1,Xhe=null,t}function Qi(t,e){var r=e[uge];r===void 0&&(r=e[uge]=new Set);var n=t+"__bubble";r.has(n)||(hVe(e,t,2,!1),r.add(n))}function Ohe(t,e,r){var n=0;e&&(n|=4),hVe(r,t,n,e)}var $G="_reactListening"+Math.random().toString(36).slice(2);function a4(t){if(!t[$G]){t[$G]=!0,SHe.forEach(function(r){r!=="selectionchange"&&(Dnr.has(r)||Ohe(r,!1,t),Ohe(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[$G]||(e[$G]=!0,Ohe("selectionchange",!1,e))}}function hVe(t,e,r,n){switch(XHe(e)){case 1:var o=Zrr;break;case 4:o=Xrr;break;default:o=$ge}r=o.bind(null,e,r,t),o=void 0,!Zhe||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(o=!0),n?o!==void 0?t.addEventListener(e,r,{capture:!0,passive:o}):t.addEventListener(e,r,!0):o!==void 0?t.addEventListener(e,r,{passive:o}):t.addEventListener(e,r,!1)}function Phe(t,e,r,n,o){var i=n;if((e&1)===0&&(e&2)===0&&n!==null)e:for(;;){if(n===null)return;var a=n.tag;if(a===3||a===4){var s=n.stateNode.containerInfo;if(s===o||s.nodeType===8&&s.parentNode===o)break;if(a===4)for(a=n.return;a!==null;){var u=a.tag;if((u===3||u===4)&&(u=a.stateNode.containerInfo,u===o||u.nodeType===8&&u.parentNode===o))return;a=a.return}for(;s!==null;){if(a=yR(s),a===null)return;if(u=a.tag,u===5||u===6){n=i=a;continue e}s=s.parentNode}}n=n.return}kHe(function(){var l=i,c=Dge(r),d=[];e:{var f=pVe.get(t);if(f!==void 0){var p=qge,m=t;switch(t){case"keypress":if(GG(r)===0)break e;case"keydown":case"keyup":p=pnr;break;case"focusin":m="focus",p=She;break;case"focusout":m="blur",p=She;break;case"beforeblur":case"afterblur":p=She;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=T3e;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=tnr;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=gnr;break;case lVe:case cVe:case dVe:p=onr;break;case fVe:p=bnr;break;case"scroll":p=Qrr;break;case"wheel":p=vnr;break;case"copy":case"cut":case"paste":p=anr;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=I3e}var h=(e&4)!==0,b=!h&&t==="scroll",g=h?f!==null?f+"Capture":null:f;h=[];for(var y=l,w;y!==null;){w=y;var S=w.stateNode;if(w.tag===5&&S!==null&&(w=S,g!==null&&(S=e4(y,g),S!=null&&h.push(s4(y,S,w)))),b)break;y=y.return}0<h.length&&(f=new p(f,m,null,r,c),d.push({event:f,listeners:h}))}}if((e&7)===0){e:{if(f=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",f&&r!==Jhe&&(m=r.relatedTarget||r.fromElement)&&(yR(m)||m[SC]))break e;if((p||f)&&(f=c.window===c?c:(f=c.ownerDocument)?f.defaultView||f.parentWindow:window,p?(m=r.relatedTarget||r.toElement,p=l,m=m?yR(m):null,m!==null&&(b=TR(m),m!==b||m.tag!==5&&m.tag!==6)&&(m=null)):(p=null,m=l),p!==m)){if(h=T3e,S="onMouseLeave",g="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(h=I3e,S="onPointerLeave",g="onPointerEnter",y="pointer"),b=p==null?f:GL(p),w=m==null?f:GL(m),f=new h(S,y+"leave",p,r,c),f.target=b,f.relatedTarget=w,S=null,yR(c)===l&&(h=new h(g,y+"enter",m,r,c),h.target=w,h.relatedTarget=b,S=h),b=S,p&&m)t:{for(h=p,g=m,y=0,w=h;w;w=UL(w))y++;for(w=0,S=g;S;S=UL(S))w++;for(;0<y-w;)h=UL(h),y--;for(;0<w-y;)g=UL(g),w--;for(;y--;){if(h===g||g!==null&&h===g.alternate)break t;h=UL(h),g=UL(g)}h=null}else h=null;p!==null&&U3e(d,f,p,h,!1),m!==null&&b!==null&&U3e(d,b,m,h,!0)}}e:{if(f=l?GL(l):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var C=Enr;else if(j3e(f))if(oVe)C=Mnr;else{C=Anr;var P=Tnr}else(p=f.nodeName)&&p.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(C=Inr);if(C&&(C=C(t,l))){nVe(d,C,r,c);break e}P&&P(t,f,l),t==="focusout"&&(P=f._wrapperState)&&P.controlled&&f.type==="number"&&Hhe(f,"number",f.value)}switch(P=l?GL(l):window,t){case"focusin":(j3e(P)||P.contentEditable==="true")&&(WL=P,rge=l,K2=null);break;case"focusout":K2=rge=WL=null;break;case"mousedown":nge=!0;break;case"contextmenu":case"mouseup":case"dragend":nge=!1,F3e(d,r,c);break;case"selectionchange":if(Nnr)break;case"keydown":case"keyup":F3e(d,r,c)}var E;if(zge)e:{switch(t){case"compositionstart":var A="onCompositionStart";break e;case"compositionend":A="onCompositionEnd";break e;case"compositionupdate":A="onCompositionUpdate";break e}A=void 0}else VL?tVe(t,r)&&(A="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(A="onCompositionStart");A&&(eVe&&r.locale!=="ko"&&(VL||A!=="onCompositionStart"?A==="onCompositionEnd"&&VL&&(E=QHe()):(ME=c,Bge="value"in ME?ME.value:ME.textContent,VL=!0)),P=lJ(l,A),0<P.length&&(A=new A3e(A,t,null,r,c),d.push({event:A,listeners:P}),E?A.data=E:(E=rVe(r),E!==null&&(A.data=E)))),(E=Snr?xnr(t,r):Cnr(t,r))&&(l=lJ(l,"onBeforeInput"),0<l.length&&(c=new A3e("onBeforeInput","beforeinput",null,r,c),d.push({event:c,listeners:l}),c.data=E))}mVe(d,e)})}function s4(t,e,r){return{instance:t,listener:e,currentTarget:r}}function lJ(t,e){for(var r=e+"Capture",n=[];t!==null;){var o=t,i=o.stateNode;o.tag===5&&i!==null&&(o=i,i=e4(t,r),i!=null&&n.unshift(s4(t,i,o)),i=e4(t,e),i!=null&&n.push(s4(t,i,o))),t=t.return}return n}function UL(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function U3e(t,e,r,n,o){for(var i=e._reactName,a=[];r!==null&&r!==n;){var s=r,u=s.alternate,l=s.stateNode;if(u!==null&&u===n)break;s.tag===5&&l!==null&&(s=l,o?(u=e4(r,i),u!=null&&a.unshift(s4(r,u,s))):o||(u=e4(r,i),u!=null&&a.push(s4(r,u,s)))),r=r.return}a.length!==0&&t.push({event:e,listeners:a})}var Lnr=/\r\n?/g,Fnr=/\u0000|\uFFFD/g;function z3e(t){return(typeof t=="string"?t:""+t).replace(Lnr,`
`).replace(Fnr,"")}function BG(t,e,r){if(e=z3e(e),z3e(t)!==e&&r)throw Error(Be(425))}function cJ(){}var oge=null,ige=null;function age(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var sge=typeof setTimeout=="function"?setTimeout:void 0,knr=typeof clearTimeout=="function"?clearTimeout:void 0,H3e=typeof Promise=="function"?Promise:void 0,$nr=typeof queueMicrotask=="function"?queueMicrotask:typeof H3e<"u"?function(t){return H3e.resolve(null).then(t).catch(Bnr)}:sge;function Bnr(t){setTimeout(function(){throw t})}function Ehe(t,e){var r=e,n=0;do{var o=r.nextSibling;if(t.removeChild(r),o&&o.nodeType===8)if(r=o.data,r==="/$"){if(n===0){t.removeChild(o),n4(e);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=o}while(r);n4(e)}function LE(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function V3e(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var hF=Math.random().toString(36).slice(2),qb="__reactFiber$"+hF,u4="__reactProps$"+hF,SC="__reactContainer$"+hF,uge="__reactEvents$"+hF,qnr="__reactListeners$"+hF,Unr="__reactHandles$"+hF;function yR(t){var e=t[qb];if(e)return e;for(var r=t.parentNode;r;){if(e=r[SC]||r[qb]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=V3e(t);t!==null;){if(r=t[qb])return r;t=V3e(t)}return e}t=r,r=t.parentNode}return null}function y4(t){return t=t[qb]||t[SC],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function GL(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Be(33))}function IJ(t){return t[u4]||null}var lge=[],JL=-1;function HE(t){return{current:t}}function ea(t){0>JL||(t.current=lge[JL],lge[JL]=null,JL--)}function Fi(t,e){JL++,lge[JL]=t.current,t.current=e}var UE={},Td=HE(UE),yp=HE(!1),SR=UE;function uF(t,e){var r=t.type.contextTypes;if(!r)return UE;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var o={},i;for(i in r)o[i]=e[i];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=o),o}function bp(t){return t=t.childContextTypes,t!=null}function dJ(){ea(yp),ea(Td)}function W3e(t,e,r){if(Td.current!==UE)throw Error(Be(168));Fi(Td,e),Fi(yp,r)}function gVe(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var o in n)if(!(o in e))throw Error(Be(108,Trr(t)||"Unknown",o));return Ra({},r,n)}function fJ(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||UE,SR=Td.current,Fi(Td,t),Fi(yp,yp.current),!0}function K3e(t,e,r){var n=t.stateNode;if(!n)throw Error(Be(169));r?(t=gVe(t,e,SR),n.__reactInternalMemoizedMergedChildContext=t,ea(yp),ea(Td),Fi(Td,t)):ea(yp),Fi(yp,r)}var yC=null,MJ=!1,The=!1;function yVe(t){yC===null?yC=[t]:yC.push(t)}function znr(t){MJ=!0,yVe(t)}function VE(){if(!The&&yC!==null){The=!0;var t=0,e=fi;try{var r=yC;for(fi=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}yC=null,MJ=!1}catch(o){throw yC!==null&&(yC=yC.slice(t+1)),UHe(Lge,VE),o}finally{fi=e,The=!1}}return null}var YL=[],ZL=0,pJ=null,mJ=0,Ch=[],Oh=0,xR=null,bC=1,_C="";function hR(t,e){YL[ZL++]=mJ,YL[ZL++]=pJ,pJ=t,mJ=e}function bVe(t,e,r){Ch[Oh++]=bC,Ch[Oh++]=_C,Ch[Oh++]=xR,xR=t;var n=bC;t=_C;var o=32-oy(n)-1;n&=~(1<<o),r+=1;var i=32-oy(e)+o;if(30<i){var a=o-o%5;i=(n&(1<<a)-1).toString(32),n>>=a,o-=a,bC=1<<32-oy(e)+o|r<<o|n,_C=i+t}else bC=1<<i|r<<o|n,_C=t}function Vge(t){t.return!==null&&(hR(t,1),bVe(t,1,0))}function Wge(t){for(;t===pJ;)pJ=YL[--ZL],YL[ZL]=null,mJ=YL[--ZL],YL[ZL]=null;for(;t===xR;)xR=Ch[--Oh],Ch[Oh]=null,_C=Ch[--Oh],Ch[Oh]=null,bC=Ch[--Oh],Ch[Oh]=null}var dm=null,cm=null,ya=!1,ny=null;function _Ve(t,e){var r=Ph(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function G3e(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,dm=t,cm=LE(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,dm=t,cm=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=xR!==null?{id:bC,overflow:_C}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=Ph(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,dm=t,cm=null,!0):!1;default:return!1}}function cge(t){return(t.mode&1)!==0&&(t.flags&128)===0}function dge(t){if(ya){var e=cm;if(e){var r=e;if(!G3e(t,e)){if(cge(t))throw Error(Be(418));e=LE(r.nextSibling);var n=dm;e&&G3e(t,e)?_Ve(n,r):(t.flags=t.flags&-4097|2,ya=!1,dm=t)}}else{if(cge(t))throw Error(Be(418));t.flags=t.flags&-4097|2,ya=!1,dm=t}}}function J3e(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;dm=t}function qG(t){if(t!==dm)return!1;if(!ya)return J3e(t),ya=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!age(t.type,t.memoizedProps)),e&&(e=cm)){if(cge(t))throw vVe(),Error(Be(418));for(;e;)_Ve(t,e),e=LE(e.nextSibling)}if(J3e(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Be(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){cm=LE(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}cm=null}}else cm=dm?LE(t.stateNode.nextSibling):null;return!0}function vVe(){for(var t=cm;t;)t=LE(t.nextSibling)}function lF(){cm=dm=null,ya=!1}function Kge(t){ny===null?ny=[t]:ny.push(t)}var Hnr=OC.ReactCurrentBatchConfig;function ty(t,e){if(t&&t.defaultProps){e=Ra({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}var hJ=HE(null),gJ=null,XL=null,Gge=null;function Jge(){Gge=XL=gJ=null}function Yge(t){var e=hJ.current;ea(hJ),t._currentValue=e}function fge(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function iF(t,e){gJ=t,Gge=XL=null,t=t.dependencies,t!==null&&t.firstContext!==null&&((t.lanes&e)!==0&&(gp=!0),t.firstContext=null)}function Th(t){var e=t._currentValue;if(Gge!==t)if(t={context:t,memoizedValue:e,next:null},XL===null){if(gJ===null)throw Error(Be(308));XL=t,gJ.dependencies={lanes:0,firstContext:t}}else XL=XL.next=t;return e}var bR=null;function Zge(t){bR===null?bR=[t]:bR.push(t)}function wVe(t,e,r,n){var o=e.interleaved;return o===null?(r.next=r,Zge(e)):(r.next=o.next,o.next=r),e.interleaved=r,xC(t,n)}function xC(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var TE=!1;function Xge(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function SVe(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function vC(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function FE(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,(co&2)!==0){var o=n.pending;return o===null?e.next=e:(e.next=o.next,o.next=e),n.pending=e,xC(t,r)}return o=n.interleaved,o===null?(e.next=e,Zge(n)):(e.next=o.next,o.next=e),n.interleaved=e,xC(t,r)}function JG(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,Fge(t,r)}}function Y3e(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var o=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var a={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?o=i=a:i=i.next=a,r=r.next}while(r!==null);i===null?o=i=e:i=i.next=e}else o=i=e;r={baseState:n.baseState,firstBaseUpdate:o,lastBaseUpdate:i,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function yJ(t,e,r,n){var o=t.updateQueue;TE=!1;var i=o.firstBaseUpdate,a=o.lastBaseUpdate,s=o.shared.pending;if(s!==null){o.shared.pending=null;var u=s,l=u.next;u.next=null,a===null?i=l:a.next=l,a=u;var c=t.alternate;c!==null&&(c=c.updateQueue,s=c.lastBaseUpdate,s!==a&&(s===null?c.firstBaseUpdate=l:s.next=l,c.lastBaseUpdate=u))}if(i!==null){var d=o.baseState;a=0,c=l=u=null,s=i;do{var f=s.lane,p=s.eventTime;if((n&f)===f){c!==null&&(c=c.next={eventTime:p,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var m=t,h=s;switch(f=e,p=r,h.tag){case 1:if(m=h.payload,typeof m=="function"){d=m.call(p,d,f);break e}d=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=h.payload,f=typeof m=="function"?m.call(p,d,f):m,f==null)break e;d=Ra({},d,f);break e;case 2:TE=!0}}s.callback!==null&&s.lane!==0&&(t.flags|=64,f=o.effects,f===null?o.effects=[s]:f.push(s))}else p={eventTime:p,lane:f,tag:s.tag,payload:s.payload,callback:s.callback,next:null},c===null?(l=c=p,u=d):c=c.next=p,a|=f;if(s=s.next,s===null){if(s=o.shared.pending,s===null)break;f=s,s=f.next,f.next=null,o.lastBaseUpdate=f,o.shared.pending=null}}while(!0);if(c===null&&(u=d),o.baseState=u,o.firstBaseUpdate=l,o.lastBaseUpdate=c,e=o.shared.interleaved,e!==null){o=e;do a|=o.lane,o=o.next;while(o!==e)}else i===null&&(o.shared.lanes=0);OR|=a,t.lanes=a,t.memoizedState=d}}function Z3e(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],o=n.callback;if(o!==null){if(n.callback=null,n=r,typeof o!="function")throw Error(Be(191,o));o.call(n)}}}var xVe=new wHe.Component().refs;function pge(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:Ra({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var RJ={isMounted:function(t){return(t=t._reactInternals)?TR(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=Of(),o=$E(t),i=vC(n,o);i.payload=e,r!=null&&(i.callback=r),e=FE(t,i,o),e!==null&&(iy(e,t,o,n),JG(e,t,o))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=Of(),o=$E(t),i=vC(n,o);i.tag=1,i.payload=e,r!=null&&(i.callback=r),e=FE(t,i,o),e!==null&&(iy(e,t,o,n),JG(e,t,o))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=Of(),n=$E(t),o=vC(r,n);o.tag=2,e!=null&&(o.callback=e),e=FE(t,o,n),e!==null&&(iy(e,t,n,r),JG(e,t,n))}};function X3e(t,e,r,n,o,i,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,i,a):e.prototype&&e.prototype.isPureReactComponent?!i4(r,n)||!i4(o,i):!0}function CVe(t,e,r){var n=!1,o=UE,i=e.contextType;return typeof i=="object"&&i!==null?i=Th(i):(o=bp(e)?SR:Td.current,n=e.contextTypes,i=(n=n!=null)?uF(t,o):UE),e=new e(r,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=RJ,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=o,t.__reactInternalMemoizedMaskedChildContext=i),e}function Q3e(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&RJ.enqueueReplaceState(e,e.state,null)}function mge(t,e,r,n){var o=t.stateNode;o.props=r,o.state=t.memoizedState,o.refs=xVe,Xge(t);var i=e.contextType;typeof i=="object"&&i!==null?o.context=Th(i):(i=bp(e)?SR:Td.current,o.context=uF(t,i)),o.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(pge(t,e,i,r),o.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(e=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),e!==o.state&&RJ.enqueueReplaceState(o,o.state,null),yJ(t,r,o,n),o.state=t.memoizedState),typeof o.componentDidMount=="function"&&(t.flags|=4194308)}function D2(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(Be(309));var n=r.stateNode}if(!n)throw Error(Be(147,t));var o=n,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(a){var s=o.refs;s===xVe&&(s=o.refs={}),a===null?delete s[i]:s[i]=a},e._stringRef=i,e)}if(typeof t!="string")throw Error(Be(284));if(!r._owner)throw Error(Be(290,t))}return t}function UG(t,e){throw t=Object.prototype.toString.call(e),Error(Be(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function eHe(t){var e=t._init;return e(t._payload)}function OVe(t){function e(g,y){if(t){var w=g.deletions;w===null?(g.deletions=[y],g.flags|=16):w.push(y)}}function r(g,y){if(!t)return null;for(;y!==null;)e(g,y),y=y.sibling;return null}function n(g,y){for(g=new Map;y!==null;)y.key!==null?g.set(y.key,y):g.set(y.index,y),y=y.sibling;return g}function o(g,y){return g=BE(g,y),g.index=0,g.sibling=null,g}function i(g,y,w){return g.index=w,t?(w=g.alternate,w!==null?(w=w.index,w<y?(g.flags|=2,y):w):(g.flags|=2,y)):(g.flags|=1048576,y)}function a(g){return t&&g.alternate===null&&(g.flags|=2),g}function s(g,y,w,S){return y===null||y.tag!==6?(y=Dhe(w,g.mode,S),y.return=g,y):(y=o(y,w),y.return=g,y)}function u(g,y,w,S){var C=w.type;return C===HL?c(g,y,w.props.children,S,w.key):y!==null&&(y.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===EE&&eHe(C)===y.type)?(S=o(y,w.props),S.ref=D2(g,y,w),S.return=g,S):(S=tJ(w.type,w.key,w.props,null,g.mode,S),S.ref=D2(g,y,w),S.return=g,S)}function l(g,y,w,S){return y===null||y.tag!==4||y.stateNode.containerInfo!==w.containerInfo||y.stateNode.implementation!==w.implementation?(y=Lhe(w,g.mode,S),y.return=g,y):(y=o(y,w.children||[]),y.return=g,y)}function c(g,y,w,S,C){return y===null||y.tag!==7?(y=wR(w,g.mode,S,C),y.return=g,y):(y=o(y,w),y.return=g,y)}function d(g,y,w){if(typeof y=="string"&&y!==""||typeof y=="number")return y=Dhe(""+y,g.mode,w),y.return=g,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case EG:return w=tJ(y.type,y.key,y.props,null,g.mode,w),w.ref=D2(g,null,y),w.return=g,w;case zL:return y=Lhe(y,g.mode,w),y.return=g,y;case EE:var S=y._init;return d(g,S(y._payload),w)}if(B2(y)||M2(y))return y=wR(y,g.mode,w,null),y.return=g,y;UG(g,y)}return null}function f(g,y,w,S){var C=y!==null?y.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return C!==null?null:s(g,y,""+w,S);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case EG:return w.key===C?u(g,y,w,S):null;case zL:return w.key===C?l(g,y,w,S):null;case EE:return C=w._init,f(g,y,C(w._payload),S)}if(B2(w)||M2(w))return C!==null?null:c(g,y,w,S,null);UG(g,w)}return null}function p(g,y,w,S,C){if(typeof S=="string"&&S!==""||typeof S=="number")return g=g.get(w)||null,s(y,g,""+S,C);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case EG:return g=g.get(S.key===null?w:S.key)||null,u(y,g,S,C);case zL:return g=g.get(S.key===null?w:S.key)||null,l(y,g,S,C);case EE:var P=S._init;return p(g,y,w,P(S._payload),C)}if(B2(S)||M2(S))return g=g.get(w)||null,c(y,g,S,C,null);UG(y,S)}return null}function m(g,y,w,S){for(var C=null,P=null,E=y,A=y=0,I=null;E!==null&&A<w.length;A++){E.index>A?(I=E,E=null):I=E.sibling;var R=f(g,E,w[A],S);if(R===null){E===null&&(E=I);break}t&&E&&R.alternate===null&&e(g,E),y=i(R,y,A),P===null?C=R:P.sibling=R,P=R,E=I}if(A===w.length)return r(g,E),ya&&hR(g,A),C;if(E===null){for(;A<w.length;A++)E=d(g,w[A],S),E!==null&&(y=i(E,y,A),P===null?C=E:P.sibling=E,P=E);return ya&&hR(g,A),C}for(E=n(g,E);A<w.length;A++)I=p(E,g,A,w[A],S),I!==null&&(t&&I.alternate!==null&&E.delete(I.key===null?A:I.key),y=i(I,y,A),P===null?C=I:P.sibling=I,P=I);return t&&E.forEach(function(j){return e(g,j)}),ya&&hR(g,A),C}function h(g,y,w,S){var C=M2(w);if(typeof C!="function")throw Error(Be(150));if(w=C.call(w),w==null)throw Error(Be(151));for(var P=C=null,E=y,A=y=0,I=null,R=w.next();E!==null&&!R.done;A++,R=w.next()){E.index>A?(I=E,E=null):I=E.sibling;var j=f(g,E,R.value,S);if(j===null){E===null&&(E=I);break}t&&E&&j.alternate===null&&e(g,E),y=i(j,y,A),P===null?C=j:P.sibling=j,P=j,E=I}if(R.done)return r(g,E),ya&&hR(g,A),C;if(E===null){for(;!R.done;A++,R=w.next())R=d(g,R.value,S),R!==null&&(y=i(R,y,A),P===null?C=R:P.sibling=R,P=R);return ya&&hR(g,A),C}for(E=n(g,E);!R.done;A++,R=w.next())R=p(E,g,A,R.value,S),R!==null&&(t&&R.alternate!==null&&E.delete(R.key===null?A:R.key),y=i(R,y,A),P===null?C=R:P.sibling=R,P=R);return t&&E.forEach(function(N){return e(g,N)}),ya&&hR(g,A),C}function b(g,y,w,S){if(typeof w=="object"&&w!==null&&w.type===HL&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case EG:e:{for(var C=w.key,P=y;P!==null;){if(P.key===C){if(C=w.type,C===HL){if(P.tag===7){r(g,P.sibling),y=o(P,w.props.children),y.return=g,g=y;break e}}else if(P.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===EE&&eHe(C)===P.type){r(g,P.sibling),y=o(P,w.props),y.ref=D2(g,P,w),y.return=g,g=y;break e}r(g,P);break}else e(g,P);P=P.sibling}w.type===HL?(y=wR(w.props.children,g.mode,S,w.key),y.return=g,g=y):(S=tJ(w.type,w.key,w.props,null,g.mode,S),S.ref=D2(g,y,w),S.return=g,g=S)}return a(g);case zL:e:{for(P=w.key;y!==null;){if(y.key===P)if(y.tag===4&&y.stateNode.containerInfo===w.containerInfo&&y.stateNode.implementation===w.implementation){r(g,y.sibling),y=o(y,w.children||[]),y.return=g,g=y;break e}else{r(g,y);break}else e(g,y);y=y.sibling}y=Lhe(w,g.mode,S),y.return=g,g=y}return a(g);case EE:return P=w._init,b(g,y,P(w._payload),S)}if(B2(w))return m(g,y,w,S);if(M2(w))return h(g,y,w,S);UG(g,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,y!==null&&y.tag===6?(r(g,y.sibling),y=o(y,w),y.return=g,g=y):(r(g,y),y=Dhe(w,g.mode,S),y.return=g,g=y),a(g)):r(g,y)}return b}var cF=OVe(!0),PVe=OVe(!1),b4={},zb=HE(b4),l4=HE(b4),c4=HE(b4);function _R(t){if(t===b4)throw Error(Be(174));return t}function Qge(t,e){switch(Fi(c4,e),Fi(l4,t),Fi(zb,b4),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Whe(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Whe(e,t)}ea(zb),Fi(zb,e)}function dF(){ea(zb),ea(l4),ea(c4)}function EVe(t){_R(c4.current);var e=_R(zb.current),r=Whe(e,t.type);e!==r&&(Fi(l4,t),Fi(zb,r))}function eye(t){l4.current===t&&(ea(zb),ea(l4))}var Ia=HE(0);function bJ(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if((e.flags&128)!==0)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Ahe=[];function tye(){for(var t=0;t<Ahe.length;t++)Ahe[t]._workInProgressVersionPrimary=null;Ahe.length=0}var YG=OC.ReactCurrentDispatcher,Ihe=OC.ReactCurrentBatchConfig,CR=0,Ma=null,ml=null,Ll=null,_J=!1,G2=!1,d4=0,Vnr=0;function Od(){throw Error(Be(321))}function rye(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!ay(t[r],e[r]))return!1;return!0}function nye(t,e,r,n,o,i){if(CR=i,Ma=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,YG.current=t===null||t.memoizedState===null?Jnr:Ynr,t=r(n,o),G2){i=0;do{if(G2=!1,d4=0,25<=i)throw Error(Be(301));i+=1,Ll=ml=null,e.updateQueue=null,YG.current=Znr,t=r(n,o)}while(G2)}if(YG.current=vJ,e=ml!==null&&ml.next!==null,CR=0,Ll=ml=Ma=null,_J=!1,e)throw Error(Be(300));return t}function oye(){var t=d4!==0;return d4=0,t}function Bb(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ll===null?Ma.memoizedState=Ll=t:Ll=Ll.next=t,Ll}function Ah(){if(ml===null){var t=Ma.alternate;t=t!==null?t.memoizedState:null}else t=ml.next;var e=Ll===null?Ma.memoizedState:Ll.next;if(e!==null)Ll=e,ml=t;else{if(t===null)throw Error(Be(310));ml=t,t={memoizedState:ml.memoizedState,baseState:ml.baseState,baseQueue:ml.baseQueue,queue:ml.queue,next:null},Ll===null?Ma.memoizedState=Ll=t:Ll=Ll.next=t}return Ll}function f4(t,e){return typeof e=="function"?e(t):e}function Mhe(t){var e=Ah(),r=e.queue;if(r===null)throw Error(Be(311));r.lastRenderedReducer=t;var n=ml,o=n.baseQueue,i=r.pending;if(i!==null){if(o!==null){var a=o.next;o.next=i.next,i.next=a}n.baseQueue=o=i,r.pending=null}if(o!==null){i=o.next,n=n.baseState;var s=a=null,u=null,l=i;do{var c=l.lane;if((CR&c)===c)u!==null&&(u=u.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),n=l.hasEagerState?l.eagerState:t(n,l.action);else{var d={lane:c,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};u===null?(s=u=d,a=n):u=u.next=d,Ma.lanes|=c,OR|=c}l=l.next}while(l!==null&&l!==i);u===null?a=n:u.next=s,ay(n,e.memoizedState)||(gp=!0),e.memoizedState=n,e.baseState=a,e.baseQueue=u,r.lastRenderedState=n}if(t=r.interleaved,t!==null){o=t;do i=o.lane,Ma.lanes|=i,OR|=i,o=o.next;while(o!==t)}else o===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function Rhe(t){var e=Ah(),r=e.queue;if(r===null)throw Error(Be(311));r.lastRenderedReducer=t;var n=r.dispatch,o=r.pending,i=e.memoizedState;if(o!==null){r.pending=null;var a=o=o.next;do i=t(i,a.action),a=a.next;while(a!==o);ay(i,e.memoizedState)||(gp=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),r.lastRenderedState=i}return[i,n]}function TVe(){}function AVe(t,e){var r=Ma,n=Ah(),o=e(),i=!ay(n.memoizedState,o);if(i&&(n.memoizedState=o,gp=!0),n=n.queue,iye(RVe.bind(null,r,n,t),[t]),n.getSnapshot!==e||i||Ll!==null&&Ll.memoizedState.tag&1){if(r.flags|=2048,p4(9,MVe.bind(null,r,n,o,e),void 0,null),Fl===null)throw Error(Be(349));(CR&30)!==0||IVe(r,e,o)}return o}function IVe(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=Ma.updateQueue,e===null?(e={lastEffect:null,stores:null},Ma.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function MVe(t,e,r,n){e.value=r,e.getSnapshot=n,jVe(e)&&NVe(t)}function RVe(t,e,r){return r(function(){jVe(e)&&NVe(t)})}function jVe(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!ay(t,r)}catch{return!0}}function NVe(t){var e=xC(t,1);e!==null&&iy(e,t,1,-1)}function tHe(t){var e=Bb();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:f4,lastRenderedState:t},e.queue=t,t=t.dispatch=Gnr.bind(null,Ma,t),[e.memoizedState,t]}function p4(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=Ma.updateQueue,e===null?(e={lastEffect:null,stores:null},Ma.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function DVe(){return Ah().memoizedState}function ZG(t,e,r,n){var o=Bb();Ma.flags|=t,o.memoizedState=p4(1|e,r,void 0,n===void 0?null:n)}function jJ(t,e,r,n){var o=Ah();n=n===void 0?null:n;var i=void 0;if(ml!==null){var a=ml.memoizedState;if(i=a.destroy,n!==null&&rye(n,a.deps)){o.memoizedState=p4(e,r,i,n);return}}Ma.flags|=t,o.memoizedState=p4(1|e,r,i,n)}function rHe(t,e){return ZG(8390656,8,t,e)}function iye(t,e){return jJ(2048,8,t,e)}function LVe(t,e){return jJ(4,2,t,e)}function FVe(t,e){return jJ(4,4,t,e)}function kVe(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function $Ve(t,e,r){return r=r!=null?r.concat([t]):null,jJ(4,4,kVe.bind(null,e,t),r)}function aye(){}function BVe(t,e){var r=Ah();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&rye(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function qVe(t,e){var r=Ah();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&rye(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function UVe(t,e,r){return(CR&21)===0?(t.baseState&&(t.baseState=!1,gp=!0),t.memoizedState=r):(ay(r,e)||(r=VHe(),Ma.lanes|=r,OR|=r,t.baseState=!0),e)}function Wnr(t,e){var r=fi;fi=r!==0&&4>r?r:4,t(!0);var n=Ihe.transition;Ihe.transition={};try{t(!1),e()}finally{fi=r,Ihe.transition=n}}function zVe(){return Ah().memoizedState}function Knr(t,e,r){var n=$E(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},HVe(t))VVe(e,r);else if(r=wVe(t,e,r,n),r!==null){var o=Of();iy(r,t,n,o),WVe(r,e,n)}}function Gnr(t,e,r){var n=$E(t),o={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(HVe(t))VVe(e,o);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var a=e.lastRenderedState,s=i(a,r);if(o.hasEagerState=!0,o.eagerState=s,ay(s,a)){var u=e.interleaved;u===null?(o.next=o,Zge(e)):(o.next=u.next,u.next=o),e.interleaved=o;return}}catch{}finally{}r=wVe(t,e,o,n),r!==null&&(o=Of(),iy(r,t,n,o),WVe(r,e,n))}}function HVe(t){var e=t.alternate;return t===Ma||e!==null&&e===Ma}function VVe(t,e){G2=_J=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function WVe(t,e,r){if((r&4194240)!==0){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,Fge(t,r)}}var vJ={readContext:Th,useCallback:Od,useContext:Od,useEffect:Od,useImperativeHandle:Od,useInsertionEffect:Od,useLayoutEffect:Od,useMemo:Od,useReducer:Od,useRef:Od,useState:Od,useDebugValue:Od,useDeferredValue:Od,useTransition:Od,useMutableSource:Od,useSyncExternalStore:Od,useId:Od,unstable_isNewReconciler:!1},Jnr={readContext:Th,useCallback:function(t,e){return Bb().memoizedState=[t,e===void 0?null:e],t},useContext:Th,useEffect:rHe,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,ZG(4194308,4,kVe.bind(null,e,t),r)},useLayoutEffect:function(t,e){return ZG(4194308,4,t,e)},useInsertionEffect:function(t,e){return ZG(4,2,t,e)},useMemo:function(t,e){var r=Bb();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=Bb();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=Knr.bind(null,Ma,t),[n.memoizedState,t]},useRef:function(t){var e=Bb();return t={current:t},e.memoizedState=t},useState:tHe,useDebugValue:aye,useDeferredValue:function(t){return Bb().memoizedState=t},useTransition:function(){var t=tHe(!1),e=t[0];return t=Wnr.bind(null,t[1]),Bb().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=Ma,o=Bb();if(ya){if(r===void 0)throw Error(Be(407));r=r()}else{if(r=e(),Fl===null)throw Error(Be(349));(CR&30)!==0||IVe(n,e,r)}o.memoizedState=r;var i={value:r,getSnapshot:e};return o.queue=i,rHe(RVe.bind(null,n,i,t),[t]),n.flags|=2048,p4(9,MVe.bind(null,n,i,r,e),void 0,null),r},useId:function(){var t=Bb(),e=Fl.identifierPrefix;if(ya){var r=_C,n=bC;r=(n&~(1<<32-oy(n)-1)).toString(32)+r,e=":"+e+"R"+r,r=d4++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=Vnr++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Ynr={readContext:Th,useCallback:BVe,useContext:Th,useEffect:iye,useImperativeHandle:$Ve,useInsertionEffect:LVe,useLayoutEffect:FVe,useMemo:qVe,useReducer:Mhe,useRef:DVe,useState:function(){return Mhe(f4)},useDebugValue:aye,useDeferredValue:function(t){var e=Ah();return UVe(e,ml.memoizedState,t)},useTransition:function(){var t=Mhe(f4)[0],e=Ah().memoizedState;return[t,e]},useMutableSource:TVe,useSyncExternalStore:AVe,useId:zVe,unstable_isNewReconciler:!1},Znr={readContext:Th,useCallback:BVe,useContext:Th,useEffect:iye,useImperativeHandle:$Ve,useInsertionEffect:LVe,useLayoutEffect:FVe,useMemo:qVe,useReducer:Rhe,useRef:DVe,useState:function(){return Rhe(f4)},useDebugValue:aye,useDeferredValue:function(t){var e=Ah();return ml===null?e.memoizedState=t:UVe(e,ml.memoizedState,t)},useTransition:function(){var t=Rhe(f4)[0],e=Ah().memoizedState;return[t,e]},useMutableSource:TVe,useSyncExternalStore:AVe,useId:zVe,unstable_isNewReconciler:!1};function fF(t,e){try{var r="",n=e;do r+=Err(n),n=n.return;while(n);var o=r}catch(i){o=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:o,digest:null}}function jhe(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function hge(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var Xnr=typeof WeakMap=="function"?WeakMap:Map;function KVe(t,e,r){r=vC(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){SJ||(SJ=!0,Oge=n),hge(t,e)},r}function GVe(t,e,r){r=vC(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var o=e.value;r.payload=function(){return n(o)},r.callback=function(){hge(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){hge(t,e),typeof n!="function"&&(kE===null?kE=new Set([this]):kE.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),r}function nHe(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new Xnr;var o=new Set;n.set(e,o)}else o=n.get(e),o===void 0&&(o=new Set,n.set(e,o));o.has(r)||(o.add(r),t=por.bind(null,t,e,r),e.then(t,t))}function oHe(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function iHe(t,e,r,n,o){return(t.mode&1)===0?(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=vC(-1,1),e.tag=2,FE(r,e,1))),r.lanes|=1),t):(t.flags|=65536,t.lanes=o,t)}var Qnr=OC.ReactCurrentOwner,gp=!1;function Cf(t,e,r,n){e.child=t===null?PVe(e,null,r,n):cF(e,t.child,r,n)}function aHe(t,e,r,n,o){r=r.render;var i=e.ref;return iF(e,o),n=nye(t,e,r,n,i,o),r=oye(),t!==null&&!gp?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~o,CC(t,e,o)):(ya&&r&&Vge(e),e.flags|=1,Cf(t,e,n,o),e.child)}function sHe(t,e,r,n,o){if(t===null){var i=r.type;return typeof i=="function"&&!mye(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=i,JVe(t,e,i,n,o)):(t=tJ(r.type,null,n,e,e.mode,o),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,(t.lanes&o)===0){var a=i.memoizedProps;if(r=r.compare,r=r!==null?r:i4,r(a,n)&&t.ref===e.ref)return CC(t,e,o)}return e.flags|=1,t=BE(i,n),t.ref=e.ref,t.return=e,e.child=t}function JVe(t,e,r,n,o){if(t!==null){var i=t.memoizedProps;if(i4(i,n)&&t.ref===e.ref)if(gp=!1,e.pendingProps=n=i,(t.lanes&o)!==0)(t.flags&131072)!==0&&(gp=!0);else return e.lanes=t.lanes,CC(t,e,o)}return gge(t,e,r,n,o)}function YVe(t,e,r){var n=e.pendingProps,o=n.children,i=t!==null?t.memoizedState:null;if(n.mode==="hidden")if((e.mode&1)===0)e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Fi(eF,lm),lm|=r;else{if((r&1073741824)===0)return t=i!==null?i.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Fi(eF,lm),lm|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:r,Fi(eF,lm),lm|=n}else i!==null?(n=i.baseLanes|r,e.memoizedState=null):n=r,Fi(eF,lm),lm|=n;return Cf(t,e,o,r),e.child}function ZVe(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function gge(t,e,r,n,o){var i=bp(r)?SR:Td.current;return i=uF(e,i),iF(e,o),r=nye(t,e,r,n,i,o),n=oye(),t!==null&&!gp?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~o,CC(t,e,o)):(ya&&n&&Vge(e),e.flags|=1,Cf(t,e,r,o),e.child)}function uHe(t,e,r,n,o){if(bp(r)){var i=!0;fJ(e)}else i=!1;if(iF(e,o),e.stateNode===null)XG(t,e),CVe(e,r,n),mge(e,r,n,o),n=!0;else if(t===null){var a=e.stateNode,s=e.memoizedProps;a.props=s;var u=a.context,l=r.contextType;typeof l=="object"&&l!==null?l=Th(l):(l=bp(r)?SR:Td.current,l=uF(e,l));var c=r.getDerivedStateFromProps,d=typeof c=="function"||typeof a.getSnapshotBeforeUpdate=="function";d||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(s!==n||u!==l)&&Q3e(e,a,n,l),TE=!1;var f=e.memoizedState;a.state=f,yJ(e,n,a,o),u=e.memoizedState,s!==n||f!==u||yp.current||TE?(typeof c=="function"&&(pge(e,r,c,n),u=e.memoizedState),(s=TE||X3e(e,r,s,n,f,u,l))?(d||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=u),a.props=n,a.state=u,a.context=l,n=s):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{a=e.stateNode,SVe(t,e),s=e.memoizedProps,l=e.type===e.elementType?s:ty(e.type,s),a.props=l,d=e.pendingProps,f=a.context,u=r.contextType,typeof u=="object"&&u!==null?u=Th(u):(u=bp(r)?SR:Td.current,u=uF(e,u));var p=r.getDerivedStateFromProps;(c=typeof p=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(s!==d||f!==u)&&Q3e(e,a,n,u),TE=!1,f=e.memoizedState,a.state=f,yJ(e,n,a,o);var m=e.memoizedState;s!==d||f!==m||yp.current||TE?(typeof p=="function"&&(pge(e,r,p,n),m=e.memoizedState),(l=TE||X3e(e,r,l,n,f,m,u)||!1)?(c||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(n,m,u),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(n,m,u)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||s===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||s===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=m),a.props=n,a.state=m,a.context=u,n=l):(typeof a.componentDidUpdate!="function"||s===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||s===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),n=!1)}return yge(t,e,r,n,i,o)}function yge(t,e,r,n,o,i){ZVe(t,e);var a=(e.flags&128)!==0;if(!n&&!a)return o&&K3e(e,r,!1),CC(t,e,i);n=e.stateNode,Qnr.current=e;var s=a&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&a?(e.child=cF(e,t.child,null,i),e.child=cF(e,null,s,i)):Cf(t,e,s,i),e.memoizedState=n.state,o&&K3e(e,r,!0),e.child}function XVe(t){var e=t.stateNode;e.pendingContext?W3e(t,e.pendingContext,e.pendingContext!==e.context):e.context&&W3e(t,e.context,!1),Qge(t,e.containerInfo)}function lHe(t,e,r,n,o){return lF(),Kge(o),e.flags|=256,Cf(t,e,r,n),e.child}var bge={dehydrated:null,treeContext:null,retryLane:0};function _ge(t){return{baseLanes:t,cachePool:null,transitions:null}}function QVe(t,e,r){var n=e.pendingProps,o=Ia.current,i=!1,a=(e.flags&128)!==0,s;if((s=a)||(s=t!==null&&t.memoizedState===null?!1:(o&2)!==0),s?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(o|=1),Fi(Ia,o&1),t===null)return dge(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?((e.mode&1)===0?e.lanes=1:t.data==="$!"?e.lanes=8:e.lanes=1073741824,null):(a=n.children,t=n.fallback,i?(n=e.mode,i=e.child,a={mode:"hidden",children:a},(n&1)===0&&i!==null?(i.childLanes=0,i.pendingProps=a):i=LJ(a,n,0,null),t=wR(t,n,r,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=_ge(r),e.memoizedState=bge,t):sye(e,a));if(o=t.memoizedState,o!==null&&(s=o.dehydrated,s!==null))return eor(t,e,a,n,s,o,r);if(i){i=n.fallback,a=e.mode,o=t.child,s=o.sibling;var u={mode:"hidden",children:n.children};return(a&1)===0&&e.child!==o?(n=e.child,n.childLanes=0,n.pendingProps=u,e.deletions=null):(n=BE(o,u),n.subtreeFlags=o.subtreeFlags&14680064),s!==null?i=BE(s,i):(i=wR(i,a,r,null),i.flags|=2),i.return=e,n.return=e,n.sibling=i,e.child=n,n=i,i=e.child,a=t.child.memoizedState,a=a===null?_ge(r):{baseLanes:a.baseLanes|r,cachePool:null,transitions:a.transitions},i.memoizedState=a,i.childLanes=t.childLanes&~r,e.memoizedState=bge,n}return i=t.child,t=i.sibling,n=BE(i,{mode:"visible",children:n.children}),(e.mode&1)===0&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n}function sye(t,e){return e=LJ({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function zG(t,e,r,n){return n!==null&&Kge(n),cF(e,t.child,null,r),t=sye(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function eor(t,e,r,n,o,i,a){if(r)return e.flags&256?(e.flags&=-257,n=jhe(Error(Be(422))),zG(t,e,a,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=n.fallback,o=e.mode,n=LJ({mode:"visible",children:n.children},o,0,null),i=wR(i,o,a,null),i.flags|=2,n.return=e,i.return=e,n.sibling=i,e.child=n,(e.mode&1)!==0&&cF(e,t.child,null,a),e.child.memoizedState=_ge(a),e.memoizedState=bge,i);if((e.mode&1)===0)return zG(t,e,a,null);if(o.data==="$!"){if(n=o.nextSibling&&o.nextSibling.dataset,n)var s=n.dgst;return n=s,i=Error(Be(419)),n=jhe(i,n,void 0),zG(t,e,a,n)}if(s=(a&t.childLanes)!==0,gp||s){if(n=Fl,n!==null){switch(a&-a){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}o=(o&(n.suspendedLanes|a))!==0?0:o,o!==0&&o!==i.retryLane&&(i.retryLane=o,xC(t,o),iy(n,t,o,-1))}return pye(),n=jhe(Error(Be(421))),zG(t,e,a,n)}return o.data==="$?"?(e.flags|=128,e.child=t.child,e=mor.bind(null,t),o._reactRetry=e,null):(t=i.treeContext,cm=LE(o.nextSibling),dm=e,ya=!0,ny=null,t!==null&&(Ch[Oh++]=bC,Ch[Oh++]=_C,Ch[Oh++]=xR,bC=t.id,_C=t.overflow,xR=e),e=sye(e,n.children),e.flags|=4096,e)}function cHe(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),fge(t.return,e,r)}function Nhe(t,e,r,n,o){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:o}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=o)}function e8e(t,e,r){var n=e.pendingProps,o=n.revealOrder,i=n.tail;if(Cf(t,e,n.children,r),n=Ia.current,(n&2)!==0)n=n&1|2,e.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&cHe(t,r,e);else if(t.tag===19)cHe(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(Fi(Ia,n),(e.mode&1)===0)e.memoizedState=null;else switch(o){case"forwards":for(r=e.child,o=null;r!==null;)t=r.alternate,t!==null&&bJ(t)===null&&(o=r),r=r.sibling;r=o,r===null?(o=e.child,e.child=null):(o=r.sibling,r.sibling=null),Nhe(e,!1,o,r,i);break;case"backwards":for(r=null,o=e.child,e.child=null;o!==null;){if(t=o.alternate,t!==null&&bJ(t)===null){e.child=o;break}t=o.sibling,o.sibling=r,r=o,o=t}Nhe(e,!0,r,null,i);break;case"together":Nhe(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function XG(t,e){(e.mode&1)===0&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function CC(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),OR|=e.lanes,(r&e.childLanes)===0)return null;if(t!==null&&e.child!==t.child)throw Error(Be(153));if(e.child!==null){for(t=e.child,r=BE(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=BE(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function tor(t,e,r){switch(e.tag){case 3:XVe(e),lF();break;case 5:EVe(e);break;case 1:bp(e.type)&&fJ(e);break;case 4:Qge(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,o=e.memoizedProps.value;Fi(hJ,n._currentValue),n._currentValue=o;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(Fi(Ia,Ia.current&1),e.flags|=128,null):(r&e.child.childLanes)!==0?QVe(t,e,r):(Fi(Ia,Ia.current&1),t=CC(t,e,r),t!==null?t.sibling:null);Fi(Ia,Ia.current&1);break;case 19:if(n=(r&e.childLanes)!==0,(t.flags&128)!==0){if(n)return e8e(t,e,r);e.flags|=128}if(o=e.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),Fi(Ia,Ia.current),n)break;return null;case 22:case 23:return e.lanes=0,YVe(t,e,r)}return CC(t,e,r)}var t8e,vge,r8e,n8e;t8e=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};vge=function(){};r8e=function(t,e,r,n){var o=t.memoizedProps;if(o!==n){t=e.stateNode,_R(zb.current);var i=null;switch(r){case"input":o=Uhe(t,o),n=Uhe(t,n),i=[];break;case"select":o=Ra({},o,{value:void 0}),n=Ra({},n,{value:void 0}),i=[];break;case"textarea":o=Vhe(t,o),n=Vhe(t,n),i=[];break;default:typeof o.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=cJ)}Khe(r,n);var a;r=null;for(l in o)if(!n.hasOwnProperty(l)&&o.hasOwnProperty(l)&&o[l]!=null)if(l==="style"){var s=o[l];for(a in s)s.hasOwnProperty(a)&&(r||(r={}),r[a]="")}else l!=="dangerouslySetInnerHTML"&&l!=="children"&&l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(X2.hasOwnProperty(l)?i||(i=[]):(i=i||[]).push(l,null));for(l in n){var u=n[l];if(s=o?.[l],n.hasOwnProperty(l)&&u!==s&&(u!=null||s!=null))if(l==="style")if(s){for(a in s)!s.hasOwnProperty(a)||u&&u.hasOwnProperty(a)||(r||(r={}),r[a]="");for(a in u)u.hasOwnProperty(a)&&s[a]!==u[a]&&(r||(r={}),r[a]=u[a])}else r||(i||(i=[]),i.push(l,r)),r=u;else l==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,s=s?s.__html:void 0,u!=null&&s!==u&&(i=i||[]).push(l,u)):l==="children"?typeof u!="string"&&typeof u!="number"||(i=i||[]).push(l,""+u):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&(X2.hasOwnProperty(l)?(u!=null&&l==="onScroll"&&Qi("scroll",t),i||s===u||(i=[])):(i=i||[]).push(l,u))}r&&(i=i||[]).push("style",r);var l=i;(e.updateQueue=l)&&(e.flags|=4)}};n8e=function(t,e,r,n){r!==n&&(e.flags|=4)};function L2(t,e){if(!ya)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function Pd(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var o=t.child;o!==null;)r|=o.lanes|o.childLanes,n|=o.subtreeFlags&14680064,n|=o.flags&14680064,o.return=t,o=o.sibling;else for(o=t.child;o!==null;)r|=o.lanes|o.childLanes,n|=o.subtreeFlags,n|=o.flags,o.return=t,o=o.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function ror(t,e,r){var n=e.pendingProps;switch(Wge(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Pd(e),null;case 1:return bp(e.type)&&dJ(),Pd(e),null;case 3:return n=e.stateNode,dF(),ea(yp),ea(Td),tye(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(qG(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&(e.flags&256)===0||(e.flags|=1024,ny!==null&&(Tge(ny),ny=null))),vge(t,e),Pd(e),null;case 5:eye(e);var o=_R(c4.current);if(r=e.type,t!==null&&e.stateNode!=null)r8e(t,e,r,n,o),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(Be(166));return Pd(e),null}if(t=_R(zb.current),qG(e)){n=e.stateNode,r=e.type;var i=e.memoizedProps;switch(n[qb]=e,n[u4]=i,t=(e.mode&1)!==0,r){case"dialog":Qi("cancel",n),Qi("close",n);break;case"iframe":case"object":case"embed":Qi("load",n);break;case"video":case"audio":for(o=0;o<U2.length;o++)Qi(U2[o],n);break;case"source":Qi("error",n);break;case"img":case"image":case"link":Qi("error",n),Qi("load",n);break;case"details":Qi("toggle",n);break;case"input":b3e(n,i),Qi("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},Qi("invalid",n);break;case"textarea":v3e(n,i),Qi("invalid",n)}Khe(r,i),o=null;for(var a in i)if(i.hasOwnProperty(a)){var s=i[a];a==="children"?typeof s=="string"?n.textContent!==s&&(i.suppressHydrationWarning!==!0&&BG(n.textContent,s,t),o=["children",s]):typeof s=="number"&&n.textContent!==""+s&&(i.suppressHydrationWarning!==!0&&BG(n.textContent,s,t),o=["children",""+s]):X2.hasOwnProperty(a)&&s!=null&&a==="onScroll"&&Qi("scroll",n)}switch(r){case"input":TG(n),_3e(n,i,!0);break;case"textarea":TG(n),w3e(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=cJ)}n=o,e.updateQueue=n,n!==null&&(e.flags|=4)}else{a=o.nodeType===9?o:o.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=IHe(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=a.createElement(r,{is:n.is}):(t=a.createElement(r),r==="select"&&(a=t,n.multiple?a.multiple=!0:n.size&&(a.size=n.size))):t=a.createElementNS(t,r),t[qb]=e,t[u4]=n,t8e(t,e,!1,!1),e.stateNode=t;e:{switch(a=Ghe(r,n),r){case"dialog":Qi("cancel",t),Qi("close",t),o=n;break;case"iframe":case"object":case"embed":Qi("load",t),o=n;break;case"video":case"audio":for(o=0;o<U2.length;o++)Qi(U2[o],t);o=n;break;case"source":Qi("error",t),o=n;break;case"img":case"image":case"link":Qi("error",t),Qi("load",t),o=n;break;case"details":Qi("toggle",t),o=n;break;case"input":b3e(t,n),o=Uhe(t,n),Qi("invalid",t);break;case"option":o=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},o=Ra({},n,{value:void 0}),Qi("invalid",t);break;case"textarea":v3e(t,n),o=Vhe(t,n),Qi("invalid",t);break;default:o=n}Khe(r,o),s=o;for(i in s)if(s.hasOwnProperty(i)){var u=s[i];i==="style"?jHe(t,u):i==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&MHe(t,u)):i==="children"?typeof u=="string"?(r!=="textarea"||u!=="")&&Q2(t,u):typeof u=="number"&&Q2(t,""+u):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(X2.hasOwnProperty(i)?u!=null&&i==="onScroll"&&Qi("scroll",t):u!=null&&Mge(t,i,u,a))}switch(r){case"input":TG(t),_3e(t,n,!1);break;case"textarea":TG(t),w3e(t);break;case"option":n.value!=null&&t.setAttribute("value",""+qE(n.value));break;case"select":t.multiple=!!n.multiple,i=n.value,i!=null?tF(t,!!n.multiple,i,!1):n.defaultValue!=null&&tF(t,!!n.multiple,n.defaultValue,!0);break;default:typeof o.onClick=="function"&&(t.onclick=cJ)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Pd(e),null;case 6:if(t&&e.stateNode!=null)n8e(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(Be(166));if(r=_R(c4.current),_R(zb.current),qG(e)){if(n=e.stateNode,r=e.memoizedProps,n[qb]=e,(i=n.nodeValue!==r)&&(t=dm,t!==null))switch(t.tag){case 3:BG(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&BG(n.nodeValue,r,(t.mode&1)!==0)}i&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[qb]=e,e.stateNode=n}return Pd(e),null;case 13:if(ea(Ia),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ya&&cm!==null&&(e.mode&1)!==0&&(e.flags&128)===0)vVe(),lF(),e.flags|=98560,i=!1;else if(i=qG(e),n!==null&&n.dehydrated!==null){if(t===null){if(!i)throw Error(Be(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(Be(317));i[qb]=e}else lF(),(e.flags&128)===0&&(e.memoizedState=null),e.flags|=4;Pd(e),i=!1}else ny!==null&&(Tge(ny),ny=null),i=!0;if(!i)return e.flags&65536?e:null}return(e.flags&128)!==0?(e.lanes=r,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,(e.mode&1)!==0&&(t===null||(Ia.current&1)!==0?hl===0&&(hl=3):pye())),e.updateQueue!==null&&(e.flags|=4),Pd(e),null);case 4:return dF(),vge(t,e),t===null&&a4(e.stateNode.containerInfo),Pd(e),null;case 10:return Yge(e.type._context),Pd(e),null;case 17:return bp(e.type)&&dJ(),Pd(e),null;case 19:if(ea(Ia),i=e.memoizedState,i===null)return Pd(e),null;if(n=(e.flags&128)!==0,a=i.rendering,a===null)if(n)L2(i,!1);else{if(hl!==0||t!==null&&(t.flags&128)!==0)for(t=e.child;t!==null;){if(a=bJ(t),a!==null){for(e.flags|=128,L2(i,!1),n=a.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)i=r,t=n,i.flags&=14680066,a=i.alternate,a===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,t=a.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return Fi(Ia,Ia.current&1|2),e.child}t=t.sibling}i.tail!==null&&vs()>pF&&(e.flags|=128,n=!0,L2(i,!1),e.lanes=4194304)}else{if(!n)if(t=bJ(a),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),L2(i,!0),i.tail===null&&i.tailMode==="hidden"&&!a.alternate&&!ya)return Pd(e),null}else 2*vs()-i.renderingStartTime>pF&&r!==1073741824&&(e.flags|=128,n=!0,L2(i,!1),e.lanes=4194304);i.isBackwards?(a.sibling=e.child,e.child=a):(r=i.last,r!==null?r.sibling=a:e.child=a,i.last=a)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=vs(),e.sibling=null,r=Ia.current,Fi(Ia,n?r&1|2:r&1),e):(Pd(e),null);case 22:case 23:return fye(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&(e.mode&1)!==0?(lm&1073741824)!==0&&(Pd(e),e.subtreeFlags&6&&(e.flags|=8192)):Pd(e),null;case 24:return null;case 25:return null}throw Error(Be(156,e.tag))}function nor(t,e){switch(Wge(e),e.tag){case 1:return bp(e.type)&&dJ(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return dF(),ea(yp),ea(Td),tye(),t=e.flags,(t&65536)!==0&&(t&128)===0?(e.flags=t&-65537|128,e):null;case 5:return eye(e),null;case 13:if(ea(Ia),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Be(340));lF()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ea(Ia),null;case 4:return dF(),null;case 10:return Yge(e.type._context),null;case 22:case 23:return fye(),null;case 24:return null;default:return null}}var HG=!1,Ed=!1,oor=typeof WeakSet=="function"?WeakSet:Set,Ct=null;function QL(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){ns(t,e,n)}else r.current=null}function wge(t,e,r){try{r()}catch(n){ns(t,e,n)}}var dHe=!1;function ior(t,e){if(oge=sJ,t=sVe(),Hge(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var o=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var a=0,s=-1,u=-1,l=0,c=0,d=t,f=null;t:for(;;){for(var p;d!==r||o!==0&&d.nodeType!==3||(s=a+o),d!==i||n!==0&&d.nodeType!==3||(u=a+n),d.nodeType===3&&(a+=d.nodeValue.length),(p=d.firstChild)!==null;)f=d,d=p;for(;;){if(d===t)break t;if(f===r&&++l===o&&(s=a),f===i&&++c===n&&(u=a),(p=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=p}r=s===-1||u===-1?null:{start:s,end:u}}else r=null}r=r||{start:0,end:0}}else r=null;for(ige={focusedElem:t,selectionRange:r},sJ=!1,Ct=e;Ct!==null;)if(e=Ct,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Ct=t;else for(;Ct!==null;){e=Ct;try{var m=e.alternate;if((e.flags&1024)!==0)switch(e.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var h=m.memoizedProps,b=m.memoizedState,g=e.stateNode,y=g.getSnapshotBeforeUpdate(e.elementType===e.type?h:ty(e.type,h),b);g.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Be(163))}}catch(S){ns(e,e.return,S)}if(t=e.sibling,t!==null){t.return=e.return,Ct=t;break}Ct=e.return}return m=dHe,dHe=!1,m}function J2(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var o=n=n.next;do{if((o.tag&t)===t){var i=o.destroy;o.destroy=void 0,i!==void 0&&wge(e,r,i)}o=o.next}while(o!==n)}}function NJ(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function Sge(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function o8e(t){var e=t.alternate;e!==null&&(t.alternate=null,o8e(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[qb],delete e[u4],delete e[uge],delete e[qnr],delete e[Unr])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function i8e(t){return t.tag===5||t.tag===3||t.tag===4}function fHe(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||i8e(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function xge(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=cJ));else if(n!==4&&(t=t.child,t!==null))for(xge(t,e,r),t=t.sibling;t!==null;)xge(t,e,r),t=t.sibling}function Cge(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(Cge(t,e,r),t=t.sibling;t!==null;)Cge(t,e,r),t=t.sibling}var bc=null,ry=!1;function PE(t,e,r){for(r=r.child;r!==null;)a8e(t,e,r),r=r.sibling}function a8e(t,e,r){if(Ub&&typeof Ub.onCommitFiberUnmount=="function")try{Ub.onCommitFiberUnmount(PJ,r)}catch{}switch(r.tag){case 5:Ed||QL(r,e);case 6:var n=bc,o=ry;bc=null,PE(t,e,r),bc=n,ry=o,bc!==null&&(ry?(t=bc,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):bc.removeChild(r.stateNode));break;case 18:bc!==null&&(ry?(t=bc,r=r.stateNode,t.nodeType===8?Ehe(t.parentNode,r):t.nodeType===1&&Ehe(t,r),n4(t)):Ehe(bc,r.stateNode));break;case 4:n=bc,o=ry,bc=r.stateNode.containerInfo,ry=!0,PE(t,e,r),bc=n,ry=o;break;case 0:case 11:case 14:case 15:if(!Ed&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){o=n=n.next;do{var i=o,a=i.destroy;i=i.tag,a!==void 0&&((i&2)!==0||(i&4)!==0)&&wge(r,e,a),o=o.next}while(o!==n)}PE(t,e,r);break;case 1:if(!Ed&&(QL(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(s){ns(r,e,s)}PE(t,e,r);break;case 21:PE(t,e,r);break;case 22:r.mode&1?(Ed=(n=Ed)||r.memoizedState!==null,PE(t,e,r),Ed=n):PE(t,e,r);break;default:PE(t,e,r)}}function pHe(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new oor),e.forEach(function(n){var o=hor.bind(null,t,n);r.has(n)||(r.add(n),n.then(o,o))})}}function ey(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var o=r[n];try{var i=t,a=e,s=a;e:for(;s!==null;){switch(s.tag){case 5:bc=s.stateNode,ry=!1;break e;case 3:bc=s.stateNode.containerInfo,ry=!0;break e;case 4:bc=s.stateNode.containerInfo,ry=!0;break e}s=s.return}if(bc===null)throw Error(Be(160));a8e(i,a,o),bc=null,ry=!1;var u=o.alternate;u!==null&&(u.return=null),o.return=null}catch(l){ns(o,e,l)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)s8e(e,t),e=e.sibling}function s8e(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ey(e,t),$b(t),n&4){try{J2(3,t,t.return),NJ(3,t)}catch(h){ns(t,t.return,h)}try{J2(5,t,t.return)}catch(h){ns(t,t.return,h)}}break;case 1:ey(e,t),$b(t),n&512&&r!==null&&QL(r,r.return);break;case 5:if(ey(e,t),$b(t),n&512&&r!==null&&QL(r,r.return),t.flags&32){var o=t.stateNode;try{Q2(o,"")}catch(h){ns(t,t.return,h)}}if(n&4&&(o=t.stateNode,o!=null)){var i=t.memoizedProps,a=r!==null?r.memoizedProps:i,s=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{s==="input"&&i.type==="radio"&&i.name!=null&&THe(o,i),Ghe(s,a);var l=Ghe(s,i);for(a=0;a<u.length;a+=2){var c=u[a],d=u[a+1];c==="style"?jHe(o,d):c==="dangerouslySetInnerHTML"?MHe(o,d):c==="children"?Q2(o,d):Mge(o,c,d,l)}switch(s){case"input":zhe(o,i);break;case"textarea":AHe(o,i);break;case"select":var f=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!i.multiple;var p=i.value;p!=null?tF(o,!!i.multiple,p,!1):f!==!!i.multiple&&(i.defaultValue!=null?tF(o,!!i.multiple,i.defaultValue,!0):tF(o,!!i.multiple,i.multiple?[]:"",!1))}o[u4]=i}catch(h){ns(t,t.return,h)}}break;case 6:if(ey(e,t),$b(t),n&4){if(t.stateNode===null)throw Error(Be(162));o=t.stateNode,i=t.memoizedProps;try{o.nodeValue=i}catch(h){ns(t,t.return,h)}}break;case 3:if(ey(e,t),$b(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{n4(e.containerInfo)}catch(h){ns(t,t.return,h)}break;case 4:ey(e,t),$b(t);break;case 13:ey(e,t),$b(t),o=t.child,o.flags&8192&&(i=o.memoizedState!==null,o.stateNode.isHidden=i,!i||o.alternate!==null&&o.alternate.memoizedState!==null||(cye=vs())),n&4&&pHe(t);break;case 22:if(c=r!==null&&r.memoizedState!==null,t.mode&1?(Ed=(l=Ed)||c,ey(e,t),Ed=l):ey(e,t),$b(t),n&8192){if(l=t.memoizedState!==null,(t.stateNode.isHidden=l)&&!c&&(t.mode&1)!==0)for(Ct=t,c=t.child;c!==null;){for(d=Ct=c;Ct!==null;){switch(f=Ct,p=f.child,f.tag){case 0:case 11:case 14:case 15:J2(4,f,f.return);break;case 1:QL(f,f.return);var m=f.stateNode;if(typeof m.componentWillUnmount=="function"){n=f,r=f.return;try{e=n,m.props=e.memoizedProps,m.state=e.memoizedState,m.componentWillUnmount()}catch(h){ns(n,r,h)}}break;case 5:QL(f,f.return);break;case 22:if(f.memoizedState!==null){hHe(d);continue}}p!==null?(p.return=f,Ct=p):hHe(d)}c=c.sibling}e:for(c=null,d=t;;){if(d.tag===5){if(c===null){c=d;try{o=d.stateNode,l?(i=o.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(s=d.stateNode,u=d.memoizedProps.style,a=u!=null&&u.hasOwnProperty("display")?u.display:null,s.style.display=RHe("display",a))}catch(h){ns(t,t.return,h)}}}else if(d.tag===6){if(c===null)try{d.stateNode.nodeValue=l?"":d.memoizedProps}catch(h){ns(t,t.return,h)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;c===d&&(c=null),d=d.return}c===d&&(c=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:ey(e,t),$b(t),n&4&&pHe(t);break;case 21:break;default:ey(e,t),$b(t)}}function $b(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(i8e(r)){var n=r;break e}r=r.return}throw Error(Be(160))}switch(n.tag){case 5:var o=n.stateNode;n.flags&32&&(Q2(o,""),n.flags&=-33);var i=fHe(t);Cge(t,i,o);break;case 3:case 4:var a=n.stateNode.containerInfo,s=fHe(t);xge(t,s,a);break;default:throw Error(Be(161))}}catch(u){ns(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function aor(t,e,r){Ct=t,u8e(t,e,r)}function u8e(t,e,r){for(var n=(t.mode&1)!==0;Ct!==null;){var o=Ct,i=o.child;if(o.tag===22&&n){var a=o.memoizedState!==null||HG;if(!a){var s=o.alternate,u=s!==null&&s.memoizedState!==null||Ed;s=HG;var l=Ed;if(HG=a,(Ed=u)&&!l)for(Ct=o;Ct!==null;)a=Ct,u=a.child,a.tag===22&&a.memoizedState!==null?gHe(o):u!==null?(u.return=a,Ct=u):gHe(o);for(;i!==null;)Ct=i,u8e(i,e,r),i=i.sibling;Ct=o,HG=s,Ed=l}mHe(t,e,r)}else(o.subtreeFlags&8772)!==0&&i!==null?(i.return=o,Ct=i):mHe(t,e,r)}}function mHe(t){for(;Ct!==null;){var e=Ct;if((e.flags&8772)!==0){var r=e.alternate;try{if((e.flags&8772)!==0)switch(e.tag){case 0:case 11:case 15:Ed||NJ(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!Ed)if(r===null)n.componentDidMount();else{var o=e.elementType===e.type?r.memoizedProps:ty(e.type,r.memoizedProps);n.componentDidUpdate(o,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Z3e(e,i,n);break;case 3:var a=e.updateQueue;if(a!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}Z3e(e,a,r)}break;case 5:var s=e.stateNode;if(r===null&&e.flags&4){r=s;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&r.focus();break;case"img":u.src&&(r.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var l=e.alternate;if(l!==null){var c=l.memoizedState;if(c!==null){var d=c.dehydrated;d!==null&&n4(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Be(163))}Ed||e.flags&512&&Sge(e)}catch(f){ns(e,e.return,f)}}if(e===t){Ct=null;break}if(r=e.sibling,r!==null){r.return=e.return,Ct=r;break}Ct=e.return}}function hHe(t){for(;Ct!==null;){var e=Ct;if(e===t){Ct=null;break}var r=e.sibling;if(r!==null){r.return=e.return,Ct=r;break}Ct=e.return}}function gHe(t){for(;Ct!==null;){var e=Ct;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{NJ(4,e)}catch(u){ns(e,r,u)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var o=e.return;try{n.componentDidMount()}catch(u){ns(e,o,u)}}var i=e.return;try{Sge(e)}catch(u){ns(e,i,u)}break;case 5:var a=e.return;try{Sge(e)}catch(u){ns(e,a,u)}}}catch(u){ns(e,e.return,u)}if(e===t){Ct=null;break}var s=e.sibling;if(s!==null){s.return=e.return,Ct=s;break}Ct=e.return}}var sor=Math.ceil,wJ=OC.ReactCurrentDispatcher,uye=OC.ReactCurrentOwner,Eh=OC.ReactCurrentBatchConfig,co=0,Fl=null,Ns=null,_c=0,lm=0,eF=HE(0),hl=0,m4=null,OR=0,DJ=0,lye=0,Y2=null,hp=null,cye=0,pF=1/0,gC=null,SJ=!1,Oge=null,kE=null,VG=!1,RE=null,xJ=0,Z2=0,Pge=null,QG=-1,eJ=0;function Of(){return(co&6)!==0?vs():QG!==-1?QG:QG=vs()}function $E(t){return(t.mode&1)===0?1:(co&2)!==0&&_c!==0?_c&-_c:Hnr.transition!==null?(eJ===0&&(eJ=VHe()),eJ):(t=fi,t!==0||(t=window.event,t=t===void 0?16:XHe(t.type)),t)}function iy(t,e,r,n){if(50<Z2)throw Z2=0,Pge=null,Error(Be(185));h4(t,r,n),((co&2)===0||t!==Fl)&&(t===Fl&&((co&2)===0&&(DJ|=r),hl===4&&IE(t,_c)),_p(t,n),r===1&&co===0&&(e.mode&1)===0&&(pF=vs()+500,MJ&&VE()))}function _p(t,e){var r=t.callbackNode;Wrr(t,e);var n=aJ(t,t===Fl?_c:0);if(n===0)r!==null&&C3e(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&C3e(r),e===1)t.tag===0?znr(yHe.bind(null,t)):yVe(yHe.bind(null,t)),$nr(function(){(co&6)===0&&VE()}),r=null;else{switch(WHe(n)){case 1:r=Lge;break;case 4:r=zHe;break;case 16:r=iJ;break;case 536870912:r=HHe;break;default:r=iJ}r=g8e(r,l8e.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function l8e(t,e){if(QG=-1,eJ=0,(co&6)!==0)throw Error(Be(327));var r=t.callbackNode;if(aF()&&t.callbackNode!==r)return null;var n=aJ(t,t===Fl?_c:0);if(n===0)return null;if((n&30)!==0||(n&t.expiredLanes)!==0||e)e=CJ(t,n);else{e=n;var o=co;co|=2;var i=d8e();(Fl!==t||_c!==e)&&(gC=null,pF=vs()+500,vR(t,e));do try{cor();break}catch(s){c8e(t,s)}while(!0);Jge(),wJ.current=i,co=o,Ns!==null?e=0:(Fl=null,_c=0,e=hl)}if(e!==0){if(e===2&&(o=Qhe(t),o!==0&&(n=o,e=Ege(t,o))),e===1)throw r=m4,vR(t,0),IE(t,n),_p(t,vs()),r;if(e===6)IE(t,n);else{if(o=t.current.alternate,(n&30)===0&&!uor(o)&&(e=CJ(t,n),e===2&&(i=Qhe(t),i!==0&&(n=i,e=Ege(t,i))),e===1))throw r=m4,vR(t,0),IE(t,n),_p(t,vs()),r;switch(t.finishedWork=o,t.finishedLanes=n,e){case 0:case 1:throw Error(Be(345));case 2:gR(t,hp,gC);break;case 3:if(IE(t,n),(n&130023424)===n&&(e=cye+500-vs(),10<e)){if(aJ(t,0)!==0)break;if(o=t.suspendedLanes,(o&n)!==n){Of(),t.pingedLanes|=t.suspendedLanes&o;break}t.timeoutHandle=sge(gR.bind(null,t,hp,gC),e);break}gR(t,hp,gC);break;case 4:if(IE(t,n),(n&4194240)===n)break;for(e=t.eventTimes,o=-1;0<n;){var a=31-oy(n);i=1<<a,a=e[a],a>o&&(o=a),n&=~i}if(n=o,n=vs()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*sor(n/1960))-n,10<n){t.timeoutHandle=sge(gR.bind(null,t,hp,gC),n);break}gR(t,hp,gC);break;case 5:gR(t,hp,gC);break;default:throw Error(Be(329))}}}return _p(t,vs()),t.callbackNode===r?l8e.bind(null,t):null}function Ege(t,e){var r=Y2;return t.current.memoizedState.isDehydrated&&(vR(t,e).flags|=256),t=CJ(t,e),t!==2&&(e=hp,hp=r,e!==null&&Tge(e)),t}function Tge(t){hp===null?hp=t:hp.push.apply(hp,t)}function uor(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var o=r[n],i=o.getSnapshot;o=o.value;try{if(!ay(i(),o))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function IE(t,e){for(e&=~lye,e&=~DJ,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-oy(e),n=1<<r;t[r]=-1,e&=~n}}function yHe(t){if((co&6)!==0)throw Error(Be(327));aF();var e=aJ(t,0);if((e&1)===0)return _p(t,vs()),null;var r=CJ(t,e);if(t.tag!==0&&r===2){var n=Qhe(t);n!==0&&(e=n,r=Ege(t,n))}if(r===1)throw r=m4,vR(t,0),IE(t,e),_p(t,vs()),r;if(r===6)throw Error(Be(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,gR(t,hp,gC),_p(t,vs()),null}function dye(t,e){var r=co;co|=1;try{return t(e)}finally{co=r,co===0&&(pF=vs()+500,MJ&&VE())}}function PR(t){RE!==null&&RE.tag===0&&(co&6)===0&&aF();var e=co;co|=1;var r=Eh.transition,n=fi;try{if(Eh.transition=null,fi=1,t)return t()}finally{fi=n,Eh.transition=r,co=e,(co&6)===0&&VE()}}function fye(){lm=eF.current,ea(eF)}function vR(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,knr(r)),Ns!==null)for(r=Ns.return;r!==null;){var n=r;switch(Wge(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&dJ();break;case 3:dF(),ea(yp),ea(Td),tye();break;case 5:eye(n);break;case 4:dF();break;case 13:ea(Ia);break;case 19:ea(Ia);break;case 10:Yge(n.type._context);break;case 22:case 23:fye()}r=r.return}if(Fl=t,Ns=t=BE(t.current,null),_c=lm=e,hl=0,m4=null,lye=DJ=OR=0,hp=Y2=null,bR!==null){for(e=0;e<bR.length;e++)if(r=bR[e],n=r.interleaved,n!==null){r.interleaved=null;var o=n.next,i=r.pending;if(i!==null){var a=i.next;i.next=o,n.next=a}r.pending=n}bR=null}return t}function c8e(t,e){do{var r=Ns;try{if(Jge(),YG.current=vJ,_J){for(var n=Ma.memoizedState;n!==null;){var o=n.queue;o!==null&&(o.pending=null),n=n.next}_J=!1}if(CR=0,Ll=ml=Ma=null,G2=!1,d4=0,uye.current=null,r===null||r.return===null){hl=1,m4=e,Ns=null;break}e:{var i=t,a=r.return,s=r,u=e;if(e=_c,s.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var l=u,c=s,d=c.tag;if((c.mode&1)===0&&(d===0||d===11||d===15)){var f=c.alternate;f?(c.updateQueue=f.updateQueue,c.memoizedState=f.memoizedState,c.lanes=f.lanes):(c.updateQueue=null,c.memoizedState=null)}var p=oHe(a);if(p!==null){p.flags&=-257,iHe(p,a,s,i,e),p.mode&1&&nHe(i,l,e),e=p,u=l;var m=e.updateQueue;if(m===null){var h=new Set;h.add(u),e.updateQueue=h}else m.add(u);break e}else{if((e&1)===0){nHe(i,l,e),pye();break e}u=Error(Be(426))}}else if(ya&&s.mode&1){var b=oHe(a);if(b!==null){(b.flags&65536)===0&&(b.flags|=256),iHe(b,a,s,i,e),Kge(fF(u,s));break e}}i=u=fF(u,s),hl!==4&&(hl=2),Y2===null?Y2=[i]:Y2.push(i),i=a;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var g=KVe(i,u,e);Y3e(i,g);break e;case 1:s=u;var y=i.type,w=i.stateNode;if((i.flags&128)===0&&(typeof y.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(kE===null||!kE.has(w)))){i.flags|=65536,e&=-e,i.lanes|=e;var S=GVe(i,s,e);Y3e(i,S);break e}}i=i.return}while(i!==null)}p8e(r)}catch(C){e=C,Ns===r&&r!==null&&(Ns=r=r.return);continue}break}while(!0)}function d8e(){var t=wJ.current;return wJ.current=vJ,t===null?vJ:t}function pye(){(hl===0||hl===3||hl===2)&&(hl=4),Fl===null||(OR&268435455)===0&&(DJ&268435455)===0||IE(Fl,_c)}function CJ(t,e){var r=co;co|=2;var n=d8e();(Fl!==t||_c!==e)&&(gC=null,vR(t,e));do try{lor();break}catch(o){c8e(t,o)}while(!0);if(Jge(),co=r,wJ.current=n,Ns!==null)throw Error(Be(261));return Fl=null,_c=0,hl}function lor(){for(;Ns!==null;)f8e(Ns)}function cor(){for(;Ns!==null&&!Frr();)f8e(Ns)}function f8e(t){var e=h8e(t.alternate,t,lm);t.memoizedProps=t.pendingProps,e===null?p8e(t):Ns=e,uye.current=null}function p8e(t){var e=t;do{var r=e.alternate;if(t=e.return,(e.flags&32768)===0){if(r=ror(r,e,lm),r!==null){Ns=r;return}}else{if(r=nor(r,e),r!==null){r.flags&=32767,Ns=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{hl=6,Ns=null;return}}if(e=e.sibling,e!==null){Ns=e;return}Ns=e=t}while(e!==null);hl===0&&(hl=5)}function gR(t,e,r){var n=fi,o=Eh.transition;try{Eh.transition=null,fi=1,dor(t,e,r,n)}finally{Eh.transition=o,fi=n}return null}function dor(t,e,r,n){do aF();while(RE!==null);if((co&6)!==0)throw Error(Be(327));r=t.finishedWork;var o=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(Be(177));t.callbackNode=null,t.callbackPriority=0;var i=r.lanes|r.childLanes;if(Krr(t,i),t===Fl&&(Ns=Fl=null,_c=0),(r.subtreeFlags&2064)===0&&(r.flags&2064)===0||VG||(VG=!0,g8e(iJ,function(){return aF(),null})),i=(r.flags&15990)!==0,(r.subtreeFlags&15990)!==0||i){i=Eh.transition,Eh.transition=null;var a=fi;fi=1;var s=co;co|=4,uye.current=null,ior(t,r),s8e(r,t),jnr(ige),sJ=!!oge,ige=oge=null,t.current=r,aor(r,t,o),krr(),co=s,fi=a,Eh.transition=i}else t.current=r;if(VG&&(VG=!1,RE=t,xJ=o),i=t.pendingLanes,i===0&&(kE=null),qrr(r.stateNode,n),_p(t,vs()),e!==null)for(n=t.onRecoverableError,r=0;r<e.length;r++)o=e[r],n(o.value,{componentStack:o.stack,digest:o.digest});if(SJ)throw SJ=!1,t=Oge,Oge=null,t;return(xJ&1)!==0&&t.tag!==0&&aF(),i=t.pendingLanes,(i&1)!==0?t===Pge?Z2++:(Z2=0,Pge=t):Z2=0,VE(),null}function aF(){if(RE!==null){var t=WHe(xJ),e=Eh.transition,r=fi;try{if(Eh.transition=null,fi=16>t?16:t,RE===null)var n=!1;else{if(t=RE,RE=null,xJ=0,(co&6)!==0)throw Error(Be(331));var o=co;for(co|=4,Ct=t.current;Ct!==null;){var i=Ct,a=i.child;if((Ct.flags&16)!==0){var s=i.deletions;if(s!==null){for(var u=0;u<s.length;u++){var l=s[u];for(Ct=l;Ct!==null;){var c=Ct;switch(c.tag){case 0:case 11:case 15:J2(8,c,i)}var d=c.child;if(d!==null)d.return=c,Ct=d;else for(;Ct!==null;){c=Ct;var f=c.sibling,p=c.return;if(o8e(c),c===l){Ct=null;break}if(f!==null){f.return=p,Ct=f;break}Ct=p}}}var m=i.alternate;if(m!==null){var h=m.child;if(h!==null){m.child=null;do{var b=h.sibling;h.sibling=null,h=b}while(h!==null)}}Ct=i}}if((i.subtreeFlags&2064)!==0&&a!==null)a.return=i,Ct=a;else e:for(;Ct!==null;){if(i=Ct,(i.flags&2048)!==0)switch(i.tag){case 0:case 11:case 15:J2(9,i,i.return)}var g=i.sibling;if(g!==null){g.return=i.return,Ct=g;break e}Ct=i.return}}var y=t.current;for(Ct=y;Ct!==null;){a=Ct;var w=a.child;if((a.subtreeFlags&2064)!==0&&w!==null)w.return=a,Ct=w;else e:for(a=y;Ct!==null;){if(s=Ct,(s.flags&2048)!==0)try{switch(s.tag){case 0:case 11:case 15:NJ(9,s)}}catch(C){ns(s,s.return,C)}if(s===a){Ct=null;break e}var S=s.sibling;if(S!==null){S.return=s.return,Ct=S;break e}Ct=s.return}}if(co=o,VE(),Ub&&typeof Ub.onPostCommitFiberRoot=="function")try{Ub.onPostCommitFiberRoot(PJ,t)}catch{}n=!0}return n}finally{fi=r,Eh.transition=e}}return!1}function bHe(t,e,r){e=fF(r,e),e=KVe(t,e,1),t=FE(t,e,1),e=Of(),t!==null&&(h4(t,1,e),_p(t,e))}function ns(t,e,r){if(t.tag===3)bHe(t,t,r);else for(;e!==null;){if(e.tag===3){bHe(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(kE===null||!kE.has(n))){t=fF(r,t),t=GVe(e,t,1),e=FE(e,t,1),t=Of(),e!==null&&(h4(e,1,t),_p(e,t));break}}e=e.return}}function por(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=Of(),t.pingedLanes|=t.suspendedLanes&r,Fl===t&&(_c&r)===r&&(hl===4||hl===3&&(_c&130023424)===_c&&500>vs()-cye?vR(t,0):lye|=r),_p(t,e)}function m8e(t,e){e===0&&((t.mode&1)===0?e=1:(e=MG,MG<<=1,(MG&130023424)===0&&(MG=4194304)));var r=Of();t=xC(t,e),t!==null&&(h4(t,e,r),_p(t,r))}function mor(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),m8e(t,r)}function hor(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,o=t.memoizedState;o!==null&&(r=o.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(Be(314))}n!==null&&n.delete(e),m8e(t,r)}var h8e;h8e=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||yp.current)gp=!0;else{if((t.lanes&r)===0&&(e.flags&128)===0)return gp=!1,tor(t,e,r);gp=(t.flags&131072)!==0}else gp=!1,ya&&(e.flags&1048576)!==0&&bVe(e,mJ,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;XG(t,e),t=e.pendingProps;var o=uF(e,Td.current);iF(e,r),o=nye(null,e,n,t,o,r);var i=oye();return e.flags|=1,typeof o=="object"&&o!==null&&typeof o.render=="function"&&o.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,bp(n)?(i=!0,fJ(e)):i=!1,e.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,Xge(e),o.updater=RJ,e.stateNode=o,o._reactInternals=e,mge(e,n,t,r),e=yge(null,e,n,!0,i,r)):(e.tag=0,ya&&i&&Vge(e),Cf(null,e,o,r),e=e.child),e;case 16:n=e.elementType;e:{switch(XG(t,e),t=e.pendingProps,o=n._init,n=o(n._payload),e.type=n,o=e.tag=yor(n),t=ty(n,t),o){case 0:e=gge(null,e,n,t,r);break e;case 1:e=uHe(null,e,n,t,r);break e;case 11:e=aHe(null,e,n,t,r);break e;case 14:e=sHe(null,e,n,ty(n.type,t),r);break e}throw Error(Be(306,n,""))}return e;case 0:return n=e.type,o=e.pendingProps,o=e.elementType===n?o:ty(n,o),gge(t,e,n,o,r);case 1:return n=e.type,o=e.pendingProps,o=e.elementType===n?o:ty(n,o),uHe(t,e,n,o,r);case 3:e:{if(XVe(e),t===null)throw Error(Be(387));n=e.pendingProps,i=e.memoizedState,o=i.element,SVe(t,e),yJ(e,n,null,r);var a=e.memoizedState;if(n=a.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){o=fF(Error(Be(423)),e),e=lHe(t,e,n,r,o);break e}else if(n!==o){o=fF(Error(Be(424)),e),e=lHe(t,e,n,r,o);break e}else for(cm=LE(e.stateNode.containerInfo.firstChild),dm=e,ya=!0,ny=null,r=PVe(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(lF(),n===o){e=CC(t,e,r);break e}Cf(t,e,n,r)}e=e.child}return e;case 5:return EVe(e),t===null&&dge(e),n=e.type,o=e.pendingProps,i=t!==null?t.memoizedProps:null,a=o.children,age(n,o)?a=null:i!==null&&age(n,i)&&(e.flags|=32),ZVe(t,e),Cf(t,e,a,r),e.child;case 6:return t===null&&dge(e),null;case 13:return QVe(t,e,r);case 4:return Qge(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=cF(e,null,n,r):Cf(t,e,n,r),e.child;case 11:return n=e.type,o=e.pendingProps,o=e.elementType===n?o:ty(n,o),aHe(t,e,n,o,r);case 7:return Cf(t,e,e.pendingProps,r),e.child;case 8:return Cf(t,e,e.pendingProps.children,r),e.child;case 12:return Cf(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(n=e.type._context,o=e.pendingProps,i=e.memoizedProps,a=o.value,Fi(hJ,n._currentValue),n._currentValue=a,i!==null)if(ay(i.value,a)){if(i.children===o.children&&!yp.current){e=CC(t,e,r);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var s=i.dependencies;if(s!==null){a=i.child;for(var u=s.firstContext;u!==null;){if(u.context===n){if(i.tag===1){u=vC(-1,r&-r),u.tag=2;var l=i.updateQueue;if(l!==null){l=l.shared;var c=l.pending;c===null?u.next=u:(u.next=c.next,c.next=u),l.pending=u}}i.lanes|=r,u=i.alternate,u!==null&&(u.lanes|=r),fge(i.return,r,e),s.lanes|=r;break}u=u.next}}else if(i.tag===10)a=i.type===e.type?null:i.child;else if(i.tag===18){if(a=i.return,a===null)throw Error(Be(341));a.lanes|=r,s=a.alternate,s!==null&&(s.lanes|=r),fge(a,r,e),a=i.sibling}else a=i.child;if(a!==null)a.return=i;else for(a=i;a!==null;){if(a===e){a=null;break}if(i=a.sibling,i!==null){i.return=a.return,a=i;break}a=a.return}i=a}Cf(t,e,o.children,r),e=e.child}return e;case 9:return o=e.type,n=e.pendingProps.children,iF(e,r),o=Th(o),n=n(o),e.flags|=1,Cf(t,e,n,r),e.child;case 14:return n=e.type,o=ty(n,e.pendingProps),o=ty(n.type,o),sHe(t,e,n,o,r);case 15:return JVe(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,o=e.pendingProps,o=e.elementType===n?o:ty(n,o),XG(t,e),e.tag=1,bp(n)?(t=!0,fJ(e)):t=!1,iF(e,r),CVe(e,n,o),mge(e,n,o,r),yge(null,e,n,!0,t,r);case 19:return e8e(t,e,r);case 22:return YVe(t,e,r)}throw Error(Be(156,e.tag))};function g8e(t,e){return UHe(t,e)}function gor(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ph(t,e,r,n){return new gor(t,e,r,n)}function mye(t){return t=t.prototype,!(!t||!t.isReactComponent)}function yor(t){if(typeof t=="function")return mye(t)?1:0;if(t!=null){if(t=t.$$typeof,t===jge)return 11;if(t===Nge)return 14}return 2}function BE(t,e){var r=t.alternate;return r===null?(r=Ph(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function tJ(t,e,r,n,o,i){var a=2;if(n=t,typeof t=="function")mye(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case HL:return wR(r.children,o,i,e);case Rge:a=8,o|=8;break;case khe:return t=Ph(12,r,e,o|2),t.elementType=khe,t.lanes=i,t;case $he:return t=Ph(13,r,e,o),t.elementType=$he,t.lanes=i,t;case Bhe:return t=Ph(19,r,e,o),t.elementType=Bhe,t.lanes=i,t;case OHe:return LJ(r,o,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case xHe:a=10;break e;case CHe:a=9;break e;case jge:a=11;break e;case Nge:a=14;break e;case EE:a=16,n=null;break e}throw Error(Be(130,t==null?t:typeof t,""))}return e=Ph(a,r,e,o),e.elementType=t,e.type=n,e.lanes=i,e}function wR(t,e,r,n){return t=Ph(7,t,n,e),t.lanes=r,t}function LJ(t,e,r,n){return t=Ph(22,t,n,e),t.elementType=OHe,t.lanes=r,t.stateNode={isHidden:!1},t}function Dhe(t,e,r){return t=Ph(6,t,null,e),t.lanes=r,t}function Lhe(t,e,r){return e=Ph(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function bor(t,e,r,n,o){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=_he(0),this.expirationTimes=_he(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=_he(0),this.identifierPrefix=n,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function hye(t,e,r,n,o,i,a,s,u){return t=new bor(t,e,r,s,u),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Ph(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Xge(i),t}function _or(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:zL,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function y8e(t){if(!t)return UE;t=t._reactInternals;e:{if(TR(t)!==t||t.tag!==1)throw Error(Be(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(bp(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Be(171))}if(t.tag===1){var r=t.type;if(bp(r))return gVe(t,r,e)}return e}function b8e(t,e,r,n,o,i,a,s,u){return t=hye(r,n,!0,t,o,i,a,s,u),t.context=y8e(null),r=t.current,n=Of(),o=$E(r),i=vC(n,o),i.callback=e??null,FE(r,i,o),t.current.lanes=o,h4(t,o,n),_p(t,n),t}function FJ(t,e,r,n){var o=e.current,i=Of(),a=$E(o);return r=y8e(r),e.context===null?e.context=r:e.pendingContext=r,e=vC(i,a),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=FE(o,e,a),t!==null&&(iy(t,o,a,i),JG(t,o,a)),a}function OJ(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function _He(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function gye(t,e){_He(t,e),(t=t.alternate)&&_He(t,e)}function vor(){return null}var _8e=typeof reportError=="function"?reportError:function(t){console.error(t)};function yye(t){this._internalRoot=t}kJ.prototype.render=yye.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Be(409));FJ(t,e,null,null)};kJ.prototype.unmount=yye.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;PR(function(){FJ(null,t,null,null)}),e[SC]=null}};function kJ(t){this._internalRoot=t}kJ.prototype.unstable_scheduleHydration=function(t){if(t){var e=JHe();t={blockedOn:null,target:t,priority:e};for(var r=0;r<AE.length&&e!==0&&e<AE[r].priority;r++);AE.splice(r,0,t),r===0&&ZHe(t)}};function bye(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function $J(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function vHe(){}function wor(t,e,r,n,o){if(o){if(typeof n=="function"){var i=n;n=function(){var l=OJ(a);i.call(l)}}var a=b8e(e,n,t,0,null,!1,!1,"",vHe);return t._reactRootContainer=a,t[SC]=a.current,a4(t.nodeType===8?t.parentNode:t),PR(),a}for(;o=t.lastChild;)t.removeChild(o);if(typeof n=="function"){var s=n;n=function(){var l=OJ(u);s.call(l)}}var u=hye(t,0,!1,null,null,!1,!1,"",vHe);return t._reactRootContainer=u,t[SC]=u.current,a4(t.nodeType===8?t.parentNode:t),PR(function(){FJ(e,u,r,n)}),u}function BJ(t,e,r,n,o){var i=r._reactRootContainer;if(i){var a=i;if(typeof o=="function"){var s=o;o=function(){var u=OJ(a);s.call(u)}}FJ(e,a,t,o)}else a=wor(r,e,t,o,n);return OJ(a)}KHe=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=q2(e.pendingLanes);r!==0&&(Fge(e,r|1),_p(e,vs()),(co&6)===0&&(pF=vs()+500,VE()))}break;case 13:PR(function(){var n=xC(t,1);if(n!==null){var o=Of();iy(n,t,1,o)}}),gye(t,1)}};kge=function(t){if(t.tag===13){var e=xC(t,134217728);if(e!==null){var r=Of();iy(e,t,134217728,r)}gye(t,134217728)}};GHe=function(t){if(t.tag===13){var e=$E(t),r=xC(t,e);if(r!==null){var n=Of();iy(r,t,e,n)}gye(t,e)}};JHe=function(){return fi};YHe=function(t,e){var r=fi;try{return fi=t,e()}finally{fi=r}};Yhe=function(t,e,r){switch(e){case"input":if(zhe(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var o=IJ(n);if(!o)throw Error(Be(90));EHe(n),zhe(n,o)}}}break;case"textarea":AHe(t,r);break;case"select":e=r.value,e!=null&&tF(t,!!r.multiple,e,!1)}};LHe=dye;FHe=PR;var Sor={usingClientEntryPoint:!1,Events:[y4,GL,IJ,NHe,DHe,dye]},F2={findFiberByHostInstance:yR,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},xor={bundleType:F2.bundleType,version:F2.version,rendererPackageName:F2.rendererPackageName,rendererConfig:F2.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:OC.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=BHe(t),t===null?null:t.stateNode},findFiberByHostInstance:F2.findFiberByHostInstance||vor,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&(k2=__REACT_DEVTOOLS_GLOBAL_HOOK__,!k2.isDisabled&&k2.supportsFiber))try{PJ=k2.inject(xor),Ub=k2}catch{}var k2;mm.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Sor;mm.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!bye(e))throw Error(Be(200));return _or(t,e,null,r)};mm.createRoot=function(t,e){if(!bye(t))throw Error(Be(299));var r=!1,n="",o=_8e;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(o=e.onRecoverableError)),e=hye(t,1,!1,null,null,r,!1,n,o),t[SC]=e.current,a4(t.nodeType===8?t.parentNode:t),new yye(e)};mm.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Be(188)):(t=Object.keys(t).join(","),Error(Be(268,t)));return t=BHe(e),t=t===null?null:t.stateNode,t};mm.flushSync=function(t){return PR(t)};mm.hydrate=function(t,e,r){if(!$J(e))throw Error(Be(200));return BJ(null,t,e,!0,r)};mm.hydrateRoot=function(t,e,r){if(!bye(t))throw Error(Be(405));var n=r!=null&&r.hydratedSources||null,o=!1,i="",a=_8e;if(r!=null&&(r.unstable_strictMode===!0&&(o=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(a=r.onRecoverableError)),e=b8e(e,null,t,1,r??null,o,!1,i,a),t[SC]=e.current,a4(t),n)for(t=0;t<n.length;t++)r=n[t],o=r._getVersion,o=o(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,o]:e.mutableSourceEagerHydrationData.push(r,o);return new kJ(e)};mm.render=function(t,e,r){if(!$J(e))throw Error(Be(200));return BJ(null,t,e,!1,r)};mm.unmountComponentAtNode=function(t){if(!$J(t))throw Error(Be(40));return t._reactRootContainer?(PR(function(){BJ(null,null,t,!1,function(){t._reactRootContainer=null,t[SC]=null})}),!0):!1};mm.unstable_batchedUpdates=dye;mm.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!$J(r))throw Error(Be(200));if(t==null||t._reactInternals===void 0)throw Error(Be(38));return BJ(t,e,r,!1,n)};mm.version="18.2.0-next-9e3b772b8-20220608"});var os=v((IFn,S8e)=>{"use strict";function w8e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(w8e)}catch(t){console.error(t)}}w8e(),S8e.exports=v8e()});var wc=v(_ye=>{"use strict";var x8e=os();_ye.createRoot=x8e.createRoot,_ye.hydrateRoot=x8e.hydrateRoot;var MFn});var E8e=v(qJ=>{"use strict";var Oor=X(),Por=Symbol.for("react.element"),Eor=Symbol.for("react.fragment"),Tor=Object.prototype.hasOwnProperty,Aor=Oor.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Ior={key:!0,ref:!0,__self:!0,__source:!0};function P8e(t,e,r){var n,o={},i=null,a=null;r!==void 0&&(i=""+r),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(a=e.ref);for(n in e)Tor.call(e,n)&&!Ior.hasOwnProperty(n)&&(o[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)o[n]===void 0&&(o[n]=e[n]);return{$$typeof:Por,type:t,key:i,ref:a,props:o,_owner:Aor.current}}qJ.Fragment=Eor;qJ.jsx=P8e;qJ.jsxs=P8e});var ft=v((DFn,T8e)=>{"use strict";T8e.exports=E8e()});var Y8e=v(KJ=>{"use strict";Object.defineProperty(KJ,"__esModule",{value:!0});KJ.V2ChatStreamRequestCitationMode=void 0;KJ.V2ChatStreamRequestCitationMode={Fast:"FAST",Accurate:"ACCURATE",Off:"OFF"}});var Z8e=v(GJ=>{"use strict";Object.defineProperty(GJ,"__esModule",{value:!0});GJ.V2ChatRequestCitationMode=void 0;GJ.V2ChatRequestCitationMode={Fast:"FAST",Accurate:"ACCURATE",Off:"OFF"}});var Q8e=v(X8e=>{"use strict";Object.defineProperty(X8e,"__esModule",{value:!0})});var t6e=v(e6e=>{"use strict";Object.defineProperty(e6e,"__esModule",{value:!0})});var n6e=v(r6e=>{"use strict";Object.defineProperty(r6e,"__esModule",{value:!0})});var i6e=v(o6e=>{"use strict";Object.defineProperty(o6e,"__esModule",{value:!0})});var s6e=v(a6e=>{"use strict";Object.defineProperty(a6e,"__esModule",{value:!0})});var l6e=v(u6e=>{"use strict";Object.defineProperty(u6e,"__esModule",{value:!0})});var d6e=v(c6e=>{"use strict";Object.defineProperty(c6e,"__esModule",{value:!0})});var p6e=v(f6e=>{"use strict";Object.defineProperty(f6e,"__esModule",{value:!0})});var h6e=v(m6e=>{"use strict";Object.defineProperty(m6e,"__esModule",{value:!0})});var y6e=v(g6e=>{"use strict";Object.defineProperty(g6e,"__esModule",{value:!0})});var _6e=v(b6e=>{"use strict";Object.defineProperty(b6e,"__esModule",{value:!0})});var w6e=v(v6e=>{"use strict";Object.defineProperty(v6e,"__esModule",{value:!0})});var x6e=v(S6e=>{"use strict";Object.defineProperty(S6e,"__esModule",{value:!0})});var O6e=v(C6e=>{"use strict";Object.defineProperty(C6e,"__esModule",{value:!0})});var E6e=v(P6e=>{"use strict";Object.defineProperty(P6e,"__esModule",{value:!0})});var A6e=v(T6e=>{"use strict";Object.defineProperty(T6e,"__esModule",{value:!0})});var M6e=v(I6e=>{"use strict";Object.defineProperty(I6e,"__esModule",{value:!0})});var j6e=v(R6e=>{"use strict";Object.defineProperty(R6e,"__esModule",{value:!0})});var D6e=v(N6e=>{"use strict";Object.defineProperty(N6e,"__esModule",{value:!0})});var F6e=v(L6e=>{"use strict";Object.defineProperty(L6e,"__esModule",{value:!0})});var $6e=v(k6e=>{"use strict";Object.defineProperty(k6e,"__esModule",{value:!0})});var q6e=v(B6e=>{"use strict";Object.defineProperty(B6e,"__esModule",{value:!0})});var z6e=v(U6e=>{"use strict";Object.defineProperty(U6e,"__esModule",{value:!0})});var H6e=v(JJ=>{"use strict";Object.defineProperty(JJ,"__esModule",{value:!0});JJ.ChatFinishReason=void 0;JJ.ChatFinishReason={Complete:"complete",StopSequence:"stop_sequence",MaxTokens:"max_tokens",ToolCall:"tool_call",Error:"error",ContentBlocked:"content_blocked",ErrorLimit:"error_limit"}});var W6e=v(V6e=>{"use strict";Object.defineProperty(V6e,"__esModule",{value:!0})});var G6e=v(K6e=>{"use strict";Object.defineProperty(K6e,"__esModule",{value:!0})});var Y6e=v(J6e=>{"use strict";Object.defineProperty(J6e,"__esModule",{value:!0})});var X6e=v(Z6e=>{"use strict";Object.defineProperty(Z6e,"__esModule",{value:!0})});var e5e=v(Q6e=>{"use strict";Object.defineProperty(Q6e,"__esModule",{value:!0})});var r5e=v(t5e=>{"use strict";Object.defineProperty(t5e,"__esModule",{value:!0})});var o5e=v(n5e=>{"use strict";Object.defineProperty(n5e,"__esModule",{value:!0})});var a5e=v(i5e=>{"use strict";Object.defineProperty(i5e,"__esModule",{value:!0})});var u5e=v(s5e=>{"use strict";Object.defineProperty(s5e,"__esModule",{value:!0})});var c5e=v(l5e=>{"use strict";Object.defineProperty(l5e,"__esModule",{value:!0})});var f5e=v(d5e=>{"use strict";Object.defineProperty(d5e,"__esModule",{value:!0})});var m5e=v(p5e=>{"use strict";Object.defineProperty(p5e,"__esModule",{value:!0})});var g5e=v(h5e=>{"use strict";Object.defineProperty(h5e,"__esModule",{value:!0})});var b5e=v(y5e=>{"use strict";Object.defineProperty(y5e,"__esModule",{value:!0})});var v5e=v(_5e=>{"use strict";Object.defineProperty(_5e,"__esModule",{value:!0})});var S5e=v(w5e=>{"use strict";Object.defineProperty(w5e,"__esModule",{value:!0})});var C5e=v(x5e=>{"use strict";Object.defineProperty(x5e,"__esModule",{value:!0})});var P5e=v(O5e=>{"use strict";Object.defineProperty(O5e,"__esModule",{value:!0})});var T5e=v(E5e=>{"use strict";Object.defineProperty(E5e,"__esModule",{value:!0})});var I5e=v(A5e=>{"use strict";Object.defineProperty(A5e,"__esModule",{value:!0})});var R5e=v(M5e=>{"use strict";Object.defineProperty(M5e,"__esModule",{value:!0})});var N5e=v(j5e=>{"use strict";Object.defineProperty(j5e,"__esModule",{value:!0})});var L5e=v(D5e=>{"use strict";Object.defineProperty(D5e,"__esModule",{value:!0})});var k5e=v(F5e=>{"use strict";Object.defineProperty(F5e,"__esModule",{value:!0})});var B5e=v($5e=>{"use strict";Object.defineProperty($5e,"__esModule",{value:!0})});var U5e=v(q5e=>{"use strict";Object.defineProperty(q5e,"__esModule",{value:!0})});var H5e=v(z5e=>{"use strict";Object.defineProperty(z5e,"__esModule",{value:!0})});var W5e=v(V5e=>{"use strict";Object.defineProperty(V5e,"__esModule",{value:!0})});var G5e=v(K5e=>{"use strict";Object.defineProperty(K5e,"__esModule",{value:!0})});var Y5e=v(J5e=>{"use strict";Object.defineProperty(J5e,"__esModule",{value:!0})});var X5e=v(Z5e=>{"use strict";Object.defineProperty(Z5e,"__esModule",{value:!0})});var eWe=v(Q5e=>{"use strict";Object.defineProperty(Q5e,"__esModule",{value:!0})});var rWe=v(tWe=>{"use strict";Object.defineProperty(tWe,"__esModule",{value:!0})});var Cye=v(Tt=>{"use strict";var gir=Tt&&Tt.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),kt=Tt&&Tt.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&gir(e,t,r)};Object.defineProperty(Tt,"__esModule",{value:!0});kt(Y8e(),Tt);kt(Z8e(),Tt);kt(Q8e(),Tt);kt(t6e(),Tt);kt(n6e(),Tt);kt(i6e(),Tt);kt(s6e(),Tt);kt(l6e(),Tt);kt(d6e(),Tt);kt(p6e(),Tt);kt(h6e(),Tt);kt(y6e(),Tt);kt(_6e(),Tt);kt(w6e(),Tt);kt(x6e(),Tt);kt(O6e(),Tt);kt(E6e(),Tt);kt(A6e(),Tt);kt(M6e(),Tt);kt(j6e(),Tt);kt(D6e(),Tt);kt(F6e(),Tt);kt($6e(),Tt);kt(q6e(),Tt);kt(z6e(),Tt);kt(H6e(),Tt);kt(W6e(),Tt);kt(G6e(),Tt);kt(Y6e(),Tt);kt(X6e(),Tt);kt(e5e(),Tt);kt(r5e(),Tt);kt(o5e(),Tt);kt(a5e(),Tt);kt(u5e(),Tt);kt(c5e(),Tt);kt(f5e(),Tt);kt(m5e(),Tt);kt(g5e(),Tt);kt(b5e(),Tt);kt(v5e(),Tt);kt(S5e(),Tt);kt(C5e(),Tt);kt(P5e(),Tt);kt(T5e(),Tt);kt(I5e(),Tt);kt(R5e(),Tt);kt(N5e(),Tt);kt(L5e(),Tt);kt(k5e(),Tt);kt(B5e(),Tt);kt(U5e(),Tt);kt(H5e(),Tt);kt(W5e(),Tt);kt(G5e(),Tt);kt(Y5e(),Tt);kt(X5e(),Tt);kt(eWe(),Tt);kt(rWe(),Tt)});var Oye=v(nWe=>{"use strict";Object.defineProperty(nWe,"__esModule",{value:!0})});var oWe=v(FR=>{"use strict";var yir=FR&&FR.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),bir=FR&&FR.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&yir(e,t,r)};Object.defineProperty(FR,"__esModule",{value:!0});bir(Oye(),FR)});var aWe=v(ZE=>{"use strict";var _ir=ZE&&ZE.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),iWe=ZE&&ZE.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&_ir(e,t,r)};Object.defineProperty(ZE,"__esModule",{value:!0});iWe(Cye(),ZE);iWe(oWe(),ZE)});var sWe=v(YJ=>{"use strict";Object.defineProperty(YJ,"__esModule",{value:!0});YJ.CreateEmbedJobRequestTruncate=void 0;YJ.CreateEmbedJobRequestTruncate={Start:"START",End:"END"}});var Pye=v(kR=>{"use strict";var vir=kR&&kR.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),wir=kR&&kR.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&vir(e,t,r)};Object.defineProperty(kR,"__esModule",{value:!0});wir(sWe(),kR)});var Eye=v(uWe=>{"use strict";Object.defineProperty(uWe,"__esModule",{value:!0})});var lWe=v($R=>{"use strict";var Sir=$R&&$R.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),xir=$R&&$R.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Sir(e,t,r)};Object.defineProperty($R,"__esModule",{value:!0});xir(Eye(),$R)});var dWe=v(XE=>{"use strict";var Cir=XE&&XE.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),cWe=XE&&XE.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Cir(e,t,r)};Object.defineProperty(XE,"__esModule",{value:!0});cWe(Pye(),XE);cWe(lWe(),XE)});var pWe=v(fWe=>{"use strict";Object.defineProperty(fWe,"__esModule",{value:!0})});var hWe=v(mWe=>{"use strict";Object.defineProperty(mWe,"__esModule",{value:!0})});var yWe=v(gWe=>{"use strict";Object.defineProperty(gWe,"__esModule",{value:!0})});var _We=v(bWe=>{"use strict";Object.defineProperty(bWe,"__esModule",{value:!0})});var wWe=v(vWe=>{"use strict";Object.defineProperty(vWe,"__esModule",{value:!0})});var Tye=v(dy=>{"use strict";var Oir=dy&&dy.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),V4=dy&&dy.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Oir(e,t,r)};Object.defineProperty(dy,"__esModule",{value:!0});V4(pWe(),dy);V4(hWe(),dy);V4(yWe(),dy);V4(_We(),dy);V4(wWe(),dy)});var Aye=v(SWe=>{"use strict";Object.defineProperty(SWe,"__esModule",{value:!0})});var xWe=v(BR=>{"use strict";var Pir=BR&&BR.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Eir=BR&&BR.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Pir(e,t,r)};Object.defineProperty(BR,"__esModule",{value:!0});Eir(Aye(),BR)});var OWe=v(QE=>{"use strict";var Tir=QE&&QE.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),CWe=QE&&QE.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Tir(e,t,r)};Object.defineProperty(QE,"__esModule",{value:!0});CWe(Tye(),QE);CWe(xWe(),QE)});var PWe=v(ZJ=>{"use strict";Object.defineProperty(ZJ,"__esModule",{value:!0});ZJ.BaseType=void 0;ZJ.BaseType={BaseTypeUnspecified:"BASE_TYPE_UNSPECIFIED",BaseTypeGenerative:"BASE_TYPE_GENERATIVE",BaseTypeClassification:"BASE_TYPE_CLASSIFICATION",BaseTypeRerank:"BASE_TYPE_RERANK",BaseTypeChat:"BASE_TYPE_CHAT"}});var EWe=v(XJ=>{"use strict";Object.defineProperty(XJ,"__esModule",{value:!0});XJ.Strategy=void 0;XJ.Strategy={StrategyUnspecified:"STRATEGY_UNSPECIFIED",StrategyVanilla:"STRATEGY_VANILLA",StrategyTfew:"STRATEGY_TFEW"}});var AWe=v(TWe=>{"use strict";Object.defineProperty(TWe,"__esModule",{value:!0})});var MWe=v(IWe=>{"use strict";Object.defineProperty(IWe,"__esModule",{value:!0})});var jWe=v(RWe=>{"use strict";Object.defineProperty(RWe,"__esModule",{value:!0})});var DWe=v(NWe=>{"use strict";Object.defineProperty(NWe,"__esModule",{value:!0})});var LWe=v(QJ=>{"use strict";Object.defineProperty(QJ,"__esModule",{value:!0});QJ.Status=void 0;QJ.Status={StatusUnspecified:"STATUS_UNSPECIFIED",StatusFinetuning:"STATUS_FINETUNING",StatusDeployingApi:"STATUS_DEPLOYING_API",StatusReady:"STATUS_READY",StatusFailed:"STATUS_FAILED",StatusDeleted:"STATUS_DELETED",StatusTemporarilyOffline:"STATUS_TEMPORARILY_OFFLINE",StatusPaused:"STATUS_PAUSED",StatusQueued:"STATUS_QUEUED"}});var kWe=v(FWe=>{"use strict";Object.defineProperty(FWe,"__esModule",{value:!0})});var BWe=v($We=>{"use strict";Object.defineProperty($We,"__esModule",{value:!0})});var UWe=v(qWe=>{"use strict";Object.defineProperty(qWe,"__esModule",{value:!0})});var HWe=v(zWe=>{"use strict";Object.defineProperty(zWe,"__esModule",{value:!0})});var WWe=v(VWe=>{"use strict";Object.defineProperty(VWe,"__esModule",{value:!0})});var GWe=v(KWe=>{"use strict";Object.defineProperty(KWe,"__esModule",{value:!0})});var YWe=v(JWe=>{"use strict";Object.defineProperty(JWe,"__esModule",{value:!0})});var XWe=v(ZWe=>{"use strict";Object.defineProperty(ZWe,"__esModule",{value:!0})});var e9e=v(QWe=>{"use strict";Object.defineProperty(QWe,"__esModule",{value:!0})});var r9e=v(t9e=>{"use strict";Object.defineProperty(t9e,"__esModule",{value:!0})});var Iye=v(ja=>{"use strict";var Air=ja&&ja.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Sc=ja&&ja.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Air(e,t,r)};Object.defineProperty(ja,"__esModule",{value:!0});Sc(PWe(),ja);Sc(EWe(),ja);Sc(AWe(),ja);Sc(MWe(),ja);Sc(jWe(),ja);Sc(DWe(),ja);Sc(LWe(),ja);Sc(kWe(),ja);Sc(BWe(),ja);Sc(UWe(),ja);Sc(HWe(),ja);Sc(WWe(),ja);Sc(GWe(),ja);Sc(YWe(),ja);Sc(XWe(),ja);Sc(e9e(),ja);Sc(r9e(),ja)});var n9e=v(qR=>{"use strict";var Iir=qR&&qR.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Mir=qR&&qR.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Iir(e,t,r)};Object.defineProperty(qR,"__esModule",{value:!0});Mir(Iye(),qR)});var i9e=v(_m=>{"use strict";var o9e=_m&&_m.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Rir=_m&&_m.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),jir=_m&&_m.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&o9e(e,t,r);return Rir(e,t),e},Nir=_m&&_m.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&o9e(e,t,r)};Object.defineProperty(_m,"__esModule",{value:!0});_m.finetuning=void 0;_m.finetuning=jir(n9e());Nir(Iye(),_m)});var Mye=v(a9e=>{"use strict";Object.defineProperty(a9e,"__esModule",{value:!0})});var s9e=v(UR=>{"use strict";var Dir=UR&&UR.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Lir=UR&&UR.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Dir(e,t,r)};Object.defineProperty(UR,"__esModule",{value:!0});Lir(Mye(),UR)});var l9e=v(eT=>{"use strict";var Fir=eT&&eT.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),u9e=eT&&eT.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Fir(e,t,r)};Object.defineProperty(eT,"__esModule",{value:!0});u9e(i9e(),eT);u9e(s9e(),eT)});var Rye=v(c9e=>{"use strict";Object.defineProperty(c9e,"__esModule",{value:!0})});var d9e=v(zR=>{"use strict";var kir=zR&&zR.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),$ir=zR&&zR.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&kir(e,t,r)};Object.defineProperty(zR,"__esModule",{value:!0});$ir(Rye(),zR)});var f9e=v(HR=>{"use strict";var Bir=HR&&HR.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),qir=HR&&HR.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Bir(e,t,r)};Object.defineProperty(HR,"__esModule",{value:!0});qir(d9e(),HR)});var jye=v(p9e=>{"use strict";Object.defineProperty(p9e,"__esModule",{value:!0})});var m9e=v(VR=>{"use strict";var Uir=VR&&VR.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),zir=VR&&VR.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Uir(e,t,r)};Object.defineProperty(VR,"__esModule",{value:!0});zir(jye(),VR)});var h9e=v(WR=>{"use strict";var Hir=WR&&WR.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Vir=WR&&WR.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Hir(e,t,r)};Object.defineProperty(WR,"__esModule",{value:!0});Vir(m9e(),WR)});var y9e=v(Jo=>{"use strict";var g9e=Jo&&Jo.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Wir=Jo&&Jo.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),xF=Jo&&Jo.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&g9e(e,t,r);return Wir(e,t),e},DC=Jo&&Jo.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&g9e(e,t,r)};Object.defineProperty(Jo,"__esModule",{value:!0});Jo.models=Jo.connectors=Jo.finetuning=Jo.datasets=Jo.embedJobs=Jo.v2=void 0;Jo.v2=xF(aWe());DC(Cye(),Jo);Jo.embedJobs=xF(dWe());DC(Pye(),Jo);Jo.datasets=xF(OWe());DC(Tye(),Jo);Jo.finetuning=xF(l9e());Jo.connectors=xF(f9e());Jo.models=xF(h9e());DC(Oye(),Jo);DC(Eye(),Jo);DC(Aye(),Jo);DC(Rye(),Jo);DC(jye(),Jo);DC(Mye(),Jo)});var b9e=v(e7=>{"use strict";Object.defineProperty(e7,"__esModule",{value:!0});e7.ChatStreamRequestPromptTruncation=void 0;e7.ChatStreamRequestPromptTruncation={Off:"OFF",Auto:"AUTO",AutoPreserveOrder:"AUTO_PRESERVE_ORDER"}});var _9e=v(t7=>{"use strict";Object.defineProperty(t7,"__esModule",{value:!0});t7.ChatStreamRequestCitationQuality=void 0;t7.ChatStreamRequestCitationQuality={Fast:"fast",Accurate:"accurate",Off:"off"}});var w9e=v(v9e=>{"use strict";Object.defineProperty(v9e,"__esModule",{value:!0})});var S9e=v(r7=>{"use strict";Object.defineProperty(r7,"__esModule",{value:!0});r7.ChatStreamRequestSafetyMode=void 0;r7.ChatStreamRequestSafetyMode={Contextual:"CONTEXTUAL",Strict:"STRICT",None:"NONE"}});var C9e=v(x9e=>{"use strict";Object.defineProperty(x9e,"__esModule",{value:!0})});var P9e=v(O9e=>{"use strict";Object.defineProperty(O9e,"__esModule",{value:!0})});var T9e=v(E9e=>{"use strict";Object.defineProperty(E9e,"__esModule",{value:!0})});var I9e=v(A9e=>{"use strict";Object.defineProperty(A9e,"__esModule",{value:!0})});var R9e=v(M9e=>{"use strict";Object.defineProperty(M9e,"__esModule",{value:!0})});var j9e=v(n7=>{"use strict";Object.defineProperty(n7,"__esModule",{value:!0});n7.ChatRequestPromptTruncation=void 0;n7.ChatRequestPromptTruncation={Off:"OFF",Auto:"AUTO",AutoPreserveOrder:"AUTO_PRESERVE_ORDER"}});var N9e=v(o7=>{"use strict";Object.defineProperty(o7,"__esModule",{value:!0});o7.ChatRequestCitationQuality=void 0;o7.ChatRequestCitationQuality={Fast:"fast",Accurate:"accurate",Off:"off"}});var L9e=v(D9e=>{"use strict";Object.defineProperty(D9e,"__esModule",{value:!0})});var F9e=v(i7=>{"use strict";Object.defineProperty(i7,"__esModule",{value:!0});i7.ChatRequestSafetyMode=void 0;i7.ChatRequestSafetyMode={Contextual:"CONTEXTUAL",Strict:"STRICT",None:"NONE"}});var k9e=v(a7=>{"use strict";Object.defineProperty(a7,"__esModule",{value:!0});a7.GenerateStreamRequestTruncate=void 0;a7.GenerateStreamRequestTruncate={None:"NONE",Start:"START",End:"END"}});var $9e=v(s7=>{"use strict";Object.defineProperty(s7,"__esModule",{value:!0});s7.GenerateStreamRequestReturnLikelihoods=void 0;s7.GenerateStreamRequestReturnLikelihoods={Generation:"GENERATION",All:"ALL",None:"NONE"}});var B9e=v(u7=>{"use strict";Object.defineProperty(u7,"__esModule",{value:!0});u7.GenerateRequestTruncate=void 0;u7.GenerateRequestTruncate={None:"NONE",Start:"START",End:"END"}});var q9e=v(l7=>{"use strict";Object.defineProperty(l7,"__esModule",{value:!0});l7.GenerateRequestReturnLikelihoods=void 0;l7.GenerateRequestReturnLikelihoods={Generation:"GENERATION",All:"ALL",None:"NONE"}});var U9e=v(c7=>{"use strict";Object.defineProperty(c7,"__esModule",{value:!0});c7.EmbedRequestTruncate=void 0;c7.EmbedRequestTruncate={None:"NONE",Start:"START",End:"END"}});var H9e=v(z9e=>{"use strict";Object.defineProperty(z9e,"__esModule",{value:!0})});var W9e=v(V9e=>{"use strict";Object.defineProperty(V9e,"__esModule",{value:!0})});var G9e=v(K9e=>{"use strict";Object.defineProperty(K9e,"__esModule",{value:!0})});var Y9e=v(J9e=>{"use strict";Object.defineProperty(J9e,"__esModule",{value:!0})});var X9e=v(Z9e=>{"use strict";Object.defineProperty(Z9e,"__esModule",{value:!0})});var Q9e=v(d7=>{"use strict";Object.defineProperty(d7,"__esModule",{value:!0});d7.ClassifyRequestTruncate=void 0;d7.ClassifyRequestTruncate={None:"NONE",Start:"START",End:"END"}});var tKe=v(eKe=>{"use strict";Object.defineProperty(eKe,"__esModule",{value:!0})});var rKe=v(f7=>{"use strict";Object.defineProperty(f7,"__esModule",{value:!0});f7.ClassifyResponseClassificationsItemClassificationType=void 0;f7.ClassifyResponseClassificationsItemClassificationType={SingleLabel:"single-label",MultiLabel:"multi-label"}});var oKe=v(nKe=>{"use strict";Object.defineProperty(nKe,"__esModule",{value:!0})});var aKe=v(iKe=>{"use strict";Object.defineProperty(iKe,"__esModule",{value:!0})});var sKe=v(p7=>{"use strict";Object.defineProperty(p7,"__esModule",{value:!0});p7.SummarizeRequestLength=void 0;p7.SummarizeRequestLength={Short:"short",Medium:"medium",Long:"long"}});var uKe=v(m7=>{"use strict";Object.defineProperty(m7,"__esModule",{value:!0});m7.SummarizeRequestFormat=void 0;m7.SummarizeRequestFormat={Paragraph:"paragraph",Bullets:"bullets"}});var lKe=v(h7=>{"use strict";Object.defineProperty(h7,"__esModule",{value:!0});h7.SummarizeRequestExtractiveness=void 0;h7.SummarizeRequestExtractiveness={Low:"low",Medium:"medium",High:"high"}});var dKe=v(cKe=>{"use strict";Object.defineProperty(cKe,"__esModule",{value:!0})});var pKe=v(fKe=>{"use strict";Object.defineProperty(fKe,"__esModule",{value:!0})});var hKe=v(mKe=>{"use strict";Object.defineProperty(mKe,"__esModule",{value:!0})});var yKe=v(gKe=>{"use strict";Object.defineProperty(gKe,"__esModule",{value:!0})});var _Ke=v(bKe=>{"use strict";Object.defineProperty(bKe,"__esModule",{value:!0})});var wKe=v(vKe=>{"use strict";Object.defineProperty(vKe,"__esModule",{value:!0})});var xKe=v(SKe=>{"use strict";Object.defineProperty(SKe,"__esModule",{value:!0})});var OKe=v(CKe=>{"use strict";Object.defineProperty(CKe,"__esModule",{value:!0})});var EKe=v(PKe=>{"use strict";Object.defineProperty(PKe,"__esModule",{value:!0})});var AKe=v(TKe=>{"use strict";Object.defineProperty(TKe,"__esModule",{value:!0})});var MKe=v(IKe=>{"use strict";Object.defineProperty(IKe,"__esModule",{value:!0})});var jKe=v(RKe=>{"use strict";Object.defineProperty(RKe,"__esModule",{value:!0})});var DKe=v(NKe=>{"use strict";Object.defineProperty(NKe,"__esModule",{value:!0})});var FKe=v(LKe=>{"use strict";Object.defineProperty(LKe,"__esModule",{value:!0})});var $Ke=v(kKe=>{"use strict";Object.defineProperty(kKe,"__esModule",{value:!0})});var qKe=v(BKe=>{"use strict";Object.defineProperty(BKe,"__esModule",{value:!0})});var zKe=v(UKe=>{"use strict";Object.defineProperty(UKe,"__esModule",{value:!0})});var VKe=v(HKe=>{"use strict";Object.defineProperty(HKe,"__esModule",{value:!0})});var KKe=v(WKe=>{"use strict";Object.defineProperty(WKe,"__esModule",{value:!0})});var JKe=v(GKe=>{"use strict";Object.defineProperty(GKe,"__esModule",{value:!0})});var YKe=v(g7=>{"use strict";Object.defineProperty(g7,"__esModule",{value:!0});g7.FinishReason=void 0;g7.FinishReason={Complete:"COMPLETE",StopSequence:"STOP_SEQUENCE",Error:"ERROR",ErrorToxic:"ERROR_TOXIC",ErrorLimit:"ERROR_LIMIT",UserCancel:"USER_CANCEL",MaxTokens:"MAX_TOKENS"}});var XKe=v(ZKe=>{"use strict";Object.defineProperty(ZKe,"__esModule",{value:!0})});var eGe=v(QKe=>{"use strict";Object.defineProperty(QKe,"__esModule",{value:!0})});var rGe=v(tGe=>{"use strict";Object.defineProperty(tGe,"__esModule",{value:!0})});var oGe=v(nGe=>{"use strict";Object.defineProperty(nGe,"__esModule",{value:!0})});var aGe=v(iGe=>{"use strict";Object.defineProperty(iGe,"__esModule",{value:!0})});var uGe=v(sGe=>{"use strict";Object.defineProperty(sGe,"__esModule",{value:!0})});var cGe=v(lGe=>{"use strict";Object.defineProperty(lGe,"__esModule",{value:!0})});var fGe=v(dGe=>{"use strict";Object.defineProperty(dGe,"__esModule",{value:!0})});var mGe=v(pGe=>{"use strict";Object.defineProperty(pGe,"__esModule",{value:!0})});var gGe=v(hGe=>{"use strict";Object.defineProperty(hGe,"__esModule",{value:!0})});var bGe=v(yGe=>{"use strict";Object.defineProperty(yGe,"__esModule",{value:!0})});var vGe=v(_Ge=>{"use strict";Object.defineProperty(_Ge,"__esModule",{value:!0})});var wGe=v(y7=>{"use strict";Object.defineProperty(y7,"__esModule",{value:!0});y7.ChatStreamEndEventFinishReason=void 0;y7.ChatStreamEndEventFinishReason={Complete:"COMPLETE",ErrorLimit:"ERROR_LIMIT",MaxTokens:"MAX_TOKENS",Error:"ERROR",ErrorToxic:"ERROR_TOXIC"}});var xGe=v(SGe=>{"use strict";Object.defineProperty(SGe,"__esModule",{value:!0})});var OGe=v(CGe=>{"use strict";Object.defineProperty(CGe,"__esModule",{value:!0})});var EGe=v(PGe=>{"use strict";Object.defineProperty(PGe,"__esModule",{value:!0})});var AGe=v(TGe=>{"use strict";Object.defineProperty(TGe,"__esModule",{value:!0})});var MGe=v(IGe=>{"use strict";Object.defineProperty(IGe,"__esModule",{value:!0})});var jGe=v(RGe=>{"use strict";Object.defineProperty(RGe,"__esModule",{value:!0})});var DGe=v(NGe=>{"use strict";Object.defineProperty(NGe,"__esModule",{value:!0})});var FGe=v(LGe=>{"use strict";Object.defineProperty(LGe,"__esModule",{value:!0})});var $Ge=v(kGe=>{"use strict";Object.defineProperty(kGe,"__esModule",{value:!0})});var qGe=v(BGe=>{"use strict";Object.defineProperty(BGe,"__esModule",{value:!0})});var zGe=v(UGe=>{"use strict";Object.defineProperty(UGe,"__esModule",{value:!0})});var VGe=v(HGe=>{"use strict";Object.defineProperty(HGe,"__esModule",{value:!0})});var KGe=v(WGe=>{"use strict";Object.defineProperty(WGe,"__esModule",{value:!0})});var JGe=v(GGe=>{"use strict";Object.defineProperty(GGe,"__esModule",{value:!0})});var ZGe=v(YGe=>{"use strict";Object.defineProperty(YGe,"__esModule",{value:!0})});var QGe=v(XGe=>{"use strict";Object.defineProperty(XGe,"__esModule",{value:!0})});var tJe=v(eJe=>{"use strict";Object.defineProperty(eJe,"__esModule",{value:!0})});var nJe=v(rJe=>{"use strict";Object.defineProperty(rJe,"__esModule",{value:!0})});var iJe=v(oJe=>{"use strict";Object.defineProperty(oJe,"__esModule",{value:!0})});var sJe=v(aJe=>{"use strict";Object.defineProperty(aJe,"__esModule",{value:!0})});var uJe=v(b7=>{"use strict";Object.defineProperty(b7,"__esModule",{value:!0});b7.EmbedInputType=void 0;b7.EmbedInputType={SearchDocument:"search_document",SearchQuery:"search_query",Classification:"classification",Clustering:"clustering"}});var lJe=v(_7=>{"use strict";Object.defineProperty(_7,"__esModule",{value:!0});_7.EmbeddingType=void 0;_7.EmbeddingType={Float:"float",Int8:"int8",Uint8:"uint8",Binary:"binary",Ubinary:"ubinary"}});var dJe=v(cJe=>{"use strict";Object.defineProperty(cJe,"__esModule",{value:!0})});var pJe=v(fJe=>{"use strict";Object.defineProperty(fJe,"__esModule",{value:!0})});var hJe=v(mJe=>{"use strict";Object.defineProperty(mJe,"__esModule",{value:!0})});var gJe=v(v7=>{"use strict";Object.defineProperty(v7,"__esModule",{value:!0});v7.EmbedJobStatus=void 0;v7.EmbedJobStatus={Processing:"processing",Complete:"complete",Cancelling:"cancelling",Cancelled:"cancelled",Failed:"failed"}});var yJe=v(w7=>{"use strict";Object.defineProperty(w7,"__esModule",{value:!0});w7.EmbedJobTruncate=void 0;w7.EmbedJobTruncate={Start:"START",End:"END"}});var _Je=v(bJe=>{"use strict";Object.defineProperty(bJe,"__esModule",{value:!0})});var wJe=v(vJe=>{"use strict";Object.defineProperty(vJe,"__esModule",{value:!0})});var xJe=v(SJe=>{"use strict";Object.defineProperty(SJe,"__esModule",{value:!0})});var OJe=v(CJe=>{"use strict";Object.defineProperty(CJe,"__esModule",{value:!0})});var EJe=v(PJe=>{"use strict";Object.defineProperty(PJe,"__esModule",{value:!0})});var TJe=v(S7=>{"use strict";Object.defineProperty(S7,"__esModule",{value:!0});S7.DatasetValidationStatus=void 0;S7.DatasetValidationStatus={Unknown:"unknown",Queued:"queued",Processing:"processing",Failed:"failed",Validated:"validated",Skipped:"skipped"}});var AJe=v(x7=>{"use strict";Object.defineProperty(x7,"__esModule",{value:!0});x7.DatasetType=void 0;x7.DatasetType={EmbedInput:"embed-input",EmbedResult:"embed-result",ClusterResult:"cluster-result",ClusterOutliers:"cluster-outliers",RerankerFinetuneInput:"reranker-finetune-input",SingleLabelClassificationFinetuneInput:"single-label-classification-finetune-input",ChatFinetuneInput:"chat-finetune-input",MultiLabelClassificationFinetuneInput:"multi-label-classification-finetune-input"}});var MJe=v(IJe=>{"use strict";Object.defineProperty(IJe,"__esModule",{value:!0})});var jJe=v(RJe=>{"use strict";Object.defineProperty(RJe,"__esModule",{value:!0})});var DJe=v(NJe=>{"use strict";Object.defineProperty(NJe,"__esModule",{value:!0})});var FJe=v(LJe=>{"use strict";Object.defineProperty(LJe,"__esModule",{value:!0})});var $Je=v(kJe=>{"use strict";Object.defineProperty(kJe,"__esModule",{value:!0})});var qJe=v(BJe=>{"use strict";Object.defineProperty(BJe,"__esModule",{value:!0})});var zJe=v(UJe=>{"use strict";Object.defineProperty(UJe,"__esModule",{value:!0})});var VJe=v(HJe=>{"use strict";Object.defineProperty(HJe,"__esModule",{value:!0})});var KJe=v(WJe=>{"use strict";Object.defineProperty(WJe,"__esModule",{value:!0})});var JJe=v(GJe=>{"use strict";Object.defineProperty(GJe,"__esModule",{value:!0})});var ZJe=v(YJe=>{"use strict";Object.defineProperty(YJe,"__esModule",{value:!0})});var QJe=v(XJe=>{"use strict";Object.defineProperty(XJe,"__esModule",{value:!0})});var e7e=v(C7=>{"use strict";Object.defineProperty(C7,"__esModule",{value:!0});C7.ConnectorAuthStatus=void 0;C7.ConnectorAuthStatus={Valid:"valid",Expired:"expired"}});var r7e=v(t7e=>{"use strict";Object.defineProperty(t7e,"__esModule",{value:!0})});var o7e=v(n7e=>{"use strict";Object.defineProperty(n7e,"__esModule",{value:!0})});var a7e=v(i7e=>{"use strict";Object.defineProperty(i7e,"__esModule",{value:!0})});var s7e=v(O7=>{"use strict";Object.defineProperty(O7,"__esModule",{value:!0});O7.AuthTokenType=void 0;O7.AuthTokenType={Bearer:"bearer",Basic:"basic",Noscheme:"noscheme"}});var l7e=v(u7e=>{"use strict";Object.defineProperty(u7e,"__esModule",{value:!0})});var d7e=v(c7e=>{"use strict";Object.defineProperty(c7e,"__esModule",{value:!0})});var p7e=v(f7e=>{"use strict";Object.defineProperty(f7e,"__esModule",{value:!0})});var h7e=v(m7e=>{"use strict";Object.defineProperty(m7e,"__esModule",{value:!0})});var y7e=v(g7e=>{"use strict";Object.defineProperty(g7e,"__esModule",{value:!0})});var _7e=v(b7e=>{"use strict";Object.defineProperty(b7e,"__esModule",{value:!0})});var v7e=v(P7=>{"use strict";Object.defineProperty(P7,"__esModule",{value:!0});P7.CompatibleEndpoint=void 0;P7.CompatibleEndpoint={Chat:"chat",Embed:"embed",Classify:"classify",Summarize:"summarize",Rerank:"rerank",Rate:"rate",Generate:"generate"}});var S7e=v(w7e=>{"use strict";Object.defineProperty(w7e,"__esModule",{value:!0})});var C7e=v(x7e=>{"use strict";Object.defineProperty(x7e,"__esModule",{value:!0})});var O7e=v(pe=>{"use strict";var Kir=pe&&pe.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),xe=pe&&pe.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Kir(e,t,r)};Object.defineProperty(pe,"__esModule",{value:!0});xe(b9e(),pe);xe(_9e(),pe);xe(w9e(),pe);xe(S9e(),pe);xe(C9e(),pe);xe(P9e(),pe);xe(T9e(),pe);xe(I9e(),pe);xe(R9e(),pe);xe(j9e(),pe);xe(N9e(),pe);xe(L9e(),pe);xe(F9e(),pe);xe(k9e(),pe);xe($9e(),pe);xe(B9e(),pe);xe(q9e(),pe);xe(U9e(),pe);xe(H9e(),pe);xe(W9e(),pe);xe(G9e(),pe);xe(Y9e(),pe);xe(X9e(),pe);xe(Q9e(),pe);xe(tKe(),pe);xe(rKe(),pe);xe(oKe(),pe);xe(aKe(),pe);xe(sKe(),pe);xe(uKe(),pe);xe(lKe(),pe);xe(dKe(),pe);xe(pKe(),pe);xe(hKe(),pe);xe(yKe(),pe);xe(_Ke(),pe);xe(wKe(),pe);xe(xKe(),pe);xe(OKe(),pe);xe(EKe(),pe);xe(AKe(),pe);xe(MKe(),pe);xe(jKe(),pe);xe(DKe(),pe);xe(FKe(),pe);xe($Ke(),pe);xe(qKe(),pe);xe(zKe(),pe);xe(VKe(),pe);xe(KKe(),pe);xe(JKe(),pe);xe(YKe(),pe);xe(XKe(),pe);xe(eGe(),pe);xe(rGe(),pe);xe(oGe(),pe);xe(aGe(),pe);xe(uGe(),pe);xe(cGe(),pe);xe(fGe(),pe);xe(mGe(),pe);xe(gGe(),pe);xe(bGe(),pe);xe(vGe(),pe);xe(wGe(),pe);xe(xGe(),pe);xe(OGe(),pe);xe(EGe(),pe);xe(AGe(),pe);xe(MGe(),pe);xe(jGe(),pe);xe(DGe(),pe);xe(FGe(),pe);xe($Ge(),pe);xe(qGe(),pe);xe(zGe(),pe);xe(VGe(),pe);xe(KGe(),pe);xe(JGe(),pe);xe(ZGe(),pe);xe(QGe(),pe);xe(tJe(),pe);xe(nJe(),pe);xe(iJe(),pe);xe(sJe(),pe);xe(uJe(),pe);xe(lJe(),pe);xe(dJe(),pe);xe(pJe(),pe);xe(hJe(),pe);xe(gJe(),pe);xe(yJe(),pe);xe(_Je(),pe);xe(wJe(),pe);xe(xJe(),pe);xe(OJe(),pe);xe(EJe(),pe);xe(TJe(),pe);xe(AJe(),pe);xe(MJe(),pe);xe(jJe(),pe);xe(DJe(),pe);xe(FJe(),pe);xe($Je(),pe);xe(qJe(),pe);xe(zJe(),pe);xe(VJe(),pe);xe(KJe(),pe);xe(JJe(),pe);xe(ZJe(),pe);xe(QJe(),pe);xe(e7e(),pe);xe(r7e(),pe);xe(o7e(),pe);xe(a7e(),pe);xe(s7e(),pe);xe(l7e(),pe);xe(d7e(),pe);xe(p7e(),pe);xe(h7e(),pe);xe(y7e(),pe);xe(_7e(),pe);xe(v7e(),pe);xe(S7e(),pe);xe(C7e(),pe)});var P7e=v(E7=>{"use strict";Object.defineProperty(E7,"__esModule",{value:!0});E7.CohereError=void 0;var Nye=class t extends Error{constructor({message:e,statusCode:r,body:n}){super(Gir({message:e,statusCode:r,body:n})),Object.setPrototypeOf(this,t.prototype),r!=null&&(this.statusCode=r),n!==void 0&&(this.body=n)}};E7.CohereError=Nye;function Gir({message:t,statusCode:e,body:r}){let n=[];return t!=null&&n.push(t),e!=null&&n.push(`Status code: ${e.toString()}`),r!=null&&n.push(`Body: ${JSON.stringify(r,void 0,2)}`),n.join(`
`)}});var E7e=v(T7=>{"use strict";Object.defineProperty(T7,"__esModule",{value:!0});T7.CohereTimeoutError=void 0;var Dye=class t extends Error{constructor(){super("Timeout"),Object.setPrototypeOf(this,t.prototype)}};T7.CohereTimeoutError=Dye});var ws=v(CF=>{"use strict";Object.defineProperty(CF,"__esModule",{value:!0});CF.CohereTimeoutError=CF.CohereError=void 0;var Jir=P7e();Object.defineProperty(CF,"CohereError",{enumerable:!0,get:function(){return Jir.CohereError}});var Yir=E7e();Object.defineProperty(CF,"CohereTimeoutError",{enumerable:!0,get:function(){return Yir.CohereTimeoutError}})});var T7e=v(Yb=>{"use strict";var Zir=Yb&&Yb.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Xir=Yb&&Yb.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Qir=Yb&&Yb.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&Zir(e,t,r);return Xir(e,t),e};Object.defineProperty(Yb,"__esModule",{value:!0});Yb.BadRequestError=void 0;var ear=Qir(ws()),Lye=class t extends ear.CohereError{constructor(e){super({message:"BadRequestError",statusCode:400,body:e}),Object.setPrototypeOf(this,t.prototype)}};Yb.BadRequestError=Lye});var A7e=v(Zb=>{"use strict";var tar=Zb&&Zb.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),rar=Zb&&Zb.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),nar=Zb&&Zb.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&tar(e,t,r);return rar(e,t),e};Object.defineProperty(Zb,"__esModule",{value:!0});Zb.UnauthorizedError=void 0;var oar=nar(ws()),Fye=class t extends oar.CohereError{constructor(e){super({message:"UnauthorizedError",statusCode:401,body:e}),Object.setPrototypeOf(this,t.prototype)}};Zb.UnauthorizedError=Fye});var I7e=v(Xb=>{"use strict";var iar=Xb&&Xb.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),aar=Xb&&Xb.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),sar=Xb&&Xb.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&iar(e,t,r);return aar(e,t),e};Object.defineProperty(Xb,"__esModule",{value:!0});Xb.ForbiddenError=void 0;var uar=sar(ws()),kye=class t extends uar.CohereError{constructor(e){super({message:"ForbiddenError",statusCode:403,body:e}),Object.setPrototypeOf(this,t.prototype)}};Xb.ForbiddenError=kye});var M7e=v(Qb=>{"use strict";var lar=Qb&&Qb.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),car=Qb&&Qb.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),dar=Qb&&Qb.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&lar(e,t,r);return car(e,t),e};Object.defineProperty(Qb,"__esModule",{value:!0});Qb.NotFoundError=void 0;var far=dar(ws()),$ye=class t extends far.CohereError{constructor(e){super({message:"NotFoundError",statusCode:404,body:e}),Object.setPrototypeOf(this,t.prototype)}};Qb.NotFoundError=$ye});var R7e=v(e_=>{"use strict";var par=e_&&e_.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),mar=e_&&e_.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),har=e_&&e_.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&par(e,t,r);return mar(e,t),e};Object.defineProperty(e_,"__esModule",{value:!0});e_.UnprocessableEntityError=void 0;var gar=har(ws()),Bye=class t extends gar.CohereError{constructor(e){super({message:"UnprocessableEntityError",statusCode:422,body:e}),Object.setPrototypeOf(this,t.prototype)}};e_.UnprocessableEntityError=Bye});var j7e=v(t_=>{"use strict";var yar=t_&&t_.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),bar=t_&&t_.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),_ar=t_&&t_.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&yar(e,t,r);return bar(e,t),e};Object.defineProperty(t_,"__esModule",{value:!0});t_.TooManyRequestsError=void 0;var war=_ar(ws()),qye=class t extends war.CohereError{constructor(e){super({message:"TooManyRequestsError",statusCode:429,body:e}),Object.setPrototypeOf(this,t.prototype)}};t_.TooManyRequestsError=qye});var N7e=v(r_=>{"use strict";var Sar=r_&&r_.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),xar=r_&&r_.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Car=r_&&r_.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&Sar(e,t,r);return xar(e,t),e};Object.defineProperty(r_,"__esModule",{value:!0});r_.ClientClosedRequestError=void 0;var Oar=Car(ws()),Uye=class t extends Oar.CohereError{constructor(e){super({message:"ClientClosedRequestError",statusCode:499,body:e}),Object.setPrototypeOf(this,t.prototype)}};r_.ClientClosedRequestError=Uye});var D7e=v(n_=>{"use strict";var Par=n_&&n_.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Ear=n_&&n_.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Tar=n_&&n_.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&Par(e,t,r);return Ear(e,t),e};Object.defineProperty(n_,"__esModule",{value:!0});n_.InternalServerError=void 0;var Aar=Tar(ws()),zye=class t extends Aar.CohereError{constructor(e){super({message:"InternalServerError",statusCode:500,body:e}),Object.setPrototypeOf(this,t.prototype)}};n_.InternalServerError=zye});var L7e=v(o_=>{"use strict";var Iar=o_&&o_.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Mar=o_&&o_.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Rar=o_&&o_.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&Iar(e,t,r);return Mar(e,t),e};Object.defineProperty(o_,"__esModule",{value:!0});o_.NotImplementedError=void 0;var jar=Rar(ws()),Hye=class t extends jar.CohereError{constructor(e){super({message:"NotImplementedError",statusCode:501,body:e}),Object.setPrototypeOf(this,t.prototype)}};o_.NotImplementedError=Hye});var F7e=v(i_=>{"use strict";var Nar=i_&&i_.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Dar=i_&&i_.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Lar=i_&&i_.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&Nar(e,t,r);return Dar(e,t),e};Object.defineProperty(i_,"__esModule",{value:!0});i_.ServiceUnavailableError=void 0;var Far=Lar(ws()),Vye=class t extends Far.CohereError{constructor(e){super({message:"ServiceUnavailableError",statusCode:503,body:e}),Object.setPrototypeOf(this,t.prototype)}};i_.ServiceUnavailableError=Vye});var k7e=v(a_=>{"use strict";var kar=a_&&a_.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),$ar=a_&&a_.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Bar=a_&&a_.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&kar(e,t,r);return $ar(e,t),e};Object.defineProperty(a_,"__esModule",{value:!0});a_.GatewayTimeoutError=void 0;var qar=Bar(ws()),Wye=class t extends qar.CohereError{constructor(e){super({message:"GatewayTimeoutError",statusCode:504,body:e}),Object.setPrototypeOf(this,t.prototype)}};a_.GatewayTimeoutError=Wye});var $7e=v(xc=>{"use strict";var Uar=xc&&xc.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),fy=xc&&xc.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Uar(e,t,r)};Object.defineProperty(xc,"__esModule",{value:!0});fy(T7e(),xc);fy(A7e(),xc);fy(I7e(),xc);fy(M7e(),xc);fy(R7e(),xc);fy(j7e(),xc);fy(N7e(),xc);fy(D7e(),xc);fy(L7e(),xc);fy(F7e(),xc);fy(k7e(),xc)});var q7e=v(B7e=>{"use strict";Object.defineProperty(B7e,"__esModule",{value:!0})});var U7e=v(KR=>{"use strict";var zar=KR&&KR.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Har=KR&&KR.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&zar(e,t,r)};Object.defineProperty(KR,"__esModule",{value:!0});Har(q7e(),KR)});var LC=v(s_=>{"use strict";var Var=s_&&s_.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),A7=s_&&s_.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Var(e,t,r)};Object.defineProperty(s_,"__esModule",{value:!0});A7(y9e(),s_);A7(O7e(),s_);A7($7e(),s_);A7(U7e(),s_)});var Jye={};Zf(Jye,{__addDisposableResource:()=>lYe,__assign:()=>I7,__asyncDelegator:()=>tYe,__asyncGenerator:()=>eYe,__asyncValues:()=>rYe,__await:()=>OF,__awaiter:()=>G7e,__classPrivateFieldGet:()=>aYe,__classPrivateFieldIn:()=>uYe,__classPrivateFieldSet:()=>sYe,__createBinding:()=>R7,__decorate:()=>V7e,__disposeResources:()=>cYe,__esDecorate:()=>War,__exportStar:()=>Y7e,__extends:()=>z7e,__generator:()=>J7e,__importDefault:()=>iYe,__importStar:()=>oYe,__makeTemplateObject:()=>nYe,__metadata:()=>K7e,__param:()=>W7e,__propKey:()=>Gar,__read:()=>Gye,__rest:()=>H7e,__runInitializers:()=>Kar,__setFunctionName:()=>Jar,__spread:()=>Z7e,__spreadArray:()=>Q7e,__spreadArrays:()=>X7e,__values:()=>M7,default:()=>Xar});function z7e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Kye(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}function H7e(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,n=Object.getOwnPropertySymbols(t);o<n.length;o++)e.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(t,n[o])&&(r[n[o]]=t[n[o]]);return r}function V7e(t,e,r,n){var o=arguments.length,i=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(i=(o<3?a(i):o>3?a(e,r,i):a(e,r))||i);return o>3&&i&&Object.defineProperty(e,r,i),i}function W7e(t,e){return function(r,n){e(r,n,t)}}function War(t,e,r,n,o,i){function a(g){if(g!==void 0&&typeof g!="function")throw new TypeError("Function expected");return g}for(var s=n.kind,u=s==="getter"?"get":s==="setter"?"set":"value",l=!e&&t?n.static?t:t.prototype:null,c=e||(l?Object.getOwnPropertyDescriptor(l,n.name):{}),d,f=!1,p=r.length-1;p>=0;p--){var m={};for(var h in n)m[h]=h==="access"?{}:n[h];for(var h in n.access)m.access[h]=n.access[h];m.addInitializer=function(g){if(f)throw new TypeError("Cannot add initializers after decoration has completed");i.push(a(g||null))};var b=(0,r[p])(s==="accessor"?{get:c.get,set:c.set}:c[u],m);if(s==="accessor"){if(b===void 0)continue;if(b===null||typeof b!="object")throw new TypeError("Object expected");(d=a(b.get))&&(c.get=d),(d=a(b.set))&&(c.set=d),(d=a(b.init))&&o.unshift(d)}else(d=a(b))&&(s==="field"?o.unshift(d):c[u]=d)}l&&Object.defineProperty(l,n.name,c),f=!0}function Kar(t,e,r){for(var n=arguments.length>2,o=0;o<e.length;o++)r=n?e[o].call(t,r):e[o].call(t);return n?r:void 0}function Gar(t){return typeof t=="symbol"?t:"".concat(t)}function Jar(t,e,r){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(t,"name",{configurable:!0,value:r?"".concat(r," ",e):e})}function K7e(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function G7e(t,e,r,n){function o(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function s(c){try{l(n.next(c))}catch(d){a(d)}}function u(c){try{l(n.throw(c))}catch(d){a(d)}}function l(c){c.done?i(c.value):o(c.value).then(s,u)}l((n=n.apply(t,e||[])).next())})}function J7e(t,e){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(l){return function(c){return u([l,c])}}function u(l){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,l[0]&&(r=0)),r;)try{if(n=1,o&&(i=l[0]&2?o.return:l[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,l[1])).done)return i;switch(o=0,i&&(l=[l[0]&2,i.value]),l[0]){case 0:case 1:i=l;break;case 4:return r.label++,{value:l[1],done:!1};case 5:r.label++,o=l[1],l=[0];continue;case 7:l=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(l[0]===6||l[0]===2)){r=0;continue}if(l[0]===3&&(!i||l[1]>i[0]&&l[1]<i[3])){r.label=l[1];break}if(l[0]===6&&r.label<i[1]){r.label=i[1],i=l;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(l);break}i[2]&&r.ops.pop(),r.trys.pop();continue}l=e.call(t,r)}catch(c){l=[6,c],o=0}finally{n=i=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function Y7e(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&R7(e,t,r)}function M7(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Gye(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),o,i=[],a;try{for(;(e===void 0||e-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return i}function Z7e(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(Gye(arguments[e]));return t}function X7e(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),o=0,e=0;e<r;e++)for(var i=arguments[e],a=0,s=i.length;a<s;a++,o++)n[o]=i[a];return n}function Q7e(t,e,r){if(r||arguments.length===2)for(var n=0,o=e.length,i;n<o;n++)(i||!(n in e))&&(i||(i=Array.prototype.slice.call(e,0,n)),i[n]=e[n]);return t.concat(i||Array.prototype.slice.call(e))}function OF(t){return this instanceof OF?(this.v=t,this):new OF(t)}function eYe(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),o,i=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),s("next"),s("throw"),s("return",a),o[Symbol.asyncIterator]=function(){return this},o;function a(p){return function(m){return Promise.resolve(m).then(p,d)}}function s(p,m){n[p]&&(o[p]=function(h){return new Promise(function(b,g){i.push([p,h,b,g])>1||u(p,h)})},m&&(o[p]=m(o[p])))}function u(p,m){try{l(n[p](m))}catch(h){f(i[0][3],h)}}function l(p){p.value instanceof OF?Promise.resolve(p.value.v).then(c,d):f(i[0][2],p)}function c(p){u("next",p)}function d(p){u("throw",p)}function f(p,m){p(m),i.shift(),i.length&&u(i[0][0],i[0][1])}}function tYe(t){var e,r;return e={},n("next"),n("throw",function(o){throw o}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(o,i){e[o]=t[o]?function(a){return(r=!r)?{value:OF(t[o](a)),done:!1}:i?i(a):a}:i}}function rYe(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof M7=="function"?M7(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(i){r[i]=t[i]&&function(a){return new Promise(function(s,u){a=t[i](a),o(s,u,a.done,a.value)})}}function o(i,a,s,u){Promise.resolve(u).then(function(l){i({value:l,done:s})},a)}}function nYe(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function oYe(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&R7(e,t,r);return Yar(e,t),e}function iYe(t){return t&&t.__esModule?t:{default:t}}function aYe(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)}function sYe(t,e,r,n,o){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!o:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?o.call(t,r):o?o.value=r:e.set(t,r),r}function uYe(t,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof t=="function"?e===t:t.has(e)}function lYe(t,e,r){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var n,o;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=e[Symbol.asyncDispose]}if(n===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=e[Symbol.dispose],r&&(o=n)}if(typeof n!="function")throw new TypeError("Object not disposable.");o&&(n=function(){try{o.call(this)}catch(i){return Promise.reject(i)}}),t.stack.push({value:e,dispose:n,async:r})}else r&&t.stack.push({async:!0});return e}function cYe(t){function e(i){t.error=t.hasError?new Zar(i,t.error,"An error was suppressed during disposal."):i,t.hasError=!0}var r,n=0;function o(){for(;r=t.stack.pop();)try{if(!r.async&&n===1)return n=0,t.stack.push(r),Promise.resolve().then(o);if(r.dispose){var i=r.dispose.call(r.value);if(r.async)return n|=2,Promise.resolve(i).then(o,function(a){return e(a),o()})}else n|=1}catch(a){e(a)}if(n===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return o()}var Kye,I7,R7,Yar,Zar,Xar,Yye=O(()=>{Kye=function(t,e){return Kye=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])},Kye(t,e)};I7=function(){return I7=Object.assign||function(e){for(var r,n=1,o=arguments.length;n<o;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},I7.apply(this,arguments)};R7=Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]};Yar=Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e};Zar=typeof SuppressedError=="function"?SuppressedError:function(t,e,r){var n=new Error(r);return n.name="SuppressedError",n.error=t,n.suppressed=e,n};Xar={__extends:z7e,__assign:I7,__rest:H7e,__decorate:V7e,__param:W7e,__metadata:K7e,__awaiter:G7e,__generator:J7e,__createBinding:R7,__exportStar:Y7e,__values:M7,__read:Gye,__spread:Z7e,__spreadArrays:X7e,__spreadArray:Q7e,__await:OF,__asyncGenerator:eYe,__asyncDelegator:tYe,__asyncValues:rYe,__makeTemplateObject:nYe,__importStar:oYe,__importDefault:iYe,__classPrivateFieldGet:aYe,__classPrivateFieldSet:sYe,__classPrivateFieldIn:uYe,__addDisposableResource:lYe,__disposeResources:cYe}});var Zye=v(Mh=>{"use strict";Object.defineProperty(Mh,"__esModule",{value:!0});Mh.MAX_HASHABLE_LENGTH=Mh.INIT=Mh.KEY=Mh.DIGEST_LENGTH=Mh.BLOCK_SIZE=void 0;Mh.BLOCK_SIZE=64;Mh.DIGEST_LENGTH=32;Mh.KEY=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);Mh.INIT=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];Mh.MAX_HASHABLE_LENGTH=Math.pow(2,53)-1});var dYe=v(j7=>{"use strict";Object.defineProperty(j7,"__esModule",{value:!0});j7.RawSha256=void 0;var Rh=Zye(),Qar=function(){function t(){this.state=Int32Array.from(Rh.INIT),this.temp=new Int32Array(64),this.buffer=new Uint8Array(64),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}return t.prototype.update=function(e){if(this.finished)throw new Error("Attempted to update an already finished hash.");var r=0,n=e.byteLength;if(this.bytesHashed+=n,this.bytesHashed*8>Rh.MAX_HASHABLE_LENGTH)throw new Error("Cannot hash more than 2^53 - 1 bits");for(;n>0;)this.buffer[this.bufferLength++]=e[r++],n--,this.bufferLength===Rh.BLOCK_SIZE&&(this.hashBuffer(),this.bufferLength=0)},t.prototype.digest=function(){if(!this.finished){var e=this.bytesHashed*8,r=new DataView(this.buffer.buffer,this.buffer.byteOffset,this.buffer.byteLength),n=this.bufferLength;if(r.setUint8(this.bufferLength++,128),n%Rh.BLOCK_SIZE>=Rh.BLOCK_SIZE-8){for(var o=this.bufferLength;o<Rh.BLOCK_SIZE;o++)r.setUint8(o,0);this.hashBuffer(),this.bufferLength=0}for(var o=this.bufferLength;o<Rh.BLOCK_SIZE-8;o++)r.setUint8(o,0);r.setUint32(Rh.BLOCK_SIZE-8,Math.floor(e/4294967296),!0),r.setUint32(Rh.BLOCK_SIZE-4,e),this.hashBuffer(),this.finished=!0}for(var i=new Uint8Array(Rh.DIGEST_LENGTH),o=0;o<8;o++)i[o*4]=this.state[o]>>>24&255,i[o*4+1]=this.state[o]>>>16&255,i[o*4+2]=this.state[o]>>>8&255,i[o*4+3]=this.state[o]>>>0&255;return i},t.prototype.hashBuffer=function(){for(var e=this,r=e.buffer,n=e.state,o=n[0],i=n[1],a=n[2],s=n[3],u=n[4],l=n[5],c=n[6],d=n[7],f=0;f<Rh.BLOCK_SIZE;f++){if(f<16)this.temp[f]=(r[f*4]&255)<<24|(r[f*4+1]&255)<<16|(r[f*4+2]&255)<<8|r[f*4+3]&255;else{var p=this.temp[f-2],m=(p>>>17|p<<15)^(p>>>19|p<<13)^p>>>10;p=this.temp[f-15];var h=(p>>>7|p<<25)^(p>>>18|p<<14)^p>>>3;this.temp[f]=(m+this.temp[f-7]|0)+(h+this.temp[f-16]|0)}var b=(((u>>>6|u<<26)^(u>>>11|u<<21)^(u>>>25|u<<7))+(u&l^~u&c)|0)+(d+(Rh.KEY[f]+this.temp[f]|0)|0)|0,g=((o>>>2|o<<30)^(o>>>13|o<<19)^(o>>>22|o<<10))+(o&i^o&a^i&a)|0;d=c,c=l,l=u,u=s+b|0,s=a,a=i,i=o,o=b+g|0}n[0]+=o,n[1]+=i,n[2]+=a,n[3]+=s,n[4]+=u,n[5]+=l,n[6]+=c,n[7]+=d},t}();j7.RawSha256=Qar});var mYe=v((S3n,pYe)=>{var N7=Object.defineProperty,esr=Object.getOwnPropertyDescriptor,tsr=Object.getOwnPropertyNames,rsr=Object.prototype.hasOwnProperty,nsr=(t,e)=>N7(t,"name",{value:e,configurable:!0}),osr=(t,e)=>{for(var r in e)N7(t,r,{get:e[r],enumerable:!0})},isr=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of tsr(e))!rsr.call(t,o)&&o!==r&&N7(t,o,{get:()=>e[o],enumerable:!(n=esr(e,o))||n.enumerable});return t},asr=t=>isr(N7({},"__esModule",{value:!0}),t),fYe={};osr(fYe,{isArrayBuffer:()=>ssr});pYe.exports=asr(fYe);var ssr=nsr(t=>typeof ArrayBuffer=="function"&&t instanceof ArrayBuffer||Object.prototype.toString.call(t)==="[object ArrayBuffer]","isArrayBuffer")});var bYe=v((x3n,yYe)=>{var D7=Object.defineProperty,usr=Object.getOwnPropertyDescriptor,lsr=Object.getOwnPropertyNames,csr=Object.prototype.hasOwnProperty,hYe=(t,e)=>D7(t,"name",{value:e,configurable:!0}),dsr=(t,e)=>{for(var r in e)D7(t,r,{get:e[r],enumerable:!0})},fsr=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of lsr(e))!csr.call(t,o)&&o!==r&&D7(t,o,{get:()=>e[o],enumerable:!(n=usr(e,o))||n.enumerable});return t},psr=t=>fsr(D7({},"__esModule",{value:!0}),t),gYe={};dsr(gYe,{fromArrayBuffer:()=>hsr,fromString:()=>gsr});yYe.exports=psr(gYe);var msr=mYe(),Xye=mp(),hsr=hYe((t,e=0,r=t.byteLength-e)=>{if(!(0,msr.isArrayBuffer)(t))throw new TypeError(`The "input" argument must be ArrayBuffer. Received type ${typeof t} (${t})`);return Xye.Buffer.from(t,e,r)},"fromArrayBuffer"),gsr=hYe((t,e)=>{if(typeof t!="string")throw new TypeError(`The "input" argument must be of type string. Received type ${typeof t} (${t})`);return e?Xye.Buffer.from(t,e):Xye.Buffer.from(t)},"fromString")});var xYe=v((C3n,SYe)=>{var L7=Object.defineProperty,ysr=Object.getOwnPropertyDescriptor,bsr=Object.getOwnPropertyNames,_sr=Object.prototype.hasOwnProperty,Qye=(t,e)=>L7(t,"name",{value:e,configurable:!0}),vsr=(t,e)=>{for(var r in e)L7(t,r,{get:e[r],enumerable:!0})},wsr=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of bsr(e))!_sr.call(t,o)&&o!==r&&L7(t,o,{get:()=>e[o],enumerable:!(n=ysr(e,o))||n.enumerable});return t},Ssr=t=>wsr(L7({},"__esModule",{value:!0}),t),_Ye={};vsr(_Ye,{fromUtf8:()=>wYe,toUint8Array:()=>xsr,toUtf8:()=>Csr});SYe.exports=Ssr(_Ye);var vYe=bYe(),wYe=Qye(t=>{let e=(0,vYe.fromString)(t,"utf8");return new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT)},"fromUtf8"),xsr=Qye(t=>typeof t=="string"?wYe(t):ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(t),"toUint8Array"),Csr=Qye(t=>{if(typeof t=="string")return t;if(typeof t!="object"||typeof t.byteOffset!="number"||typeof t.byteLength!="number")throw new Error("@smithy/util-utf8: toUtf8 encoder function only accepts string | Uint8Array.");return(0,vYe.fromArrayBuffer)(t.buffer,t.byteOffset,t.byteLength).toString("utf8")},"toUtf8")});var CYe=v(F7=>{"use strict";Object.defineProperty(F7,"__esModule",{value:!0});F7.convertToBuffer=void 0;var Osr=xYe(),Psr=typeof Buffer<"u"&&Buffer.from?function(t){return Buffer.from(t,"utf8")}:Osr.fromUtf8;function Esr(t){return t instanceof Uint8Array?t:typeof t=="string"?Psr(t):ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(t)}F7.convertToBuffer=Esr});var OYe=v(k7=>{"use strict";Object.defineProperty(k7,"__esModule",{value:!0});k7.isEmptyData=void 0;function Tsr(t){return typeof t=="string"?t.length===0:t.byteLength===0}k7.isEmptyData=Tsr});var PYe=v($7=>{"use strict";Object.defineProperty($7,"__esModule",{value:!0});$7.numToUint8=void 0;function Asr(t){return new Uint8Array([(t&4278190080)>>24,(t&16711680)>>16,(t&65280)>>8,t&255])}$7.numToUint8=Asr});var EYe=v(B7=>{"use strict";Object.defineProperty(B7,"__esModule",{value:!0});B7.uint32ArrayFrom=void 0;function Isr(t){if(!Uint32Array.from){for(var e=new Uint32Array(t.length),r=0;r<t.length;)e[r]=t[r],r+=1;return e}return Uint32Array.from(t)}B7.uint32ArrayFrom=Isr});var q7=v(u_=>{"use strict";Object.defineProperty(u_,"__esModule",{value:!0});u_.uint32ArrayFrom=u_.numToUint8=u_.isEmptyData=u_.convertToBuffer=void 0;var Msr=CYe();Object.defineProperty(u_,"convertToBuffer",{enumerable:!0,get:function(){return Msr.convertToBuffer}});var Rsr=OYe();Object.defineProperty(u_,"isEmptyData",{enumerable:!0,get:function(){return Rsr.isEmptyData}});var jsr=PYe();Object.defineProperty(u_,"numToUint8",{enumerable:!0,get:function(){return jsr.numToUint8}});var Nsr=EYe();Object.defineProperty(u_,"uint32ArrayFrom",{enumerable:!0,get:function(){return Nsr.uint32ArrayFrom}})});var AYe=v(H7=>{"use strict";Object.defineProperty(H7,"__esModule",{value:!0});H7.Sha256=void 0;var TYe=(Yye(),Rl(Jye)),z7=Zye(),U7=dYe(),ebe=q7(),Dsr=function(){function t(e){this.secret=e,this.hash=new U7.RawSha256,this.reset()}return t.prototype.update=function(e){if(!((0,ebe.isEmptyData)(e)||this.error))try{this.hash.update((0,ebe.convertToBuffer)(e))}catch(r){this.error=r}},t.prototype.digestSync=function(){if(this.error)throw this.error;return this.outer?(this.outer.finished||this.outer.update(this.hash.digest()),this.outer.digest()):this.hash.digest()},t.prototype.digest=function(){return TYe.__awaiter(this,void 0,void 0,function(){return TYe.__generator(this,function(e){return[2,this.digestSync()]})})},t.prototype.reset=function(){if(this.hash=new U7.RawSha256,this.secret){this.outer=new U7.RawSha256;var e=Lsr(this.secret),r=new Uint8Array(z7.BLOCK_SIZE);r.set(e);for(var n=0;n<z7.BLOCK_SIZE;n++)e[n]^=54,r[n]^=92;this.hash.update(e),this.outer.update(r);for(var n=0;n<e.byteLength;n++)e[n]=0}},t}();H7.Sha256=Dsr;function Lsr(t){var e=(0,ebe.convertToBuffer)(t);if(e.byteLength>z7.BLOCK_SIZE){var r=new U7.RawSha256;r.update(e),e=r.digest()}var n=new Uint8Array(z7.BLOCK_SIZE);return n.set(e),n}});var rbe=v(tbe=>{"use strict";Object.defineProperty(tbe,"__esModule",{value:!0});var Fsr=(Yye(),Rl(Jye));Fsr.__exportStar(AYe(),tbe)});var IYe=O(()=>{});var MYe=O(()=>{});var RYe=O(()=>{});var GR,W4=O(()=>{GR=class t extends Error{constructor(e,r=!0){let n,o=!0;typeof r=="boolean"?(n=void 0,o=r):r!=null&&typeof r=="object"&&(n=r.logger,o=r.tryNextLink??!0),super(e),this.name="ProviderError",this.tryNextLink=o,Object.setPrototypeOf(this,t.prototype),n?.debug?.(`@smithy/property-provider ${o?"->":"(!)"} ${e}`)}static from(e,r=!0){return Object.assign(new this(e.message,r),e)}}});var yl,jYe=O(()=>{W4();yl=class t extends GR{constructor(e,r=!0){super(e,r),this.name="CredentialsProviderError",Object.setPrototypeOf(this,t.prototype)}}});var NYe=O(()=>{W4()});var DYe=O(()=>{W4()});var LYe=O(()=>{});var FYe,kYe=O(()=>{FYe=(t,e,r)=>{let n,o,i,a=!1,s=async()=>{o||(o=t());try{n=await o,i=!0,a=!1}finally{o=void 0}return n};return e===void 0?async u=>((!i||u?.forceRefresh)&&(n=await s()),n):async u=>((!i||u?.forceRefresh)&&(n=await s()),a?n:r&&!r(n)?(a=!0,n):(e(n)&&await s(),n))}});var FC=O(()=>{jYe();W4();NYe();DYe();LYe();kYe()});function V7(t){return Promise.all(Object.keys(t).reduce((e,r)=>{let n=t[r];return typeof n=="string"?e.push([r,n]):e.push(n().then(o=>[r,o])),e},[])).then(e=>e.reduce((r,[n,o])=>(r[n]=o,r),{}))}var nbe=O(()=>{});var $Ye=O(()=>{});var BYe=O(()=>{$Ye()});var qYe=O(()=>{});var UYe,zYe=O(()=>{(function(t){t.HEADER="header",t.QUERY="query"})(UYe||(UYe={}))});var obe,HYe=O(()=>{(function(t){t.HEADER="header",t.QUERY="query"})(obe||(obe={}))});var VYe=O(()=>{});var WYe=O(()=>{});var KYe=O(()=>{});var GYe=O(()=>{});var JYe=O(()=>{zYe();HYe();VYe();WYe();KYe();GYe()});var YYe=O(()=>{});var ZYe=O(()=>{});var XYe=O(()=>{});var QYe=O(()=>{});var eZe=O(()=>{});var tZe=O(()=>{});var rZe=O(()=>{});var nZe=O(()=>{eZe();tZe();rZe()});var oZe=O(()=>{});var iZe=O(()=>{});var PF,aZe=O(()=>{(function(t){t.HTTP="http",t.HTTPS="https"})(PF||(PF={}))});var sZe=O(()=>{});var uZe=O(()=>{});var lZe=O(()=>{});var cZe=O(()=>{});var dZe=O(()=>{});var fZe=O(()=>{sZe();uZe();lZe();cZe();dZe()});var pZe=O(()=>{});var EF,ibe=O(()=>{(function(t){t.MD5="md5",t.CRC32="crc32",t.CRC32C="crc32c",t.SHA1="sha1",t.SHA256="sha256"})(EF||(EF={}))});var mZe=O(()=>{ibe()});var hZe=O(()=>{});var gZe=O(()=>{mZe();hZe();ibe()});var vm,yZe=O(()=>{(function(t){t[t.HEADER=0]="HEADER",t[t.TRAILER=1]="TRAILER"})(vm||(vm={}))});var bZe=O(()=>{});var _Ze=O(()=>{});var vZe=O(()=>{});var wZe=O(()=>{});var SZe=O(()=>{});var xZe=O(()=>{_Ze();vZe();wZe();SZe()});var CZe=O(()=>{});var TF,OZe=O(()=>{TF="__smithy_context"});var PZe=O(()=>{});var EZe,TZe=O(()=>{(function(t){t.PROFILE="profile",t.SSO_SESSION="sso-session",t.SERVICES="services"})(EZe||(EZe={}))});var AZe=O(()=>{});var IZe=O(()=>{});var MZe=O(()=>{});var RZe=O(()=>{});var jZe=O(()=>{});var NZe=O(()=>{});var DZe=O(()=>{});var LZe=O(()=>{});var FZe=O(()=>{});var kZe,$Ze=O(()=>{(function(t){t.HTTP_0_9="http/0.9",t.HTTP_1_0="http/1.0",t.TDS_8_0="tds/8.0"})(kZe||(kZe={}))});var BZe=O(()=>{});var qZe=O(()=>{});var UZe=O(()=>{});var zZe=O(()=>{});var HZe=O(()=>{});var VZe=O(()=>{});var Ds=O(()=>{qYe();JYe();YYe();ZYe();XYe();QYe();nZe();oZe();iZe();aZe();fZe();pZe();gZe();yZe();bZe();xZe();CZe();OZe();PZe();TZe();AZe();IZe();MZe();RZe();jZe();NZe();DZe();LZe();FZe();$Ze();BZe();qZe();UZe();zZe();HZe();VZe()});var WZe=O(()=>{Ds()});var KZe=O(()=>{});var GZe=O(()=>{});function ksr(t){return Object.keys(t).reduce((e,r)=>{let n=t[r];return{...e,[r]:Array.isArray(n)?[...n]:n}},{})}var W7,JZe=O(()=>{W7=class t{constructor(e){this.method=e.method||"GET",this.hostname=e.hostname||"localhost",this.port=e.port,this.query=e.query||{},this.headers=e.headers||{},this.body=e.body,this.protocol=e.protocol?e.protocol.slice(-1)!==":"?`${e.protocol}:`:e.protocol:"https:",this.path=e.path?e.path.charAt(0)!=="/"?`/${e.path}`:e.path:"/",this.username=e.username,this.password=e.password,this.fragment=e.fragment}static clone(e){let r=new t({...e,headers:{...e.headers}});return r.query&&(r.query=ksr(r.query)),r}static isInstance(e){if(!e)return!1;let r=e;return"method"in r&&"protocol"in r&&"hostname"in r&&"path"in r&&typeof r.query=="object"&&typeof r.headers=="object"}clone(){return t.clone(this)}}});var YZe=O(()=>{});var ZZe=O(()=>{});var XZe=O(()=>{});var QZe=O(()=>{BYe();WZe();KZe();GZe();JZe();YZe();ZZe();XZe()});var $sr,Bsr,K7,abe=O(()=>{QZe();$sr=t=>e=>async r=>{if(!W7.isInstance(r.request))return e(r);let{request:n}=r,{handlerProtocol:o=""}=t.requestHandler.metadata||{};if(o.indexOf("h2")>=0&&!n.headers[":authority"])delete n.headers.host,n.headers[":authority"]=n.hostname+(n.port?":"+n.port:"");else if(!n.headers.host){let i=n.hostname;n.port!=null&&(i+=`:${n.port}`),n.headers.host=i}return e(r)},Bsr={name:"hostHeaderMiddleware",step:"build",priority:"low",tags:["HOST"],override:!0},K7=t=>({applyToStack:e=>{e.add($sr(t),Bsr)}})});var qsr,Usr,G7,eXe=O(()=>{qsr=()=>(t,e)=>async r=>{try{let n=await t(r),{clientName:o,commandName:i,logger:a,dynamoDbDocumentClientOptions:s={}}=e,{overrideInputFilterSensitiveLog:u,overrideOutputFilterSensitiveLog:l}=s,c=u??e.inputFilterSensitiveLog,d=l??e.outputFilterSensitiveLog,{$metadata:f,...p}=n.output;return a?.info?.({clientName:o,commandName:i,input:c(r.input),output:d(p),metadata:f}),n}catch(n){let{clientName:o,commandName:i,logger:a,dynamoDbDocumentClientOptions:s={}}=e,{overrideInputFilterSensitiveLog:u}=s,l=u??e.inputFilterSensitiveLog;throw a?.error?.({clientName:o,commandName:i,input:l(r.input),error:n,metadata:n.$metadata}),n}},Usr={name:"loggerMiddleware",tags:["LOGGER"],step:"initialize",override:!0},G7=t=>({applyToStack:e=>{e.add(qsr(),Usr)}})});var sbe=O(()=>{eXe()});var tXe=O(()=>{});var rXe=O(()=>{tXe()});var nXe=O(()=>{Ds()});var oXe=O(()=>{});var iXe=O(()=>{});function zsr(t){return Object.keys(t).reduce((e,r)=>{let n=t[r];return{...e,[r]:Array.isArray(n)?[...n]:n}},{})}var J7,aXe=O(()=>{J7=class t{constructor(e){this.method=e.method||"GET",this.hostname=e.hostname||"localhost",this.port=e.port,this.query=e.query||{},this.headers=e.headers||{},this.body=e.body,this.protocol=e.protocol?e.protocol.slice(-1)!==":"?`${e.protocol}:`:e.protocol:"https:",this.path=e.path?e.path.charAt(0)!=="/"?`/${e.path}`:e.path:"/",this.username=e.username,this.password=e.password,this.fragment=e.fragment}static clone(e){let r=new t({...e,headers:{...e.headers}});return r.query&&(r.query=zsr(r.query)),r}static isInstance(e){if(!e)return!1;let r=e;return"method"in r&&"protocol"in r&&"hostname"in r&&"path"in r&&typeof r.query=="object"&&typeof r.headers=="object"}clone(){return t.clone(this)}}});var sXe=O(()=>{});var uXe=O(()=>{});var lXe=O(()=>{});var cXe=O(()=>{rXe();nXe();oXe();iXe();aXe();sXe();uXe();lXe()});var dXe,Hsr,Vsr,Wsr,Ksr,Y7,ube=O(()=>{cXe();dXe="X-Amzn-Trace-Id",Hsr="AWS_LAMBDA_FUNCTION_NAME",Vsr="_X_AMZN_TRACE_ID",Wsr=t=>e=>async r=>{let{request:n}=r;if(!J7.isInstance(n)||t.runtime!=="node"||n.headers.hasOwnProperty(dXe))return e(r);let o=process.env[Hsr],i=process.env[Vsr],a=s=>typeof s=="string"&&s.length>0;return a(o)&&a(i)&&(n.headers[dXe]=i),e({...r,request:n})},Ksr={step:"build",tags:["RECURSION_DETECTION"],name:"recursionDetectionMiddleware",override:!0,priority:"low"},Y7=t=>({applyToStack:e=>{e.add(Wsr(t),Ksr)}})});function Z7(t){return{...t,customUserAgent:typeof t.customUserAgent=="string"?[[t.customUserAgent]]:t.customUserAgent}}var fXe=O(()=>{});var Gsr,K4,lbe=O(()=>{Gsr=new RegExp("^(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}$"),K4=t=>Gsr.test(t)||t.startsWith("[")&&t.endsWith("]")});var Jsr,G4,cbe=O(()=>{Jsr=new RegExp("^(?!.*-$)(?!-)[a-zA-Z0-9-]{1,63}$"),G4=(t,e=!1)=>{if(!e)return Jsr.test(t);let r=t.split(".");for(let n of r)if(!G4(n))return!1;return!0}});var kC,X7=O(()=>{kC={}});var $C,pXe=O(()=>{$C="endpoints"});function jh(t){return typeof t!="object"||t==null?t:"ref"in t?`$${jh(t.ref)}`:"fn"in t?`${t.fn}(${(t.argv||[]).map(jh).join(", ")})`:JSON.stringify(t,null,2)}var mXe=O(()=>{});var J4=O(()=>{pXe();mXe()});var Bi,hXe=O(()=>{Bi=class extends Error{constructor(e){super(e),this.name="EndpointError"}}});var gXe=O(()=>{});var yXe=O(()=>{});var bXe=O(()=>{});var _Xe=O(()=>{});var vXe=O(()=>{});var wXe=O(()=>{});var Nh=O(()=>{hXe();gXe();yXe();bXe();_Xe();vXe();wXe()});var SXe,xXe=O(()=>{SXe=(t,e)=>t===e});var CXe,OXe=O(()=>{Nh();CXe=t=>{let e=t.split("."),r=[];for(let n of e){let o=n.indexOf("[");if(o!==-1){if(n.indexOf("]")!==n.length-1)throw new Bi(`Path: '${t}' does not end with ']'`);let i=n.slice(o+1,-1);if(Number.isNaN(parseInt(i)))throw new Bi(`Invalid array index: '${i}' in path: '${t}'`);o!==0&&r.push(n.slice(0,o)),r.push(i)}else r.push(n)}return r}});var Q7,PXe=O(()=>{Nh();OXe();Q7=(t,e)=>CXe(e).reduce((r,n)=>{if(typeof r!="object")throw new Bi(`Index '${n}' in '${e}' not found in '${JSON.stringify(t)}'`);return Array.isArray(r)?r[parseInt(n)]:r[n]},t)});var EXe,TXe=O(()=>{EXe=t=>t!=null});var AXe,IXe=O(()=>{AXe=t=>!t});var dbe,MXe,RXe=O(()=>{Ds();lbe();dbe={[PF.HTTP]:80,[PF.HTTPS]:443},MXe=t=>{let e=(()=>{try{if(t instanceof URL)return t;if(typeof t=="object"&&"hostname"in t){let{hostname:f,port:p,protocol:m="",path:h="",query:b={}}=t,g=new URL(`${m}//${f}${p?`:${p}`:""}${h}`);return g.search=Object.entries(b).map(([y,w])=>`${y}=${w}`).join("&"),g}return new URL(t)}catch{return null}})();if(!e)return console.error(`Unable to parse ${JSON.stringify(t)} as a whatwg URL.`),null;let r=e.href,{host:n,hostname:o,pathname:i,protocol:a,search:s}=e;if(s)return null;let u=a.slice(0,-1);if(!Object.values(PF).includes(u))return null;let l=K4(o),c=r.includes(`${n}:${dbe[u]}`)||typeof t=="string"&&t.includes(`${n}:${dbe[u]}`),d=`${n}${c?`:${dbe[u]}`:""}`;return{scheme:u,authority:d,path:i,normalizedPath:i.endsWith("/")?i:`${i}/`,isIp:l}}});var jXe,NXe=O(()=>{jXe=(t,e)=>t===e});var DXe,LXe=O(()=>{DXe=(t,e,r,n)=>e>=r||t.length<r?null:n?t.substring(t.length-r,t.length-e):t.substring(e,r)});var FXe,kXe=O(()=>{FXe=t=>encodeURIComponent(t).replace(/[!*'()]/g,e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`)});var fbe=O(()=>{xXe();PXe();TXe();cbe();IXe();RXe();NXe();LXe();kXe()});var $Xe,BXe=O(()=>{fbe();$Xe={booleanEquals:SXe,getAttr:Q7,isSet:EXe,isValidHostLabel:G4,not:AXe,parseURL:MXe,stringEquals:jXe,substring:DXe,uriEncode:FXe}});var eY,pbe=O(()=>{fbe();eY=(t,e)=>{let r=[],n={...e.endpointParams,...e.referenceRecord},o=0;for(;o<t.length;){let i=t.indexOf("{",o);if(i===-1){r.push(t.slice(o));break}r.push(t.slice(o,i));let a=t.indexOf("}",i);if(a===-1){r.push(t.slice(i));break}t[i+1]==="{"&&t[a+1]==="}"&&(r.push(t.slice(i+1,a)),o=a+2);let s=t.substring(i+1,a);if(s.includes("#")){let[u,l]=s.split("#");r.push(Q7(n[u],l))}else r.push(n[s]);o=a+1}return r.join("")}});var qXe,UXe=O(()=>{qXe=({ref:t},e)=>({...e.endpointParams,...e.referenceRecord})[t]});var tT,Y4=O(()=>{Nh();mbe();pbe();UXe();tT=(t,e,r)=>{if(typeof t=="string")return eY(t,r);if(t.fn)return tY(t,r);if(t.ref)return qXe(t,r);throw new Bi(`'${e}': ${String(t)} is not a string, function or reference.`)}});var tY,mbe=O(()=>{X7();BXe();Y4();tY=({fn:t,argv:e},r)=>{let n=e.map(i=>["boolean","number"].includes(typeof i)?i:tT(i,"arg",r)),o=t.split(".");return o[0]in kC&&o[1]!=null?kC[o[0]][o[1]](...n):$Xe[t](...n)}});var zXe,HXe=O(()=>{J4();Nh();mbe();zXe=({assign:t,...e},r)=>{if(t&&t in r.referenceRecord)throw new Bi(`'${t}' is already defined in Reference Record.`);let n=tY(e,r);return r.logger?.debug?.(`${$C} evaluateCondition: ${jh(e)} = ${jh(n)}`),{result:n===""?!0:!!n,...t!=null&&{toAssign:{name:t,value:n}}}}});var AF,rY=O(()=>{J4();HXe();AF=(t=[],e)=>{let r={};for(let n of t){let{result:o,toAssign:i}=zXe(n,{...e,referenceRecord:{...e.referenceRecord,...r}});if(!o)return{result:o};i&&(r[i.name]=i.value,e.logger?.debug?.(`${$C} assign: ${i.name} := ${jh(i.value)}`))}return{result:!0,referenceRecord:r}}});var VXe,WXe=O(()=>{Nh();Y4();VXe=(t,e)=>Object.entries(t).reduce((r,[n,o])=>({...r,[n]:o.map(i=>{let a=tT(i,"Header value entry",e);if(typeof a!="string")throw new Bi(`Header '${n}' value '${a}' is not a string`);return a})}),{})});var hbe,KXe=O(()=>{Nh();pbe();gbe();hbe=(t,e)=>{if(Array.isArray(t))return t.map(r=>hbe(r,e));switch(typeof t){case"string":return eY(t,e);case"object":if(t===null)throw new Bi(`Unexpected endpoint property: ${t}`);return nY(t,e);case"boolean":return t;default:throw new Bi(`Unexpected endpoint property type: ${typeof t}`)}}});var nY,gbe=O(()=>{KXe();nY=(t,e)=>Object.entries(t).reduce((r,[n,o])=>({...r,[n]:hbe(o,e)}),{})});var GXe,JXe=O(()=>{Nh();Y4();GXe=(t,e)=>{let r=tT(t,"Endpoint URL",e);if(typeof r=="string")try{return new URL(r)}catch(n){throw console.error(`Failed to construct URL with ${r}`,n),n}throw new Bi(`Endpoint URL must be a string, got ${typeof r}`)}});var YXe,ZXe=O(()=>{J4();rY();WXe();gbe();JXe();YXe=(t,e)=>{let{conditions:r,endpoint:n}=t,{result:o,referenceRecord:i}=AF(r,e);if(!o)return;let a={...e,referenceRecord:{...e.referenceRecord,...i}},{url:s,properties:u,headers:l}=n;return e.logger?.debug?.(`${$C} Resolving endpoint from template: ${jh(n)}`),{...l!=null&&{headers:VXe(l,a)},...u!=null&&{properties:nY(u,a)},url:GXe(s,a)}}});var XXe,QXe=O(()=>{Nh();rY();Y4();XXe=(t,e)=>{let{conditions:r,error:n}=t,{result:o,referenceRecord:i}=AF(r,e);if(o)throw new Bi(tT(n,"Error",{...e,referenceRecord:{...e.referenceRecord,...i}}))}});var eQe,tQe=O(()=>{rY();ybe();eQe=(t,e)=>{let{conditions:r,rules:n}=t,{result:o,referenceRecord:i}=AF(r,e);if(o)return oY(n,{...e,referenceRecord:{...e.referenceRecord,...i}})}});var oY,ybe=O(()=>{Nh();ZXe();QXe();tQe();oY=(t,e)=>{for(let r of t)if(r.type==="endpoint"){let n=YXe(r,e);if(n)return n}else if(r.type==="error")XXe(r,e);else if(r.type==="tree"){let n=eQe(r,e);if(n)return n}else throw new Bi(`Unknown endpoint rule: ${r}`);throw new Bi("Rules evaluation failed")}});var rQe=O(()=>{X7();ybe()});var Z4,nQe=O(()=>{J4();Nh();rQe();Z4=(t,e)=>{let{endpointParams:r,logger:n}=e,{parameters:o,rules:i}=t;e.logger?.debug?.(`${$C} Initial EndpointParams: ${jh(r)}`);let a=Object.entries(o).filter(([,l])=>l.default!=null).map(([l,c])=>[l,c.default]);if(a.length>0)for(let[l,c]of a)r[l]=r[l]??c;let s=Object.entries(o).filter(([,l])=>l.required).map(([l])=>l);for(let l of s)if(r[l]==null)throw new Bi(`Missing required parameter: '${l}'`);let u=oY(i,{endpointParams:r,logger:n,referenceRecord:{}});if(e.endpointParams?.Endpoint)try{let l=new URL(e.endpointParams.Endpoint),{protocol:c,port:d}=l;u.url.protocol=c,u.url.port=d}catch{}return e.logger?.debug?.(`${$C} Resolved endpoint: ${jh(u)}`),u}});var rT=O(()=>{lbe();cbe();X7();nQe();Nh()});var bbe=O(()=>{rT()});var _be,oQe=O(()=>{rT();bbe();_be=(t,e=!1)=>{if(e){for(let r of t.split("."))if(!_be(r))return!1;return!0}return!(!G4(t)||t.length<3||t.length>63||t!==t.toLowerCase()||K4(t))}});var iQe,Ysr,aQe,sQe=O(()=>{iQe=":",Ysr="/",aQe=t=>{let e=t.split(iQe);if(e.length<6)return null;let[r,n,o,i,a,...s]=e;if(r!=="arn"||n===""||o===""||s.join(iQe)==="")return null;let u=s.map(l=>l.split(Ysr)).flat();return{partition:n,service:o,region:i,accountId:a,resourceId:u}}});var lQe,uQe=O(()=>{lQe={partitions:[{id:"aws",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",implicitGlobalRegion:"us-east-1",name:"aws",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^(us|eu|ap|sa|ca|me|af|il|mx)\\-\\w+\\-\\d+$",regions:{"af-south-1":{description:"Africa (Cape Town)"},"ap-east-1":{description:"Asia Pacific (Hong Kong)"},"ap-northeast-1":{description:"Asia Pacific (Tokyo)"},"ap-northeast-2":{description:"Asia Pacific (Seoul)"},"ap-northeast-3":{description:"Asia Pacific (Osaka)"},"ap-south-1":{description:"Asia Pacific (Mumbai)"},"ap-south-2":{description:"Asia Pacific (Hyderabad)"},"ap-southeast-1":{description:"Asia Pacific (Singapore)"},"ap-southeast-2":{description:"Asia Pacific (Sydney)"},"ap-southeast-3":{description:"Asia Pacific (Jakarta)"},"ap-southeast-4":{description:"Asia Pacific (Melbourne)"},"ap-southeast-5":{description:"Asia Pacific (Malaysia)"},"aws-global":{description:"AWS Standard global region"},"ca-central-1":{description:"Canada (Central)"},"ca-west-1":{description:"Canada West (Calgary)"},"eu-central-1":{description:"Europe (Frankfurt)"},"eu-central-2":{description:"Europe (Zurich)"},"eu-north-1":{description:"Europe (Stockholm)"},"eu-south-1":{description:"Europe (Milan)"},"eu-south-2":{description:"Europe (Spain)"},"eu-west-1":{description:"Europe (Ireland)"},"eu-west-2":{description:"Europe (London)"},"eu-west-3":{description:"Europe (Paris)"},"il-central-1":{description:"Israel (Tel Aviv)"},"me-central-1":{description:"Middle East (UAE)"},"me-south-1":{description:"Middle East (Bahrain)"},"sa-east-1":{description:"South America (Sao Paulo)"},"us-east-1":{description:"US East (N. Virginia)"},"us-east-2":{description:"US East (Ohio)"},"us-west-1":{description:"US West (N. California)"},"us-west-2":{description:"US West (Oregon)"}}},{id:"aws-cn",outputs:{dnsSuffix:"amazonaws.com.cn",dualStackDnsSuffix:"api.amazonwebservices.com.cn",implicitGlobalRegion:"cn-northwest-1",name:"aws-cn",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^cn\\-\\w+\\-\\d+$",regions:{"aws-cn-global":{description:"AWS China global region"},"cn-north-1":{description:"China (Beijing)"},"cn-northwest-1":{description:"China (Ningxia)"}}},{id:"aws-us-gov",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",implicitGlobalRegion:"us-gov-west-1",name:"aws-us-gov",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-gov\\-\\w+\\-\\d+$",regions:{"aws-us-gov-global":{description:"AWS GovCloud (US) global region"},"us-gov-east-1":{description:"AWS GovCloud (US-East)"},"us-gov-west-1":{description:"AWS GovCloud (US-West)"}}},{id:"aws-iso",outputs:{dnsSuffix:"c2s.ic.gov",dualStackDnsSuffix:"c2s.ic.gov",implicitGlobalRegion:"us-iso-east-1",name:"aws-iso",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^us\\-iso\\-\\w+\\-\\d+$",regions:{"aws-iso-global":{description:"AWS ISO (US) global region"},"us-iso-east-1":{description:"US ISO East"},"us-iso-west-1":{description:"US ISO WEST"}}},{id:"aws-iso-b",outputs:{dnsSuffix:"sc2s.sgov.gov",dualStackDnsSuffix:"sc2s.sgov.gov",implicitGlobalRegion:"us-isob-east-1",name:"aws-iso-b",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^us\\-isob\\-\\w+\\-\\d+$",regions:{"aws-iso-b-global":{description:"AWS ISOB (US) global region"},"us-isob-east-1":{description:"US ISOB East (Ohio)"}}},{id:"aws-iso-e",outputs:{dnsSuffix:"cloud.adc-e.uk",dualStackDnsSuffix:"cloud.adc-e.uk",implicitGlobalRegion:"eu-isoe-west-1",name:"aws-iso-e",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^eu\\-isoe\\-\\w+\\-\\d+$",regions:{"eu-isoe-west-1":{description:"EU ISOE West"}}},{id:"aws-iso-f",outputs:{dnsSuffix:"csp.hci.ic.gov",dualStackDnsSuffix:"csp.hci.ic.gov",implicitGlobalRegion:"us-isof-south-1",name:"aws-iso-f",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^us\\-isof\\-\\w+\\-\\d+$",regions:{}}],version:"1.1"}});var Xsr,Qsr,cQe,dQe,vbe=O(()=>{uQe();Xsr=lQe,Qsr="",cQe=t=>{let{partitions:e}=Xsr;for(let n of e){let{regions:o,outputs:i}=n;for(let[a,s]of Object.entries(o))if(a===t)return{...i,...s}}for(let n of e){let{regionRegex:o,outputs:i}=n;if(new RegExp(o).test(t))return{...i}}let r=e.find(n=>n.id==="aws");if(!r)throw new Error("Provided region was not found in the partition array or regex, and default partition with id 'aws' doesn't exist.");return{...r.outputs}},dQe=()=>Qsr});var X4,fQe=O(()=>{rT();oQe();sQe();vbe();X4={isVirtualHostableS3Bucket:_be,parseArn:aQe,partition:cQe};kC.aws=X4});var pQe=O(()=>{rT()});var mQe=O(()=>{rT()});var hQe=O(()=>{});var gQe=O(()=>{});var yQe=O(()=>{});var bQe=O(()=>{});var _Qe=O(()=>{});var vQe=O(()=>{mQe();hQe();gQe();yQe();bQe();_Qe()});var iY=O(()=>{fQe();vbe();bbe();pQe();vQe()});var wQe=O(()=>{});var SQe=O(()=>{wQe()});var xQe=O(()=>{Ds()});var CQe=O(()=>{});var OQe=O(()=>{});function eur(t){return Object.keys(t).reduce((e,r)=>{let n=t[r];return{...e,[r]:Array.isArray(n)?[...n]:n}},{})}var aY,PQe=O(()=>{aY=class t{constructor(e){this.method=e.method||"GET",this.hostname=e.hostname||"localhost",this.port=e.port,this.query=e.query||{},this.headers=e.headers||{},this.body=e.body,this.protocol=e.protocol?e.protocol.slice(-1)!==":"?`${e.protocol}:`:e.protocol:"https:",this.path=e.path?e.path.charAt(0)!=="/"?`/${e.path}`:e.path:"/",this.username=e.username,this.password=e.password,this.fragment=e.fragment}static clone(e){let r=new t({...e,headers:{...e.headers}});return r.query&&(r.query=eur(r.query)),r}static isInstance(e){if(!e)return!1;let r=e;return"method"in r&&"protocol"in r&&"hostname"in r&&"path"in r&&typeof r.query=="object"&&typeof r.headers=="object"}clone(){return t.clone(this)}}});var EQe=O(()=>{});var TQe=O(()=>{});var AQe=O(()=>{});var IQe=O(()=>{SQe();xQe();CQe();OQe();PQe();EQe();TQe();AQe()});var wbe,sY,Sbe,uY,MQe,RQe,xbe,jQe=O(()=>{wbe="user-agent",sY="x-amz-user-agent",Sbe=" ",uY="/",MQe=/[^\!\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w]/g,RQe=/[^\!\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w\#]/g,xbe="-"});var tur,Cbe,rur,lY,NQe=O(()=>{iY();IQe();jQe();tur=t=>(e,r)=>async n=>{let{request:o}=n;if(!aY.isInstance(o))return e(n);let{headers:i}=o,a=r?.userAgent?.map(Cbe)||[],s=(await t.defaultUserAgentProvider()).map(Cbe),u=t?.customUserAgent?.map(Cbe)||[],l=dQe(),c=(l?[l]:[]).concat([...s,...a,...u]).join(Sbe),d=[...s.filter(f=>f.startsWith("aws-sdk-")),...u].join(Sbe);return t.runtime!=="browser"?(d&&(i[sY]=i[sY]?`${i[wbe]} ${d}`:d),i[wbe]=c):i[sY]=c,e({...n,request:o})},Cbe=t=>{let e=t[0].split(uY).map(a=>a.replace(MQe,xbe)).join(uY),r=t[1]?.replace(RQe,xbe),n=e.indexOf(uY),o=e.substring(0,n),i=e.substring(n+1);return o==="api"&&(i=i.toLowerCase()),[o,i,r].filter(a=>a&&a.length>0).reduce((a,s,u)=>{switch(u){case 0:return s;case 1:return`${a}/${s}`;default:return`${a}#${s}`}},"")},rur={name:"getUserAgentMiddleware",step:"build",priority:"low",tags:["SET_USER_AGENT","USER_AGENT"],override:!0},lY=t=>({applyToStack:e=>{e.add(tur(t),rur)}})});var Obe=O(()=>{fXe();NQe()});var DQe=O(()=>{});var LQe=O(()=>{});var cY,FQe=O(()=>{(function(t){t.ENV="env",t.CONFIG="shared config entry"})(cY||(cY={}))});var Pbe=O(()=>{DQe();LQe();FQe()});var dY,kQe=O(()=>{Pbe();dY=!1});var fY,$Qe=O(()=>{Pbe();fY=!1});var l_,BQe=O(()=>{Ds();l_=t=>t[TF]||(t[TF]={})});var Ad,qQe=O(()=>{Ad=t=>{if(typeof t=="function")return t;let e=Promise.resolve(t);return()=>e}});var py=O(()=>{BQe();qQe()});var UQe=O(()=>{py()});var zQe=O(()=>{});var HQe=O(()=>{py();zQe()});var VQe=O(()=>{kQe();$Qe();UQe();HQe()});var WQe=O(()=>{});var pY,Ebe=O(()=>{pY=t=>typeof t=="string"&&(t.startsWith("fips-")||t.endsWith("-fips"))});var Tbe,KQe=O(()=>{Ebe();Tbe=t=>pY(t)?["fips-aws-global","aws-fips"].includes(t)?"us-east-1":t.replace(/fips-(dkr-|prod-)?|-fips/,""):t});var mY,GQe=O(()=>{KQe();Ebe();mY=t=>{let{region:e,useFipsEndpoint:r}=t;if(!e)throw new Error("Region is missing");return{...t,region:async()=>{if(typeof e=="string")return Tbe(e);let n=await e();return Tbe(n)},useFipsEndpoint:async()=>{let n=typeof e=="string"?e:await e();return pY(n)?!0:typeof r!="function"?Promise.resolve(!!r):r()}}}});var JQe=O(()=>{WQe();GQe()});var YQe=O(()=>{});var ZQe=O(()=>{});var XQe=O(()=>{});var QQe=O(()=>{});var eet=O(()=>{});var tet=O(()=>{});var ret=O(()=>{XQe();QQe();eet();tet()});var net=O(()=>{YQe();ZQe();ret()});var Q4=O(()=>{VQe();JQe();net()});function our(t){let e=new Map;for(let r of t)e.set(r.schemeId,r);return e}var Abe,hY=O(()=>{Ds();py();Abe=(t,e)=>(r,n)=>async o=>{let i=t.httpAuthSchemeProvider(await e.httpAuthSchemeParametersProvider(t,n,o.input)),a=our(t.httpAuthSchemes),s=l_(n),u=[];for(let l of i){let c=a.get(l.schemeId);if(!c){u.push(`HttpAuthScheme \`${l.schemeId}\` was not enabled for this service.`);continue}let d=c.identityProvider(await e.identityProviderConfigProvider(t));if(!d){u.push(`HttpAuthScheme \`${l.schemeId}\` did not have an IdentityProvider configured.`);continue}let{identityProperties:f={},signingProperties:p={}}=l.propertiesExtractor?.(t,n)||{};l.identityProperties=Object.assign(l.identityProperties||{},f),l.signingProperties=Object.assign(l.signingProperties||{},p),s.selectedHttpAuthScheme={httpAuthOption:l,identity:await d(l.identityProperties),signer:c.signer};break}if(!s.selectedHttpAuthScheme)throw new Error(u.join(`
`));return r(o)}});var oet,iur,aur,sur,uur,lur,iet=O(()=>{oet=async t=>{let e=t?.Bucket||"";if(typeof t.Bucket=="string"&&(t.Bucket=e.replace(/#/g,encodeURIComponent("#")).replace(/\?/g,encodeURIComponent("?"))),lur(e)){if(t.ForcePathStyle===!0)throw new Error("Path-style addressing cannot be used with ARN buckets")}else(!uur(e)||e.indexOf(".")!==-1&&!String(t.Endpoint).startsWith("http:")||e.toLowerCase()!==e||e.length<3)&&(t.ForcePathStyle=!0);return t.DisableMultiRegionAccessPoints&&(t.disableMultiRegionAccessPoints=!0,t.DisableMRAP=!0),t},iur=/^[a-z0-9][a-z0-9\.\-]{1,61}[a-z0-9]$/,aur=/(\d+\.){3}\d+/,sur=/\.\./,uur=t=>iur.test(t)&&!aur.test(t)&&!sur.test(t),lur=t=>{let[e,r,n,,,o]=t.split(":"),i=e==="arn"&&t.split(":").length>=6,a=!!(i&&r&&n&&o);if(i&&!a)throw new Error(`Invalid ARN: ${t} was an invalid ARN.`);return a}});var aet=O(()=>{iet()});var set,uet=O(()=>{set=(t,e,r)=>{let n=async()=>{let o=r[t]??r[e];return typeof o=="function"?o():o};return t==="credentialScope"||e==="CredentialScope"?async()=>{let o=typeof r.credentials=="function"?await r.credentials():r.credentials;return o?.credentialScope??o?.CredentialScope}:t==="accountId"||e==="AccountId"?async()=>{let o=typeof r.credentials=="function"?await r.credentials():r.credentials;return o?.accountId??o?.AccountId}:t==="endpoint"||e==="endpoint"?async()=>{let o=await n();if(o&&typeof o=="object"){if("url"in o)return o.url.href;if("hostname"in o){let{protocol:i,hostname:a,port:s,path:u}=o;return`${i}//${a}${s?":"+s:""}${u}`}}return o}:n}});var cet,det=O(()=>{cet=async t=>{}});function fet(t){let e={};if(t=t.replace(/^\?/,""),t)for(let r of t.split("&")){let[n,o=null]=r.split("=");n=decodeURIComponent(n),o&&(o=decodeURIComponent(o)),n in e?Array.isArray(e[n])?e[n].push(o):e[n]=[e[n],o]:e[n]=o}return e}var pet=O(()=>{});var nT,gY=O(()=>{pet();nT=t=>{if(typeof t=="string")return nT(new URL(t));let{hostname:e,pathname:r,port:n,protocol:o,search:i}=t,a;return i&&(a=fet(i)),{hostname:e,port:n?parseInt(n):void 0,protocol:o,path:r,query:a}}});var yY,bY=O(()=>{gY();yY=t=>typeof t=="object"?"url"in t?nT(t.url):t:nT(t)});var met,cur,Ibe=O(()=>{aet();uet();det();bY();met=async(t,e,r,n)=>{if(!r.endpoint){let a=await cet(r.serviceId||"");a&&(r.endpoint=()=>Promise.resolve(yY(a)))}let o=await cur(t,e,r);if(typeof r.endpointProvider!="function")throw new Error("config.endpointProvider is not set.");return r.endpointProvider(o,n)},cur=async(t,e,r)=>{let n={},o=e?.getEndpointParameterInstructions?.()||{};for(let[i,a]of Object.entries(o))switch(a.type){case"staticContextParams":n[i]=a.value;break;case"contextParams":n[i]=t[a.name];break;case"clientContextParams":case"builtInParams":n[i]=await set(a.name,i,r)();break;default:throw new Error("Unrecognized endpoint parameter instruction: "+JSON.stringify(a))}return Object.keys(o).length===0&&Object.assign(n,r),String(r.serviceId).toLowerCase()==="s3"&&await oet(n),n}});var het=O(()=>{Ibe();bY()});var get,Mbe=O(()=>{py();Ibe();get=({config:t,instructions:e})=>(r,n)=>async o=>{let i=await met(o.input,{getEndpointParameterInstructions(){return e}},{...t},n);n.endpointV2=i,n.authSchemes=i.properties?.authSchemes;let a=n.authSchemes?.[0];if(a){n.signing_region=a.signingRegion,n.signing_service=a.signingName;let u=l_(n)?.selectedHttpAuthScheme?.httpAuthOption;u&&(u.signingProperties=Object.assign(u.signingProperties||{},{signing_region:a.signingRegion,signingRegion:a.signingRegion,signing_service:a.signingName,signingName:a.signingName,signingRegionSet:a.signingRegionSet},a.properties))}return r({...o})}});var yet,Rbe=O(()=>{yet=(t,e)=>r=>async n=>{let{response:o}=await r(n);try{let i=await e(o,t);return{response:o,output:i}}catch(i){if(Object.defineProperty(i,"$response",{value:o}),!("$metadata"in i)){let a="Deserialization error: to see the raw response, inspect the hidden field {error}.$response on this object.";i.message+=`
  `+a,typeof i.$responseBodyText<"u"&&i.$response&&(i.$response.body=i.$responseBodyText)}throw i}}});var bet,jbe=O(()=>{bet=(t,e)=>(r,n)=>async o=>{let i=n.endpointV2?.url&&t.urlParser?async()=>t.urlParser(n.endpointV2.url):t.endpoint;if(!i)throw new Error("No valid endpoint provider available.");let a=await e(o.input,{...t,endpoint:i});return r({...o,request:a})}});function jt(t,e,r){return{applyToStack:n=>{n.add(yet(t,r),dur),n.add(bet(t,e),e3)}}}var dur,e3,_et=O(()=>{Rbe();jbe();dur={name:"deserializerMiddleware",step:"deserialize",tags:["DESERIALIZER"],override:!0},e3={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"],override:!0}});var Jn=O(()=>{Rbe();_et();jbe()});var Nbe,Nt,vet=O(()=>{Jn();Mbe();Nbe={step:"serialize",tags:["ENDPOINT_PARAMETERS","ENDPOINT_V2","ENDPOINT"],name:"endpointV2Middleware",override:!0,relation:"before",toMiddleware:e3.name},Nt=(t,e)=>({applyToStack:r=>{r.addRelativeTo(get({config:t,instructions:e}),Nbe)}})});var _Y,wet=O(()=>{py();bY();_Y=t=>{let e=t.tls??!0,{endpoint:r}=t,n=r!=null?async()=>yY(await Ad(r)()):void 0;return{...t,endpoint:n,tls:e,isCustomEndpoint:!!r,useDualstackEndpoint:Ad(t.useDualstackEndpoint??!1),useFipsEndpoint:Ad(t.useFipsEndpoint??!1)}}});var xet=O(()=>{});var kn=O(()=>{het();Mbe();vet();wet();xet()});var fur,vY,Cet=O(()=>{kn();hY();fur={step:"serialize",tags:["HTTP_AUTH_SCHEME"],name:"httpAuthSchemeMiddleware",override:!0,relation:"before",toMiddleware:Nbe.name},vY=(t,{httpAuthSchemeParametersProvider:e,identityProviderConfigProvider:r})=>({applyToStack:n=>{n.addRelativeTo(Abe(t,{httpAuthSchemeParametersProvider:e,identityProviderConfigProvider:r}),fur)}})});var aKn,Oet=O(()=>{Jn();hY();aKn={step:"serialize",tags:["HTTP_AUTH_SCHEME"],name:"httpAuthSchemeMiddleware",override:!0,relation:"before",toMiddleware:e3.name}});var Pet=O(()=>{hY();Cet();Oet()});var Eet=O(()=>{});var Tet=O(()=>{Eet()});var Aet=O(()=>{Ds()});var Iet=O(()=>{});var Met=O(()=>{});function pur(t){return Object.keys(t).reduce((e,r)=>{let n=t[r];return{...e,[r]:Array.isArray(n)?[...n]:n}},{})}var JR,Ret=O(()=>{JR=class t{constructor(e){this.method=e.method||"GET",this.hostname=e.hostname||"localhost",this.port=e.port,this.query=e.query||{},this.headers=e.headers||{},this.body=e.body,this.protocol=e.protocol?e.protocol.slice(-1)!==":"?`${e.protocol}:`:e.protocol:"https:",this.path=e.path?e.path.charAt(0)!=="/"?`/${e.path}`:e.path:"/",this.username=e.username,this.password=e.password,this.fragment=e.fragment}static clone(e){let r=new t({...e,headers:{...e.headers}});return r.query&&(r.query=pur(r.query)),r}static isInstance(e){if(!e)return!1;let r=e;return"method"in r&&"protocol"in r&&"hostname"in r&&"path"in r&&typeof r.query=="object"&&typeof r.headers=="object"}clone(){return t.clone(this)}}});var jet=O(()=>{});var Net=O(()=>{});var Det=O(()=>{});var t3=O(()=>{Tet();Aet();Iet();Met();Ret();jet();Net();Det()});var mur,hur,Let,Dbe=O(()=>{t3();Ds();py();mur=t=>e=>{throw e},hur=(t,e)=>{},Let=t=>(e,r)=>async n=>{if(!JR.isInstance(n.request))return e(n);let i=l_(r).selectedHttpAuthScheme;if(!i)throw new Error("No HttpAuthScheme was selected: unable to sign request");let{httpAuthOption:{signingProperties:a={}},identity:s,signer:u}=i,l=await e({...n,request:await u.sign(n.request,s,a)}).catch((u.errorHandler||mur)(a));return(u.successHandler||hur)(l.response,a),l}});var my,c_,r3,wY=O(()=>{(function(t){t.STANDARD="standard",t.ADAPTIVE="adaptive"})(my||(my={}));c_=3,r3=my.STANDARD});var Fet,ket,$et,Bet,qet=O(()=>{Fet=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException","TransactionInProgressException"],ket=["TimeoutError","RequestTimeout","RequestTimeoutException"],$et=[500,502,503,504],Bet=["ECONNRESET","ECONNREFUSED","EPIPE","ETIMEDOUT"]});var gur,IF,SY,Uet,n3=O(()=>{qet();gur=t=>t.$metadata?.clockSkewCorrected,IF=t=>t.$metadata?.httpStatusCode===429||Fet.includes(t.name)||t.$retryable?.throttling==!0,SY=t=>gur(t)||ket.includes(t.name)||Bet.includes(t?.code||"")||$et.includes(t.$metadata?.httpStatusCode||0),Uet=t=>{if(t.$metadata?.httpStatusCode!==void 0){let e=t.$metadata.httpStatusCode;return 500<=e&&e<=599&&!SY(t)}return!1}});var o3,Lbe=O(()=>{n3();o3=class{constructor(e){this.currentCapacity=0,this.enabled=!1,this.lastMaxRate=0,this.measuredTxRate=0,this.requestCount=0,this.lastTimestamp=0,this.timeWindow=0,this.beta=e?.beta??.7,this.minCapacity=e?.minCapacity??1,this.minFillRate=e?.minFillRate??.5,this.scaleConstant=e?.scaleConstant??.4,this.smooth=e?.smooth??.8;let r=this.getCurrentTimeInSeconds();this.lastThrottleTime=r,this.lastTxRateBucket=Math.floor(this.getCurrentTimeInSeconds()),this.fillRate=this.minFillRate,this.maxCapacity=this.minCapacity}getCurrentTimeInSeconds(){return Date.now()/1e3}async getSendToken(){return this.acquireTokenBucket(1)}async acquireTokenBucket(e){if(this.enabled){if(this.refillTokenBucket(),e>this.currentCapacity){let r=(e-this.currentCapacity)/this.fillRate*1e3;await new Promise(n=>setTimeout(n,r))}this.currentCapacity=this.currentCapacity-e}}refillTokenBucket(){let e=this.getCurrentTimeInSeconds();if(!this.lastTimestamp){this.lastTimestamp=e;return}let r=(e-this.lastTimestamp)*this.fillRate;this.currentCapacity=Math.min(this.maxCapacity,this.currentCapacity+r),this.lastTimestamp=e}updateClientSendingRate(e){let r;if(this.updateMeasuredRate(),IF(e)){let o=this.enabled?Math.min(this.measuredTxRate,this.fillRate):this.measuredTxRate;this.lastMaxRate=o,this.calculateTimeWindow(),this.lastThrottleTime=this.getCurrentTimeInSeconds(),r=this.cubicThrottle(o),this.enableTokenBucket()}else this.calculateTimeWindow(),r=this.cubicSuccess(this.getCurrentTimeInSeconds());let n=Math.min(r,2*this.measuredTxRate);this.updateTokenBucketRate(n)}calculateTimeWindow(){this.timeWindow=this.getPrecise(Math.pow(this.lastMaxRate*(1-this.beta)/this.scaleConstant,1/3))}cubicThrottle(e){return this.getPrecise(e*this.beta)}cubicSuccess(e){return this.getPrecise(this.scaleConstant*Math.pow(e-this.lastThrottleTime-this.timeWindow,3)+this.lastMaxRate)}enableTokenBucket(){this.enabled=!0}updateTokenBucketRate(e){this.refillTokenBucket(),this.fillRate=Math.max(e,this.minFillRate),this.maxCapacity=Math.max(e,this.minCapacity),this.currentCapacity=Math.min(this.currentCapacity,this.maxCapacity)}updateMeasuredRate(){let e=this.getCurrentTimeInSeconds(),r=Math.floor(e*2)/2;if(this.requestCount++,r>this.lastTxRateBucket){let n=this.requestCount/(r-this.lastTxRateBucket);this.measuredTxRate=this.getPrecise(n*this.smooth+this.measuredTxRate*(1-this.smooth)),this.requestCount=0,this.lastTxRateBucket=r}}getPrecise(e){return parseFloat(e.toFixed(8))}}});var xY,CY,MF=O(()=>{xY="amz-sdk-invocation-id",CY="amz-sdk-request"});var zet,Het=O(()=>{MF();zet=()=>{let t=100;return{computeNextBackoffDelay:n=>Math.floor(Math.min(2e4,Math.random()*2**n*t)),setDelayBase:n=>{t=n}}}});var Fbe,Vet=O(()=>{MF();Fbe=({retryDelay:t,retryCount:e,retryCost:r})=>({getRetryCount:()=>e,getRetryDelay:()=>Math.min(2e4,t),getRetryCost:()=>r})});var YR,PY=O(()=>{wY();MF();Het();Vet();YR=class{constructor(e){this.maxAttempts=e,this.mode=my.STANDARD,this.capacity=500,this.retryBackoffStrategy=zet(),this.maxAttemptsProvider=typeof e=="function"?e:async()=>e}async acquireInitialRetryToken(e){return Fbe({retryDelay:100,retryCount:0})}async refreshRetryTokenForRetry(e,r){let n=await this.getMaxAttempts();if(this.shouldRetry(e,r,n)){let o=r.errorType;this.retryBackoffStrategy.setDelayBase(o==="THROTTLING"?500:100);let i=this.retryBackoffStrategy.computeNextBackoffDelay(e.getRetryCount()),a=r.retryAfterHint?Math.max(r.retryAfterHint.getTime()-Date.now()||0,i):i,s=this.getCapacityCost(o);return this.capacity-=s,Fbe({retryDelay:a,retryCount:e.getRetryCount()+1,retryCost:s})}throw new Error("No retry token available")}recordSuccess(e){this.capacity=Math.max(500,this.capacity+(e.getRetryCost()??1))}getCapacity(){return this.capacity}async getMaxAttempts(){try{return await this.maxAttemptsProvider()}catch{return console.warn(`Max attempts provider could not resolve. Using default of ${c_}`),c_}}shouldRetry(e,r,n){return e.getRetryCount()+1<n&&this.capacity>=this.getCapacityCost(r.errorType)&&this.isRetryableError(r.errorType)}getCapacityCost(e){return e==="TRANSIENT"?10:5}isRetryableError(e){return e==="THROTTLING"||e==="TRANSIENT"}}});var EY,Yet=O(()=>{wY();Lbe();PY();EY=class{constructor(e,r){this.maxAttemptsProvider=e,this.mode=my.ADAPTIVE;let{rateLimiter:n}=r??{};this.rateLimiter=n??new o3,this.standardRetryStrategy=new YR(e)}async acquireInitialRetryToken(e){return await this.rateLimiter.getSendToken(),this.standardRetryStrategy.acquireInitialRetryToken(e)}async refreshRetryTokenForRetry(e,r){return this.rateLimiter.updateClientSendingRate(r),this.standardRetryStrategy.refreshRetryTokenForRetry(e,r)}recordSuccess(e){this.rateLimiter.updateClientSendingRate({}),this.standardRetryStrategy.recordSuccess(e)}}});var Zet=O(()=>{MF();PY()});var Xet=O(()=>{});var d_=O(()=>{Yet();Zet();Lbe();PY();wY();MF();Xet()});var Qet=O(()=>{});var ett=O(()=>{Qet()});var ttt=O(()=>{Ds()});var rtt=O(()=>{});var ntt=O(()=>{});function yur(t){return Object.keys(t).reduce((e,r)=>{let n=t[r];return{...e,[r]:Array.isArray(n)?[...n]:n}},{})}var jF,ott=O(()=>{jF=class t{constructor(e){this.method=e.method||"GET",this.hostname=e.hostname||"localhost",this.port=e.port,this.query=e.query||{},this.headers=e.headers||{},this.body=e.body,this.protocol=e.protocol?e.protocol.slice(-1)!==":"?`${e.protocol}:`:e.protocol:"https:",this.path=e.path?e.path.charAt(0)!=="/"?`/${e.path}`:e.path:"/",this.username=e.username,this.password=e.password,this.fragment=e.fragment}static clone(e){let r=new t({...e,headers:{...e.headers}});return r.query&&(r.query=yur(r.query)),r}static isInstance(e){if(!e)return!1;let r=e;return"method"in r&&"protocol"in r&&"hostname"in r&&"path"in r&&typeof r.query=="object"&&typeof r.headers=="object"}clone(){return t.clone(this)}}});var i3,itt=O(()=>{i3=class{constructor(e){this.statusCode=e.statusCode,this.reason=e.reason,this.headers=e.headers||{},this.body=e.body}static isInstance(e){if(!e)return!1;let r=e;return typeof r.statusCode=="number"&&typeof r.headers=="object"}}});var att=O(()=>{});var stt=O(()=>{});var TY=O(()=>{ett();ttt();rtt();ntt();ott();itt();att();stt()});var utt=O(()=>{d_()});var $be=O(()=>{d_()});var Bbe=O(()=>{n3()});var qbe,Ube=O(()=>{qbe=t=>t instanceof Error?t:t instanceof Object?Object.assign(new Error,t):typeof t=="string"?new Error(t):new Error(`AWS SDK error wrapper for ${t}`)});var zbe=O(()=>{TY();n3();d_();utt();$be();Bbe();Ube()});var ltt=O(()=>{d_();zbe()});var AY,ctt=O(()=>{py();d_();AY=t=>{let{retryStrategy:e}=t,r=Ad(t.maxAttempts??c_);return{...t,maxAttempts:r,retryStrategy:async()=>e||(await Ad(t.retryMode)()===my.ADAPTIVE?new EY(r):new YR(r))}}});var dtt=O(()=>{TY();d_()});var oT,ftt=O(()=>{oT=class{trace(){}debug(){}info(){}warn(){}error(){}}});var ZR,iT,NF,ptt,mtt,htt=O(()=>{ZR=(t,e)=>{let r=[];if(t&&r.push(t),e)for(let n of e)r.push(n);return r},iT=(t,e)=>`${t||"anonymous"}${e&&e.length>0?` (a.k.a. ${e.join(",")})`:""}`,NF=()=>{let t=[],e=[],r=!1,n=new Set,o=d=>d.sort((f,p)=>ptt[p.step]-ptt[f.step]||mtt[p.priority||"normal"]-mtt[f.priority||"normal"]),i=d=>{let f=!1,p=m=>{let h=ZR(m.name,m.aliases);if(h.includes(d)){f=!0;for(let b of h)n.delete(b);return!1}return!0};return t=t.filter(p),e=e.filter(p),f},a=d=>{let f=!1,p=m=>{if(m.middleware===d){f=!0;for(let h of ZR(m.name,m.aliases))n.delete(h);return!1}return!0};return t=t.filter(p),e=e.filter(p),f},s=d=>(t.forEach(f=>{d.add(f.middleware,{...f})}),e.forEach(f=>{d.addRelativeTo(f.middleware,{...f})}),d.identifyOnResolve?.(c.identifyOnResolve()),d),u=d=>{let f=[];return d.before.forEach(p=>{p.before.length===0&&p.after.length===0?f.push(p):f.push(...u(p))}),f.push(d),d.after.reverse().forEach(p=>{p.before.length===0&&p.after.length===0?f.push(p):f.push(...u(p))}),f},l=(d=!1)=>{let f=[],p=[],m={};return t.forEach(b=>{let g={...b,before:[],after:[]};for(let y of ZR(g.name,g.aliases))m[y]=g;f.push(g)}),e.forEach(b=>{let g={...b,before:[],after:[]};for(let y of ZR(g.name,g.aliases))m[y]=g;p.push(g)}),p.forEach(b=>{if(b.toMiddleware){let g=m[b.toMiddleware];if(g===void 0){if(d)return;throw new Error(`${b.toMiddleware} is not found when adding ${iT(b.name,b.aliases)} middleware ${b.relation} ${b.toMiddleware}`)}b.relation==="after"&&g.after.push(b),b.relation==="before"&&g.before.push(b)}}),o(f).map(u).reduce((b,g)=>(b.push(...g),b),[])},c={add:(d,f={})=>{let{name:p,override:m,aliases:h}=f,b={step:"initialize",priority:"normal",middleware:d,...f},g=ZR(p,h);if(g.length>0){if(g.some(y=>n.has(y))){if(!m)throw new Error(`Duplicate middleware name '${iT(p,h)}'`);for(let y of g){let w=t.findIndex(C=>C.name===y||C.aliases?.some(P=>P===y));if(w===-1)continue;let S=t[w];if(S.step!==b.step||b.priority!==S.priority)throw new Error(`"${iT(S.name,S.aliases)}" middleware with ${S.priority} priority in ${S.step} step cannot be overridden by "${iT(p,h)}" middleware with ${b.priority} priority in ${b.step} step.`);t.splice(w,1)}}for(let y of g)n.add(y)}t.push(b)},addRelativeTo:(d,f)=>{let{name:p,override:m,aliases:h}=f,b={middleware:d,...f},g=ZR(p,h);if(g.length>0){if(g.some(y=>n.has(y))){if(!m)throw new Error(`Duplicate middleware name '${iT(p,h)}'`);for(let y of g){let w=e.findIndex(C=>C.name===y||C.aliases?.some(P=>P===y));if(w===-1)continue;let S=e[w];if(S.toMiddleware!==b.toMiddleware||S.relation!==b.relation)throw new Error(`"${iT(S.name,S.aliases)}" middleware ${S.relation} "${S.toMiddleware}" middleware cannot be overridden by "${iT(p,h)}" middleware ${b.relation} "${b.toMiddleware}" middleware.`);e.splice(w,1)}}for(let y of g)n.add(y)}e.push(b)},clone:()=>s(NF()),use:d=>{d.applyToStack(c)},remove:d=>typeof d=="string"?i(d):a(d),removeByTag:d=>{let f=!1,p=m=>{let{tags:h,name:b,aliases:g}=m;if(h&&h.includes(d)){let y=ZR(b,g);for(let w of y)n.delete(w);return f=!0,!1}return!0};return t=t.filter(p),e=e.filter(p),f},concat:d=>{let f=s(NF());return f.use(d),f.identifyOnResolve(r||f.identifyOnResolve()||(d.identifyOnResolve?.()??!1)),f},applyToStack:s,identify:()=>l(!0).map(d=>{let f=d.step??d.relation+" "+d.toMiddleware;return iT(d.name,d.aliases)+" - "+f}),identifyOnResolve(d){return typeof d=="boolean"&&(r=d),r},resolve:(d,f)=>{for(let p of l().map(m=>m.middleware).reverse())d=p(d,f);return r&&console.log(c.identify()),d}};return c},ptt={initialize:5,serialize:4,build:3,finalizeRequest:2,deserialize:1},mtt={high:3,normal:2,low:1}});var Hbe=O(()=>{htt()});var XR,gtt=O(()=>{Hbe();XR=class{constructor(e){this.middlewareStack=NF(),this.config=e}send(e,r,n){let o=typeof r!="function"?r:void 0,i=typeof r=="function"?r:n,a=e.resolveMiddleware(this.middlewareStack,this.config,o);if(i)a(e).then(s=>i(null,s.output),s=>i(s)).catch(()=>{});else return a(e).then(s=>s.output)}destroy(){this.config.requestHandler.destroy&&this.config.requestHandler.destroy()}}});var BC,QR,aT,e1,ytt,Vbe=O(()=>{BC={},QR=new Array(64);for(let t=0,e=65,r=90;t+e<=r;t++){let n=String.fromCharCode(t+e);BC[n]=t,QR[t]=n}for(let t=0,e=97,r=122;t+e<=r;t++){let n=String.fromCharCode(t+e),o=t+26;BC[n]=o,QR[o]=n}for(let t=0;t<10;t++){BC[t.toString(10)]=t+52;let e=t.toString(10),r=t+52;BC[e]=r,QR[r]=e}BC["+"]=62;QR[62]="+";BC["/"]=63;QR[63]="/";aT=6,e1=8,ytt=63});var sT,btt=O(()=>{Vbe();sT=t=>{let e=t.length/4*3;t.slice(-2)==="=="?e-=2:t.slice(-1)==="="&&e--;let r=new ArrayBuffer(e),n=new DataView(r);for(let o=0;o<t.length;o+=4){let i=0,a=0;for(let l=o,c=o+3;l<=c;l++)if(t[l]!=="="){if(!(t[l]in BC))throw new TypeError(`Invalid character ${t[l]} in base64 string.`);i|=BC[t[l]]<<(c-l)*aT,a+=aT}else i>>=aT;let s=o/4*3;i>>=a%e1;let u=Math.floor(a/e1);for(let l=0;l<u;l++){let c=(u-l-1)*e1;n.setUint8(s+l,(i&255<<c)>>c)}}return new Uint8Array(r)}});var Wbe,Kbe=O(()=>{Wbe=t=>new TextEncoder().encode(t)});var _tt=O(()=>{Kbe()});var vtt=O(()=>{});var wtt=O(()=>{Kbe();_tt();vtt()});function uT(t){let e;typeof t=="string"?e=Wbe(t):e=t;let r=typeof e=="object"&&typeof e.length=="number",n=typeof e=="object"&&typeof e.byteOffset=="number"&&typeof e.byteLength=="number";if(!r&&!n)throw new Error("@smithy/util-base64: toBase64 encoder function only accepts string | Uint8Array.");let o="";for(let i=0;i<e.length;i+=3){let a=0,s=0;for(let l=i,c=Math.min(i+3,e.length);l<c;l++)a|=e[l]<<(c-l-1)*e1,s+=e1;let u=Math.ceil(s/aT);a<<=u*aT-s;for(let l=1;l<=u;l++){let c=(u-l)*aT;o+=QR[(a&ytt<<c)>>c]}o+="==".slice(0,4-u)}return o}var Stt=O(()=>{wtt();Vbe()});var DF=O(()=>{btt();Stt()});var Gbe,Jbe=O(()=>{Gbe=t=>new TextEncoder().encode(t)});var xtt=O(()=>{Jbe()});var IY,Ctt=O(()=>{IY=t=>{if(typeof t=="string")return t;if(typeof t!="object"||typeof t.byteOffset!="number"||typeof t.byteLength!="number")throw new Error("@smithy/util-utf8: toUtf8 encoder function only accepts string | Uint8Array.");return new TextDecoder("utf-8").decode(t)}});var Ybe=O(()=>{Jbe();xtt();Ctt()});function Ott(t,e="utf-8"){return e==="base64"?uT(t):IY(t)}function Ptt(t,e){return e==="base64"?qC.mutate(sT(t)):qC.mutate(Gbe(t))}var Ett=O(()=>{DF();Ybe();Zbe()});var qC,Zbe=O(()=>{Ett();qC=class t extends Uint8Array{static fromString(e,r="utf-8"){switch(typeof e){case"string":return Ptt(e,r);default:throw new Error(`Unsupported conversion from ${typeof e} to Uint8ArrayBlobAdapter.`)}}static mutate(e){return Object.setPrototypeOf(e,t.prototype),e}transformToString(e="utf-8"){return Ott(this,e)}}});var Ttt=O(()=>{});var Att=O(()=>{});var Itt=O(()=>{Att()});var Mtt=O(()=>{Ds()});var Rtt=O(()=>{});var jtt=O(()=>{});var Ntt=O(()=>{});var a3,Dtt=O(()=>{a3=class{constructor(e){this.statusCode=e.statusCode,this.reason=e.reason,this.headers=e.headers||{},this.body=e.body}static isInstance(e){if(!e)return!1;let r=e;return typeof r.statusCode=="number"&&typeof r.headers=="object"}}});var Ltt=O(()=>{});var Ftt=O(()=>{});var ktt=O(()=>{Itt();Mtt();Rtt();jtt();Ntt();Dtt();Ltt();Ftt()});var Dh,bur,Xbe=O(()=>{Dh=t=>encodeURIComponent(t).replace(/[!'()*]/g,bur),bur=t=>`%${t.charCodeAt(0).toString(16).toUpperCase()}`});var $tt=O(()=>{Xbe()});var MY=O(()=>{Xbe();$tt()});function Btt(t){let e=[];for(let r of Object.keys(t).sort()){let n=t[r];if(r=Dh(r),Array.isArray(n))for(let o=0,i=n.length;o<i;o++)e.push(`${r}=${Dh(n[o])}`);else{let o=r;(n||typeof n=="string")&&(o+=`=${Dh(n)}`),e.push(o)}}return e.join("&")}var qtt=O(()=>{MY()});function Utt(t=0){return new Promise((e,r)=>{t&&setTimeout(()=>{let n=new Error(`Request did not complete within ${t} ms`);n.name="TimeoutError",r(n)},t)})}var ztt=O(()=>{});var Qbe,lT,Htt=O(()=>{ktt();qtt();ztt();Qbe={supported:void 0},lT=class t{static create(e){return typeof e?.handle=="function"?e:new t(e)}constructor(e){typeof e=="function"?this.configProvider=e().then(r=>r||{}):(this.config=e??{},this.configProvider=Promise.resolve(this.config)),Qbe.supported===void 0&&(Qbe.supported=typeof Request<"u"&&"keepalive"in new Request("https://[::1]"))}destroy(){}async handle(e,{abortSignal:r}={}){this.config||(this.config=await this.configProvider);let n=this.config.requestTimeout,o=this.config.keepAlive===!0,i=this.config.credentials;if(r?.aborted){let g=new Error("Request aborted");return g.name="AbortError",Promise.reject(g)}let a=e.path,s=Btt(e.query||{});s&&(a+=`?${s}`),e.fragment&&(a+=`#${e.fragment}`);let u="";if(e.username!=null||e.password!=null){let g=e.username??"",y=e.password??"";u=`${g}:${y}@`}let{port:l,method:c}=e,d=`${e.protocol}//${u}${e.hostname}${l?`:${l}`:""}${a}`,f=c==="GET"||c==="HEAD"?void 0:e.body,p={body:f,headers:new Headers(e.headers),method:c,credentials:i};f&&(p.duplex="half"),typeof AbortController<"u"&&(p.signal=r),Qbe.supported&&(p.keepalive=o);let m=()=>{},h=new Request(d,p),b=[fetch(h).then(g=>{let y=g.headers,w={};for(let C of y.entries())w[C[0]]=C[1];return g.body!=null?{response:new a3({headers:w,reason:g.statusText,statusCode:g.status,body:g.body})}:g.blob().then(C=>({response:new a3({headers:w,reason:g.statusText,statusCode:g.status,body:C})}))}),Utt(n)];return r&&b.push(new Promise((g,y)=>{let w=()=>{let S=new Error("Request aborted");S.name="AbortError",y(S)};if(typeof r.addEventListener=="function"){let S=r;S.addEventListener("abort",w,{once:!0}),m=()=>S.removeEventListener("abort",w)}else r.onabort=w})),Promise.race(b).finally(m)}updateHttpClientConfig(e,r){this.config=void 0,this.configProvider=this.configProvider.then(n=>(n[e]=r,n))}httpHandlerConfigs(){return this.config??{}}}});async function _ur(t){let e=await wur(t),r=sT(e);return new Uint8Array(r)}async function vur(t){let e=[],r=t.getReader(),n=!1,o=0;for(;!n;){let{done:s,value:u}=await r.read();u&&(e.push(u),o+=u.length),n=s}let i=new Uint8Array(o),a=0;for(let s of e)i.set(s,a),a+=s.length;return i}function wur(t){return new Promise((e,r)=>{let n=new FileReader;n.onloadend=()=>{if(n.readyState!==2)return r(new Error("Reader aborted too early"));let o=n.result??"",i=o.indexOf(","),a=i>-1?i+1:o.length;e(o.substring(a))},n.onabort=()=>r(new Error("Read aborted")),n.onerror=()=>r(n.error),n.readAsDataURL(t)})}var LF,Vtt=O(()=>{DF();LF=t=>typeof Blob=="function"&&t instanceof Blob?_ur(t):vur(t)});var s3=O(()=>{Htt();Vtt()});function Ktt(t){let e="";for(let r=0;r<t.byteLength;r++)e+=Wtt[t[r]];return e}var Wtt,Sur,Gtt=O(()=>{Wtt={},Sur={};for(let t=0;t<256;t++){let e=t.toString(16).toLowerCase();e.length===1&&(e=`0${e}`),Wtt[t]=e,Sur[e]=t}});var e_e,t_e=O(()=>{e_e=t=>typeof ReadableStream=="function"&&(t?.constructor?.name===ReadableStream.name||t instanceof ReadableStream)});var Jtt,Ztt,Ytt,Xtt=O(()=>{s3();DF();Gtt();Ybe();t_e();Jtt="The stream has already been transformed.",Ztt=t=>{if(!Ytt(t)&&!e_e(t)){let o=t?.__proto__?.constructor?.name||t;throw new Error(`Unexpected stream implementation, expect Blob or ReadableStream, got ${o}`)}let e=!1,r=async()=>{if(e)throw new Error(Jtt);return e=!0,await LF(t)},n=o=>{if(typeof o.stream!="function")throw new Error(`Cannot transform payload Blob to web stream. Please make sure the Blob.stream() is polyfilled.
If you are using React Native, this API is not yet supported, see: https://react-native.canny.io/feature-requests/p/fetch-streaming-body`);return o.stream()};return Object.assign(t,{transformToByteArray:r,transformToString:async o=>{let i=await r();if(o==="base64")return uT(i);if(o==="hex")return Ktt(i);if(o===void 0||o==="utf8"||o==="utf-8")return IY(i);if(typeof TextDecoder=="function")return new TextDecoder(o).decode(i);throw new Error("TextDecoder is not available, please make sure polyfill is provided.")},transformToWebStream:()=>{if(e)throw new Error(Jtt);if(e=!0,Ytt(t))return n(t);if(e_e(t))return t;throw new Error(`Cannot transform payload to web stream, got ${t}`)}})},Ytt=t=>typeof Blob=="function"&&t instanceof Blob});var Qtt=O(()=>{});var ert=O(()=>{});var r_e=O(()=>{Zbe();Ttt();Xtt();Qtt();ert();t_e()});var cT,trt=O(()=>{r_e();cT=async(t=new Uint8Array,e)=>{if(t instanceof Uint8Array)return qC.mutate(t);if(!t)return qC.mutate(new Uint8Array);let r=e.streamCollector(t);return qC.mutate(await r)}});var Ot,n_e,rrt=O(()=>{Hbe();Ds();Ot=class{constructor(){this.middlewareStack=NF()}static classBuilder(){return new n_e}resolveMiddlewareWithContext(e,r,n,{middlewareFn:o,clientName:i,commandName:a,inputFilterSensitiveLog:s,outputFilterSensitiveLog:u,smithyContext:l,additionalContext:c,CommandCtor:d}){for(let b of o.bind(this)(d,e,r,n))this.middlewareStack.use(b);let f=e.concat(this.middlewareStack),{logger:p}=r,m={logger:p,clientName:i,commandName:a,inputFilterSensitiveLog:s,outputFilterSensitiveLog:u,[TF]:{commandInstance:this,...l},...c},{requestHandler:h}=r;return f.resolve(b=>h.handle(b.request,n||{}),m)}},n_e=class{constructor(){this._init=()=>{},this._ep={},this._middlewareFn=()=>[],this._commandName="",this._clientName="",this._additionalContext={},this._smithyContext={},this._inputFilterSensitiveLog=e=>e,this._outputFilterSensitiveLog=e=>e,this._serializer=null,this._deserializer=null}init(e){this._init=e}ep(e){return this._ep=e,this}m(e){return this._middlewareFn=e,this}s(e,r,n={}){return this._smithyContext={service:e,operation:r,...n},this}c(e={}){return this._additionalContext=e,this}n(e,r){return this._clientName=e,this._commandName=r,this}f(e=n=>n,r=n=>n){return this._inputFilterSensitiveLog=e,this._outputFilterSensitiveLog=r,this}ser(e){return this._serializer=e,this}de(e){return this._deserializer=e,this}build(){let e=this,r;return r=class extends Ot{static getEndpointParameterInstructions(){return e._ep}constructor(...[n]){super(),this.serialize=e._serializer,this.deserialize=e._deserializer,this.input=n??{},e._init(this)}resolveMiddleware(n,o,i){return this.resolveMiddlewareWithContext(n,o,i,{CommandCtor:r,middlewareFn:e._middlewareFn,clientName:e._clientName,commandName:e._commandName,inputFilterSensitiveLog:e._inputFilterSensitiveLog,outputFilterSensitiveLog:e._outputFilterSensitiveLog,smithyContext:e._smithyContext,additionalContext:e._additionalContext})}}}}});var RY,nrt=O(()=>{RY="***SensitiveInformation***"});var jY,ort=O(()=>{jY=(t,e)=>{for(let r of Object.keys(t)){let n=t[r],o=async function(a,s,u){let l=new n(a);if(typeof s=="function")this.send(l,s);else if(typeof u=="function"){if(typeof s!="object")throw new Error(`Expected http options but got ${typeof s}`);this.send(l,s||{},u)}else return this.send(l,s)},i=(r[0].toLowerCase()+r.slice(1)).replace(/Command$/,"");e.prototype[i]=o}}});var t1,xur,irt,Cur,art,srt,urt,o_e,Our,FF,sn,lrt,crt,Pur,u3,l3,i_e,drt,frt,prt,a_e=O(()=>{t1=t=>{if(t!=null){if(typeof t=="string"){let e=parseFloat(t);if(!Number.isNaN(e))return String(e)!==String(t)&&prt.warn(frt(`Expected number but observed string: ${t}`)),e}if(typeof t=="number")return t;throw new TypeError(`Expected number, got ${typeof t}: ${t}`)}},xur=Math.ceil(34028234663852886e22),irt=t=>{let e=t1(t);if(e!==void 0&&!Number.isNaN(e)&&e!==1/0&&e!==-1/0&&Math.abs(e)>xur)throw new TypeError(`Expected 32-bit float, got ${t}`);return e},Cur=t=>{if(t!=null){if(Number.isInteger(t)&&!Number.isNaN(t))return t;throw new TypeError(`Expected integer, got ${typeof t}: ${t}`)}},art=t=>o_e(t,32),srt=t=>o_e(t,16),urt=t=>o_e(t,8),o_e=(t,e)=>{let r=Cur(t);if(r!==void 0&&Our(r,e)!==r)throw new TypeError(`Expected ${e}-bit integer, got ${t}`);return r},Our=(t,e)=>{switch(e){case 32:return Int32Array.of(t)[0];case 16:return Int16Array.of(t)[0];case 8:return Int8Array.of(t)[0]}},FF=(t,e)=>{if(t==null)throw e?new TypeError(`Expected a non-null value for ${e}`):new TypeError("Expected a non-null value");return t},sn=t=>{if(t!=null){if(typeof t=="string")return t;if(["boolean","number","bigint"].includes(typeof t))return prt.warn(frt(`Expected string, got ${typeof t}: ${t}`)),String(t);throw new TypeError(`Expected string, got ${typeof t}: ${t}`)}},lrt=t=>t1(typeof t=="string"?u3(t):t),crt=t=>irt(typeof t=="string"?u3(t):t),Pur=/(-?(?:0|[1-9]\d*)(?:\.\d+)?(?:[eE][+-]?\d+)?)|(-?Infinity)|(NaN)/g,u3=t=>{let e=t.match(Pur);if(e===null||e[0].length!==t.length)throw new TypeError("Expected real number, got implicit NaN");return parseFloat(t)},l3=t=>art(typeof t=="string"?u3(t):t),i_e=t=>srt(typeof t=="string"?u3(t):t),drt=t=>urt(typeof t=="string"?u3(t):t),frt=t=>String(new TypeError(t).stack||t).split(`
`).slice(0,5).filter(e=>!e.includes("stackTraceWarning")).join(`
`),prt={warn:console.warn}});var Eur,Tur,mrt,Aur,hrt,eYn,tYn,rYn,NY,grt,nYn,Iur,Mur,Rur,r1,jur,Nur,s_e,yrt=O(()=>{a_e();Eur=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],Tur=new RegExp(/^(\d{4})-(\d{2})-(\d{2})[tT](\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?[zZ]$/),mrt=t=>{if(t==null)return;if(typeof t!="string")throw new TypeError("RFC-3339 date-times must be expressed as strings");let e=Tur.exec(t);if(!e)throw new TypeError("Invalid RFC-3339 date-time value");let[r,n,o,i,a,s,u,l]=e,c=i_e(s_e(n)),d=r1(o,"month",1,12),f=r1(i,"day",1,31);return grt(c,d,f,{hours:a,minutes:s,seconds:u,fractionalMilliseconds:l})},Aur=new RegExp(/^(\d{4})-(\d{2})-(\d{2})[tT](\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?(([-+]\d{2}\:\d{2})|[zZ])$/),hrt=t=>{if(t==null)return;if(typeof t!="string")throw new TypeError("RFC-3339 date-times must be expressed as strings");let e=Aur.exec(t);if(!e)throw new TypeError("Invalid RFC-3339 date-time value");let[r,n,o,i,a,s,u,l,c]=e,d=i_e(s_e(n)),f=r1(o,"month",1,12),p=r1(i,"day",1,31),m=grt(d,f,p,{hours:a,minutes:s,seconds:u,fractionalMilliseconds:l});return c.toUpperCase()!="Z"&&m.setTime(m.getTime()-Nur(c)),m},eYn=new RegExp(/^(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d{2}) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? GMT$/),tYn=new RegExp(/^(?:Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d{2})-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d{2}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? GMT$/),rYn=new RegExp(/^(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( [1-9]|\d{2}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? (\d{4})$/),NY=t=>{if(t==null)return;let e;if(typeof t=="number")e=t;else if(typeof t=="string")e=lrt(t);else if(typeof t=="object"&&t.tag===1)e=t.value;else throw new TypeError("Epoch timestamps must be expressed as floating point numbers or their string representation");if(Number.isNaN(e)||e===1/0||e===-1/0)throw new TypeError("Epoch timestamps must be valid, non-Infinite, non-NaN numerics");return new Date(Math.round(e*1e3))},grt=(t,e,r,n)=>{let o=e-1;return Mur(t,o,r),new Date(Date.UTC(t,o,r,r1(n.hours,"hour",0,23),r1(n.minutes,"minute",0,59),r1(n.seconds,"seconds",0,60),jur(n.fractionalMilliseconds)))},nYn=50*365*24*60*60*1e3,Iur=[31,28,31,30,31,30,31,31,30,31,30,31],Mur=(t,e,r)=>{let n=Iur[e];if(e===1&&Rur(t)&&(n=29),r>n)throw new TypeError(`Invalid day for ${Eur[e]} in ${t}: ${r}`)},Rur=t=>t%4===0&&(t%100!==0||t%400===0),r1=(t,e,r,n)=>{let o=drt(s_e(t));if(o<r||o>n)throw new TypeError(`${e} must be between ${r} and ${n}, inclusive`);return o},jur=t=>t==null?0:crt("0."+t)*1e3,Nur=t=>{let e=t[0],r=1;if(e=="+")r=1;else if(e=="-")r=-1;else throw new TypeError(`Offset direction, ${e}, must be "+" or "-"`);let n=Number(t.substring(1,3)),o=Number(t.substring(4,6));return r*(n*60+o)*60*1e3},s_e=t=>{let e=0;for(;e<t.length-1&&t.charAt(e)==="0";)e++;return e===0?t:t.slice(e)}});var kF,Na,u_e=O(()=>{kF=class t extends Error{constructor(e){super(e.message),Object.setPrototypeOf(this,t.prototype),this.name=e.name,this.$fault=e.$fault,this.$metadata=e.$metadata}},Na=(t,e={})=>{Object.entries(e).filter(([,n])=>n!==void 0).forEach(([n,o])=>{(t[n]==null||t[n]==="")&&(t[n]=o)});let r=t.message||t.Message||"UnknownError";return t.message=r,delete t.Message,t}});var Dur,DY,Lur,brt=O(()=>{u_e();Dur=({output:t,parsedBody:e,exceptionCtor:r,errorCode:n})=>{let o=Lur(t),i=o.httpStatusCode?o.httpStatusCode+"":void 0,a=new r({name:e?.code||e?.Code||n||i||"UnknownError",$fault:"client",$metadata:o});throw Na(a,e)},DY=t=>({output:e,parsedBody:r,errorCode:n})=>{Dur({output:e,parsedBody:r,exceptionCtor:t,errorCode:n})},Lur=t=>({httpStatusCode:t.statusCode,requestId:t.headers["x-amzn-requestid"]??t.headers["x-amzn-request-id"]??t.headers["x-amz-request-id"],extendedRequestId:t.headers["x-amz-id-2"],cfId:t.headers["x-amz-cf-id"]})});var LY,_rt=O(()=>{LY=t=>{switch(t){case"standard":return{retryMode:"standard",connectionTimeout:3100};case"in-region":return{retryMode:"standard",connectionTimeout:1100};case"cross-region":return{retryMode:"standard",connectionTimeout:3100};case"mobile":return{retryMode:"standard",connectionTimeout:3e4};default:return{}}}});var vrt=O(()=>{});var wrt,Srt,xrt=O(()=>{Ds();wrt=t=>{let e=[];for(let r in EF){let n=EF[r];t[n]!==void 0&&e.push({algorithmId:()=>n,checksumConstructor:()=>t[n]})}return{_checksumAlgorithms:e,addChecksumAlgorithm(r){this._checksumAlgorithms.push(r)},checksumAlgorithms(){return this._checksumAlgorithms}}},Srt=t=>{let e={};return t.checksumAlgorithms().forEach(r=>{e[r.algorithmId()]=r.checksumConstructor()}),e}});var Crt,Ort,Prt=O(()=>{Crt=t=>{let e=t.retryStrategy;return{setRetryStrategy(r){e=r},retryStrategy(){return e}}},Ort=t=>{let e={};return e.retryStrategy=t.retryStrategy(),e}});var FY,kY,Ert=O(()=>{xrt();Prt();FY=t=>({...wrt(t),...Crt(t)}),kY=t=>({...Srt(t),...Ort(t)})});var Trt=O(()=>{Ert()});function $Y(t){return encodeURIComponent(t).replace(/[!'()*]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}var l_e=O(()=>{});var Art=O(()=>{});var c_e,Irt=O(()=>{c_e=t=>{let e="#text";for(let r in t)t.hasOwnProperty(r)&&t[r][e]!==void 0?t[r]=t[r][e]:typeof t[r]=="object"&&t[r]!==null&&(t[r]=c_e(t[r]));return t}});var d_e,Mrt=O(()=>{d_e=function(){let t=Object.getPrototypeOf(this).constructor,e=Function.bind.apply(String,[null,...arguments]),r=new e;return Object.setPrototypeOf(r,t.prototype),r};d_e.prototype=Object.create(String.prototype,{constructor:{value:d_e,enumerable:!1,writable:!0,configurable:!0}});Object.setPrototypeOf(d_e,String)});var c3,Fur,kur,$ur,Rrt=O(()=>{c3=(t,e)=>{let r={};for(let n in e)Fur(r,t,e,n);return r},Fur=(t,e,r,n)=>{if(e!==null){let a=r[n];typeof a=="function"&&(a=[,a]);let[s=kur,u=$ur,l=n]=a;(typeof s=="function"&&s(e[l])||typeof s!="function"&&s)&&(t[n]=u(e[l]));return}let[o,i]=r[n];if(typeof i=="function"){let a,s=o===void 0&&(a=i())!=null,u=typeof o=="function"&&!!o(void 0)||typeof o!="function"&&!!o;s?t[n]=a:u&&(t[n]=i())}else{let a=o===void 0&&i!=null,s=typeof o=="function"&&!!o(i)||typeof o!="function"&&!!o;(a||s)&&(t[n]=i)}},kur=t=>t!=null,$ur=t=>t});var jrt=O(()=>{l_e()});var Nrt=O(()=>{});var rr,Drt=O(()=>{rr=t=>{if(t==null)return{};if(Array.isArray(t))return t.filter(e=>e!=null).map(rr);if(typeof t=="object"){let e={};for(let r of Object.keys(t))t[r]!=null&&(e[r]=rr(t[r]));return e}return t}});var Lrt=O(()=>{});var or=O(()=>{ftt();gtt();trt();rrt();nrt();ort();yrt();brt();_rt();vrt();Trt();u_e();l_e();Art();Irt();Mrt();Rrt();a_e();jrt();Nrt();Drt();Lrt()});var Frt,krt=O(()=>{Frt=t=>t?.body instanceof ReadableStream});var Bur,qur,Uur,zur,f_e,BY,Hur,$rt=O(()=>{TY();n3();or();d_();wz();krt();Ube();Bur=t=>(e,r)=>async n=>{let o=await t.retryStrategy(),i=await t.maxAttempts();if(qur(o)){o=o;let a=await o.acquireInitialRetryToken(r.partition_id),s=new Error,u=0,l=0,{request:c}=n,d=jF.isInstance(c);for(d&&(c.headers[xY]=Jx());;)try{d&&(c.headers[CY]=`attempt=${u+1}; max=${i}`);let{response:f,output:p}=await e(n);return o.recordSuccess(a),p.$metadata.attempts=u+1,p.$metadata.totalRetryDelay=l,{response:f,output:p}}catch(f){let p=Uur(f);if(s=qbe(f),d&&Frt(c))throw(r.logger instanceof oT?console:r.logger)?.warn("An error was encountered in a non-retryable streaming request."),s;try{a=await o.refreshRetryTokenForRetry(a,p)}catch{throw s.$metadata||(s.$metadata={}),s.$metadata.attempts=u+1,s.$metadata.totalRetryDelay=l,s}u=a.getRetryCount();let m=a.getRetryDelay();l+=m,await new Promise(h=>setTimeout(h,m))}}else return o=o,o?.mode&&(r.userAgent=[...r.userAgent||[],["cfg/retry-mode",o.mode]]),o.retry(e,n)},qur=t=>typeof t.acquireInitialRetryToken<"u"&&typeof t.refreshRetryTokenForRetry<"u"&&typeof t.recordSuccess<"u",Uur=t=>{let e={error:t,errorType:zur(t)},r=Hur(t.$response);return r&&(e.retryAfterHint=r),e},zur=t=>IF(t)?"THROTTLING":SY(t)?"TRANSIENT":Uet(t)?"SERVER_ERROR":"CLIENT_ERROR",f_e={name:"retryMiddleware",tags:["RETRY"],step:"finalizeRequest",priority:"high",override:!0},BY=t=>({applyToStack:e=>{e.add(Bur(t),f_e)}}),Hur=t=>{if(!i3.isInstance(t))return;let e=Object.keys(t.headers).find(i=>i.toLowerCase()==="retry-after");if(!e)return;let r=t.headers[e],n=Number(r);return Number.isNaN(n)?new Date(r):new Date(n*1e3)}});var qY=O(()=>{ltt();zbe();ctt();$be();dtt();Bbe();$rt()});var Vur,UY,Brt=O(()=>{qY();Dbe();Vur={step:"finalizeRequest",tags:["HTTP_SIGNING"],name:"httpSigningMiddleware",aliases:["apiKeyMiddleware","tokenMiddleware","awsAuthMiddleware"],override:!0,relation:"after",toMiddleware:f_e.name},UY=t=>({applyToStack:e=>{e.addRelativeTo(Let(t),Vur)}})});var qrt=O(()=>{Dbe();Brt()});var $F,Urt=O(()=>{$F=class{constructor(e){this.authSchemes=new Map;for(let[r,n]of Object.entries(e))n!==void 0&&this.authSchemes.set(r,n)}getIdentityProvider(e){return this.authSchemes.get(e)}}});var zrt=O(()=>{t3();Ds()});var Hrt=O(()=>{t3()});var BF,Vrt=O(()=>{BF=class{async sign(e,r,n){return e}}});var Wrt=O(()=>{zrt();Hrt();Vrt()});var Wur,Krt,p_e,Grt,Jrt=O(()=>{Wur=t=>e=>p_e(e)&&e.expiration.getTime()-Date.now()<t,Krt=Wur(3e5),p_e=t=>t.expiration!==void 0,Grt=(t,e,r)=>{if(t===void 0)return;let n=typeof t!="function"?async()=>Promise.resolve(t):t,o,i,a,s=!1,u=async l=>{i||(i=n(l));try{o=await i,a=!0,s=!1}finally{i=void 0}return o};return e===void 0?async l=>((!a||l?.forceRefresh)&&(o=await u(l)),o):async l=>((!a||l?.forceRefresh)&&(o=await u(l)),s?o:r(o)?(e(o)&&await u(l),o):(s=!0,o))}});var Yrt=O(()=>{Urt();Wrt();Jrt()});var Zrt=O(()=>{Ds()});var qF,Xrt=O(()=>{qF=t=>{if(typeof t=="function")return t;let e=Promise.resolve(t);return()=>e}});var Qrt=O(()=>{t3();or()});function m_e(t,e,r,n,o){return async function*(a,s,...u){let l=a.startingToken||void 0,c=!0,d;for(;c;){if(s[r]=l,o&&(s[o]=s[o]??a.pageSize),a.client instanceof t)d=await Kur(e,a.client,s,...u);else throw new Error(`Invalid client, expected instance of ${t.name}`);yield d;let f=l;l=Gur(d,n),c=!!(l&&(!a.stopOnSameToken||l!==f))}return void 0}}var Kur,Gur,ent=O(()=>{Kur=async(t,e,r,...n)=>await e.send(new t(r),...n);Gur=(t,e)=>{let r=t,n=e.split(".");for(let o of n){if(!r||typeof r!="object")return;r=r[o]}return r}});var dT=O(()=>{Pet();qrt();Yrt();Zrt();Xrt();Qrt();ent()});var tnt=O(()=>{});var rnt=O(()=>{tnt()});var nnt=O(()=>{Ds()});var ont=O(()=>{});var int=O(()=>{});function Jur(t){return Object.keys(t).reduce((e,r)=>{let n=t[r];return{...e,[r]:Array.isArray(n)?[...n]:n}},{})}var zY,ant=O(()=>{zY=class t{constructor(e){this.method=e.method||"GET",this.hostname=e.hostname||"localhost",this.port=e.port,this.query=e.query||{},this.headers=e.headers||{},this.body=e.body,this.protocol=e.protocol?e.protocol.slice(-1)!==":"?`${e.protocol}:`:e.protocol:"https:",this.path=e.path?e.path.charAt(0)!=="/"?`/${e.path}`:e.path:"/",this.username=e.username,this.password=e.password,this.fragment=e.fragment}static clone(e){let r=new t({...e,headers:{...e.headers}});return r.query&&(r.query=Jur(r.query)),r}static isInstance(e){if(!e)return!1;let r=e;return"method"in r&&"protocol"in r&&"hostname"in r&&"path"in r&&typeof r.query=="object"&&typeof r.headers=="object"}clone(){return t.clone(this)}}});var snt=O(()=>{});var unt=O(()=>{});var lnt=O(()=>{});var cnt=O(()=>{rnt();nnt();ont();int();ant();snt();unt();lnt()});function Yur(t){return e=>async r=>{let n=r.request;if(zY.isInstance(n)){let{body:o,headers:i}=n;if(o&&Object.keys(i).map(a=>a.toLowerCase()).indexOf(dnt)===-1)try{let a=t(o);n.headers={...n.headers,[dnt]:String(a)}}catch{}}return e({...r,request:n})}}var dnt,Zur,HY,h_e=O(()=>{cnt();dnt="content-length";Zur={step:"build",tags:["SET_CONTENT_LENGTH","CONTENT_LENGTH"],name:"contentLengthMiddleware",override:!0},HY=t=>({applyToStack:e=>{e.add(Yur(t.bodyLengthChecker),Zur)}})});var fnt=O(()=>{});var pnt=O(()=>{fnt()});var mnt=O(()=>{});var hnt=O(()=>{mnt()});var gnt=O(()=>{Ds()});var ynt=O(()=>{});var bnt=O(()=>{});function Xur(t){return Object.keys(t).reduce((e,r)=>{let n=t[r];return{...e,[r]:Array.isArray(n)?[...n]:n}},{})}var fT,_nt=O(()=>{fT=class t{constructor(e){this.method=e.method||"GET",this.hostname=e.hostname||"localhost",this.port=e.port,this.query=e.query||{},this.headers=e.headers||{},this.body=e.body,this.protocol=e.protocol?e.protocol.slice(-1)!==":"?`${e.protocol}:`:e.protocol:"https:",this.path=e.path?e.path.charAt(0)!=="/"?`/${e.path}`:e.path:"/",this.username=e.username,this.password=e.password,this.fragment=e.fragment}static clone(e){let r=new t({...e,headers:{...e.headers}});return r.query&&(r.query=Xur(r.query)),r}static isInstance(e){if(!e)return!1;let r=e;return"method"in r&&"protocol"in r&&"hostname"in r&&"path"in r&&typeof r.query=="object"&&typeof r.headers=="object"}clone(){return t.clone(this)}}});var VY,vnt=O(()=>{VY=class{constructor(e){this.statusCode=e.statusCode,this.reason=e.reason,this.headers=e.headers||{},this.body=e.body}static isInstance(e){if(!e)return!1;let r=e;return typeof r.statusCode=="number"&&typeof r.headers=="object"}}});var wnt=O(()=>{});var Snt=O(()=>{});var d3=O(()=>{hnt();gnt();ynt();bnt();_nt();vnt();wnt();Snt()});var g_e,xnt=O(()=>{d3();g_e=t=>VY.isInstance(t)?t.headers?.date??t.headers?.Date:void 0});var WY,y_e=O(()=>{WY=t=>new Date(Date.now()+t)});var Cnt,Ont=O(()=>{y_e();Cnt=(t,e)=>Math.abs(WY(e).getTime()-t)>=3e5});var b_e,Pnt=O(()=>{Ont();b_e=(t,e)=>{let r=Date.parse(t);return Cnt(r,e)?r-Date.now():e}});var Ent=O(()=>{xnt();y_e();Pnt()});var f3,Tnt,n1,Ant=O(()=>{d3();Ent();f3=(t,e)=>{if(!e)throw new Error(`Property \`${t}\` is not resolved for AWS SDK SigV4Auth`);return e},Tnt=async t=>{let e=f3("context",t.context),r=f3("config",t.config),n=e.endpointV2?.properties?.authSchemes?.[0],i=await f3("signer",r.signer)(n),a=t?.signingRegion,s=t?.signingRegionSet,u=t?.signingName;return{config:r,signer:i,signingRegion:a,signingRegionSet:s,signingName:u}},n1=class{async sign(e,r,n){if(!fT.isInstance(e))throw new Error("The request is not an instance of `HttpRequest` and cannot be signed");let o=await Tnt(n),{config:i,signer:a}=o,{signingRegion:s,signingName:u}=o,l=n.context;if(l?.authSchemes?.length??!1){let[d,f]=l.authSchemes;d?.name==="sigv4a"&&f?.name==="sigv4"&&(s=f?.signingRegion??s,u=f?.signingName??u)}return await a.sign(e,{signingDate:WY(i.systemClockOffset),signingRegion:s,signingService:u})}errorHandler(e){return r=>{let n=r.ServerTime??g_e(r.$response);if(n){let o=f3("config",e.config),i=o.systemClockOffset;o.systemClockOffset=b_e(n,o.systemClockOffset),o.systemClockOffset!==i&&r.$metadata&&(r.$metadata.clockSkewCorrected=!0)}throw r}}successHandler(e,r){let n=g_e(e);if(n){let o=f3("config",r.config);o.systemClockOffset=b_e(n,o.systemClockOffset)}}}});var Int=O(()=>{dT();FC()});function Rnt(t){if(t.length%2!==0)throw new Error("Hex encoded strings must have an even number length");let e=new Uint8Array(t.length/2);for(let r=0;r<t.length;r+=2){let n=t.slice(r,r+2).toLowerCase();if(n in __e)e[r/2]=__e[n];else throw new Error(`Cannot decode unrecognized sequence ${n} as hexadecimal`)}return e}function hy(t){let e="";for(let r=0;r<t.byteLength;r++)e+=Mnt[t[r]];return e}var Mnt,__e,p3=O(()=>{Mnt={},__e={};for(let t=0;t<256;t++){let e=t.toString(16).toLowerCase();e.length===1&&(e=`0${e}`),Mnt[t]=e,__e[e]=t}});var m3,v_e=O(()=>{m3=t=>new TextEncoder().encode(t)});var pT,jnt=O(()=>{v_e();pT=t=>typeof t=="string"?m3(t):ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(t)});var Nnt=O(()=>{});var h3=O(()=>{v_e();jnt();Nnt()});var Dnt,Lnt,w_e,Fnt,knt,S_e,x_e,C_e,O_e,Qur,$nt,Bnt,g3,qnt,Unt,znt,Hnt,KY,Vnt,Wnt,Knt,P_e,Gnt,o1=O(()=>{Dnt="X-Amz-Algorithm",Lnt="X-Amz-Credential",w_e="X-Amz-Date",Fnt="X-Amz-SignedHeaders",knt="X-Amz-Expires",S_e="X-Amz-Signature",x_e="X-Amz-Security-Token",C_e="authorization",O_e=w_e.toLowerCase(),Qur="date",$nt=[C_e,O_e,Qur],Bnt=S_e.toLowerCase(),g3="x-amz-content-sha256",qnt=x_e.toLowerCase(),Unt={authorization:!0,"cache-control":!0,connection:!0,expect:!0,from:!0,"keep-alive":!0,"max-forwards":!0,pragma:!0,referer:!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0,"user-agent":!0,"x-amzn-trace-id":!0},znt=/^proxy-/,Hnt=/^sec-/,KY="AWS4-HMAC-SHA256",Vnt="AWS4-HMAC-SHA256-PAYLOAD",Wnt="UNSIGNED-PAYLOAD",Knt=50,P_e="aws4_request",Gnt=60*60*24*7});var GY,E_e,JY,Ynt,Jnt,T_e=O(()=>{p3();h3();o1();GY={},E_e=[],JY=(t,e,r)=>`${t}/${e}/${r}/${P_e}`,Ynt=async(t,e,r,n,o)=>{let i=await Jnt(t,e.secretAccessKey,e.accessKeyId),a=`${r}:${n}:${o}:${hy(i)}:${e.sessionToken}`;if(a in GY)return GY[a];for(E_e.push(a);E_e.length>Knt;)delete GY[E_e.shift()];let s=`AWS4${e.secretAccessKey}`;for(let u of[r,n,o,P_e])s=await Jnt(t,s,u);return GY[a]=s},Jnt=(t,e,r)=>{let n=new t(e);return n.update(pT(r)),n.digest()}});var YY,A_e=O(()=>{o1();YY=({headers:t},e,r)=>{let n={};for(let o of Object.keys(t).sort()){if(t[o]==null)continue;let i=o.toLowerCase();(i in Unt||e?.has(i)||znt.test(i)||Hnt.test(i))&&(!r||r&&!r.has(i))||(n[i]=t[o].trim().replace(/\s+/g," "))}return n}});var I_e,M_e=O(()=>{MY();o1();I_e=({query:t={}})=>{let e=[],r={};for(let n of Object.keys(t).sort()){if(n.toLowerCase()===Bnt)continue;e.push(n);let o=t[n];typeof o=="string"?r[n]=`${Dh(n)}=${Dh(o)}`:Array.isArray(o)&&(r[n]=o.slice(0).reduce((i,a)=>i.concat([`${Dh(n)}=${Dh(a)}`]),[]).sort().join("&"))}return e.map(n=>r[n]).filter(n=>n).join("&")}});var Znt,Xnt=O(()=>{Znt=t=>typeof ArrayBuffer=="function"&&t instanceof ArrayBuffer||Object.prototype.toString.call(t)==="[object ArrayBuffer]"});var y3,R_e=O(()=>{Xnt();p3();h3();o1();y3=async({headers:t,body:e},r)=>{for(let n of Object.keys(t))if(n.toLowerCase()===g3)return t[n];if(e==null)return"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855";if(typeof e=="string"||ArrayBuffer.isView(e)||Znt(e)){let n=new r;return n.update(pT(e)),hy(await n.digest())}return Wnt}});function eot(t){for(let e=0;e<8;e++)t[e]^=255;for(let e=7;e>-1&&(t[e]++,t[e]===0);e--);}var ZY,Qnt,elr,j_e,tot=O(()=>{p3();h3();ZY=class{format(e){let r=[];for(let i of Object.keys(e)){let a=m3(i);r.push(Uint8Array.from([a.byteLength]),a,this.formatHeaderValue(e[i]))}let n=new Uint8Array(r.reduce((i,a)=>i+a.byteLength,0)),o=0;for(let i of r)n.set(i,o),o+=i.byteLength;return n}formatHeaderValue(e){switch(e.type){case"boolean":return Uint8Array.from([e.value?0:1]);case"byte":return Uint8Array.from([2,e.value]);case"short":let r=new DataView(new ArrayBuffer(3));return r.setUint8(0,3),r.setInt16(1,e.value,!1),new Uint8Array(r.buffer);case"integer":let n=new DataView(new ArrayBuffer(5));return n.setUint8(0,4),n.setInt32(1,e.value,!1),new Uint8Array(n.buffer);case"long":let o=new Uint8Array(9);return o[0]=5,o.set(e.value.bytes,1),o;case"binary":let i=new DataView(new ArrayBuffer(3+e.value.byteLength));i.setUint8(0,6),i.setUint16(1,e.value.byteLength,!1);let a=new Uint8Array(i.buffer);return a.set(e.value,3),a;case"string":let s=m3(e.value),u=new DataView(new ArrayBuffer(3+s.byteLength));u.setUint8(0,7),u.setUint16(1,s.byteLength,!1);let l=new Uint8Array(u.buffer);return l.set(s,3),l;case"timestamp":let c=new Uint8Array(9);return c[0]=8,c.set(j_e.fromNumber(e.value.valueOf()).bytes,1),c;case"uuid":if(!elr.test(e.value))throw new Error(`Invalid UUID received: ${e.value}`);let d=new Uint8Array(17);return d[0]=9,d.set(Rnt(e.value.replace(/\-/g,"")),1),d}}};(function(t){t[t.boolTrue=0]="boolTrue",t[t.boolFalse=1]="boolFalse",t[t.byte=2]="byte",t[t.short=3]="short",t[t.integer=4]="integer",t[t.long=5]="long",t[t.byteArray=6]="byteArray",t[t.string=7]="string",t[t.timestamp=8]="timestamp",t[t.uuid=9]="uuid"})(Qnt||(Qnt={}));elr=/^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/,j_e=class t{constructor(e){if(this.bytes=e,e.byteLength!==8)throw new Error("Int64 buffers must be exactly 8 bytes")}static fromNumber(e){if(e>9223372036854776e3||e<-9223372036854776e3)throw new Error(`${e} is too large (or, if negative, too small) to represent as an Int64`);let r=new Uint8Array(8);for(let n=7,o=Math.abs(Math.round(e));n>-1&&o>0;n--,o/=256)r[n]=o;return e<0&&eot(r),new t(r)}valueOf(){let e=this.bytes.slice(0),r=e[0]&128;return r&&eot(e),parseInt(hy(e),16)*(r?-1:1)}toString(){return String(this.valueOf())}}});var rot,not=O(()=>{rot=(t,e)=>{t=t.toLowerCase();for(let r of Object.keys(e))if(t===r.toLowerCase())return!0;return!1}});var N_e,D_e=O(()=>{d3();N_e=(t,e={})=>{let{headers:r,query:n={}}=fT.clone(t);for(let o of Object.keys(r)){let i=o.toLowerCase();i.slice(0,6)==="x-amz-"&&!e.unhoistableHeaders?.has(i)&&(n[o]=r[o],delete r[o])}return{...t,headers:r,query:n}}});var XY,L_e=O(()=>{d3();o1();XY=t=>{t=fT.clone(t);for(let e of Object.keys(t.headers))$nt.indexOf(e.toLowerCase())>-1&&delete t.headers[e];return t}});var oot,tlr,iot=O(()=>{oot=t=>tlr(t).toISOString().replace(/\.\d{3}Z$/,"Z"),tlr=t=>typeof t=="number"?new Date(t*1e3):typeof t=="string"?Number(t)?new Date(Number(t)*1e3):new Date(t):t});var b3,QY,aot,sot=O(()=>{p3();py();MY();h3();o1();T_e();A_e();M_e();R_e();tot();not();D_e();L_e();iot();b3=class{constructor({applyChecksum:e,credentials:r,region:n,service:o,sha256:i,uriEscapePath:a=!0}){this.headerFormatter=new ZY,this.service=o,this.sha256=i,this.uriEscapePath=a,this.applyChecksum=typeof e=="boolean"?e:!0,this.regionProvider=Ad(n),this.credentialProvider=Ad(r)}async presign(e,r={}){let{signingDate:n=new Date,expiresIn:o=3600,unsignableHeaders:i,unhoistableHeaders:a,signableHeaders:s,signingRegion:u,signingService:l}=r,c=await this.credentialProvider();this.validateResolvedCredentials(c);let d=u??await this.regionProvider(),{longDate:f,shortDate:p}=QY(n);if(o>Gnt)return Promise.reject("Signature version 4 presigned URLs must have an expiration date less than one week in the future");let m=JY(p,d,l??this.service),h=N_e(XY(e),{unhoistableHeaders:a});c.sessionToken&&(h.query[x_e]=c.sessionToken),h.query[Dnt]=KY,h.query[Lnt]=`${c.accessKeyId}/${m}`,h.query[w_e]=f,h.query[knt]=o.toString(10);let b=YY(h,i,s);return h.query[Fnt]=aot(b),h.query[S_e]=await this.getSignature(f,m,this.getSigningKey(c,d,p,l),this.createCanonicalRequest(h,b,await y3(e,this.sha256))),h}async sign(e,r){return typeof e=="string"?this.signString(e,r):e.headers&&e.payload?this.signEvent(e,r):e.message?this.signMessage(e,r):this.signRequest(e,r)}async signEvent({headers:e,payload:r},{signingDate:n=new Date,priorSignature:o,signingRegion:i,signingService:a}){let s=i??await this.regionProvider(),{shortDate:u,longDate:l}=QY(n),c=JY(u,s,a??this.service),d=await y3({headers:{},body:r},this.sha256),f=new this.sha256;f.update(e);let p=hy(await f.digest()),m=[Vnt,l,c,o,p,d].join(`
`);return this.signString(m,{signingDate:n,signingRegion:s,signingService:a})}async signMessage(e,{signingDate:r=new Date,signingRegion:n,signingService:o}){return this.signEvent({headers:this.headerFormatter.format(e.message.headers),payload:e.message.body},{signingDate:r,signingRegion:n,signingService:o,priorSignature:e.priorSignature}).then(a=>({message:e.message,signature:a}))}async signString(e,{signingDate:r=new Date,signingRegion:n,signingService:o}={}){let i=await this.credentialProvider();this.validateResolvedCredentials(i);let a=n??await this.regionProvider(),{shortDate:s}=QY(r),u=new this.sha256(await this.getSigningKey(i,a,s,o));return u.update(pT(e)),hy(await u.digest())}async signRequest(e,{signingDate:r=new Date,signableHeaders:n,unsignableHeaders:o,signingRegion:i,signingService:a}={}){let s=await this.credentialProvider();this.validateResolvedCredentials(s);let u=i??await this.regionProvider(),l=XY(e),{longDate:c,shortDate:d}=QY(r),f=JY(d,u,a??this.service);l.headers[O_e]=c,s.sessionToken&&(l.headers[qnt]=s.sessionToken);let p=await y3(l,this.sha256);!rot(g3,l.headers)&&this.applyChecksum&&(l.headers[g3]=p);let m=YY(l,o,n),h=await this.getSignature(c,f,this.getSigningKey(s,u,d,a),this.createCanonicalRequest(l,m,p));return l.headers[C_e]=`${KY} Credential=${s.accessKeyId}/${f}, SignedHeaders=${aot(m)}, Signature=${h}`,l}createCanonicalRequest(e,r,n){let o=Object.keys(r).sort();return`${e.method}
${this.getCanonicalPath(e)}
${I_e(e)}
${o.map(i=>`${i}:${r[i]}`).join(`
`)}

${o.join(";")}
${n}`}async createStringToSign(e,r,n){let o=new this.sha256;o.update(pT(n));let i=await o.digest();return`${KY}
${e}
${r}
${hy(i)}`}getCanonicalPath({path:e}){if(this.uriEscapePath){let r=[];for(let i of e.split("/"))i?.length!==0&&i!=="."&&(i===".."?r.pop():r.push(i));let n=`${e?.startsWith("/")?"/":""}${r.join("/")}${r.length>0&&e?.endsWith("/")?"/":""}`;return Dh(n).replace(/%2F/g,"/")}return e}async getSignature(e,r,n,o){let i=await this.createStringToSign(e,r,o),a=new this.sha256(await n);return a.update(pT(i)),hy(await a.digest())}getSigningKey(e,r,n,o){return Ynt(this.sha256,e,n,r,o||this.service)}validateResolvedCredentials(e){if(typeof e!="object"||typeof e.accessKeyId!="string"||typeof e.secretAccessKey!="string")throw new Error("Resolved credential object is not valid")}},QY=t=>{let e=oot(t).replace(/[\-:]/g,"");return{longDate:e,shortDate:e.slice(0,8)}},aot=t=>Object.keys(t).sort().join(";")});var uot=O(()=>{sot();A_e();M_e();R_e();D_e();L_e();T_e()});var eZ,lot=O(()=>{dT();uot();eZ=t=>{let e;t.credentials&&(e=Grt(t.credentials,Krt,p_e)),e||(t.credentialDefaultProvider?e=qF(t.credentialDefaultProvider(Object.assign({},t,{parentClientConfig:t}))):e=async()=>{throw new Error("`credentials` is missing")});let{signingEscapePath:r=!0,systemClockOffset:n=t.systemClockOffset||0,sha256:o}=t,i;return t.signer?i=qF(t.signer):t.regionInfoProvider?i=()=>qF(t.region)().then(async a=>[await t.regionInfoProvider(a,{useFipsEndpoint:await t.useFipsEndpoint(),useDualstackEndpoint:await t.useDualstackEndpoint()})||{},a]).then(([a,s])=>{let{signingRegion:u,signingService:l}=a;t.signingRegion=t.signingRegion||u||s,t.signingName=t.signingName||l||t.serviceId;let c={...t,credentials:e,region:t.signingRegion,service:t.signingName,sha256:o,uriEscapePath:r},d=t.signerConstructor||b3;return new d(c)}):i=async a=>{a=Object.assign({},{name:"sigv4",signingName:t.signingName||t.defaultSigningName,signingRegion:await qF(t.region)(),properties:{}},a);let s=a.signingRegion,u=a.signingName;t.signingRegion=t.signingRegion||s,t.signingName=t.signingName||u||t.serviceId;let l={...t,credentials:e,region:t.signingRegion,service:t.signingName,sha256:o,uriEscapePath:r},c=t.signerConstructor||b3;return new c(l)},{...t,systemClockOffset:n,signingEscapePath:r,credentials:e,signer:i}}});var cot=O(()=>{Ant();Int();lot()});var dot=O(()=>{cot()});var fot=O(()=>{});var pot=O(()=>{or()});var tZ,F_e=O(()=>{or();tZ=(t,e)=>cT(t,e).then(r=>e.utf8Encoder(r))});var Ss,mot,hot,got=O(()=>{F_e();Ss=(t,e)=>tZ(t,e).then(r=>{if(r.length)try{return JSON.parse(r)}catch(n){throw n?.name==="SyntaxError"&&Object.defineProperty(n,"$responseBodyText",{value:r}),n}return{}}),mot=async(t,e)=>{let r=await Ss(t,e);return r.message=r.message??r.Message,r},hot=(t,e)=>{let r=(i,a)=>Object.keys(i).find(s=>s.toLowerCase()===a.toLowerCase()),n=i=>{let a=i;return typeof a=="number"&&(a=a.toString()),a.indexOf(",")>=0&&(a=a.split(",")[0]),a.indexOf(":")>=0&&(a=a.split(":")[0]),a.indexOf("#")>=0&&(a=a.split("#")[1]),a},o=r(t.headers,"x-amzn-errortype");if(o!==void 0)return n(t.headers[o]);if(e.code!==void 0)return n(e.code);if(e.__type!==void 0)return n(e.__type)}});var rZ=v(UC=>{"use strict";var yot=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",rlr=yot+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040",bot="["+yot+"]["+rlr+"]*",nlr=new RegExp("^"+bot+"$"),olr=function(t,e){let r=[],n=e.exec(t);for(;n;){let o=[];o.startIndex=e.lastIndex-n[0].length;let i=n.length;for(let a=0;a<i;a++)o.push(n[a]);r.push(o),n=e.exec(t)}return r},ilr=function(t){let e=nlr.exec(t);return!(e===null||typeof e>"u")};UC.isExist=function(t){return typeof t<"u"};UC.isEmptyObject=function(t){return Object.keys(t).length===0};UC.merge=function(t,e,r){if(e){let n=Object.keys(e),o=n.length;for(let i=0;i<o;i++)r==="strict"?t[n[i]]=[e[n[i]]]:t[n[i]]=e[n[i]]}};UC.getValue=function(t){return UC.isExist(t)?t:""};UC.isName=ilr;UC.getAllMatches=olr;UC.nameRegexp=bot});var $_e=v(xot=>{"use strict";var k_e=rZ(),alr={allowBooleanAttributes:!1,unpairedTags:[]};xot.validate=function(t,e){e=Object.assign({},alr,e);let r=[],n=!1,o=!1;t[0]==="\uFEFF"&&(t=t.substr(1));for(let i=0;i<t.length;i++)if(t[i]==="<"&&t[i+1]==="?"){if(i+=2,i=vot(t,i),i.err)return i}else if(t[i]==="<"){let a=i;if(i++,t[i]==="!"){i=wot(t,i);continue}else{let s=!1;t[i]==="/"&&(s=!0,i++);let u="";for(;i<t.length&&t[i]!==">"&&t[i]!==" "&&t[i]!=="	"&&t[i]!==`
`&&t[i]!=="\r";i++)u+=t[i];if(u=u.trim(),u[u.length-1]==="/"&&(u=u.substring(0,u.length-1),i--),!mlr(u)){let d;return u.trim().length===0?d="Invalid space after '<'.":d="Tag '"+u+"' is an invalid name.",xs("InvalidTag",d,Tf(t,i))}let l=llr(t,i);if(l===!1)return xs("InvalidAttr","Attributes for '"+u+"' have open quote.",Tf(t,i));let c=l.value;if(i=l.index,c[c.length-1]==="/"){let d=i-c.length;c=c.substring(0,c.length-1);let f=Sot(c,e);if(f===!0)n=!0;else return xs(f.err.code,f.err.msg,Tf(t,d+f.err.line))}else if(s)if(l.tagClosed){if(c.trim().length>0)return xs("InvalidTag","Closing tag '"+u+"' can't have attributes or invalid starting.",Tf(t,a));if(r.length===0)return xs("InvalidTag","Closing tag '"+u+"' has not been opened.",Tf(t,a));{let d=r.pop();if(u!==d.tagName){let f=Tf(t,d.tagStartPos);return xs("InvalidTag","Expected closing tag '"+d.tagName+"' (opened in line "+f.line+", col "+f.col+") instead of closing tag '"+u+"'.",Tf(t,a))}r.length==0&&(o=!0)}}else return xs("InvalidTag","Closing tag '"+u+"' doesn't have proper closing.",Tf(t,i));else{let d=Sot(c,e);if(d!==!0)return xs(d.err.code,d.err.msg,Tf(t,i-c.length+d.err.line));if(o===!0)return xs("InvalidXml","Multiple possible root nodes found.",Tf(t,i));e.unpairedTags.indexOf(u)!==-1||r.push({tagName:u,tagStartPos:a}),n=!0}for(i++;i<t.length;i++)if(t[i]==="<")if(t[i+1]==="!"){i++,i=wot(t,i);continue}else if(t[i+1]==="?"){if(i=vot(t,++i),i.err)return i}else break;else if(t[i]==="&"){let d=flr(t,i);if(d==-1)return xs("InvalidChar","char '&' is not expected.",Tf(t,i));i=d}else if(o===!0&&!_ot(t[i]))return xs("InvalidXml","Extra text at the end",Tf(t,i));t[i]==="<"&&i--}}else{if(_ot(t[i]))continue;return xs("InvalidChar","char '"+t[i]+"' is not expected.",Tf(t,i))}if(n){if(r.length==1)return xs("InvalidTag","Unclosed tag '"+r[0].tagName+"'.",Tf(t,r[0].tagStartPos));if(r.length>0)return xs("InvalidXml","Invalid '"+JSON.stringify(r.map(i=>i.tagName),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1})}else return xs("InvalidXml","Start tag expected.",1);return!0};function _ot(t){return t===" "||t==="	"||t===`
`||t==="\r"}function vot(t,e){let r=e;for(;e<t.length;e++)if(t[e]=="?"||t[e]==" "){let n=t.substr(r,e-r);if(e>5&&n==="xml")return xs("InvalidXml","XML declaration allowed only at the start of the document.",Tf(t,e));if(t[e]=="?"&&t[e+1]==">"){e++;break}else continue}return e}function wot(t,e){if(t.length>e+5&&t[e+1]==="-"&&t[e+2]==="-"){for(e+=3;e<t.length;e++)if(t[e]==="-"&&t[e+1]==="-"&&t[e+2]===">"){e+=2;break}}else if(t.length>e+8&&t[e+1]==="D"&&t[e+2]==="O"&&t[e+3]==="C"&&t[e+4]==="T"&&t[e+5]==="Y"&&t[e+6]==="P"&&t[e+7]==="E"){let r=1;for(e+=8;e<t.length;e++)if(t[e]==="<")r++;else if(t[e]===">"&&(r--,r===0))break}else if(t.length>e+9&&t[e+1]==="["&&t[e+2]==="C"&&t[e+3]==="D"&&t[e+4]==="A"&&t[e+5]==="T"&&t[e+6]==="A"&&t[e+7]==="["){for(e+=8;e<t.length;e++)if(t[e]==="]"&&t[e+1]==="]"&&t[e+2]===">"){e+=2;break}}return e}var slr='"',ulr="'";function llr(t,e){let r="",n="",o=!1;for(;e<t.length;e++){if(t[e]===slr||t[e]===ulr)n===""?n=t[e]:n!==t[e]||(n="");else if(t[e]===">"&&n===""){o=!0;break}r+=t[e]}return n!==""?!1:{value:r,index:e,tagClosed:o}}var clr=new RegExp(`(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['"])(([\\s\\S])*?)\\5)?`,"g");function Sot(t,e){let r=k_e.getAllMatches(t,clr),n={};for(let o=0;o<r.length;o++){if(r[o][1].length===0)return xs("InvalidAttr","Attribute '"+r[o][2]+"' has no space in starting.",_3(r[o]));if(r[o][3]!==void 0&&r[o][4]===void 0)return xs("InvalidAttr","Attribute '"+r[o][2]+"' is without value.",_3(r[o]));if(r[o][3]===void 0&&!e.allowBooleanAttributes)return xs("InvalidAttr","boolean attribute '"+r[o][2]+"' is not allowed.",_3(r[o]));let i=r[o][2];if(!plr(i))return xs("InvalidAttr","Attribute '"+i+"' is an invalid name.",_3(r[o]));if(!n.hasOwnProperty(i))n[i]=1;else return xs("InvalidAttr","Attribute '"+i+"' is repeated.",_3(r[o]))}return!0}function dlr(t,e){let r=/\d/;for(t[e]==="x"&&(e++,r=/[\da-fA-F]/);e<t.length;e++){if(t[e]===";")return e;if(!t[e].match(r))break}return-1}function flr(t,e){if(e++,t[e]===";")return-1;if(t[e]==="#")return e++,dlr(t,e);let r=0;for(;e<t.length;e++,r++)if(!(t[e].match(/\w/)&&r<20)){if(t[e]===";")break;return-1}return e}function xs(t,e,r){return{err:{code:t,msg:e,line:r.line||r,col:r.col}}}function plr(t){return k_e.isName(t)}function mlr(t){return k_e.isName(t)}function Tf(t,e){let r=t.substring(0,e).split(/\r?\n/);return{line:r.length,col:r[r.length-1].length+1}}function _3(t){return t.startIndex+t[1].length}});var Oot=v(B_e=>{var Cot={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0,eNotation:!0},tagValueProcessor:function(t,e){return e},attributeValueProcessor:function(t,e){return e},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1,transformAttributeName:!1,updateTag:function(t,e,r){return t}},hlr=function(t){return Object.assign({},Cot,t)};B_e.buildOptions=hlr;B_e.defaultOptions=Cot});var Eot=v((Eeo,Pot)=>{"use strict";var q_e=class{constructor(e){this.tagname=e,this.child=[],this[":@"]={}}add(e,r){e==="__proto__"&&(e="#__proto__"),this.child.push({[e]:r})}addChild(e){e.tagname==="__proto__"&&(e.tagname="#__proto__"),e[":@"]&&Object.keys(e[":@"]).length>0?this.child.push({[e.tagname]:e.child,":@":e[":@"]}):this.child.push({[e.tagname]:e.child})}};Pot.exports=q_e});var Aot=v((Teo,Tot)=>{var glr=rZ();function ylr(t,e){let r={};if(t[e+3]==="O"&&t[e+4]==="C"&&t[e+5]==="T"&&t[e+6]==="Y"&&t[e+7]==="P"&&t[e+8]==="E"){e=e+9;let n=1,o=!1,i=!1,a="";for(;e<t.length;e++)if(t[e]==="<"&&!i){if(o&&vlr(t,e))e+=7,[entityName,val,e]=blr(t,e+1),val.indexOf("&")===-1&&(r[Clr(entityName)]={regx:RegExp(`&${entityName};`,"g"),val});else if(o&&wlr(t,e))e+=8;else if(o&&Slr(t,e))e+=8;else if(o&&xlr(t,e))e+=9;else if(_lr)i=!0;else throw new Error("Invalid DOCTYPE");n++,a=""}else if(t[e]===">"){if(i?t[e-1]==="-"&&t[e-2]==="-"&&(i=!1,n--):n--,n===0)break}else t[e]==="["?o=!0:a+=t[e];if(n!==0)throw new Error("Unclosed DOCTYPE")}else throw new Error("Invalid Tag instead of DOCTYPE");return{entities:r,i:e}}function blr(t,e){let r="";for(;e<t.length&&t[e]!=="'"&&t[e]!=='"';e++)r+=t[e];if(r=r.trim(),r.indexOf(" ")!==-1)throw new Error("External entites are not supported");let n=t[e++],o="";for(;e<t.length&&t[e]!==n;e++)o+=t[e];return[r,o,e]}function _lr(t,e){return t[e+1]==="!"&&t[e+2]==="-"&&t[e+3]==="-"}function vlr(t,e){return t[e+1]==="!"&&t[e+2]==="E"&&t[e+3]==="N"&&t[e+4]==="T"&&t[e+5]==="I"&&t[e+6]==="T"&&t[e+7]==="Y"}function wlr(t,e){return t[e+1]==="!"&&t[e+2]==="E"&&t[e+3]==="L"&&t[e+4]==="E"&&t[e+5]==="M"&&t[e+6]==="E"&&t[e+7]==="N"&&t[e+8]==="T"}function Slr(t,e){return t[e+1]==="!"&&t[e+2]==="A"&&t[e+3]==="T"&&t[e+4]==="T"&&t[e+5]==="L"&&t[e+6]==="I"&&t[e+7]==="S"&&t[e+8]==="T"}function xlr(t,e){return t[e+1]==="!"&&t[e+2]==="N"&&t[e+3]==="O"&&t[e+4]==="T"&&t[e+5]==="A"&&t[e+6]==="T"&&t[e+7]==="I"&&t[e+8]==="O"&&t[e+9]==="N"}function Clr(t){if(glr.isName(t))return t;throw new Error(`Invalid entity name ${t}`)}Tot.exports=ylr});var Mot=v((Aeo,Iot)=>{var Olr=/^[-+]?0x[a-fA-F0-9]+$/,Plr=/^([\-\+])?(0*)(\.[0-9]+([eE]\-?[0-9]+)?|[0-9]+(\.[0-9]+([eE]\-?[0-9]+)?)?)$/;!Number.parseInt&&window.parseInt&&(Number.parseInt=window.parseInt);!Number.parseFloat&&window.parseFloat&&(Number.parseFloat=window.parseFloat);var Elr={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0};function Tlr(t,e={}){if(e=Object.assign({},Elr,e),!t||typeof t!="string")return t;let r=t.trim();if(e.skipLike!==void 0&&e.skipLike.test(r))return t;if(e.hex&&Olr.test(r))return Number.parseInt(r,16);{let n=Plr.exec(r);if(n){let o=n[1],i=n[2],a=Alr(n[3]),s=n[4]||n[6];if(!e.leadingZeros&&i.length>0&&o&&r[2]!==".")return t;if(!e.leadingZeros&&i.length>0&&!o&&r[1]!==".")return t;{let u=Number(r),l=""+u;return l.search(/[eE]/)!==-1||s?e.eNotation?u:t:r.indexOf(".")!==-1?l==="0"&&a===""||l===a||o&&l==="-"+a?u:t:i?a===l||o+a===l?u:t:r===l||r===o+l?u:t}}else return t}}function Alr(t){return t&&t.indexOf(".")!==-1&&(t=t.replace(/0+$/,""),t==="."?t="0":t[0]==="."?t="0"+t:t[t.length-1]==="."&&(t=t.substr(0,t.length-1))),t}Iot.exports=Tlr});var Not=v((Ieo,jot)=>{"use strict";var Rot=rZ(),v3=Eot(),Ilr=Aot(),Mlr=Mot(),U_e=class{constructor(e){this.options=e,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:"&"},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:"\xA2"},pound:{regex:/&(pound|#163);/g,val:"\xA3"},yen:{regex:/&(yen|#165);/g,val:"\xA5"},euro:{regex:/&(euro|#8364);/g,val:"\u20AC"},copyright:{regex:/&(copy|#169);/g,val:"\xA9"},reg:{regex:/&(reg|#174);/g,val:"\xAE"},inr:{regex:/&(inr|#8377);/g,val:"\u20B9"},num_dec:{regex:/&#([0-9]{1,7});/g,val:(r,n)=>String.fromCharCode(Number.parseInt(n,10))},num_hex:{regex:/&#x([0-9a-fA-F]{1,6});/g,val:(r,n)=>String.fromCharCode(Number.parseInt(n,16))}},this.addExternalEntities=Rlr,this.parseXml=Flr,this.parseTextData=jlr,this.resolveNameSpace=Nlr,this.buildAttributesMap=Llr,this.isItStopNode=qlr,this.replaceEntitiesValue=$lr,this.readStopNodeData=zlr,this.saveTextToParentTag=Blr,this.addChild=klr}};function Rlr(t){let e=Object.keys(t);for(let r=0;r<e.length;r++){let n=e[r];this.lastEntities[n]={regex:new RegExp("&"+n+";","g"),val:t[n]}}}function jlr(t,e,r,n,o,i,a){if(t!==void 0&&(this.options.trimValues&&!n&&(t=t.trim()),t.length>0)){a||(t=this.replaceEntitiesValue(t));let s=this.options.tagValueProcessor(e,t,r,o,i);return s==null?t:typeof s!=typeof t||s!==t?s:this.options.trimValues?H_e(t,this.options.parseTagValue,this.options.numberParseOptions):t.trim()===t?H_e(t,this.options.parseTagValue,this.options.numberParseOptions):t}}function Nlr(t){if(this.options.removeNSPrefix){let e=t.split(":"),r=t.charAt(0)==="/"?"/":"";if(e[0]==="xmlns")return"";e.length===2&&(t=r+e[1])}return t}var Dlr=new RegExp(`([^\\s=]+)\\s*(=\\s*(['"])([\\s\\S]*?)\\3)?`,"gm");function Llr(t,e,r){if(!this.options.ignoreAttributes&&typeof t=="string"){let n=Rot.getAllMatches(t,Dlr),o=n.length,i={};for(let a=0;a<o;a++){let s=this.resolveNameSpace(n[a][1]),u=n[a][4],l=this.options.attributeNamePrefix+s;if(s.length)if(this.options.transformAttributeName&&(l=this.options.transformAttributeName(l)),l==="__proto__"&&(l="#__proto__"),u!==void 0){this.options.trimValues&&(u=u.trim()),u=this.replaceEntitiesValue(u);let c=this.options.attributeValueProcessor(s,u,e);c==null?i[l]=u:typeof c!=typeof u||c!==u?i[l]=c:i[l]=H_e(u,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(i[l]=!0)}if(!Object.keys(i).length)return;if(this.options.attributesGroupName){let a={};return a[this.options.attributesGroupName]=i,a}return i}}var Flr=function(t){t=t.replace(/\r\n?/g,`
`);let e=new v3("!xml"),r=e,n="",o="";for(let i=0;i<t.length;i++)if(t[i]==="<")if(t[i+1]==="/"){let s=i1(t,">",i,"Closing Tag is not closed."),u=t.substring(i+2,s).trim();if(this.options.removeNSPrefix){let d=u.indexOf(":");d!==-1&&(u=u.substr(d+1))}this.options.transformTagName&&(u=this.options.transformTagName(u)),r&&(n=this.saveTextToParentTag(n,r,o));let l=o.substring(o.lastIndexOf(".")+1);if(u&&this.options.unpairedTags.indexOf(u)!==-1)throw new Error(`Unpaired tag can not be used as closing tag: </${u}>`);let c=0;l&&this.options.unpairedTags.indexOf(l)!==-1?(c=o.lastIndexOf(".",o.lastIndexOf(".")-1),this.tagsNodeStack.pop()):c=o.lastIndexOf("."),o=o.substring(0,c),r=this.tagsNodeStack.pop(),n="",i=s}else if(t[i+1]==="?"){let s=z_e(t,i,!1,"?>");if(!s)throw new Error("Pi Tag is not closed.");if(n=this.saveTextToParentTag(n,r,o),!(this.options.ignoreDeclaration&&s.tagName==="?xml"||this.options.ignorePiTags)){let u=new v3(s.tagName);u.add(this.options.textNodeName,""),s.tagName!==s.tagExp&&s.attrExpPresent&&(u[":@"]=this.buildAttributesMap(s.tagExp,o,s.tagName)),this.addChild(r,u,o)}i=s.closeIndex+1}else if(t.substr(i+1,3)==="!--"){let s=i1(t,"-->",i+4,"Comment is not closed.");if(this.options.commentPropName){let u=t.substring(i+4,s-2);n=this.saveTextToParentTag(n,r,o),r.add(this.options.commentPropName,[{[this.options.textNodeName]:u}])}i=s}else if(t.substr(i+1,2)==="!D"){let s=Ilr(t,i);this.docTypeEntities=s.entities,i=s.i}else if(t.substr(i+1,2)==="!["){let s=i1(t,"]]>",i,"CDATA is not closed.")-2,u=t.substring(i+9,s);n=this.saveTextToParentTag(n,r,o);let l=this.parseTextData(u,r.tagname,o,!0,!1,!0,!0);l==null&&(l=""),this.options.cdataPropName?r.add(this.options.cdataPropName,[{[this.options.textNodeName]:u}]):r.add(this.options.textNodeName,l),i=s+2}else{let s=z_e(t,i,this.options.removeNSPrefix),u=s.tagName,l=s.rawTagName,c=s.tagExp,d=s.attrExpPresent,f=s.closeIndex;this.options.transformTagName&&(u=this.options.transformTagName(u)),r&&n&&r.tagname!=="!xml"&&(n=this.saveTextToParentTag(n,r,o,!1));let p=r;if(p&&this.options.unpairedTags.indexOf(p.tagname)!==-1&&(r=this.tagsNodeStack.pop(),o=o.substring(0,o.lastIndexOf("."))),u!==e.tagname&&(o+=o?"."+u:u),this.isItStopNode(this.options.stopNodes,o,u)){let m="";if(c.length>0&&c.lastIndexOf("/")===c.length-1)u[u.length-1]==="/"?(u=u.substr(0,u.length-1),o=o.substr(0,o.length-1),c=u):c=c.substr(0,c.length-1),i=s.closeIndex;else if(this.options.unpairedTags.indexOf(u)!==-1)i=s.closeIndex;else{let b=this.readStopNodeData(t,l,f+1);if(!b)throw new Error(`Unexpected end of ${l}`);i=b.i,m=b.tagContent}let h=new v3(u);u!==c&&d&&(h[":@"]=this.buildAttributesMap(c,o,u)),m&&(m=this.parseTextData(m,u,o,!0,d,!0,!0)),o=o.substr(0,o.lastIndexOf(".")),h.add(this.options.textNodeName,m),this.addChild(r,h,o)}else{if(c.length>0&&c.lastIndexOf("/")===c.length-1){u[u.length-1]==="/"?(u=u.substr(0,u.length-1),o=o.substr(0,o.length-1),c=u):c=c.substr(0,c.length-1),this.options.transformTagName&&(u=this.options.transformTagName(u));let m=new v3(u);u!==c&&d&&(m[":@"]=this.buildAttributesMap(c,o,u)),this.addChild(r,m,o),o=o.substr(0,o.lastIndexOf("."))}else{let m=new v3(u);this.tagsNodeStack.push(r),u!==c&&d&&(m[":@"]=this.buildAttributesMap(c,o,u)),this.addChild(r,m,o),r=m}n="",i=f}}else n+=t[i];return e.child};function klr(t,e,r){let n=this.options.updateTag(e.tagname,r,e[":@"]);n===!1||(typeof n=="string"&&(e.tagname=n),t.addChild(e))}var $lr=function(t){if(this.options.processEntities){for(let e in this.docTypeEntities){let r=this.docTypeEntities[e];t=t.replace(r.regx,r.val)}for(let e in this.lastEntities){let r=this.lastEntities[e];t=t.replace(r.regex,r.val)}if(this.options.htmlEntities)for(let e in this.htmlEntities){let r=this.htmlEntities[e];t=t.replace(r.regex,r.val)}t=t.replace(this.ampEntity.regex,this.ampEntity.val)}return t};function Blr(t,e,r,n){return t&&(n===void 0&&(n=Object.keys(e.child).length===0),t=this.parseTextData(t,e.tagname,r,!1,e[":@"]?Object.keys(e[":@"]).length!==0:!1,n),t!==void 0&&t!==""&&e.add(this.options.textNodeName,t),t=""),t}function qlr(t,e,r){let n="*."+r;for(let o in t){let i=t[o];if(n===i||e===i)return!0}return!1}function Ulr(t,e,r=">"){let n,o="";for(let i=e;i<t.length;i++){let a=t[i];if(n)a===n&&(n="");else if(a==='"'||a==="'")n=a;else if(a===r[0])if(r[1]){if(t[i+1]===r[1])return{data:o,index:i}}else return{data:o,index:i};else a==="	"&&(a=" ");o+=a}}function i1(t,e,r,n){let o=t.indexOf(e,r);if(o===-1)throw new Error(n);return o+e.length-1}function z_e(t,e,r,n=">"){let o=Ulr(t,e+1,n);if(!o)return;let i=o.data,a=o.index,s=i.search(/\s/),u=i,l=!0;s!==-1&&(u=i.substring(0,s),i=i.substring(s+1).trimStart());let c=u;if(r){let d=u.indexOf(":");d!==-1&&(u=u.substr(d+1),l=u!==o.data.substr(d+1))}return{tagName:u,tagExp:i,closeIndex:a,attrExpPresent:l,rawTagName:c}}function zlr(t,e,r){let n=r,o=1;for(;r<t.length;r++)if(t[r]==="<")if(t[r+1]==="/"){let i=i1(t,">",r,`${e} is not closed`);if(t.substring(r+2,i).trim()===e&&(o--,o===0))return{tagContent:t.substring(n,r),i};r=i}else if(t[r+1]==="?")r=i1(t,"?>",r+1,"StopNode is not closed.");else if(t.substr(r+1,3)==="!--")r=i1(t,"-->",r+3,"StopNode is not closed.");else if(t.substr(r+1,2)==="![")r=i1(t,"]]>",r,"StopNode is not closed.")-2;else{let i=z_e(t,r,">");i&&((i&&i.tagName)===e&&i.tagExp[i.tagExp.length-1]!=="/"&&o++,r=i.closeIndex)}}function H_e(t,e,r){if(e&&typeof t=="string"){let n=t.trim();return n==="true"?!0:n==="false"?!1:Mlr(t,r)}else return Rot.isExist(t)?t:""}jot.exports=U_e});var Fot=v(Lot=>{"use strict";function Hlr(t,e){return Dot(t,e)}function Dot(t,e,r){let n,o={};for(let i=0;i<t.length;i++){let a=t[i],s=Vlr(a),u="";if(r===void 0?u=s:u=r+"."+s,s===e.textNodeName)n===void 0?n=a[s]:n+=""+a[s];else{if(s===void 0)continue;if(a[s]){let l=Dot(a[s],e,u),c=Klr(l,e);a[":@"]?Wlr(l,a[":@"],u,e):Object.keys(l).length===1&&l[e.textNodeName]!==void 0&&!e.alwaysCreateTextNode?l=l[e.textNodeName]:Object.keys(l).length===0&&(e.alwaysCreateTextNode?l[e.textNodeName]="":l=""),o[s]!==void 0&&o.hasOwnProperty(s)?(Array.isArray(o[s])||(o[s]=[o[s]]),o[s].push(l)):e.isArray(s,u,c)?o[s]=[l]:o[s]=l}}}return typeof n=="string"?n.length>0&&(o[e.textNodeName]=n):n!==void 0&&(o[e.textNodeName]=n),o}function Vlr(t){let e=Object.keys(t);for(let r=0;r<e.length;r++){let n=e[r];if(n!==":@")return n}}function Wlr(t,e,r,n){if(e){let o=Object.keys(e),i=o.length;for(let a=0;a<i;a++){let s=o[a];n.isArray(s,r+"."+s,!0,!0)?t[s]=[e[s]]:t[s]=e[s]}}}function Klr(t,e){let{textNodeName:r}=e,n=Object.keys(t).length;return!!(n===0||n===1&&(t[r]||typeof t[r]=="boolean"||t[r]===0))}Lot.prettify=Hlr});var $ot=v((Reo,kot)=>{var{buildOptions:Glr}=Oot(),Jlr=Not(),{prettify:Ylr}=Fot(),Zlr=$_e(),V_e=class{constructor(e){this.externalEntities={},this.options=Glr(e)}parse(e,r){if(typeof e!="string")if(e.toString)e=e.toString();else throw new Error("XML data is accepted in String or Bytes[] form.");if(r){r===!0&&(r={});let i=Zlr.validate(e,r);if(i!==!0)throw Error(`${i.err.msg}:${i.err.line}:${i.err.col}`)}let n=new Jlr(this.options);n.addExternalEntities(this.externalEntities);let o=n.parseXml(e);return this.options.preserveOrder||o===void 0?o:Ylr(o,this.options)}addEntity(e,r){if(r.indexOf("&")!==-1)throw new Error("Entity value can't have '&'");if(e.indexOf("&")!==-1||e.indexOf(";")!==-1)throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");if(r==="&")throw new Error("An entity with value '&' is not permitted");this.externalEntities[e]=r}};kot.exports=V_e});var Hot=v((jeo,zot)=>{var Xlr=`
`;function Qlr(t,e){let r="";return e.format&&e.indentBy.length>0&&(r=Xlr),qot(t,e,"",r)}function qot(t,e,r,n){let o="",i=!1;for(let a=0;a<t.length;a++){let s=t[a],u=ecr(s);if(u===void 0)continue;let l="";if(r.length===0?l=u:l=`${r}.${u}`,u===e.textNodeName){let m=s[u];tcr(l,e)||(m=e.tagValueProcessor(u,m),m=Uot(m,e)),i&&(o+=n),o+=m,i=!1;continue}else if(u===e.cdataPropName){i&&(o+=n),o+=`<![CDATA[${s[u][0][e.textNodeName]}]]>`,i=!1;continue}else if(u===e.commentPropName){o+=n+`<!--${s[u][0][e.textNodeName]}-->`,i=!0;continue}else if(u[0]==="?"){let m=Bot(s[":@"],e),h=u==="?xml"?"":n,b=s[u][0][e.textNodeName];b=b.length!==0?" "+b:"",o+=h+`<${u}${b}${m}?>`,i=!0;continue}let c=n;c!==""&&(c+=e.indentBy);let d=Bot(s[":@"],e),f=n+`<${u}${d}`,p=qot(s[u],e,l,c);e.unpairedTags.indexOf(u)!==-1?e.suppressUnpairedNode?o+=f+">":o+=f+"/>":(!p||p.length===0)&&e.suppressEmptyNode?o+=f+"/>":p&&p.endsWith(">")?o+=f+`>${p}${n}</${u}>`:(o+=f+">",p&&n!==""&&(p.includes("/>")||p.includes("</"))?o+=n+e.indentBy+p+n:o+=p,o+=`</${u}>`),i=!0}return o}function ecr(t){let e=Object.keys(t);for(let r=0;r<e.length;r++){let n=e[r];if(t.hasOwnProperty(n)&&n!==":@")return n}}function Bot(t,e){let r="";if(t&&!e.ignoreAttributes)for(let n in t){if(!t.hasOwnProperty(n))continue;let o=e.attributeValueProcessor(n,t[n]);o=Uot(o,e),o===!0&&e.suppressBooleanAttributes?r+=` ${n.substr(e.attributeNamePrefix.length)}`:r+=` ${n.substr(e.attributeNamePrefix.length)}="${o}"`}return r}function tcr(t,e){t=t.substr(0,t.length-e.textNodeName.length-1);let r=t.substr(t.lastIndexOf(".")+1);for(let n in e.stopNodes)if(e.stopNodes[n]===t||e.stopNodes[n]==="*."+r)return!0;return!1}function Uot(t,e){if(t&&t.length>0&&e.processEntities)for(let r=0;r<e.entities.length;r++){let n=e.entities[r];t=t.replace(n.regex,n.val)}return t}zot.exports=Qlr});var Wot=v((Neo,Vot)=>{"use strict";var rcr=Hot(),ncr={attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataPropName:!1,format:!1,indentBy:"  ",suppressEmptyNode:!1,suppressUnpairedNode:!0,suppressBooleanAttributes:!0,tagValueProcessor:function(t,e){return e},attributeValueProcessor:function(t,e){return e},preserveOrder:!1,commentPropName:!1,unpairedTags:[],entities:[{regex:new RegExp("&","g"),val:"&amp;"},{regex:new RegExp(">","g"),val:"&gt;"},{regex:new RegExp("<","g"),val:"&lt;"},{regex:new RegExp("'","g"),val:"&apos;"},{regex:new RegExp('"',"g"),val:"&quot;"}],processEntities:!0,stopNodes:[],oneListGroup:!1};function mT(t){this.options=Object.assign({},ncr,t),this.options.ignoreAttributes||this.options.attributesGroupName?this.isAttribute=function(){return!1}:(this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=acr),this.processTextOrObjNode=ocr,this.options.format?(this.indentate=icr,this.tagEndChar=`>
`,this.newLine=`
`):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine="")}mT.prototype.build=function(t){return this.options.preserveOrder?rcr(t,this.options):(Array.isArray(t)&&this.options.arrayNodeName&&this.options.arrayNodeName.length>1&&(t={[this.options.arrayNodeName]:t}),this.j2x(t,0).val)};mT.prototype.j2x=function(t,e){let r="",n="";for(let o in t)if(Object.prototype.hasOwnProperty.call(t,o))if(typeof t[o]>"u")this.isAttribute(o)&&(n+="");else if(t[o]===null)this.isAttribute(o)?n+="":o[0]==="?"?n+=this.indentate(e)+"<"+o+"?"+this.tagEndChar:n+=this.indentate(e)+"<"+o+"/"+this.tagEndChar;else if(t[o]instanceof Date)n+=this.buildTextValNode(t[o],o,"",e);else if(typeof t[o]!="object"){let i=this.isAttribute(o);if(i)r+=this.buildAttrPairStr(i,""+t[o]);else if(o===this.options.textNodeName){let a=this.options.tagValueProcessor(o,""+t[o]);n+=this.replaceEntitiesValue(a)}else n+=this.buildTextValNode(t[o],o,"",e)}else if(Array.isArray(t[o])){let i=t[o].length,a="",s="";for(let u=0;u<i;u++){let l=t[o][u];if(!(typeof l>"u"))if(l===null)o[0]==="?"?n+=this.indentate(e)+"<"+o+"?"+this.tagEndChar:n+=this.indentate(e)+"<"+o+"/"+this.tagEndChar;else if(typeof l=="object")if(this.options.oneListGroup){let c=this.j2x(l,e+1);a+=c.val,this.options.attributesGroupName&&l.hasOwnProperty(this.options.attributesGroupName)&&(s+=c.attrStr)}else a+=this.processTextOrObjNode(l,o,e);else if(this.options.oneListGroup){let c=this.options.tagValueProcessor(o,l);c=this.replaceEntitiesValue(c),a+=c}else a+=this.buildTextValNode(l,o,"",e)}this.options.oneListGroup&&(a=this.buildObjectNode(a,o,s,e)),n+=a}else if(this.options.attributesGroupName&&o===this.options.attributesGroupName){let i=Object.keys(t[o]),a=i.length;for(let s=0;s<a;s++)r+=this.buildAttrPairStr(i[s],""+t[o][i[s]])}else n+=this.processTextOrObjNode(t[o],o,e);return{attrStr:r,val:n}};mT.prototype.buildAttrPairStr=function(t,e){return e=this.options.attributeValueProcessor(t,""+e),e=this.replaceEntitiesValue(e),this.options.suppressBooleanAttributes&&e==="true"?" "+t:" "+t+'="'+e+'"'};function ocr(t,e,r){let n=this.j2x(t,r+1);return t[this.options.textNodeName]!==void 0&&Object.keys(t).length===1?this.buildTextValNode(t[this.options.textNodeName],e,n.attrStr,r):this.buildObjectNode(n.val,e,n.attrStr,r)}mT.prototype.buildObjectNode=function(t,e,r,n){if(t==="")return e[0]==="?"?this.indentate(n)+"<"+e+r+"?"+this.tagEndChar:this.indentate(n)+"<"+e+r+this.closeTag(e)+this.tagEndChar;{let o="</"+e+this.tagEndChar,i="";return e[0]==="?"&&(i="?",o=""),(r||r==="")&&t.indexOf("<")===-1?this.indentate(n)+"<"+e+r+i+">"+t+o:this.options.commentPropName!==!1&&e===this.options.commentPropName&&i.length===0?this.indentate(n)+`<!--${t}-->`+this.newLine:this.indentate(n)+"<"+e+r+i+this.tagEndChar+t+this.indentate(n)+o}};mT.prototype.closeTag=function(t){let e="";return this.options.unpairedTags.indexOf(t)!==-1?this.options.suppressUnpairedNode||(e="/"):this.options.suppressEmptyNode?e="/":e=`></${t}`,e};mT.prototype.buildTextValNode=function(t,e,r,n){if(this.options.cdataPropName!==!1&&e===this.options.cdataPropName)return this.indentate(n)+`<![CDATA[${t}]]>`+this.newLine;if(this.options.commentPropName!==!1&&e===this.options.commentPropName)return this.indentate(n)+`<!--${t}-->`+this.newLine;if(e[0]==="?")return this.indentate(n)+"<"+e+r+"?"+this.tagEndChar;{let o=this.options.tagValueProcessor(e,t);return o=this.replaceEntitiesValue(o),o===""?this.indentate(n)+"<"+e+r+this.closeTag(e)+this.tagEndChar:this.indentate(n)+"<"+e+r+">"+o+"</"+e+this.tagEndChar}};mT.prototype.replaceEntitiesValue=function(t){if(t&&t.length>0&&this.options.processEntities)for(let e=0;e<this.options.entities.length;e++){let r=this.options.entities[e];t=t.replace(r.regex,r.val)}return t};function icr(t){return this.options.indentBy.repeat(t)}function acr(t){return t.startsWith(this.options.attributeNamePrefix)&&t!==this.options.textNodeName?t.substr(this.attrPrefixLen):!1}Vot.exports=mT});var Got=v((Deo,Kot)=>{"use strict";var scr=$_e(),ucr=$ot(),lcr=Wot();Kot.exports={XMLParser:ucr,XMLValidator:scr,XMLBuilder:lcr}});var Jot,f_,Yot,Zot=O(()=>{or();Jot=F(Got());F_e();f_=(t,e)=>tZ(t,e).then(r=>{if(r.length){let n=new Jot.XMLParser({attributeNamePrefix:"",htmlEntities:!0,ignoreAttributes:!1,ignoreDeclaration:!0,parseTagValue:!1,trimValues:!1,tagValueProcessor:(u,l)=>l.trim()===""&&l.includes(`
`)?"":void 0});n.addEntity("#xD","\r"),n.addEntity("#10",`
`);let o;try{o=n.parse(r,!0)}catch(u){throw u&&typeof u=="object"&&Object.defineProperty(u,"$responseBodyText",{value:r}),u}let i="#text",a=Object.keys(o)[0],s=o[a];return s[i]&&(s[a]=s[i],delete s[i]),c_e(s)}return{}}),Yot=async(t,e)=>{let r=await f_(t,e);return r.Error&&(r.Error.message=r.Error.message??r.Error.Message),r}});var Xot=O(()=>{fot();pot();got();Zot()});var a1=O(()=>{pnt();dot();Xot()});function ccr(t){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"cognito-identity",region:t.region},propertiesExtractor:(e,r)=>({signingProperties:{config:e,context:r}})}}function nZ(t){return{schemeId:"smithy.api#noAuth"}}var Qot,eit,tit,W_e=O(()=>{a1();py();Qot=async(t,e,r)=>({operation:l_(e).operation,region:await Ad(t.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});eit=t=>{let e=[];switch(t.operation){case"GetCredentialsForIdentity":{e.push(nZ(t));break}case"GetId":{e.push(nZ(t));break}case"GetOpenIdToken":{e.push(nZ(t));break}case"UnlinkIdentity":{e.push(nZ(t));break}default:e.push(ccr(t))}return e},tit=t=>({...eZ(t)})});var rit,xr,ra=O(()=>{rit=t=>({...t,useDualstackEndpoint:t.useDualstackEndpoint??!1,useFipsEndpoint:t.useFipsEndpoint??!1,defaultSigningName:"cognito-identity"}),xr={UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}});var oit,nit=O(()=>{oit={name:"@aws-sdk/client-cognito-identity",description:"AWS SDK for JavaScript Cognito Identity Client for Node.js, Browser and React Native",version:"3.645.0",scripts:{build:"concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"node ../../scripts/compilation/inline client-cognito-identity","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo","extract:docs":"api-extractor run --local","generate:client":"node ../../scripts/generate-clients/single-service --solo cognito-identity","test:e2e":"ts-mocha test/**/*.ispec.ts && karma start karma.conf.js"},main:"./dist-cjs/index.js",types:"./dist-types/index.d.ts",module:"./dist-es/index.js",sideEffects:!1,dependencies:{"@aws-crypto/sha256-browser":"5.2.0","@aws-crypto/sha256-js":"5.2.0","@aws-sdk/client-sso-oidc":"3.645.0","@aws-sdk/client-sts":"3.645.0","@aws-sdk/core":"3.635.0","@aws-sdk/credential-provider-node":"3.645.0","@aws-sdk/middleware-host-header":"3.620.0","@aws-sdk/middleware-logger":"3.609.0","@aws-sdk/middleware-recursion-detection":"3.620.0","@aws-sdk/middleware-user-agent":"3.645.0","@aws-sdk/region-config-resolver":"3.614.0","@aws-sdk/types":"3.609.0","@aws-sdk/util-endpoints":"3.645.0","@aws-sdk/util-user-agent-browser":"3.609.0","@aws-sdk/util-user-agent-node":"3.614.0","@smithy/config-resolver":"^3.0.5","@smithy/core":"^2.4.0","@smithy/fetch-http-handler":"^3.2.4","@smithy/hash-node":"^3.0.3","@smithy/invalid-dependency":"^3.0.3","@smithy/middleware-content-length":"^3.0.5","@smithy/middleware-endpoint":"^3.1.0","@smithy/middleware-retry":"^3.0.15","@smithy/middleware-serde":"^3.0.3","@smithy/middleware-stack":"^3.0.3","@smithy/node-config-provider":"^3.1.4","@smithy/node-http-handler":"^3.1.4","@smithy/protocol-http":"^4.1.0","@smithy/smithy-client":"^3.2.0","@smithy/types":"^3.3.0","@smithy/url-parser":"^3.0.3","@smithy/util-base64":"^3.0.0","@smithy/util-body-length-browser":"^3.0.0","@smithy/util-body-length-node":"^3.0.0","@smithy/util-defaults-mode-browser":"^3.0.15","@smithy/util-defaults-mode-node":"^3.0.15","@smithy/util-endpoints":"^2.0.5","@smithy/util-middleware":"^3.0.3","@smithy/util-retry":"^3.0.3","@smithy/util-utf8":"^3.0.0",tslib:"^2.6.2"},devDependencies:{"@aws-sdk/client-iam":"3.645.0","@tsconfig/node16":"16.1.3","@types/chai":"^4.2.11","@types/mocha":"^8.0.4","@types/node":"^16.18.96",concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typescript:"~4.9.5"},engines:{node:">=16.0.0"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["dist-*/**"],author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",browser:{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-cognito-identity",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-cognito-identity"}}});var K_e,G_e,iit,ait=O(()=>{K_e={name:"SHA-256"},G_e={name:"HMAC",hash:K_e},iit=new Uint8Array([227,176,196,66,152,252,28,20,154,251,244,200,153,111,185,36,39,174,65,228,100,155,147,76,164,149,153,27,120,82,184,85])});function UF(){return typeof window<"u"?window:typeof self<"u"?self:fcr}var fcr,J_e=O(()=>{fcr={}});var zF,Y_e,Z_e=O(()=>{zF=F(q7());ait();J_e();Y_e=function(){function t(e){this.toHash=new Uint8Array(0),this.secret=e,this.reset()}return t.prototype.update=function(e){if(!(0,zF.isEmptyData)(e)){var r=(0,zF.convertToBuffer)(e),n=new Uint8Array(this.toHash.byteLength+r.byteLength);n.set(this.toHash,0),n.set(r,this.toHash.byteLength),this.toHash=n}},t.prototype.digest=function(){var e=this;return this.key?this.key.then(function(r){return UF().crypto.subtle.sign(G_e,r,e.toHash).then(function(n){return new Uint8Array(n)})}):(0,zF.isEmptyData)(this.toHash)?Promise.resolve(iit):Promise.resolve().then(function(){return UF().crypto.subtle.digest(K_e,e.toHash)}).then(function(r){return Promise.resolve(new Uint8Array(r))})},t.prototype.reset=function(){var e=this;this.toHash=new Uint8Array(0),this.secret&&this.secret!==void 0&&(this.key=new Promise(function(r,n){UF().crypto.subtle.importKey("raw",(0,zF.convertToBuffer)(e.secret),G_e,!1,["sign"]).then(r,n)}),this.key.catch(function(){}))},t}()});function sit(t){if(mcr(t)&&typeof t.crypto.subtle=="object"){var e=t.crypto.subtle;return hcr(e)}return!1}function mcr(t){if(typeof t=="object"&&typeof t.crypto=="object"){var e=t.crypto.getRandomValues;return typeof e=="function"}return!1}function hcr(t){return t&&pcr.every(function(e){return typeof t[e]=="function"})}var pcr,uit=O(()=>{pcr=["decrypt","digest","encrypt","exportKey","generateKey","importKey","sign","verify"]});var lit=O(()=>{uit()});var cit,dit,oZ,fit=O(()=>{Z_e();cit=F(rbe());lit();J_e();dit=F(q7()),oZ=function(){function t(e){sit(UF())?this.hash=new Y_e(e):this.hash=new cit.Sha256(e)}return t.prototype.update=function(e,r){this.hash.update((0,dit.convertToBuffer)(e))},t.prototype.digest=function(){return this.hash.digest()},t.prototype.reset=function(){this.hash.reset()},t}()});var X_e=O(()=>{fit();Z_e()});var eve=v((w3,Q_e)=>{(function(t,e){typeof w3=="object"&&typeof Q_e=="object"?Q_e.exports=e():typeof define=="function"&&define.amd?define([],e):typeof w3=="object"?w3.bowser=e():t.bowser=e()})(w3,function(){return function(t){var e={};function r(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=t,r.c=e,r.d=function(n,o,i){r.o(n,o)||Object.defineProperty(n,o,{enumerable:!0,get:i})},r.r=function(n){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},r.t=function(n,o){if(1&o&&(n=r(n)),8&o||4&o&&typeof n=="object"&&n&&n.__esModule)return n;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:n}),2&o&&typeof n!="string")for(var a in n)r.d(i,a,function(s){return n[s]}.bind(null,a));return i},r.n=function(n){var o=n&&n.__esModule?function(){return n.default}:function(){return n};return r.d(o,"a",o),o},r.o=function(n,o){return Object.prototype.hasOwnProperty.call(n,o)},r.p="",r(r.s=90)}({17:function(t,e,r){"use strict";e.__esModule=!0,e.default=void 0;var n=r(18),o=function(){function i(){}return i.getFirstMatch=function(a,s){var u=s.match(a);return u&&u.length>0&&u[1]||""},i.getSecondMatch=function(a,s){var u=s.match(a);return u&&u.length>1&&u[2]||""},i.matchAndReturnConst=function(a,s,u){if(a.test(s))return u},i.getWindowsVersionName=function(a){switch(a){case"NT":return"NT";case"XP":return"XP";case"NT 5.0":return"2000";case"NT 5.1":return"XP";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}},i.getMacOSVersionName=function(a){var s=a.split(".").splice(0,2).map(function(u){return parseInt(u,10)||0});if(s.push(0),s[0]===10)switch(s[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}},i.getAndroidVersionName=function(a){var s=a.split(".").splice(0,2).map(function(u){return parseInt(u,10)||0});if(s.push(0),!(s[0]===1&&s[1]<5))return s[0]===1&&s[1]<6?"Cupcake":s[0]===1&&s[1]>=6?"Donut":s[0]===2&&s[1]<2?"Eclair":s[0]===2&&s[1]===2?"Froyo":s[0]===2&&s[1]>2?"Gingerbread":s[0]===3?"Honeycomb":s[0]===4&&s[1]<1?"Ice Cream Sandwich":s[0]===4&&s[1]<4?"Jelly Bean":s[0]===4&&s[1]>=4?"KitKat":s[0]===5?"Lollipop":s[0]===6?"Marshmallow":s[0]===7?"Nougat":s[0]===8?"Oreo":s[0]===9?"Pie":void 0},i.getVersionPrecision=function(a){return a.split(".").length},i.compareVersions=function(a,s,u){u===void 0&&(u=!1);var l=i.getVersionPrecision(a),c=i.getVersionPrecision(s),d=Math.max(l,c),f=0,p=i.map([a,s],function(m){var h=d-i.getVersionPrecision(m),b=m+new Array(h+1).join(".0");return i.map(b.split("."),function(g){return new Array(20-g.length).join("0")+g}).reverse()});for(u&&(f=d-Math.min(l,c)),d-=1;d>=f;){if(p[0][d]>p[1][d])return 1;if(p[0][d]===p[1][d]){if(d===f)return 0;d-=1}else if(p[0][d]<p[1][d])return-1}},i.map=function(a,s){var u,l=[];if(Array.prototype.map)return Array.prototype.map.call(a,s);for(u=0;u<a.length;u+=1)l.push(s(a[u]));return l},i.find=function(a,s){var u,l;if(Array.prototype.find)return Array.prototype.find.call(a,s);for(u=0,l=a.length;u<l;u+=1){var c=a[u];if(s(c,u))return c}},i.assign=function(a){for(var s,u,l=a,c=arguments.length,d=new Array(c>1?c-1:0),f=1;f<c;f++)d[f-1]=arguments[f];if(Object.assign)return Object.assign.apply(Object,[a].concat(d));var p=function(){var m=d[s];typeof m=="object"&&m!==null&&Object.keys(m).forEach(function(h){l[h]=m[h]})};for(s=0,u=d.length;s<u;s+=1)p();return a},i.getBrowserAlias=function(a){return n.BROWSER_ALIASES_MAP[a]},i.getBrowserTypeByAlias=function(a){return n.BROWSER_MAP[a]||""},i}();e.default=o,t.exports=e.default},18:function(t,e,r){"use strict";e.__esModule=!0,e.ENGINE_MAP=e.OS_MAP=e.PLATFORMS_MAP=e.BROWSER_MAP=e.BROWSER_ALIASES_MAP=void 0,e.BROWSER_ALIASES_MAP={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},e.BROWSER_MAP={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},e.PLATFORMS_MAP={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},e.OS_MAP={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},e.ENGINE_MAP={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"}},90:function(t,e,r){"use strict";e.__esModule=!0,e.default=void 0;var n,o=(n=r(91))&&n.__esModule?n:{default:n},i=r(18);function a(u,l){for(var c=0;c<l.length;c++){var d=l[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(u,d.key,d)}}var s=function(){function u(){}var l,c,d;return u.getParser=function(f,p){if(p===void 0&&(p=!1),typeof f!="string")throw new Error("UserAgent should be a string");return new o.default(f,p)},u.parse=function(f){return new o.default(f).getResult()},l=u,d=[{key:"BROWSER_MAP",get:function(){return i.BROWSER_MAP}},{key:"ENGINE_MAP",get:function(){return i.ENGINE_MAP}},{key:"OS_MAP",get:function(){return i.OS_MAP}},{key:"PLATFORMS_MAP",get:function(){return i.PLATFORMS_MAP}}],(c=null)&&a(l.prototype,c),d&&a(l,d),u}();e.default=s,t.exports=e.default},91:function(t,e,r){"use strict";e.__esModule=!0,e.default=void 0;var n=u(r(92)),o=u(r(93)),i=u(r(94)),a=u(r(95)),s=u(r(17));function u(c){return c&&c.__esModule?c:{default:c}}var l=function(){function c(f,p){if(p===void 0&&(p=!1),f==null||f==="")throw new Error("UserAgent parameter can't be empty");this._ua=f,this.parsedResult={},p!==!0&&this.parse()}var d=c.prototype;return d.getUA=function(){return this._ua},d.test=function(f){return f.test(this._ua)},d.parseBrowser=function(){var f=this;this.parsedResult.browser={};var p=s.default.find(n.default,function(m){if(typeof m.test=="function")return m.test(f);if(m.test instanceof Array)return m.test.some(function(h){return f.test(h)});throw new Error("Browser's test function is not valid")});return p&&(this.parsedResult.browser=p.describe(this.getUA())),this.parsedResult.browser},d.getBrowser=function(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()},d.getBrowserName=function(f){return f?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""},d.getBrowserVersion=function(){return this.getBrowser().version},d.getOS=function(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()},d.parseOS=function(){var f=this;this.parsedResult.os={};var p=s.default.find(o.default,function(m){if(typeof m.test=="function")return m.test(f);if(m.test instanceof Array)return m.test.some(function(h){return f.test(h)});throw new Error("Browser's test function is not valid")});return p&&(this.parsedResult.os=p.describe(this.getUA())),this.parsedResult.os},d.getOSName=function(f){var p=this.getOS().name;return f?String(p).toLowerCase()||"":p||""},d.getOSVersion=function(){return this.getOS().version},d.getPlatform=function(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()},d.getPlatformType=function(f){f===void 0&&(f=!1);var p=this.getPlatform().type;return f?String(p).toLowerCase()||"":p||""},d.parsePlatform=function(){var f=this;this.parsedResult.platform={};var p=s.default.find(i.default,function(m){if(typeof m.test=="function")return m.test(f);if(m.test instanceof Array)return m.test.some(function(h){return f.test(h)});throw new Error("Browser's test function is not valid")});return p&&(this.parsedResult.platform=p.describe(this.getUA())),this.parsedResult.platform},d.getEngine=function(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()},d.getEngineName=function(f){return f?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""},d.parseEngine=function(){var f=this;this.parsedResult.engine={};var p=s.default.find(a.default,function(m){if(typeof m.test=="function")return m.test(f);if(m.test instanceof Array)return m.test.some(function(h){return f.test(h)});throw new Error("Browser's test function is not valid")});return p&&(this.parsedResult.engine=p.describe(this.getUA())),this.parsedResult.engine},d.parse=function(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this},d.getResult=function(){return s.default.assign({},this.parsedResult)},d.satisfies=function(f){var p=this,m={},h=0,b={},g=0;if(Object.keys(f).forEach(function(I){var R=f[I];typeof R=="string"?(b[I]=R,g+=1):typeof R=="object"&&(m[I]=R,h+=1)}),h>0){var y=Object.keys(m),w=s.default.find(y,function(I){return p.isOS(I)});if(w){var S=this.satisfies(m[w]);if(S!==void 0)return S}var C=s.default.find(y,function(I){return p.isPlatform(I)});if(C){var P=this.satisfies(m[C]);if(P!==void 0)return P}}if(g>0){var E=Object.keys(b),A=s.default.find(E,function(I){return p.isBrowser(I,!0)});if(A!==void 0)return this.compareVersion(b[A])}},d.isBrowser=function(f,p){p===void 0&&(p=!1);var m=this.getBrowserName().toLowerCase(),h=f.toLowerCase(),b=s.default.getBrowserTypeByAlias(h);return p&&b&&(h=b.toLowerCase()),h===m},d.compareVersion=function(f){var p=[0],m=f,h=!1,b=this.getBrowserVersion();if(typeof b=="string")return f[0]===">"||f[0]==="<"?(m=f.substr(1),f[1]==="="?(h=!0,m=f.substr(2)):p=[],f[0]===">"?p.push(1):p.push(-1)):f[0]==="="?m=f.substr(1):f[0]==="~"&&(h=!0,m=f.substr(1)),p.indexOf(s.default.compareVersions(b,m,h))>-1},d.isOS=function(f){return this.getOSName(!0)===String(f).toLowerCase()},d.isPlatform=function(f){return this.getPlatformType(!0)===String(f).toLowerCase()},d.isEngine=function(f){return this.getEngineName(!0)===String(f).toLowerCase()},d.is=function(f,p){return p===void 0&&(p=!1),this.isBrowser(f,p)||this.isOS(f)||this.isPlatform(f)},d.some=function(f){var p=this;return f===void 0&&(f=[]),f.some(function(m){return p.is(m)})},c}();e.default=l,t.exports=e.default},92:function(t,e,r){"use strict";e.__esModule=!0,e.default=void 0;var n,o=(n=r(17))&&n.__esModule?n:{default:n},i=/version\/(\d+(\.?_?\d+)+)/i,a=[{test:[/googlebot/i],describe:function(s){var u={name:"Googlebot"},l=o.default.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,s)||o.default.getFirstMatch(i,s);return l&&(u.version=l),u}},{test:[/opera/i],describe:function(s){var u={name:"Opera"},l=o.default.getFirstMatch(i,s)||o.default.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,s);return l&&(u.version=l),u}},{test:[/opr\/|opios/i],describe:function(s){var u={name:"Opera"},l=o.default.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,s)||o.default.getFirstMatch(i,s);return l&&(u.version=l),u}},{test:[/SamsungBrowser/i],describe:function(s){var u={name:"Samsung Internet for Android"},l=o.default.getFirstMatch(i,s)||o.default.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,s);return l&&(u.version=l),u}},{test:[/Whale/i],describe:function(s){var u={name:"NAVER Whale Browser"},l=o.default.getFirstMatch(i,s)||o.default.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,s);return l&&(u.version=l),u}},{test:[/MZBrowser/i],describe:function(s){var u={name:"MZ Browser"},l=o.default.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,s)||o.default.getFirstMatch(i,s);return l&&(u.version=l),u}},{test:[/focus/i],describe:function(s){var u={name:"Focus"},l=o.default.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,s)||o.default.getFirstMatch(i,s);return l&&(u.version=l),u}},{test:[/swing/i],describe:function(s){var u={name:"Swing"},l=o.default.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,s)||o.default.getFirstMatch(i,s);return l&&(u.version=l),u}},{test:[/coast/i],describe:function(s){var u={name:"Opera Coast"},l=o.default.getFirstMatch(i,s)||o.default.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,s);return l&&(u.version=l),u}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe:function(s){var u={name:"Opera Touch"},l=o.default.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,s)||o.default.getFirstMatch(i,s);return l&&(u.version=l),u}},{test:[/yabrowser/i],describe:function(s){var u={name:"Yandex Browser"},l=o.default.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,s)||o.default.getFirstMatch(i,s);return l&&(u.version=l),u}},{test:[/ucbrowser/i],describe:function(s){var u={name:"UC Browser"},l=o.default.getFirstMatch(i,s)||o.default.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,s);return l&&(u.version=l),u}},{test:[/Maxthon|mxios/i],describe:function(s){var u={name:"Maxthon"},l=o.default.getFirstMatch(i,s)||o.default.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,s);return l&&(u.version=l),u}},{test:[/epiphany/i],describe:function(s){var u={name:"Epiphany"},l=o.default.getFirstMatch(i,s)||o.default.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,s);return l&&(u.version=l),u}},{test:[/puffin/i],describe:function(s){var u={name:"Puffin"},l=o.default.getFirstMatch(i,s)||o.default.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,s);return l&&(u.version=l),u}},{test:[/sleipnir/i],describe:function(s){var u={name:"Sleipnir"},l=o.default.getFirstMatch(i,s)||o.default.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,s);return l&&(u.version=l),u}},{test:[/k-meleon/i],describe:function(s){var u={name:"K-Meleon"},l=o.default.getFirstMatch(i,s)||o.default.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,s);return l&&(u.version=l),u}},{test:[/micromessenger/i],describe:function(s){var u={name:"WeChat"},l=o.default.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,s)||o.default.getFirstMatch(i,s);return l&&(u.version=l),u}},{test:[/qqbrowser/i],describe:function(s){var u={name:/qqbrowserlite/i.test(s)?"QQ Browser Lite":"QQ Browser"},l=o.default.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,s)||o.default.getFirstMatch(i,s);return l&&(u.version=l),u}},{test:[/msie|trident/i],describe:function(s){var u={name:"Internet Explorer"},l=o.default.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,s);return l&&(u.version=l),u}},{test:[/\sedg\//i],describe:function(s){var u={name:"Microsoft Edge"},l=o.default.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,s);return l&&(u.version=l),u}},{test:[/edg([ea]|ios)/i],describe:function(s){var u={name:"Microsoft Edge"},l=o.default.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,s);return l&&(u.version=l),u}},{test:[/vivaldi/i],describe:function(s){var u={name:"Vivaldi"},l=o.default.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,s);return l&&(u.version=l),u}},{test:[/seamonkey/i],describe:function(s){var u={name:"SeaMonkey"},l=o.default.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,s);return l&&(u.version=l),u}},{test:[/sailfish/i],describe:function(s){var u={name:"Sailfish"},l=o.default.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,s);return l&&(u.version=l),u}},{test:[/silk/i],describe:function(s){var u={name:"Amazon Silk"},l=o.default.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,s);return l&&(u.version=l),u}},{test:[/phantom/i],describe:function(s){var u={name:"PhantomJS"},l=o.default.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,s);return l&&(u.version=l),u}},{test:[/slimerjs/i],describe:function(s){var u={name:"SlimerJS"},l=o.default.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,s);return l&&(u.version=l),u}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(s){var u={name:"BlackBerry"},l=o.default.getFirstMatch(i,s)||o.default.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,s);return l&&(u.version=l),u}},{test:[/(web|hpw)[o0]s/i],describe:function(s){var u={name:"WebOS Browser"},l=o.default.getFirstMatch(i,s)||o.default.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,s);return l&&(u.version=l),u}},{test:[/bada/i],describe:function(s){var u={name:"Bada"},l=o.default.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,s);return l&&(u.version=l),u}},{test:[/tizen/i],describe:function(s){var u={name:"Tizen"},l=o.default.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,s)||o.default.getFirstMatch(i,s);return l&&(u.version=l),u}},{test:[/qupzilla/i],describe:function(s){var u={name:"QupZilla"},l=o.default.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,s)||o.default.getFirstMatch(i,s);return l&&(u.version=l),u}},{test:[/firefox|iceweasel|fxios/i],describe:function(s){var u={name:"Firefox"},l=o.default.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,s);return l&&(u.version=l),u}},{test:[/electron/i],describe:function(s){var u={name:"Electron"},l=o.default.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,s);return l&&(u.version=l),u}},{test:[/MiuiBrowser/i],describe:function(s){var u={name:"Miui"},l=o.default.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,s);return l&&(u.version=l),u}},{test:[/chromium/i],describe:function(s){var u={name:"Chromium"},l=o.default.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,s)||o.default.getFirstMatch(i,s);return l&&(u.version=l),u}},{test:[/chrome|crios|crmo/i],describe:function(s){var u={name:"Chrome"},l=o.default.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,s);return l&&(u.version=l),u}},{test:[/GSA/i],describe:function(s){var u={name:"Google Search"},l=o.default.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,s);return l&&(u.version=l),u}},{test:function(s){var u=!s.test(/like android/i),l=s.test(/android/i);return u&&l},describe:function(s){var u={name:"Android Browser"},l=o.default.getFirstMatch(i,s);return l&&(u.version=l),u}},{test:[/playstation 4/i],describe:function(s){var u={name:"PlayStation 4"},l=o.default.getFirstMatch(i,s);return l&&(u.version=l),u}},{test:[/safari|applewebkit/i],describe:function(s){var u={name:"Safari"},l=o.default.getFirstMatch(i,s);return l&&(u.version=l),u}},{test:[/.*/i],describe:function(s){var u=s.search("\\(")!==-1?/^(.*)\/(.*)[ \t]\((.*)/:/^(.*)\/(.*) /;return{name:o.default.getFirstMatch(u,s),version:o.default.getSecondMatch(u,s)}}}];e.default=a,t.exports=e.default},93:function(t,e,r){"use strict";e.__esModule=!0,e.default=void 0;var n,o=(n=r(17))&&n.__esModule?n:{default:n},i=r(18),a=[{test:[/Roku\/DVP/],describe:function(s){var u=o.default.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,s);return{name:i.OS_MAP.Roku,version:u}}},{test:[/windows phone/i],describe:function(s){var u=o.default.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,s);return{name:i.OS_MAP.WindowsPhone,version:u}}},{test:[/windows /i],describe:function(s){var u=o.default.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,s),l=o.default.getWindowsVersionName(u);return{name:i.OS_MAP.Windows,version:u,versionName:l}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(s){var u={name:i.OS_MAP.iOS},l=o.default.getSecondMatch(/(Version\/)(\d[\d.]+)/,s);return l&&(u.version=l),u}},{test:[/macintosh/i],describe:function(s){var u=o.default.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,s).replace(/[_\s]/g,"."),l=o.default.getMacOSVersionName(u),c={name:i.OS_MAP.MacOS,version:u};return l&&(c.versionName=l),c}},{test:[/(ipod|iphone|ipad)/i],describe:function(s){var u=o.default.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,s).replace(/[_\s]/g,".");return{name:i.OS_MAP.iOS,version:u}}},{test:function(s){var u=!s.test(/like android/i),l=s.test(/android/i);return u&&l},describe:function(s){var u=o.default.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,s),l=o.default.getAndroidVersionName(u),c={name:i.OS_MAP.Android,version:u};return l&&(c.versionName=l),c}},{test:[/(web|hpw)[o0]s/i],describe:function(s){var u=o.default.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,s),l={name:i.OS_MAP.WebOS};return u&&u.length&&(l.version=u),l}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(s){var u=o.default.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,s)||o.default.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,s)||o.default.getFirstMatch(/\bbb(\d+)/i,s);return{name:i.OS_MAP.BlackBerry,version:u}}},{test:[/bada/i],describe:function(s){var u=o.default.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,s);return{name:i.OS_MAP.Bada,version:u}}},{test:[/tizen/i],describe:function(s){var u=o.default.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,s);return{name:i.OS_MAP.Tizen,version:u}}},{test:[/linux/i],describe:function(){return{name:i.OS_MAP.Linux}}},{test:[/CrOS/],describe:function(){return{name:i.OS_MAP.ChromeOS}}},{test:[/PlayStation 4/],describe:function(s){var u=o.default.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,s);return{name:i.OS_MAP.PlayStation4,version:u}}}];e.default=a,t.exports=e.default},94:function(t,e,r){"use strict";e.__esModule=!0,e.default=void 0;var n,o=(n=r(17))&&n.__esModule?n:{default:n},i=r(18),a=[{test:[/googlebot/i],describe:function(){return{type:"bot",vendor:"Google"}}},{test:[/huawei/i],describe:function(s){var u=o.default.getFirstMatch(/(can-l01)/i,s)&&"Nova",l={type:i.PLATFORMS_MAP.mobile,vendor:"Huawei"};return u&&(l.model=u),l}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe:function(){return{type:i.PLATFORMS_MAP.tablet,vendor:"Nexus"}}},{test:[/ipad/i],describe:function(){return{type:i.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(){return{type:i.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/kftt build/i],describe:function(){return{type:i.PLATFORMS_MAP.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"}}},{test:[/silk/i],describe:function(){return{type:i.PLATFORMS_MAP.tablet,vendor:"Amazon"}}},{test:[/tablet(?! pc)/i],describe:function(){return{type:i.PLATFORMS_MAP.tablet}}},{test:function(s){var u=s.test(/ipod|iphone/i),l=s.test(/like (ipod|iphone)/i);return u&&!l},describe:function(s){var u=o.default.getFirstMatch(/(ipod|iphone)/i,s);return{type:i.PLATFORMS_MAP.mobile,vendor:"Apple",model:u}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe:function(){return{type:i.PLATFORMS_MAP.mobile,vendor:"Nexus"}}},{test:[/[^-]mobi/i],describe:function(){return{type:i.PLATFORMS_MAP.mobile}}},{test:function(s){return s.getBrowserName(!0)==="blackberry"},describe:function(){return{type:i.PLATFORMS_MAP.mobile,vendor:"BlackBerry"}}},{test:function(s){return s.getBrowserName(!0)==="bada"},describe:function(){return{type:i.PLATFORMS_MAP.mobile}}},{test:function(s){return s.getBrowserName()==="windows phone"},describe:function(){return{type:i.PLATFORMS_MAP.mobile,vendor:"Microsoft"}}},{test:function(s){var u=Number(String(s.getOSVersion()).split(".")[0]);return s.getOSName(!0)==="android"&&u>=3},describe:function(){return{type:i.PLATFORMS_MAP.tablet}}},{test:function(s){return s.getOSName(!0)==="android"},describe:function(){return{type:i.PLATFORMS_MAP.mobile}}},{test:function(s){return s.getOSName(!0)==="macos"},describe:function(){return{type:i.PLATFORMS_MAP.desktop,vendor:"Apple"}}},{test:function(s){return s.getOSName(!0)==="windows"},describe:function(){return{type:i.PLATFORMS_MAP.desktop}}},{test:function(s){return s.getOSName(!0)==="linux"},describe:function(){return{type:i.PLATFORMS_MAP.desktop}}},{test:function(s){return s.getOSName(!0)==="playstation 4"},describe:function(){return{type:i.PLATFORMS_MAP.tv}}},{test:function(s){return s.getOSName(!0)==="roku"},describe:function(){return{type:i.PLATFORMS_MAP.tv}}}];e.default=a,t.exports=e.default},95:function(t,e,r){"use strict";e.__esModule=!0,e.default=void 0;var n,o=(n=r(17))&&n.__esModule?n:{default:n},i=r(18),a=[{test:function(s){return s.getBrowserName(!0)==="microsoft edge"},describe:function(s){if(/\sedg\//i.test(s))return{name:i.ENGINE_MAP.Blink};var u=o.default.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,s);return{name:i.ENGINE_MAP.EdgeHTML,version:u}}},{test:[/trident/i],describe:function(s){var u={name:i.ENGINE_MAP.Trident},l=o.default.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,s);return l&&(u.version=l),u}},{test:function(s){return s.test(/presto/i)},describe:function(s){var u={name:i.ENGINE_MAP.Presto},l=o.default.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,s);return l&&(u.version=l),u}},{test:function(s){var u=s.test(/gecko/i),l=s.test(/like gecko/i);return u&&!l},describe:function(s){var u={name:i.ENGINE_MAP.Gecko},l=o.default.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,s);return l&&(u.version=l),u}},{test:[/(apple)?webkit\/537\.36/i],describe:function(){return{name:i.ENGINE_MAP.Blink}}},{test:[/(apple)?webkit/i],describe:function(s){var u={name:i.ENGINE_MAP.WebKit},l=o.default.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,s);return l&&(u.version=l),u}}];e.default=a,t.exports=e.default}})})});var pit,iZ,tve=O(()=>{pit=F(eve()),iZ=({serviceId:t,clientVersion:e})=>async()=>{let r=typeof window<"u"&&window?.navigator?.userAgent?pit.default.parse(window.navigator.userAgent):void 0,n=[["aws-sdk-js",e],["ua","2.0"],[`os/${r?.os?.name||"other"}`,r?.os?.version],["lang/js"],["md/browser",`${r?.browser?.name??"unknown"}_${r?.browser?.version??"unknown"}`]];return t&&n.push([`api/${t}`,e]),n}});var mit=O(()=>{});var aZ,hit=O(()=>{aZ=t=>()=>Promise.reject(t)});var rve=O(()=>{mit();hit()});var git,sZ,yit=O(()=>{git=typeof TextEncoder=="function"?new TextEncoder:null,sZ=t=>{if(typeof t=="string"){if(git)return git.encode(t).byteLength;let e=t.length;for(let r=e-1;r>=0;r--){let n=t.charCodeAt(r);n>127&&n<=2047?e++:n>2047&&n<=65535&&(e+=2),n>=56320&&n<=57343&&r--}return e}else{if(typeof t.byteLength=="number")return t.byteLength;if(typeof t.size=="number")return t.size}throw new Error(`Body Length computation failed for ${t}`)}});var nve=O(()=>{yit()});var ove,ive=O(()=>{ove=t=>new TextEncoder().encode(t)});var bit=O(()=>{ive()});var _it,vit=O(()=>{_it=t=>{if(typeof t=="string")return t;if(typeof t!="object"||typeof t.byteOffset!="number"||typeof t.byteLength!="number")throw new Error("@smithy/util-utf8: toUtf8 encoder function only accepts string | Uint8Array.");return new TextDecoder("utf-8").decode(t)}});var wit=O(()=>{ive();bit();vit()});var Mit,m_,h_,VF,Sit,x3,HF,S3,zC,ave,xit,Cit,Oit,Rit,jit,p_,Pit,Eit,Tit,Ait,Iit,gcr,Nit,Dit=O(()=>{Mit="required",m_="fn",h_="argv",VF="ref",Sit="isSet",x3="booleanEquals",HF="error",S3="endpoint",zC="tree",ave="PartitionResult",xit={[Mit]:!1,type:"String"},Cit={[Mit]:!0,default:!1,type:"Boolean"},Oit={[VF]:"Endpoint"},Rit={[m_]:x3,[h_]:[{[VF]:"UseFIPS"},!0]},jit={[m_]:x3,[h_]:[{[VF]:"UseDualStack"},!0]},p_={},Pit={[m_]:"getAttr",[h_]:[{[VF]:ave},"supportsFIPS"]},Eit={[m_]:x3,[h_]:[!0,{[m_]:"getAttr",[h_]:[{[VF]:ave},"supportsDualStack"]}]},Tit=[Rit],Ait=[jit],Iit=[{[VF]:"Region"}],gcr={version:"1.0",parameters:{Region:xit,UseDualStack:Cit,UseFIPS:Cit,Endpoint:xit},rules:[{conditions:[{[m_]:Sit,[h_]:[Oit]}],rules:[{conditions:Tit,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:HF},{conditions:Ait,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:HF},{endpoint:{url:Oit,properties:p_,headers:p_},type:S3}],type:zC},{conditions:[{[m_]:Sit,[h_]:Iit}],rules:[{conditions:[{[m_]:"aws.partition",[h_]:Iit,assign:ave}],rules:[{conditions:[Rit,jit],rules:[{conditions:[{[m_]:x3,[h_]:[!0,Pit]},Eit],rules:[{endpoint:{url:"https://cognito-identity-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:p_,headers:p_},type:S3}],type:zC},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:HF}],type:zC},{conditions:Tit,rules:[{conditions:[{[m_]:x3,[h_]:[Pit,!0]}],rules:[{endpoint:{url:"https://cognito-identity-fips.{Region}.{PartitionResult#dnsSuffix}",properties:p_,headers:p_},type:S3}],type:zC},{error:"FIPS is enabled but this partition does not support FIPS",type:HF}],type:zC},{conditions:Ait,rules:[{conditions:[Eit],rules:[{endpoint:{url:"https://cognito-identity.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:p_,headers:p_},type:S3}],type:zC},{error:"DualStack is enabled but this partition does not support DualStack",type:HF}],type:zC},{endpoint:{url:"https://cognito-identity.{Region}.{PartitionResult#dnsSuffix}",properties:p_,headers:p_},type:S3}],type:zC}],type:zC},{error:"Invalid Configuration: Missing Region",type:HF}]},Nit=gcr});var Lit,Fit=O(()=>{iY();rT();Dit();Lit=(t,e={})=>Z4(Nit,{endpointParams:t,logger:e.logger});kC.aws=X4});var kit,$it=O(()=>{a1();dT();or();gY();DF();wit();W_e();Fit();kit=t=>({apiVersion:"2014-06-30",base64Decoder:t?.base64Decoder??sT,base64Encoder:t?.base64Encoder??uT,disableHostPrefix:t?.disableHostPrefix??!1,endpointProvider:t?.endpointProvider??Lit,extensions:t?.extensions??[],httpAuthSchemeProvider:t?.httpAuthSchemeProvider??eit,httpAuthSchemes:t?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:e=>e.getIdentityProvider("aws.auth#sigv4"),signer:new n1},{schemeId:"smithy.api#noAuth",identityProvider:e=>e.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new BF}],logger:t?.logger??new oT,serviceId:t?.serviceId??"Cognito Identity",urlParser:t?.urlParser??nT,utf8Decoder:t?.utf8Decoder??ove,utf8Encoder:t?.utf8Encoder??_it})});var Bit,qit=O(()=>{Bit=["in-region","cross-region","mobile","standard","legacy"]});var Uit,uZ,ycr,zit=O(()=>{FC();Uit=F(eve());qit();uZ=({defaultsMode:t}={})=>FYe(async()=>{let e=typeof t=="function"?await t():t;switch(e?.toLowerCase()){case"auto":return Promise.resolve(ycr()?"mobile":"standard");case"mobile":case"in-region":case"cross-region":case"standard":case"legacy":return Promise.resolve(e?.toLocaleLowerCase());case void 0:return Promise.resolve("legacy");default:throw new Error(`Invalid parameter for "defaultsMode", expect ${Bit.join(", ")}, got ${e}`)}}),ycr=()=>{let e=(typeof window<"u"&&window?.navigator?.userAgent?Uit.default.parse(window.navigator.userAgent):void 0)?.platform?.type;return e==="tablet"||e==="mobile"}});var sve=O(()=>{zit()});var Hit,Vit=O(()=>{nit();X_e();tve();Q4();s3();rve();nve();d_();$it();or();sve();Hit=t=>{let e=uZ(t),r=()=>e().then(LY),n=kit(t);return{...n,...t,runtime:"browser",defaultsMode:e,bodyLengthChecker:t?.bodyLengthChecker??sZ,credentialDefaultProvider:t?.credentialDefaultProvider??(o=>()=>Promise.reject(new Error("Credential is missing"))),defaultUserAgentProvider:t?.defaultUserAgentProvider??iZ({serviceId:n.serviceId,clientVersion:oit.version}),maxAttempts:t?.maxAttempts??c_,region:t?.region??aZ("Region is missing"),requestHandler:lT.create(t?.requestHandler??r),retryMode:t?.retryMode??(async()=>(await r()).retryMode||r3),sha256:t?.sha256??oZ,streamCollector:t?.streamCollector??LF,useDualstackEndpoint:t?.useDualstackEndpoint??(()=>Promise.resolve(dY)),useFipsEndpoint:t?.useFipsEndpoint??(()=>Promise.resolve(fY))}}});var lZ,cZ,Wit=O(()=>{lZ=t=>{let e=async()=>{if(t.region===void 0)throw new Error("Region is missing from runtimeConfig");let r=t.region;return typeof r=="string"?r:r()};return{setRegion(r){e=r},region(){return e}}},cZ=t=>({region:t.region()})});var Kit=O(()=>{});var uve=O(()=>{});var Git=O(()=>{uve()});var Jit=O(()=>{Git();uve()});var Yit=O(()=>{Kit();Jit()});var lve=O(()=>{Wit();Yit()});var Zit,Xit,Qit=O(()=>{Zit=t=>{let e=t.httpHandler;return{setHttpHandler(r){e=r},httpHandler(){return e},updateHttpClientConfig(r,n){e.updateHttpClientConfig(r,n)},httpHandlerConfigs(){return e.httpHandlerConfigs()}}},Xit=t=>({httpHandler:t.httpHandler()})});var eat=O(()=>{Qit()});var tat=O(()=>{Ds()});var rat=O(()=>{});var nat=O(()=>{});function _cr(t){return Object.keys(t).reduce((e,r)=>{let n=t[r];return{...e,[r]:Array.isArray(n)?[...n]:n}},{})}var dZ,oat=O(()=>{dZ=class t{constructor(e){this.method=e.method||"GET",this.hostname=e.hostname||"localhost",this.port=e.port,this.query=e.query||{},this.headers=e.headers||{},this.body=e.body,this.protocol=e.protocol?e.protocol.slice(-1)!==":"?`${e.protocol}:`:e.protocol:"https:",this.path=e.path?e.path.charAt(0)!=="/"?`/${e.path}`:e.path:"/",this.username=e.username,this.password=e.password,this.fragment=e.fragment}static clone(e){let r=new t({...e,headers:{...e.headers}});return r.query&&(r.query=_cr(r.query)),r}static isInstance(e){if(!e)return!1;let r=e;return"method"in r&&"protocol"in r&&"hostname"in r&&"path"in r&&typeof r.query=="object"&&typeof r.headers=="object"}clone(){return t.clone(this)}}});var iat=O(()=>{});var aat=O(()=>{});var sat=O(()=>{});var cve=O(()=>{eat();tat();rat();nat();oat();iat();aat();sat()});var uat,lat,cat=O(()=>{uat=t=>{let e=t.httpAuthSchemes,r=t.httpAuthSchemeProvider,n=t.credentials;return{setHttpAuthScheme(o){let i=e.findIndex(a=>a.schemeId===o.schemeId);i===-1?e.push(o):e.splice(i,1,o)},httpAuthSchemes(){return e},setHttpAuthSchemeProvider(o){r=o},httpAuthSchemeProvider(){return r},setCredentials(o){n=o},credentials(){return n}}},lat=t=>({httpAuthSchemes:t.httpAuthSchemes(),httpAuthSchemeProvider:t.httpAuthSchemeProvider(),credentials:t.credentials()})});var fZ,dat,fat=O(()=>{lve();cve();or();cat();fZ=t=>t,dat=(t,e)=>{let r={...fZ(lZ(t)),...fZ(FY(t)),...fZ(Zit(t)),...fZ(uat(t))};return e.forEach(n=>n.configure(r)),{...t,...cZ(r),...kY(r),...Xit(r),...lat(r)}}});var hT,pZ=O(()=>{abe();sbe();ube();Obe();Q4();dT();h_e();kn();qY();or();W_e();ra();Vit();fat();hT=class extends XR{constructor(...[e]){let r=Hit(e||{}),n=rit(r),o=Z7(n),i=AY(o),a=mY(i),s=a,u=_Y(s),l=tit(u),c=dat(l,e?.extensions||[]);super(c),this.config=c,this.middlewareStack.use(lY(this.config)),this.middlewareStack.use(BY(this.config)),this.middlewareStack.use(HY(this.config)),this.middlewareStack.use(K7(this.config)),this.middlewareStack.use(G7(this.config)),this.middlewareStack.use(Y7(this.config)),this.middlewareStack.use(vY(this.config,{httpAuthSchemeParametersProvider:Qot,identityProviderConfigProvider:async d=>new $F({"aws.auth#sigv4":d.credentials})})),this.middlewareStack.use(UY(this.config))}destroy(){super.destroy()}}});var Id,dve=O(()=>{or();Id=class t extends kF{constructor(e){super(e),Object.setPrototypeOf(this,t.prototype)}}});var mZ,hZ,gZ,yZ,bZ,_Z,vZ,wZ,SZ,xZ,CZ,fve=O(()=>{dve();mZ=class t extends Id{constructor(e){super({name:"InternalErrorException",$fault:"server",...e}),this.name="InternalErrorException",this.$fault="server",Object.setPrototypeOf(this,t.prototype)}},hZ=class t extends Id{constructor(e){super({name:"InvalidParameterException",$fault:"client",...e}),this.name="InvalidParameterException",this.$fault="client",Object.setPrototypeOf(this,t.prototype)}},gZ=class t extends Id{constructor(e){super({name:"LimitExceededException",$fault:"client",...e}),this.name="LimitExceededException",this.$fault="client",Object.setPrototypeOf(this,t.prototype)}},yZ=class t extends Id{constructor(e){super({name:"NotAuthorizedException",$fault:"client",...e}),this.name="NotAuthorizedException",this.$fault="client",Object.setPrototypeOf(this,t.prototype)}},bZ=class t extends Id{constructor(e){super({name:"ResourceConflictException",$fault:"client",...e}),this.name="ResourceConflictException",this.$fault="client",Object.setPrototypeOf(this,t.prototype)}},_Z=class t extends Id{constructor(e){super({name:"TooManyRequestsException",$fault:"client",...e}),this.name="TooManyRequestsException",this.$fault="client",Object.setPrototypeOf(this,t.prototype)}},vZ=class t extends Id{constructor(e){super({name:"ResourceNotFoundException",$fault:"client",...e}),this.name="ResourceNotFoundException",this.$fault="client",Object.setPrototypeOf(this,t.prototype)}},wZ=class t extends Id{constructor(e){super({name:"ExternalServiceException",$fault:"client",...e}),this.name="ExternalServiceException",this.$fault="client",Object.setPrototypeOf(this,t.prototype)}},SZ=class t extends Id{constructor(e){super({name:"InvalidIdentityPoolConfigurationException",$fault:"client",...e}),this.name="InvalidIdentityPoolConfigurationException",this.$fault="client",Object.setPrototypeOf(this,t.prototype)}},xZ=class t extends Id{constructor(e){super({name:"DeveloperUserAlreadyRegisteredException",$fault:"client",...e}),this.name="DeveloperUserAlreadyRegisteredException",this.$fault="client",Object.setPrototypeOf(this,t.prototype)}},CZ=class t extends Id{constructor(e){super({name:"ConcurrentModificationException",$fault:"client",...e}),this.name="ConcurrentModificationException",this.$fault="client",Object.setPrototypeOf(this,t.prototype)}}});function Fa(t){return{"content-type":"application/x-amz-json-1.1","x-amz-target":`AWSCognitoIdentityService.${t}`}}var pat,mat,hat,gat,yat,bat,_at,vat,wat,Sat,xat,Cat,Oat,Pat,Eat,Tat,Aat,Iat,Mat,Rat,jat,Nat,Dat,Lat,Fat,kat,$at,Bat,qat,Uat,zat,Hat,Vat,Wat,Kat,Gat,Jat,Yat,Zat,Xat,Qat,est,tst,rst,nst,ost,Da,wcr,Scr,xcr,Ccr,Ocr,Pcr,Ecr,Tcr,Acr,Icr,Mcr,Rcr,jcr,Ncr,ist,Dcr,Yn,Lcr,La,ba=O(()=>{a1();cve();or();dve();fve();pat=async(t,e)=>{let r=Fa("CreateIdentityPool"),n;return n=JSON.stringify(rr(t)),La(e,r,"/",void 0,n)},mat=async(t,e)=>{let r=Fa("DeleteIdentities"),n;return n=JSON.stringify(rr(t)),La(e,r,"/",void 0,n)},hat=async(t,e)=>{let r=Fa("DeleteIdentityPool"),n;return n=JSON.stringify(rr(t)),La(e,r,"/",void 0,n)},gat=async(t,e)=>{let r=Fa("DescribeIdentity"),n;return n=JSON.stringify(rr(t)),La(e,r,"/",void 0,n)},yat=async(t,e)=>{let r=Fa("DescribeIdentityPool"),n;return n=JSON.stringify(rr(t)),La(e,r,"/",void 0,n)},bat=async(t,e)=>{let r=Fa("GetCredentialsForIdentity"),n;return n=JSON.stringify(rr(t)),La(e,r,"/",void 0,n)},_at=async(t,e)=>{let r=Fa("GetId"),n;return n=JSON.stringify(rr(t)),La(e,r,"/",void 0,n)},vat=async(t,e)=>{let r=Fa("GetIdentityPoolRoles"),n;return n=JSON.stringify(rr(t)),La(e,r,"/",void 0,n)},wat=async(t,e)=>{let r=Fa("GetOpenIdToken"),n;return n=JSON.stringify(rr(t)),La(e,r,"/",void 0,n)},Sat=async(t,e)=>{let r=Fa("GetOpenIdTokenForDeveloperIdentity"),n;return n=JSON.stringify(rr(t)),La(e,r,"/",void 0,n)},xat=async(t,e)=>{let r=Fa("GetPrincipalTagAttributeMap"),n;return n=JSON.stringify(rr(t)),La(e,r,"/",void 0,n)},Cat=async(t,e)=>{let r=Fa("ListIdentities"),n;return n=JSON.stringify(rr(t)),La(e,r,"/",void 0,n)},Oat=async(t,e)=>{let r=Fa("ListIdentityPools"),n;return n=JSON.stringify(rr(t)),La(e,r,"/",void 0,n)},Pat=async(t,e)=>{let r=Fa("ListTagsForResource"),n;return n=JSON.stringify(rr(t)),La(e,r,"/",void 0,n)},Eat=async(t,e)=>{let r=Fa("LookupDeveloperIdentity"),n;return n=JSON.stringify(rr(t)),La(e,r,"/",void 0,n)},Tat=async(t,e)=>{let r=Fa("MergeDeveloperIdentities"),n;return n=JSON.stringify(rr(t)),La(e,r,"/",void 0,n)},Aat=async(t,e)=>{let r=Fa("SetIdentityPoolRoles"),n;return n=JSON.stringify(rr(t)),La(e,r,"/",void 0,n)},Iat=async(t,e)=>{let r=Fa("SetPrincipalTagAttributeMap"),n;return n=JSON.stringify(rr(t)),La(e,r,"/",void 0,n)},Mat=async(t,e)=>{let r=Fa("TagResource"),n;return n=JSON.stringify(rr(t)),La(e,r,"/",void 0,n)},Rat=async(t,e)=>{let r=Fa("UnlinkDeveloperIdentity"),n;return n=JSON.stringify(rr(t)),La(e,r,"/",void 0,n)},jat=async(t,e)=>{let r=Fa("UnlinkIdentity"),n;return n=JSON.stringify(rr(t)),La(e,r,"/",void 0,n)},Nat=async(t,e)=>{let r=Fa("UntagResource"),n;return n=JSON.stringify(rr(t)),La(e,r,"/",void 0,n)},Dat=async(t,e)=>{let r=Fa("UpdateIdentityPool"),n;return n=JSON.stringify(rr(t)),La(e,r,"/",void 0,n)},Lat=async(t,e)=>{if(t.statusCode>=300)return Da(t,e);let r=await Ss(t.body,e),n={};return n=rr(r),{$metadata:Yn(t),...n}},Fat=async(t,e)=>{if(t.statusCode>=300)return Da(t,e);let r=await Ss(t.body,e),n={};return n=rr(r),{$metadata:Yn(t),...n}},kat=async(t,e)=>t.statusCode>=300?Da(t,e):(await cT(t.body,e),{$metadata:Yn(t)}),$at=async(t,e)=>{if(t.statusCode>=300)return Da(t,e);let r=await Ss(t.body,e),n={};return n=ist(r,e),{$metadata:Yn(t),...n}},Bat=async(t,e)=>{if(t.statusCode>=300)return Da(t,e);let r=await Ss(t.body,e),n={};return n=rr(r),{$metadata:Yn(t),...n}},qat=async(t,e)=>{if(t.statusCode>=300)return Da(t,e);let r=await Ss(t.body,e),n={};return n=jcr(r,e),{$metadata:Yn(t),...n}},Uat=async(t,e)=>{if(t.statusCode>=300)return Da(t,e);let r=await Ss(t.body,e),n={};return n=rr(r),{$metadata:Yn(t),...n}},zat=async(t,e)=>{if(t.statusCode>=300)return Da(t,e);let r=await Ss(t.body,e),n={};return n=rr(r),{$metadata:Yn(t),...n}},Hat=async(t,e)=>{if(t.statusCode>=300)return Da(t,e);let r=await Ss(t.body,e),n={};return n=rr(r),{$metadata:Yn(t),...n}},Vat=async(t,e)=>{if(t.statusCode>=300)return Da(t,e);let r=await Ss(t.body,e),n={};return n=rr(r),{$metadata:Yn(t),...n}},Wat=async(t,e)=>{if(t.statusCode>=300)return Da(t,e);let r=await Ss(t.body,e),n={};return n=rr(r),{$metadata:Yn(t),...n}},Kat=async(t,e)=>{if(t.statusCode>=300)return Da(t,e);let r=await Ss(t.body,e),n={};return n=Dcr(r,e),{$metadata:Yn(t),...n}},Gat=async(t,e)=>{if(t.statusCode>=300)return Da(t,e);let r=await Ss(t.body,e),n={};return n=rr(r),{$metadata:Yn(t),...n}},Jat=async(t,e)=>{if(t.statusCode>=300)return Da(t,e);let r=await Ss(t.body,e),n={};return n=rr(r),{$metadata:Yn(t),...n}},Yat=async(t,e)=>{if(t.statusCode>=300)return Da(t,e);let r=await Ss(t.body,e),n={};return n=rr(r),{$metadata:Yn(t),...n}},Zat=async(t,e)=>{if(t.statusCode>=300)return Da(t,e);let r=await Ss(t.body,e),n={};return n=rr(r),{$metadata:Yn(t),...n}},Xat=async(t,e)=>t.statusCode>=300?Da(t,e):(await cT(t.body,e),{$metadata:Yn(t)}),Qat=async(t,e)=>{if(t.statusCode>=300)return Da(t,e);let r=await Ss(t.body,e),n={};return n=rr(r),{$metadata:Yn(t),...n}},est=async(t,e)=>{if(t.statusCode>=300)return Da(t,e);let r=await Ss(t.body,e),n={};return n=rr(r),{$metadata:Yn(t),...n}},tst=async(t,e)=>t.statusCode>=300?Da(t,e):(await cT(t.body,e),{$metadata:Yn(t)}),rst=async(t,e)=>t.statusCode>=300?Da(t,e):(await cT(t.body,e),{$metadata:Yn(t)}),nst=async(t,e)=>{if(t.statusCode>=300)return Da(t,e);let r=await Ss(t.body,e),n={};return n=rr(r),{$metadata:Yn(t),...n}},ost=async(t,e)=>{if(t.statusCode>=300)return Da(t,e);let r=await Ss(t.body,e),n={};return n=rr(r),{$metadata:Yn(t),...n}},Da=async(t,e)=>{let r={...t,body:await mot(t.body,e)},n=hot(t,r.body);switch(n){case"InternalErrorException":case"com.amazonaws.cognitoidentity#InternalErrorException":throw await Ccr(r,e);case"InvalidParameterException":case"com.amazonaws.cognitoidentity#InvalidParameterException":throw await Pcr(r,e);case"LimitExceededException":case"com.amazonaws.cognitoidentity#LimitExceededException":throw await Ecr(r,e);case"NotAuthorizedException":case"com.amazonaws.cognitoidentity#NotAuthorizedException":throw await Tcr(r,e);case"ResourceConflictException":case"com.amazonaws.cognitoidentity#ResourceConflictException":throw await Acr(r,e);case"TooManyRequestsException":case"com.amazonaws.cognitoidentity#TooManyRequestsException":throw await Mcr(r,e);case"ResourceNotFoundException":case"com.amazonaws.cognitoidentity#ResourceNotFoundException":throw await Icr(r,e);case"ExternalServiceException":case"com.amazonaws.cognitoidentity#ExternalServiceException":throw await xcr(r,e);case"InvalidIdentityPoolConfigurationException":case"com.amazonaws.cognitoidentity#InvalidIdentityPoolConfigurationException":throw await Ocr(r,e);case"DeveloperUserAlreadyRegisteredException":case"com.amazonaws.cognitoidentity#DeveloperUserAlreadyRegisteredException":throw await Scr(r,e);case"ConcurrentModificationException":case"com.amazonaws.cognitoidentity#ConcurrentModificationException":throw await wcr(r,e);default:let o=r.body;return Lcr({output:t,parsedBody:o,errorCode:n})}},wcr=async(t,e)=>{let r=t.body,n=rr(r),o=new CZ({$metadata:Yn(t),...n});return Na(o,r)},Scr=async(t,e)=>{let r=t.body,n=rr(r),o=new xZ({$metadata:Yn(t),...n});return Na(o,r)},xcr=async(t,e)=>{let r=t.body,n=rr(r),o=new wZ({$metadata:Yn(t),...n});return Na(o,r)},Ccr=async(t,e)=>{let r=t.body,n=rr(r),o=new mZ({$metadata:Yn(t),...n});return Na(o,r)},Ocr=async(t,e)=>{let r=t.body,n=rr(r),o=new SZ({$metadata:Yn(t),...n});return Na(o,r)},Pcr=async(t,e)=>{let r=t.body,n=rr(r),o=new hZ({$metadata:Yn(t),...n});return Na(o,r)},Ecr=async(t,e)=>{let r=t.body,n=rr(r),o=new gZ({$metadata:Yn(t),...n});return Na(o,r)},Tcr=async(t,e)=>{let r=t.body,n=rr(r),o=new yZ({$metadata:Yn(t),...n});return Na(o,r)},Acr=async(t,e)=>{let r=t.body,n=rr(r),o=new bZ({$metadata:Yn(t),...n});return Na(o,r)},Icr=async(t,e)=>{let r=t.body,n=rr(r),o=new vZ({$metadata:Yn(t),...n});return Na(o,r)},Mcr=async(t,e)=>{let r=t.body,n=rr(r),o=new _Z({$metadata:Yn(t),...n});return Na(o,r)},Rcr=(t,e)=>c3(t,{AccessKeyId:sn,Expiration:r=>FF(NY(t1(r))),SecretKey:sn,SessionToken:sn}),jcr=(t,e)=>c3(t,{Credentials:r=>Rcr(r,e),IdentityId:sn}),Ncr=(t,e)=>(t||[]).filter(n=>n!=null).map(n=>ist(n,e)),ist=(t,e)=>c3(t,{CreationDate:r=>FF(NY(t1(r))),IdentityId:sn,LastModifiedDate:r=>FF(NY(t1(r))),Logins:rr}),Dcr=(t,e)=>c3(t,{Identities:r=>Ncr(r,e),IdentityPoolId:sn,NextToken:sn}),Yn=t=>({httpStatusCode:t.statusCode,requestId:t.headers["x-amzn-requestid"]??t.headers["x-amzn-request-id"]??t.headers["x-amz-request-id"],extendedRequestId:t.headers["x-amz-id-2"],cfId:t.headers["x-amz-cf-id"]}),Lcr=DY(Id),La=async(t,e,r,n,o)=>{let{hostname:i,protocol:a="https",port:s,path:u}=await t.endpoint(),l={protocol:a,hostname:i,port:s,method:"POST",path:u.endsWith("/")?u.slice(0,-1)+r:u+r,headers:e};return n!==void 0&&(l.hostname=n),o!==void 0&&(l.body=o),new dZ(l)}});var OZ,pve=O(()=>{kn();Jn();or();ra();ba();OZ=class extends Ot.classBuilder().ep({...xr}).m(function(e,r,n,o){return[jt(n,this.serialize,this.deserialize),Nt(n,e.getEndpointParameterInstructions())]}).s("AWSCognitoIdentityService","CreateIdentityPool",{}).n("CognitoIdentityClient","CreateIdentityPoolCommand").f(void 0,void 0).ser(pat).de(Lat).build(){}});var PZ,mve=O(()=>{kn();Jn();or();ra();ba();PZ=class extends Ot.classBuilder().ep({...xr}).m(function(e,r,n,o){return[jt(n,this.serialize,this.deserialize),Nt(n,e.getEndpointParameterInstructions())]}).s("AWSCognitoIdentityService","DeleteIdentities",{}).n("CognitoIdentityClient","DeleteIdentitiesCommand").f(void 0,void 0).ser(mat).de(Fat).build(){}});var EZ,hve=O(()=>{kn();Jn();or();ra();ba();EZ=class extends Ot.classBuilder().ep({...xr}).m(function(e,r,n,o){return[jt(n,this.serialize,this.deserialize),Nt(n,e.getEndpointParameterInstructions())]}).s("AWSCognitoIdentityService","DeleteIdentityPool",{}).n("CognitoIdentityClient","DeleteIdentityPoolCommand").f(void 0,void 0).ser(hat).de(kat).build(){}});var TZ,gve=O(()=>{kn();Jn();or();ra();ba();TZ=class extends Ot.classBuilder().ep({...xr}).m(function(e,r,n,o){return[jt(n,this.serialize,this.deserialize),Nt(n,e.getEndpointParameterInstructions())]}).s("AWSCognitoIdentityService","DescribeIdentity",{}).n("CognitoIdentityClient","DescribeIdentityCommand").f(void 0,void 0).ser(gat).de($at).build(){}});var AZ,yve=O(()=>{kn();Jn();or();ra();ba();AZ=class extends Ot.classBuilder().ep({...xr}).m(function(e,r,n,o){return[jt(n,this.serialize,this.deserialize),Nt(n,e.getEndpointParameterInstructions())]}).s("AWSCognitoIdentityService","DescribeIdentityPool",{}).n("CognitoIdentityClient","DescribeIdentityPoolCommand").f(void 0,void 0).ser(yat).de(Bat).build(){}});var WF,bve=O(()=>{kn();Jn();or();ra();ba();WF=class extends Ot.classBuilder().ep({...xr}).m(function(e,r,n,o){return[jt(n,this.serialize,this.deserialize),Nt(n,e.getEndpointParameterInstructions())]}).s("AWSCognitoIdentityService","GetCredentialsForIdentity",{}).n("CognitoIdentityClient","GetCredentialsForIdentityCommand").f(void 0,void 0).ser(bat).de(qat).build(){}});var KF,_ve=O(()=>{kn();Jn();or();ra();ba();KF=class extends Ot.classBuilder().ep({...xr}).m(function(e,r,n,o){return[jt(n,this.serialize,this.deserialize),Nt(n,e.getEndpointParameterInstructions())]}).s("AWSCognitoIdentityService","GetId",{}).n("CognitoIdentityClient","GetIdCommand").f(void 0,void 0).ser(_at).de(Uat).build(){}});var IZ,vve=O(()=>{kn();Jn();or();ra();ba();IZ=class extends Ot.classBuilder().ep({...xr}).m(function(e,r,n,o){return[jt(n,this.serialize,this.deserialize),Nt(n,e.getEndpointParameterInstructions())]}).s("AWSCognitoIdentityService","GetIdentityPoolRoles",{}).n("CognitoIdentityClient","GetIdentityPoolRolesCommand").f(void 0,void 0).ser(vat).de(zat).build(){}});var MZ,wve=O(()=>{kn();Jn();or();ra();ba();MZ=class extends Ot.classBuilder().ep({...xr}).m(function(e,r,n,o){return[jt(n,this.serialize,this.deserialize),Nt(n,e.getEndpointParameterInstructions())]}).s("AWSCognitoIdentityService","GetOpenIdToken",{}).n("CognitoIdentityClient","GetOpenIdTokenCommand").f(void 0,void 0).ser(wat).de(Hat).build(){}});var RZ,Sve=O(()=>{kn();Jn();or();ra();ba();RZ=class extends Ot.classBuilder().ep({...xr}).m(function(e,r,n,o){return[jt(n,this.serialize,this.deserialize),Nt(n,e.getEndpointParameterInstructions())]}).s("AWSCognitoIdentityService","GetOpenIdTokenForDeveloperIdentity",{}).n("CognitoIdentityClient","GetOpenIdTokenForDeveloperIdentityCommand").f(void 0,void 0).ser(Sat).de(Vat).build(){}});var jZ,xve=O(()=>{kn();Jn();or();ra();ba();jZ=class extends Ot.classBuilder().ep({...xr}).m(function(e,r,n,o){return[jt(n,this.serialize,this.deserialize),Nt(n,e.getEndpointParameterInstructions())]}).s("AWSCognitoIdentityService","GetPrincipalTagAttributeMap",{}).n("CognitoIdentityClient","GetPrincipalTagAttributeMapCommand").f(void 0,void 0).ser(xat).de(Wat).build(){}});var NZ,Cve=O(()=>{kn();Jn();or();ra();ba();NZ=class extends Ot.classBuilder().ep({...xr}).m(function(e,r,n,o){return[jt(n,this.serialize,this.deserialize),Nt(n,e.getEndpointParameterInstructions())]}).s("AWSCognitoIdentityService","ListIdentities",{}).n("CognitoIdentityClient","ListIdentitiesCommand").f(void 0,void 0).ser(Cat).de(Kat).build(){}});var GF,DZ=O(()=>{kn();Jn();or();ra();ba();GF=class extends Ot.classBuilder().ep({...xr}).m(function(e,r,n,o){return[jt(n,this.serialize,this.deserialize),Nt(n,e.getEndpointParameterInstructions())]}).s("AWSCognitoIdentityService","ListIdentityPools",{}).n("CognitoIdentityClient","ListIdentityPoolsCommand").f(void 0,void 0).ser(Oat).de(Gat).build(){}});var LZ,Ove=O(()=>{kn();Jn();or();ra();ba();LZ=class extends Ot.classBuilder().ep({...xr}).m(function(e,r,n,o){return[jt(n,this.serialize,this.deserialize),Nt(n,e.getEndpointParameterInstructions())]}).s("AWSCognitoIdentityService","ListTagsForResource",{}).n("CognitoIdentityClient","ListTagsForResourceCommand").f(void 0,void 0).ser(Pat).de(Jat).build(){}});var FZ,Pve=O(()=>{kn();Jn();or();ra();ba();FZ=class extends Ot.classBuilder().ep({...xr}).m(function(e,r,n,o){return[jt(n,this.serialize,this.deserialize),Nt(n,e.getEndpointParameterInstructions())]}).s("AWSCognitoIdentityService","LookupDeveloperIdentity",{}).n("CognitoIdentityClient","LookupDeveloperIdentityCommand").f(void 0,void 0).ser(Eat).de(Yat).build(){}});var kZ,Eve=O(()=>{kn();Jn();or();ra();ba();kZ=class extends Ot.classBuilder().ep({...xr}).m(function(e,r,n,o){return[jt(n,this.serialize,this.deserialize),Nt(n,e.getEndpointParameterInstructions())]}).s("AWSCognitoIdentityService","MergeDeveloperIdentities",{}).n("CognitoIdentityClient","MergeDeveloperIdentitiesCommand").f(void 0,void 0).ser(Tat).de(Zat).build(){}});var $Z,Tve=O(()=>{kn();Jn();or();ra();ba();$Z=class extends Ot.classBuilder().ep({...xr}).m(function(e,r,n,o){return[jt(n,this.serialize,this.deserialize),Nt(n,e.getEndpointParameterInstructions())]}).s("AWSCognitoIdentityService","SetIdentityPoolRoles",{}).n("CognitoIdentityClient","SetIdentityPoolRolesCommand").f(void 0,void 0).ser(Aat).de(Xat).build(){}});var BZ,Ave=O(()=>{kn();Jn();or();ra();ba();BZ=class extends Ot.classBuilder().ep({...xr}).m(function(e,r,n,o){return[jt(n,this.serialize,this.deserialize),Nt(n,e.getEndpointParameterInstructions())]}).s("AWSCognitoIdentityService","SetPrincipalTagAttributeMap",{}).n("CognitoIdentityClient","SetPrincipalTagAttributeMapCommand").f(void 0,void 0).ser(Iat).de(Qat).build(){}});var qZ,Ive=O(()=>{kn();Jn();or();ra();ba();qZ=class extends Ot.classBuilder().ep({...xr}).m(function(e,r,n,o){return[jt(n,this.serialize,this.deserialize),Nt(n,e.getEndpointParameterInstructions())]}).s("AWSCognitoIdentityService","TagResource",{}).n("CognitoIdentityClient","TagResourceCommand").f(void 0,void 0).ser(Mat).de(est).build(){}});var UZ,Mve=O(()=>{kn();Jn();or();ra();ba();UZ=class extends Ot.classBuilder().ep({...xr}).m(function(e,r,n,o){return[jt(n,this.serialize,this.deserialize),Nt(n,e.getEndpointParameterInstructions())]}).s("AWSCognitoIdentityService","UnlinkDeveloperIdentity",{}).n("CognitoIdentityClient","UnlinkDeveloperIdentityCommand").f(void 0,void 0).ser(Rat).de(tst).build(){}});var zZ,Rve=O(()=>{kn();Jn();or();ra();ba();zZ=class extends Ot.classBuilder().ep({...xr}).m(function(e,r,n,o){return[jt(n,this.serialize,this.deserialize),Nt(n,e.getEndpointParameterInstructions())]}).s("AWSCognitoIdentityService","UnlinkIdentity",{}).n("CognitoIdentityClient","UnlinkIdentityCommand").f(void 0,void 0).ser(jat).de(rst).build(){}});var HZ,jve=O(()=>{kn();Jn();or();ra();ba();HZ=class extends Ot.classBuilder().ep({...xr}).m(function(e,r,n,o){return[jt(n,this.serialize,this.deserialize),Nt(n,e.getEndpointParameterInstructions())]}).s("AWSCognitoIdentityService","UntagResource",{}).n("CognitoIdentityClient","UntagResourceCommand").f(void 0,void 0).ser(Nat).de(nst).build(){}});var VZ,Nve=O(()=>{kn();Jn();or();ra();ba();VZ=class extends Ot.classBuilder().ep({...xr}).m(function(e,r,n,o){return[jt(n,this.serialize,this.deserialize),Nt(n,e.getEndpointParameterInstructions())]}).s("AWSCognitoIdentityService","UpdateIdentityPool",{}).n("CognitoIdentityClient","UpdateIdentityPoolCommand").f(void 0,void 0).ser(Dat).de(ost).build(){}});var Fcr,Dve,ast=O(()=>{or();pZ();pve();mve();hve();gve();yve();bve();_ve();vve();wve();Sve();xve();Cve();DZ();Ove();Pve();Eve();Tve();Ave();Ive();Mve();Rve();jve();Nve();Fcr={CreateIdentityPoolCommand:OZ,DeleteIdentitiesCommand:PZ,DeleteIdentityPoolCommand:EZ,DescribeIdentityCommand:TZ,DescribeIdentityPoolCommand:AZ,GetCredentialsForIdentityCommand:WF,GetIdCommand:KF,GetIdentityPoolRolesCommand:IZ,GetOpenIdTokenCommand:MZ,GetOpenIdTokenForDeveloperIdentityCommand:RZ,GetPrincipalTagAttributeMapCommand:jZ,ListIdentitiesCommand:NZ,ListIdentityPoolsCommand:GF,ListTagsForResourceCommand:LZ,LookupDeveloperIdentityCommand:FZ,MergeDeveloperIdentitiesCommand:kZ,SetIdentityPoolRolesCommand:$Z,SetPrincipalTagAttributeMapCommand:BZ,TagResourceCommand:qZ,UnlinkDeveloperIdentityCommand:UZ,UnlinkIdentityCommand:zZ,UntagResourceCommand:HZ,UpdateIdentityPoolCommand:VZ},Dve=class extends hT{};jY(Fcr,Dve)});var sst=O(()=>{pve();mve();hve();gve();yve();bve();_ve();vve();wve();Sve();xve();Cve();DZ();Ove();Pve();Eve();Tve();Ave();Ive();Mve();Rve();jve();Nve()});var ust=O(()=>{});var Gao,lst=O(()=>{dT();pZ();DZ();Gao=m_e(hT,GF,"NextToken","NextToken","MaxResults")});var cst=O(()=>{ust();lst()});var dst=O(()=>{fve()});var fst=O(()=>{pZ();ast();sst();cst();dst()});var Lve={};Zf(Lve,{CognitoIdentityClient:()=>hT,GetCredentialsForIdentityCommand:()=>WF,GetIdCommand:()=>KF});var Fve=O(()=>{fst()});function WZ(t){return async()=>{t.logger?.debug("@aws-sdk/credential-provider-cognito-identity - fromCognitoIdentity");let{GetCredentialsForIdentityCommand:e,CognitoIdentityClient:r}=await Promise.resolve().then(()=>(Fve(),Lve)),{Credentials:{AccessKeyId:n=kcr(t.logger),Expiration:o,SecretKey:i=Bcr(t.logger),SessionToken:a}=$cr(t.logger)}=await(t.client??new r(Object.assign({},t.clientConfig??{},{region:t.clientConfig?.region??t.parentClientConfig?.region}))).send(new e({CustomRoleArn:t.customRoleArn,IdentityId:t.identityId,Logins:t.logins?await V7(t.logins):void 0}));return{identityId:t.identityId,accessKeyId:n,secretAccessKey:i,sessionToken:a,expiration:o}}}function kcr(t){throw new yl("Response from Amazon Cognito contained no access key ID",{logger:t})}function $cr(t){throw new yl("Response from Amazon Cognito contained no credentials",{logger:t})}function Bcr(t){throw new yl("Response from Amazon Cognito contained no secret key",{logger:t})}var kve=O(()=>{FC();nbe()});var $ve,KZ,pst=O(()=>{$ve="IdentityIds",KZ=class{constructor(e="aws:cognito-identity-ids"){this.dbName=e}getItem(e){return this.withObjectStore("readonly",r=>{let n=r.get(e);return new Promise(o=>{n.onerror=()=>o(null),n.onsuccess=()=>o(n.result?n.result.value:null)})}).catch(()=>null)}removeItem(e){return this.withObjectStore("readwrite",r=>{let n=r.delete(e);return new Promise((o,i)=>{n.onerror=()=>i(n.error),n.onsuccess=()=>o()})})}setItem(e,r){return this.withObjectStore("readwrite",n=>{let o=n.put({id:e,value:r});return new Promise((i,a)=>{o.onerror=()=>a(o.error),o.onsuccess=()=>i()})})}getDb(){let e=self.indexedDB.open(this.dbName,1);return new Promise((r,n)=>{e.onsuccess=()=>{r(e.result)},e.onerror=()=>{n(e.error)},e.onblocked=()=>{n(new Error("Unable to access DB"))},e.onupgradeneeded=()=>{let o=e.result;o.onerror=()=>{n(new Error("Failed to create object store"))},o.createObjectStore($ve,{keyPath:"id"})}})}withObjectStore(e,r){return this.getDb().then(n=>{let o=n.transaction($ve,e);return o.oncomplete=()=>n.close(),new Promise((i,a)=>{o.onerror=()=>a(o.error),i(r(o.objectStore($ve)))}).catch(i=>{throw n.close(),i})})}}});var GZ,mst=O(()=>{GZ=class{constructor(e={}){this.store=e}getItem(e){return e in this.store?this.store[e]:null}removeItem(e){delete this.store[e]}setItem(e,r){this.store[e]=r}}});function hst(){return typeof self=="object"&&self.indexedDB?new KZ:typeof window=="object"&&window.localStorage?window.localStorage:qcr}var qcr,gst=O(()=>{pst();mst();qcr=new GZ});function yst({accountId:t,cache:e=hst(),client:r,clientConfig:n,customRoleArn:o,identityPoolId:i,logins:a,userIdentifier:s=!a||Object.keys(a).length===0?"ANONYMOUS":void 0,logger:u,parentClientConfig:l}){u?.debug("@aws-sdk/credential-provider-cognito-identity - fromCognitoIdentity");let c=s?`aws:cognito-identity-credentials:${i}:${s}`:void 0,d=async()=>{let{GetIdCommand:f,CognitoIdentityClient:p}=await Promise.resolve().then(()=>(Fve(),Lve)),m=r??new p(Object.assign({},n??{},{region:n?.region??l?.region})),h=c&&await e.getItem(c);if(!h){let{IdentityId:b=Ucr(u)}=await m.send(new f({AccountId:t,IdentityPoolId:i,Logins:a?await V7(a):void 0}));h=b,c&&Promise.resolve(e.setItem(c,h)).catch(()=>{})}return d=WZ({client:m,customRoleArn:o,logins:a,identityId:h}),d()};return()=>d().catch(async f=>{throw c&&Promise.resolve(e.removeItem(c)).catch(()=>{}),f})}function Ucr(t){throw new yl("Response from Amazon Cognito contained no identity ID",{logger:t})}var bst=O(()=>{FC();kve();gst();nbe()});var Bve=O(()=>{IYe();MYe();RYe();kve();bst()});var zcr,_st=O(()=>{Bve();zcr=t=>WZ({...t})});var Hcr,vst=O(()=>{Bve();Hcr=t=>yst({...t})});var Vcr,Wcr,Kcr,wst,Sst=O(()=>{FC();Vcr="169.254.170.2",Wcr="169.254.170.23",Kcr="[fd00:ec2::23]",wst=(t,e)=>{if(t.protocol!=="https:"&&!(t.hostname===Vcr||t.hostname===Wcr||t.hostname===Kcr)){if(t.hostname.includes("[")){if(t.hostname==="[::1]"||t.hostname==="[0000:0000:0000:0000:0000:0000:0000:0001]")return}else{if(t.hostname==="localhost")return;let r=t.hostname.split("."),n=o=>{let i=parseInt(o,10);return 0<=i&&i<=255};if(r[0]==="127"&&n(r[1])&&n(r[2])&&n(r[3])&&r.length===4)return}throw new yl(`URL not accepted. It must either be HTTPS or match one of the following:
  - loopback CIDR 127.0.0.0/8 or [::1/128]
  - ECS container host 169.254.170.2
  - EKS container host 169.254.170.23 or [fd00:ec2::23]`,{logger:e})}}});var xst=O(()=>{});var Cst=O(()=>{xst()});var Ost=O(()=>{Ds()});var Pst=O(()=>{});var Est=O(()=>{});function Gcr(t){return Object.keys(t).reduce((e,r)=>{let n=t[r];return{...e,[r]:Array.isArray(n)?[...n]:n}},{})}var JZ,Tst=O(()=>{JZ=class t{constructor(e){this.method=e.method||"GET",this.hostname=e.hostname||"localhost",this.port=e.port,this.query=e.query||{},this.headers=e.headers||{},this.body=e.body,this.protocol=e.protocol?e.protocol.slice(-1)!==":"?`${e.protocol}:`:e.protocol:"https:",this.path=e.path?e.path.charAt(0)!=="/"?`/${e.path}`:e.path:"/",this.username=e.username,this.password=e.password,this.fragment=e.fragment}static clone(e){let r=new t({...e,headers:{...e.headers}});return r.query&&(r.query=Gcr(r.query)),r}static isInstance(e){if(!e)return!1;let r=e;return"method"in r&&"protocol"in r&&"hostname"in r&&"path"in r&&typeof r.query=="object"&&typeof r.headers=="object"}clone(){return t.clone(this)}}});var Ast=O(()=>{});var Ist=O(()=>{});var Mst=O(()=>{});var Rst=O(()=>{Cst();Ost();Pst();Est();Tst();Ast();Ist();Mst()});function jst(t){return new JZ({protocol:t.protocol,hostname:t.hostname,port:Number(t.port),path:t.pathname,query:Array.from(t.searchParams.entries()).reduce((e,[r,n])=>(e[r]=n,e),{}),fragment:t.hash})}async function Nst(t,e){let n=await Ztt(t.body).transformToString();if(t.statusCode===200){let o=JSON.parse(n);if(typeof o.AccessKeyId!="string"||typeof o.SecretAccessKey!="string"||typeof o.Token!="string"||typeof o.Expiration!="string")throw new yl("HTTP credential provider response not of the required format, an object matching: { AccessKeyId: string, SecretAccessKey: string, Token: string, Expiration: string(rfc3339) }",{logger:e});return{accessKeyId:o.AccessKeyId,secretAccessKey:o.SecretAccessKey,sessionToken:o.Token,expiration:mrt(o.Expiration)}}if(t.statusCode>=400&&t.statusCode<500){let o={};try{o=JSON.parse(n)}catch{}throw Object.assign(new yl(`Server responded with status: ${t.statusCode}`,{logger:e}),{Code:o.Code,Message:o.Message})}throw new yl(`Server responded with status: ${t.statusCode}`,{logger:e})}var Dst=O(()=>{FC();Rst();or();r_e()});var Lst,Fst=O(()=>{Lst=(t,e,r)=>async()=>{for(let n=0;n<e;++n)try{return await t()}catch{await new Promise(i=>setTimeout(i,r))}return await t()}});var qve,kst=O(()=>{s3();FC();Sst();Dst();Fst();qve=(t={})=>{t.logger?.debug("@aws-sdk/credential-provider-http - fromHttp");let e,r=t.credentialsFullUri;if(r)e=r;else throw new yl("No HTTP credential provider host provided.",{logger:t.logger});let n=new URL(e);wst(n,t.logger);let o=new lT;return Lst(async()=>{let i=jst(n);t.authorizationToken&&(i.headers.Authorization=t.authorizationToken);let a=await o.handle(i);return Nst(a.response)},t.maxRetries??3,t.timeout??1e3)}});var $st=O(()=>{kst()});function Jcr(t){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"sts",region:t.region},propertiesExtractor:(e,r)=>({signingProperties:{config:e,context:r}})}}function Bst(t){return{schemeId:"smithy.api#noAuth"}}var qst,Ust,Ycr,zst,Uve=O(()=>{a1();py();C3();qst=async(t,e,r)=>({operation:l_(e).operation,region:await Ad(t.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});Ust=t=>{let e=[];switch(t.operation){case"AssumeRoleWithSAML":{e.push(Bst(t));break}case"AssumeRoleWithWebIdentity":{e.push(Bst(t));break}default:e.push(Jcr(t))}return e},Ycr=t=>({...t,stsClientCtor:Lh}),zst=t=>{let e=Ycr(t);return{...eZ(e)}}});var Hst,Md,g_=O(()=>{Hst=t=>({...t,useDualstackEndpoint:t.useDualstackEndpoint??!1,useFipsEndpoint:t.useFipsEndpoint??!1,useGlobalEndpoint:t.useGlobalEndpoint??!1,defaultSigningName:"sts"}),Md={UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}});var Wst,Vst=O(()=>{Wst={name:"@aws-sdk/client-sts",description:"AWS SDK for JavaScript Sts Client for Node.js, Browser and React Native",version:"3.645.0",scripts:{build:"concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"node ../../scripts/compilation/inline client-sts","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"rimraf ./dist-types tsconfig.types.tsbuildinfo && tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo","extract:docs":"api-extractor run --local","generate:client":"node ../../scripts/generate-clients/single-service --solo sts",test:"yarn test:unit","test:unit":"jest"},main:"./dist-cjs/index.js",types:"./dist-types/index.d.ts",module:"./dist-es/index.js",sideEffects:!1,dependencies:{"@aws-crypto/sha256-browser":"5.2.0","@aws-crypto/sha256-js":"5.2.0","@aws-sdk/client-sso-oidc":"3.645.0","@aws-sdk/core":"3.635.0","@aws-sdk/credential-provider-node":"3.645.0","@aws-sdk/middleware-host-header":"3.620.0","@aws-sdk/middleware-logger":"3.609.0","@aws-sdk/middleware-recursion-detection":"3.620.0","@aws-sdk/middleware-user-agent":"3.645.0","@aws-sdk/region-config-resolver":"3.614.0","@aws-sdk/types":"3.609.0","@aws-sdk/util-endpoints":"3.645.0","@aws-sdk/util-user-agent-browser":"3.609.0","@aws-sdk/util-user-agent-node":"3.614.0","@smithy/config-resolver":"^3.0.5","@smithy/core":"^2.4.0","@smithy/fetch-http-handler":"^3.2.4","@smithy/hash-node":"^3.0.3","@smithy/invalid-dependency":"^3.0.3","@smithy/middleware-content-length":"^3.0.5","@smithy/middleware-endpoint":"^3.1.0","@smithy/middleware-retry":"^3.0.15","@smithy/middleware-serde":"^3.0.3","@smithy/middleware-stack":"^3.0.3","@smithy/node-config-provider":"^3.1.4","@smithy/node-http-handler":"^3.1.4","@smithy/protocol-http":"^4.1.0","@smithy/smithy-client":"^3.2.0","@smithy/types":"^3.3.0","@smithy/url-parser":"^3.0.3","@smithy/util-base64":"^3.0.0","@smithy/util-body-length-browser":"^3.0.0","@smithy/util-body-length-node":"^3.0.0","@smithy/util-defaults-mode-browser":"^3.0.15","@smithy/util-defaults-mode-node":"^3.0.15","@smithy/util-endpoints":"^2.0.5","@smithy/util-middleware":"^3.0.3","@smithy/util-retry":"^3.0.3","@smithy/util-utf8":"^3.0.0",tslib:"^2.6.2"},devDependencies:{"@tsconfig/node16":"16.1.3","@types/node":"^16.18.96",concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typescript:"~4.9.5"},engines:{node:">=16.0.0"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["dist-*/**"],author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",browser:{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-sts",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-sts"}}});var zve,Hve=O(()=>{zve=t=>new TextEncoder().encode(t)});var Kst=O(()=>{Hve()});var Gst,Jst=O(()=>{Gst=t=>{if(typeof t=="string")return t;if(typeof t!="object"||typeof t.byteOffset!="number"||typeof t.byteLength!="number")throw new Error("@smithy/util-utf8: toUtf8 encoder function only accepts string | Uint8Array.");return new TextDecoder("utf-8").decode(t)}});var Yst=O(()=>{Hve();Kst();Jst()});var sut,tn,go,yo,yT,gT,Cc,uut,lut,cut,_a,Zst,y_,JF,Wve,Xst,Vve,dut,Qst,Oc,eut,fut,put,Rd,wm,tut,mut,hut,rut,gut,nut,out,iut,aut,Xcr,yut,but=O(()=>{sut="required",tn="type",go="fn",yo="argv",yT="ref",gT="booleanEquals",Cc="stringEquals",uut="sigv4",lut="sts",cut="us-east-1",_a="endpoint",Zst="https://sts.{Region}.{PartitionResult#dnsSuffix}",y_="tree",JF="error",Wve="getAttr",Xst={[sut]:!1,[tn]:"String"},Vve={[sut]:!0,default:!1,[tn]:"Boolean"},dut={[yT]:"Endpoint"},Qst={[go]:"isSet",[yo]:[{[yT]:"Region"}]},Oc={[yT]:"Region"},eut={[go]:"aws.partition",[yo]:[Oc],assign:"PartitionResult"},fut={[yT]:"UseFIPS"},put={[yT]:"UseDualStack"},Rd={url:"https://sts.amazonaws.com",properties:{authSchemes:[{name:uut,signingName:lut,signingRegion:cut}]},headers:{}},wm={},tut={conditions:[{[go]:Cc,[yo]:[Oc,"aws-global"]}],[_a]:Rd,[tn]:_a},mut={[go]:gT,[yo]:[fut,!0]},hut={[go]:gT,[yo]:[put,!0]},rut={[go]:Wve,[yo]:[{[yT]:"PartitionResult"},"supportsFIPS"]},gut={[yT]:"PartitionResult"},nut={[go]:gT,[yo]:[!0,{[go]:Wve,[yo]:[gut,"supportsDualStack"]}]},out=[{[go]:"isSet",[yo]:[dut]}],iut=[mut],aut=[hut],Xcr={version:"1.0",parameters:{Region:Xst,UseDualStack:Vve,UseFIPS:Vve,Endpoint:Xst,UseGlobalEndpoint:Vve},rules:[{conditions:[{[go]:gT,[yo]:[{[yT]:"UseGlobalEndpoint"},!0]},{[go]:"not",[yo]:out},Qst,eut,{[go]:gT,[yo]:[fut,!1]},{[go]:gT,[yo]:[put,!1]}],rules:[{conditions:[{[go]:Cc,[yo]:[Oc,"ap-northeast-1"]}],endpoint:Rd,[tn]:_a},{conditions:[{[go]:Cc,[yo]:[Oc,"ap-south-1"]}],endpoint:Rd,[tn]:_a},{conditions:[{[go]:Cc,[yo]:[Oc,"ap-southeast-1"]}],endpoint:Rd,[tn]:_a},{conditions:[{[go]:Cc,[yo]:[Oc,"ap-southeast-2"]}],endpoint:Rd,[tn]:_a},tut,{conditions:[{[go]:Cc,[yo]:[Oc,"ca-central-1"]}],endpoint:Rd,[tn]:_a},{conditions:[{[go]:Cc,[yo]:[Oc,"eu-central-1"]}],endpoint:Rd,[tn]:_a},{conditions:[{[go]:Cc,[yo]:[Oc,"eu-north-1"]}],endpoint:Rd,[tn]:_a},{conditions:[{[go]:Cc,[yo]:[Oc,"eu-west-1"]}],endpoint:Rd,[tn]:_a},{conditions:[{[go]:Cc,[yo]:[Oc,"eu-west-2"]}],endpoint:Rd,[tn]:_a},{conditions:[{[go]:Cc,[yo]:[Oc,"eu-west-3"]}],endpoint:Rd,[tn]:_a},{conditions:[{[go]:Cc,[yo]:[Oc,"sa-east-1"]}],endpoint:Rd,[tn]:_a},{conditions:[{[go]:Cc,[yo]:[Oc,cut]}],endpoint:Rd,[tn]:_a},{conditions:[{[go]:Cc,[yo]:[Oc,"us-east-2"]}],endpoint:Rd,[tn]:_a},{conditions:[{[go]:Cc,[yo]:[Oc,"us-west-1"]}],endpoint:Rd,[tn]:_a},{conditions:[{[go]:Cc,[yo]:[Oc,"us-west-2"]}],endpoint:Rd,[tn]:_a},{endpoint:{url:Zst,properties:{authSchemes:[{name:uut,signingName:lut,signingRegion:"{Region}"}]},headers:wm},[tn]:_a}],[tn]:y_},{conditions:out,rules:[{conditions:iut,error:"Invalid Configuration: FIPS and custom endpoint are not supported",[tn]:JF},{conditions:aut,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",[tn]:JF},{endpoint:{url:dut,properties:wm,headers:wm},[tn]:_a}],[tn]:y_},{conditions:[Qst],rules:[{conditions:[eut],rules:[{conditions:[mut,hut],rules:[{conditions:[{[go]:gT,[yo]:[!0,rut]},nut],rules:[{endpoint:{url:"https://sts-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:wm,headers:wm},[tn]:_a}],[tn]:y_},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",[tn]:JF}],[tn]:y_},{conditions:iut,rules:[{conditions:[{[go]:gT,[yo]:[rut,!0]}],rules:[{conditions:[{[go]:Cc,[yo]:[{[go]:Wve,[yo]:[gut,"name"]},"aws-us-gov"]}],endpoint:{url:"https://sts.{Region}.amazonaws.com",properties:wm,headers:wm},[tn]:_a},{endpoint:{url:"https://sts-fips.{Region}.{PartitionResult#dnsSuffix}",properties:wm,headers:wm},[tn]:_a}],[tn]:y_},{error:"FIPS is enabled but this partition does not support FIPS",[tn]:JF}],[tn]:y_},{conditions:aut,rules:[{conditions:[nut],rules:[{endpoint:{url:"https://sts.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:wm,headers:wm},[tn]:_a}],[tn]:y_},{error:"DualStack is enabled but this partition does not support DualStack",[tn]:JF}],[tn]:y_},tut,{endpoint:{url:Zst,properties:wm,headers:wm},[tn]:_a}],[tn]:y_}],[tn]:y_},{error:"Invalid Configuration: Missing Region",[tn]:JF}]},yut=Xcr});var _ut,vut=O(()=>{iY();rT();but();_ut=(t,e={})=>Z4(yut,{endpointParams:t,logger:e.logger});kC.aws=X4});var wut,Sut=O(()=>{a1();dT();or();gY();DF();Yst();Uve();vut();wut=t=>({apiVersion:"2011-06-15",base64Decoder:t?.base64Decoder??sT,base64Encoder:t?.base64Encoder??uT,disableHostPrefix:t?.disableHostPrefix??!1,endpointProvider:t?.endpointProvider??_ut,extensions:t?.extensions??[],httpAuthSchemeProvider:t?.httpAuthSchemeProvider??Ust,httpAuthSchemes:t?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:e=>e.getIdentityProvider("aws.auth#sigv4"),signer:new n1},{schemeId:"smithy.api#noAuth",identityProvider:e=>e.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new BF}],logger:t?.logger??new oT,serviceId:t?.serviceId??"STS",urlParser:t?.urlParser??nT,utf8Decoder:t?.utf8Decoder??zve,utf8Encoder:t?.utf8Encoder??Gst})});var xut,Cut=O(()=>{Vst();X_e();tve();Q4();s3();rve();nve();d_();Sut();or();sve();xut=t=>{let e=uZ(t),r=()=>e().then(LY),n=wut(t);return{...n,...t,runtime:"browser",defaultsMode:e,bodyLengthChecker:t?.bodyLengthChecker??sZ,credentialDefaultProvider:t?.credentialDefaultProvider??(o=>()=>Promise.reject(new Error("Credential is missing"))),defaultUserAgentProvider:t?.defaultUserAgentProvider??iZ({serviceId:n.serviceId,clientVersion:Wst.version}),maxAttempts:t?.maxAttempts??c_,region:t?.region??aZ("Region is missing"),requestHandler:lT.create(t?.requestHandler??r),retryMode:t?.retryMode??(async()=>(await r()).retryMode||r3),sha256:t?.sha256??oZ,streamCollector:t?.streamCollector??LF,useDualstackEndpoint:t?.useDualstackEndpoint??(()=>Promise.resolve(dY)),useFipsEndpoint:t?.useFipsEndpoint??(()=>Promise.resolve(fY))}}});var Out,Put,Eut=O(()=>{Out=t=>{let e=t.httpHandler;return{setHttpHandler(r){e=r},httpHandler(){return e},updateHttpClientConfig(r,n){e.updateHttpClientConfig(r,n)},httpHandlerConfigs(){return e.httpHandlerConfigs()}}},Put=t=>({httpHandler:t.httpHandler()})});var Tut=O(()=>{Eut()});var Aut=O(()=>{Ds()});var Iut=O(()=>{});var Mut=O(()=>{});function Qcr(t){return Object.keys(t).reduce((e,r)=>{let n=t[r];return{...e,[r]:Array.isArray(n)?[...n]:n}},{})}var YZ,Rut=O(()=>{YZ=class t{constructor(e){this.method=e.method||"GET",this.hostname=e.hostname||"localhost",this.port=e.port,this.query=e.query||{},this.headers=e.headers||{},this.body=e.body,this.protocol=e.protocol?e.protocol.slice(-1)!==":"?`${e.protocol}:`:e.protocol:"https:",this.path=e.path?e.path.charAt(0)!=="/"?`/${e.path}`:e.path:"/",this.username=e.username,this.password=e.password,this.fragment=e.fragment}static clone(e){let r=new t({...e,headers:{...e.headers}});return r.query&&(r.query=Qcr(r.query)),r}static isInstance(e){if(!e)return!1;let r=e;return"method"in r&&"protocol"in r&&"hostname"in r&&"path"in r&&typeof r.query=="object"&&typeof r.headers=="object"}clone(){return t.clone(this)}}});var jut=O(()=>{});var Nut=O(()=>{});var Dut=O(()=>{});var Kve=O(()=>{Tut();Aut();Iut();Mut();Rut();jut();Nut();Dut()});var Lut,Fut,kut=O(()=>{Lut=t=>{let e=t.httpAuthSchemes,r=t.httpAuthSchemeProvider,n=t.credentials;return{setHttpAuthScheme(o){let i=e.findIndex(a=>a.schemeId===o.schemeId);i===-1?e.push(o):e.splice(i,1,o)},httpAuthSchemes(){return e},setHttpAuthSchemeProvider(o){r=o},httpAuthSchemeProvider(){return r},setCredentials(o){n=o},credentials(){return n}}},Fut=t=>({httpAuthSchemes:t.httpAuthSchemes(),httpAuthSchemeProvider:t.httpAuthSchemeProvider(),credentials:t.credentials()})});var ZZ,$ut,But=O(()=>{lve();Kve();or();kut();ZZ=t=>t,$ut=(t,e)=>{let r={...ZZ(lZ(t)),...ZZ(FY(t)),...ZZ(Out(t)),...ZZ(Lut(t))};return e.forEach(n=>n.configure(r)),{...t,...cZ(r),...kY(r),...Put(r),...Fut(r)}}});var Lh,C3=O(()=>{abe();sbe();ube();Obe();Q4();dT();h_e();kn();qY();or();Uve();g_();Cut();But();Lh=class extends XR{constructor(...[e]){let r=xut(e||{}),n=Hst(r),o=Z7(n),i=AY(o),a=mY(i),s=a,u=_Y(s),l=zst(u),c=$ut(l,e?.extensions||[]);super(c),this.config=c,this.middlewareStack.use(lY(this.config)),this.middlewareStack.use(BY(this.config)),this.middlewareStack.use(HY(this.config)),this.middlewareStack.use(K7(this.config)),this.middlewareStack.use(G7(this.config)),this.middlewareStack.use(Y7(this.config)),this.middlewareStack.use(vY(this.config,{httpAuthSchemeParametersProvider:qst,identityProviderConfigProvider:async d=>new $F({"aws.auth#sigv4":d.credentials})})),this.middlewareStack.use(UY(this.config))}destroy(){super.destroy()}}});var Af,XZ=O(()=>{or();Af=class t extends kF{constructor(e){super(e),Object.setPrototypeOf(this,t.prototype)}}});var O3,P3,E3,T3,A3,I3,M3,R3,YF,Gve,Jve,Yve,Zve,Xve,Qve,ewe,bT=O(()=>{or();XZ();O3=class t extends Af{constructor(e){super({name:"ExpiredTokenException",$fault:"client",...e}),this.name="ExpiredTokenException",this.$fault="client",Object.setPrototypeOf(this,t.prototype)}},P3=class t extends Af{constructor(e){super({name:"MalformedPolicyDocumentException",$fault:"client",...e}),this.name="MalformedPolicyDocumentException",this.$fault="client",Object.setPrototypeOf(this,t.prototype)}},E3=class t extends Af{constructor(e){super({name:"PackedPolicyTooLargeException",$fault:"client",...e}),this.name="PackedPolicyTooLargeException",this.$fault="client",Object.setPrototypeOf(this,t.prototype)}},T3=class t extends Af{constructor(e){super({name:"RegionDisabledException",$fault:"client",...e}),this.name="RegionDisabledException",this.$fault="client",Object.setPrototypeOf(this,t.prototype)}},A3=class t extends Af{constructor(e){super({name:"IDPRejectedClaimException",$fault:"client",...e}),this.name="IDPRejectedClaimException",this.$fault="client",Object.setPrototypeOf(this,t.prototype)}},I3=class t extends Af{constructor(e){super({name:"InvalidIdentityTokenException",$fault:"client",...e}),this.name="InvalidIdentityTokenException",this.$fault="client",Object.setPrototypeOf(this,t.prototype)}},M3=class t extends Af{constructor(e){super({name:"IDPCommunicationErrorException",$fault:"client",...e}),this.name="IDPCommunicationErrorException",this.$fault="client",Object.setPrototypeOf(this,t.prototype)}},R3=class t extends Af{constructor(e){super({name:"InvalidAuthorizationMessageException",$fault:"client",...e}),this.name="InvalidAuthorizationMessageException",this.$fault="client",Object.setPrototypeOf(this,t.prototype)}},YF=t=>({...t,...t.SecretAccessKey&&{SecretAccessKey:RY}}),Gve=t=>({...t,...t.Credentials&&{Credentials:YF(t.Credentials)}}),Jve=t=>({...t,...t.SAMLAssertion&&{SAMLAssertion:RY}}),Yve=t=>({...t,...t.Credentials&&{Credentials:YF(t.Credentials)}}),Zve=t=>({...t,...t.WebIdentityToken&&{WebIdentityToken:RY}}),Xve=t=>({...t,...t.Credentials&&{Credentials:YF(t.Credentials)}}),Qve=t=>({...t,...t.Credentials&&{Credentials:YF(t.Credentials)}}),ewe=t=>({...t,...t.Credentials&&{Credentials:YF(t.Credentials)}})});var qut,Uut,zut,Hut,Vut,Wut,Kut,Gut,Jut,Yut,Zut,Xut,Qut,elt,tlt,rlt,_T,edr,tdr,rdr,ndr,odr,idr,adr,sdr,udr,ldr,cdr,ddr,fdr,pdr,mdr,hdr,QZ,gdr,ydr,bdr,_dr,vdr,nlt,Awe,wdr,Sdr,xdr,j3,Cdr,Odr,Pdr,Edr,Tdr,Adr,Idr,Mdr,Rdr,jdr,Ndr,Ddr,Ldr,Fdr,jd,kdr,vT,wT,ST,xT,ZF,$dr,twe,HC,Bdr,qdr,XF,VC,QF,If,rwe,Udr,nwe,Mf,owe,iwe,awe,swe,uwe,zdr,Hdr,Vdr,Wdr,lwe,cwe,dwe,fwe,Fh,kh,pwe,mwe,hwe,gwe,$h,ywe,WC,ek,bwe,_we,vwe,wwe,Bh,tk,Swe,xwe,rk,nk,Cwe,Owe,CT,Pwe,Ewe,Twe,va,OT,Kdr,KC=O(()=>{a1();Kve();or();bT();XZ();qut=async(t,e)=>{let r=wT,n;return n=OT({...udr(t,e),[xT]:$dr,[CT]:ST}),vT(e,r,"/",void 0,n)},Uut=async(t,e)=>{let r=wT,n;return n=OT({...ldr(t,e),[xT]:Bdr,[CT]:ST}),vT(e,r,"/",void 0,n)},zut=async(t,e)=>{let r=wT,n;return n=OT({...cdr(t,e),[xT]:qdr,[CT]:ST}),vT(e,r,"/",void 0,n)},Hut=async(t,e)=>{let r=wT,n;return n=OT({...ddr(t,e),[xT]:Udr,[CT]:ST}),vT(e,r,"/",void 0,n)},Vut=async(t,e)=>{let r=wT,n;return n=OT({...fdr(t,e),[xT]:zdr,[CT]:ST}),vT(e,r,"/",void 0,n)},Wut=async(t,e)=>{let r=wT,n;return n=OT({...pdr(t,e),[xT]:Hdr,[CT]:ST}),vT(e,r,"/",void 0,n)},Kut=async(t,e)=>{let r=wT,n;return n=OT({...mdr(t,e),[xT]:Vdr,[CT]:ST}),vT(e,r,"/",void 0,n)},Gut=async(t,e)=>{let r=wT,n;return n=OT({...hdr(t,e),[xT]:Wdr,[CT]:ST}),vT(e,r,"/",void 0,n)},Jut=async(t,e)=>{if(t.statusCode>=300)return _T(t,e);let r=await f_(t.body,e),n={};return n=wdr(r.AssumeRoleResult,e),{$metadata:jd(t),...n}},Yut=async(t,e)=>{if(t.statusCode>=300)return _T(t,e);let r=await f_(t.body,e),n={};return n=Sdr(r.AssumeRoleWithSAMLResult,e),{$metadata:jd(t),...n}},Zut=async(t,e)=>{if(t.statusCode>=300)return _T(t,e);let r=await f_(t.body,e),n={};return n=xdr(r.AssumeRoleWithWebIdentityResult,e),{$metadata:jd(t),...n}},Xut=async(t,e)=>{if(t.statusCode>=300)return _T(t,e);let r=await f_(t.body,e),n={};return n=Cdr(r.DecodeAuthorizationMessageResult,e),{$metadata:jd(t),...n}},Qut=async(t,e)=>{if(t.statusCode>=300)return _T(t,e);let r=await f_(t.body,e),n={};return n=Edr(r.GetAccessKeyInfoResult,e),{$metadata:jd(t),...n}},elt=async(t,e)=>{if(t.statusCode>=300)return _T(t,e);let r=await f_(t.body,e),n={};return n=Tdr(r.GetCallerIdentityResult,e),{$metadata:jd(t),...n}},tlt=async(t,e)=>{if(t.statusCode>=300)return _T(t,e);let r=await f_(t.body,e),n={};return n=Adr(r.GetFederationTokenResult,e),{$metadata:jd(t),...n}},rlt=async(t,e)=>{if(t.statusCode>=300)return _T(t,e);let r=await f_(t.body,e),n={};return n=Idr(r.GetSessionTokenResult,e),{$metadata:jd(t),...n}},_T=async(t,e)=>{let r={...t,body:await Yot(t.body,e)},n=Kdr(t,r.body);switch(n){case"ExpiredTokenException":case"com.amazonaws.sts#ExpiredTokenException":throw await edr(r,e);case"MalformedPolicyDocument":case"com.amazonaws.sts#MalformedPolicyDocumentException":throw await idr(r,e);case"PackedPolicyTooLarge":case"com.amazonaws.sts#PackedPolicyTooLargeException":throw await adr(r,e);case"RegionDisabledException":case"com.amazonaws.sts#RegionDisabledException":throw await sdr(r,e);case"IDPRejectedClaim":case"com.amazonaws.sts#IDPRejectedClaimException":throw await rdr(r,e);case"InvalidIdentityToken":case"com.amazonaws.sts#InvalidIdentityTokenException":throw await odr(r,e);case"IDPCommunicationError":case"com.amazonaws.sts#IDPCommunicationErrorException":throw await tdr(r,e);case"InvalidAuthorizationMessageException":case"com.amazonaws.sts#InvalidAuthorizationMessageException":throw await ndr(r,e);default:let o=r.body;return kdr({output:t,parsedBody:o.Error,errorCode:n})}},edr=async(t,e)=>{let r=t.body,n=Odr(r.Error,e),o=new O3({$metadata:jd(t),...n});return Na(o,r)},tdr=async(t,e)=>{let r=t.body,n=Mdr(r.Error,e),o=new M3({$metadata:jd(t),...n});return Na(o,r)},rdr=async(t,e)=>{let r=t.body,n=Rdr(r.Error,e),o=new A3({$metadata:jd(t),...n});return Na(o,r)},ndr=async(t,e)=>{let r=t.body,n=jdr(r.Error,e),o=new R3({$metadata:jd(t),...n});return Na(o,r)},odr=async(t,e)=>{let r=t.body,n=Ndr(r.Error,e),o=new I3({$metadata:jd(t),...n});return Na(o,r)},idr=async(t,e)=>{let r=t.body,n=Ddr(r.Error,e),o=new P3({$metadata:jd(t),...n});return Na(o,r)},adr=async(t,e)=>{let r=t.body,n=Ldr(r.Error,e),o=new E3({$metadata:jd(t),...n});return Na(o,r)},sdr=async(t,e)=>{let r=t.body,n=Fdr(r.Error,e),o=new T3({$metadata:jd(t),...n});return Na(o,r)},udr=(t,e)=>{let r={};if(t[WC]!=null&&(r[WC]=t[WC]),t[ek]!=null&&(r[ek]=t[ek]),t[kh]!=null){let n=QZ(t[kh],e);t[kh]?.length===0&&(r.PolicyArns=[]),Object.entries(n).forEach(([o,i])=>{let a=`PolicyArns.${o}`;r[a]=i})}if(t[Fh]!=null&&(r[Fh]=t[Fh]),t[Mf]!=null&&(r[Mf]=t[Mf]),t[rk]!=null){let n=nlt(t[rk],e);t[rk]?.length===0&&(r.Tags=[]),Object.entries(n).forEach(([o,i])=>{let a=`Tags.${o}`;r[a]=i})}if(t[Cwe]!=null){let n=vdr(t[Cwe],e);t[Cwe]?.length===0&&(r.TransitiveTagKeys=[]),Object.entries(n).forEach(([o,i])=>{let a=`TransitiveTagKeys.${o}`;r[a]=i})}if(t[iwe]!=null&&(r[iwe]=t[iwe]),t[tk]!=null&&(r[tk]=t[tk]),t[nk]!=null&&(r[nk]=t[nk]),t[Bh]!=null&&(r[Bh]=t[Bh]),t[hwe]!=null){let n=bdr(t[hwe],e);t[hwe]?.length===0&&(r.ProvidedContexts=[]),Object.entries(n).forEach(([o,i])=>{let a=`ProvidedContexts.${o}`;r[a]=i})}return r},ldr=(t,e)=>{let r={};if(t[WC]!=null&&(r[WC]=t[WC]),t[pwe]!=null&&(r[pwe]=t[pwe]),t[vwe]!=null&&(r[vwe]=t[vwe]),t[kh]!=null){let n=QZ(t[kh],e);t[kh]?.length===0&&(r.PolicyArns=[]),Object.entries(n).forEach(([o,i])=>{let a=`PolicyArns.${o}`;r[a]=i})}return t[Fh]!=null&&(r[Fh]=t[Fh]),t[Mf]!=null&&(r[Mf]=t[Mf]),r},cdr=(t,e)=>{let r={};if(t[WC]!=null&&(r[WC]=t[WC]),t[ek]!=null&&(r[ek]=t[ek]),t[Ewe]!=null&&(r[Ewe]=t[Ewe]),t[gwe]!=null&&(r[gwe]=t[gwe]),t[kh]!=null){let n=QZ(t[kh],e);t[kh]?.length===0&&(r.PolicyArns=[]),Object.entries(n).forEach(([o,i])=>{let a=`PolicyArns.${o}`;r[a]=i})}return t[Fh]!=null&&(r[Fh]=t[Fh]),t[Mf]!=null&&(r[Mf]=t[Mf]),r},ddr=(t,e)=>{let r={};return t[awe]!=null&&(r[awe]=t[awe]),r},fdr=(t,e)=>{let r={};return t[ZF]!=null&&(r[ZF]=t[ZF]),r},pdr=(t,e)=>({}),mdr=(t,e)=>{let r={};if(t[dwe]!=null&&(r[dwe]=t[dwe]),t[Fh]!=null&&(r[Fh]=t[Fh]),t[kh]!=null){let n=QZ(t[kh],e);t[kh]?.length===0&&(r.PolicyArns=[]),Object.entries(n).forEach(([o,i])=>{let a=`PolicyArns.${o}`;r[a]=i})}if(t[Mf]!=null&&(r[Mf]=t[Mf]),t[rk]!=null){let n=nlt(t[rk],e);t[rk]?.length===0&&(r.Tags=[]),Object.entries(n).forEach(([o,i])=>{let a=`Tags.${o}`;r[a]=i})}return r},hdr=(t,e)=>{let r={};return t[Mf]!=null&&(r[Mf]=t[Mf]),t[tk]!=null&&(r[tk]=t[tk]),t[nk]!=null&&(r[nk]=t[nk]),r},QZ=(t,e)=>{let r={},n=1;for(let o of t){if(o===null)continue;let i=gdr(o,e);Object.entries(i).forEach(([a,s])=>{r[`member.${n}.${a}`]=s}),n++}return r},gdr=(t,e)=>{let r={};return t[Twe]!=null&&(r[Twe]=t[Twe]),r},ydr=(t,e)=>{let r={};return t[mwe]!=null&&(r[mwe]=t[mwe]),t[rwe]!=null&&(r[rwe]=t[rwe]),r},bdr=(t,e)=>{let r={},n=1;for(let o of t){if(o===null)continue;let i=ydr(o,e);Object.entries(i).forEach(([a,s])=>{r[`member.${n}.${a}`]=s}),n++}return r},_dr=(t,e)=>{let r={};return t[cwe]!=null&&(r[cwe]=t[cwe]),t[Pwe]!=null&&(r[Pwe]=t[Pwe]),r},vdr=(t,e)=>{let r={},n=1;for(let o of t)o!==null&&(r[`member.${n}`]=o,n++);return r},nlt=(t,e)=>{let r={},n=1;for(let o of t){if(o===null)continue;let i=_dr(o,e);Object.entries(i).forEach(([a,s])=>{r[`member.${n}.${a}`]=s}),n++}return r},Awe=(t,e)=>{let r={};return t[twe]!=null&&(r[twe]=sn(t[twe])),t[VC]!=null&&(r[VC]=sn(t[VC])),r},wdr=(t,e)=>{let r={};return t[If]!=null&&(r[If]=j3(t[If],e)),t[HC]!=null&&(r[HC]=Awe(t[HC],e)),t[$h]!=null&&(r[$h]=l3(t[$h])),t[Bh]!=null&&(r[Bh]=sn(t[Bh])),r},Sdr=(t,e)=>{let r={};return t[If]!=null&&(r[If]=j3(t[If],e)),t[HC]!=null&&(r[HC]=Awe(t[HC],e)),t[$h]!=null&&(r[$h]=l3(t[$h])),t[bwe]!=null&&(r[bwe]=sn(t[bwe])),t[Swe]!=null&&(r[Swe]=sn(t[Swe])),t[lwe]!=null&&(r[lwe]=sn(t[lwe])),t[QF]!=null&&(r[QF]=sn(t[QF])),t[fwe]!=null&&(r[fwe]=sn(t[fwe])),t[Bh]!=null&&(r[Bh]=sn(t[Bh])),r},xdr=(t,e)=>{let r={};return t[If]!=null&&(r[If]=j3(t[If],e)),t[wwe]!=null&&(r[wwe]=sn(t[wwe])),t[HC]!=null&&(r[HC]=Awe(t[HC],e)),t[$h]!=null&&(r[$h]=l3(t[$h])),t[ywe]!=null&&(r[ywe]=sn(t[ywe])),t[QF]!=null&&(r[QF]=sn(t[QF])),t[Bh]!=null&&(r[Bh]=sn(t[Bh])),r},j3=(t,e)=>{let r={};return t[ZF]!=null&&(r[ZF]=sn(t[ZF])),t[_we]!=null&&(r[_we]=sn(t[_we])),t[xwe]!=null&&(r[xwe]=sn(t[xwe])),t[owe]!=null&&(r[owe]=FF(hrt(t[owe]))),r},Cdr=(t,e)=>{let r={};return t[nwe]!=null&&(r[nwe]=sn(t[nwe])),r},Odr=(t,e)=>{let r={};return t[va]!=null&&(r[va]=sn(t[va])),r},Pdr=(t,e)=>{let r={};return t[uwe]!=null&&(r[uwe]=sn(t[uwe])),t[VC]!=null&&(r[VC]=sn(t[VC])),r},Edr=(t,e)=>{let r={};return t[XF]!=null&&(r[XF]=sn(t[XF])),r},Tdr=(t,e)=>{let r={};return t[Owe]!=null&&(r[Owe]=sn(t[Owe])),t[XF]!=null&&(r[XF]=sn(t[XF])),t[VC]!=null&&(r[VC]=sn(t[VC])),r},Adr=(t,e)=>{let r={};return t[If]!=null&&(r[If]=j3(t[If],e)),t[swe]!=null&&(r[swe]=Pdr(t[swe],e)),t[$h]!=null&&(r[$h]=l3(t[$h])),r},Idr=(t,e)=>{let r={};return t[If]!=null&&(r[If]=j3(t[If],e)),r},Mdr=(t,e)=>{let r={};return t[va]!=null&&(r[va]=sn(t[va])),r},Rdr=(t,e)=>{let r={};return t[va]!=null&&(r[va]=sn(t[va])),r},jdr=(t,e)=>{let r={};return t[va]!=null&&(r[va]=sn(t[va])),r},Ndr=(t,e)=>{let r={};return t[va]!=null&&(r[va]=sn(t[va])),r},Ddr=(t,e)=>{let r={};return t[va]!=null&&(r[va]=sn(t[va])),r},Ldr=(t,e)=>{let r={};return t[va]!=null&&(r[va]=sn(t[va])),r},Fdr=(t,e)=>{let r={};return t[va]!=null&&(r[va]=sn(t[va])),r},jd=t=>({httpStatusCode:t.statusCode,requestId:t.headers["x-amzn-requestid"]??t.headers["x-amzn-request-id"]??t.headers["x-amz-request-id"],extendedRequestId:t.headers["x-amz-id-2"],cfId:t.headers["x-amz-cf-id"]}),kdr=DY(Af),vT=async(t,e,r,n,o)=>{let{hostname:i,protocol:a="https",port:s,path:u}=await t.endpoint(),l={protocol:a,hostname:i,port:s,method:"POST",path:u.endsWith("/")?u.slice(0,-1)+r:u+r,headers:e};return n!==void 0&&(l.hostname=n),o!==void 0&&(l.body=o),new YZ(l)},wT={"content-type":"application/x-www-form-urlencoded"},ST="2011-06-15",xT="Action",ZF="AccessKeyId",$dr="AssumeRole",twe="AssumedRoleId",HC="AssumedRoleUser",Bdr="AssumeRoleWithSAML",qdr="AssumeRoleWithWebIdentity",XF="Account",VC="Arn",QF="Audience",If="Credentials",rwe="ContextAssertion",Udr="DecodeAuthorizationMessage",nwe="DecodedMessage",Mf="DurationSeconds",owe="Expiration",iwe="ExternalId",awe="EncodedMessage",swe="FederatedUser",uwe="FederatedUserId",zdr="GetAccessKeyInfo",Hdr="GetCallerIdentity",Vdr="GetFederationToken",Wdr="GetSessionToken",lwe="Issuer",cwe="Key",dwe="Name",fwe="NameQualifier",Fh="Policy",kh="PolicyArns",pwe="PrincipalArn",mwe="ProviderArn",hwe="ProvidedContexts",gwe="ProviderId",$h="PackedPolicySize",ywe="Provider",WC="RoleArn",ek="RoleSessionName",bwe="Subject",_we="SecretAccessKey",vwe="SAMLAssertion",wwe="SubjectFromWebIdentityToken",Bh="SourceIdentity",tk="SerialNumber",Swe="SubjectType",xwe="SessionToken",rk="Tags",nk="TokenCode",Cwe="TransitiveTagKeys",Owe="UserId",CT="Version",Pwe="Value",Ewe="WebIdentityToken",Twe="arn",va="message",OT=t=>Object.entries(t).map(([e,r])=>$Y(e)+"="+$Y(r)).join("&"),Kdr=(t,e)=>{if(e.Error?.Code!==void 0)return e.Error.Code;if(t.statusCode==404)return"NotFound"}});var GC,eX=O(()=>{kn();Jn();or();g_();bT();KC();GC=class extends Ot.classBuilder().ep({...Md}).m(function(e,r,n,o){return[jt(n,this.serialize,this.deserialize),Nt(n,e.getEndpointParameterInstructions())]}).s("AWSSecurityTokenServiceV20110615","AssumeRole",{}).n("STSClient","AssumeRoleCommand").f(void 0,Gve).ser(qut).de(Jut).build(){}});var N3,Iwe=O(()=>{kn();Jn();or();g_();bT();KC();N3=class extends Ot.classBuilder().ep({...Md}).m(function(e,r,n,o){return[jt(n,this.serialize,this.deserialize),Nt(n,e.getEndpointParameterInstructions())]}).s("AWSSecurityTokenServiceV20110615","AssumeRoleWithSAML",{}).n("STSClient","AssumeRoleWithSAMLCommand").f(Jve,Yve).ser(Uut).de(Yut).build(){}});var s1,tX=O(()=>{kn();Jn();or();g_();bT();KC();s1=class extends Ot.classBuilder().ep({...Md}).m(function(e,r,n,o){return[jt(n,this.serialize,this.deserialize),Nt(n,e.getEndpointParameterInstructions())]}).s("AWSSecurityTokenServiceV20110615","AssumeRoleWithWebIdentity",{}).n("STSClient","AssumeRoleWithWebIdentityCommand").f(Zve,Xve).ser(zut).de(Zut).build(){}});var D3,Mwe=O(()=>{kn();Jn();or();g_();KC();D3=class extends Ot.classBuilder().ep({...Md}).m(function(e,r,n,o){return[jt(n,this.serialize,this.deserialize),Nt(n,e.getEndpointParameterInstructions())]}).s("AWSSecurityTokenServiceV20110615","DecodeAuthorizationMessage",{}).n("STSClient","DecodeAuthorizationMessageCommand").f(void 0,void 0).ser(Hut).de(Xut).build(){}});var L3,Rwe=O(()=>{kn();Jn();or();g_();KC();L3=class extends Ot.classBuilder().ep({...Md}).m(function(e,r,n,o){return[jt(n,this.serialize,this.deserialize),Nt(n,e.getEndpointParameterInstructions())]}).s("AWSSecurityTokenServiceV20110615","GetAccessKeyInfo",{}).n("STSClient","GetAccessKeyInfoCommand").f(void 0,void 0).ser(Vut).de(Qut).build(){}});var F3,jwe=O(()=>{kn();Jn();or();g_();KC();F3=class extends Ot.classBuilder().ep({...Md}).m(function(e,r,n,o){return[jt(n,this.serialize,this.deserialize),Nt(n,e.getEndpointParameterInstructions())]}).s("AWSSecurityTokenServiceV20110615","GetCallerIdentity",{}).n("STSClient","GetCallerIdentityCommand").f(void 0,void 0).ser(Wut).de(elt).build(){}});var k3,Nwe=O(()=>{kn();Jn();or();g_();bT();KC();k3=class extends Ot.classBuilder().ep({...Md}).m(function(e,r,n,o){return[jt(n,this.serialize,this.deserialize),Nt(n,e.getEndpointParameterInstructions())]}).s("AWSSecurityTokenServiceV20110615","GetFederationToken",{}).n("STSClient","GetFederationTokenCommand").f(void 0,Qve).ser(Kut).de(tlt).build(){}});var $3,Dwe=O(()=>{kn();Jn();or();g_();bT();KC();$3=class extends Ot.classBuilder().ep({...Md}).m(function(e,r,n,o){return[jt(n,this.serialize,this.deserialize),Nt(n,e.getEndpointParameterInstructions())]}).s("AWSSecurityTokenServiceV20110615","GetSessionToken",{}).n("STSClient","GetSessionTokenCommand").f(void 0,ewe).ser(Gut).de(rlt).build(){}});var Gdr,rX,olt=O(()=>{or();eX();Iwe();tX();Mwe();Rwe();jwe();Nwe();Dwe();C3();Gdr={AssumeRoleCommand:GC,AssumeRoleWithSAMLCommand:N3,AssumeRoleWithWebIdentityCommand:s1,DecodeAuthorizationMessageCommand:D3,GetAccessKeyInfoCommand:L3,GetCallerIdentityCommand:F3,GetFederationTokenCommand:k3,GetSessionTokenCommand:$3},rX=class extends Lh{};jY(Gdr,rX)});var ilt=O(()=>{eX();Iwe();tX();Mwe();Rwe();jwe();Nwe();Dwe()});var alt=O(()=>{bT()});var slt,ult,llt,clt,dlt,flt,plt=O(()=>{eX();tX();slt="us-east-1",ult=t=>{if(typeof t?.Arn=="string"){let e=t.Arn.split(":");if(e.length>4&&e[4]!=="")return e[4]}},llt=async(t,e,r)=>{let n=typeof t=="function"?await t():t,o=typeof e=="function"?await e():e;return r?.debug?.("@aws-sdk/client-sts::resolveRegion","accepting first of:",`${n} (provider)`,`${o} (parent client)`,`${slt} (STS default)`),n??o??slt},clt=(t,e)=>{let r,n;return async(o,i)=>{if(n=o,!r){let{logger:l=t?.parentClientConfig?.logger,region:c,requestHandler:d=t?.parentClientConfig?.requestHandler,credentialProviderLogger:f}=t,p=await llt(c,t?.parentClientConfig?.region,f),m=!flt(d);r=new e({credentialDefaultProvider:()=>async()=>n,region:p,requestHandler:m?d:void 0,logger:l})}let{Credentials:a,AssumedRoleUser:s}=await r.send(new GC(i));if(!a||!a.AccessKeyId||!a.SecretAccessKey)throw new Error(`Invalid response from STS.assumeRole call with role ${i.RoleArn}`);let u=ult(s);return{accessKeyId:a.AccessKeyId,secretAccessKey:a.SecretAccessKey,sessionToken:a.SessionToken,expiration:a.Expiration,...a.CredentialScope&&{credentialScope:a.CredentialScope},...u&&{accountId:u}}}},dlt=(t,e)=>{let r;return async n=>{if(!r){let{logger:s=t?.parentClientConfig?.logger,region:u,requestHandler:l=t?.parentClientConfig?.requestHandler,credentialProviderLogger:c}=t,d=await llt(u,t?.parentClientConfig?.region,c),f=!flt(l);r=new e({region:d,requestHandler:f?l:void 0,logger:s})}let{Credentials:o,AssumedRoleUser:i}=await r.send(new s1(n));if(!o||!o.AccessKeyId||!o.SecretAccessKey)throw new Error(`Invalid response from STS.assumeRoleWithWebIdentity call with role ${n.RoleArn}`);let a=ult(i);return{accessKeyId:o.AccessKeyId,secretAccessKey:o.SecretAccessKey,sessionToken:o.SessionToken,expiration:o.Expiration,...o.CredentialScope&&{credentialScope:o.CredentialScope},...a&&{accountId:a}}}},flt=t=>t?.metadata?.handlerProtocol==="h2"});var mlt,hlt,glt,Jdr,ylt=O(()=>{plt();C3();mlt=(t,e)=>e?class extends t{constructor(n){super(n);for(let o of e)this.middlewareStack.use(o)}}:t,hlt=(t={},e)=>clt(t,mlt(Lh,e)),glt=(t={},e)=>dlt(t,mlt(Lh,e)),Jdr=t=>e=>t({roleAssumer:hlt(e),roleAssumerWithWebIdentity:glt(e),...e})});var blt={};Zf(blt,{$Command:()=>Ot,AssumeRoleCommand:()=>GC,AssumeRoleResponseFilterSensitiveLog:()=>Gve,AssumeRoleWithSAMLCommand:()=>N3,AssumeRoleWithSAMLRequestFilterSensitiveLog:()=>Jve,AssumeRoleWithSAMLResponseFilterSensitiveLog:()=>Yve,AssumeRoleWithWebIdentityCommand:()=>s1,AssumeRoleWithWebIdentityRequestFilterSensitiveLog:()=>Zve,AssumeRoleWithWebIdentityResponseFilterSensitiveLog:()=>Xve,CredentialsFilterSensitiveLog:()=>YF,DecodeAuthorizationMessageCommand:()=>D3,ExpiredTokenException:()=>O3,GetAccessKeyInfoCommand:()=>L3,GetCallerIdentityCommand:()=>F3,GetFederationTokenCommand:()=>k3,GetFederationTokenResponseFilterSensitiveLog:()=>Qve,GetSessionTokenCommand:()=>$3,GetSessionTokenResponseFilterSensitiveLog:()=>ewe,IDPCommunicationErrorException:()=>M3,IDPRejectedClaimException:()=>A3,InvalidAuthorizationMessageException:()=>R3,InvalidIdentityTokenException:()=>I3,MalformedPolicyDocumentException:()=>P3,PackedPolicyTooLargeException:()=>E3,RegionDisabledException:()=>T3,STS:()=>rX,STSClient:()=>Lh,STSServiceException:()=>Af,__Client:()=>XR,decorateDefaultCredentialProvider:()=>Jdr,getDefaultRoleAssumer:()=>hlt,getDefaultRoleAssumerWithWebIdentity:()=>glt});var Lwe=O(()=>{C3();olt();ilt();alt();ylt();XZ()});var _lt={};Zf(_lt,{AssumeRoleCommand:()=>GC,STSClient:()=>Lh});var vlt=O(()=>{Lwe()});var Ydr,wlt=O(()=>{FC();Ydr=t=>{let e;return async()=>{t.logger?.debug("@aws-sdk/credential-providers - fromTemporaryCredentials (STS)");let r={...t.params,RoleSessionName:t.params.RoleSessionName??"aws-sdk-js-"+Date.now()};if(r?.SerialNumber){if(!t.mfaCodeProvider)throw new yl("Temporary credential requires multi-factor authentication, but no MFA code callback was provided.",{tryNextLink:!1,logger:t.logger});r.TokenCode=await t.mfaCodeProvider(r?.SerialNumber)}let{AssumeRoleCommand:n,STSClient:o}=await Promise.resolve().then(()=>(vlt(),_lt));if(e||(e=new o({...t.clientConfig,credentials:t.masterCredentials})),t.clientPlugins)for(let a of t.clientPlugins)e.middlewareStack.use(a);let{Credentials:i}=await e.send(new n(r));if(!i||!i.AccessKeyId||!i.SecretAccessKey)throw new yl(`Invalid response from STS.assumeRole call with role ${r.RoleArn}`,{logger:t.logger});return{accessKeyId:i.AccessKeyId,secretAccessKey:i.SecretAccessKey,sessionToken:i.SessionToken,expiration:i.Expiration,credentialScope:i.CredentialScope}}}});var Slt=O(()=>{});var xlt,Clt=O(()=>{xlt=t=>async()=>{t.logger?.debug("@aws-sdk/credential-provider-web-identity - fromWebToken");let{roleArn:e,roleSessionName:r,webIdentityToken:n,providerId:o,policyArns:i,policy:a,durationSeconds:s}=t,{roleAssumerWithWebIdentity:u}=t;if(!u){let{getDefaultRoleAssumerWithWebIdentity:l}=await Promise.resolve().then(()=>(Lwe(),blt));u=l({...t.clientConfig,credentialProviderLogger:t.logger,parentClientConfig:t.parentClientConfig},t.clientPlugins)}return u({RoleArn:e,RoleSessionName:r??`aws-sdk-js-session-${Date.now()}`,WebIdentityToken:n,ProviderId:o,PolicyArns:i,Policy:a,DurationSeconds:s})}});var Olt=O(()=>{Slt();Clt()});var Zdr,Plt=O(()=>{Olt();Zdr=t=>xlt({...t})});var Elt={};Zf(Elt,{fromCognitoIdentity:()=>zcr,fromCognitoIdentityPool:()=>Hcr,fromHttp:()=>qve,fromTemporaryCredentials:()=>Ydr,fromWebToken:()=>Zdr});var Tlt=O(()=>{_st();vst();$st();wlt();Plt()});var u1={};Zf(u1,{__addDisposableResource:()=>Jlt,__assign:()=>nX,__asyncDelegator:()=>qlt,__asyncGenerator:()=>Blt,__asyncValues:()=>Ult,__await:()=>ok,__awaiter:()=>Nlt,__classPrivateFieldGet:()=>Wlt,__classPrivateFieldIn:()=>Glt,__classPrivateFieldSet:()=>Klt,__createBinding:()=>iX,__decorate:()=>Mlt,__disposeResources:()=>Ylt,__esDecorate:()=>Xdr,__exportStar:()=>Llt,__extends:()=>Alt,__generator:()=>Dlt,__importDefault:()=>Vlt,__importStar:()=>Hlt,__makeTemplateObject:()=>zlt,__metadata:()=>jlt,__param:()=>Rlt,__propKey:()=>efr,__read:()=>kwe,__rest:()=>Ilt,__runInitializers:()=>Qdr,__setFunctionName:()=>tfr,__spread:()=>Flt,__spreadArray:()=>$lt,__spreadArrays:()=>klt,__values:()=>oX,default:()=>ofr});function Alt(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Fwe(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}function Ilt(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,n=Object.getOwnPropertySymbols(t);o<n.length;o++)e.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(t,n[o])&&(r[n[o]]=t[n[o]]);return r}function Mlt(t,e,r,n){var o=arguments.length,i=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(i=(o<3?a(i):o>3?a(e,r,i):a(e,r))||i);return o>3&&i&&Object.defineProperty(e,r,i),i}function Rlt(t,e){return function(r,n){e(r,n,t)}}function Xdr(t,e,r,n,o,i){function a(g){if(g!==void 0&&typeof g!="function")throw new TypeError("Function expected");return g}for(var s=n.kind,u=s==="getter"?"get":s==="setter"?"set":"value",l=!e&&t?n.static?t:t.prototype:null,c=e||(l?Object.getOwnPropertyDescriptor(l,n.name):{}),d,f=!1,p=r.length-1;p>=0;p--){var m={};for(var h in n)m[h]=h==="access"?{}:n[h];for(var h in n.access)m.access[h]=n.access[h];m.addInitializer=function(g){if(f)throw new TypeError("Cannot add initializers after decoration has completed");i.push(a(g||null))};var b=(0,r[p])(s==="accessor"?{get:c.get,set:c.set}:c[u],m);if(s==="accessor"){if(b===void 0)continue;if(b===null||typeof b!="object")throw new TypeError("Object expected");(d=a(b.get))&&(c.get=d),(d=a(b.set))&&(c.set=d),(d=a(b.init))&&o.unshift(d)}else(d=a(b))&&(s==="field"?o.unshift(d):c[u]=d)}l&&Object.defineProperty(l,n.name,c),f=!0}function Qdr(t,e,r){for(var n=arguments.length>2,o=0;o<e.length;o++)r=n?e[o].call(t,r):e[o].call(t);return n?r:void 0}function efr(t){return typeof t=="symbol"?t:"".concat(t)}function tfr(t,e,r){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(t,"name",{configurable:!0,value:r?"".concat(r," ",e):e})}function jlt(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function Nlt(t,e,r,n){function o(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function s(c){try{l(n.next(c))}catch(d){a(d)}}function u(c){try{l(n.throw(c))}catch(d){a(d)}}function l(c){c.done?i(c.value):o(c.value).then(s,u)}l((n=n.apply(t,e||[])).next())})}function Dlt(t,e){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(l){return function(c){return u([l,c])}}function u(l){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,l[0]&&(r=0)),r;)try{if(n=1,o&&(i=l[0]&2?o.return:l[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,l[1])).done)return i;switch(o=0,i&&(l=[l[0]&2,i.value]),l[0]){case 0:case 1:i=l;break;case 4:return r.label++,{value:l[1],done:!1};case 5:r.label++,o=l[1],l=[0];continue;case 7:l=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(l[0]===6||l[0]===2)){r=0;continue}if(l[0]===3&&(!i||l[1]>i[0]&&l[1]<i[3])){r.label=l[1];break}if(l[0]===6&&r.label<i[1]){r.label=i[1],i=l;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(l);break}i[2]&&r.ops.pop(),r.trys.pop();continue}l=e.call(t,r)}catch(c){l=[6,c],o=0}finally{n=i=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function Llt(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&iX(e,t,r)}function oX(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function kwe(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),o,i=[],a;try{for(;(e===void 0||e-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return i}function Flt(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(kwe(arguments[e]));return t}function klt(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),o=0,e=0;e<r;e++)for(var i=arguments[e],a=0,s=i.length;a<s;a++,o++)n[o]=i[a];return n}function $lt(t,e,r){if(r||arguments.length===2)for(var n=0,o=e.length,i;n<o;n++)(i||!(n in e))&&(i||(i=Array.prototype.slice.call(e,0,n)),i[n]=e[n]);return t.concat(i||Array.prototype.slice.call(e))}function ok(t){return this instanceof ok?(this.v=t,this):new ok(t)}function Blt(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),o,i=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),s("next"),s("throw"),s("return",a),o[Symbol.asyncIterator]=function(){return this},o;function a(p){return function(m){return Promise.resolve(m).then(p,d)}}function s(p,m){n[p]&&(o[p]=function(h){return new Promise(function(b,g){i.push([p,h,b,g])>1||u(p,h)})},m&&(o[p]=m(o[p])))}function u(p,m){try{l(n[p](m))}catch(h){f(i[0][3],h)}}function l(p){p.value instanceof ok?Promise.resolve(p.value.v).then(c,d):f(i[0][2],p)}function c(p){u("next",p)}function d(p){u("throw",p)}function f(p,m){p(m),i.shift(),i.length&&u(i[0][0],i[0][1])}}function qlt(t){var e,r;return e={},n("next"),n("throw",function(o){throw o}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(o,i){e[o]=t[o]?function(a){return(r=!r)?{value:ok(t[o](a)),done:!1}:i?i(a):a}:i}}function Ult(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof oX=="function"?oX(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(i){r[i]=t[i]&&function(a){return new Promise(function(s,u){a=t[i](a),o(s,u,a.done,a.value)})}}function o(i,a,s,u){Promise.resolve(u).then(function(l){i({value:l,done:s})},a)}}function zlt(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function Hlt(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&iX(e,t,r);return rfr(e,t),e}function Vlt(t){return t&&t.__esModule?t:{default:t}}function Wlt(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)}function Klt(t,e,r,n,o){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!o:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?o.call(t,r):o?o.value=r:e.set(t,r),r}function Glt(t,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof t=="function"?e===t:t.has(e)}function Jlt(t,e,r){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var n,o;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=e[Symbol.asyncDispose]}if(n===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=e[Symbol.dispose],r&&(o=n)}if(typeof n!="function")throw new TypeError("Object not disposable.");o&&(n=function(){try{o.call(this)}catch(i){return Promise.reject(i)}}),t.stack.push({value:e,dispose:n,async:r})}else r&&t.stack.push({async:!0});return e}function Ylt(t){function e(i){t.error=t.hasError?new nfr(i,t.error,"An error was suppressed during disposal."):i,t.hasError=!0}var r,n=0;function o(){for(;r=t.stack.pop();)try{if(!r.async&&n===1)return n=0,t.stack.push(r),Promise.resolve().then(o);if(r.dispose){var i=r.dispose.call(r.value);if(r.async)return n|=2,Promise.resolve(i).then(o,function(a){return e(a),o()})}else n|=1}catch(a){e(a)}if(n===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return o()}var Fwe,nX,iX,rfr,nfr,ofr,l1=O(()=>{Fwe=function(t,e){return Fwe=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])},Fwe(t,e)};nX=function(){return nX=Object.assign||function(e){for(var r,n=1,o=arguments.length;n<o;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},nX.apply(this,arguments)};iX=Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]};rfr=Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e};nfr=typeof SuppressedError=="function"?SuppressedError:function(t,e,r){var n=new Error(r);return n.name="SuppressedError",n.error=t,n.suppressed=e,n};ofr={__extends:Alt,__assign:nX,__rest:Ilt,__decorate:Mlt,__param:Rlt,__metadata:jlt,__awaiter:Nlt,__generator:Dlt,__createBinding:iX,__exportStar:Llt,__values:oX,__read:kwe,__spread:Flt,__spreadArrays:klt,__spreadArray:$lt,__await:ok,__asyncGenerator:Blt,__asyncDelegator:qlt,__asyncValues:Ult,__makeTemplateObject:zlt,__importStar:Hlt,__importDefault:Vlt,__classPrivateFieldGet:Wlt,__classPrivateFieldSet:Klt,__classPrivateFieldIn:Glt,__addDisposableResource:Jlt,__disposeResources:Ylt}});var Xlt=v(Zlt=>{"use strict";Object.defineProperty(Zlt,"__esModule",{value:!0})});var Qlt=v(B3=>{"use strict";Object.defineProperty(B3,"__esModule",{value:!0});B3.HttpAuthLocation=void 0;var ifr;(function(t){t.HEADER="header",t.QUERY="query"})(ifr=B3.HttpAuthLocation||(B3.HttpAuthLocation={}))});var tct=v(ect=>{"use strict";Object.defineProperty(ect,"__esModule",{value:!0})});var nct=v(rct=>{"use strict";Object.defineProperty(rct,"__esModule",{value:!0})});var ict=v(oct=>{"use strict";Object.defineProperty(oct,"__esModule",{value:!0})});var sct=v(act=>{"use strict";Object.defineProperty(act,"__esModule",{value:!0})});var lct=v(uct=>{"use strict";Object.defineProperty(uct,"__esModule",{value:!0})});var dct=v(cct=>{"use strict";Object.defineProperty(cct,"__esModule",{value:!0})});var pct=v(fct=>{"use strict";Object.defineProperty(fct,"__esModule",{value:!0})});var mct=v(q3=>{"use strict";Object.defineProperty(q3,"__esModule",{value:!0});var $we=(l1(),Rl(u1));$we.__exportStar(lct(),q3);$we.__exportStar(dct(),q3);$we.__exportStar(pct(),q3)});var gct=v(hct=>{"use strict";Object.defineProperty(hct,"__esModule",{value:!0})});var bct=v(yct=>{"use strict";Object.defineProperty(yct,"__esModule",{value:!0})});var _ct=v(U3=>{"use strict";Object.defineProperty(U3,"__esModule",{value:!0});U3.EndpointURLScheme=void 0;var afr;(function(t){t.HTTP="http",t.HTTPS="https"})(afr=U3.EndpointURLScheme||(U3.EndpointURLScheme={}))});var wct=v(vct=>{"use strict";Object.defineProperty(vct,"__esModule",{value:!0})});var xct=v(Sct=>{"use strict";Object.defineProperty(Sct,"__esModule",{value:!0})});var Oct=v(Cct=>{"use strict";Object.defineProperty(Cct,"__esModule",{value:!0})});var Ect=v(Pct=>{"use strict";Object.defineProperty(Pct,"__esModule",{value:!0})});var Act=v(Tct=>{"use strict";Object.defineProperty(Tct,"__esModule",{value:!0})});var Ict=v(c1=>{"use strict";Object.defineProperty(c1,"__esModule",{value:!0});var z3=(l1(),Rl(u1));z3.__exportStar(wct(),c1);z3.__exportStar(xct(),c1);z3.__exportStar(Oct(),c1);z3.__exportStar(Ect(),c1);z3.__exportStar(Act(),c1)});var Rct=v(Mct=>{"use strict";Object.defineProperty(Mct,"__esModule",{value:!0})});var jct=v(H3=>{"use strict";Object.defineProperty(H3,"__esModule",{value:!0});H3.FieldPosition=void 0;var sfr;(function(t){t[t.HEADER=0]="HEADER",t[t.TRAILER=1]="TRAILER"})(sfr=H3.FieldPosition||(H3.FieldPosition={}))});var Dct=v(Nct=>{"use strict";Object.defineProperty(Nct,"__esModule",{value:!0})});var Fct=v(Lct=>{"use strict";Object.defineProperty(Lct,"__esModule",{value:!0})});var $ct=v(aX=>{"use strict";Object.defineProperty(aX,"__esModule",{value:!0});var kct=(l1(),Rl(u1));kct.__exportStar(Dct(),aX);kct.__exportStar(Fct(),aX)});var qct=v(Bct=>{"use strict";Object.defineProperty(Bct,"__esModule",{value:!0})});var zct=v(Uct=>{"use strict";Object.defineProperty(Uct,"__esModule",{value:!0})});var Vct=v(Hct=>{"use strict";Object.defineProperty(Hct,"__esModule",{value:!0})});var Kct=v(Wct=>{"use strict";Object.defineProperty(Wct,"__esModule",{value:!0})});var Jct=v(Gct=>{"use strict";Object.defineProperty(Gct,"__esModule",{value:!0})});var Zct=v(Yct=>{"use strict";Object.defineProperty(Yct,"__esModule",{value:!0})});var Qct=v(Xct=>{"use strict";Object.defineProperty(Xct,"__esModule",{value:!0})});var tdt=v(edt=>{"use strict";Object.defineProperty(edt,"__esModule",{value:!0})});var ndt=v(rdt=>{"use strict";Object.defineProperty(rdt,"__esModule",{value:!0})});var idt=v(odt=>{"use strict";Object.defineProperty(odt,"__esModule",{value:!0})});var sdt=v(adt=>{"use strict";Object.defineProperty(adt,"__esModule",{value:!0})});var ldt=v(udt=>{"use strict";Object.defineProperty(udt,"__esModule",{value:!0})});var ddt=v(cdt=>{"use strict";Object.defineProperty(cdt,"__esModule",{value:!0})});var fdt=v(V3=>{"use strict";Object.defineProperty(V3,"__esModule",{value:!0});V3.RequestHandlerProtocol=void 0;var ufr;(function(t){t.HTTP_0_9="http/0.9",t.HTTP_1_0="http/1.0",t.TDS_8_0="tds/8.0"})(ufr=V3.RequestHandlerProtocol||(V3.RequestHandlerProtocol={}))});var mdt=v(pdt=>{"use strict";Object.defineProperty(pdt,"__esModule",{value:!0})});var gdt=v(hdt=>{"use strict";Object.defineProperty(hdt,"__esModule",{value:!0})});var bdt=v(ydt=>{"use strict";Object.defineProperty(ydt,"__esModule",{value:!0})});var vdt=v(_dt=>{"use strict";Object.defineProperty(_dt,"__esModule",{value:!0})});var Sdt=v(wdt=>{"use strict";Object.defineProperty(wdt,"__esModule",{value:!0})});var xdt=v($n=>{"use strict";Object.defineProperty($n,"__esModule",{value:!0});var fo=(l1(),Rl(u1));fo.__exportStar(Xlt(),$n);fo.__exportStar(Qlt(),$n);fo.__exportStar(tct(),$n);fo.__exportStar(nct(),$n);fo.__exportStar(ict(),$n);fo.__exportStar(sct(),$n);fo.__exportStar(mct(),$n);fo.__exportStar(gct(),$n);fo.__exportStar(bct(),$n);fo.__exportStar(_ct(),$n);fo.__exportStar(Ict(),$n);fo.__exportStar(Rct(),$n);fo.__exportStar(jct(),$n);fo.__exportStar($ct(),$n);fo.__exportStar(qct(),$n);fo.__exportStar(zct(),$n);fo.__exportStar(Vct(),$n);fo.__exportStar(Kct(),$n);fo.__exportStar(Jct(),$n);fo.__exportStar(Zct(),$n);fo.__exportStar(Qct(),$n);fo.__exportStar(tdt(),$n);fo.__exportStar(ndt(),$n);fo.__exportStar(idt(),$n);fo.__exportStar(sdt(),$n);fo.__exportStar(ldt(),$n);fo.__exportStar(ddt(),$n);fo.__exportStar(fdt(),$n);fo.__exportStar(mdt(),$n);fo.__exportStar(gdt(),$n);fo.__exportStar(bdt(),$n);fo.__exportStar(vdt(),$n);fo.__exportStar(Sdt(),$n)});var Cdt=v(sX=>{"use strict";Object.defineProperty(sX,"__esModule",{value:!0});sX.Field=void 0;var lfr=xdt(),Bwe=class{constructor({name:e,kind:r=lfr.FieldPosition.HEADER,values:n=[]}){this.name=e,this.kind=r,this.values=n}add(e){this.values.push(e)}set(e){this.values=e}remove(e){this.values=this.values.filter(r=>r!==e)}toString(){return this.values.map(e=>e.includes(",")||e.includes(" ")?`"${e}"`:e).join(", ")}get(){return this.values}};sX.Field=Bwe});var Odt=v(uX=>{"use strict";Object.defineProperty(uX,"__esModule",{value:!0});uX.Fields=void 0;var qwe=class{constructor({fields:e=[],encoding:r="utf-8"}){this.entries={},e.forEach(this.setField.bind(this)),this.encoding=r}setField(e){this.entries[e.name.toLowerCase()]=e}getField(e){return this.entries[e.toLowerCase()]}removeField(e){delete this.entries[e.toLowerCase()]}getByType(e){return Object.values(this.entries).filter(r=>r.kind===e)}};uX.Fields=qwe});var Edt=v(Pdt=>{"use strict";Object.defineProperty(Pdt,"__esModule",{value:!0})});var Tdt=v(lX=>{"use strict";Object.defineProperty(lX,"__esModule",{value:!0});lX.HttpRequest=void 0;var Uwe=class t{constructor(e){this.method=e.method||"GET",this.hostname=e.hostname||"localhost",this.port=e.port,this.query=e.query||{},this.headers=e.headers||{},this.body=e.body,this.protocol=e.protocol?e.protocol.slice(-1)!==":"?`${e.protocol}:`:e.protocol:"https:",this.path=e.path?e.path.charAt(0)!=="/"?`/${e.path}`:e.path:"/",this.username=e.username,this.password=e.password,this.fragment=e.fragment}static isInstance(e){if(!e)return!1;let r=e;return"method"in r&&"protocol"in r&&"hostname"in r&&"path"in r&&typeof r.query=="object"&&typeof r.headers=="object"}clone(){let e=new t({...this,headers:{...this.headers}});return e.query&&(e.query=cfr(e.query)),e}};lX.HttpRequest=Uwe;function cfr(t){return Object.keys(t).reduce((e,r)=>{let n=t[r];return{...e,[r]:Array.isArray(n)?[...n]:n}},{})}});var Adt=v(cX=>{"use strict";Object.defineProperty(cX,"__esModule",{value:!0});cX.HttpResponse=void 0;var zwe=class{constructor(e){this.statusCode=e.statusCode,this.reason=e.reason,this.headers=e.headers||{},this.body=e.body}static isInstance(e){if(!e)return!1;let r=e;return typeof r.statusCode=="number"&&typeof r.headers=="object"}};cX.HttpResponse=zwe});var Idt=v(dX=>{"use strict";Object.defineProperty(dX,"__esModule",{value:!0});dX.isValidHostname=void 0;function dfr(t){return/^[a-z0-9][a-z0-9\.\-]*[a-z0-9]$/.test(t)}dX.isValidHostname=dfr});var Rdt=v(Mdt=>{"use strict";Object.defineProperty(Mdt,"__esModule",{value:!0})});var jdt=v(JC=>{"use strict";Object.defineProperty(JC,"__esModule",{value:!0});var d1=(l1(),Rl(u1));d1.__exportStar(Cdt(),JC);d1.__exportStar(Odt(),JC);d1.__exportStar(Edt(),JC);d1.__exportStar(Tdt(),JC);d1.__exportStar(Adt(),JC);d1.__exportStar(Idt(),JC);d1.__exportStar(Rdt(),JC)});var Ndt=v(Hwe=>{"use strict";Object.defineProperty(Hwe,"__esModule",{value:!0});var ffr=(l1(),Rl(u1));ffr.__exportStar(jdt(),Hwe)});var f1={};Zf(f1,{__addDisposableResource:()=>tft,__assign:()=>fX,__asyncDelegator:()=>Kdt,__asyncGenerator:()=>Wdt,__asyncValues:()=>Gdt,__await:()=>ik,__awaiter:()=>Bdt,__classPrivateFieldGet:()=>Xdt,__classPrivateFieldIn:()=>eft,__classPrivateFieldSet:()=>Qdt,__createBinding:()=>mX,__decorate:()=>Fdt,__disposeResources:()=>rft,__esDecorate:()=>pfr,__exportStar:()=>Udt,__extends:()=>Ddt,__generator:()=>qdt,__importDefault:()=>Zdt,__importStar:()=>Ydt,__makeTemplateObject:()=>Jdt,__metadata:()=>$dt,__param:()=>kdt,__propKey:()=>hfr,__read:()=>Wwe,__rest:()=>Ldt,__runInitializers:()=>mfr,__setFunctionName:()=>gfr,__spread:()=>zdt,__spreadArray:()=>Vdt,__spreadArrays:()=>Hdt,__values:()=>pX,default:()=>_fr});function Ddt(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Vwe(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}function Ldt(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,n=Object.getOwnPropertySymbols(t);o<n.length;o++)e.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(t,n[o])&&(r[n[o]]=t[n[o]]);return r}function Fdt(t,e,r,n){var o=arguments.length,i=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(i=(o<3?a(i):o>3?a(e,r,i):a(e,r))||i);return o>3&&i&&Object.defineProperty(e,r,i),i}function kdt(t,e){return function(r,n){e(r,n,t)}}function pfr(t,e,r,n,o,i){function a(g){if(g!==void 0&&typeof g!="function")throw new TypeError("Function expected");return g}for(var s=n.kind,u=s==="getter"?"get":s==="setter"?"set":"value",l=!e&&t?n.static?t:t.prototype:null,c=e||(l?Object.getOwnPropertyDescriptor(l,n.name):{}),d,f=!1,p=r.length-1;p>=0;p--){var m={};for(var h in n)m[h]=h==="access"?{}:n[h];for(var h in n.access)m.access[h]=n.access[h];m.addInitializer=function(g){if(f)throw new TypeError("Cannot add initializers after decoration has completed");i.push(a(g||null))};var b=(0,r[p])(s==="accessor"?{get:c.get,set:c.set}:c[u],m);if(s==="accessor"){if(b===void 0)continue;if(b===null||typeof b!="object")throw new TypeError("Object expected");(d=a(b.get))&&(c.get=d),(d=a(b.set))&&(c.set=d),(d=a(b.init))&&o.unshift(d)}else(d=a(b))&&(s==="field"?o.unshift(d):c[u]=d)}l&&Object.defineProperty(l,n.name,c),f=!0}function mfr(t,e,r){for(var n=arguments.length>2,o=0;o<e.length;o++)r=n?e[o].call(t,r):e[o].call(t);return n?r:void 0}function hfr(t){return typeof t=="symbol"?t:"".concat(t)}function gfr(t,e,r){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(t,"name",{configurable:!0,value:r?"".concat(r," ",e):e})}function $dt(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function Bdt(t,e,r,n){function o(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function s(c){try{l(n.next(c))}catch(d){a(d)}}function u(c){try{l(n.throw(c))}catch(d){a(d)}}function l(c){c.done?i(c.value):o(c.value).then(s,u)}l((n=n.apply(t,e||[])).next())})}function qdt(t,e){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(l){return function(c){return u([l,c])}}function u(l){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,l[0]&&(r=0)),r;)try{if(n=1,o&&(i=l[0]&2?o.return:l[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,l[1])).done)return i;switch(o=0,i&&(l=[l[0]&2,i.value]),l[0]){case 0:case 1:i=l;break;case 4:return r.label++,{value:l[1],done:!1};case 5:r.label++,o=l[1],l=[0];continue;case 7:l=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(l[0]===6||l[0]===2)){r=0;continue}if(l[0]===3&&(!i||l[1]>i[0]&&l[1]<i[3])){r.label=l[1];break}if(l[0]===6&&r.label<i[1]){r.label=i[1],i=l;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(l);break}i[2]&&r.ops.pop(),r.trys.pop();continue}l=e.call(t,r)}catch(c){l=[6,c],o=0}finally{n=i=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function Udt(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&mX(e,t,r)}function pX(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Wwe(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),o,i=[],a;try{for(;(e===void 0||e-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return i}function zdt(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(Wwe(arguments[e]));return t}function Hdt(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),o=0,e=0;e<r;e++)for(var i=arguments[e],a=0,s=i.length;a<s;a++,o++)n[o]=i[a];return n}function Vdt(t,e,r){if(r||arguments.length===2)for(var n=0,o=e.length,i;n<o;n++)(i||!(n in e))&&(i||(i=Array.prototype.slice.call(e,0,n)),i[n]=e[n]);return t.concat(i||Array.prototype.slice.call(e))}function ik(t){return this instanceof ik?(this.v=t,this):new ik(t)}function Wdt(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),o,i=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),s("next"),s("throw"),s("return",a),o[Symbol.asyncIterator]=function(){return this},o;function a(p){return function(m){return Promise.resolve(m).then(p,d)}}function s(p,m){n[p]&&(o[p]=function(h){return new Promise(function(b,g){i.push([p,h,b,g])>1||u(p,h)})},m&&(o[p]=m(o[p])))}function u(p,m){try{l(n[p](m))}catch(h){f(i[0][3],h)}}function l(p){p.value instanceof ik?Promise.resolve(p.value.v).then(c,d):f(i[0][2],p)}function c(p){u("next",p)}function d(p){u("throw",p)}function f(p,m){p(m),i.shift(),i.length&&u(i[0][0],i[0][1])}}function Kdt(t){var e,r;return e={},n("next"),n("throw",function(o){throw o}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(o,i){e[o]=t[o]?function(a){return(r=!r)?{value:ik(t[o](a)),done:!1}:i?i(a):a}:i}}function Gdt(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof pX=="function"?pX(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(i){r[i]=t[i]&&function(a){return new Promise(function(s,u){a=t[i](a),o(s,u,a.done,a.value)})}}function o(i,a,s,u){Promise.resolve(u).then(function(l){i({value:l,done:s})},a)}}function Jdt(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function Ydt(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&mX(e,t,r);return yfr(e,t),e}function Zdt(t){return t&&t.__esModule?t:{default:t}}function Xdt(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)}function Qdt(t,e,r,n,o){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!o:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?o.call(t,r):o?o.value=r:e.set(t,r),r}function eft(t,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof t=="function"?e===t:t.has(e)}function tft(t,e,r){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var n,o;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=e[Symbol.asyncDispose]}if(n===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=e[Symbol.dispose],r&&(o=n)}if(typeof n!="function")throw new TypeError("Object not disposable.");o&&(n=function(){try{o.call(this)}catch(i){return Promise.reject(i)}}),t.stack.push({value:e,dispose:n,async:r})}else r&&t.stack.push({async:!0});return e}function rft(t){function e(i){t.error=t.hasError?new bfr(i,t.error,"An error was suppressed during disposal."):i,t.hasError=!0}var r,n=0;function o(){for(;r=t.stack.pop();)try{if(!r.async&&n===1)return n=0,t.stack.push(r),Promise.resolve().then(o);if(r.dispose){var i=r.dispose.call(r.value);if(r.async)return n|=2,Promise.resolve(i).then(o,function(a){return e(a),o()})}else n|=1}catch(a){e(a)}if(n===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return o()}var Vwe,fX,mX,yfr,bfr,_fr,p1=O(()=>{Vwe=function(t,e){return Vwe=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])},Vwe(t,e)};fX=function(){return fX=Object.assign||function(e){for(var r,n=1,o=arguments.length;n<o;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},fX.apply(this,arguments)};mX=Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]};yfr=Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e};bfr=typeof SuppressedError=="function"?SuppressedError:function(t,e,r){var n=new Error(r);return n.name="SuppressedError",n.error=t,n.suppressed=e,n};_fr={__extends:Ddt,__assign:fX,__rest:Ldt,__decorate:Fdt,__param:kdt,__metadata:$dt,__awaiter:Bdt,__generator:qdt,__createBinding:mX,__exportStar:Udt,__values:pX,__read:Wwe,__spread:zdt,__spreadArrays:Hdt,__spreadArray:Vdt,__await:ik,__asyncGenerator:Wdt,__asyncDelegator:Kdt,__asyncValues:Gdt,__makeTemplateObject:Jdt,__importStar:Ydt,__importDefault:Zdt,__classPrivateFieldGet:Xdt,__classPrivateFieldSet:Qdt,__classPrivateFieldIn:eft,__addDisposableResource:tft,__disposeResources:rft}});var Ywe={};Zf(Ywe,{__assign:()=>Gwe,__asyncDelegator:()=>Rfr,__asyncGenerator:()=>Mfr,__asyncValues:()=>jfr,__await:()=>W3,__awaiter:()=>Ofr,__classPrivateFieldGet:()=>Ffr,__classPrivateFieldSet:()=>kfr,__createBinding:()=>Efr,__decorate:()=>Sfr,__exportStar:()=>Tfr,__extends:()=>vfr,__generator:()=>Pfr,__importDefault:()=>Lfr,__importStar:()=>Dfr,__makeTemplateObject:()=>Nfr,__metadata:()=>Cfr,__param:()=>xfr,__read:()=>nft,__rest:()=>wfr,__spread:()=>Afr,__spreadArrays:()=>Ifr,__values:()=>Jwe});function vfr(t,e){Kwe(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}function wfr(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,n=Object.getOwnPropertySymbols(t);o<n.length;o++)e.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(t,n[o])&&(r[n[o]]=t[n[o]]);return r}function Sfr(t,e,r,n){var o=arguments.length,i=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(i=(o<3?a(i):o>3?a(e,r,i):a(e,r))||i);return o>3&&i&&Object.defineProperty(e,r,i),i}function xfr(t,e){return function(r,n){e(r,n,t)}}function Cfr(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function Ofr(t,e,r,n){function o(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function s(c){try{l(n.next(c))}catch(d){a(d)}}function u(c){try{l(n.throw(c))}catch(d){a(d)}}function l(c){c.done?i(c.value):o(c.value).then(s,u)}l((n=n.apply(t,e||[])).next())})}function Pfr(t,e){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(l){return function(c){return u([l,c])}}function u(l){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(i=l[0]&2?o.return:l[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,l[1])).done)return i;switch(o=0,i&&(l=[l[0]&2,i.value]),l[0]){case 0:case 1:i=l;break;case 4:return r.label++,{value:l[1],done:!1};case 5:r.label++,o=l[1],l=[0];continue;case 7:l=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(l[0]===6||l[0]===2)){r=0;continue}if(l[0]===3&&(!i||l[1]>i[0]&&l[1]<i[3])){r.label=l[1];break}if(l[0]===6&&r.label<i[1]){r.label=i[1],i=l;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(l);break}i[2]&&r.ops.pop(),r.trys.pop();continue}l=e.call(t,r)}catch(c){l=[6,c],o=0}finally{n=i=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function Efr(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}function Tfr(t,e){for(var r in t)r!=="default"&&!e.hasOwnProperty(r)&&(e[r]=t[r])}function Jwe(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function nft(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),o,i=[],a;try{for(;(e===void 0||e-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return i}function Afr(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(nft(arguments[e]));return t}function Ifr(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),o=0,e=0;e<r;e++)for(var i=arguments[e],a=0,s=i.length;a<s;a++,o++)n[o]=i[a];return n}function W3(t){return this instanceof W3?(this.v=t,this):new W3(t)}function Mfr(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),o,i=[];return o={},a("next"),a("throw"),a("return"),o[Symbol.asyncIterator]=function(){return this},o;function a(f){n[f]&&(o[f]=function(p){return new Promise(function(m,h){i.push([f,p,m,h])>1||s(f,p)})})}function s(f,p){try{u(n[f](p))}catch(m){d(i[0][3],m)}}function u(f){f.value instanceof W3?Promise.resolve(f.value.v).then(l,c):d(i[0][2],f)}function l(f){s("next",f)}function c(f){s("throw",f)}function d(f,p){f(p),i.shift(),i.length&&s(i[0][0],i[0][1])}}function Rfr(t){var e,r;return e={},n("next"),n("throw",function(o){throw o}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(o,i){e[o]=t[o]?function(a){return(r=!r)?{value:W3(t[o](a)),done:o==="return"}:i?i(a):a}:i}}function jfr(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof Jwe=="function"?Jwe(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(i){r[i]=t[i]&&function(a){return new Promise(function(s,u){a=t[i](a),o(s,u,a.done,a.value)})}}function o(i,a,s,u){Promise.resolve(u).then(function(l){i({value:l,done:s})},a)}}function Nfr(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function Dfr(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function Lfr(t){return t&&t.__esModule?t:{default:t}}function Ffr(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function kfr(t,e,r){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,r),r}var Kwe,Gwe,Zwe=O(()=>{Kwe=function(t,e){return Kwe=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},Kwe(t,e)};Gwe=function(){return Gwe=Object.assign||function(e){for(var r,n=1,o=arguments.length;n<o;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},Gwe.apply(this,arguments)}});var oft=v(ak=>{"use strict";Object.defineProperty(ak,"__esModule",{value:!0});ak.toUtf8=ak.fromUtf8=void 0;var $fr=t=>{let e=[];for(let r=0,n=t.length;r<n;r++){let o=t.charCodeAt(r);if(o<128)e.push(o);else if(o<2048)e.push(o>>6|192,o&63|128);else if(r+1<t.length&&(o&64512)===55296&&(t.charCodeAt(r+1)&64512)===56320){let i=65536+((o&1023)<<10)+(t.charCodeAt(++r)&1023);e.push(i>>18|240,i>>12&63|128,i>>6&63|128,i&63|128)}else e.push(o>>12|224,o>>6&63|128,o&63|128)}return Uint8Array.from(e)};ak.fromUtf8=$fr;var Bfr=t=>{let e="";for(let r=0,n=t.length;r<n;r++){let o=t[r];if(o<128)e+=String.fromCharCode(o);else if(192<=o&&o<224){let i=t[++r];e+=String.fromCharCode((o&31)<<6|i&63)}else if(240<=o&&o<365){let a="%"+[o,t[++r],t[++r],t[++r]].map(s=>s.toString(16)).join("%");e+=decodeURIComponent(a)}else e+=String.fromCharCode((o&15)<<12|(t[++r]&63)<<6|t[++r]&63)}return e};ak.toUtf8=Bfr});var ift=v(sk=>{"use strict";Object.defineProperty(sk,"__esModule",{value:!0});sk.toUtf8=sk.fromUtf8=void 0;function qfr(t){return new TextEncoder().encode(t)}sk.fromUtf8=qfr;function Ufr(t){return new TextDecoder("utf-8").decode(t)}sk.toUtf8=Ufr});var uft=v(uk=>{"use strict";Object.defineProperty(uk,"__esModule",{value:!0});uk.toUtf8=uk.fromUtf8=void 0;var aft=oft(),sft=ift(),zfr=t=>typeof TextEncoder=="function"?(0,sft.fromUtf8)(t):(0,aft.fromUtf8)(t);uk.fromUtf8=zfr;var Hfr=t=>typeof TextDecoder=="function"?(0,sft.toUtf8)(t):(0,aft.toUtf8)(t);uk.toUtf8=Hfr});var lft=v(hX=>{"use strict";Object.defineProperty(hX,"__esModule",{value:!0});hX.convertToBuffer=void 0;var Vfr=uft(),Wfr=typeof Buffer<"u"&&Buffer.from?function(t){return Buffer.from(t,"utf8")}:Vfr.fromUtf8;function Kfr(t){return t instanceof Uint8Array?t:typeof t=="string"?Wfr(t):ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(t)}hX.convertToBuffer=Kfr});var cft=v(gX=>{"use strict";Object.defineProperty(gX,"__esModule",{value:!0});gX.isEmptyData=void 0;function Gfr(t){return typeof t=="string"?t.length===0:t.byteLength===0}gX.isEmptyData=Gfr});var dft=v(yX=>{"use strict";Object.defineProperty(yX,"__esModule",{value:!0});yX.numToUint8=void 0;function Jfr(t){return new Uint8Array([(t&4278190080)>>24,(t&16711680)>>16,(t&65280)>>8,t&255])}yX.numToUint8=Jfr});var fft=v(bX=>{"use strict";Object.defineProperty(bX,"__esModule",{value:!0});bX.uint32ArrayFrom=void 0;function Yfr(t){if(!Uint32Array.from){for(var e=new Uint32Array(t.length),r=0;r<t.length;)e[r]=t[r],r+=1;return e}return Uint32Array.from(t)}bX.uint32ArrayFrom=Yfr});var Xwe=v(b_=>{"use strict";Object.defineProperty(b_,"__esModule",{value:!0});b_.uint32ArrayFrom=b_.numToUint8=b_.isEmptyData=b_.convertToBuffer=void 0;var Zfr=lft();Object.defineProperty(b_,"convertToBuffer",{enumerable:!0,get:function(){return Zfr.convertToBuffer}});var Xfr=cft();Object.defineProperty(b_,"isEmptyData",{enumerable:!0,get:function(){return Xfr.isEmptyData}});var Qfr=dft();Object.defineProperty(b_,"numToUint8",{enumerable:!0,get:function(){return Qfr.numToUint8}});var epr=fft();Object.defineProperty(b_,"uint32ArrayFrom",{enumerable:!0,get:function(){return epr.uint32ArrayFrom}})});var hft=v(_X=>{"use strict";Object.defineProperty(_X,"__esModule",{value:!0});_X.AwsCrc32=void 0;var pft=(Zwe(),Rl(Ywe)),Qwe=Xwe(),mft=vX(),tpr=function(){function t(){this.crc32=new mft.Crc32}return t.prototype.update=function(e){(0,Qwe.isEmptyData)(e)||this.crc32.update((0,Qwe.convertToBuffer)(e))},t.prototype.digest=function(){return pft.__awaiter(this,void 0,void 0,function(){return pft.__generator(this,function(e){return[2,(0,Qwe.numToUint8)(this.crc32.digest())]})})},t.prototype.reset=function(){this.crc32=new mft.Crc32},t}();_X.AwsCrc32=tpr});var vX=v(PT=>{"use strict";Object.defineProperty(PT,"__esModule",{value:!0});PT.AwsCrc32=PT.Crc32=PT.crc32=void 0;var rpr=(Zwe(),Rl(Ywe)),npr=Xwe();function opr(t){return new gft().update(t).digest()}PT.crc32=opr;var gft=function(){function t(){this.checksum=4294967295}return t.prototype.update=function(e){var r,n;try{for(var o=rpr.__values(e),i=o.next();!i.done;i=o.next()){var a=i.value;this.checksum=this.checksum>>>8^apr[(this.checksum^a)&255]}}catch(s){r={error:s}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return this},t.prototype.digest=function(){return(this.checksum^4294967295)>>>0},t}();PT.Crc32=gft;var ipr=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117],apr=(0,npr.uint32ArrayFrom)(ipr),spr=hft();Object.defineProperty(PT,"AwsCrc32",{enumerable:!0,get:function(){return spr.AwsCrc32}})});var ck=v(lk=>{"use strict";Object.defineProperty(lk,"__esModule",{value:!0});lk.toHex=lk.fromHex=void 0;var yft={},e0e={};for(let t=0;t<256;t++){let e=t.toString(16).toLowerCase();e.length===1&&(e=`0${e}`),yft[t]=e,e0e[e]=t}function upr(t){if(t.length%2!==0)throw new Error("Hex encoded strings must have an even number length");let e=new Uint8Array(t.length/2);for(let r=0;r<t.length;r+=2){let n=t.slice(r,r+2).toLowerCase();if(n in e0e)e[r/2]=e0e[n];else throw new Error(`Cannot decode unrecognized sequence ${n} as hexadecimal`)}return e}lk.fromHex=upr;function lpr(t){let e="";for(let r=0;r<t.byteLength;r++)e+=yft[t[r]];return e}lk.toHex=lpr});var r0e=v(wX=>{"use strict";Object.defineProperty(wX,"__esModule",{value:!0});wX.Int64=void 0;var cpr=ck(),t0e=class t{constructor(e){if(this.bytes=e,e.byteLength!==8)throw new Error("Int64 buffers must be exactly 8 bytes")}static fromNumber(e){if(e>9223372036854776e3||e<-9223372036854776e3)throw new Error(`${e} is too large (or, if negative, too small) to represent as an Int64`);let r=new Uint8Array(8);for(let n=7,o=Math.abs(Math.round(e));n>-1&&o>0;n--,o/=256)r[n]=o;return e<0&&bft(r),new t(r)}valueOf(){let e=this.bytes.slice(0),r=e[0]&128;return r&&bft(e),parseInt((0,cpr.toHex)(e),16)*(r?-1:1)}toString(){return String(this.valueOf())}};wX.Int64=t0e;function bft(t){for(let e=0;e<8;e++)t[e]^=255;for(let e=7;e>-1&&(t[e]++,t[e]===0);e--);}});var i0e=v(SX=>{"use strict";Object.defineProperty(SX,"__esModule",{value:!0});SX.HeaderMarshaller=void 0;var dk=ck(),n0e=r0e(),o0e=class{constructor(e,r){this.toUtf8=e,this.fromUtf8=r}format(e){let r=[];for(let i of Object.keys(e)){let a=this.fromUtf8(i);r.push(Uint8Array.from([a.byteLength]),a,this.formatHeaderValue(e[i]))}let n=new Uint8Array(r.reduce((i,a)=>i+a.byteLength,0)),o=0;for(let i of r)n.set(i,o),o+=i.byteLength;return n}formatHeaderValue(e){switch(e.type){case"boolean":return Uint8Array.from([e.value?0:1]);case"byte":return Uint8Array.from([2,e.value]);case"short":let r=new DataView(new ArrayBuffer(3));return r.setUint8(0,3),r.setInt16(1,e.value,!1),new Uint8Array(r.buffer);case"integer":let n=new DataView(new ArrayBuffer(5));return n.setUint8(0,4),n.setInt32(1,e.value,!1),new Uint8Array(n.buffer);case"long":let o=new Uint8Array(9);return o[0]=5,o.set(e.value.bytes,1),o;case"binary":let i=new DataView(new ArrayBuffer(3+e.value.byteLength));i.setUint8(0,6),i.setUint16(1,e.value.byteLength,!1);let a=new Uint8Array(i.buffer);return a.set(e.value,3),a;case"string":let s=this.fromUtf8(e.value),u=new DataView(new ArrayBuffer(3+s.byteLength));u.setUint8(0,7),u.setUint16(1,s.byteLength,!1);let l=new Uint8Array(u.buffer);return l.set(s,3),l;case"timestamp":let c=new Uint8Array(9);return c[0]=8,c.set(n0e.Int64.fromNumber(e.value.valueOf()).bytes,1),c;case"uuid":if(!_pr.test(e.value))throw new Error(`Invalid UUID received: ${e.value}`);let d=new Uint8Array(17);return d[0]=9,d.set((0,dk.fromHex)(e.value.replace(/\-/g,"")),1),d}}parse(e){let r={},n=0;for(;n<e.byteLength;){let o=e.getUint8(n++),i=this.toUtf8(new Uint8Array(e.buffer,e.byteOffset+n,o));switch(n+=o,e.getUint8(n++)){case 0:r[i]={type:vft,value:!0};break;case 1:r[i]={type:vft,value:!1};break;case 2:r[i]={type:dpr,value:e.getInt8(n++)};break;case 3:r[i]={type:fpr,value:e.getInt16(n,!1)},n+=2;break;case 4:r[i]={type:ppr,value:e.getInt32(n,!1)},n+=4;break;case 5:r[i]={type:mpr,value:new n0e.Int64(new Uint8Array(e.buffer,e.byteOffset+n,8))},n+=8;break;case 6:let a=e.getUint16(n,!1);n+=2,r[i]={type:hpr,value:new Uint8Array(e.buffer,e.byteOffset+n,a)},n+=a;break;case 7:let s=e.getUint16(n,!1);n+=2,r[i]={type:gpr,value:this.toUtf8(new Uint8Array(e.buffer,e.byteOffset+n,s))},n+=s;break;case 8:r[i]={type:ypr,value:new Date(new n0e.Int64(new Uint8Array(e.buffer,e.byteOffset+n,8)).valueOf())},n+=8;break;case 9:let u=new Uint8Array(e.buffer,e.byteOffset+n,16);n+=16,r[i]={type:bpr,value:`${(0,dk.toHex)(u.subarray(0,4))}-${(0,dk.toHex)(u.subarray(4,6))}-${(0,dk.toHex)(u.subarray(6,8))}-${(0,dk.toHex)(u.subarray(8,10))}-${(0,dk.toHex)(u.subarray(10))}`};break;default:throw new Error("Unrecognized header type tag")}}return r}};SX.HeaderMarshaller=o0e;var _ft;(function(t){t[t.boolTrue=0]="boolTrue",t[t.boolFalse=1]="boolFalse",t[t.byte=2]="byte",t[t.short=3]="short",t[t.integer=4]="integer",t[t.long=5]="long",t[t.byteArray=6]="byteArray",t[t.string=7]="string",t[t.timestamp=8]="timestamp",t[t.uuid=9]="uuid"})(_ft||(_ft={}));var vft="boolean",dpr="byte",fpr="short",ppr="integer",mpr="long",hpr="binary",gpr="string",ypr="timestamp",bpr="uuid",_pr=/^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/});var Sft=v(xX=>{"use strict";Object.defineProperty(xX,"__esModule",{value:!0});xX.splitMessage=void 0;var vpr=vX(),wft=4,ET=wft*2,m1=4,wpr=ET+m1*2;function Spr({byteLength:t,byteOffset:e,buffer:r}){if(t<wpr)throw new Error("Provided message too short to accommodate event stream message overhead");let n=new DataView(r,e,t),o=n.getUint32(0,!1);if(t!==o)throw new Error("Reported message length does not match received message length");let i=n.getUint32(wft,!1),a=n.getUint32(ET,!1),s=n.getUint32(t-m1,!1),u=new vpr.Crc32().update(new Uint8Array(r,e,ET));if(a!==u.digest())throw new Error(`The prelude checksum specified in the message (${a}) does not match the calculated CRC32 checksum (${u.digest()})`);if(u.update(new Uint8Array(r,e+ET,t-(ET+m1))),s!==u.digest())throw new Error(`The message checksum (${u.digest()}) did not match the expected value of ${s}`);return{headers:new DataView(r,e+ET+m1,i),body:new Uint8Array(r,e+ET+m1+i,o-i-(ET+m1+m1))}}xX.splitMessage=Spr});var xft=v(CX=>{"use strict";Object.defineProperty(CX,"__esModule",{value:!0});CX.EventStreamCodec=void 0;var xpr=vX(),Cpr=i0e(),Opr=Sft(),a0e=class{constructor(e,r){this.headerMarshaller=new Cpr.HeaderMarshaller(e,r),this.messageBuffer=[],this.isEndOfStream=!1}feed(e){this.messageBuffer.push(this.decode(e))}endOfStream(){this.isEndOfStream=!0}getMessage(){let e=this.messageBuffer.pop(),r=this.isEndOfStream;return{getMessage(){return e},isEndOfStream(){return r}}}getAvailableMessages(){let e=this.messageBuffer;this.messageBuffer=[];let r=this.isEndOfStream;return{getMessages(){return e},isEndOfStream(){return r}}}encode({headers:e,body:r}){let n=this.headerMarshaller.format(e),o=n.byteLength+r.byteLength+16,i=new Uint8Array(o),a=new DataView(i.buffer,i.byteOffset,i.byteLength),s=new xpr.Crc32;return a.setUint32(0,o,!1),a.setUint32(4,n.byteLength,!1),a.setUint32(8,s.update(i.subarray(0,8)).digest(),!1),i.set(n,12),i.set(r,n.byteLength+12),a.setUint32(o-4,s.update(i.subarray(8,o-4)).digest(),!1),i}decode(e){let{headers:r,body:n}=(0,Opr.splitMessage)(e);return{headers:this.headerMarshaller.parse(r),body:n}}formatHeaders(e){return this.headerMarshaller.format(e)}};CX.EventStreamCodec=a0e});var Oft=v(Cft=>{"use strict";Object.defineProperty(Cft,"__esModule",{value:!0})});var Pft=v(OX=>{"use strict";Object.defineProperty(OX,"__esModule",{value:!0});OX.MessageDecoderStream=void 0;var s0e=class{constructor(e){this.options=e}[Symbol.asyncIterator](){return this.asyncIterator()}async*asyncIterator(){for await(let e of this.options.inputStream)yield this.options.decoder.decode(e)}};OX.MessageDecoderStream=s0e});var Eft=v(PX=>{"use strict";Object.defineProperty(PX,"__esModule",{value:!0});PX.MessageEncoderStream=void 0;var u0e=class{constructor(e){this.options=e}[Symbol.asyncIterator](){return this.asyncIterator()}async*asyncIterator(){for await(let e of this.options.messageStream)yield this.options.encoder.encode(e);this.options.includeEndFrame&&(yield new Uint8Array(0))}};PX.MessageEncoderStream=u0e});var Tft=v(EX=>{"use strict";Object.defineProperty(EX,"__esModule",{value:!0});EX.SmithyMessageDecoderStream=void 0;var l0e=class{constructor(e){this.options=e}[Symbol.asyncIterator](){return this.asyncIterator()}async*asyncIterator(){for await(let e of this.options.messageStream){let r=await this.options.deserializer(e);r!==void 0&&(yield r)}}};EX.SmithyMessageDecoderStream=l0e});var Aft=v(TX=>{"use strict";Object.defineProperty(TX,"__esModule",{value:!0});TX.SmithyMessageEncoderStream=void 0;var c0e=class{constructor(e){this.options=e}[Symbol.asyncIterator](){return this.asyncIterator()}async*asyncIterator(){for await(let e of this.options.inputStream)yield this.options.serializer(e)}};TX.SmithyMessageEncoderStream=c0e});var Ift=v(__=>{"use strict";Object.defineProperty(__,"__esModule",{value:!0});var TT=(p1(),Rl(f1));TT.__exportStar(xft(),__);TT.__exportStar(i0e(),__);TT.__exportStar(r0e(),__);TT.__exportStar(Oft(),__);TT.__exportStar(Pft(),__);TT.__exportStar(Eft(),__);TT.__exportStar(Tft(),__);TT.__exportStar(Aft(),__)});var Mft=v(AX=>{"use strict";Object.defineProperty(AX,"__esModule",{value:!0});AX.normalizeProvider=void 0;var Ppr=t=>{if(typeof t=="function")return t;let e=Promise.resolve(t);return()=>e};AX.normalizeProvider=Ppr});var Rft=v(d0e=>{"use strict";Object.defineProperty(d0e,"__esModule",{value:!0});var Epr=(p1(),Rl(f1));Epr.__exportStar(Mft(),d0e)});var f0e=v(IX=>{"use strict";Object.defineProperty(IX,"__esModule",{value:!0});IX.isArrayBuffer=void 0;var Tpr=t=>typeof ArrayBuffer=="function"&&t instanceof ArrayBuffer||Object.prototype.toString.call(t)==="[object ArrayBuffer]";IX.isArrayBuffer=Tpr});var m0e=v(fk=>{"use strict";Object.defineProperty(fk,"__esModule",{value:!0});fk.fromString=fk.fromArrayBuffer=void 0;var Apr=f0e(),p0e=mp(),Ipr=(t,e=0,r=t.byteLength-e)=>{if(!(0,Apr.isArrayBuffer)(t))throw new TypeError(`The "input" argument must be ArrayBuffer. Received type ${typeof t} (${t})`);return p0e.Buffer.from(t,e,r)};fk.fromArrayBuffer=Ipr;var Mpr=(t,e)=>{if(typeof t!="string")throw new TypeError(`The "input" argument must be of type string. Received type ${typeof t} (${t})`);return e?p0e.Buffer.from(t,e):p0e.Buffer.from(t)};fk.fromString=Mpr});var h0e=v(MX=>{"use strict";Object.defineProperty(MX,"__esModule",{value:!0});MX.fromUtf8=void 0;var Rpr=m0e(),jpr=t=>{let e=(0,Rpr.fromString)(t,"utf8");return new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT)};MX.fromUtf8=jpr});var jft=v(RX=>{"use strict";Object.defineProperty(RX,"__esModule",{value:!0});RX.toUint8Array=void 0;var Npr=h0e(),Dpr=t=>typeof t=="string"?(0,Npr.fromUtf8)(t):ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(t);RX.toUint8Array=Dpr});var Nft=v(jX=>{"use strict";Object.defineProperty(jX,"__esModule",{value:!0});jX.toUtf8=void 0;var Lpr=m0e(),Fpr=t=>(0,Lpr.fromArrayBuffer)(t.buffer,t.byteOffset,t.byteLength).toString("utf8");jX.toUtf8=Fpr});var NX=v(K3=>{"use strict";Object.defineProperty(K3,"__esModule",{value:!0});var g0e=(p1(),Rl(f1));g0e.__exportStar(h0e(),K3);g0e.__exportStar(jft(),K3);g0e.__exportStar(Nft(),K3)});var h1=v(Dt=>{"use strict";Object.defineProperty(Dt,"__esModule",{value:!0});Dt.MAX_PRESIGNED_TTL=Dt.KEY_TYPE_IDENTIFIER=Dt.MAX_CACHE_SIZE=Dt.UNSIGNED_PAYLOAD=Dt.EVENT_ALGORITHM_IDENTIFIER=Dt.ALGORITHM_IDENTIFIER_V4A=Dt.ALGORITHM_IDENTIFIER=Dt.UNSIGNABLE_PATTERNS=Dt.SEC_HEADER_PATTERN=Dt.PROXY_HEADER_PATTERN=Dt.ALWAYS_UNSIGNABLE_HEADERS=Dt.HOST_HEADER=Dt.TOKEN_HEADER=Dt.SHA256_HEADER=Dt.SIGNATURE_HEADER=Dt.GENERATED_HEADERS=Dt.DATE_HEADER=Dt.AMZ_DATE_HEADER=Dt.AUTH_HEADER=Dt.REGION_SET_PARAM=Dt.TOKEN_QUERY_PARAM=Dt.SIGNATURE_QUERY_PARAM=Dt.EXPIRES_QUERY_PARAM=Dt.SIGNED_HEADERS_QUERY_PARAM=Dt.AMZ_DATE_QUERY_PARAM=Dt.CREDENTIAL_QUERY_PARAM=Dt.ALGORITHM_QUERY_PARAM=void 0;Dt.ALGORITHM_QUERY_PARAM="X-Amz-Algorithm";Dt.CREDENTIAL_QUERY_PARAM="X-Amz-Credential";Dt.AMZ_DATE_QUERY_PARAM="X-Amz-Date";Dt.SIGNED_HEADERS_QUERY_PARAM="X-Amz-SignedHeaders";Dt.EXPIRES_QUERY_PARAM="X-Amz-Expires";Dt.SIGNATURE_QUERY_PARAM="X-Amz-Signature";Dt.TOKEN_QUERY_PARAM="X-Amz-Security-Token";Dt.REGION_SET_PARAM="X-Amz-Region-Set";Dt.AUTH_HEADER="authorization";Dt.AMZ_DATE_HEADER=Dt.AMZ_DATE_QUERY_PARAM.toLowerCase();Dt.DATE_HEADER="date";Dt.GENERATED_HEADERS=[Dt.AUTH_HEADER,Dt.AMZ_DATE_HEADER,Dt.DATE_HEADER];Dt.SIGNATURE_HEADER=Dt.SIGNATURE_QUERY_PARAM.toLowerCase();Dt.SHA256_HEADER="x-amz-content-sha256";Dt.TOKEN_HEADER=Dt.TOKEN_QUERY_PARAM.toLowerCase();Dt.HOST_HEADER="host";Dt.ALWAYS_UNSIGNABLE_HEADERS={authorization:!0,"cache-control":!0,connection:!0,expect:!0,from:!0,"keep-alive":!0,"max-forwards":!0,pragma:!0,referer:!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0,"user-agent":!0,"x-amzn-trace-id":!0};Dt.PROXY_HEADER_PATTERN=/^proxy-/;Dt.SEC_HEADER_PATTERN=/^sec-/;Dt.UNSIGNABLE_PATTERNS=[/^proxy-/i,/^sec-/i];Dt.ALGORITHM_IDENTIFIER="AWS4-HMAC-SHA256";Dt.ALGORITHM_IDENTIFIER_V4A="AWS4-ECDSA-P256-SHA256";Dt.EVENT_ALGORITHM_IDENTIFIER="AWS4-HMAC-SHA256-PAYLOAD";Dt.UNSIGNED_PAYLOAD="UNSIGNED-PAYLOAD";Dt.MAX_CACHE_SIZE=50;Dt.KEY_TYPE_IDENTIFIER="aws4_request";Dt.MAX_PRESIGNED_TTL=60*60*24*7});var b0e=v(AT=>{"use strict";Object.defineProperty(AT,"__esModule",{value:!0});AT.clearCredentialCache=AT.getSigningKey=AT.createScope=void 0;var kpr=ck(),$pr=NX(),y0e=h1(),pk={},DX=[],Bpr=(t,e,r)=>`${t}/${e}/${r}/${y0e.KEY_TYPE_IDENTIFIER}`;AT.createScope=Bpr;var qpr=async(t,e,r,n,o)=>{let i=await Dft(t,e.secretAccessKey,e.accessKeyId),a=`${r}:${n}:${o}:${(0,kpr.toHex)(i)}:${e.sessionToken}`;if(a in pk)return pk[a];for(DX.push(a);DX.length>y0e.MAX_CACHE_SIZE;)delete pk[DX.shift()];let s=`AWS4${e.secretAccessKey}`;for(let u of[r,n,o,y0e.KEY_TYPE_IDENTIFIER])s=await Dft(t,s,u);return pk[a]=s};AT.getSigningKey=qpr;var Upr=()=>{DX.length=0,Object.keys(pk).forEach(t=>{delete pk[t]})};AT.clearCredentialCache=Upr;var Dft=(t,e,r)=>{let n=new t(e);return n.update((0,$pr.toUint8Array)(r)),n.digest()}});var v0e=v(LX=>{"use strict";Object.defineProperty(LX,"__esModule",{value:!0});LX.getCanonicalHeaders=void 0;var _0e=h1(),zpr=({headers:t},e,r)=>{let n={};for(let o of Object.keys(t).sort()){if(t[o]==null)continue;let i=o.toLowerCase();(i in _0e.ALWAYS_UNSIGNABLE_HEADERS||e?.has(i)||_0e.PROXY_HEADER_PATTERN.test(i)||_0e.SEC_HEADER_PATTERN.test(i))&&(!r||r&&!r.has(i))||(n[i]=t[o].trim().replace(/\s+/g," "))}return n};LX.getCanonicalHeaders=zpr});var w0e=v(FX=>{"use strict";Object.defineProperty(FX,"__esModule",{value:!0});FX.escapeUri=void 0;var Hpr=t=>encodeURIComponent(t).replace(/[!'()*]/g,Vpr);FX.escapeUri=Hpr;var Vpr=t=>`%${t.charCodeAt(0).toString(16).toUpperCase()}`});var Lft=v(kX=>{"use strict";Object.defineProperty(kX,"__esModule",{value:!0});kX.escapeUriPath=void 0;var Wpr=w0e(),Kpr=t=>t.split("/").map(Wpr.escapeUri).join("/");kX.escapeUriPath=Kpr});var kft=v($X=>{"use strict";Object.defineProperty($X,"__esModule",{value:!0});var Fft=(p1(),Rl(f1));Fft.__exportStar(w0e(),$X);Fft.__exportStar(Lft(),$X)});var S0e=v(qX=>{"use strict";Object.defineProperty(qX,"__esModule",{value:!0});qX.getCanonicalQuery=void 0;var BX=kft(),Gpr=h1(),Jpr=({query:t={}})=>{let e=[],r={};for(let n of Object.keys(t).sort()){if(n.toLowerCase()===Gpr.SIGNATURE_HEADER)continue;e.push(n);let o=t[n];typeof o=="string"?r[n]=`${(0,BX.escapeUri)(n)}=${(0,BX.escapeUri)(o)}`:Array.isArray(o)&&(r[n]=o.slice(0).sort().reduce((i,a)=>i.concat([`${(0,BX.escapeUri)(n)}=${(0,BX.escapeUri)(a)}`]),[]).join("&"))}return e.map(n=>r[n]).filter(n=>n).join("&")};qX.getCanonicalQuery=Jpr});var x0e=v(UX=>{"use strict";Object.defineProperty(UX,"__esModule",{value:!0});UX.getPayloadHash=void 0;var Ypr=f0e(),Zpr=ck(),Xpr=NX(),$ft=h1(),Qpr=async({headers:t,body:e},r)=>{for(let n of Object.keys(t))if(n.toLowerCase()===$ft.SHA256_HEADER)return t[n];if(e==null)return"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855";if(typeof e=="string"||ArrayBuffer.isView(e)||(0,Ypr.isArrayBuffer)(e)){let n=new r;return n.update((0,Xpr.toUint8Array)(e)),(0,Zpr.toHex)(await n.digest())}return $ft.UNSIGNED_PAYLOAD};UX.getPayloadHash=Qpr});var Bft=v(IT=>{"use strict";Object.defineProperty(IT,"__esModule",{value:!0});IT.deleteHeader=IT.getHeaderValue=IT.hasHeader=void 0;var emr=(t,e)=>{t=t.toLowerCase();for(let r of Object.keys(e))if(t===r.toLowerCase())return!0;return!1};IT.hasHeader=emr;var tmr=(t,e)=>{t=t.toLowerCase();for(let r of Object.keys(e))if(t===r.toLowerCase())return e[r]};IT.getHeaderValue=tmr;var rmr=(t,e)=>{t=t.toLowerCase();for(let r of Object.keys(e))t===r.toLowerCase()&&delete e[r]};IT.deleteHeader=rmr});var C0e=v(g1=>{"use strict";Object.defineProperty(g1,"__esModule",{value:!0});g1.cloneQuery=g1.cloneRequest=void 0;var nmr=({headers:t,query:e,...r})=>({...r,headers:{...t},query:e?(0,g1.cloneQuery)(e):void 0});g1.cloneRequest=nmr;var omr=t=>Object.keys(t).reduce((e,r)=>{let n=t[r];return{...e,[r]:Array.isArray(n)?[...n]:n}},{});g1.cloneQuery=omr});var O0e=v(zX=>{"use strict";Object.defineProperty(zX,"__esModule",{value:!0});zX.moveHeadersToQuery=void 0;var imr=C0e(),amr=(t,e={})=>{var r;let{headers:n,query:o={}}=typeof t.clone=="function"?t.clone():(0,imr.cloneRequest)(t);for(let i of Object.keys(n)){let a=i.toLowerCase();a.slice(0,6)==="x-amz-"&&!(!((r=e.unhoistableHeaders)===null||r===void 0)&&r.has(a))&&(o[i]=n[i],delete n[i])}return{...t,headers:n,query:o}};zX.moveHeadersToQuery=amr});var P0e=v(HX=>{"use strict";Object.defineProperty(HX,"__esModule",{value:!0});HX.prepareRequest=void 0;var smr=C0e(),umr=h1(),lmr=t=>{t=typeof t.clone=="function"?t.clone():(0,smr.cloneRequest)(t);for(let e of Object.keys(t.headers))umr.GENERATED_HEADERS.indexOf(e.toLowerCase())>-1&&delete t.headers[e];return t};HX.prepareRequest=lmr});var qft=v(y1=>{"use strict";Object.defineProperty(y1,"__esModule",{value:!0});y1.toDate=y1.iso8601=void 0;var cmr=t=>(0,y1.toDate)(t).toISOString().replace(/\.\d{3}Z$/,"Z");y1.iso8601=cmr;var dmr=t=>typeof t=="number"?new Date(t*1e3):typeof t=="string"?Number(t)?new Date(Number(t)*1e3):new Date(t):t;y1.toDate=dmr});var Wft=v(GX=>{"use strict";Object.defineProperty(GX,"__esModule",{value:!0});GX.SignatureV4=void 0;var fmr=Ift(),VX=ck(),Uft=Rft(),G3=NX(),Pc=h1(),WX=b0e(),zft=v0e(),pmr=S0e(),E0e=x0e(),mmr=Bft(),hmr=O0e(),Hft=P0e(),gmr=qft(),T0e=class{constructor({applyChecksum:e,credentials:r,region:n,service:o,sha256:i,uriEscapePath:a=!0}){this.headerMarshaller=new fmr.HeaderMarshaller(G3.toUtf8,G3.fromUtf8),this.service=o,this.sha256=i,this.uriEscapePath=a,this.applyChecksum=typeof e=="boolean"?e:!0,this.regionProvider=(0,Uft.normalizeProvider)(n),this.credentialProvider=(0,Uft.normalizeProvider)(r)}async presign(e,r={}){let{signingDate:n=new Date,expiresIn:o=3600,unsignableHeaders:i,unhoistableHeaders:a,signableHeaders:s,signingRegion:u,signingService:l}=r,c=await this.credentialProvider();this.validateResolvedCredentials(c);let d=u??await this.regionProvider(),{longDate:f,shortDate:p}=KX(n);if(o>Pc.MAX_PRESIGNED_TTL)return Promise.reject("Signature version 4 presigned URLs must have an expiration date less than one week in the future");let m=(0,WX.createScope)(p,d,l??this.service),h=(0,hmr.moveHeadersToQuery)((0,Hft.prepareRequest)(e),{unhoistableHeaders:a});c.sessionToken&&(h.query[Pc.TOKEN_QUERY_PARAM]=c.sessionToken),h.query[Pc.ALGORITHM_QUERY_PARAM]=Pc.ALGORITHM_IDENTIFIER,h.query[Pc.CREDENTIAL_QUERY_PARAM]=`${c.accessKeyId}/${m}`,h.query[Pc.AMZ_DATE_QUERY_PARAM]=f,h.query[Pc.EXPIRES_QUERY_PARAM]=o.toString(10);let b=(0,zft.getCanonicalHeaders)(h,i,s);return h.query[Pc.SIGNED_HEADERS_QUERY_PARAM]=Vft(b),h.query[Pc.SIGNATURE_QUERY_PARAM]=await this.getSignature(f,m,this.getSigningKey(c,d,p,l),this.createCanonicalRequest(h,b,await(0,E0e.getPayloadHash)(e,this.sha256))),h}async sign(e,r){return typeof e=="string"?this.signString(e,r):e.headers&&e.payload?this.signEvent(e,r):e.message?this.signMessage(e,r):this.signRequest(e,r)}async signEvent({headers:e,payload:r},{signingDate:n=new Date,priorSignature:o,signingRegion:i,signingService:a}){let s=i??await this.regionProvider(),{shortDate:u,longDate:l}=KX(n),c=(0,WX.createScope)(u,s,a??this.service),d=await(0,E0e.getPayloadHash)({headers:{},body:r},this.sha256),f=new this.sha256;f.update(e);let p=(0,VX.toHex)(await f.digest()),m=[Pc.EVENT_ALGORITHM_IDENTIFIER,l,c,o,p,d].join(`
`);return this.signString(m,{signingDate:n,signingRegion:s,signingService:a})}async signMessage(e,{signingDate:r=new Date,signingRegion:n,signingService:o}){return this.signEvent({headers:this.headerMarshaller.format(e.message.headers),payload:e.message.body},{signingDate:r,signingRegion:n,signingService:o,priorSignature:e.priorSignature}).then(a=>({message:e.message,signature:a}))}async signString(e,{signingDate:r=new Date,signingRegion:n,signingService:o}={}){let i=await this.credentialProvider();this.validateResolvedCredentials(i);let a=n??await this.regionProvider(),{shortDate:s}=KX(r),u=new this.sha256(await this.getSigningKey(i,a,s,o));return u.update((0,G3.toUint8Array)(e)),(0,VX.toHex)(await u.digest())}async signRequest(e,{signingDate:r=new Date,signableHeaders:n,unsignableHeaders:o,signingRegion:i,signingService:a}={}){let s=await this.credentialProvider();this.validateResolvedCredentials(s);let u=i??await this.regionProvider(),l=(0,Hft.prepareRequest)(e),{longDate:c,shortDate:d}=KX(r),f=(0,WX.createScope)(d,u,a??this.service);l.headers[Pc.AMZ_DATE_HEADER]=c,s.sessionToken&&(l.headers[Pc.TOKEN_HEADER]=s.sessionToken);let p=await(0,E0e.getPayloadHash)(l,this.sha256);!(0,mmr.hasHeader)(Pc.SHA256_HEADER,l.headers)&&this.applyChecksum&&(l.headers[Pc.SHA256_HEADER]=p);let m=(0,zft.getCanonicalHeaders)(l,o,n),h=await this.getSignature(c,f,this.getSigningKey(s,u,d,a),this.createCanonicalRequest(l,m,p));return l.headers[Pc.AUTH_HEADER]=`${Pc.ALGORITHM_IDENTIFIER} Credential=${s.accessKeyId}/${f}, SignedHeaders=${Vft(m)}, Signature=${h}`,l}createCanonicalRequest(e,r,n){let o=Object.keys(r).sort();return`${e.method}
${this.getCanonicalPath(e)}
${(0,pmr.getCanonicalQuery)(e)}
${o.map(i=>`${i}:${r[i]}`).join(`
`)}

${o.join(";")}
${n}`}async createStringToSign(e,r,n){let o=new this.sha256;o.update((0,G3.toUint8Array)(n));let i=await o.digest();return`${Pc.ALGORITHM_IDENTIFIER}
${e}
${r}
${(0,VX.toHex)(i)}`}getCanonicalPath({path:e}){if(this.uriEscapePath){let r=[];for(let i of e.split("/"))i?.length!==0&&i!=="."&&(i===".."?r.pop():r.push(i));let n=`${e?.startsWith("/")?"/":""}${r.join("/")}${r.length>0&&e?.endsWith("/")?"/":""}`;return encodeURIComponent(n).replace(/%2F/g,"/")}return e}async getSignature(e,r,n,o){let i=await this.createStringToSign(e,r,o),a=new this.sha256(await n);return a.update((0,G3.toUint8Array)(i)),(0,VX.toHex)(await a.digest())}getSigningKey(e,r,n,o){return(0,WX.getSigningKey)(this.sha256,e,n,r,o||this.service)}validateResolvedCredentials(e){if(typeof e!="object"||typeof e.accessKeyId!="string"||typeof e.secretAccessKey!="string")throw new Error("Resolved credential object is not valid")}};GX.SignatureV4=T0e;var KX=t=>{let e=(0,gmr.iso8601)(t).replace(/[\-:]/g,"");return{longDate:e,shortDate:e.slice(0,8)}},Vft=t=>Object.keys(t).sort().join(";")});var Gft=v(wp=>{"use strict";Object.defineProperty(wp,"__esModule",{value:!0});wp.prepareRequest=wp.moveHeadersToQuery=wp.getPayloadHash=wp.getCanonicalQuery=wp.getCanonicalHeaders=void 0;var Kft=(p1(),Rl(f1));Kft.__exportStar(Wft(),wp);var ymr=v0e();Object.defineProperty(wp,"getCanonicalHeaders",{enumerable:!0,get:function(){return ymr.getCanonicalHeaders}});var bmr=S0e();Object.defineProperty(wp,"getCanonicalQuery",{enumerable:!0,get:function(){return bmr.getCanonicalQuery}});var _mr=x0e();Object.defineProperty(wp,"getPayloadHash",{enumerable:!0,get:function(){return _mr.getPayloadHash}});var vmr=O0e();Object.defineProperty(wp,"moveHeadersToQuery",{enumerable:!0,get:function(){return vmr.moveHeadersToQuery}});var wmr=P0e();Object.defineProperty(wp,"prepareRequest",{enumerable:!0,get:function(){return wmr.prepareRequest}});Kft.__exportStar(b0e(),wp)});var Jft=v(A0e=>{"use strict";Object.defineProperty(A0e,"__esModule",{value:!0});var Smr=(p1(),Rl(f1));Smr.__exportStar(Gft(),A0e)});var ka=v((Mpo,Yft)=>{"use strict";Yft.exports={ArrayIsArray(t){return Array.isArray(t)},ArrayPrototypeIncludes(t,e){return t.includes(e)},ArrayPrototypeIndexOf(t,e){return t.indexOf(e)},ArrayPrototypeJoin(t,e){return t.join(e)},ArrayPrototypeMap(t,e){return t.map(e)},ArrayPrototypePop(t,e){return t.pop(e)},ArrayPrototypePush(t,e){return t.push(e)},ArrayPrototypeSlice(t,e,r){return t.slice(e,r)},Error,FunctionPrototypeCall(t,e,...r){return t.call(e,...r)},FunctionPrototypeSymbolHasInstance(t,e){return Function.prototype[Symbol.hasInstance].call(t,e)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(t,e){return Object.defineProperties(t,e)},ObjectDefineProperty(t,e,r){return Object.defineProperty(t,e,r)},ObjectGetOwnPropertyDescriptor(t,e){return Object.getOwnPropertyDescriptor(t,e)},ObjectKeys(t){return Object.keys(t)},ObjectSetPrototypeOf(t,e){return Object.setPrototypeOf(t,e)},Promise,PromisePrototypeCatch(t,e){return t.catch(e)},PromisePrototypeThen(t,e,r){return t.then(e,r)},PromiseReject(t){return Promise.reject(t)},PromiseResolve(t){return Promise.resolve(t)},ReflectApply:Reflect.apply,RegExpPrototypeTest(t,e){return t.test(e)},SafeSet:Set,String,StringPrototypeSlice(t,e,r){return t.slice(e,r)},StringPrototypeToLowerCase(t){return t.toLowerCase()},StringPrototypeToUpperCase(t){return t.toUpperCase()},StringPrototypeTrim(t){return t.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet(t,e,r){return t.set(e,r)},Boolean,Uint8Array}});var mk=v((Rpo,JX)=>{"use strict";var{AbortController:Zft,AbortSignal:xmr}=typeof self<"u"?self:typeof window<"u"?window:void 0;JX.exports=Zft;JX.exports.AbortSignal=xmr;JX.exports.default=Zft});var J3=v((jpo,I0e)=>{"use strict";var hk=typeof Reflect=="object"?Reflect:null,Xft=hk&&typeof hk.apply=="function"?hk.apply:function(e,r,n){return Function.prototype.apply.call(e,r,n)},YX;hk&&typeof hk.ownKeys=="function"?YX=hk.ownKeys:Object.getOwnPropertySymbols?YX=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:YX=function(e){return Object.getOwnPropertyNames(e)};function Cmr(t){console&&console.warn&&console.warn(t)}var ept=Number.isNaN||function(e){return e!==e};function vi(){vi.init.call(this)}I0e.exports=vi;I0e.exports.once=Tmr;vi.EventEmitter=vi;vi.prototype._events=void 0;vi.prototype._eventsCount=0;vi.prototype._maxListeners=void 0;var Qft=10;function ZX(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(vi,"defaultMaxListeners",{enumerable:!0,get:function(){return Qft},set:function(t){if(typeof t!="number"||t<0||ept(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");Qft=t}});vi.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};vi.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||ept(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function tpt(t){return t._maxListeners===void 0?vi.defaultMaxListeners:t._maxListeners}vi.prototype.getMaxListeners=function(){return tpt(this)};vi.prototype.emit=function(e){for(var r=[],n=1;n<arguments.length;n++)r.push(arguments[n]);var o=e==="error",i=this._events;if(i!==void 0)o=o&&i.error===void 0;else if(!o)return!1;if(o){var a;if(r.length>0&&(a=r[0]),a instanceof Error)throw a;var s=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw s.context=a,s}var u=i[e];if(u===void 0)return!1;if(typeof u=="function")Xft(u,this,r);else for(var l=u.length,c=apt(u,l),n=0;n<l;++n)Xft(c[n],this,r);return!0};function rpt(t,e,r,n){var o,i,a;if(ZX(r),i=t._events,i===void 0?(i=t._events=Object.create(null),t._eventsCount=0):(i.newListener!==void 0&&(t.emit("newListener",e,r.listener?r.listener:r),i=t._events),a=i[e]),a===void 0)a=i[e]=r,++t._eventsCount;else if(typeof a=="function"?a=i[e]=n?[r,a]:[a,r]:n?a.unshift(r):a.push(r),o=tpt(t),o>0&&a.length>o&&!a.warned){a.warned=!0;var s=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");s.name="MaxListenersExceededWarning",s.emitter=t,s.type=e,s.count=a.length,Cmr(s)}return t}vi.prototype.addListener=function(e,r){return rpt(this,e,r,!1)};vi.prototype.on=vi.prototype.addListener;vi.prototype.prependListener=function(e,r){return rpt(this,e,r,!0)};function Omr(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function npt(t,e,r){var n={fired:!1,wrapFn:void 0,target:t,type:e,listener:r},o=Omr.bind(n);return o.listener=r,n.wrapFn=o,o}vi.prototype.once=function(e,r){return ZX(r),this.on(e,npt(this,e,r)),this};vi.prototype.prependOnceListener=function(e,r){return ZX(r),this.prependListener(e,npt(this,e,r)),this};vi.prototype.removeListener=function(e,r){var n,o,i,a,s;if(ZX(r),o=this._events,o===void 0)return this;if(n=o[e],n===void 0)return this;if(n===r||n.listener===r)--this._eventsCount===0?this._events=Object.create(null):(delete o[e],o.removeListener&&this.emit("removeListener",e,n.listener||r));else if(typeof n!="function"){for(i=-1,a=n.length-1;a>=0;a--)if(n[a]===r||n[a].listener===r){s=n[a].listener,i=a;break}if(i<0)return this;i===0?n.shift():Pmr(n,i),n.length===1&&(o[e]=n[0]),o.removeListener!==void 0&&this.emit("removeListener",e,s||r)}return this};vi.prototype.off=vi.prototype.removeListener;vi.prototype.removeAllListeners=function(e){var r,n,o;if(n=this._events,n===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete n[e]),this;if(arguments.length===0){var i=Object.keys(n),a;for(o=0;o<i.length;++o)a=i[o],a!=="removeListener"&&this.removeAllListeners(a);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(r=n[e],typeof r=="function")this.removeListener(e,r);else if(r!==void 0)for(o=r.length-1;o>=0;o--)this.removeListener(e,r[o]);return this};function opt(t,e,r){var n=t._events;if(n===void 0)return[];var o=n[e];return o===void 0?[]:typeof o=="function"?r?[o.listener||o]:[o]:r?Emr(o):apt(o,o.length)}vi.prototype.listeners=function(e){return opt(this,e,!0)};vi.prototype.rawListeners=function(e){return opt(this,e,!1)};vi.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):ipt.call(t,e)};vi.prototype.listenerCount=ipt;function ipt(t){var e=this._events;if(e!==void 0){var r=e[t];if(typeof r=="function")return 1;if(r!==void 0)return r.length}return 0}vi.prototype.eventNames=function(){return this._eventsCount>0?YX(this._events):[]};function apt(t,e){for(var r=new Array(e),n=0;n<e;++n)r[n]=t[n];return r}function Pmr(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function Emr(t){for(var e=new Array(t.length),r=0;r<e.length;++r)e[r]=t[r].listener||t[r];return e}function Tmr(t,e){return new Promise(function(r,n){function o(a){t.removeListener(e,i),n(a)}function i(){typeof t.removeListener=="function"&&t.removeListener("error",o),r([].slice.call(arguments))}spt(t,e,i,{once:!0}),e!=="error"&&Amr(t,o,{once:!0})})}function Amr(t,e,r){typeof t.on=="function"&&spt(t,"error",e,r)}function spt(t,e,r,n){if(typeof t.on=="function")n.once?t.once(e,r):t.on(e,r);else if(typeof t.addEventListener=="function")t.addEventListener(e,function o(i){n.once&&t.removeEventListener(e,o),r(i)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}});var Nd=v((Npo,R0e)=>{"use strict";var Imr=mp(),{kResistStopPropagation:Mmr,SymbolDispose:Rmr}=ka(),jmr=globalThis.AbortSignal||mk().AbortSignal,Nmr=globalThis.AbortController||mk().AbortController,Dmr=Object.getPrototypeOf(async function(){}).constructor,upt=globalThis.Blob||Imr.Blob,Lmr=typeof upt<"u"?function(e){return e instanceof upt}:function(e){return!1},lpt=(t,e)=>{if(t!==void 0&&(t===null||typeof t!="object"||!("aborted"in t)))throw new ERR_INVALID_ARG_TYPE(e,"AbortSignal",t)},Fmr=(t,e)=>{if(typeof t!="function")throw new ERR_INVALID_ARG_TYPE(e,"Function",t)},M0e=class extends Error{constructor(e){if(!Array.isArray(e))throw new TypeError(`Expected input to be an Array, got ${typeof e}`);let r="";for(let n=0;n<e.length;n++)r+=`    ${e[n].stack}
`;super(r),this.name="AggregateError",this.errors=e}};R0e.exports={AggregateError:M0e,kEmptyObject:Object.freeze({}),once(t){let e=!1;return function(...r){e||(e=!0,t.apply(this,r))}},createDeferredPromise:function(){let t,e;return{promise:new Promise((n,o)=>{t=n,e=o}),resolve:t,reject:e}},promisify(t){return new Promise((e,r)=>{t((n,...o)=>n?r(n):e(...o))})},debuglog(){return function(){}},format(t,...e){return t.replace(/%([sdifj])/g,function(...[r,n]){let o=e.shift();return n==="f"?o.toFixed(6):n==="j"?JSON.stringify(o):n==="s"&&typeof o=="object"?`${o.constructor!==Object?o.constructor.name:""} {}`.trim():o.toString()})},inspect(t){switch(typeof t){case"string":if(t.includes("'"))if(t.includes('"')){if(!t.includes("`")&&!t.includes("${"))return`\`${t}\``}else return`"${t}"`;return`'${t}'`;case"number":return isNaN(t)?"NaN":Object.is(t,-0)?String(t):t;case"bigint":return`${String(t)}n`;case"boolean":case"undefined":return String(t);case"object":return"{}"}},types:{isAsyncFunction(t){return t instanceof Dmr},isArrayBufferView(t){return ArrayBuffer.isView(t)}},isBlob:Lmr,deprecate(t,e){return t},addAbortListener:J3().addAbortListener||function(e,r){if(e===void 0)throw new ERR_INVALID_ARG_TYPE("signal","AbortSignal",e);lpt(e,"signal"),Fmr(r,"listener");let n;return e.aborted?queueMicrotask(()=>r()):(e.addEventListener("abort",r,{__proto__:null,once:!0,[Mmr]:!0}),n=()=>{e.removeEventListener("abort",r)}),{__proto__:null,[Rmr](){var o;(o=n)===null||o===void 0||o()}}},AbortSignalAny:jmr.any||function(e){if(e.length===1)return e[0];let r=new Nmr,n=()=>r.abort();return e.forEach(o=>{lpt(o,"signals"),o.addEventListener("abort",n,{once:!0})}),r.signal.addEventListener("abort",()=>{e.forEach(o=>o.removeEventListener("abort",n))},{once:!0}),r.signal}};R0e.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")});var Rf=v((Dpo,fpt)=>{"use strict";var{format:kmr,inspect:XX,AggregateError:$mr}=Nd(),Bmr=globalThis.AggregateError||$mr,qmr=Symbol("kIsNodeError"),Umr=["string","function","number","object","Function","Object","boolean","bigint","symbol"],zmr=/^([A-Z][a-z0-9]*)+$/,Hmr="__node_internal_",QX={};function b1(t,e){if(!t)throw new QX.ERR_INTERNAL_ASSERTION(e)}function cpt(t){let e="",r=t.length,n=t[0]==="-"?1:0;for(;r>=n+4;r-=3)e=`_${t.slice(r-3,r)}${e}`;return`${t.slice(0,r)}${e}`}function Vmr(t,e,r){if(typeof e=="function")return b1(e.length<=r.length,`Code: ${t}; The provided arguments length (${r.length}) does not match the required ones (${e.length}).`),e(...r);let n=(e.match(/%[dfijoOs]/g)||[]).length;return b1(n===r.length,`Code: ${t}; The provided arguments length (${r.length}) does not match the required ones (${n}).`),r.length===0?e:kmr(e,...r)}function Ec(t,e,r){r||(r=Error);class n extends r{constructor(...i){super(Vmr(t,e,i))}toString(){return`${this.name} [${t}]: ${this.message}`}}Object.defineProperties(n.prototype,{name:{value:r.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${t}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),n.prototype.code=t,n.prototype[qmr]=!0,QX[t]=n}function dpt(t){let e=Hmr+t.name;return Object.defineProperty(t,"name",{value:e}),t}function Wmr(t,e){if(t&&e&&t!==e){if(Array.isArray(e.errors))return e.errors.push(t),e;let r=new Bmr([e,t],e.message);return r.code=e.code,r}return t||e}var j0e=class extends Error{constructor(e="The operation was aborted",r=void 0){if(r!==void 0&&typeof r!="object")throw new QX.ERR_INVALID_ARG_TYPE("options","Object",r);super(e,r),this.code="ABORT_ERR",this.name="AbortError"}};Ec("ERR_ASSERTION","%s",Error);Ec("ERR_INVALID_ARG_TYPE",(t,e,r)=>{b1(typeof t=="string","'name' must be a string"),Array.isArray(e)||(e=[e]);let n="The ";t.endsWith(" argument")?n+=`${t} `:n+=`"${t}" ${t.includes(".")?"property":"argument"} `,n+="must be ";let o=[],i=[],a=[];for(let u of e)b1(typeof u=="string","All expected entries have to be of type string"),Umr.includes(u)?o.push(u.toLowerCase()):zmr.test(u)?i.push(u):(b1(u!=="object",'The value "object" should be written as "Object"'),a.push(u));if(i.length>0){let u=o.indexOf("object");u!==-1&&(o.splice(o,u,1),i.push("Object"))}if(o.length>0){switch(o.length){case 1:n+=`of type ${o[0]}`;break;case 2:n+=`one of type ${o[0]} or ${o[1]}`;break;default:{let u=o.pop();n+=`one of type ${o.join(", ")}, or ${u}`}}(i.length>0||a.length>0)&&(n+=" or ")}if(i.length>0){switch(i.length){case 1:n+=`an instance of ${i[0]}`;break;case 2:n+=`an instance of ${i[0]} or ${i[1]}`;break;default:{let u=i.pop();n+=`an instance of ${i.join(", ")}, or ${u}`}}a.length>0&&(n+=" or ")}switch(a.length){case 0:break;case 1:a[0].toLowerCase()!==a[0]&&(n+="an "),n+=`${a[0]}`;break;case 2:n+=`one of ${a[0]} or ${a[1]}`;break;default:{let u=a.pop();n+=`one of ${a.join(", ")}, or ${u}`}}if(r==null)n+=`. Received ${r}`;else if(typeof r=="function"&&r.name)n+=`. Received function ${r.name}`;else if(typeof r=="object"){var s;if((s=r.constructor)!==null&&s!==void 0&&s.name)n+=`. Received an instance of ${r.constructor.name}`;else{let u=XX(r,{depth:-1});n+=`. Received ${u}`}}else{let u=XX(r,{colors:!1});u.length>25&&(u=`${u.slice(0,25)}...`),n+=`. Received type ${typeof r} (${u})`}return n},TypeError);Ec("ERR_INVALID_ARG_VALUE",(t,e,r="is invalid")=>{let n=XX(e);return n.length>128&&(n=n.slice(0,128)+"..."),`The ${t.includes(".")?"property":"argument"} '${t}' ${r}. Received ${n}`},TypeError);Ec("ERR_INVALID_RETURN_VALUE",(t,e,r)=>{var n;let o=r!=null&&(n=r.constructor)!==null&&n!==void 0&&n.name?`instance of ${r.constructor.name}`:`type ${typeof r}`;return`Expected ${t} to be returned from the "${e}" function but got ${o}.`},TypeError);Ec("ERR_MISSING_ARGS",(...t)=>{b1(t.length>0,"At least one arg needs to be specified");let e,r=t.length;switch(t=(Array.isArray(t)?t:[t]).map(n=>`"${n}"`).join(" or "),r){case 1:e+=`The ${t[0]} argument`;break;case 2:e+=`The ${t[0]} and ${t[1]} arguments`;break;default:{let n=t.pop();e+=`The ${t.join(", ")}, and ${n} arguments`}break}return`${e} must be specified`},TypeError);Ec("ERR_OUT_OF_RANGE",(t,e,r)=>{b1(e,'Missing "range" argument');let n;return Number.isInteger(r)&&Math.abs(r)>2**32?n=cpt(String(r)):typeof r=="bigint"?(n=String(r),(r>2n**32n||r<-(2n**32n))&&(n=cpt(n)),n+="n"):n=XX(r),`The value of "${t}" is out of range. It must be ${e}. Received ${n}`},RangeError);Ec("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error);Ec("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error);Ec("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error);Ec("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error);Ec("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error);Ec("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);Ec("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error);Ec("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error);Ec("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error);Ec("ERR_STREAM_WRITE_AFTER_END","write after end",Error);Ec("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError);fpt.exports={AbortError:j0e,aggregateTwoErrors:dpt(Wmr),hideStackFrames:dpt,codes:QX}});var yk=v((Lpo,Spt)=>{"use strict";var{ArrayIsArray:D0e,ArrayPrototypeIncludes:gpt,ArrayPrototypeJoin:ypt,ArrayPrototypeMap:Kmr,NumberIsInteger:L0e,NumberIsNaN:Gmr,NumberMAX_SAFE_INTEGER:Jmr,NumberMIN_SAFE_INTEGER:Ymr,NumberParseInt:Zmr,ObjectPrototypeHasOwnProperty:Xmr,RegExpPrototypeExec:bpt,String:Qmr,StringPrototypeToUpperCase:ehr,StringPrototypeTrim:thr}=ka(),{hideStackFrames:qh,codes:{ERR_SOCKET_BAD_PORT:rhr,ERR_INVALID_ARG_TYPE:Dd,ERR_INVALID_ARG_VALUE:gk,ERR_OUT_OF_RANGE:_1,ERR_UNKNOWN_SIGNAL:ppt}}=Rf(),{normalizeEncoding:nhr}=Nd(),{isAsyncFunction:ohr,isArrayBufferView:ihr}=Nd().types,mpt={};function ahr(t){return t===(t|0)}function shr(t){return t===t>>>0}var uhr=/^[0-7]+$/,lhr="must be a 32-bit unsigned integer or an octal string";function chr(t,e,r){if(typeof t>"u"&&(t=r),typeof t=="string"){if(bpt(uhr,t)===null)throw new gk(e,t,lhr);t=Zmr(t,8)}return _pt(t,e),t}var dhr=qh((t,e,r=Ymr,n=Jmr)=>{if(typeof t!="number")throw new Dd(e,"number",t);if(!L0e(t))throw new _1(e,"an integer",t);if(t<r||t>n)throw new _1(e,`>= ${r} && <= ${n}`,t)}),fhr=qh((t,e,r=-2147483648,n=2147483647)=>{if(typeof t!="number")throw new Dd(e,"number",t);if(!L0e(t))throw new _1(e,"an integer",t);if(t<r||t>n)throw new _1(e,`>= ${r} && <= ${n}`,t)}),_pt=qh((t,e,r=!1)=>{if(typeof t!="number")throw new Dd(e,"number",t);if(!L0e(t))throw new _1(e,"an integer",t);let n=r?1:0,o=4294967295;if(t<n||t>o)throw new _1(e,`>= ${n} && <= ${o}`,t)});function F0e(t,e){if(typeof t!="string")throw new Dd(e,"string",t)}function phr(t,e,r=void 0,n){if(typeof t!="number")throw new Dd(e,"number",t);if(r!=null&&t<r||n!=null&&t>n||(r!=null||n!=null)&&Gmr(t))throw new _1(e,`${r!=null?`>= ${r}`:""}${r!=null&&n!=null?" && ":""}${n!=null?`<= ${n}`:""}`,t)}var mhr=qh((t,e,r)=>{if(!gpt(r,t)){let o="must be one of: "+ypt(Kmr(r,i=>typeof i=="string"?`'${i}'`:Qmr(i)),", ");throw new gk(e,t,o)}});function vpt(t,e){if(typeof t!="boolean")throw new Dd(e,"boolean",t)}function N0e(t,e,r){return t==null||!Xmr(t,e)?r:t[e]}var hhr=qh((t,e,r=null)=>{let n=N0e(r,"allowArray",!1),o=N0e(r,"allowFunction",!1);if(!N0e(r,"nullable",!1)&&t===null||!n&&D0e(t)||typeof t!="object"&&(!o||typeof t!="function"))throw new Dd(e,"Object",t)}),ghr=qh((t,e)=>{if(t!=null&&typeof t!="object"&&typeof t!="function")throw new Dd(e,"a dictionary",t)}),eQ=qh((t,e,r=0)=>{if(!D0e(t))throw new Dd(e,"Array",t);if(t.length<r){let n=`must be longer than ${r}`;throw new gk(e,t,n)}});function yhr(t,e){eQ(t,e);for(let r=0;r<t.length;r++)F0e(t[r],`${e}[${r}]`)}function bhr(t,e){eQ(t,e);for(let r=0;r<t.length;r++)vpt(t[r],`${e}[${r}]`)}function _hr(t,e){eQ(t,e);for(let r=0;r<t.length;r++){let n=t[r],o=`${e}[${r}]`;if(n==null)throw new Dd(o,"AbortSignal",n);wpt(n,o)}}function vhr(t,e="signal"){if(F0e(t,e),mpt[t]===void 0)throw mpt[ehr(t)]!==void 0?new ppt(t+" (signals must use all capital letters)"):new ppt(t)}var whr=qh((t,e="buffer")=>{if(!ihr(t))throw new Dd(e,["Buffer","TypedArray","DataView"],t)});function Shr(t,e){let r=nhr(e),n=t.length;if(r==="hex"&&n%2!==0)throw new gk("encoding",e,`is invalid for data of length ${n}`)}function xhr(t,e="Port",r=!0){if(typeof t!="number"&&typeof t!="string"||typeof t=="string"&&thr(t).length===0||+t!==+t>>>0||t>65535||t===0&&!r)throw new rhr(e,t,r);return t|0}var wpt=qh((t,e)=>{if(t!==void 0&&(t===null||typeof t!="object"||!("aborted"in t)))throw new Dd(e,"AbortSignal",t)}),Chr=qh((t,e)=>{if(typeof t!="function")throw new Dd(e,"Function",t)}),Ohr=qh((t,e)=>{if(typeof t!="function"||ohr(t))throw new Dd(e,"Function",t)}),Phr=qh((t,e)=>{if(t!==void 0)throw new Dd(e,"undefined",t)});function Ehr(t,e,r){if(!gpt(r,t))throw new Dd(e,`('${ypt(r,"|")}')`,t)}var Thr=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function hpt(t,e){if(typeof t>"u"||!bpt(Thr,t))throw new gk(e,t,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}function Ahr(t){if(typeof t=="string")return hpt(t,"hints"),t;if(D0e(t)){let e=t.length,r="";if(e===0)return r;for(let n=0;n<e;n++){let o=t[n];hpt(o,"hints"),r+=o,n!==e-1&&(r+=", ")}return r}throw new gk("hints",t,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}Spt.exports={isInt32:ahr,isUint32:shr,parseFileMode:chr,validateArray:eQ,validateStringArray:yhr,validateBooleanArray:bhr,validateAbortSignalArray:_hr,validateBoolean:vpt,validateBuffer:whr,validateDictionary:ghr,validateEncoding:Shr,validateFunction:Chr,validateInt32:fhr,validateInteger:dhr,validateNumber:phr,validateObject:hhr,validateOneOf:mhr,validatePlainFunction:Ohr,validatePort:xhr,validateSignalName:vhr,validateString:F0e,validateUint32:_pt,validateUndefined:Phr,validateUnion:Ehr,validateAbortSignal:wpt,validateLinkHeaderValue:Ahr}});var MT=v((Fpo,Ppt)=>{var Cs=Ppt.exports={},v_,w_;function k0e(){throw new Error("setTimeout has not been defined")}function $0e(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?v_=setTimeout:v_=k0e}catch{v_=k0e}try{typeof clearTimeout=="function"?w_=clearTimeout:w_=$0e}catch{w_=$0e}})();function xpt(t){if(v_===setTimeout)return setTimeout(t,0);if((v_===k0e||!v_)&&setTimeout)return v_=setTimeout,setTimeout(t,0);try{return v_(t,0)}catch{try{return v_.call(null,t,0)}catch{return v_.call(this,t,0)}}}function Ihr(t){if(w_===clearTimeout)return clearTimeout(t);if((w_===$0e||!w_)&&clearTimeout)return w_=clearTimeout,clearTimeout(t);try{return w_(t)}catch{try{return w_.call(null,t)}catch{return w_.call(this,t)}}}var YC=[],bk=!1,v1,tQ=-1;function Mhr(){!bk||!v1||(bk=!1,v1.length?YC=v1.concat(YC):tQ=-1,YC.length&&Cpt())}function Cpt(){if(!bk){var t=xpt(Mhr);bk=!0;for(var e=YC.length;e;){for(v1=YC,YC=[];++tQ<e;)v1&&v1[tQ].run();tQ=-1,e=YC.length}v1=null,bk=!1,Ihr(t)}}Cs.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];YC.push(new Opt(t,e)),YC.length===1&&!bk&&xpt(Cpt)};function Opt(t,e){this.fun=t,this.array=e}Opt.prototype.run=function(){this.fun.apply(null,this.array)};Cs.title="browser";Cs.browser=!0;Cs.env={};Cs.argv=[];Cs.version="";Cs.versions={};function ZC(){}Cs.on=ZC;Cs.addListener=ZC;Cs.once=ZC;Cs.off=ZC;Cs.removeListener=ZC;Cs.removeAllListeners=ZC;Cs.emit=ZC;Cs.prependListener=ZC;Cs.prependOnceListener=ZC;Cs.listeners=function(t){return[]};Cs.binding=function(t){throw new Error("process.binding is not supported")};Cs.cwd=function(){return"/"};Cs.chdir=function(t){throw new Error("process.chdir is not supported")};Cs.umask=function(){return 0}});var x_=v((kpo,qpt)=>{"use strict";var{SymbolAsyncIterator:Ept,SymbolIterator:Tpt,SymbolFor:w1}=ka(),Apt=w1("nodejs.stream.destroyed"),Ipt=w1("nodejs.stream.errored"),B0e=w1("nodejs.stream.readable"),q0e=w1("nodejs.stream.writable"),Mpt=w1("nodejs.stream.disturbed"),Rhr=w1("nodejs.webstream.isClosedPromise"),jhr=w1("nodejs.webstream.controllerErrorFunction");function rQ(t,e=!1){var r;return!!(t&&typeof t.pipe=="function"&&typeof t.on=="function"&&(!e||typeof t.pause=="function"&&typeof t.resume=="function")&&(!t._writableState||((r=t._readableState)===null||r===void 0?void 0:r.readable)!==!1)&&(!t._writableState||t._readableState))}function nQ(t){var e;return!!(t&&typeof t.write=="function"&&typeof t.on=="function"&&(!t._readableState||((e=t._writableState)===null||e===void 0?void 0:e.writable)!==!1))}function Nhr(t){return!!(t&&typeof t.pipe=="function"&&t._readableState&&typeof t.on=="function"&&typeof t.write=="function")}function S_(t){return t&&(t._readableState||t._writableState||typeof t.write=="function"&&typeof t.on=="function"||typeof t.pipe=="function"&&typeof t.on=="function")}function Rpt(t){return!!(t&&!S_(t)&&typeof t.pipeThrough=="function"&&typeof t.getReader=="function"&&typeof t.cancel=="function")}function jpt(t){return!!(t&&!S_(t)&&typeof t.getWriter=="function"&&typeof t.abort=="function")}function Npt(t){return!!(t&&!S_(t)&&typeof t.readable=="object"&&typeof t.writable=="object")}function Dhr(t){return Rpt(t)||jpt(t)||Npt(t)}function Lhr(t,e){return t==null?!1:e===!0?typeof t[Ept]=="function":e===!1?typeof t[Tpt]=="function":typeof t[Ept]=="function"||typeof t[Tpt]=="function"}function oQ(t){if(!S_(t))return null;let e=t._writableState,r=t._readableState,n=e||r;return!!(t.destroyed||t[Apt]||n!=null&&n.destroyed)}function Dpt(t){if(!nQ(t))return null;if(t.writableEnded===!0)return!0;let e=t._writableState;return e!=null&&e.errored?!1:typeof e?.ended!="boolean"?null:e.ended}function Fhr(t,e){if(!nQ(t))return null;if(t.writableFinished===!0)return!0;let r=t._writableState;return r!=null&&r.errored?!1:typeof r?.finished!="boolean"?null:!!(r.finished||e===!1&&r.ended===!0&&r.length===0)}function khr(t){if(!rQ(t))return null;if(t.readableEnded===!0)return!0;let e=t._readableState;return!e||e.errored?!1:typeof e?.ended!="boolean"?null:e.ended}function Lpt(t,e){if(!rQ(t))return null;let r=t._readableState;return r!=null&&r.errored?!1:typeof r?.endEmitted!="boolean"?null:!!(r.endEmitted||e===!1&&r.ended===!0&&r.length===0)}function Fpt(t){return t&&t[B0e]!=null?t[B0e]:typeof t?.readable!="boolean"?null:oQ(t)?!1:rQ(t)&&t.readable&&!Lpt(t)}function kpt(t){return t&&t[q0e]!=null?t[q0e]:typeof t?.writable!="boolean"?null:oQ(t)?!1:nQ(t)&&t.writable&&!Dpt(t)}function $hr(t,e){return S_(t)?oQ(t)?!0:!(e?.readable!==!1&&Fpt(t)||e?.writable!==!1&&kpt(t)):null}function Bhr(t){var e,r;return S_(t)?t.writableErrored?t.writableErrored:(e=(r=t._writableState)===null||r===void 0?void 0:r.errored)!==null&&e!==void 0?e:null:null}function qhr(t){var e,r;return S_(t)?t.readableErrored?t.readableErrored:(e=(r=t._readableState)===null||r===void 0?void 0:r.errored)!==null&&e!==void 0?e:null:null}function Uhr(t){if(!S_(t))return null;if(typeof t.closed=="boolean")return t.closed;let e=t._writableState,r=t._readableState;return typeof e?.closed=="boolean"||typeof r?.closed=="boolean"?e?.closed||r?.closed:typeof t._closed=="boolean"&&$pt(t)?t._closed:null}function $pt(t){return typeof t._closed=="boolean"&&typeof t._defaultKeepAlive=="boolean"&&typeof t._removedConnection=="boolean"&&typeof t._removedContLen=="boolean"}function Bpt(t){return typeof t._sent100=="boolean"&&$pt(t)}function zhr(t){var e;return typeof t._consuming=="boolean"&&typeof t._dumped=="boolean"&&((e=t.req)===null||e===void 0?void 0:e.upgradeOrConnect)===void 0}function Hhr(t){if(!S_(t))return null;let e=t._writableState,r=t._readableState,n=e||r;return!n&&Bpt(t)||!!(n&&n.autoDestroy&&n.emitClose&&n.closed===!1)}function Vhr(t){var e;return!!(t&&((e=t[Mpt])!==null&&e!==void 0?e:t.readableDidRead||t.readableAborted))}function Whr(t){var e,r,n,o,i,a,s,u,l,c;return!!(t&&((e=(r=(n=(o=(i=(a=t[Ipt])!==null&&a!==void 0?a:t.readableErrored)!==null&&i!==void 0?i:t.writableErrored)!==null&&o!==void 0?o:(s=t._readableState)===null||s===void 0?void 0:s.errorEmitted)!==null&&n!==void 0?n:(u=t._writableState)===null||u===void 0?void 0:u.errorEmitted)!==null&&r!==void 0?r:(l=t._readableState)===null||l===void 0?void 0:l.errored)!==null&&e!==void 0?e:!((c=t._writableState)===null||c===void 0)&&c.errored))}qpt.exports={isDestroyed:oQ,kIsDestroyed:Apt,isDisturbed:Vhr,kIsDisturbed:Mpt,isErrored:Whr,kIsErrored:Ipt,isReadable:Fpt,kIsReadable:B0e,kIsClosedPromise:Rhr,kControllerErrorFunction:jhr,kIsWritable:q0e,isClosed:Uhr,isDuplexNodeStream:Nhr,isFinished:$hr,isIterable:Lhr,isReadableNodeStream:rQ,isReadableStream:Rpt,isReadableEnded:khr,isReadableFinished:Lpt,isReadableErrored:qhr,isNodeStream:S_,isWebStream:Dhr,isWritable:kpt,isWritableNodeStream:nQ,isWritableStream:jpt,isWritableEnded:Dpt,isWritableFinished:Fhr,isWritableErrored:Bhr,isServerRequest:zhr,isServerResponse:Bpt,willEmitClose:Hhr,isTransformStream:Npt}});var XC=v(($po,W0e)=>{var RT=MT(),{AbortError:Ypt,codes:Khr}=Rf(),{ERR_INVALID_ARG_TYPE:Ghr,ERR_STREAM_PREMATURE_CLOSE:Upt}=Khr,{kEmptyObject:z0e,once:H0e}=Nd(),{validateAbortSignal:Jhr,validateFunction:Yhr,validateObject:Zhr,validateBoolean:Xhr}=yk(),{Promise:Qhr,PromisePrototypeThen:egr,SymbolDispose:Zpt}=ka(),{isClosed:tgr,isReadable:zpt,isReadableNodeStream:U0e,isReadableStream:rgr,isReadableFinished:Hpt,isReadableErrored:Vpt,isWritable:Wpt,isWritableNodeStream:Kpt,isWritableStream:ngr,isWritableFinished:Gpt,isWritableErrored:Jpt,isNodeStream:ogr,willEmitClose:igr,kIsClosedPromise:agr}=x_(),_k;function sgr(t){return t.setHeader&&typeof t.abort=="function"}var V0e=()=>{};function Xpt(t,e,r){var n,o;if(arguments.length===2?(r=e,e=z0e):e==null?e=z0e:Zhr(e,"options"),Yhr(r,"callback"),Jhr(e.signal,"options.signal"),r=H0e(r),rgr(t)||ngr(t))return ugr(t,e,r);if(!ogr(t))throw new Ghr("stream",["ReadableStream","WritableStream","Stream"],t);let i=(n=e.readable)!==null&&n!==void 0?n:U0e(t),a=(o=e.writable)!==null&&o!==void 0?o:Kpt(t),s=t._writableState,u=t._readableState,l=()=>{t.writable||f()},c=igr(t)&&U0e(t)===i&&Kpt(t)===a,d=Gpt(t,!1),f=()=>{d=!0,t.destroyed&&(c=!1),!(c&&(!t.readable||i))&&(!i||p)&&r.call(t)},p=Hpt(t,!1),m=()=>{p=!0,t.destroyed&&(c=!1),!(c&&(!t.writable||a))&&(!a||d)&&r.call(t)},h=C=>{r.call(t,C)},b=tgr(t),g=()=>{b=!0;let C=Jpt(t)||Vpt(t);if(C&&typeof C!="boolean")return r.call(t,C);if(i&&!p&&U0e(t,!0)&&!Hpt(t,!1))return r.call(t,new Upt);if(a&&!d&&!Gpt(t,!1))return r.call(t,new Upt);r.call(t)},y=()=>{b=!0;let C=Jpt(t)||Vpt(t);if(C&&typeof C!="boolean")return r.call(t,C);r.call(t)},w=()=>{t.req.on("finish",f)};sgr(t)?(t.on("complete",f),c||t.on("abort",g),t.req?w():t.on("request",w)):a&&!s&&(t.on("end",l),t.on("close",l)),!c&&typeof t.aborted=="boolean"&&t.on("aborted",g),t.on("end",m),t.on("finish",f),e.error!==!1&&t.on("error",h),t.on("close",g),b?RT.nextTick(g):s!=null&&s.errorEmitted||u!=null&&u.errorEmitted?c||RT.nextTick(y):(!i&&(!c||zpt(t))&&(d||Wpt(t)===!1)||!a&&(!c||Wpt(t))&&(p||zpt(t)===!1)||u&&t.req&&t.aborted)&&RT.nextTick(y);let S=()=>{r=V0e,t.removeListener("aborted",g),t.removeListener("complete",f),t.removeListener("abort",g),t.removeListener("request",w),t.req&&t.req.removeListener("finish",f),t.removeListener("end",l),t.removeListener("close",l),t.removeListener("finish",f),t.removeListener("end",m),t.removeListener("error",h),t.removeListener("close",g)};if(e.signal&&!b){let C=()=>{let P=r;S(),P.call(t,new Ypt(void 0,{cause:e.signal.reason}))};if(e.signal.aborted)RT.nextTick(C);else{_k=_k||Nd().addAbortListener;let P=_k(e.signal,C),E=r;r=H0e((...A)=>{P[Zpt](),E.apply(t,A)})}}return S}function ugr(t,e,r){let n=!1,o=V0e;if(e.signal)if(o=()=>{n=!0,r.call(t,new Ypt(void 0,{cause:e.signal.reason}))},e.signal.aborted)RT.nextTick(o);else{_k=_k||Nd().addAbortListener;let a=_k(e.signal,o),s=r;r=H0e((...u)=>{a[Zpt](),s.apply(t,u)})}let i=(...a)=>{n||RT.nextTick(()=>r.apply(t,a))};return egr(t[agr].promise,i,i),V0e}function lgr(t,e){var r;let n=!1;return e===null&&(e=z0e),(r=e)!==null&&r!==void 0&&r.cleanup&&(Xhr(e.cleanup,"cleanup"),n=e.cleanup),new Qhr((o,i)=>{let a=Xpt(t,e,s=>{n&&a(),s?i(s):o()})})}W0e.exports=Xpt;W0e.exports.finished=lgr});var S1=v((Bpo,amt)=>{"use strict";var C_=MT(),{aggregateTwoErrors:cgr,codes:{ERR_MULTIPLE_CALLBACK:dgr},AbortError:fgr}=Rf(),{Symbol:tmt}=ka(),{kIsDestroyed:pgr,isDestroyed:mgr,isFinished:hgr,isServerRequest:ggr}=x_(),rmt=tmt("kDestroy"),K0e=tmt("kConstruct");function nmt(t,e,r){t&&(t.stack,e&&!e.errored&&(e.errored=t),r&&!r.errored&&(r.errored=t))}function ygr(t,e){let r=this._readableState,n=this._writableState,o=n||r;return n!=null&&n.destroyed||r!=null&&r.destroyed?(typeof e=="function"&&e(),this):(nmt(t,n,r),n&&(n.destroyed=!0),r&&(r.destroyed=!0),o.constructed?Qpt(this,t,e):this.once(rmt,function(i){Qpt(this,cgr(i,t),e)}),this)}function Qpt(t,e,r){let n=!1;function o(i){if(n)return;n=!0;let a=t._readableState,s=t._writableState;nmt(i,s,a),s&&(s.closed=!0),a&&(a.closed=!0),typeof r=="function"&&r(i),i?C_.nextTick(bgr,t,i):C_.nextTick(omt,t)}try{t._destroy(e||null,o)}catch(i){o(i)}}function bgr(t,e){G0e(t,e),omt(t)}function omt(t){let e=t._readableState,r=t._writableState;r&&(r.closeEmitted=!0),e&&(e.closeEmitted=!0),(r!=null&&r.emitClose||e!=null&&e.emitClose)&&t.emit("close")}function G0e(t,e){let r=t._readableState,n=t._writableState;n!=null&&n.errorEmitted||r!=null&&r.errorEmitted||(n&&(n.errorEmitted=!0),r&&(r.errorEmitted=!0),t.emit("error",e))}function _gr(){let t=this._readableState,e=this._writableState;t&&(t.constructed=!0,t.closed=!1,t.closeEmitted=!1,t.destroyed=!1,t.errored=null,t.errorEmitted=!1,t.reading=!1,t.ended=t.readable===!1,t.endEmitted=t.readable===!1),e&&(e.constructed=!0,e.destroyed=!1,e.closed=!1,e.closeEmitted=!1,e.errored=null,e.errorEmitted=!1,e.finalCalled=!1,e.prefinished=!1,e.ended=e.writable===!1,e.ending=e.writable===!1,e.finished=e.writable===!1)}function J0e(t,e,r){let n=t._readableState,o=t._writableState;if(o!=null&&o.destroyed||n!=null&&n.destroyed)return this;n!=null&&n.autoDestroy||o!=null&&o.autoDestroy?t.destroy(e):e&&(e.stack,o&&!o.errored&&(o.errored=e),n&&!n.errored&&(n.errored=e),r?C_.nextTick(G0e,t,e):G0e(t,e))}function vgr(t,e){if(typeof t._construct!="function")return;let r=t._readableState,n=t._writableState;r&&(r.constructed=!1),n&&(n.constructed=!1),t.once(K0e,e),!(t.listenerCount(K0e)>1)&&C_.nextTick(wgr,t)}function wgr(t){let e=!1;function r(n){if(e){J0e(t,n??new dgr);return}e=!0;let o=t._readableState,i=t._writableState,a=i||o;o&&(o.constructed=!0),i&&(i.constructed=!0),a.destroyed?t.emit(rmt,n):n?J0e(t,n,!0):C_.nextTick(Sgr,t)}try{t._construct(n=>{C_.nextTick(r,n)})}catch(n){C_.nextTick(r,n)}}function Sgr(t){t.emit(K0e)}function emt(t){return t?.setHeader&&typeof t.abort=="function"}function imt(t){t.emit("close")}function xgr(t,e){t.emit("error",e),C_.nextTick(imt,t)}function Cgr(t,e){!t||mgr(t)||(!e&&!hgr(t)&&(e=new fgr),ggr(t)?(t.socket=null,t.destroy(e)):emt(t)?t.abort():emt(t.req)?t.req.abort():typeof t.destroy=="function"?t.destroy(e):typeof t.close=="function"?t.close():e?C_.nextTick(xgr,t,e):C_.nextTick(imt,t),t.destroyed||(t[pgr]=!0))}amt.exports={construct:vgr,destroyer:Cgr,destroy:ygr,undestroy:_gr,errorOrDestroy:J0e}});var sQ=v((qpo,umt)=>{"use strict";var{ArrayIsArray:Ogr,ObjectSetPrototypeOf:smt}=ka(),{EventEmitter:iQ}=J3();function aQ(t){iQ.call(this,t)}smt(aQ.prototype,iQ.prototype);smt(aQ,iQ);aQ.prototype.pipe=function(t,e){let r=this;function n(c){t.writable&&t.write(c)===!1&&r.pause&&r.pause()}r.on("data",n);function o(){r.readable&&r.resume&&r.resume()}t.on("drain",o),!t._isStdio&&(!e||e.end!==!1)&&(r.on("end",a),r.on("close",s));let i=!1;function a(){i||(i=!0,t.end())}function s(){i||(i=!0,typeof t.destroy=="function"&&t.destroy())}function u(c){l(),iQ.listenerCount(this,"error")===0&&this.emit("error",c)}Y0e(r,"error",u),Y0e(t,"error",u);function l(){r.removeListener("data",n),t.removeListener("drain",o),r.removeListener("end",a),r.removeListener("close",s),r.removeListener("error",u),t.removeListener("error",u),r.removeListener("end",l),r.removeListener("close",l),t.removeListener("close",l)}return r.on("end",l),r.on("close",l),t.on("close",l),t.emit("pipe",r),t};function Y0e(t,e,r){if(typeof t.prependListener=="function")return t.prependListener(e,r);!t._events||!t._events[e]?t.on(e,r):Ogr(t._events[e])?t._events[e].unshift(r):t._events[e]=[r,t._events[e]]}umt.exports={Stream:aQ,prependListener:Y0e}});var Y3=v((Upo,uQ)=>{"use strict";var{SymbolDispose:Pgr}=ka(),{AbortError:lmt,codes:Egr}=Rf(),{isNodeStream:cmt,isWebStream:Tgr,kControllerErrorFunction:Agr}=x_(),Igr=XC(),{ERR_INVALID_ARG_TYPE:dmt}=Egr,Z0e,Mgr=(t,e)=>{if(typeof t!="object"||!("aborted"in t))throw new dmt(e,"AbortSignal",t)};uQ.exports.addAbortSignal=function(e,r){if(Mgr(e,"signal"),!cmt(r)&&!Tgr(r))throw new dmt("stream",["ReadableStream","WritableStream","Stream"],r);return uQ.exports.addAbortSignalNoValidate(e,r)};uQ.exports.addAbortSignalNoValidate=function(t,e){if(typeof t!="object"||!("aborted"in t))return e;let r=cmt(e)?()=>{e.destroy(new lmt(void 0,{cause:t.reason}))}:()=>{e[Agr](new lmt(void 0,{cause:t.reason}))};if(t.aborted)r();else{Z0e=Z0e||Nd().addAbortListener;let n=Z0e(t,r);Igr(e,n[Pgr])}return e}});var mmt=v((Hpo,pmt)=>{"use strict";var{StringPrototypeSlice:fmt,SymbolIterator:Rgr,TypedArrayPrototypeSet:lQ,Uint8Array:jgr}=ka(),{Buffer:X0e}=mp(),{inspect:Ngr}=Nd();pmt.exports=class{constructor(){this.head=null,this.tail=null,this.length=0}push(e){let r={data:e,next:null};this.length>0?this.tail.next=r:this.head=r,this.tail=r,++this.length}unshift(e){let r={data:e,next:this.head};this.length===0&&(this.tail=r),this.head=r,++this.length}shift(){if(this.length===0)return;let e=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,e}clear(){this.head=this.tail=null,this.length=0}join(e){if(this.length===0)return"";let r=this.head,n=""+r.data;for(;(r=r.next)!==null;)n+=e+r.data;return n}concat(e){if(this.length===0)return X0e.alloc(0);let r=X0e.allocUnsafe(e>>>0),n=this.head,o=0;for(;n;)lQ(r,n.data,o),o+=n.data.length,n=n.next;return r}consume(e,r){let n=this.head.data;if(e<n.length){let o=n.slice(0,e);return this.head.data=n.slice(e),o}return e===n.length?this.shift():r?this._getString(e):this._getBuffer(e)}first(){return this.head.data}*[Rgr](){for(let e=this.head;e;e=e.next)yield e.data}_getString(e){let r="",n=this.head,o=0;do{let i=n.data;if(e>i.length)r+=i,e-=i.length;else{e===i.length?(r+=i,++o,n.next?this.head=n.next:this.head=this.tail=null):(r+=fmt(i,0,e),this.head=n,n.data=fmt(i,e));break}++o}while((n=n.next)!==null);return this.length-=o,r}_getBuffer(e){let r=X0e.allocUnsafe(e),n=e,o=this.head,i=0;do{let a=o.data;if(e>a.length)lQ(r,a,n-e),e-=a.length;else{e===a.length?(lQ(r,a,n-e),++i,o.next?this.head=o.next:this.head=this.tail=null):(lQ(r,new jgr(a.buffer,a.byteOffset,e),n-e),this.head=o,o.data=a.slice(e));break}++i}while((o=o.next)!==null);return this.length-=i,r}[Symbol.for("nodejs.util.inspect.custom")](e,r){return Ngr(this,{...r,depth:0,customInspect:!1})}}});var Z3=v((Vpo,bmt)=>{"use strict";var{MathFloor:Dgr,NumberIsInteger:Lgr}=ka(),{validateInteger:Fgr}=yk(),{ERR_INVALID_ARG_VALUE:kgr}=Rf().codes,hmt=16*1024,gmt=16;function $gr(t,e,r){return t.highWaterMark!=null?t.highWaterMark:e?t[r]:null}function ymt(t){return t?gmt:hmt}function Bgr(t,e){Fgr(e,"value",0),t?gmt=e:hmt=e}function qgr(t,e,r,n){let o=$gr(e,n,r);if(o!=null){if(!Lgr(o)||o<0){let i=n?`options.${r}`:"options.highWaterMark";throw new kgr(i,o)}return Dgr(o)}return ymt(t.objectMode)}bmt.exports={getHighWaterMark:qgr,getDefaultHighWaterMark:ymt,setDefaultHighWaterMark:Bgr}});var wmt=v((Q0e,vmt)=>{var cQ=mp(),O_=cQ.Buffer;function _mt(t,e){for(var r in t)e[r]=t[r]}O_.from&&O_.alloc&&O_.allocUnsafe&&O_.allocUnsafeSlow?vmt.exports=cQ:(_mt(cQ,Q0e),Q0e.Buffer=x1);function x1(t,e,r){return O_(t,e,r)}x1.prototype=Object.create(O_.prototype);_mt(O_,x1);x1.from=function(t,e,r){if(typeof t=="number")throw new TypeError("Argument must not be a number");return O_(t,e,r)};x1.alloc=function(t,e,r){if(typeof t!="number")throw new TypeError("Argument must be a number");var n=O_(t);return e!==void 0?typeof r=="string"?n.fill(e,r):n.fill(e):n.fill(0),n};x1.allocUnsafe=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return O_(t)};x1.allocUnsafeSlow=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return cQ.SlowBuffer(t)}});var Cmt=v(xmt=>{"use strict";var tSe=wmt().Buffer,Smt=tSe.isEncoding||function(t){switch(t=""+t,t&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function Ugr(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}function zgr(t){var e=Ugr(t);if(typeof e!="string"&&(tSe.isEncoding===Smt||!Smt(t)))throw new Error("Unknown encoding: "+t);return e||t}xmt.StringDecoder=X3;function X3(t){this.encoding=zgr(t);var e;switch(this.encoding){case"utf16le":this.text=Jgr,this.end=Ygr,e=4;break;case"utf8":this.fillLast=Wgr,e=4;break;case"base64":this.text=Zgr,this.end=Xgr,e=3;break;default:this.write=Qgr,this.end=eyr;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=tSe.allocUnsafe(e)}X3.prototype.write=function(t){if(t.length===0)return"";var e,r;if(this.lastNeed){if(e=this.fillLast(t),e===void 0)return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<t.length?e?e+this.text(t,r):this.text(t,r):e||""};X3.prototype.end=Ggr;X3.prototype.text=Kgr;X3.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length};function eSe(t){return t<=127?0:t>>5===6?2:t>>4===14?3:t>>3===30?4:t>>6===2?-1:-2}function Hgr(t,e,r){var n=e.length-1;if(n<r)return 0;var o=eSe(e[n]);return o>=0?(o>0&&(t.lastNeed=o-1),o):--n<r||o===-2?0:(o=eSe(e[n]),o>=0?(o>0&&(t.lastNeed=o-2),o):--n<r||o===-2?0:(o=eSe(e[n]),o>=0?(o>0&&(o===2?o=0:t.lastNeed=o-3),o):0))}function Vgr(t,e,r){if((e[0]&192)!==128)return t.lastNeed=0,"\uFFFD";if(t.lastNeed>1&&e.length>1){if((e[1]&192)!==128)return t.lastNeed=1,"\uFFFD";if(t.lastNeed>2&&e.length>2&&(e[2]&192)!==128)return t.lastNeed=2,"\uFFFD"}}function Wgr(t){var e=this.lastTotal-this.lastNeed,r=Vgr(this,t,e);if(r!==void 0)return r;if(this.lastNeed<=t.length)return t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,e,0,t.length),this.lastNeed-=t.length}function Kgr(t,e){var r=Hgr(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=r;var n=t.length-(r-this.lastNeed);return t.copy(this.lastChar,0,n),t.toString("utf8",e,n)}function Ggr(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"\uFFFD":e}function Jgr(t,e){if((t.length-e)%2===0){var r=t.toString("utf16le",e);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function Ygr(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,r)}return e}function Zgr(t,e){var r=(t.length-e)%3;return r===0?t.toString("base64",e):(this.lastNeed=3-r,this.lastTotal=3,r===1?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-r))}function Xgr(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function Qgr(t){return t.toString(this.encoding)}function eyr(t){return t&&t.length?this.write(t):""}});var rSe=v((Kpo,Tmt)=>{"use strict";var Omt=MT(),{PromisePrototypeThen:tyr,SymbolAsyncIterator:Pmt,SymbolIterator:Emt}=ka(),{Buffer:ryr}=mp(),{ERR_INVALID_ARG_TYPE:nyr,ERR_STREAM_NULL_VALUES:oyr}=Rf().codes;function iyr(t,e,r){let n;if(typeof e=="string"||e instanceof ryr)return new t({objectMode:!0,...r,read(){this.push(e),this.push(null)}});let o;if(e&&e[Pmt])o=!0,n=e[Pmt]();else if(e&&e[Emt])o=!1,n=e[Emt]();else throw new nyr("iterable",["Iterable"],e);let i=new t({objectMode:!0,highWaterMark:1,...r}),a=!1;i._read=function(){a||(a=!0,u())},i._destroy=function(l,c){tyr(s(l),()=>Omt.nextTick(c,l),d=>Omt.nextTick(c,d||l))};async function s(l){let c=l!=null,d=typeof n.throw=="function";if(c&&d){let{value:f,done:p}=await n.throw(l);if(await f,p)return}if(typeof n.return=="function"){let{value:f}=await n.return();await f}}async function u(){for(;;){try{let{value:l,done:c}=o?await n.next():n.next();if(c)i.push(null);else{let d=l&&typeof l.then=="function"?await l:l;if(d===null)throw a=!1,new oyr;if(i.push(d))continue;a=!1}}catch(l){i.destroy(l)}break}}return i}Tmt.exports=iyr});var eH=v((Gpo,Wmt)=>{var gy=MT(),{ArrayPrototypeIndexOf:ayr,NumberIsInteger:syr,NumberIsNaN:uyr,NumberParseInt:lyr,ObjectDefineProperties:cSe,ObjectKeys:cyr,ObjectSetPrototypeOf:Mmt,Promise:Rmt,SafeSet:dyr,SymbolAsyncDispose:fyr,SymbolAsyncIterator:pyr,Symbol:myr}=ka();Wmt.exports=un;un.ReadableState=mQ;var{EventEmitter:hyr}=J3(),{Stream:jT,prependListener:gyr}=sQ(),{Buffer:nSe}=mp(),{addAbortSignal:yyr}=Y3(),jmt=XC(),An=Nd().debuglog("stream",t=>{An=t}),byr=mmt(),Sk=S1(),{getHighWaterMark:_yr,getDefaultHighWaterMark:vyr}=Z3(),{aggregateTwoErrors:Amt,codes:{ERR_INVALID_ARG_TYPE:wyr,ERR_METHOD_NOT_IMPLEMENTED:Syr,ERR_OUT_OF_RANGE:xyr,ERR_STREAM_PUSH_AFTER_EOF:Cyr,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:Oyr},AbortError:Pyr}=Rf(),{validateObject:Eyr}=yk(),C1=myr("kPaused"),{StringDecoder:Nmt}=Cmt(),Tyr=rSe();Mmt(un.prototype,jT.prototype);Mmt(un,jT);var oSe=()=>{},{errorOrDestroy:vk}=Sk,wk=1,Ayr=2,Dmt=4,Q3=8,Lmt=16,dQ=32,fQ=64,Fmt=128,Iyr=256,Myr=512,Ryr=1024,uSe=2048,lSe=4096,jyr=8192,Nyr=16384,Dyr=32768,kmt=65536,Lyr=1<<17,Fyr=1<<18;function bl(t){return{enumerable:!1,get(){return(this.state&t)!==0},set(e){e?this.state|=t:this.state&=~t}}}cSe(mQ.prototype,{objectMode:bl(wk),ended:bl(Ayr),endEmitted:bl(Dmt),reading:bl(Q3),constructed:bl(Lmt),sync:bl(dQ),needReadable:bl(fQ),emittedReadable:bl(Fmt),readableListening:bl(Iyr),resumeScheduled:bl(Myr),errorEmitted:bl(Ryr),emitClose:bl(uSe),autoDestroy:bl(lSe),destroyed:bl(jyr),closed:bl(Nyr),closeEmitted:bl(Dyr),multiAwaitDrain:bl(kmt),readingMore:bl(Lyr),dataEmitted:bl(Fyr)});function mQ(t,e,r){typeof r!="boolean"&&(r=e instanceof P_()),this.state=uSe|lSe|Lmt|dQ,t&&t.objectMode&&(this.state|=wk),r&&t&&t.readableObjectMode&&(this.state|=wk),this.highWaterMark=t?_yr(this,t,"readableHighWaterMark",r):vyr(!1),this.buffer=new byr,this.length=0,this.pipes=[],this.flowing=null,this[C1]=null,t&&t.emitClose===!1&&(this.state&=~uSe),t&&t.autoDestroy===!1&&(this.state&=~lSe),this.errored=null,this.defaultEncoding=t&&t.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.decoder=null,this.encoding=null,t&&t.encoding&&(this.decoder=new Nmt(t.encoding),this.encoding=t.encoding)}function un(t){if(!(this instanceof un))return new un(t);let e=this instanceof P_();this._readableState=new mQ(t,this,e),t&&(typeof t.read=="function"&&(this._read=t.read),typeof t.destroy=="function"&&(this._destroy=t.destroy),typeof t.construct=="function"&&(this._construct=t.construct),t.signal&&!e&&yyr(t.signal,this)),jT.call(this,t),Sk.construct(this,()=>{this._readableState.needReadable&&pQ(this,this._readableState)})}un.prototype.destroy=Sk.destroy;un.prototype._undestroy=Sk.undestroy;un.prototype._destroy=function(t,e){e(t)};un.prototype[hyr.captureRejectionSymbol]=function(t){this.destroy(t)};un.prototype[fyr]=function(){let t;return this.destroyed||(t=this.readableEnded?null:new Pyr,this.destroy(t)),new Rmt((e,r)=>jmt(this,n=>n&&n!==t?r(n):e(null)))};un.prototype.push=function(t,e){return $mt(this,t,e,!1)};un.prototype.unshift=function(t,e){return $mt(this,t,e,!0)};function $mt(t,e,r,n){An("readableAddChunk",e);let o=t._readableState,i;if((o.state&wk)===0&&(typeof e=="string"?(r=r||o.defaultEncoding,o.encoding!==r&&(n&&o.encoding?e=nSe.from(e,r).toString(o.encoding):(e=nSe.from(e,r),r=""))):e instanceof nSe?r="":jT._isUint8Array(e)?(e=jT._uint8ArrayToBuffer(e),r=""):e!=null&&(i=new wyr("chunk",["string","Buffer","Uint8Array"],e))),i)vk(t,i);else if(e===null)o.state&=~Q3,Byr(t,o);else if((o.state&wk)!==0||e&&e.length>0)if(n)if((o.state&Dmt)!==0)vk(t,new Oyr);else{if(o.destroyed||o.errored)return!1;iSe(t,o,e,!0)}else if(o.ended)vk(t,new Cyr);else{if(o.destroyed||o.errored)return!1;o.state&=~Q3,o.decoder&&!r?(e=o.decoder.write(e),o.objectMode||e.length!==0?iSe(t,o,e,!1):pQ(t,o)):iSe(t,o,e,!1)}else n||(o.state&=~Q3,pQ(t,o));return!o.ended&&(o.length<o.highWaterMark||o.length===0)}function iSe(t,e,r,n){e.flowing&&e.length===0&&!e.sync&&t.listenerCount("data")>0?((e.state&kmt)!==0?e.awaitDrainWriters.clear():e.awaitDrainWriters=null,e.dataEmitted=!0,t.emit("data",r)):(e.length+=e.objectMode?1:r.length,n?e.buffer.unshift(r):e.buffer.push(r),(e.state&fQ)!==0&&hQ(t)),pQ(t,e)}un.prototype.isPaused=function(){let t=this._readableState;return t[C1]===!0||t.flowing===!1};un.prototype.setEncoding=function(t){let e=new Nmt(t);this._readableState.decoder=e,this._readableState.encoding=this._readableState.decoder.encoding;let r=this._readableState.buffer,n="";for(let o of r)n+=e.write(o);return r.clear(),n!==""&&r.push(n),this._readableState.length=n.length,this};var kyr=1073741824;function $yr(t){if(t>kyr)throw new xyr("size","<= 1GiB",t);return t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++,t}function Imt(t,e){return t<=0||e.length===0&&e.ended?0:(e.state&wk)!==0?1:uyr(t)?e.flowing&&e.length?e.buffer.first().length:e.length:t<=e.length?t:e.ended?e.length:0}un.prototype.read=function(t){An("read",t),t===void 0?t=NaN:syr(t)||(t=lyr(t,10));let e=this._readableState,r=t;if(t>e.highWaterMark&&(e.highWaterMark=$yr(t)),t!==0&&(e.state&=~Fmt),t===0&&e.needReadable&&((e.highWaterMark!==0?e.length>=e.highWaterMark:e.length>0)||e.ended))return An("read: emitReadable",e.length,e.ended),e.length===0&&e.ended?aSe(this):hQ(this),null;if(t=Imt(t,e),t===0&&e.ended)return e.length===0&&aSe(this),null;let n=(e.state&fQ)!==0;if(An("need readable",n),(e.length===0||e.length-t<e.highWaterMark)&&(n=!0,An("length less than watermark",n)),e.ended||e.reading||e.destroyed||e.errored||!e.constructed)n=!1,An("reading, ended or constructing",n);else if(n){An("do read"),e.state|=Q3|dQ,e.length===0&&(e.state|=fQ);try{this._read(e.highWaterMark)}catch(i){vk(this,i)}e.state&=~dQ,e.reading||(t=Imt(r,e))}let o;return t>0?o=Hmt(t,e):o=null,o===null?(e.needReadable=e.length<=e.highWaterMark,t=0):(e.length-=t,e.multiAwaitDrain?e.awaitDrainWriters.clear():e.awaitDrainWriters=null),e.length===0&&(e.ended||(e.needReadable=!0),r!==t&&e.ended&&aSe(this)),o!==null&&!e.errorEmitted&&!e.closeEmitted&&(e.dataEmitted=!0,this.emit("data",o)),o};function Byr(t,e){if(An("onEofChunk"),!e.ended){if(e.decoder){let r=e.decoder.end();r&&r.length&&(e.buffer.push(r),e.length+=e.objectMode?1:r.length)}e.ended=!0,e.sync?hQ(t):(e.needReadable=!1,e.emittedReadable=!0,Bmt(t))}}function hQ(t){let e=t._readableState;An("emitReadable",e.needReadable,e.emittedReadable),e.needReadable=!1,e.emittedReadable||(An("emitReadable",e.flowing),e.emittedReadable=!0,gy.nextTick(Bmt,t))}function Bmt(t){let e=t._readableState;An("emitReadable_",e.destroyed,e.length,e.ended),!e.destroyed&&!e.errored&&(e.length||e.ended)&&(t.emit("readable"),e.emittedReadable=!1),e.needReadable=!e.flowing&&!e.ended&&e.length<=e.highWaterMark,Umt(t)}function pQ(t,e){!e.readingMore&&e.constructed&&(e.readingMore=!0,gy.nextTick(qyr,t,e))}function qyr(t,e){for(;!e.reading&&!e.ended&&(e.length<e.highWaterMark||e.flowing&&e.length===0);){let r=e.length;if(An("maybeReadMore read 0"),t.read(0),r===e.length)break}e.readingMore=!1}un.prototype._read=function(t){throw new Syr("_read()")};un.prototype.pipe=function(t,e){let r=this,n=this._readableState;n.pipes.length===1&&(n.multiAwaitDrain||(n.multiAwaitDrain=!0,n.awaitDrainWriters=new dyr(n.awaitDrainWriters?[n.awaitDrainWriters]:[]))),n.pipes.push(t),An("pipe count=%d opts=%j",n.pipes.length,e);let i=(!e||e.end!==!1)&&t!==gy.stdout&&t!==gy.stderr?s:b;n.endEmitted?gy.nextTick(i):r.once("end",i),t.on("unpipe",a);function a(g,y){An("onunpipe"),g===r&&y&&y.hasUnpiped===!1&&(y.hasUnpiped=!0,c())}function s(){An("onend"),t.end()}let u,l=!1;function c(){An("cleanup"),t.removeListener("close",m),t.removeListener("finish",h),u&&t.removeListener("drain",u),t.removeListener("error",p),t.removeListener("unpipe",a),r.removeListener("end",s),r.removeListener("end",b),r.removeListener("data",f),l=!0,u&&n.awaitDrainWriters&&(!t._writableState||t._writableState.needDrain)&&u()}function d(){l||(n.pipes.length===1&&n.pipes[0]===t?(An("false write response, pause",0),n.awaitDrainWriters=t,n.multiAwaitDrain=!1):n.pipes.length>1&&n.pipes.includes(t)&&(An("false write response, pause",n.awaitDrainWriters.size),n.awaitDrainWriters.add(t)),r.pause()),u||(u=Uyr(r,t),t.on("drain",u))}r.on("data",f);function f(g){An("ondata");let y=t.write(g);An("dest.write",y),y===!1&&d()}function p(g){if(An("onerror",g),b(),t.removeListener("error",p),t.listenerCount("error")===0){let y=t._writableState||t._readableState;y&&!y.errorEmitted?vk(t,g):t.emit("error",g)}}gyr(t,"error",p);function m(){t.removeListener("finish",h),b()}t.once("close",m);function h(){An("onfinish"),t.removeListener("close",m),b()}t.once("finish",h);function b(){An("unpipe"),r.unpipe(t)}return t.emit("pipe",r),t.writableNeedDrain===!0?d():n.flowing||(An("pipe resume"),r.resume()),t};function Uyr(t,e){return function(){let n=t._readableState;n.awaitDrainWriters===e?(An("pipeOnDrain",1),n.awaitDrainWriters=null):n.multiAwaitDrain&&(An("pipeOnDrain",n.awaitDrainWriters.size),n.awaitDrainWriters.delete(e)),(!n.awaitDrainWriters||n.awaitDrainWriters.size===0)&&t.listenerCount("data")&&t.resume()}}un.prototype.unpipe=function(t){let e=this._readableState,r={hasUnpiped:!1};if(e.pipes.length===0)return this;if(!t){let o=e.pipes;e.pipes=[],this.pause();for(let i=0;i<o.length;i++)o[i].emit("unpipe",this,{hasUnpiped:!1});return this}let n=ayr(e.pipes,t);return n===-1?this:(e.pipes.splice(n,1),e.pipes.length===0&&this.pause(),t.emit("unpipe",this,r),this)};un.prototype.on=function(t,e){let r=jT.prototype.on.call(this,t,e),n=this._readableState;return t==="data"?(n.readableListening=this.listenerCount("readable")>0,n.flowing!==!1&&this.resume()):t==="readable"&&!n.endEmitted&&!n.readableListening&&(n.readableListening=n.needReadable=!0,n.flowing=!1,n.emittedReadable=!1,An("on readable",n.length,n.reading),n.length?hQ(this):n.reading||gy.nextTick(zyr,this)),r};un.prototype.addListener=un.prototype.on;un.prototype.removeListener=function(t,e){let r=jT.prototype.removeListener.call(this,t,e);return t==="readable"&&gy.nextTick(qmt,this),r};un.prototype.off=un.prototype.removeListener;un.prototype.removeAllListeners=function(t){let e=jT.prototype.removeAllListeners.apply(this,arguments);return(t==="readable"||t===void 0)&&gy.nextTick(qmt,this),e};function qmt(t){let e=t._readableState;e.readableListening=t.listenerCount("readable")>0,e.resumeScheduled&&e[C1]===!1?e.flowing=!0:t.listenerCount("data")>0?t.resume():e.readableListening||(e.flowing=null)}function zyr(t){An("readable nexttick read 0"),t.read(0)}un.prototype.resume=function(){let t=this._readableState;return t.flowing||(An("resume"),t.flowing=!t.readableListening,Hyr(this,t)),t[C1]=!1,this};function Hyr(t,e){e.resumeScheduled||(e.resumeScheduled=!0,gy.nextTick(Vyr,t,e))}function Vyr(t,e){An("resume",e.reading),e.reading||t.read(0),e.resumeScheduled=!1,t.emit("resume"),Umt(t),e.flowing&&!e.reading&&t.read(0)}un.prototype.pause=function(){return An("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(An("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[C1]=!0,this};function Umt(t){let e=t._readableState;for(An("flow",e.flowing);e.flowing&&t.read()!==null;);}un.prototype.wrap=function(t){let e=!1;t.on("data",n=>{!this.push(n)&&t.pause&&(e=!0,t.pause())}),t.on("end",()=>{this.push(null)}),t.on("error",n=>{vk(this,n)}),t.on("close",()=>{this.destroy()}),t.on("destroy",()=>{this.destroy()}),this._read=()=>{e&&t.resume&&(e=!1,t.resume())};let r=cyr(t);for(let n=1;n<r.length;n++){let o=r[n];this[o]===void 0&&typeof t[o]=="function"&&(this[o]=t[o].bind(t))}return this};un.prototype[pyr]=function(){return zmt(this)};un.prototype.iterator=function(t){return t!==void 0&&Eyr(t,"options"),zmt(this,t)};function zmt(t,e){typeof t.read!="function"&&(t=un.wrap(t,{objectMode:!0}));let r=Wyr(t,e);return r.stream=t,r}async function*Wyr(t,e){let r=oSe;function n(a){this===t?(r(),r=oSe):r=a}t.on("readable",n);let o,i=jmt(t,{writable:!1},a=>{o=a?Amt(o,a):null,r(),r=oSe});try{for(;;){let a=t.destroyed?null:t.read();if(a!==null)yield a;else{if(o)throw o;if(o===null)return;await new Rmt(n)}}}catch(a){throw o=Amt(o,a),o}finally{(o||e?.destroyOnReturn!==!1)&&(o===void 0||t._readableState.autoDestroy)?Sk.destroyer(t,null):(t.off("readable",n),i())}}cSe(un.prototype,{readable:{__proto__:null,get(){let t=this._readableState;return!!t&&t.readable!==!1&&!t.destroyed&&!t.errorEmitted&&!t.endEmitted},set(t){this._readableState&&(this._readableState.readable=!!t)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(t){this._readableState&&(this._readableState.flowing=t)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set(t){this._readableState&&(this._readableState.destroyed=t)}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}});cSe(mQ.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[C1]!==!1},set(t){this[C1]=!!t}}});un._fromList=Hmt;function Hmt(t,e){if(e.length===0)return null;let r;return e.objectMode?r=e.buffer.shift():!t||t>=e.length?(e.decoder?r=e.buffer.join(""):e.buffer.length===1?r=e.buffer.first():r=e.buffer.concat(e.length),e.buffer.clear()):r=e.buffer.consume(t,e.decoder),r}function aSe(t){let e=t._readableState;An("endReadable",e.endEmitted),e.endEmitted||(e.ended=!0,gy.nextTick(Kyr,e,t))}function Kyr(t,e){if(An("endReadableNT",t.endEmitted,t.length),!t.errored&&!t.closeEmitted&&!t.endEmitted&&t.length===0){if(t.endEmitted=!0,e.emit("end"),e.writable&&e.allowHalfOpen===!1)gy.nextTick(Gyr,e);else if(t.autoDestroy){let r=e._writableState;(!r||r.autoDestroy&&(r.finished||r.writable===!1))&&e.destroy()}}}function Gyr(t){t.writable&&!t.writableEnded&&!t.destroyed&&t.end()}un.from=function(t,e){return Tyr(un,t,e)};var sSe;function Vmt(){return sSe===void 0&&(sSe={}),sSe}un.fromWeb=function(t,e){return Vmt().newStreamReadableFromReadableStream(t,e)};un.toWeb=function(t,e){return Vmt().newReadableStreamFromStreamReadable(t,e)};un.wrap=function(t,e){var r,n;return new un({objectMode:(r=(n=t.readableObjectMode)!==null&&n!==void 0?n:t.objectMode)!==null&&r!==void 0?r:!0,...e,destroy(o,i){Sk.destroyer(t,o),i(o)}}).wrap(t)}});var vQ=v((Jpo,oht)=>{var O1=MT(),{ArrayPrototypeSlice:Jmt,Error:Jyr,FunctionPrototypeSymbolHasInstance:Ymt,ObjectDefineProperty:Zmt,ObjectDefineProperties:Yyr,ObjectSetPrototypeOf:Xmt,StringPrototypeToLowerCase:Zyr,Symbol:Xyr,SymbolHasInstance:Qyr}=ka();oht.exports=$a;$a.WritableState=nH;var{EventEmitter:ebr}=J3(),tH=sQ().Stream,{Buffer:gQ}=mp(),_Q=S1(),{addAbortSignal:tbr}=Y3(),{getHighWaterMark:rbr,getDefaultHighWaterMark:nbr}=Z3(),{ERR_INVALID_ARG_TYPE:obr,ERR_METHOD_NOT_IMPLEMENTED:ibr,ERR_MULTIPLE_CALLBACK:Qmt,ERR_STREAM_CANNOT_PIPE:abr,ERR_STREAM_DESTROYED:rH,ERR_STREAM_ALREADY_FINISHED:sbr,ERR_STREAM_NULL_VALUES:ubr,ERR_STREAM_WRITE_AFTER_END:lbr,ERR_UNKNOWN_ENCODING:eht}=Rf().codes,{errorOrDestroy:xk}=_Q;Xmt($a.prototype,tH.prototype);Xmt($a,tH);function pSe(){}var Ck=Xyr("kOnFinished");function nH(t,e,r){typeof r!="boolean"&&(r=e instanceof P_()),this.objectMode=!!(t&&t.objectMode),r&&(this.objectMode=this.objectMode||!!(t&&t.writableObjectMode)),this.highWaterMark=t?rbr(this,t,"writableHighWaterMark",r):nbr(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;let n=!!(t&&t.decodeStrings===!1);this.decodeStrings=!n,this.defaultEncoding=t&&t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=dbr.bind(void 0,e),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,bQ(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!t||t.emitClose!==!1,this.autoDestroy=!t||t.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[Ck]=[]}function bQ(t){t.buffered=[],t.bufferedIndex=0,t.allBuffers=!0,t.allNoop=!0}nH.prototype.getBuffer=function(){return Jmt(this.buffered,this.bufferedIndex)};Zmt(nH.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function $a(t){let e=this instanceof P_();if(!e&&!Ymt($a,this))return new $a(t);this._writableState=new nH(t,this,e),t&&(typeof t.write=="function"&&(this._write=t.write),typeof t.writev=="function"&&(this._writev=t.writev),typeof t.destroy=="function"&&(this._destroy=t.destroy),typeof t.final=="function"&&(this._final=t.final),typeof t.construct=="function"&&(this._construct=t.construct),t.signal&&tbr(t.signal,this)),tH.call(this,t),_Q.construct(this,()=>{let r=this._writableState;r.writing||hSe(this,r),gSe(this,r)})}Zmt($a,Qyr,{__proto__:null,value:function(t){return Ymt(this,t)?!0:this!==$a?!1:t&&t._writableState instanceof nH}});$a.prototype.pipe=function(){xk(this,new abr)};function tht(t,e,r,n){let o=t._writableState;if(typeof r=="function")n=r,r=o.defaultEncoding;else{if(!r)r=o.defaultEncoding;else if(r!=="buffer"&&!gQ.isEncoding(r))throw new eht(r);typeof n!="function"&&(n=pSe)}if(e===null)throw new ubr;if(!o.objectMode)if(typeof e=="string")o.decodeStrings!==!1&&(e=gQ.from(e,r),r="buffer");else if(e instanceof gQ)r="buffer";else if(tH._isUint8Array(e))e=tH._uint8ArrayToBuffer(e),r="buffer";else throw new obr("chunk",["string","Buffer","Uint8Array"],e);let i;return o.ending?i=new lbr:o.destroyed&&(i=new rH("write")),i?(O1.nextTick(n,i),xk(t,i,!0),i):(o.pendingcb++,cbr(t,o,e,r,n))}$a.prototype.write=function(t,e,r){return tht(this,t,e,r)===!0};$a.prototype.cork=function(){this._writableState.corked++};$a.prototype.uncork=function(){let t=this._writableState;t.corked&&(t.corked--,t.writing||hSe(this,t))};$a.prototype.setDefaultEncoding=function(e){if(typeof e=="string"&&(e=Zyr(e)),!gQ.isEncoding(e))throw new eht(e);return this._writableState.defaultEncoding=e,this};function cbr(t,e,r,n,o){let i=e.objectMode?1:r.length;e.length+=i;let a=e.length<e.highWaterMark;return a||(e.needDrain=!0),e.writing||e.corked||e.errored||!e.constructed?(e.buffered.push({chunk:r,encoding:n,callback:o}),e.allBuffers&&n!=="buffer"&&(e.allBuffers=!1),e.allNoop&&o!==pSe&&(e.allNoop=!1)):(e.writelen=i,e.writecb=o,e.writing=!0,e.sync=!0,t._write(r,n,e.onwrite),e.sync=!1),a&&!e.errored&&!e.destroyed}function Kmt(t,e,r,n,o,i,a){e.writelen=n,e.writecb=a,e.writing=!0,e.sync=!0,e.destroyed?e.onwrite(new rH("write")):r?t._writev(o,e.onwrite):t._write(o,i,e.onwrite),e.sync=!1}function Gmt(t,e,r,n){--e.pendingcb,n(r),mSe(e),xk(t,r)}function dbr(t,e){let r=t._writableState,n=r.sync,o=r.writecb;if(typeof o!="function"){xk(t,new Qmt);return}r.writing=!1,r.writecb=null,r.length-=r.writelen,r.writelen=0,e?(e.stack,r.errored||(r.errored=e),t._readableState&&!t._readableState.errored&&(t._readableState.errored=e),n?O1.nextTick(Gmt,t,r,e,o):Gmt(t,r,e,o)):(r.buffered.length>r.bufferedIndex&&hSe(t,r),n?r.afterWriteTickInfo!==null&&r.afterWriteTickInfo.cb===o?r.afterWriteTickInfo.count++:(r.afterWriteTickInfo={count:1,cb:o,stream:t,state:r},O1.nextTick(fbr,r.afterWriteTickInfo)):rht(t,r,1,o))}function fbr({stream:t,state:e,count:r,cb:n}){return e.afterWriteTickInfo=null,rht(t,e,r,n)}function rht(t,e,r,n){for(!e.ending&&!t.destroyed&&e.length===0&&e.needDrain&&(e.needDrain=!1,t.emit("drain"));r-- >0;)e.pendingcb--,n();e.destroyed&&mSe(e),gSe(t,e)}function mSe(t){if(t.writing)return;for(let o=t.bufferedIndex;o<t.buffered.length;++o){var e;let{chunk:i,callback:a}=t.buffered[o],s=t.objectMode?1:i.length;t.length-=s,a((e=t.errored)!==null&&e!==void 0?e:new rH("write"))}let r=t[Ck].splice(0);for(let o=0;o<r.length;o++){var n;r[o]((n=t.errored)!==null&&n!==void 0?n:new rH("end"))}bQ(t)}function hSe(t,e){if(e.corked||e.bufferProcessing||e.destroyed||!e.constructed)return;let{buffered:r,bufferedIndex:n,objectMode:o}=e,i=r.length-n;if(!i)return;let a=n;if(e.bufferProcessing=!0,i>1&&t._writev){e.pendingcb-=i-1;let s=e.allNoop?pSe:l=>{for(let c=a;c<r.length;++c)r[c].callback(l)},u=e.allNoop&&a===0?r:Jmt(r,a);u.allBuffers=e.allBuffers,Kmt(t,e,!0,e.length,u,"",s),bQ(e)}else{do{let{chunk:s,encoding:u,callback:l}=r[a];r[a++]=null;let c=o?1:s.length;Kmt(t,e,!1,c,s,u,l)}while(a<r.length&&!e.writing);a===r.length?bQ(e):a>256?(r.splice(0,a),e.bufferedIndex=0):e.bufferedIndex=a}e.bufferProcessing=!1}$a.prototype._write=function(t,e,r){if(this._writev)this._writev([{chunk:t,encoding:e}],r);else throw new ibr("_write()")};$a.prototype._writev=null;$a.prototype.end=function(t,e,r){let n=this._writableState;typeof t=="function"?(r=t,t=null,e=null):typeof e=="function"&&(r=e,e=null);let o;if(t!=null){let i=tht(this,t,e);i instanceof Jyr&&(o=i)}return n.corked&&(n.corked=1,this.uncork()),o||(!n.errored&&!n.ending?(n.ending=!0,gSe(this,n,!0),n.ended=!0):n.finished?o=new sbr("end"):n.destroyed&&(o=new rH("end"))),typeof r=="function"&&(o||n.finished?O1.nextTick(r,o):n[Ck].push(r)),this};function yQ(t){return t.ending&&!t.destroyed&&t.constructed&&t.length===0&&!t.errored&&t.buffered.length===0&&!t.finished&&!t.writing&&!t.errorEmitted&&!t.closeEmitted}function pbr(t,e){let r=!1;function n(o){if(r){xk(t,o??Qmt());return}if(r=!0,e.pendingcb--,o){let i=e[Ck].splice(0);for(let a=0;a<i.length;a++)i[a](o);xk(t,o,e.sync)}else yQ(e)&&(e.prefinished=!0,t.emit("prefinish"),e.pendingcb++,O1.nextTick(fSe,t,e))}e.sync=!0,e.pendingcb++;try{t._final(n)}catch(o){n(o)}e.sync=!1}function mbr(t,e){!e.prefinished&&!e.finalCalled&&(typeof t._final=="function"&&!e.destroyed?(e.finalCalled=!0,pbr(t,e)):(e.prefinished=!0,t.emit("prefinish")))}function gSe(t,e,r){yQ(e)&&(mbr(t,e),e.pendingcb===0&&(r?(e.pendingcb++,O1.nextTick((n,o)=>{yQ(o)?fSe(n,o):o.pendingcb--},t,e)):yQ(e)&&(e.pendingcb++,fSe(t,e))))}function fSe(t,e){e.pendingcb--,e.finished=!0;let r=e[Ck].splice(0);for(let n=0;n<r.length;n++)r[n]();if(t.emit("finish"),e.autoDestroy){let n=t._readableState;(!n||n.autoDestroy&&(n.endEmitted||n.readable===!1))&&t.destroy()}}Yyr($a.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set(t){this._writableState&&(this._writableState.destroyed=t)}},writable:{__proto__:null,get(){let t=this._writableState;return!!t&&t.writable!==!1&&!t.destroyed&&!t.errored&&!t.ending&&!t.ended},set(t){this._writableState&&(this._writableState.writable=!!t)}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){let t=this._writableState;return t?!t.destroyed&&!t.ending&&t.needDrain:!1}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});var hbr=_Q.destroy;$a.prototype.destroy=function(t,e){let r=this._writableState;return!r.destroyed&&(r.bufferedIndex<r.buffered.length||r[Ck].length)&&O1.nextTick(mSe,r),hbr.call(this,t,e),this};$a.prototype._undestroy=_Q.undestroy;$a.prototype._destroy=function(t,e){e(t)};$a.prototype[ebr.captureRejectionSymbol]=function(t){this.destroy(t)};var dSe;function nht(){return dSe===void 0&&(dSe={}),dSe}$a.fromWeb=function(t,e){return nht().newStreamWritableFromWritableStream(t,e)};$a.toWeb=function(t){return nht().newWritableStreamFromStreamWritable(t)}});var _ht=v((Ypo,bht)=>{var ySe=MT(),gbr=mp(),{isReadable:ybr,isWritable:bbr,isIterable:iht,isNodeStream:_br,isReadableNodeStream:aht,isWritableNodeStream:sht,isDuplexNodeStream:vbr,isReadableStream:uht,isWritableStream:lht}=x_(),cht=XC(),{AbortError:ght,codes:{ERR_INVALID_ARG_TYPE:wbr,ERR_INVALID_RETURN_VALUE:dht}}=Rf(),{destroyer:Pk}=S1(),Sbr=P_(),yht=eH(),xbr=vQ(),{createDeferredPromise:fht}=Nd(),pht=rSe(),mht=globalThis.Blob||gbr.Blob,Cbr=typeof mht<"u"?function(e){return e instanceof mht}:function(e){return!1},Obr=globalThis.AbortController||mk().AbortController,{FunctionPrototypeCall:hht}=ka(),NT=class extends Sbr{constructor(e){super(e),e?.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),e?.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}};bht.exports=function t(e,r){if(vbr(e))return e;if(aht(e))return Ok({readable:e});if(sht(e))return Ok({writable:e});if(_br(e))return Ok({writable:!1,readable:!1});if(uht(e))return Ok({readable:yht.fromWeb(e)});if(lht(e))return Ok({writable:xbr.fromWeb(e)});if(typeof e=="function"){let{value:o,write:i,final:a,destroy:s}=Pbr(e);if(iht(o))return pht(NT,o,{objectMode:!0,write:i,final:a,destroy:s});let u=o?.then;if(typeof u=="function"){let l,c=hht(u,o,d=>{if(d!=null)throw new dht("nully","body",d)},d=>{Pk(l,d)});return l=new NT({objectMode:!0,readable:!1,write:i,final(d){a(async()=>{try{await c,ySe.nextTick(d,null)}catch(f){ySe.nextTick(d,f)}})},destroy:s})}throw new dht("Iterable, AsyncIterable or AsyncFunction",r,o)}if(Cbr(e))return t(e.arrayBuffer());if(iht(e))return pht(NT,e,{objectMode:!0,writable:!1});if(uht(e?.readable)&&lht(e?.writable))return NT.fromWeb(e);if(typeof e?.writable=="object"||typeof e?.readable=="object"){let o=e!=null&&e.readable?aht(e?.readable)?e?.readable:t(e.readable):void 0,i=e!=null&&e.writable?sht(e?.writable)?e?.writable:t(e.writable):void 0;return Ok({readable:o,writable:i})}let n=e?.then;if(typeof n=="function"){let o;return hht(n,e,i=>{i!=null&&o.push(i),o.push(null)},i=>{Pk(o,i)}),o=new NT({objectMode:!0,writable:!1,read(){}})}throw new wbr(r,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],e)};function Pbr(t){let{promise:e,resolve:r}=fht(),n=new Obr,o=n.signal;return{value:t(async function*(){for(;;){let a=e;e=null;let{chunk:s,done:u,cb:l}=await a;if(ySe.nextTick(l),u)return;if(o.aborted)throw new ght(void 0,{cause:o.reason});({promise:e,resolve:r}=fht()),yield s}}(),{signal:o}),write(a,s,u){let l=r;r=null,l({chunk:a,done:!1,cb:u})},final(a){let s=r;r=null,s({done:!0,cb:a})},destroy(a,s){n.abort(),s(a)}}}function Ok(t){let e=t.readable&&typeof t.readable.read!="function"?yht.wrap(t.readable):t.readable,r=t.writable,n=!!ybr(e),o=!!bbr(r),i,a,s,u,l;function c(d){let f=u;u=null,f?f(d):d&&l.destroy(d)}return l=new NT({readableObjectMode:!!(e!=null&&e.readableObjectMode),writableObjectMode:!!(r!=null&&r.writableObjectMode),readable:n,writable:o}),o&&(cht(r,d=>{o=!1,d&&Pk(e,d),c(d)}),l._write=function(d,f,p){r.write(d,f)?p():i=p},l._final=function(d){r.end(),a=d},r.on("drain",function(){if(i){let d=i;i=null,d()}}),r.on("finish",function(){if(a){let d=a;a=null,d()}})),n&&(cht(e,d=>{n=!1,d&&Pk(e,d),c(d)}),e.on("readable",function(){if(s){let d=s;s=null,d()}}),e.on("end",function(){l.push(null)}),l._read=function(){for(;;){let d=e.read();if(d===null){s=l._read;return}if(!l.push(d))return}}),l._destroy=function(d,f){!d&&u!==null&&(d=new ght),s=null,i=null,a=null,u===null?f(d):(u=f,Pk(r,d),Pk(e,d))},l}});var P_=v((Zpo,Sht)=>{"use strict";var{ObjectDefineProperties:Ebr,ObjectGetOwnPropertyDescriptor:QC,ObjectKeys:Tbr,ObjectSetPrototypeOf:vht}=ka();Sht.exports=yy;var vSe=eH(),Uh=vQ();vht(yy.prototype,vSe.prototype);vht(yy,vSe);{let t=Tbr(Uh.prototype);for(let e=0;e<t.length;e++){let r=t[e];yy.prototype[r]||(yy.prototype[r]=Uh.prototype[r])}}function yy(t){if(!(this instanceof yy))return new yy(t);vSe.call(this,t),Uh.call(this,t),t?(this.allowHalfOpen=t.allowHalfOpen!==!1,t.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),t.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}Ebr(yy.prototype,{writable:{__proto__:null,...QC(Uh.prototype,"writable")},writableHighWaterMark:{__proto__:null,...QC(Uh.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...QC(Uh.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...QC(Uh.prototype,"writableBuffer")},writableLength:{__proto__:null,...QC(Uh.prototype,"writableLength")},writableFinished:{__proto__:null,...QC(Uh.prototype,"writableFinished")},writableCorked:{__proto__:null,...QC(Uh.prototype,"writableCorked")},writableEnded:{__proto__:null,...QC(Uh.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...QC(Uh.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set(t){this._readableState&&this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}}});var bSe;function wht(){return bSe===void 0&&(bSe={}),bSe}yy.fromWeb=function(t,e){return wht().newStreamDuplexFromReadableWritablePair(t,e)};yy.toWeb=function(t){return wht().newReadableWritablePairFromDuplex(t)};var _Se;yy.from=function(t){return _Se||(_Se=_ht()),_Se(t,"body")}});var xSe=v((Xpo,Cht)=>{"use strict";var{ObjectSetPrototypeOf:xht,Symbol:Abr}=ka();Cht.exports=eO;var{ERR_METHOD_NOT_IMPLEMENTED:Ibr}=Rf().codes,SSe=P_(),{getHighWaterMark:Mbr}=Z3();xht(eO.prototype,SSe.prototype);xht(eO,SSe);var oH=Abr("kCallback");function eO(t){if(!(this instanceof eO))return new eO(t);let e=t?Mbr(this,t,"readableHighWaterMark",!0):null;e===0&&(t={...t,highWaterMark:null,readableHighWaterMark:e,writableHighWaterMark:t.writableHighWaterMark||0}),SSe.call(this,t),this._readableState.sync=!1,this[oH]=null,t&&(typeof t.transform=="function"&&(this._transform=t.transform),typeof t.flush=="function"&&(this._flush=t.flush)),this.on("prefinish",Rbr)}function wSe(t){typeof this._flush=="function"&&!this.destroyed?this._flush((e,r)=>{if(e){t?t(e):this.destroy(e);return}r!=null&&this.push(r),this.push(null),t&&t()}):(this.push(null),t&&t())}function Rbr(){this._final!==wSe&&wSe.call(this)}eO.prototype._final=wSe;eO.prototype._transform=function(t,e,r){throw new Ibr("_transform()")};eO.prototype._write=function(t,e,r){let n=this._readableState,o=this._writableState,i=n.length;this._transform(t,e,(a,s)=>{if(a){r(a);return}s!=null&&this.push(s),o.ended||i===n.length||n.length<n.highWaterMark?r():this[oH]=r})};eO.prototype._read=function(){if(this[oH]){let t=this[oH];this[oH]=null,t()}}});var OSe=v((Qpo,Pht)=>{"use strict";var{ObjectSetPrototypeOf:Oht}=ka();Pht.exports=Ek;var CSe=xSe();Oht(Ek.prototype,CSe.prototype);Oht(Ek,CSe);function Ek(t){if(!(this instanceof Ek))return new Ek(t);CSe.call(this,t)}Ek.prototype._transform=function(t,e,r){r(null,t)}});var CQ=v((emo,Mht)=>{var iH=MT(),{ArrayIsArray:jbr,Promise:Nbr,SymbolAsyncIterator:Dbr,SymbolDispose:Lbr}=ka(),xQ=XC(),{once:Fbr}=Nd(),kbr=S1(),Eht=P_(),{aggregateTwoErrors:$br,codes:{ERR_INVALID_ARG_TYPE:NSe,ERR_INVALID_RETURN_VALUE:PSe,ERR_MISSING_ARGS:Bbr,ERR_STREAM_DESTROYED:qbr,ERR_STREAM_PREMATURE_CLOSE:Ubr},AbortError:zbr}=Rf(),{validateFunction:Hbr,validateAbortSignal:Vbr}=yk(),{isIterable:P1,isReadable:ESe,isReadableNodeStream:SQ,isNodeStream:Tht,isTransformStream:Tk,isWebStream:Wbr,isReadableStream:TSe,isReadableFinished:Kbr}=x_(),Gbr=globalThis.AbortController||mk().AbortController,ASe,ISe,MSe;function Aht(t,e,r){let n=!1;t.on("close",()=>{n=!0});let o=xQ(t,{readable:e,writable:r},i=>{n=!i});return{destroy:i=>{n||(n=!0,kbr.destroyer(t,i||new qbr("pipe")))},cleanup:o}}function Jbr(t){return Hbr(t[t.length-1],"streams[stream.length - 1]"),t.pop()}function RSe(t){if(P1(t))return t;if(SQ(t))return Ybr(t);throw new NSe("val",["Readable","Iterable","AsyncIterable"],t)}async function*Ybr(t){ISe||(ISe=eH()),yield*ISe.prototype[Dbr].call(t)}async function wQ(t,e,r,{end:n}){let o,i=null,a=l=>{if(l&&(o=l),i){let c=i;i=null,c()}},s=()=>new Nbr((l,c)=>{o?c(o):i=()=>{o?c(o):l()}});e.on("drain",a);let u=xQ(e,{readable:!1},a);try{e.writableNeedDrain&&await s();for await(let l of t)e.write(l)||await s();n&&(e.end(),await s()),r()}catch(l){r(o!==l?$br(o,l):l)}finally{u(),e.off("drain",a)}}async function jSe(t,e,r,{end:n}){Tk(e)&&(e=e.writable);let o=e.getWriter();try{for await(let i of t)await o.ready,o.write(i).catch(()=>{});await o.ready,n&&await o.close(),r()}catch(i){try{await o.abort(i),r(i)}catch(a){r(a)}}}function Zbr(...t){return Iht(t,Fbr(Jbr(t)))}function Iht(t,e,r){if(t.length===1&&jbr(t[0])&&(t=t[0]),t.length<2)throw new Bbr("streams");let n=new Gbr,o=n.signal,i=r?.signal,a=[];Vbr(i,"options.signal");function s(){m(new zbr)}MSe=MSe||Nd().addAbortListener;let u;i&&(u=MSe(i,s));let l,c,d=[],f=0;function p(w){m(w,--f===0)}function m(w,S){var C;if(w&&(!l||l.code==="ERR_STREAM_PREMATURE_CLOSE")&&(l=w),!(!l&&!S)){for(;d.length;)d.shift()(l);(C=u)===null||C===void 0||C[Lbr](),n.abort(),S&&(l||a.forEach(P=>P()),iH.nextTick(e,l,c))}}let h;for(let w=0;w<t.length;w++){let S=t[w],C=w<t.length-1,P=w>0,E=C||r?.end!==!1,A=w===t.length-1;if(Tht(S)){let I=function(R){R&&R.name!=="AbortError"&&R.code!=="ERR_STREAM_PREMATURE_CLOSE"&&p(R)};var y=I;if(E){let{destroy:R,cleanup:j}=Aht(S,C,P);d.push(R),ESe(S)&&A&&a.push(j)}S.on("error",I),ESe(S)&&A&&a.push(()=>{S.removeListener("error",I)})}if(w===0)if(typeof S=="function"){if(h=S({signal:o}),!P1(h))throw new PSe("Iterable, AsyncIterable or Stream","source",h)}else P1(S)||SQ(S)||Tk(S)?h=S:h=Eht.from(S);else if(typeof S=="function"){if(Tk(h)){var b;h=RSe((b=h)===null||b===void 0?void 0:b.readable)}else h=RSe(h);if(h=S(h,{signal:o}),C){if(!P1(h,!0))throw new PSe("AsyncIterable",`transform[${w-1}]`,h)}else{var g;ASe||(ASe=OSe());let I=new ASe({objectMode:!0}),R=(g=h)===null||g===void 0?void 0:g.then;if(typeof R=="function")f++,R.call(h,$=>{c=$,$!=null&&I.write($),E&&I.end(),iH.nextTick(p)},$=>{I.destroy($),iH.nextTick(p,$)});else if(P1(h,!0))f++,wQ(h,I,p,{end:E});else if(TSe(h)||Tk(h)){let $=h.readable||h;f++,wQ($,I,p,{end:E})}else throw new PSe("AsyncIterable or Promise","destination",h);h=I;let{destroy:j,cleanup:N}=Aht(h,!1,!0);d.push(j),A&&a.push(N)}}else if(Tht(S)){if(SQ(h)){f+=2;let I=Xbr(h,S,p,{end:E});ESe(S)&&A&&a.push(I)}else if(Tk(h)||TSe(h)){let I=h.readable||h;f++,wQ(I,S,p,{end:E})}else if(P1(h))f++,wQ(h,S,p,{end:E});else throw new NSe("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],h);h=S}else if(Wbr(S)){if(SQ(h))f++,jSe(RSe(h),S,p,{end:E});else if(TSe(h)||P1(h))f++,jSe(h,S,p,{end:E});else if(Tk(h))f++,jSe(h.readable,S,p,{end:E});else throw new NSe("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],h);h=S}else h=Eht.from(S)}return(o!=null&&o.aborted||i!=null&&i.aborted)&&iH.nextTick(s),h}function Xbr(t,e,r,{end:n}){let o=!1;if(e.on("close",()=>{o||r(new Ubr)}),t.pipe(e,{end:!1}),n){let a=function(){o=!0,e.end()};var i=a;Kbr(t)?iH.nextTick(a):t.once("end",a)}else r();return xQ(t,{readable:!0,writable:!1},a=>{let s=t._readableState;a&&a.code==="ERR_STREAM_PREMATURE_CLOSE"&&s&&s.ended&&!s.errored&&!s.errorEmitted?t.once("end",r).once("error",r):r(a)}),xQ(e,{readable:!1,writable:!0},r)}Mht.exports={pipelineImpl:Iht,pipeline:Zbr}});var LSe=v((tmo,Fht)=>{"use strict";var{pipeline:Qbr}=CQ(),OQ=P_(),{destroyer:e_r}=S1(),{isNodeStream:PQ,isReadable:Rht,isWritable:jht,isWebStream:DSe,isTransformStream:E1,isWritableStream:Nht,isReadableStream:Dht}=x_(),{AbortError:t_r,codes:{ERR_INVALID_ARG_VALUE:Lht,ERR_MISSING_ARGS:r_r}}=Rf(),n_r=XC();Fht.exports=function(...e){if(e.length===0)throw new r_r("streams");if(e.length===1)return OQ.from(e[0]);let r=[...e];if(typeof e[0]=="function"&&(e[0]=OQ.from(e[0])),typeof e[e.length-1]=="function"){let p=e.length-1;e[p]=OQ.from(e[p])}for(let p=0;p<e.length;++p)if(!(!PQ(e[p])&&!DSe(e[p]))){if(p<e.length-1&&!(Rht(e[p])||Dht(e[p])||E1(e[p])))throw new Lht(`streams[${p}]`,r[p],"must be readable");if(p>0&&!(jht(e[p])||Nht(e[p])||E1(e[p])))throw new Lht(`streams[${p}]`,r[p],"must be writable")}let n,o,i,a,s;function u(p){let m=a;a=null,m?m(p):p?s.destroy(p):!f&&!d&&s.destroy()}let l=e[0],c=Qbr(e,u),d=!!(jht(l)||Nht(l)||E1(l)),f=!!(Rht(c)||Dht(c)||E1(c));if(s=new OQ({writableObjectMode:!!(l!=null&&l.writableObjectMode),readableObjectMode:!!(c!=null&&c.readableObjectMode),writable:d,readable:f}),d){if(PQ(l))s._write=function(m,h,b){l.write(m,h)?b():n=b},s._final=function(m){l.end(),o=m},l.on("drain",function(){if(n){let m=n;n=null,m()}});else if(DSe(l)){let h=(E1(l)?l.writable:l).getWriter();s._write=async function(b,g,y){try{await h.ready,h.write(b).catch(()=>{}),y()}catch(w){y(w)}},s._final=async function(b){try{await h.ready,h.close().catch(()=>{}),o=b}catch(g){b(g)}}}let p=E1(c)?c.readable:c;n_r(p,()=>{if(o){let m=o;o=null,m()}})}if(f){if(PQ(c))c.on("readable",function(){if(i){let p=i;i=null,p()}}),c.on("end",function(){s.push(null)}),s._read=function(){for(;;){let p=c.read();if(p===null){i=s._read;return}if(!s.push(p))return}};else if(DSe(c)){let m=(E1(c)?c.readable:c).getReader();s._read=async function(){for(;;)try{let{value:h,done:b}=await m.read();if(!s.push(h))return;if(b){s.push(null);return}}catch{return}}}}return s._destroy=function(p,m){!p&&a!==null&&(p=new t_r),i=null,n=null,o=null,a===null?m(p):(a=m,PQ(c)&&e_r(c,p))},s}});var Kht=v((rmo,$Se)=>{"use strict";var o_r=globalThis.AbortController||mk().AbortController,{codes:{ERR_INVALID_ARG_VALUE:i_r,ERR_INVALID_ARG_TYPE:aH,ERR_MISSING_ARGS:a_r,ERR_OUT_OF_RANGE:s_r},AbortError:E_}=Rf(),{validateAbortSignal:T1,validateInteger:kht,validateObject:A1}=yk(),u_r=ka().Symbol("kWeak"),l_r=ka().Symbol("kResistStopPropagation"),{finished:c_r}=XC(),d_r=LSe(),{addAbortSignalNoValidate:f_r}=Y3(),{isWritable:p_r,isNodeStream:m_r}=x_(),{deprecate:h_r}=Nd(),{ArrayPrototypePush:g_r,Boolean:y_r,MathFloor:$ht,Number:b_r,NumberIsNaN:__r,Promise:Bht,PromiseReject:qht,PromiseResolve:v_r,PromisePrototypeThen:Uht,Symbol:Hht}=ka(),EQ=Hht("kEmpty"),zht=Hht("kEof");function w_r(t,e){if(e!=null&&A1(e,"options"),e?.signal!=null&&T1(e.signal,"options.signal"),m_r(t)&&!p_r(t))throw new i_r("stream",t,"must be writable");let r=d_r(this,t);return e!=null&&e.signal&&f_r(e.signal,r),r}function TQ(t,e){if(typeof t!="function")throw new aH("fn",["Function","AsyncFunction"],t);e!=null&&A1(e,"options"),e?.signal!=null&&T1(e.signal,"options.signal");let r=1;e?.concurrency!=null&&(r=$ht(e.concurrency));let n=r-1;return e?.highWaterMark!=null&&(n=$ht(e.highWaterMark)),kht(r,"options.concurrency",1),kht(n,"options.highWaterMark",0),n+=r,async function*(){let i=Nd().AbortSignalAny([e?.signal].filter(y_r)),a=this,s=[],u={signal:i},l,c,d=!1,f=0;function p(){d=!0,m()}function m(){f-=1,h()}function h(){c&&!d&&f<r&&s.length<n&&(c(),c=null)}async function b(){try{for await(let g of a){if(d)return;if(i.aborted)throw new E_;try{if(g=t(g,u),g===EQ)continue;g=v_r(g)}catch(y){g=qht(y)}f+=1,Uht(g,m,p),s.push(g),l&&(l(),l=null),!d&&(s.length>=n||f>=r)&&await new Bht(y=>{c=y})}s.push(zht)}catch(g){let y=qht(g);Uht(y,m,p),s.push(y)}finally{d=!0,l&&(l(),l=null)}}b();try{for(;;){for(;s.length>0;){let g=await s[0];if(g===zht)return;if(i.aborted)throw new E_;g!==EQ&&(yield g),s.shift(),h()}await new Bht(g=>{l=g})}}finally{d=!0,c&&(c(),c=null)}}.call(this)}function S_r(t=void 0){return t!=null&&A1(t,"options"),t?.signal!=null&&T1(t.signal,"options.signal"),async function*(){let r=0;for await(let o of this){var n;if(t!=null&&(n=t.signal)!==null&&n!==void 0&&n.aborted)throw new E_({cause:t.signal.reason});yield[r++,o]}}.call(this)}async function Vht(t,e=void 0){for await(let r of kSe.call(this,t,e))return!0;return!1}async function x_r(t,e=void 0){if(typeof t!="function")throw new aH("fn",["Function","AsyncFunction"],t);return!await Vht.call(this,async(...r)=>!await t(...r),e)}async function C_r(t,e){for await(let r of kSe.call(this,t,e))return r}async function O_r(t,e){if(typeof t!="function")throw new aH("fn",["Function","AsyncFunction"],t);async function r(n,o){return await t(n,o),EQ}for await(let n of TQ.call(this,r,e));}function kSe(t,e){if(typeof t!="function")throw new aH("fn",["Function","AsyncFunction"],t);async function r(n,o){return await t(n,o)?n:EQ}return TQ.call(this,r,e)}var FSe=class extends a_r{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}};async function P_r(t,e,r){var n;if(typeof t!="function")throw new aH("reducer",["Function","AsyncFunction"],t);r!=null&&A1(r,"options"),r?.signal!=null&&T1(r.signal,"options.signal");let o=arguments.length>1;if(r!=null&&(n=r.signal)!==null&&n!==void 0&&n.aborted){let l=new E_(void 0,{cause:r.signal.reason});throw this.once("error",()=>{}),await c_r(this.destroy(l)),l}let i=new o_r,a=i.signal;if(r!=null&&r.signal){let l={once:!0,[u_r]:this,[l_r]:!0};r.signal.addEventListener("abort",()=>i.abort(),l)}let s=!1;try{for await(let l of this){var u;if(s=!0,r!=null&&(u=r.signal)!==null&&u!==void 0&&u.aborted)throw new E_;o?e=await t(e,l,{signal:a}):(e=l,o=!0)}if(!s&&!o)throw new FSe}finally{i.abort()}return e}async function E_r(t){t!=null&&A1(t,"options"),t?.signal!=null&&T1(t.signal,"options.signal");let e=[];for await(let n of this){var r;if(t!=null&&(r=t.signal)!==null&&r!==void 0&&r.aborted)throw new E_(void 0,{cause:t.signal.reason});g_r(e,n)}return e}function T_r(t,e){let r=TQ.call(this,t,e);return async function*(){for await(let o of r)yield*o}.call(this)}function Wht(t){if(t=b_r(t),__r(t))return 0;if(t<0)throw new s_r("number",">= 0",t);return t}function A_r(t,e=void 0){return e!=null&&A1(e,"options"),e?.signal!=null&&T1(e.signal,"options.signal"),t=Wht(t),async function*(){var n;if(e!=null&&(n=e.signal)!==null&&n!==void 0&&n.aborted)throw new E_;for await(let i of this){var o;if(e!=null&&(o=e.signal)!==null&&o!==void 0&&o.aborted)throw new E_;t--<=0&&(yield i)}}.call(this)}function I_r(t,e=void 0){return e!=null&&A1(e,"options"),e?.signal!=null&&T1(e.signal,"options.signal"),t=Wht(t),async function*(){var n;if(e!=null&&(n=e.signal)!==null&&n!==void 0&&n.aborted)throw new E_;for await(let i of this){var o;if(e!=null&&(o=e.signal)!==null&&o!==void 0&&o.aborted)throw new E_;if(t-- >0&&(yield i),t<=0)return}}.call(this)}$Se.exports.streamReturningOperators={asIndexedPairs:h_r(S_r,"readable.asIndexedPairs will be removed in a future version."),drop:A_r,filter:kSe,flatMap:T_r,map:TQ,take:I_r,compose:w_r};$Se.exports.promiseReturningOperators={every:x_r,forEach:O_r,reduce:P_r,toArray:E_r,some:Vht,find:C_r}});var BSe=v((nmo,Ght)=>{"use strict";var{ArrayPrototypePop:M_r,Promise:R_r}=ka(),{isIterable:j_r,isNodeStream:N_r,isWebStream:D_r}=x_(),{pipelineImpl:L_r}=CQ(),{finished:F_r}=XC();qSe();function k_r(...t){return new R_r((e,r)=>{let n,o,i=t[t.length-1];if(i&&typeof i=="object"&&!N_r(i)&&!j_r(i)&&!D_r(i)){let a=M_r(t);n=a.signal,o=a.end}L_r(t,(a,s)=>{a?r(a):e(s)},{signal:n,end:o})})}Ght.exports={finished:F_r,pipeline:k_r}});var qSe=v((omo,ngt)=>{var{Buffer:$_r}=mp(),{ObjectDefineProperty:tO,ObjectKeys:Zht,ReflectApply:Xht}=ka(),{promisify:{custom:Qht}}=Nd(),{streamReturningOperators:Jht,promiseReturningOperators:Yht}=Kht(),{codes:{ERR_ILLEGAL_CONSTRUCTOR:egt}}=Rf(),B_r=LSe(),{setDefaultHighWaterMark:q_r,getDefaultHighWaterMark:U_r}=Z3(),{pipeline:tgt}=CQ(),{destroyer:z_r}=S1(),rgt=XC(),USe=BSe(),sH=x_(),na=ngt.exports=sQ().Stream;na.isDestroyed=sH.isDestroyed;na.isDisturbed=sH.isDisturbed;na.isErrored=sH.isErrored;na.isReadable=sH.isReadable;na.isWritable=sH.isWritable;na.Readable=eH();for(let t of Zht(Jht)){let r=function(...n){if(new.target)throw egt();return na.Readable.from(Xht(e,this,n))};zSe=r;let e=Jht[t];tO(r,"name",{__proto__:null,value:e.name}),tO(r,"length",{__proto__:null,value:e.length}),tO(na.Readable.prototype,t,{__proto__:null,value:r,enumerable:!1,configurable:!0,writable:!0})}var zSe;for(let t of Zht(Yht)){let r=function(...o){if(new.target)throw egt();return Xht(e,this,o)};zSe=r;let e=Yht[t];tO(r,"name",{__proto__:null,value:e.name}),tO(r,"length",{__proto__:null,value:e.length}),tO(na.Readable.prototype,t,{__proto__:null,value:r,enumerable:!1,configurable:!0,writable:!0})}var zSe;na.Writable=vQ();na.Duplex=P_();na.Transform=xSe();na.PassThrough=OSe();na.pipeline=tgt;var{addAbortSignal:H_r}=Y3();na.addAbortSignal=H_r;na.finished=rgt;na.destroy=z_r;na.compose=B_r;na.setDefaultHighWaterMark=q_r;na.getDefaultHighWaterMark=U_r;tO(na,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return USe}});tO(tgt,Qht,{__proto__:null,enumerable:!0,get(){return USe.pipeline}});tO(rgt,Qht,{__proto__:null,enumerable:!0,get(){return USe.finished}});na.Stream=na;na._isUint8Array=function(e){return e instanceof Uint8Array};na._uint8ArrayToBuffer=function(e){return $_r.from(e.buffer,e.byteOffset,e.byteLength)}});var uH=v((imo,Os)=>{"use strict";var _l=qSe(),V_r=BSe(),W_r=_l.Readable.destroy;Os.exports=_l.Readable;Os.exports._uint8ArrayToBuffer=_l._uint8ArrayToBuffer;Os.exports._isUint8Array=_l._isUint8Array;Os.exports.isDisturbed=_l.isDisturbed;Os.exports.isErrored=_l.isErrored;Os.exports.isReadable=_l.isReadable;Os.exports.Readable=_l.Readable;Os.exports.Writable=_l.Writable;Os.exports.Duplex=_l.Duplex;Os.exports.Transform=_l.Transform;Os.exports.PassThrough=_l.PassThrough;Os.exports.addAbortSignal=_l.addAbortSignal;Os.exports.finished=_l.finished;Os.exports.destroy=_l.destroy;Os.exports.destroy=W_r;Os.exports.pipeline=_l.pipeline;Os.exports.compose=_l.compose;Object.defineProperty(_l,"promises",{configurable:!0,enumerable:!0,get(){return V_r}});Os.exports.Stream=_l.Stream;Os.exports.default=Os.exports});var I1=v((amo,ogt)=>{"use strict";ogt.exports=TypeError});var igt=v(()=>{});var fH=v((lmo,Ogt)=>{var QSe=typeof Map=="function"&&Map.prototype,HSe=Object.getOwnPropertyDescriptor&&QSe?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,IQ=QSe&&HSe&&typeof HSe.get=="function"?HSe.get:null,agt=QSe&&Map.prototype.forEach,exe=typeof Set=="function"&&Set.prototype,VSe=Object.getOwnPropertyDescriptor&&exe?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,MQ=exe&&VSe&&typeof VSe.get=="function"?VSe.get:null,sgt=exe&&Set.prototype.forEach,K_r=typeof WeakMap=="function"&&WeakMap.prototype,cH=K_r?WeakMap.prototype.has:null,G_r=typeof WeakSet=="function"&&WeakSet.prototype,dH=G_r?WeakSet.prototype.has:null,J_r=typeof WeakRef=="function"&&WeakRef.prototype,ugt=J_r?WeakRef.prototype.deref:null,Y_r=Boolean.prototype.valueOf,Z_r=Object.prototype.toString,X_r=Function.prototype.toString,Q_r=String.prototype.match,txe=String.prototype.slice,DT=String.prototype.replace,evr=String.prototype.toUpperCase,lgt=String.prototype.toLowerCase,bgt=RegExp.prototype.test,cgt=Array.prototype.concat,T_=Array.prototype.join,tvr=Array.prototype.slice,dgt=Math.floor,GSe=typeof BigInt=="function"?BigInt.prototype.valueOf:null,WSe=Object.getOwnPropertySymbols,JSe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,Ak=typeof Symbol=="function"&&typeof Symbol.iterator=="object",Ld=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===Ak||!0)?Symbol.toStringTag:null,_gt=Object.prototype.propertyIsEnumerable,fgt=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(t){return t.__proto__}:null);function pgt(t,e){if(t===1/0||t===-1/0||t!==t||t&&t>-1e3&&t<1e3||bgt.call(/e/,e))return e;var r=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof t=="number"){var n=t<0?-dgt(-t):dgt(t);if(n!==t){var o=String(n),i=txe.call(e,o.length+1);return DT.call(o,r,"$&_")+"."+DT.call(DT.call(i,/([0-9]{3})/g,"$&_"),/_$/,"")}}return DT.call(e,r,"$&_")}var YSe=igt(),mgt=YSe.custom,hgt=Sgt(mgt)?mgt:null,vgt={__proto__:null,double:'"',single:"'"},rvr={__proto__:null,double:/(["\\])/g,single:/(['\\])/g};Ogt.exports=function t(e,r,n,o){var i=r||{};if(rO(i,"quoteStyle")&&!rO(vgt,i.quoteStyle))throw new TypeError('option "quoteStyle" must be "single" or "double"');if(rO(i,"maxStringLength")&&(typeof i.maxStringLength=="number"?i.maxStringLength<0&&i.maxStringLength!==1/0:i.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var a=rO(i,"customInspect")?i.customInspect:!0;if(typeof a!="boolean"&&a!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(rO(i,"indent")&&i.indent!==null&&i.indent!=="	"&&!(parseInt(i.indent,10)===i.indent&&i.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(rO(i,"numericSeparator")&&typeof i.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var s=i.numericSeparator;if(typeof e>"u")return"undefined";if(e===null)return"null";if(typeof e=="boolean")return e?"true":"false";if(typeof e=="string")return Cgt(e,i);if(typeof e=="number"){if(e===0)return 1/0/e>0?"0":"-0";var u=String(e);return s?pgt(e,u):u}if(typeof e=="bigint"){var l=String(e)+"n";return s?pgt(e,l):l}var c=typeof i.depth>"u"?5:i.depth;if(typeof n>"u"&&(n=0),n>=c&&c>0&&typeof e=="object")return ZSe(e)?"[Array]":"[Object]";var d=vvr(i,n);if(typeof o>"u")o=[];else if(xgt(o,e)>=0)return"[Circular]";function f($,k,H){if(k&&(o=tvr.call(o),o.push(k)),H){var V={depth:i.depth};return rO(i,"quoteStyle")&&(V.quoteStyle=i.quoteStyle),t($,V,n+1,o)}return t($,i,n+1,o)}if(typeof e=="function"&&!ggt(e)){var p=dvr(e),m=AQ(e,f);return"[Function"+(p?": "+p:" (anonymous)")+"]"+(m.length>0?" { "+T_.call(m,", ")+" }":"")}if(Sgt(e)){var h=Ak?DT.call(String(e),/^(Symbol\(.*\))_[^)]*$/,"$1"):JSe.call(e);return typeof e=="object"&&!Ak?lH(h):h}if(yvr(e)){for(var b="<"+lgt.call(String(e.nodeName)),g=e.attributes||[],y=0;y<g.length;y++)b+=" "+g[y].name+"="+wgt(nvr(g[y].value),"double",i);return b+=">",e.childNodes&&e.childNodes.length&&(b+="..."),b+="</"+lgt.call(String(e.nodeName))+">",b}if(ZSe(e)){if(e.length===0)return"[]";var w=AQ(e,f);return d&&!_vr(w)?"["+XSe(w,d)+"]":"[ "+T_.call(w,", ")+" ]"}if(ivr(e)){var S=AQ(e,f);return!("cause"in Error.prototype)&&"cause"in e&&!_gt.call(e,"cause")?"{ ["+String(e)+"] "+T_.call(cgt.call("[cause]: "+f(e.cause),S),", ")+" }":S.length===0?"["+String(e)+"]":"{ ["+String(e)+"] "+T_.call(S,", ")+" }"}if(typeof e=="object"&&a){if(hgt&&typeof e[hgt]=="function"&&YSe)return YSe(e,{depth:c-n});if(a!=="symbol"&&typeof e.inspect=="function")return e.inspect()}if(fvr(e)){var C=[];return agt&&agt.call(e,function($,k){C.push(f(k,e,!0)+" => "+f($,e))}),ygt("Map",IQ.call(e),C,d)}if(hvr(e)){var P=[];return sgt&&sgt.call(e,function($){P.push(f($,e))}),ygt("Set",MQ.call(e),P,d)}if(pvr(e))return KSe("WeakMap");if(gvr(e))return KSe("WeakSet");if(mvr(e))return KSe("WeakRef");if(svr(e))return lH(f(Number(e)));if(lvr(e))return lH(f(GSe.call(e)));if(uvr(e))return lH(Y_r.call(e));if(avr(e))return lH(f(String(e)));if(typeof window<"u"&&e===window)return"{ [object Window] }";if(typeof globalThis<"u"&&e===globalThis||typeof window<"u"&&e===window)return"{ [object globalThis] }";if(!ovr(e)&&!ggt(e)){var E=AQ(e,f),A=fgt?fgt(e)===Object.prototype:e instanceof Object||e.constructor===Object,I=e instanceof Object?"":"null prototype",R=!A&&Ld&&Object(e)===e&&Ld in e?txe.call(LT(e),8,-1):I?"Object":"",j=A||typeof e.constructor!="function"?"":e.constructor.name?e.constructor.name+" ":"",N=j+(R||I?"["+T_.call(cgt.call([],R||[],I||[]),": ")+"] ":"");return E.length===0?N+"{}":d?N+"{"+XSe(E,d)+"}":N+"{ "+T_.call(E,", ")+" }"}return String(e)};function wgt(t,e,r){var n=r.quoteStyle||e,o=vgt[n];return o+t+o}function nvr(t){return DT.call(String(t),/"/g,"&quot;")}function ZSe(t){return LT(t)==="[object Array]"&&(!Ld||!(typeof t=="object"&&Ld in t))}function ovr(t){return LT(t)==="[object Date]"&&(!Ld||!(typeof t=="object"&&Ld in t))}function ggt(t){return LT(t)==="[object RegExp]"&&(!Ld||!(typeof t=="object"&&Ld in t))}function ivr(t){return LT(t)==="[object Error]"&&(!Ld||!(typeof t=="object"&&Ld in t))}function avr(t){return LT(t)==="[object String]"&&(!Ld||!(typeof t=="object"&&Ld in t))}function svr(t){return LT(t)==="[object Number]"&&(!Ld||!(typeof t=="object"&&Ld in t))}function uvr(t){return LT(t)==="[object Boolean]"&&(!Ld||!(typeof t=="object"&&Ld in t))}function Sgt(t){if(Ak)return t&&typeof t=="object"&&t instanceof Symbol;if(typeof t=="symbol")return!0;if(!t||typeof t!="object"||!JSe)return!1;try{return JSe.call(t),!0}catch{}return!1}function lvr(t){if(!t||typeof t!="object"||!GSe)return!1;try{return GSe.call(t),!0}catch{}return!1}var cvr=Object.prototype.hasOwnProperty||function(t){return t in this};function rO(t,e){return cvr.call(t,e)}function LT(t){return Z_r.call(t)}function dvr(t){if(t.name)return t.name;var e=Q_r.call(X_r.call(t),/^function\s*([\w$]+)/);return e?e[1]:null}function xgt(t,e){if(t.indexOf)return t.indexOf(e);for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1}function fvr(t){if(!IQ||!t||typeof t!="object")return!1;try{IQ.call(t);try{MQ.call(t)}catch{return!0}return t instanceof Map}catch{}return!1}function pvr(t){if(!cH||!t||typeof t!="object")return!1;try{cH.call(t,cH);try{dH.call(t,dH)}catch{return!0}return t instanceof WeakMap}catch{}return!1}function mvr(t){if(!ugt||!t||typeof t!="object")return!1;try{return ugt.call(t),!0}catch{}return!1}function hvr(t){if(!MQ||!t||typeof t!="object")return!1;try{MQ.call(t);try{IQ.call(t)}catch{return!0}return t instanceof Set}catch{}return!1}function gvr(t){if(!dH||!t||typeof t!="object")return!1;try{dH.call(t,dH);try{cH.call(t,cH)}catch{return!0}return t instanceof WeakSet}catch{}return!1}function yvr(t){return!t||typeof t!="object"?!1:typeof HTMLElement<"u"&&t instanceof HTMLElement?!0:typeof t.nodeName=="string"&&typeof t.getAttribute=="function"}function Cgt(t,e){if(t.length>e.maxStringLength){var r=t.length-e.maxStringLength,n="... "+r+" more character"+(r>1?"s":"");return Cgt(txe.call(t,0,e.maxStringLength),e)+n}var o=rvr[e.quoteStyle||"single"];o.lastIndex=0;var i=DT.call(DT.call(t,o,"\\$1"),/[\x00-\x1f]/g,bvr);return wgt(i,"single",e)}function bvr(t){var e=t.charCodeAt(0),r={8:"b",9:"t",10:"n",12:"f",13:"r"}[e];return r?"\\"+r:"\\x"+(e<16?"0":"")+evr.call(e.toString(16))}function lH(t){return"Object("+t+")"}function KSe(t){return t+" { ? }"}function ygt(t,e,r,n){var o=n?XSe(r,n):T_.call(r,", ");return t+" ("+e+") {"+o+"}"}function _vr(t){for(var e=0;e<t.length;e++)if(xgt(t[e],`
`)>=0)return!1;return!0}function vvr(t,e){var r;if(t.indent==="	")r="	";else if(typeof t.indent=="number"&&t.indent>0)r=T_.call(Array(t.indent+1)," ");else return null;return{base:r,prev:T_.call(Array(e+1),r)}}function XSe(t,e){if(t.length===0)return"";var r=`
`+e.prev+e.base;return r+T_.call(t,","+r)+`
`+e.prev}function AQ(t,e){var r=ZSe(t),n=[];if(r){n.length=t.length;for(var o=0;o<t.length;o++)n[o]=rO(t,o)?e(t[o],t):""}var i=typeof WSe=="function"?WSe(t):[],a;if(Ak){a={};for(var s=0;s<i.length;s++)a["$"+i[s]]=i[s]}for(var u in t)rO(t,u)&&(r&&String(Number(u))===u&&u<t.length||Ak&&a["$"+u]instanceof Symbol||(bgt.call(/[^\w$]/,u)?n.push(e(u,t)+": "+e(t[u],t)):n.push(u+": "+e(t[u],t))));if(typeof WSe=="function")for(var l=0;l<i.length;l++)_gt.call(t,i[l])&&n.push("["+e(i[l])+"]: "+e(t[i[l]],t));return n}});var Egt=v((cmo,Pgt)=>{"use strict";var wvr=fH(),Svr=I1(),RQ=function(t,e,r){for(var n=t,o;(o=n.next)!=null;n=o)if(o.key===e)return n.next=o.next,r||(o.next=t.next,t.next=o),o},xvr=function(t,e){if(t){var r=RQ(t,e);return r&&r.value}},Cvr=function(t,e,r){var n=RQ(t,e);n?n.value=r:t.next={key:e,next:t.next,value:r}},Ovr=function(t,e){return t?!!RQ(t,e):!1},Pvr=function(t,e){if(t)return RQ(t,e,!0)};Pgt.exports=function(){var e,r={assert:function(n){if(!r.has(n))throw new Svr("Side channel does not contain "+wvr(n))},delete:function(n){var o=e&&e.next,i=Pvr(e,n);return i&&o&&o===i&&(e=void 0),!!i},get:function(n){return xvr(e,n)},has:function(n){return Ovr(e,n)},set:function(n,o){e||(e={next:void 0}),Cvr(e,n,o)}};return r}});var rxe=v((dmo,Tgt)=>{"use strict";Tgt.exports=Object});var Igt=v((fmo,Agt)=>{"use strict";Agt.exports=Error});var Rgt=v((pmo,Mgt)=>{"use strict";Mgt.exports=EvalError});var Ngt=v((mmo,jgt)=>{"use strict";jgt.exports=RangeError});var Lgt=v((hmo,Dgt)=>{"use strict";Dgt.exports=ReferenceError});var kgt=v((gmo,Fgt)=>{"use strict";Fgt.exports=SyntaxError});var Bgt=v((ymo,$gt)=>{"use strict";$gt.exports=URIError});var Ugt=v((bmo,qgt)=>{"use strict";qgt.exports=Math.abs});var Hgt=v((_mo,zgt)=>{"use strict";zgt.exports=Math.floor});var Wgt=v((vmo,Vgt)=>{"use strict";Vgt.exports=Math.max});var Ggt=v((wmo,Kgt)=>{"use strict";Kgt.exports=Math.min});var Ygt=v((Smo,Jgt)=>{"use strict";Jgt.exports=Math.pow});var Xgt=v((xmo,Zgt)=>{"use strict";Zgt.exports=Math.round});var eyt=v((Cmo,Qgt)=>{"use strict";Qgt.exports=Number.isNaN||function(e){return e!==e}});var ryt=v((Omo,tyt)=>{"use strict";var Evr=eyt();tyt.exports=function(e){return Evr(e)||e===0?e:e<0?-1:1}});var oyt=v((Pmo,nyt)=>{"use strict";nyt.exports=Object.getOwnPropertyDescriptor});var nxe=v((Emo,iyt)=>{"use strict";var jQ=oyt();if(jQ)try{jQ([],"length")}catch{jQ=null}iyt.exports=jQ});var syt=v((Tmo,ayt)=>{"use strict";var NQ=Object.defineProperty||!1;if(NQ)try{NQ({},"a",{value:1})}catch{NQ=!1}ayt.exports=NQ});var lyt=v((Amo,uyt)=>{"use strict";uyt.exports=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},r=Symbol("test"),n=Object(r);if(typeof r=="string"||Object.prototype.toString.call(r)!=="[object Symbol]"||Object.prototype.toString.call(n)!=="[object Symbol]")return!1;var o=42;e[r]=o;for(var i in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var a=Object.getOwnPropertySymbols(e);if(a.length!==1||a[0]!==r||!Object.prototype.propertyIsEnumerable.call(e,r))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var s=Object.getOwnPropertyDescriptor(e,r);if(s.value!==o||s.enumerable!==!0)return!1}return!0}});var fyt=v((Imo,dyt)=>{"use strict";var cyt=typeof Symbol<"u"&&Symbol,Tvr=lyt();dyt.exports=function(){return typeof cyt!="function"||typeof Symbol!="function"||typeof cyt("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:Tvr()}});var oxe=v((Mmo,pyt)=>{"use strict";pyt.exports=typeof Reflect<"u"&&Reflect.getPrototypeOf||null});var ixe=v((Rmo,myt)=>{"use strict";var Avr=rxe();myt.exports=Avr.getPrototypeOf||null});var yyt=v((jmo,gyt)=>{"use strict";var Ivr="Function.prototype.bind called on incompatible ",Mvr=Object.prototype.toString,Rvr=Math.max,jvr="[object Function]",hyt=function(e,r){for(var n=[],o=0;o<e.length;o+=1)n[o]=e[o];for(var i=0;i<r.length;i+=1)n[i+e.length]=r[i];return n},Nvr=function(e,r){for(var n=[],o=r||0,i=0;o<e.length;o+=1,i+=1)n[i]=e[o];return n},Dvr=function(t,e){for(var r="",n=0;n<t.length;n+=1)r+=t[n],n+1<t.length&&(r+=e);return r};gyt.exports=function(e){var r=this;if(typeof r!="function"||Mvr.apply(r)!==jvr)throw new TypeError(Ivr+r);for(var n=Nvr(arguments,1),o,i=function(){if(this instanceof o){var c=r.apply(this,hyt(n,arguments));return Object(c)===c?c:this}return r.apply(e,hyt(n,arguments))},a=Rvr(0,r.length-n.length),s=[],u=0;u<a;u++)s[u]="$"+u;if(o=Function("binder","return function ("+Dvr(s,",")+"){ return binder.apply(this,arguments); }")(i),r.prototype){var l=function(){};l.prototype=r.prototype,o.prototype=new l,l.prototype=null}return o}});var pH=v((Nmo,byt)=>{"use strict";var Lvr=yyt();byt.exports=Function.prototype.bind||Lvr});var DQ=v((Dmo,_yt)=>{"use strict";_yt.exports=Function.prototype.call});var axe=v((Lmo,vyt)=>{"use strict";vyt.exports=Function.prototype.apply});var Syt=v((Fmo,wyt)=>{"use strict";wyt.exports=typeof Reflect<"u"&&Reflect&&Reflect.apply});var Cyt=v((kmo,xyt)=>{"use strict";var Fvr=pH(),kvr=axe(),$vr=DQ(),Bvr=Syt();xyt.exports=Bvr||Fvr.call($vr,kvr)});var sxe=v(($mo,Oyt)=>{"use strict";var qvr=pH(),Uvr=I1(),zvr=DQ(),Hvr=Cyt();Oyt.exports=function(e){if(e.length<1||typeof e[0]!="function")throw new Uvr("a function is required");return Hvr(qvr,zvr,e)}});var Myt=v((Bmo,Iyt)=>{"use strict";var Vvr=sxe(),Pyt=nxe(),Tyt;try{Tyt=[].__proto__===Array.prototype}catch(t){if(!t||typeof t!="object"||!("code"in t)||t.code!=="ERR_PROTO_ACCESS")throw t}var uxe=!!Tyt&&Pyt&&Pyt(Object.prototype,"__proto__"),Ayt=Object,Eyt=Ayt.getPrototypeOf;Iyt.exports=uxe&&typeof uxe.get=="function"?Vvr([uxe.get]):typeof Eyt=="function"?function(e){return Eyt(e==null?e:Ayt(e))}:!1});var Lyt=v((qmo,Dyt)=>{"use strict";var Ryt=oxe(),jyt=ixe(),Nyt=Myt();Dyt.exports=Ryt?function(e){return Ryt(e)}:jyt?function(e){if(!e||typeof e!="object"&&typeof e!="function")throw new TypeError("getProto: not an object");return jyt(e)}:Nyt?function(e){return Nyt(e)}:null});var kyt=v((Umo,Fyt)=>{"use strict";var Wvr=Function.prototype.call,Kvr=Object.prototype.hasOwnProperty,Gvr=pH();Fyt.exports=Gvr.call(Wvr,Kvr)});var kQ=v((zmo,Hyt)=>{"use strict";var In,Jvr=rxe(),Yvr=Igt(),Zvr=Rgt(),Xvr=Ngt(),Qvr=Lgt(),jk=kgt(),Rk=I1(),ewr=Bgt(),twr=Ugt(),rwr=Hgt(),nwr=Wgt(),owr=Ggt(),iwr=Ygt(),awr=Xgt(),swr=ryt(),Uyt=Function,lxe=function(t){try{return Uyt('"use strict"; return ('+t+").constructor;")()}catch{}},mH=nxe(),uwr=syt(),cxe=function(){throw new Rk},lwr=mH?function(){try{return arguments.callee,cxe}catch{try{return mH(arguments,"callee").get}catch{return cxe}}}():cxe,Ik=fyt()(),Bl=Lyt(),cwr=ixe(),dwr=oxe(),zyt=axe(),hH=DQ(),Mk={},fwr=typeof Uint8Array>"u"||!Bl?In:Bl(Uint8Array),M1={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?In:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?In:ArrayBuffer,"%ArrayIteratorPrototype%":Ik&&Bl?Bl([][Symbol.iterator]()):In,"%AsyncFromSyncIteratorPrototype%":In,"%AsyncFunction%":Mk,"%AsyncGenerator%":Mk,"%AsyncGeneratorFunction%":Mk,"%AsyncIteratorPrototype%":Mk,"%Atomics%":typeof Atomics>"u"?In:Atomics,"%BigInt%":typeof BigInt>"u"?In:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?In:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?In:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?In:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Yvr,"%eval%":eval,"%EvalError%":Zvr,"%Float32Array%":typeof Float32Array>"u"?In:Float32Array,"%Float64Array%":typeof Float64Array>"u"?In:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?In:FinalizationRegistry,"%Function%":Uyt,"%GeneratorFunction%":Mk,"%Int8Array%":typeof Int8Array>"u"?In:Int8Array,"%Int16Array%":typeof Int16Array>"u"?In:Int16Array,"%Int32Array%":typeof Int32Array>"u"?In:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":Ik&&Bl?Bl(Bl([][Symbol.iterator]())):In,"%JSON%":typeof JSON=="object"?JSON:In,"%Map%":typeof Map>"u"?In:Map,"%MapIteratorPrototype%":typeof Map>"u"||!Ik||!Bl?In:Bl(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Jvr,"%Object.getOwnPropertyDescriptor%":mH,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?In:Promise,"%Proxy%":typeof Proxy>"u"?In:Proxy,"%RangeError%":Xvr,"%ReferenceError%":Qvr,"%Reflect%":typeof Reflect>"u"?In:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?In:Set,"%SetIteratorPrototype%":typeof Set>"u"||!Ik||!Bl?In:Bl(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?In:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":Ik&&Bl?Bl(""[Symbol.iterator]()):In,"%Symbol%":Ik?Symbol:In,"%SyntaxError%":jk,"%ThrowTypeError%":lwr,"%TypedArray%":fwr,"%TypeError%":Rk,"%Uint8Array%":typeof Uint8Array>"u"?In:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?In:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?In:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?In:Uint32Array,"%URIError%":ewr,"%WeakMap%":typeof WeakMap>"u"?In:WeakMap,"%WeakRef%":typeof WeakRef>"u"?In:WeakRef,"%WeakSet%":typeof WeakSet>"u"?In:WeakSet,"%Function.prototype.call%":hH,"%Function.prototype.apply%":zyt,"%Object.defineProperty%":uwr,"%Object.getPrototypeOf%":cwr,"%Math.abs%":twr,"%Math.floor%":rwr,"%Math.max%":nwr,"%Math.min%":owr,"%Math.pow%":iwr,"%Math.round%":awr,"%Math.sign%":swr,"%Reflect.getPrototypeOf%":dwr};if(Bl)try{null.error}catch(t){$yt=Bl(Bl(t)),M1["%Error.prototype%"]=$yt}var $yt,pwr=function t(e){var r;if(e==="%AsyncFunction%")r=lxe("async function () {}");else if(e==="%GeneratorFunction%")r=lxe("function* () {}");else if(e==="%AsyncGeneratorFunction%")r=lxe("async function* () {}");else if(e==="%AsyncGenerator%"){var n=t("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if(e==="%AsyncIteratorPrototype%"){var o=t("%AsyncGenerator%");o&&Bl&&(r=Bl(o.prototype))}return M1[e]=r,r},Byt={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},gH=pH(),LQ=kyt(),mwr=gH.call(hH,Array.prototype.concat),hwr=gH.call(zyt,Array.prototype.splice),qyt=gH.call(hH,String.prototype.replace),FQ=gH.call(hH,String.prototype.slice),gwr=gH.call(hH,RegExp.prototype.exec),ywr=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,bwr=/\\(\\)?/g,_wr=function(e){var r=FQ(e,0,1),n=FQ(e,-1);if(r==="%"&&n!=="%")throw new jk("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&r!=="%")throw new jk("invalid intrinsic syntax, expected opening `%`");var o=[];return qyt(e,ywr,function(i,a,s,u){o[o.length]=s?qyt(u,bwr,"$1"):a||i}),o},vwr=function(e,r){var n=e,o;if(LQ(Byt,n)&&(o=Byt[n],n="%"+o[0]+"%"),LQ(M1,n)){var i=M1[n];if(i===Mk&&(i=pwr(n)),typeof i>"u"&&!r)throw new Rk("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:o,name:n,value:i}}throw new jk("intrinsic "+e+" does not exist!")};Hyt.exports=function(e,r){if(typeof e!="string"||e.length===0)throw new Rk("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof r!="boolean")throw new Rk('"allowMissing" argument must be a boolean');if(gwr(/^%?[^%]*%?$/,e)===null)throw new jk("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=_wr(e),o=n.length>0?n[0]:"",i=vwr("%"+o+"%",r),a=i.name,s=i.value,u=!1,l=i.alias;l&&(o=l[0],hwr(n,mwr([0,1],l)));for(var c=1,d=!0;c<n.length;c+=1){var f=n[c],p=FQ(f,0,1),m=FQ(f,-1);if((p==='"'||p==="'"||p==="`"||m==='"'||m==="'"||m==="`")&&p!==m)throw new jk("property names with quotes must have matching quotes");if((f==="constructor"||!d)&&(u=!0),o+="."+f,a="%"+o+"%",LQ(M1,a))s=M1[a];else if(s!=null){if(!(f in s)){if(!r)throw new Rk("base intrinsic for "+e+" exists, but the property is not available.");return}if(mH&&c+1>=n.length){var h=mH(s,f);d=!!h,d&&"get"in h&&!("originalValue"in h.get)?s=h.get:s=s[f]}else d=LQ(s,f),s=s[f];d&&!u&&(M1[a]=s)}}return s}});var dxe=v((Hmo,Kyt)=>{"use strict";var Vyt=kQ(),Wyt=sxe(),wwr=Wyt([Vyt("%String.prototype.indexOf%")]);Kyt.exports=function(e,r){var n=Vyt(e,!!r);return typeof n=="function"&&wwr(e,".prototype.")>-1?Wyt([n]):n}});var fxe=v((Vmo,Jyt)=>{"use strict";var Swr=kQ(),yH=dxe(),xwr=fH(),Cwr=I1(),Gyt=Swr("%Map%",!0),Owr=yH("Map.prototype.get",!0),Pwr=yH("Map.prototype.set",!0),Ewr=yH("Map.prototype.has",!0),Twr=yH("Map.prototype.delete",!0),Awr=yH("Map.prototype.size",!0);Jyt.exports=!!Gyt&&function(){var e,r={assert:function(n){if(!r.has(n))throw new Cwr("Side channel does not contain "+xwr(n))},delete:function(n){if(e){var o=Twr(e,n);return Awr(e)===0&&(e=void 0),o}return!1},get:function(n){if(e)return Owr(e,n)},has:function(n){return e?Ewr(e,n):!1},set:function(n,o){e||(e=new Gyt),Pwr(e,n,o)}};return r}});var Zyt=v((Wmo,Yyt)=>{"use strict";var Iwr=kQ(),BQ=dxe(),Mwr=fH(),$Q=fxe(),Rwr=I1(),Nk=Iwr("%WeakMap%",!0),jwr=BQ("WeakMap.prototype.get",!0),Nwr=BQ("WeakMap.prototype.set",!0),Dwr=BQ("WeakMap.prototype.has",!0),Lwr=BQ("WeakMap.prototype.delete",!0);Yyt.exports=Nk?function(){var e,r,n={assert:function(o){if(!n.has(o))throw new Rwr("Side channel does not contain "+Mwr(o))},delete:function(o){if(Nk&&o&&(typeof o=="object"||typeof o=="function")){if(e)return Lwr(e,o)}else if($Q&&r)return r.delete(o);return!1},get:function(o){return Nk&&o&&(typeof o=="object"||typeof o=="function")&&e?jwr(e,o):r&&r.get(o)},has:function(o){return Nk&&o&&(typeof o=="object"||typeof o=="function")&&e?Dwr(e,o):!!r&&r.has(o)},set:function(o,i){Nk&&o&&(typeof o=="object"||typeof o=="function")?(e||(e=new Nk),Nwr(e,o,i)):$Q&&(r||(r=$Q()),r.set(o,i))}};return n}:$Q});var Qyt=v((Kmo,Xyt)=>{"use strict";var Fwr=I1(),kwr=fH(),$wr=Egt(),Bwr=fxe(),qwr=Zyt(),Uwr=qwr||Bwr||$wr;Xyt.exports=function(){var e,r={assert:function(n){if(!r.has(n))throw new Fwr("Side channel does not contain "+kwr(n))},delete:function(n){return!!e&&e.delete(n)},get:function(n){return e&&e.get(n)},has:function(n){return!!e&&e.has(n)},set:function(n,o){e||(e=Uwr()),e.set(n,o)}};return r}});var qQ=v((Gmo,ebt)=>{"use strict";var zwr=String.prototype.replace,Hwr=/%20/g,pxe={RFC1738:"RFC1738",RFC3986:"RFC3986"};ebt.exports={default:pxe.RFC3986,formatters:{RFC1738:function(t){return zwr.call(t,Hwr,"+")},RFC3986:function(t){return String(t)}},RFC1738:pxe.RFC1738,RFC3986:pxe.RFC3986}});var hxe=v((Jmo,rbt)=>{"use strict";var Vwr=qQ(),mxe=Object.prototype.hasOwnProperty,R1=Array.isArray,A_=function(){for(var t=[],e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t}(),Wwr=function(e){for(;e.length>1;){var r=e.pop(),n=r.obj[r.prop];if(R1(n)){for(var o=[],i=0;i<n.length;++i)typeof n[i]<"u"&&o.push(n[i]);r.obj[r.prop]=o}}},tbt=function(e,r){for(var n=r&&r.plainObjects?Object.create(null):{},o=0;o<e.length;++o)typeof e[o]<"u"&&(n[o]=e[o]);return n},Kwr=function t(e,r,n){if(!r)return e;if(typeof r!="object"){if(R1(e))e.push(r);else if(e&&typeof e=="object")(n&&(n.plainObjects||n.allowPrototypes)||!mxe.call(Object.prototype,r))&&(e[r]=!0);else return[e,r];return e}if(!e||typeof e!="object")return[e].concat(r);var o=e;return R1(e)&&!R1(r)&&(o=tbt(e,n)),R1(e)&&R1(r)?(r.forEach(function(i,a){if(mxe.call(e,a)){var s=e[a];s&&typeof s=="object"&&i&&typeof i=="object"?e[a]=t(s,i,n):e.push(i)}else e[a]=i}),e):Object.keys(r).reduce(function(i,a){var s=r[a];return mxe.call(i,a)?i[a]=t(i[a],s,n):i[a]=s,i},o)},Gwr=function(e,r){return Object.keys(r).reduce(function(n,o){return n[o]=r[o],n},e)},Jwr=function(t,e,r){var n=t.replace(/\+/g," ");if(r==="iso-8859-1")return n.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(n)}catch{return n}},Ywr=function(e,r,n,o,i){if(e.length===0)return e;var a=e;if(typeof e=="symbol"?a=Symbol.prototype.toString.call(e):typeof e!="string"&&(a=String(e)),n==="iso-8859-1")return escape(a).replace(/%u[0-9a-f]{4}/gi,function(c){return"%26%23"+parseInt(c.slice(2),16)+"%3B"});for(var s="",u=0;u<a.length;++u){var l=a.charCodeAt(u);if(l===45||l===46||l===95||l===126||l>=48&&l<=57||l>=65&&l<=90||l>=97&&l<=122||i===Vwr.RFC1738&&(l===40||l===41)){s+=a.charAt(u);continue}if(l<128){s=s+A_[l];continue}if(l<2048){s=s+(A_[192|l>>6]+A_[128|l&63]);continue}if(l<55296||l>=57344){s=s+(A_[224|l>>12]+A_[128|l>>6&63]+A_[128|l&63]);continue}u+=1,l=65536+((l&1023)<<10|a.charCodeAt(u)&1023),s+=A_[240|l>>18]+A_[128|l>>12&63]+A_[128|l>>6&63]+A_[128|l&63]}return s},Zwr=function(e){for(var r=[{obj:{o:e},prop:"o"}],n=[],o=0;o<r.length;++o)for(var i=r[o],a=i.obj[i.prop],s=Object.keys(a),u=0;u<s.length;++u){var l=s[u],c=a[l];typeof c=="object"&&c!==null&&n.indexOf(c)===-1&&(r.push({obj:a,prop:l}),n.push(c))}return Wwr(r),e},Xwr=function(e){return Object.prototype.toString.call(e)==="[object RegExp]"},Qwr=function(e){return!e||typeof e!="object"?!1:!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},e0r=function(e,r){return[].concat(e,r)},t0r=function(e,r){if(R1(e)){for(var n=[],o=0;o<e.length;o+=1)n.push(r(e[o]));return n}return r(e)};rbt.exports={arrayToObject:tbt,assign:Gwr,combine:e0r,compact:Zwr,decode:Jwr,encode:Ywr,isBuffer:Qwr,isRegExp:Xwr,maybeMap:t0r,merge:Kwr}});var ubt=v((Ymo,sbt)=>{"use strict";var ibt=Qyt(),UQ=hxe(),bH=qQ(),r0r=Object.prototype.hasOwnProperty,nbt={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,r){return e+"["+r+"]"},repeat:function(e){return e}},nO=Array.isArray,n0r=Array.prototype.push,abt=function(t,e){n0r.apply(t,nO(e)?e:[e])},o0r=Date.prototype.toISOString,obt=bH.default,Fd={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:UQ.encode,encodeValuesOnly:!1,format:obt,formatter:bH.formatters[obt],indices:!1,serializeDate:function(e){return o0r.call(e)},skipNulls:!1,strictNullHandling:!1},i0r=function(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"||typeof e=="symbol"||typeof e=="bigint"},gxe={},a0r=function t(e,r,n,o,i,a,s,u,l,c,d,f,p,m,h,b){for(var g=e,y=b,w=0,S=!1;(y=y.get(gxe))!==void 0&&!S;){var C=y.get(e);if(w+=1,typeof C<"u"){if(C===w)throw new RangeError("Cyclic object value");S=!0}typeof y.get(gxe)>"u"&&(w=0)}if(typeof u=="function"?g=u(r,g):g instanceof Date?g=d(g):n==="comma"&&nO(g)&&(g=UQ.maybeMap(g,function(V){return V instanceof Date?d(V):V})),g===null){if(i)return s&&!m?s(r,Fd.encoder,h,"key",f):r;g=""}if(i0r(g)||UQ.isBuffer(g)){if(s){var P=m?r:s(r,Fd.encoder,h,"key",f);return[p(P)+"="+p(s(g,Fd.encoder,h,"value",f))]}return[p(r)+"="+p(String(g))]}var E=[];if(typeof g>"u")return E;var A;if(n==="comma"&&nO(g))m&&s&&(g=UQ.maybeMap(g,s)),A=[{value:g.length>0?g.join(",")||null:void 0}];else if(nO(u))A=u;else{var I=Object.keys(g);A=l?I.sort(l):I}for(var R=o&&nO(g)&&g.length===1?r+"[]":r,j=0;j<A.length;++j){var N=A[j],$=typeof N=="object"&&typeof N.value<"u"?N.value:g[N];if(!(a&&$===null)){var k=nO(g)?typeof n=="function"?n(R,N):R:R+(c?"."+N:"["+N+"]");b.set(e,w);var H=ibt();H.set(gxe,b),abt(E,t($,k,n,o,i,a,n==="comma"&&m&&nO(g)?null:s,u,l,c,d,f,p,m,h,H))}}return E},s0r=function(e){if(!e)return Fd;if(e.encoder!==null&&typeof e.encoder<"u"&&typeof e.encoder!="function")throw new TypeError("Encoder has to be a function.");var r=e.charset||Fd.charset;if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var n=bH.default;if(typeof e.format<"u"){if(!r0r.call(bH.formatters,e.format))throw new TypeError("Unknown format option provided.");n=e.format}var o=bH.formatters[n],i=Fd.filter;return(typeof e.filter=="function"||nO(e.filter))&&(i=e.filter),{addQueryPrefix:typeof e.addQueryPrefix=="boolean"?e.addQueryPrefix:Fd.addQueryPrefix,allowDots:typeof e.allowDots>"u"?Fd.allowDots:!!e.allowDots,charset:r,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:Fd.charsetSentinel,delimiter:typeof e.delimiter>"u"?Fd.delimiter:e.delimiter,encode:typeof e.encode=="boolean"?e.encode:Fd.encode,encoder:typeof e.encoder=="function"?e.encoder:Fd.encoder,encodeValuesOnly:typeof e.encodeValuesOnly=="boolean"?e.encodeValuesOnly:Fd.encodeValuesOnly,filter:i,format:n,formatter:o,serializeDate:typeof e.serializeDate=="function"?e.serializeDate:Fd.serializeDate,skipNulls:typeof e.skipNulls=="boolean"?e.skipNulls:Fd.skipNulls,sort:typeof e.sort=="function"?e.sort:null,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:Fd.strictNullHandling}};sbt.exports=function(t,e){var r=t,n=s0r(e),o,i;typeof n.filter=="function"?(i=n.filter,r=i("",r)):nO(n.filter)&&(i=n.filter,o=i);var a=[];if(typeof r!="object"||r===null)return"";var s;e&&e.arrayFormat in nbt?s=e.arrayFormat:e&&"indices"in e?s=e.indices?"indices":"repeat":s="indices";var u=nbt[s];if(e&&"commaRoundTrip"in e&&typeof e.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var l=u==="comma"&&e&&e.commaRoundTrip;o||(o=Object.keys(r)),n.sort&&o.sort(n.sort);for(var c=ibt(),d=0;d<o.length;++d){var f=o[d];n.skipNulls&&r[f]===null||abt(a,a0r(r[f],f,u,l,n.strictNullHandling,n.skipNulls,n.encode?n.encoder:null,n.filter,n.sort,n.allowDots,n.serializeDate,n.format,n.formatter,n.encodeValuesOnly,n.charset,c))}var p=a.join(n.delimiter),m=n.addQueryPrefix===!0?"?":"";return n.charsetSentinel&&(n.charset==="iso-8859-1"?m+="utf8=%26%2310003%3B&":m+="utf8=%E2%9C%93&"),p.length>0?m+p:""}});var dbt=v((Zmo,cbt)=>{"use strict";var Dk=hxe(),yxe=Object.prototype.hasOwnProperty,u0r=Array.isArray,ql={allowDots:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:Dk.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},l0r=function(t){return t.replace(/&#(\d+);/g,function(e,r){return String.fromCharCode(parseInt(r,10))})},lbt=function(t,e){return t&&typeof t=="string"&&e.comma&&t.indexOf(",")>-1?t.split(","):t},c0r="utf8=%26%2310003%3B",d0r="utf8=%E2%9C%93",f0r=function(e,r){var n={__proto__:null},o=r.ignoreQueryPrefix?e.replace(/^\?/,""):e,i=r.parameterLimit===1/0?void 0:r.parameterLimit,a=o.split(r.delimiter,i),s=-1,u,l=r.charset;if(r.charsetSentinel)for(u=0;u<a.length;++u)a[u].indexOf("utf8=")===0&&(a[u]===d0r?l="utf-8":a[u]===c0r&&(l="iso-8859-1"),s=u,u=a.length);for(u=0;u<a.length;++u)if(u!==s){var c=a[u],d=c.indexOf("]="),f=d===-1?c.indexOf("="):d+1,p,m;f===-1?(p=r.decoder(c,ql.decoder,l,"key"),m=r.strictNullHandling?null:""):(p=r.decoder(c.slice(0,f),ql.decoder,l,"key"),m=Dk.maybeMap(lbt(c.slice(f+1),r),function(h){return r.decoder(h,ql.decoder,l,"value")})),m&&r.interpretNumericEntities&&l==="iso-8859-1"&&(m=l0r(m)),c.indexOf("[]=")>-1&&(m=u0r(m)?[m]:m),yxe.call(n,p)?n[p]=Dk.combine(n[p],m):n[p]=m}return n},p0r=function(t,e,r,n){for(var o=n?e:lbt(e,r),i=t.length-1;i>=0;--i){var a,s=t[i];if(s==="[]"&&r.parseArrays)a=[].concat(o);else{a=r.plainObjects?Object.create(null):{};var u=s.charAt(0)==="["&&s.charAt(s.length-1)==="]"?s.slice(1,-1):s,l=parseInt(u,10);!r.parseArrays&&u===""?a={0:o}:!isNaN(l)&&s!==u&&String(l)===u&&l>=0&&r.parseArrays&&l<=r.arrayLimit?(a=[],a[l]=o):u!=="__proto__"&&(a[u]=o)}o=a}return o},m0r=function(e,r,n,o){if(e){var i=n.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,a=/(\[[^[\]]*])/,s=/(\[[^[\]]*])/g,u=n.depth>0&&a.exec(i),l=u?i.slice(0,u.index):i,c=[];if(l){if(!n.plainObjects&&yxe.call(Object.prototype,l)&&!n.allowPrototypes)return;c.push(l)}for(var d=0;n.depth>0&&(u=s.exec(i))!==null&&d<n.depth;){if(d+=1,!n.plainObjects&&yxe.call(Object.prototype,u[1].slice(1,-1))&&!n.allowPrototypes)return;c.push(u[1])}return u&&c.push("["+i.slice(u.index)+"]"),p0r(c,r,n,o)}},h0r=function(e){if(!e)return ql;if(e.decoder!==null&&e.decoder!==void 0&&typeof e.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var r=typeof e.charset>"u"?ql.charset:e.charset;return{allowDots:typeof e.allowDots>"u"?ql.allowDots:!!e.allowDots,allowPrototypes:typeof e.allowPrototypes=="boolean"?e.allowPrototypes:ql.allowPrototypes,allowSparse:typeof e.allowSparse=="boolean"?e.allowSparse:ql.allowSparse,arrayLimit:typeof e.arrayLimit=="number"?e.arrayLimit:ql.arrayLimit,charset:r,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:ql.charsetSentinel,comma:typeof e.comma=="boolean"?e.comma:ql.comma,decoder:typeof e.decoder=="function"?e.decoder:ql.decoder,delimiter:typeof e.delimiter=="string"||Dk.isRegExp(e.delimiter)?e.delimiter:ql.delimiter,depth:typeof e.depth=="number"||e.depth===!1?+e.depth:ql.depth,ignoreQueryPrefix:e.ignoreQueryPrefix===!0,interpretNumericEntities:typeof e.interpretNumericEntities=="boolean"?e.interpretNumericEntities:ql.interpretNumericEntities,parameterLimit:typeof e.parameterLimit=="number"?e.parameterLimit:ql.parameterLimit,parseArrays:e.parseArrays!==!1,plainObjects:typeof e.plainObjects=="boolean"?e.plainObjects:ql.plainObjects,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:ql.strictNullHandling}};cbt.exports=function(t,e){var r=h0r(e);if(t===""||t===null||typeof t>"u")return r.plainObjects?Object.create(null):{};for(var n=typeof t=="string"?f0r(t,r):t,o=r.plainObjects?Object.create(null):{},i=Object.keys(n),a=0;a<i.length;++a){var s=i[a],u=m0r(s,n[s],r,typeof t=="string");o=Dk.merge(o,u,r)}return r.allowSparse===!0?o:Dk.compact(o)}});var pbt=v((Xmo,fbt)=>{"use strict";var g0r=ubt(),y0r=dbt(),b0r=qQ();fbt.exports={formats:b0r,parse:y0r,stringify:g0r}});var mbt=v(Lk=>{"use strict";var _0r=Lk&&Lk.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Lk,"__esModule",{value:!0});Lk.createRequestUrl=void 0;var v0r=_0r(pbt());function w0r(t,e){return Object.keys(e??{}).length>0?`${t}?${v0r.default.stringify(e,{arrayFormat:"repeat"})}`:t}Lk.createRequestUrl=w0r});var ybt=v(zQ=>{"use strict";var bxe,_xe,vxe,wxe,Sxe;Object.defineProperty(zQ,"__esModule",{value:!0});zQ.RUNTIME=void 0;var S0r=typeof window<"u"&&typeof window.document<"u",x0r=typeof self=="object"&&typeof self?.importScripts=="function"&&(((bxe=self.constructor)===null||bxe===void 0?void 0:bxe.name)==="DedicatedWorkerGlobalScope"||((_xe=self.constructor)===null||_xe===void 0?void 0:_xe.name)==="ServiceWorkerGlobalScope"||((vxe=self.constructor)===null||vxe===void 0?void 0:vxe.name)==="SharedWorkerGlobalScope"),hbt=typeof Deno<"u"&&typeof Deno.version<"u"&&typeof Deno.version.deno<"u",gbt=typeof Bun<"u"&&typeof Bun.version<"u",C0r=typeof process<"u"&&!!process.version&&!!(!((wxe=process.versions)===null||wxe===void 0)&&wxe.node)&&!hbt&&!gbt,O0r=typeof navigator<"u"&&navigator?.product==="ReactNative",P0r=typeof globalThis<"u"&&((Sxe=globalThis?.navigator)===null||Sxe===void 0?void 0:Sxe.userAgent)==="Cloudflare-Workers";zQ.RUNTIME=E0r();function E0r(){return S0r?{type:"browser",version:window.navigator.userAgent}:P0r?{type:"workerd"}:x0r?{type:"web-worker"}:hbt?{type:"deno",version:Deno.version.deno}:gbt?{type:"bun",version:Bun.version}:C0r?{type:"node",version:process.versions.node,parsedVersion:Number(process.versions.node.split(".")[0])}:O0r?{type:"react-native"}:{type:"unknown"}}});var Fk=v(HQ=>{"use strict";Object.defineProperty(HQ,"__esModule",{value:!0});HQ.RUNTIME=void 0;var T0r=ybt();Object.defineProperty(HQ,"RUNTIME",{enumerable:!0,get:function(){return T0r.RUNTIME}})});var xxe=v((kk,bbt)=>{"use strict";var A0r=function(){if(typeof self<"u")return self;if(typeof window<"u"||typeof window<"u")return window;throw new Error("unable to locate global object")},j1=A0r();bbt.exports=kk=j1.fetch;j1.fetch&&(kk.default=j1.fetch.bind(j1));kk.Headers=j1.Headers;kk.Request=j1.Request;kk.Response=j1.Response});var vbt=v(zh=>{"use strict";var I0r=zh&&zh.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),M0r=zh&&zh.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),_bt=zh&&zh.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&I0r(e,t,r);return M0r(e,t),e},R0r=zh&&zh.__awaiter||function(t,e,r,n){function o(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function s(c){try{l(n.next(c))}catch(d){a(d)}}function u(c){try{l(n.throw(c))}catch(d){a(d)}}function l(c){c.done?i(c.value):o(c.value).then(s,u)}l((n=n.apply(t,e||[])).next())})};Object.defineProperty(zh,"__esModule",{value:!0});zh.getFetchFn=void 0;var VQ=Fk();function j0r(){return R0r(this,void 0,void 0,function*(){return VQ.RUNTIME.type==="node"&&VQ.RUNTIME.parsedVersion!=null&&VQ.RUNTIME.parsedVersion>=18?fetch:VQ.RUNTIME.type==="node"?(yield Promise.resolve().then(()=>_bt(xxe()))).default:typeof fetch=="function"?fetch:(yield Promise.resolve().then(()=>_bt(xxe()))).default})}zh.getFetchFn=j0r});var wbt=v($k=>{"use strict";var N0r=$k&&$k.__awaiter||function(t,e,r,n){function o(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function s(c){try{l(n.next(c))}catch(d){a(d)}}function u(c){try{l(n.throw(c))}catch(d){a(d)}}function l(c){c.done?i(c.value):o(c.value).then(s,u)}l((n=n.apply(t,e||[])).next())})};Object.defineProperty($k,"__esModule",{value:!0});$k.getRequestBody=void 0;function D0r({body:t,type:e}){return N0r(this,void 0,void 0,function*(){return e.includes("json")?JSON.stringify(t):t})}$k.getRequestBody=D0r});var Sbt=v(Bk=>{"use strict";var by=Bk&&Bk.__awaiter||function(t,e,r,n){function o(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function s(c){try{l(n.next(c))}catch(d){a(d)}}function u(c){try{l(n.throw(c))}catch(d){a(d)}}function l(c){c.done?i(c.value):o(c.value).then(s,u)}l((n=n.apply(t,e||[])).next())})};Object.defineProperty(Bk,"__esModule",{value:!0});Bk.Node18UniversalStreamWrapper=void 0;var Cxe=class t{constructor(e){this.readableStream=e,this.reader=this.readableStream.getReader(),this.events={data:[],end:[],error:[],readable:[],close:[],pause:[],resume:[]},this.paused=!1,this.resumeCallback=null,this.encoding=null}on(e,r){var n;(n=this.events[e])===null||n===void 0||n.push(r)}off(e,r){var n;this.events[e]=(n=this.events[e])===null||n===void 0?void 0:n.filter(o=>o!==r)}pipe(e){return this.on("data",r=>by(this,void 0,void 0,function*(){if(e instanceof t)e._write(r);else if(e instanceof WritableStream){let n=e.getWriter();n.write(r).then(()=>n.releaseLock())}else e.write(r)})),this.on("end",()=>by(this,void 0,void 0,function*(){e instanceof t?e._end():e instanceof WritableStream?e.getWriter().close():e.end()})),this.on("error",r=>by(this,void 0,void 0,function*(){e instanceof t?e._error(r):e instanceof WritableStream?e.getWriter().abort(r):e.destroy(r)})),this._startReading(),e}pipeTo(e){return this.pipe(e)}unpipe(e){this.off("data",r=>by(this,void 0,void 0,function*(){if(e instanceof t)e._write(r);else if(e instanceof WritableStream){let n=e.getWriter();n.write(r).then(()=>n.releaseLock())}else e.write(r)})),this.off("end",()=>by(this,void 0,void 0,function*(){e instanceof t?e._end():e instanceof WritableStream?e.getWriter().close():e.end()})),this.off("error",r=>by(this,void 0,void 0,function*(){e instanceof t?e._error(r):e instanceof WritableStream?e.getWriter().abort(r):e.destroy(r)}))}destroy(e){this.reader.cancel(e).then(()=>{this._emit("close")}).catch(r=>{this._emit("error",r)})}pause(){this.paused=!0,this._emit("pause")}resume(){this.paused&&(this.paused=!1,this._emit("resume"),this.resumeCallback&&(this.resumeCallback(),this.resumeCallback=null))}get isPaused(){return this.paused}read(){return by(this,void 0,void 0,function*(){this.paused&&(yield new Promise(n=>{this.resumeCallback=n}));let{done:e,value:r}=yield this.reader.read();if(!e)return r})}setEncoding(e){this.encoding=e}text(){return by(this,void 0,void 0,function*(){let e=[];for(;;){let{done:n,value:o}=yield this.reader.read();if(n)break;o&&e.push(o)}return new TextDecoder(this.encoding||"utf-8").decode(yield new Blob(e).arrayBuffer())})}json(){return by(this,void 0,void 0,function*(){let e=yield this.text();return JSON.parse(e)})}_write(e){this._emit("data",e)}_end(){this._emit("end")}_error(e){this._emit("error",e)}_emit(e,r){if(this.events[e])for(let n of this.events[e]||[])n(r)}_startReading(){return by(this,void 0,void 0,function*(){try{for(this._emit("readable");;){this.paused&&(yield new Promise(n=>{this.resumeCallback=n}));let{done:e,value:r}=yield this.reader.read();if(e){this._emit("end"),this._emit("close");break}r&&this._emit("data",r)}}catch(e){this._emit("error",e)}})}[Symbol.asyncIterator](){return{next:()=>by(this,void 0,void 0,function*(){this.paused&&(yield new Promise(n=>{this.resumeCallback=n}));let{done:e,value:r}=yield this.reader.read();return e?{done:!0,value:void 0}:{done:!1,value:r}}),[Symbol.asyncIterator](){return this}}}};Bk.Node18UniversalStreamWrapper=Cxe});var xbt=v(qk=>{"use strict";var _H=qk&&qk.__awaiter||function(t,e,r,n){function o(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function s(c){try{l(n.next(c))}catch(d){a(d)}}function u(c){try{l(n.throw(c))}catch(d){a(d)}}function l(c){c.done?i(c.value):o(c.value).then(s,u)}l((n=n.apply(t,e||[])).next())})};Object.defineProperty(qk,"__esModule",{value:!0});qk.UndiciStreamWrapper=void 0;var Oxe=class t{constructor(e){this.readableStream=e,this.reader=this.readableStream.getReader(),this.events={data:[],end:[],error:[],readable:[],close:[],pause:[],resume:[]},this.paused=!1,this.resumeCallback=null,this.encoding=null}on(e,r){var n;(n=this.events[e])===null||n===void 0||n.push(r)}off(e,r){var n;this.events[e]=(n=this.events[e])===null||n===void 0?void 0:n.filter(o=>o!==r)}pipe(e){return this.on("data",r=>{if(e instanceof t)e._write(r);else{let n=e.getWriter();n.write(r).then(()=>n.releaseLock())}}),this.on("end",()=>{e instanceof t?e._end():e.getWriter().close()}),this.on("error",r=>{e instanceof t?e._error(r):e.getWriter().abort(r)}),this._startReading(),e}pipeTo(e){return this.pipe(e)}unpipe(e){this.off("data",r=>{if(e instanceof t)e._write(r);else{let n=e.getWriter();n.write(r).then(()=>n.releaseLock())}}),this.off("end",()=>{e instanceof t?e._end():e.getWriter().close()}),this.off("error",r=>{e instanceof t?e._error(r):e.getWriter().abort(r)})}destroy(e){this.reader.cancel(e).then(()=>{this._emit("close")}).catch(r=>{this._emit("error",r)})}pause(){this.paused=!0,this._emit("pause")}resume(){this.paused&&(this.paused=!1,this._emit("resume"),this.resumeCallback&&(this.resumeCallback(),this.resumeCallback=null))}get isPaused(){return this.paused}read(){return _H(this,void 0,void 0,function*(){this.paused&&(yield new Promise(n=>{this.resumeCallback=n}));let{done:e,value:r}=yield this.reader.read();if(!e)return r})}setEncoding(e){this.encoding=e}text(){return _H(this,void 0,void 0,function*(){let e=[];for(;;){let{done:n,value:o}=yield this.reader.read();if(n)break;o&&e.push(o)}return new TextDecoder(this.encoding||"utf-8").decode(yield new Blob(e).arrayBuffer())})}json(){return _H(this,void 0,void 0,function*(){let e=yield this.text();return JSON.parse(e)})}_write(e){this._emit("data",e)}_end(){this._emit("end")}_error(e){this._emit("error",e)}_emit(e,r){if(this.events[e])for(let n of this.events[e]||[])n(r)}_startReading(){return _H(this,void 0,void 0,function*(){try{for(this._emit("readable");;){this.paused&&(yield new Promise(n=>{this.resumeCallback=n}));let{done:e,value:r}=yield this.reader.read();if(e){this._emit("end"),this._emit("close");break}r&&this._emit("data",r)}}catch(e){this._emit("error",e)}})}[Symbol.asyncIterator](){return{next:()=>_H(this,void 0,void 0,function*(){this.paused&&(yield new Promise(n=>{this.resumeCallback=n}));let{done:e,value:r}=yield this.reader.read();return e?{done:!0,value:void 0}:{done:!1,value:r}}),[Symbol.asyncIterator](){return this}}}};qk.UndiciStreamWrapper=Oxe});var Cbt=v(FT=>{"use strict";var WQ=FT&&FT.__awaiter||function(t,e,r,n){function o(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function s(c){try{l(n.next(c))}catch(d){a(d)}}function u(c){try{l(n.throw(c))}catch(d){a(d)}}function l(c){c.done?i(c.value):o(c.value).then(s,u)}l((n=n.apply(t,e||[])).next())})},L0r=FT&&FT.__asyncValues||function(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof __values=="function"?__values(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(i){r[i]=t[i]&&function(a){return new Promise(function(s,u){a=t[i](a),o(s,u,a.done,a.value)})}}function o(i,a,s,u){Promise.resolve(u).then(function(l){i({value:l,done:s})},a)}};Object.defineProperty(FT,"__esModule",{value:!0});FT.NodePre18StreamWrapper=void 0;var Pxe=class{constructor(e){this.readableStream=e}on(e,r){this.readableStream.on(e,r)}off(e,r){this.readableStream.off(e,r)}pipe(e){return this.readableStream.pipe(e),e}pipeTo(e){return this.pipe(e)}unpipe(e){e?this.readableStream.unpipe(e):this.readableStream.unpipe()}destroy(e){this.readableStream.destroy(e)}pause(){this.readableStream.pause()}resume(){this.readableStream.resume()}get isPaused(){return this.readableStream.isPaused()}read(){return WQ(this,void 0,void 0,function*(){return new Promise((e,r)=>{let n=this.readableStream.read();n?e(n):(this.readableStream.once("readable",()=>{let o=this.readableStream.read();e(o)}),this.readableStream.once("error",r))})})}setEncoding(e){this.readableStream.setEncoding(e),this.encoding=e}text(){var e,r;return WQ(this,void 0,void 0,function*(){let n=[],o=new TextEncoder;this.readableStream.setEncoding(this.encoding||"utf-8");try{for(var i=L0r(this.readableStream),a;a=yield i.next(),!a.done;){let u=a.value;n.push(o.encode(u))}}catch(u){e={error:u}}finally{try{a&&!a.done&&(r=i.return)&&(yield r.call(i))}finally{if(e)throw e.error}}return new TextDecoder(this.encoding||"utf-8").decode(Buffer.concat(n))})}json(){return WQ(this,void 0,void 0,function*(){let e=yield this.text();return JSON.parse(e)})}[Symbol.asyncIterator](){let r=this.readableStream[Symbol.asyncIterator]();return{next(){return WQ(this,void 0,void 0,function*(){let{value:n,done:o}=yield r.next();return{value:n,done:o}})},[Symbol.asyncIterator](){return this}}}};FT.NodePre18StreamWrapper=Pxe});var Obt=v(Hh=>{"use strict";var F0r=Hh&&Hh.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),k0r=Hh&&Hh.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Exe=Hh&&Hh.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&F0r(e,t,r);return k0r(e,t),e},$0r=Hh&&Hh.__awaiter||function(t,e,r,n){function o(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function s(c){try{l(n.next(c))}catch(d){a(d)}}function u(c){try{l(n.throw(c))}catch(d){a(d)}}function l(c){c.done?i(c.value):o(c.value).then(s,u)}l((n=n.apply(t,e||[])).next())})};Object.defineProperty(Hh,"__esModule",{value:!0});Hh.chooseStreamWrapper=void 0;var KQ=Fk();function B0r(t){return $0r(this,void 0,void 0,function*(){return KQ.RUNTIME.type==="node"&&KQ.RUNTIME.parsedVersion!=null&&KQ.RUNTIME.parsedVersion>=18?new(yield Promise.resolve().then(()=>Exe(Sbt()))).Node18UniversalStreamWrapper(t):KQ.RUNTIME.type!=="node"&&typeof fetch=="function"?new(yield Promise.resolve().then(()=>Exe(xbt()))).UndiciStreamWrapper(t):new(yield Promise.resolve().then(()=>Exe(Cbt()))).NodePre18StreamWrapper(t)})}Hh.chooseStreamWrapper=B0r});var Pbt=v(Uk=>{"use strict";var q0r=Uk&&Uk.__awaiter||function(t,e,r,n){function o(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function s(c){try{l(n.next(c))}catch(d){a(d)}}function u(c){try{l(n.throw(c))}catch(d){a(d)}}function l(c){c.done?i(c.value):o(c.value).then(s,u)}l((n=n.apply(t,e||[])).next())})};Object.defineProperty(Uk,"__esModule",{value:!0});Uk.getResponseBody=void 0;var U0r=Obt();function z0r(t,e){return q0r(this,void 0,void 0,function*(){if(t.body!=null&&e==="blob")return yield t.blob();if(t.body!=null&&e==="sse")return t.body;if(t.body!=null&&e==="streaming")return(0,U0r.chooseStreamWrapper)(t.body);if(t.body!=null&&e==="text")return yield t.text();{let r=yield t.text();if(r.length>0)try{return JSON.parse(r)}catch{return{ok:!1,error:{reason:"non-json",statusCode:t.status,rawBody:r}}}else return}})}Uk.getResponseBody=z0r});var Ebt=v(zk=>{"use strict";Object.defineProperty(zk,"__esModule",{value:!0});zk.anySignal=zk.getTimeoutSignal=void 0;var H0r="timeout";function V0r(t){let e=new AbortController,r=setTimeout(()=>e.abort(H0r),t);return{signal:e.signal,abortId:r}}zk.getTimeoutSignal=V0r;function W0r(...t){let e=t.length===1&&Array.isArray(t[0])?t[0]:t,r=new AbortController;for(let n of e){if(n.aborted){r.abort(n?.reason);break}n.addEventListener("abort",()=>r.abort(n?.reason),{signal:r.signal})}return r.signal}zk.anySignal=W0r});var Abt=v(Hk=>{"use strict";var K0r=Hk&&Hk.__awaiter||function(t,e,r,n){function o(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function s(c){try{l(n.next(c))}catch(d){a(d)}}function u(c){try{l(n.throw(c))}catch(d){a(d)}}function l(c){c.done?i(c.value):o(c.value).then(s,u)}l((n=n.apply(t,e||[])).next())})};Object.defineProperty(Hk,"__esModule",{value:!0});Hk.makeRequest=void 0;var Tbt=Ebt(),G0r=(t,e,r,n,o,i,a,s,u)=>K0r(void 0,void 0,void 0,function*(){let l=[],c;if(i!=null){let{signal:p,abortId:m}=(0,Tbt.getTimeoutSignal)(i);c=m,l.push(p)}a!=null&&l.push(a);let d=(0,Tbt.anySignal)(l),f=yield t(e,{method:r,headers:n,body:o,signal:d,credentials:s?"include":void 0,duplex:u});return c!=null&&clearTimeout(c),f});Hk.makeRequest=G0r});var Ibt=v(Vk=>{"use strict";var J0r=Vk&&Vk.__awaiter||function(t,e,r,n){function o(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function s(c){try{l(n.next(c))}catch(d){a(d)}}function u(c){try{l(n.throw(c))}catch(d){a(d)}}function l(c){c.done?i(c.value):o(c.value).then(s,u)}l((n=n.apply(t,e||[])).next())})};Object.defineProperty(Vk,"__esModule",{value:!0});Vk.requestWithRetries=void 0;var Y0r=1,Z0r=60,X0r=2;function Q0r(t,e=X0r){return J0r(this,void 0,void 0,function*(){let r=yield t();for(let n=0;n<e&&([408,409,429].includes(r.status)||r.status>=500);++n){let o=Math.min(Y0r*Math.pow(2,n),Z0r);yield new Promise(i=>setTimeout(i,o)),r=yield t()}return r})}Vk.requestWithRetries=Q0r});var jbt=v(kT=>{"use strict";var Mbt=kT&&kT.__awaiter||function(t,e,r,n){function o(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function s(c){try{l(n.next(c))}catch(d){a(d)}}function u(c){try{l(n.throw(c))}catch(d){a(d)}}function l(c){c.done?i(c.value):o(c.value).then(s,u)}l((n=n.apply(t,e||[])).next())})};Object.defineProperty(kT,"__esModule",{value:!0});kT.fetcher=kT.fetcherImpl=void 0;var eSr=mbt(),tSr=vbt(),rSr=wbt(),nSr=Pbt(),oSr=Abt(),iSr=Ibt();function Rbt(t){return Mbt(this,void 0,void 0,function*(){let e={};if(t.body!==void 0&&t.contentType!=null&&(e["Content-Type"]=t.contentType),t.headers!=null)for(let[i,a]of Object.entries(t.headers))a!=null&&(e[i]=a);let r=(0,eSr.createRequestUrl)(t.url,t.queryParameters),n=yield(0,rSr.getRequestBody)({body:t.body,type:t.requestType==="json"?"json":"other"}),o=yield(0,tSr.getFetchFn)();try{let i=yield(0,iSr.requestWithRetries)(()=>Mbt(this,void 0,void 0,function*(){return(0,oSr.makeRequest)(o,r,t.method,e,n,t.timeoutMs,t.abortSignal,t.withCredentials,t.duplex)}),t.maxRetries),a=yield(0,nSr.getResponseBody)(i,t.responseType);return i.status>=200&&i.status<400?{ok:!0,body:a,headers:i.headers}:{ok:!1,error:{reason:"status-code",statusCode:i.status,body:a}}}catch(i){return t.abortSignal!=null&&t.abortSignal.aborted?{ok:!1,error:{reason:"unknown",errorMessage:"The user aborted a request"}}:i instanceof Error&&i.name==="AbortError"?{ok:!1,error:{reason:"timeout"}}:i instanceof Error?{ok:!1,error:{reason:"unknown",errorMessage:i.message}}:{ok:!1,error:{reason:"unknown",errorMessage:JSON.stringify(i)}}}})}kT.fetcherImpl=Rbt;kT.fetcher=Rbt});var Nbt=v(GQ=>{"use strict";Object.defineProperty(GQ,"__esModule",{value:!0});GQ.getHeader=void 0;function aSr(t,e){for(let[r,n]of Object.entries(t))if(r.toLowerCase()===e.toLowerCase())return n}GQ.getHeader=aSr});var Dbt=v(Wk=>{"use strict";var sSr=Wk&&Wk.__awaiter||function(t,e,r,n){function o(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function s(c){try{l(n.next(c))}catch(d){a(d)}}function u(c){try{l(n.throw(c))}catch(d){a(d)}}function l(c){c.done?i(c.value):o(c.value).then(s,u)}l((n=n.apply(t,e||[])).next())})};Object.defineProperty(Wk,"__esModule",{value:!0});Wk.Supplier=void 0;Wk.Supplier={get:t=>sSr(void 0,void 0,void 0,function*(){return typeof t=="function"?t():t})}});var Lbt=v($T=>{"use strict";Object.defineProperty($T,"__esModule",{value:!0});$T.Supplier=$T.getHeader=$T.fetcher=void 0;var uSr=jbt();Object.defineProperty($T,"fetcher",{enumerable:!0,get:function(){return uSr.fetcher}});var lSr=Nbt();Object.defineProperty($T,"getHeader",{enumerable:!0,get:function(){return lSr.getHeader}});var cSr=Dbt();Object.defineProperty($T,"Supplier",{enumerable:!0,get:function(){return cSr.Supplier}})});var Fbt=v((Txe,Axe)=>{(function(t,e){typeof Txe=="object"&&typeof Axe<"u"?Axe.exports=e():typeof define=="function"&&define.amd?define(e):function(){var r=t.Base64,n=e();n.noConflict=function(){return t.Base64=r,n},t.Meteor&&(Base64=n),t.Base64=n}()})(typeof self<"u"?self:typeof window<"u"||typeof window<"u"?window:Txe,function(){"use strict";var t="3.7.2",e=t,r=typeof atob=="function",n=typeof btoa=="function",o=typeof Buffer=="function",i=typeof TextDecoder=="function"?new TextDecoder:void 0,a=typeof TextEncoder=="function"?new TextEncoder:void 0,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",u=Array.prototype.slice.call(s),l=function(z){var W={};return z.forEach(function(Y,ae){return W[Y]=ae}),W}(u),c=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,d=String.fromCharCode.bind(String),f=typeof Uint8Array.from=="function"?Uint8Array.from.bind(Uint8Array):function(z,W){return W===void 0&&(W=function(Y){return Y}),new Uint8Array(Array.prototype.slice.call(z,0).map(W))},p=function(z){return z.replace(/=/g,"").replace(/[+\/]/g,function(W){return W=="+"?"-":"_"})},m=function(z){return z.replace(/[^A-Za-z0-9\+\/]/g,"")},h=function(z){for(var W,Y,ae,we,de="",Ue=z.length%3,Ve=0;Ve<z.length;){if((Y=z.charCodeAt(Ve++))>255||(ae=z.charCodeAt(Ve++))>255||(we=z.charCodeAt(Ve++))>255)throw new TypeError("invalid character found");W=Y<<16|ae<<8|we,de+=u[W>>18&63]+u[W>>12&63]+u[W>>6&63]+u[W&63]}return Ue?de.slice(0,Ue-3)+"===".substring(Ue):de},b=n?function(z){return btoa(z)}:o?function(z){return Buffer.from(z,"binary").toString("base64")}:h,g=o?function(z){return Buffer.from(z).toString("base64")}:function(z){for(var W=4096,Y=[],ae=0,we=z.length;ae<we;ae+=W)Y.push(d.apply(null,z.subarray(ae,ae+W)));return b(Y.join(""))},y=function(z,W){return W===void 0&&(W=!1),W?p(g(z)):g(z)},w=function(z){if(z.length<2){var W=z.charCodeAt(0);return W<128?z:W<2048?d(192|W>>>6)+d(128|W&63):d(224|W>>>12&15)+d(128|W>>>6&63)+d(128|W&63)}else{var W=65536+(z.charCodeAt(0)-55296)*1024+(z.charCodeAt(1)-56320);return d(240|W>>>18&7)+d(128|W>>>12&63)+d(128|W>>>6&63)+d(128|W&63)}},S=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,C=function(z){return z.replace(S,w)},P=o?function(z){return Buffer.from(z,"utf8").toString("base64")}:a?function(z){return g(a.encode(z))}:function(z){return b(C(z))},E=function(z,W){return W===void 0&&(W=!1),W?p(P(z)):P(z)},A=function(z){return E(z,!0)},I=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,R=function(z){switch(z.length){case 4:var W=(7&z.charCodeAt(0))<<18|(63&z.charCodeAt(1))<<12|(63&z.charCodeAt(2))<<6|63&z.charCodeAt(3),Y=W-65536;return d((Y>>>10)+55296)+d((Y&1023)+56320);case 3:return d((15&z.charCodeAt(0))<<12|(63&z.charCodeAt(1))<<6|63&z.charCodeAt(2));default:return d((31&z.charCodeAt(0))<<6|63&z.charCodeAt(1))}},j=function(z){return z.replace(I,R)},N=function(z){if(z=z.replace(/\s+/g,""),!c.test(z))throw new TypeError("malformed base64.");z+="==".slice(2-(z.length&3));for(var W,Y="",ae,we,de=0;de<z.length;)W=l[z.charAt(de++)]<<18|l[z.charAt(de++)]<<12|(ae=l[z.charAt(de++)])<<6|(we=l[z.charAt(de++)]),Y+=ae===64?d(W>>16&255):we===64?d(W>>16&255,W>>8&255):d(W>>16&255,W>>8&255,W&255);return Y},$=r?function(z){return atob(m(z))}:o?function(z){return Buffer.from(z,"base64").toString("binary")}:N,k=o?function(z){return f(Buffer.from(z,"base64"))}:function(z){return f($(z),function(W){return W.charCodeAt(0)})},H=function(z){return k(Q(z))},V=o?function(z){return Buffer.from(z,"base64").toString("utf8")}:i?function(z){return i.decode(k(z))}:function(z){return j($(z))},Q=function(z){return m(z.replace(/[-_]/g,function(W){return W=="-"?"+":"/"}))},G=function(z){return V(Q(z))},D=function(z){if(typeof z!="string")return!1;var W=z.replace(/\s+/g,"").replace(/={0,2}$/,"");return!/[^\s0-9a-zA-Z\+/]/.test(W)||!/[^\s0-9a-zA-Z\-_]/.test(W)},B=function(z){return{value:z,enumerable:!1,writable:!0,configurable:!0}},q=function(){var z=function(W,Y){return Object.defineProperty(String.prototype,W,B(Y))};z("fromBase64",function(){return G(this)}),z("toBase64",function(W){return E(this,W)}),z("toBase64URI",function(){return E(this,!0)}),z("toBase64URL",function(){return E(this,!0)}),z("toUint8Array",function(){return H(this)})},K=function(){var z=function(W,Y){return Object.defineProperty(Uint8Array.prototype,W,B(Y))};z("toBase64",function(W){return y(this,W)}),z("toBase64URI",function(){return y(this,!0)}),z("toBase64URL",function(){return y(this,!0)})},U=function(){q(),K()},te={version:t,VERSION:e,atob:$,atobPolyfill:N,btoa:b,btoaPolyfill:h,fromBase64:G,toBase64:E,encode:E,encodeURI:A,encodeURL:A,utob:C,btou:j,decode:G,isValid:D,fromUint8Array:y,toUint8Array:H,extendString:q,extendUint8Array:K,extendBuiltins:U};return te.Base64={},Object.keys(te).forEach(function(z){return te.Base64[z]=te[z]}),te})});var $bt=v(JQ=>{"use strict";Object.defineProperty(JQ,"__esModule",{value:!0});JQ.BasicAuth=void 0;var kbt=Fbt(),dSr=/^Basic /i;JQ.BasicAuth={toAuthorizationHeader:t=>t==null?void 0:`Basic ${kbt.Base64.encode(`${t.username}:${t.password}`)}`,fromAuthorizationHeader:t=>{let e=t.replace(dSr,""),r=kbt.Base64.decode(e),[n,o]=r.split(":",2);if(n==null||o==null)throw new Error("Invalid basic auth");return{username:n,password:o}}}});var Bbt=v(YQ=>{"use strict";Object.defineProperty(YQ,"__esModule",{value:!0});YQ.BearerToken=void 0;var fSr=/^Bearer /i;YQ.BearerToken={toAuthorizationHeader:t=>{if(t!=null)return`Bearer ${t}`},fromAuthorizationHeader:t=>t.replace(fSr,"").trim()}});var qbt=v(Kk=>{"use strict";Object.defineProperty(Kk,"__esModule",{value:!0});Kk.BearerToken=Kk.BasicAuth=void 0;var pSr=$bt();Object.defineProperty(Kk,"BasicAuth",{enumerable:!0,get:function(){return pSr.BasicAuth}});var mSr=Bbt();Object.defineProperty(Kk,"BearerToken",{enumerable:!0,get:function(){return mSr.BearerToken}})});var Mxe=v(Sp=>{"use strict";var Ubt=Sp&&Sp.__awaiter||function(t,e,r,n){function o(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function s(c){try{l(n.next(c))}catch(d){a(d)}}function u(c){try{l(n.throw(c))}catch(d){a(d)}}function l(c){c.done?i(c.value):o(c.value).then(s,u)}l((n=n.apply(t,e||[])).next())})},zbt=Sp&&Sp.__asyncValues||function(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof __values=="function"?__values(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(i){r[i]=t[i]&&function(a){return new Promise(function(s,u){a=t[i](a),o(s,u,a.done,a.value)})}}function o(i,a,s,u){Promise.resolve(u).then(function(l){i({value:l,done:s})},a)}},_y=Sp&&Sp.__await||function(t){return this instanceof _y?(this.v=t,this):new _y(t)},Hbt=Sp&&Sp.__asyncGenerator||function(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),o,i=[];return o={},a("next"),a("throw"),a("return"),o[Symbol.asyncIterator]=function(){return this},o;function a(f){n[f]&&(o[f]=function(p){return new Promise(function(m,h){i.push([f,p,m,h])>1||s(f,p)})})}function s(f,p){try{u(n[f](p))}catch(m){d(i[0][3],m)}}function u(f){f.value instanceof _y?Promise.resolve(f.value.v).then(l,c):d(i[0][2],f)}function l(f){s("next",f)}function c(f){s("throw",f)}function d(f,p){f(p),i.shift(),i.length&&s(i[0][0],i[0][1])}};Object.defineProperty(Sp,"__esModule",{value:!0});Sp.readableStreamAsyncIterable=Sp.Stream=void 0;var hSr=Fk(),gSr="data:",Ixe=class{constructor({stream:e,parse:r,eventShape:n,signal:o}){this.controller=new AbortController,this.stream=e,this.parse=r,n.type==="sse"?(this.prefix=gSr,this.messageTerminator=`
`,this.streamTerminator=n.streamTerminator):this.messageTerminator=n.messageTerminator,o?.addEventListener("abort",()=>this.controller.abort())}iterMessages(){return Hbt(this,arguments,function*(){var r,n;this.controller.signal;let o=Vbt(this.stream),i="",a=!1;try{for(var s=zbt(o),u;u=yield _y(s.next()),!u.done;){let l=u.value;i+=this.decodeChunk(l);let c;for(;(c=i.indexOf(this.messageTerminator))>=0;){let d=i.slice(0,c+1);if(i=i.slice(c+1),d.length===0)continue;if(!a&&this.prefix!=null){let p=d.indexOf(this.prefix);if(p===-1)continue;a=!0,d=d.slice(p+this.prefix.length)}if(this.streamTerminator!=null&&d.includes(this.streamTerminator))return yield _y(void 0);let f=yield _y(this.parse(JSON.parse(d)));yield yield _y(f),a=!1}}}catch(l){r={error:l}}finally{try{u&&!u.done&&(n=s.return)&&(yield _y(n.call(s)))}finally{if(r)throw r.error}}})}[Symbol.asyncIterator](){return Hbt(this,arguments,function*(){var r,n;try{for(var o=zbt(this.iterMessages()),i;i=yield _y(o.next()),!i.done;){let a=i.value;yield yield _y(a)}}catch(a){r={error:a}}finally{try{i&&!i.done&&(n=o.return)&&(yield _y(n.call(o)))}finally{if(r)throw r.error}}})}decodeChunk(e){let r="";if(typeof TextDecoder<"u"){let n=new TextDecoder("utf8");r+=n.decode(e)}else hSr.RUNTIME.type==="node"&&typeof e<"u"&&(r+=Buffer.isBuffer(e)?e:Buffer.from(e));return r}};Sp.Stream=Ixe;function Vbt(t){if(t[Symbol.asyncIterator])return t;let e=t.getReader();return{next(){return Ubt(this,void 0,void 0,function*(){try{let r=yield e.read();return r?.done&&e.releaseLock(),r}catch(r){throw e.releaseLock(),r}})},return(){return Ubt(this,void 0,void 0,function*(){let r=e.cancel();return e.releaseLock(),yield r,{done:!0,value:void 0}})},[Symbol.asyncIterator](){return this}}}Sp.readableStreamAsyncIterable=Vbt});var Wbt=v(ZQ=>{"use strict";Object.defineProperty(ZQ,"__esModule",{value:!0});ZQ.Stream=void 0;var ySr=Mxe();Object.defineProperty(ZQ,"Stream",{enumerable:!0,get:function(){return ySr.Stream}})});var Jbt=v((who,Gbt)=>{"use strict";var Rxe=Object.defineProperty,bSr=Object.getOwnPropertyDescriptor,_Sr=Object.getOwnPropertyNames,vSr=Object.prototype.hasOwnProperty,wSr=(t,e)=>{for(var r in e)Rxe(t,r,{get:e[r],enumerable:!0})},SSr=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of _Sr(e))!vSr.call(t,o)&&o!==r&&Rxe(t,o,{get:()=>e[o],enumerable:!(n=bSr(e,o))||n.enumerable});return t},xSr=t=>SSr(Rxe({},"__esModule",{value:!0}),t),Kbt={};wSr(Kbt,{Blob:()=>PSr,File:()=>ESr,FormData:()=>OSr});Gbt.exports=xSr(Kbt);var CSr=function(){return typeof globalThis<"u"?globalThis:typeof self<"u"?self:window}(),{FormData:OSr,Blob:PSr,File:ESr}=CSr});var u_t=v((Sho,s_t)=>{"use strict";var Dxe=Object.defineProperty,TSr=Object.getOwnPropertyDescriptor,ASr=Object.getOwnPropertyNames,ISr=Object.prototype.hasOwnProperty,MSr=(t,e)=>{for(var r in e)Dxe(t,r,{get:e[r],enumerable:!0})},RSr=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of ASr(e))!ISr.call(t,o)&&o!==r&&Dxe(t,o,{get:()=>e[o],enumerable:!(n=TSr(e,o))||n.enumerable});return t},jSr=t=>RSr(Dxe({},"__esModule",{value:!0}),t),Lxe=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},is=(t,e,r)=>(Lxe(t,e,"read from private field"),r?r.call(t):e.get(t)),I_=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},vH=(t,e,r,n)=>(Lxe(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r),jxe=(t,e,r)=>(Lxe(t,e,"access private method"),r),r_t={};MSr(r_t,{FormDataEncoder:()=>qSr,isFile:()=>D1,isFormData:()=>i_t});s_t.exports=jSr(r_t);var oO=t=>typeof t=="function",NSr=t=>oO(t[Symbol.asyncIterator]),Ybt=65536;function*n_t(t){if(t.byteLength<=Ybt){yield t;return}let e=0;for(;e<t.byteLength;){let r=Math.min(t.byteLength-e,Ybt),n=t.buffer.slice(e,e+r);e+=n.byteLength,yield new Uint8Array(n)}}async function*DSr(t){let e=t.getReader();for(;;){let{done:r,value:n}=await e.read();if(r)break;yield n}}async function*Zbt(t){for await(let e of t)yield*n_t(e)}var LSr=t=>{if(NSr(t))return Zbt(t);if(oO(t.getReader))return Zbt(DSr(t));throw new TypeError("Unsupported data source: Expected either ReadableStream or async iterable.")},Xbt="abcdefghijklmnopqrstuvwxyz0123456789";function FSr(){let t=16,e="";for(;t--;)e+=Xbt[Math.random()*Xbt.length<<0];return e}var o_t=t=>String(t).replace(/\r|\n/g,(e,r,n)=>e==="\r"&&n[r+1]!==`
`||e===`
`&&n[r-1]!=="\r"?`\r
`:e),kSr=t=>Object.prototype.toString.call(t).slice(8,-1).toLowerCase();function Qbt(t){if(kSr(t)!=="object")return!1;let e=Object.getPrototypeOf(t);return e==null?!0:(e.constructor&&e.constructor.toString())===Object.toString()}function e_t(t,e){if(typeof e=="string"){for(let[r,n]of Object.entries(t))if(e.toLowerCase()===r.toLowerCase())return n}}var $Sr=t=>new Proxy(t,{get:(e,r)=>e_t(e,r),has:(e,r)=>e_t(e,r)!==void 0}),i_t=t=>!!(t&&oO(t.constructor)&&t[Symbol.toStringTag]==="FormData"&&oO(t.append)&&oO(t.getAll)&&oO(t.entries)&&oO(t[Symbol.iterator])),t_t=t=>String(t).replace(/\r/g,"%0D").replace(/\n/g,"%0A").replace(/"/g,"%22"),D1=t=>!!(t&&typeof t=="object"&&oO(t.constructor)&&t[Symbol.toStringTag]==="File"&&oO(t.stream)&&t.name!=null),BSr={enableAdditionalHeaders:!1},XQ={writable:!1,configurable:!1},BT,wH,QQ,SH,N1,xH,CH,eee,tee,Fxe,Nxe,a_t,qSr=class{constructor(t,e,r){if(I_(this,tee),I_(this,Nxe),I_(this,BT,`\r
`),I_(this,wH,void 0),I_(this,QQ,void 0),I_(this,SH,"-".repeat(2)),I_(this,N1,new TextEncoder),I_(this,xH,void 0),I_(this,CH,void 0),I_(this,eee,void 0),!i_t(t))throw new TypeError("Expected first argument to be a FormData instance.");let n;if(Qbt(e)?r=e:n=e,n||(n=FSr()),typeof n!="string")throw new TypeError("Expected boundary argument to be a string.");if(r&&!Qbt(r))throw new TypeError("Expected options argument to be an object.");vH(this,CH,Array.from(t.entries())),vH(this,eee,{...BSr,...r}),vH(this,wH,is(this,N1).encode(is(this,BT))),vH(this,QQ,is(this,wH).byteLength),this.boundary=`form-data-boundary-${n}`,this.contentType=`multipart/form-data; boundary=${this.boundary}`,vH(this,xH,is(this,N1).encode(`${is(this,SH)}${this.boundary}${is(this,SH)}${is(this,BT).repeat(2)}`));let o={"Content-Type":this.contentType},i=jxe(this,Nxe,a_t).call(this);i&&(this.contentLength=i,o["Content-Length"]=i),this.headers=$Sr(Object.freeze(o)),Object.defineProperties(this,{boundary:XQ,contentType:XQ,contentLength:XQ,headers:XQ})}*values(){for(let[t,e]of is(this,CH)){let r=D1(e)?e:is(this,N1).encode(o_t(e));yield jxe(this,tee,Fxe).call(this,t,r),yield r,yield is(this,wH)}yield is(this,xH)}async*encode(){for(let t of this.values())D1(t)?yield*LSr(t.stream()):yield*n_t(t)}[Symbol.iterator](){return this.values()}[Symbol.asyncIterator](){return this.encode()}};BT=new WeakMap;wH=new WeakMap;QQ=new WeakMap;SH=new WeakMap;N1=new WeakMap;xH=new WeakMap;CH=new WeakMap;eee=new WeakMap;tee=new WeakSet;Fxe=function(t,e){let r="";if(r+=`${is(this,SH)}${this.boundary}${is(this,BT)}`,r+=`Content-Disposition: form-data; name="${t_t(t)}"`,D1(e)&&(r+=`; filename="${t_t(e.name)}"${is(this,BT)}`,r+=`Content-Type: ${e.type||"application/octet-stream"}`),is(this,eee).enableAdditionalHeaders===!0){let n=D1(e)?e.size:e.byteLength;n!=null&&!isNaN(n)&&(r+=`${is(this,BT)}Content-Length: ${n}`)}return is(this,N1).encode(`${r}${is(this,BT).repeat(2)}`)};Nxe=new WeakSet;a_t=function(){let t=0;for(let[e,r]of is(this,CH)){let n=D1(r)?r:is(this,N1).encode(o_t(r)),o=D1(n)?n.size:n.byteLength;if(o==null||isNaN(o))return;t+=jxe(this,tee,Fxe).call(this,e,n).byteLength,t+=o,t+=is(this,QQ)}return String(t+is(this,xH).byteLength)}});var c_t=v((Cho,l_t)=>{l_t.exports=typeof self=="object"?self.FormData:window.FormData});var d_t=v(Ul=>{"use strict";var USr=Ul&&Ul.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),zSr=Ul&&Ul.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Gk=Ul&&Ul.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&USr(e,t,r);return zSr(e,t),e},qT=Ul&&Ul.__awaiter||function(t,e,r,n){function o(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function s(c){try{l(n.next(c))}catch(d){a(d)}}function u(c){try{l(n.throw(c))}catch(d){a(d)}}function l(c){c.done?i(c.value):o(c.value).then(s,u)}l((n=n.apply(t,e||[])).next())})};Object.defineProperty(Ul,"__esModule",{value:!0});Ul.WebFormData=Ul.Node16FormData=Ul.Node18FormData=Ul.newFormData=void 0;var ree=Fk();function kxe(t){return typeof t=="object"&&t!=null&&"name"in t}function HSr(){return qT(this,void 0,void 0,function*(){let t;return ree.RUNTIME.type==="node"&&ree.RUNTIME.parsedVersion!=null&&ree.RUNTIME.parsedVersion>=18?t=new nee:ree.RUNTIME.type==="node"?t=new oee:t=new iee,yield t.setup(),t})}Ul.newFormData=HSr;var nee=class{setup(){return qT(this,void 0,void 0,function*(){this.fd=new(yield Promise.resolve().then(()=>Gk(Jbt()))).FormData})}append(e,r){var n;(n=this.fd)===null||n===void 0||n.append(e,r)}appendFile(e,r,n){var o,i;return qT(this,void 0,void 0,function*(){n==null&&kxe(r)&&(n=r.name),r instanceof(yield Promise.resolve().then(()=>Gk(uH()))).Readable?(o=this.fd)===null||o===void 0||o.append(e,{type:void 0,name:n,[Symbol.toStringTag]:"File",stream(){return r}}):(i=this.fd)===null||i===void 0||i.append(e,r,n)})}getRequest(){return qT(this,void 0,void 0,function*(){let e=new(yield Promise.resolve().then(()=>Gk(u_t()))).FormDataEncoder(this.fd);return{body:yield(yield Promise.resolve().then(()=>Gk(uH()))).Readable.from(e),headers:e.headers,duplex:"half"}})}};Ul.Node18FormData=nee;var oee=class{setup(){return qT(this,void 0,void 0,function*(){this.fd=new(yield Promise.resolve().then(()=>Gk(c_t()))).default})}append(e,r){var n;(n=this.fd)===null||n===void 0||n.append(e,r)}appendFile(e,r,n){var o,i;return qT(this,void 0,void 0,function*(){n==null&&kxe(r)&&(n=r.name);let a;r instanceof(yield Promise.resolve().then(()=>Gk(uH()))).Readable?a=r:a=Buffer.from(yield r.arrayBuffer()),n==null?(o=this.fd)===null||o===void 0||o.append(e,a):(i=this.fd)===null||i===void 0||i.append(e,a,{filename:n})})}getRequest(){return{body:this.fd,headers:this.fd?this.fd.getHeaders():{}}}};Ul.Node16FormData=oee;var iee=class{setup(){return qT(this,void 0,void 0,function*(){this.fd=new FormData})}append(e,r){var n;(n=this.fd)===null||n===void 0||n.append(e,r)}appendFile(e,r,n){var o;return qT(this,void 0,void 0,function*(){n==null&&kxe(r)&&(n=r.name),(o=this.fd)===null||o===void 0||o.append(e,new Blob([r]),n)})}getRequest(){return{body:this.fd,headers:{}}}};Ul.WebFormData=iee});var f_t=v(L1=>{"use strict";var VSr=L1&&L1.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),WSr=L1&&L1.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&VSr(e,t,r)};Object.defineProperty(L1,"__esModule",{value:!0});WSr(d_t(),L1)});var Tc=v(aee=>{"use strict";Object.defineProperty(aee,"__esModule",{value:!0});aee.SchemaType=void 0;aee.SchemaType={DATE:"date",ENUM:"enum",LIST:"list",STRING_LITERAL:"stringLiteral",BOOLEAN_LITERAL:"booleanLiteral",OBJECT:"object",ANY:"any",BOOLEAN:"boolean",NUMBER:"number",STRING:"string",UNKNOWN:"unknown",RECORD:"record",SET:"set",UNION:"union",UNDISCRIMINATED_UNION:"undiscriminatedUnion",OPTIONAL:"optional"}});var xp=v(see=>{"use strict";Object.defineProperty(see,"__esModule",{value:!0});see.getErrorMessageForIncorrectType=void 0;function KSr(t,e){return`Expected ${e}. Received ${GSr(t)}.`}see.getErrorMessageForIncorrectType=KSr;function GSr(t){if(Array.isArray(t))return"list";if(t===null)return"null";switch(typeof t){case"string":return`"${t}"`;case"number":case"boolean":case"undefined":return`${t}`}return typeof t}});var iO=v(uee=>{"use strict";Object.defineProperty(uee,"__esModule",{value:!0});uee.maybeSkipValidation=void 0;function JSr(t){return Object.assign(Object.assign({},t),{json:p_t(t.json),parse:p_t(t.parse)})}uee.maybeSkipValidation=JSr;function p_t(t){return(e,r)=>{let n=t(e,r),{skipValidation:o=!1}=r??{};return!n.ok&&o?(console.warn(["Failed to validate.",...n.errors.map(i=>"  - "+(i.path.length>0?`${i.path.join(".")}: ${i.message}`:i.message))].join(`
`)),{ok:!0,value:e}):n}}});var $xe=v(lee=>{"use strict";Object.defineProperty(lee,"__esModule",{value:!0});lee.stringifyValidationError=void 0;function YSr(t){return t.path.length===0?t.message:`${t.path.join(" -> ")}: ${t.message}`}lee.stringifyValidationError=YSr});var qxe=v(cee=>{"use strict";Object.defineProperty(cee,"__esModule",{value:!0});cee.JsonError=void 0;var ZSr=$xe(),Bxe=class t extends Error{constructor(e){super(e.map(ZSr.stringifyValidationError).join("; ")),this.errors=e,Object.setPrototypeOf(this,t.prototype)}};cee.JsonError=Bxe});var zxe=v(dee=>{"use strict";Object.defineProperty(dee,"__esModule",{value:!0});dee.ParseError=void 0;var XSr=$xe(),Uxe=class t extends Error{constructor(e){super(e.map(XSr.stringifyValidationError).join("; ")),this.errors=e,Object.setPrototypeOf(this,t.prototype)}};dee.ParseError=Uxe});var g_t=v(UT=>{"use strict";Object.defineProperty(UT,"__esModule",{value:!0});UT.transform=UT.optional=UT.getSchemaUtils=void 0;var QSr=Tc(),exr=qxe(),txr=zxe();function Hxe(t){return{optional:()=>m_t(t),transform:e=>h_t(t,e),parseOrThrow:(e,r)=>{let n=t.parse(e,r);if(n.ok)return n.value;throw new txr.ParseError(n.errors)},jsonOrThrow:(e,r)=>{let n=t.json(e,r);if(n.ok)return n.value;throw new exr.JsonError(n.errors)}}}UT.getSchemaUtils=Hxe;function m_t(t){let e={parse:(r,n)=>r==null?{ok:!0,value:void 0}:t.parse(r,n),json:(r,n)=>n?.omitUndefined&&r===void 0?{ok:!0,value:void 0}:r==null?{ok:!0,value:null}:t.json(r,n),getType:()=>QSr.SchemaType.OPTIONAL};return Object.assign(Object.assign({},e),Hxe(e))}UT.optional=m_t;function h_t(t,e){let r={parse:(n,o)=>{let i=t.parse(n,o);return i.ok?{ok:!0,value:e.transform(i.value)}:i},json:(n,o)=>{let i=e.untransform(n);return t.json(i,o)},getType:()=>t.getType()};return Object.assign(Object.assign({},r),Hxe(r))}UT.transform=h_t});var Sm=v(Vh=>{"use strict";Object.defineProperty(Vh,"__esModule",{value:!0});Vh.ParseError=Vh.JsonError=Vh.transform=Vh.optional=Vh.getSchemaUtils=void 0;var Vxe=g_t();Object.defineProperty(Vh,"getSchemaUtils",{enumerable:!0,get:function(){return Vxe.getSchemaUtils}});Object.defineProperty(Vh,"optional",{enumerable:!0,get:function(){return Vxe.optional}});Object.defineProperty(Vh,"transform",{enumerable:!0,get:function(){return Vxe.transform}});var rxr=qxe();Object.defineProperty(Vh,"JsonError",{enumerable:!0,get:function(){return rxr.JsonError}});var nxr=zxe();Object.defineProperty(Vh,"ParseError",{enumerable:!0,get:function(){return nxr.ParseError}})});var y_t=v(fee=>{"use strict";Object.defineProperty(fee,"__esModule",{value:!0});fee.date=void 0;var oxr=Tc(),Wxe=xp(),ixr=iO(),axr=Sm(),sxr=/^([+-]?\d{4}(?!\d{2}\b))((-?)((0[1-9]|1[0-2])(\3([12]\d|0[1-9]|3[01]))?|W([0-4]\d|5[0-2])(-?[1-7])?|(00[1-9]|0[1-9]\d|[12]\d{2}|3([0-5]\d|6[1-6])))([T\s]((([01]\d|2[0-3])((:?)[0-5]\d)?|24:?00)([.,]\d+(?!:))?)?(\17[0-5]\d([.,]\d+)?)?([zZ]|([+-])([01]\d|2[0-3]):?([0-5]\d)?)?)?)?$/;function uxr(){let t={parse:(e,{breadcrumbsPrefix:r=[]}={})=>typeof e!="string"?{ok:!1,errors:[{path:r,message:(0,Wxe.getErrorMessageForIncorrectType)(e,"string")}]}:sxr.test(e)?{ok:!0,value:new Date(e)}:{ok:!1,errors:[{path:r,message:(0,Wxe.getErrorMessageForIncorrectType)(e,"ISO 8601 date string")}]},json:(e,{breadcrumbsPrefix:r=[]}={})=>e instanceof Date?{ok:!0,value:e.toISOString()}:{ok:!1,errors:[{path:r,message:(0,Wxe.getErrorMessageForIncorrectType)(e,"Date object")}]},getType:()=>oxr.SchemaType.DATE};return Object.assign(Object.assign({},(0,ixr.maybeSkipValidation)(t)),(0,axr.getSchemaUtils)(t))}fee.date=uxr});var b_t=v(pee=>{"use strict";Object.defineProperty(pee,"__esModule",{value:!0});pee.date=void 0;var lxr=y_t();Object.defineProperty(pee,"date",{enumerable:!0,get:function(){return lxr.date}})});var aO=v(mee=>{"use strict";Object.defineProperty(mee,"__esModule",{value:!0});mee.createIdentitySchemaCreator=void 0;var cxr=Sm(),dxr=iO();function fxr(t,e){return()=>{let r={parse:e,json:e,getType:()=>t};return Object.assign(Object.assign({},(0,dxr.maybeSkipValidation)(r)),(0,cxr.getSchemaUtils)(r))}}mee.createIdentitySchemaCreator=fxr});var v_t=v(hee=>{"use strict";Object.defineProperty(hee,"__esModule",{value:!0});hee.enum_=void 0;var pxr=Tc(),mxr=aO(),__t=xp();function hxr(t){let e=new Set(t);return(0,mxr.createIdentitySchemaCreator)(pxr.SchemaType.ENUM,(n,{allowUnrecognizedEnumValues:o,breadcrumbsPrefix:i=[]}={})=>typeof n!="string"?{ok:!1,errors:[{path:i,message:(0,__t.getErrorMessageForIncorrectType)(n,"string")}]}:!e.has(n)&&!o?{ok:!1,errors:[{path:i,message:(0,__t.getErrorMessageForIncorrectType)(n,"enum")}]}:{ok:!0,value:n})()}hee.enum_=hxr});var Kxe=v(gee=>{"use strict";Object.defineProperty(gee,"__esModule",{value:!0});gee.enum_=void 0;var gxr=v_t();Object.defineProperty(gee,"enum_",{enumerable:!0,get:function(){return gxr.enum_}})});var Gxe=v(zT=>{"use strict";Object.defineProperty(zT,"__esModule",{value:!0});zT.getMemoizedSchema=zT.constructLazyBaseSchema=zT.lazy=void 0;var yxr=Sm();function bxr(t){let e=w_t(t);return Object.assign(Object.assign({},e),(0,yxr.getSchemaUtils)(e))}zT.lazy=bxr;function w_t(t){return{parse:(e,r)=>yee(t).parse(e,r),json:(e,r)=>yee(t).json(e,r),getType:()=>yee(t).getType()}}zT.constructLazyBaseSchema=w_t;function yee(t){let e=t;return e.__zurg_memoized==null&&(e.__zurg_memoized=t()),e.__zurg_memoized}zT.getMemoizedSchema=yee});var Jxe=v(bee=>{"use strict";Object.defineProperty(bee,"__esModule",{value:!0});bee.entries=void 0;function _xr(t){return Object.entries(t)}bee.entries=_xr});var Yxe=v(_ee=>{"use strict";Object.defineProperty(_ee,"__esModule",{value:!0});_ee.filterObject=void 0;function vxr(t,e){let r=new Set(e);return Object.entries(t).reduce((n,[o,i])=>(r.has(o)&&(n[o]=i),n),{})}_ee.filterObject=vxr});var OH=v(vee=>{"use strict";Object.defineProperty(vee,"__esModule",{value:!0});vee.isPlainObject=void 0;function wxr(t){if(typeof t!="object"||t===null)return!1;if(Object.getPrototypeOf(t)===null)return!0;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}vee.isPlainObject=wxr});var Zxe=v(wee=>{"use strict";Object.defineProperty(wee,"__esModule",{value:!0});wee.keys=void 0;function Sxr(t){return Object.keys(t)}wee.keys=Sxr});var S_t=v(See=>{"use strict";Object.defineProperty(See,"__esModule",{value:!0});See.partition=void 0;function xxr(t,e){let r=[],n=[];for(let o of t)e(o)?r.push(o):n.push(o);return[r,n]}See.partition=xxr});var O_t=v(Jk=>{"use strict";Object.defineProperty(Jk,"__esModule",{value:!0});Jk.withParsedProperties=Jk.getObjectLikeUtils=void 0;var Cxr=Yxe(),Oxr=xp(),Pxr=OH(),Exr=Sm();function x_t(t){return{withParsedProperties:e=>C_t(t,e)}}Jk.getObjectLikeUtils=x_t;function C_t(t,e){let r={parse:(n,o)=>{let i=t.parse(n,o);if(!i.ok)return i;let a=Object.entries(e).reduce((s,[u,l])=>Object.assign(Object.assign({},s),{[u]:typeof l=="function"?l(i.value):l}),{});return{ok:!0,value:Object.assign(Object.assign({},i.value),a)}},json:(n,o)=>{var i;if(!(0,Pxr.isPlainObject)(n))return{ok:!1,errors:[{path:(i=o?.breadcrumbsPrefix)!==null&&i!==void 0?i:[],message:(0,Oxr.getErrorMessageForIncorrectType)(n,"object")}]};let a=new Set(Object.keys(e)),s=(0,Cxr.filterObject)(n,Object.keys(n).filter(u=>!a.has(u)));return t.json(s,o)},getType:()=>t.getType()};return Object.assign(Object.assign(Object.assign({},r),(0,Exr.getSchemaUtils)(r)),x_t(r))}Jk.withParsedProperties=C_t});var PH=v(Yk=>{"use strict";Object.defineProperty(Yk,"__esModule",{value:!0});Yk.withParsedProperties=Yk.getObjectLikeUtils=void 0;var P_t=O_t();Object.defineProperty(Yk,"getObjectLikeUtils",{enumerable:!0,get:function(){return P_t.getObjectLikeUtils}});Object.defineProperty(Yk,"withParsedProperties",{enumerable:!0,get:function(){return P_t.withParsedProperties}})});var Xxe=v(Zk=>{"use strict";Object.defineProperty(Zk,"__esModule",{value:!0});Zk.isProperty=Zk.property=void 0;function Txr(t,e){return{rawKey:t,valueSchema:e,isProperty:!0}}Zk.property=Txr;function Axr(t){return t.isProperty}Zk.isProperty=Axr});var eCe=v(Xk=>{"use strict";Object.defineProperty(Xk,"__esModule",{value:!0});Xk.getObjectUtils=Xk.object=void 0;var TH=Tc(),E_t=Jxe(),T_t=Yxe(),Ixr=xp(),Mxr=OH(),R_t=Zxe(),Rxr=iO(),jxr=S_t(),j_t=PH(),N_t=Sm(),EH=Xxe();function Nxr(t){let e={_getRawProperties:()=>Object.entries(t).map(([r,n])=>(0,EH.isProperty)(n)?n.rawKey:r),_getParsedProperties:()=>(0,R_t.keys)(t),parse:(r,n)=>{let o={},i=[];for(let[a,s]of(0,E_t.entries)(t)){let u=(0,EH.isProperty)(s)?s.rawKey:a,l=(0,EH.isProperty)(s)?s.valueSchema:s,c={rawKey:u,parsedKey:a,valueSchema:l};o[u]=c,M_t(l)&&i.push(u)}return A_t({value:r,requiredKeys:i,getProperty:a=>{let s=o[a];if(s!=null)return{transformedKey:s.parsedKey,transform:u=>{var l;return s.valueSchema.parse(u,Object.assign(Object.assign({},n),{breadcrumbsPrefix:[...(l=n?.breadcrumbsPrefix)!==null&&l!==void 0?l:[],a]}))}}},unrecognizedObjectKeys:n?.unrecognizedObjectKeys,skipValidation:n?.skipValidation,breadcrumbsPrefix:n?.breadcrumbsPrefix,omitUndefined:n?.omitUndefined})},json:(r,n)=>{let o=[];for(let[i,a]of(0,E_t.entries)(t)){let s=(0,EH.isProperty)(a)?a.valueSchema:a;M_t(s)&&o.push(i)}return A_t({value:r,requiredKeys:o,getProperty:i=>{let a=t[i];if(a!=null)return(0,EH.isProperty)(a)?{transformedKey:a.rawKey,transform:s=>{var u;return a.valueSchema.json(s,Object.assign(Object.assign({},n),{breadcrumbsPrefix:[...(u=n?.breadcrumbsPrefix)!==null&&u!==void 0?u:[],i]}))}}:{transformedKey:i,transform:s=>{var u;return a.json(s,Object.assign(Object.assign({},n),{breadcrumbsPrefix:[...(u=n?.breadcrumbsPrefix)!==null&&u!==void 0?u:[],i]}))}}},unrecognizedObjectKeys:n?.unrecognizedObjectKeys,skipValidation:n?.skipValidation,breadcrumbsPrefix:n?.breadcrumbsPrefix,omitUndefined:n?.omitUndefined})},getType:()=>TH.SchemaType.OBJECT};return Object.assign(Object.assign(Object.assign(Object.assign({},(0,Rxr.maybeSkipValidation)(e)),(0,N_t.getSchemaUtils)(e)),(0,j_t.getObjectLikeUtils)(e)),Qxe(e))}Xk.object=Nxr;function A_t({value:t,requiredKeys:e,getProperty:r,unrecognizedObjectKeys:n="fail",skipValidation:o=!1,breadcrumbsPrefix:i=[]}){if(!(0,Mxr.isPlainObject)(t))return{ok:!1,errors:[{path:i,message:(0,Ixr.getErrorMessageForIncorrectType)(t,"object")}]};let a=new Set(e),s=[],u={};for(let[l,c]of Object.entries(t)){let d=r(l);if(d!=null){a.delete(l);let f=d.transform(c);f.ok?u[d.transformedKey]=f.value:(u[l]=c,s.push(...f.errors))}else switch(n){case"fail":s.push({path:[...i,l],message:`Unexpected key "${l}"`});break;case"strip":break;case"passthrough":u[l]=c;break}}return s.push(...e.filter(l=>a.has(l)).map(l=>({path:i,message:`Missing required key "${l}"`}))),s.length===0||o?{ok:!0,value:u}:{ok:!1,errors:s}}function Qxe(t){return{extend:e=>{let r={_getParsedProperties:()=>[...t._getParsedProperties(),...e._getParsedProperties()],_getRawProperties:()=>[...t._getRawProperties(),...e._getRawProperties()],parse:(n,o)=>I_t({extensionKeys:e._getRawProperties(),value:n,transformBase:i=>t.parse(i,o),transformExtension:i=>e.parse(i,o)}),json:(n,o)=>I_t({extensionKeys:e._getParsedProperties(),value:n,transformBase:i=>t.json(i,o),transformExtension:i=>e.json(i,o)}),getType:()=>TH.SchemaType.OBJECT};return Object.assign(Object.assign(Object.assign(Object.assign({},r),(0,N_t.getSchemaUtils)(r)),(0,j_t.getObjectLikeUtils)(r)),Qxe(r))}}}Xk.getObjectUtils=Qxe;function I_t({extensionKeys:t,value:e,transformBase:r,transformExtension:n}){let o=new Set(t),[i,a]=(0,jxr.partition)((0,R_t.keys)(e),l=>o.has(l)),s=r((0,T_t.filterObject)(e,a)),u=n((0,T_t.filterObject)(e,i));return s.ok&&u.ok?{ok:!0,value:Object.assign(Object.assign({},s.value),u.value)}:{ok:!1,errors:[...s.ok?[]:s.errors,...u.ok?[]:u.errors]}}function M_t(t){return!Dxr(t)}function Dxr(t){switch(t.getType()){case TH.SchemaType.ANY:case TH.SchemaType.UNKNOWN:case TH.SchemaType.OPTIONAL:return!0;default:return!1}}});var D_t=v(xee=>{"use strict";Object.defineProperty(xee,"__esModule",{value:!0});xee.objectWithoutOptionalProperties=void 0;var Lxr=eCe();function Fxr(t){return(0,Lxr.object)(t)}xee.objectWithoutOptionalProperties=Fxr});var tCe=v(Wh=>{"use strict";Object.defineProperty(Wh,"__esModule",{value:!0});Wh.property=Wh.isProperty=Wh.objectWithoutOptionalProperties=Wh.object=Wh.getObjectUtils=void 0;var L_t=eCe();Object.defineProperty(Wh,"getObjectUtils",{enumerable:!0,get:function(){return L_t.getObjectUtils}});Object.defineProperty(Wh,"object",{enumerable:!0,get:function(){return L_t.object}});var kxr=D_t();Object.defineProperty(Wh,"objectWithoutOptionalProperties",{enumerable:!0,get:function(){return kxr.objectWithoutOptionalProperties}});var F_t=Xxe();Object.defineProperty(Wh,"isProperty",{enumerable:!0,get:function(){return F_t.isProperty}});Object.defineProperty(Wh,"property",{enumerable:!0,get:function(){return F_t.property}})});var k_t=v(Cee=>{"use strict";Object.defineProperty(Cee,"__esModule",{value:!0});Cee.lazyObject=void 0;var $xr=tCe(),Bxr=PH(),qxr=Sm(),rCe=Gxe();function Uxr(t){let e=Object.assign(Object.assign({},(0,rCe.constructLazyBaseSchema)(t)),{_getRawProperties:()=>(0,rCe.getMemoizedSchema)(t)._getRawProperties(),_getParsedProperties:()=>(0,rCe.getMemoizedSchema)(t)._getParsedProperties()});return Object.assign(Object.assign(Object.assign(Object.assign({},e),(0,qxr.getSchemaUtils)(e)),(0,Bxr.getObjectLikeUtils)(e)),(0,$xr.getObjectUtils)(e))}Cee.lazyObject=Uxr});var $_t=v(Qk=>{"use strict";Object.defineProperty(Qk,"__esModule",{value:!0});Qk.lazyObject=Qk.lazy=void 0;var zxr=Gxe();Object.defineProperty(Qk,"lazy",{enumerable:!0,get:function(){return zxr.lazy}});var Hxr=k_t();Object.defineProperty(Qk,"lazyObject",{enumerable:!0,get:function(){return Hxr.lazyObject}})});var q_t=v(Oee=>{"use strict";Object.defineProperty(Oee,"__esModule",{value:!0});Oee.list=void 0;var Vxr=Tc(),Wxr=xp(),Kxr=iO(),Gxr=Sm();function Jxr(t){let e={parse:(r,n)=>B_t(r,(o,i)=>{var a;return t.parse(o,Object.assign(Object.assign({},n),{breadcrumbsPrefix:[...(a=n?.breadcrumbsPrefix)!==null&&a!==void 0?a:[],`[${i}]`]}))}),json:(r,n)=>B_t(r,(o,i)=>{var a;return t.json(o,Object.assign(Object.assign({},n),{breadcrumbsPrefix:[...(a=n?.breadcrumbsPrefix)!==null&&a!==void 0?a:[],`[${i}]`]}))}),getType:()=>Vxr.SchemaType.LIST};return Object.assign(Object.assign({},(0,Kxr.maybeSkipValidation)(e)),(0,Gxr.getSchemaUtils)(e))}Oee.list=Jxr;function B_t(t,e){return Array.isArray(t)?t.map((n,o)=>e(n,o)).reduce((n,o)=>{if(n.ok&&o.ok)return{ok:!0,value:[...n.value,o.value]};let i=[];return n.ok||i.push(...n.errors),o.ok||i.push(...o.errors),{ok:!1,errors:i}},{ok:!0,value:[]}):{ok:!1,errors:[{message:(0,Wxr.getErrorMessageForIncorrectType)(t,"list"),path:[]}]}}});var nCe=v(Pee=>{"use strict";Object.defineProperty(Pee,"__esModule",{value:!0});Pee.list=void 0;var Yxr=q_t();Object.defineProperty(Pee,"list",{enumerable:!0,get:function(){return Yxr.list}})});var U_t=v(Eee=>{"use strict";Object.defineProperty(Eee,"__esModule",{value:!0});Eee.stringLiteral=void 0;var Zxr=Tc(),Xxr=aO(),Qxr=xp();function eCr(t){return(0,Xxr.createIdentitySchemaCreator)(Zxr.SchemaType.STRING_LITERAL,(r,{breadcrumbsPrefix:n=[]}={})=>r===t?{ok:!0,value:t}:{ok:!1,errors:[{path:n,message:(0,Qxr.getErrorMessageForIncorrectType)(r,`"${t}"`)}]})()}Eee.stringLiteral=eCr});var z_t=v(Tee=>{"use strict";Object.defineProperty(Tee,"__esModule",{value:!0});Tee.booleanLiteral=void 0;var tCr=Tc(),rCr=aO(),nCr=xp();function oCr(t){return(0,rCr.createIdentitySchemaCreator)(tCr.SchemaType.BOOLEAN_LITERAL,(r,{breadcrumbsPrefix:n=[]}={})=>r===t?{ok:!0,value:t}:{ok:!1,errors:[{path:n,message:(0,nCr.getErrorMessageForIncorrectType)(r,`${t.toString()}`)}]})()}Tee.booleanLiteral=oCr});var H_t=v(e$=>{"use strict";Object.defineProperty(e$,"__esModule",{value:!0});e$.booleanLiteral=e$.stringLiteral=void 0;var iCr=U_t();Object.defineProperty(e$,"stringLiteral",{enumerable:!0,get:function(){return iCr.stringLiteral}});var aCr=z_t();Object.defineProperty(e$,"booleanLiteral",{enumerable:!0,get:function(){return aCr.booleanLiteral}})});var V_t=v(Aee=>{"use strict";Object.defineProperty(Aee,"__esModule",{value:!0});Aee.any=void 0;var sCr=Tc(),uCr=aO();Aee.any=(0,uCr.createIdentitySchemaCreator)(sCr.SchemaType.ANY,t=>({ok:!0,value:t}))});var W_t=v(Iee=>{"use strict";Object.defineProperty(Iee,"__esModule",{value:!0});Iee.boolean=void 0;var lCr=Tc(),cCr=aO(),dCr=xp();Iee.boolean=(0,cCr.createIdentitySchemaCreator)(lCr.SchemaType.BOOLEAN,(t,{breadcrumbsPrefix:e=[]}={})=>typeof t=="boolean"?{ok:!0,value:t}:{ok:!1,errors:[{path:e,message:(0,dCr.getErrorMessageForIncorrectType)(t,"boolean")}]})});var K_t=v(Mee=>{"use strict";Object.defineProperty(Mee,"__esModule",{value:!0});Mee.number=void 0;var fCr=Tc(),pCr=aO(),mCr=xp();Mee.number=(0,pCr.createIdentitySchemaCreator)(fCr.SchemaType.NUMBER,(t,{breadcrumbsPrefix:e=[]}={})=>typeof t=="number"?{ok:!0,value:t}:{ok:!1,errors:[{path:e,message:(0,mCr.getErrorMessageForIncorrectType)(t,"number")}]})});var G_t=v(Ree=>{"use strict";Object.defineProperty(Ree,"__esModule",{value:!0});Ree.string=void 0;var hCr=Tc(),gCr=aO(),yCr=xp();Ree.string=(0,gCr.createIdentitySchemaCreator)(hCr.SchemaType.STRING,(t,{breadcrumbsPrefix:e=[]}={})=>typeof t=="string"?{ok:!0,value:t}:{ok:!1,errors:[{path:e,message:(0,yCr.getErrorMessageForIncorrectType)(t,"string")}]})});var J_t=v(jee=>{"use strict";Object.defineProperty(jee,"__esModule",{value:!0});jee.unknown=void 0;var bCr=Tc(),_Cr=aO();jee.unknown=(0,_Cr.createIdentitySchemaCreator)(bCr.SchemaType.UNKNOWN,t=>({ok:!0,value:t}))});var Y_t=v(Kh=>{"use strict";Object.defineProperty(Kh,"__esModule",{value:!0});Kh.unknown=Kh.string=Kh.number=Kh.boolean=Kh.any=void 0;var vCr=V_t();Object.defineProperty(Kh,"any",{enumerable:!0,get:function(){return vCr.any}});var wCr=W_t();Object.defineProperty(Kh,"boolean",{enumerable:!0,get:function(){return wCr.boolean}});var SCr=K_t();Object.defineProperty(Kh,"number",{enumerable:!0,get:function(){return SCr.number}});var xCr=G_t();Object.defineProperty(Kh,"string",{enumerable:!0,get:function(){return xCr.string}});var CCr=J_t();Object.defineProperty(Kh,"unknown",{enumerable:!0,get:function(){return CCr.unknown}})});var X_t=v(Nee=>{"use strict";Object.defineProperty(Nee,"__esModule",{value:!0});Nee.record=void 0;var oCe=Tc(),OCr=Jxe(),PCr=xp(),ECr=OH(),TCr=iO(),ACr=Sm();function ICr(t,e){let r={parse:(n,o)=>Z_t({value:n,isKeyNumeric:t.getType()===oCe.SchemaType.NUMBER,transformKey:i=>{var a;return t.parse(i,Object.assign(Object.assign({},o),{breadcrumbsPrefix:[...(a=o?.breadcrumbsPrefix)!==null&&a!==void 0?a:[],`${i} (key)`]}))},transformValue:(i,a)=>{var s;return e.parse(i,Object.assign(Object.assign({},o),{breadcrumbsPrefix:[...(s=o?.breadcrumbsPrefix)!==null&&s!==void 0?s:[],`${a}`]}))},breadcrumbsPrefix:o?.breadcrumbsPrefix}),json:(n,o)=>Z_t({value:n,isKeyNumeric:t.getType()===oCe.SchemaType.NUMBER,transformKey:i=>{var a;return t.json(i,Object.assign(Object.assign({},o),{breadcrumbsPrefix:[...(a=o?.breadcrumbsPrefix)!==null&&a!==void 0?a:[],`${i} (key)`]}))},transformValue:(i,a)=>{var s;return e.json(i,Object.assign(Object.assign({},o),{breadcrumbsPrefix:[...(s=o?.breadcrumbsPrefix)!==null&&s!==void 0?s:[],`${a}`]}))},breadcrumbsPrefix:o?.breadcrumbsPrefix}),getType:()=>oCe.SchemaType.RECORD};return Object.assign(Object.assign({},(0,TCr.maybeSkipValidation)(r)),(0,ACr.getSchemaUtils)(r))}Nee.record=ICr;function Z_t({value:t,isKeyNumeric:e,transformKey:r,transformValue:n,breadcrumbsPrefix:o=[]}){return(0,ECr.isPlainObject)(t)?(0,OCr.entries)(t).reduce((i,[a,s])=>{if(s==null)return i;let u=i,l=a;if(e){let p=a.length>0?Number(a):NaN;isNaN(p)||(l=p)}let c=r(l),d=n(s,l);if(u.ok&&c.ok&&d.ok)return{ok:!0,value:Object.assign(Object.assign({},u.value),{[c.value]:d.value})};let f=[];return u.ok||f.push(...u.errors),c.ok||f.push(...c.errors),d.ok||f.push(...d.errors),{ok:!1,errors:f}},{ok:!0,value:{}}):{ok:!1,errors:[{path:o,message:(0,PCr.getErrorMessageForIncorrectType)(t,"object")}]}}});var Q_t=v(Dee=>{"use strict";Object.defineProperty(Dee,"__esModule",{value:!0});Dee.record=void 0;var MCr=X_t();Object.defineProperty(Dee,"record",{enumerable:!0,get:function(){return MCr.record}})});var evt=v(Lee=>{"use strict";Object.defineProperty(Lee,"__esModule",{value:!0});Lee.set=void 0;var RCr=Tc(),jCr=xp(),NCr=iO(),DCr=nCe(),LCr=Sm();function FCr(t){let e=(0,DCr.list)(t),r={parse:(n,o)=>{let i=e.parse(n,o);return i.ok?{ok:!0,value:new Set(i.value)}:i},json:(n,o)=>{var i;return n instanceof Set?e.json([...n],o):{ok:!1,errors:[{path:(i=o?.breadcrumbsPrefix)!==null&&i!==void 0?i:[],message:(0,jCr.getErrorMessageForIncorrectType)(n,"Set")}]}},getType:()=>RCr.SchemaType.SET};return Object.assign(Object.assign({},(0,NCr.maybeSkipValidation)(r)),(0,LCr.getSchemaUtils)(r))}Lee.set=FCr});var tvt=v(Fee=>{"use strict";Object.defineProperty(Fee,"__esModule",{value:!0});Fee.set=void 0;var kCr=evt();Object.defineProperty(Fee,"set",{enumerable:!0,get:function(){return kCr.set}})});var nvt=v(kee=>{"use strict";Object.defineProperty(kee,"__esModule",{value:!0});kee.undiscriminatedUnion=void 0;var $Cr=Tc(),BCr=iO(),qCr=Sm();function UCr(t){let e={parse:(r,n)=>rvt((o,i)=>o.parse(r,i),t,n),json:(r,n)=>rvt((o,i)=>o.json(r,i),t,n),getType:()=>$Cr.SchemaType.UNDISCRIMINATED_UNION};return Object.assign(Object.assign({},(0,BCr.maybeSkipValidation)(e)),(0,qCr.getSchemaUtils)(e))}kee.undiscriminatedUnion=UCr;function rvt(t,e,r){let n=[];for(let[o,i]of e.entries()){let a=t(i,Object.assign(Object.assign({},r),{skipValidation:!1}));if(a.ok)return a;for(let s of a.errors)n.push({path:s.path,message:`[Variant ${o}] ${s.message}`})}return{ok:!1,errors:n}}});var ovt=v($ee=>{"use strict";Object.defineProperty($ee,"__esModule",{value:!0});$ee.undiscriminatedUnion=void 0;var zCr=nvt();Object.defineProperty($ee,"undiscriminatedUnion",{enumerable:!0,get:function(){return zCr.undiscriminatedUnion}})});var ivt=v(Bee=>{"use strict";Object.defineProperty(Bee,"__esModule",{value:!0});Bee.discriminant=void 0;function HCr(t,e){return{parsedDiscriminant:t,rawDiscriminant:e}}Bee.discriminant=HCr});var svt=v(t$=>{"use strict";var VCr=t$&&t$.__rest||function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,n=Object.getOwnPropertySymbols(t);o<n.length;o++)e.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(t,n[o])&&(r[n[o]]=t[n[o]]);return r};Object.defineProperty(t$,"__esModule",{value:!0});t$.union=void 0;var WCr=Tc(),KCr=xp(),GCr=OH(),JCr=Zxe(),YCr=iO(),ZCr=Kxe(),XCr=PH(),QCr=Sm();function eOr(t,e){let r=typeof t=="string"?t:t.rawDiscriminant,n=typeof t=="string"?t:t.parsedDiscriminant,o=(0,ZCr.enum_)((0,JCr.keys)(e)),i={parse:(a,s)=>avt({value:a,discriminant:r,transformedDiscriminant:n,transformDiscriminantValue:u=>{var l;return o.parse(u,{allowUnrecognizedEnumValues:s?.allowUnrecognizedUnionMembers,breadcrumbsPrefix:[...(l=s?.breadcrumbsPrefix)!==null&&l!==void 0?l:[],r]})},getAdditionalPropertiesSchema:u=>e[u],allowUnrecognizedUnionMembers:s?.allowUnrecognizedUnionMembers,transformAdditionalProperties:(u,l)=>l.parse(u,s),breadcrumbsPrefix:s?.breadcrumbsPrefix}),json:(a,s)=>avt({value:a,discriminant:n,transformedDiscriminant:r,transformDiscriminantValue:u=>{var l;return o.json(u,{allowUnrecognizedEnumValues:s?.allowUnrecognizedUnionMembers,breadcrumbsPrefix:[...(l=s?.breadcrumbsPrefix)!==null&&l!==void 0?l:[],n]})},getAdditionalPropertiesSchema:u=>e[u],allowUnrecognizedUnionMembers:s?.allowUnrecognizedUnionMembers,transformAdditionalProperties:(u,l)=>l.json(u,s),breadcrumbsPrefix:s?.breadcrumbsPrefix}),getType:()=>WCr.SchemaType.UNION};return Object.assign(Object.assign(Object.assign({},(0,YCr.maybeSkipValidation)(i)),(0,QCr.getSchemaUtils)(i)),(0,XCr.getObjectLikeUtils)(i))}t$.union=eOr;function avt({value:t,discriminant:e,transformedDiscriminant:r,transformDiscriminantValue:n,getAdditionalPropertiesSchema:o,allowUnrecognizedUnionMembers:i=!1,transformAdditionalProperties:a,breadcrumbsPrefix:s=[]}){if(!(0,GCr.isPlainObject)(t))return{ok:!1,errors:[{path:s,message:(0,KCr.getErrorMessageForIncorrectType)(t,"object")}]};let u=t,l=e,c=u[l],d=VCr(u,[typeof l=="symbol"?l:l+""]);if(c==null)return{ok:!1,errors:[{path:s,message:`Missing discriminant ("${e}")`}]};let f=n(c);if(!f.ok)return{ok:!1,errors:f.errors};let p=o(f.value);if(p==null)return i?{ok:!0,value:Object.assign({[r]:f.value},d)}:{ok:!1,errors:[{path:[...s,e],message:"Unexpected discriminant value"}]};let m=a(d,p);return m.ok?{ok:!0,value:Object.assign({[r]:c},m.value)}:m}});var uvt=v(r$=>{"use strict";Object.defineProperty(r$,"__esModule",{value:!0});r$.union=r$.discriminant=void 0;var tOr=ivt();Object.defineProperty(r$,"discriminant",{enumerable:!0,get:function(){return tOr.discriminant}});var rOr=svt();Object.defineProperty(r$,"union",{enumerable:!0,get:function(){return rOr.union}})});var lvt=v(vl=>{"use strict";var nOr=vl&&vl.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),xm=vl&&vl.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&nOr(e,t,r)};Object.defineProperty(vl,"__esModule",{value:!0});xm(b_t(),vl);xm(Kxe(),vl);xm($_t(),vl);xm(nCe(),vl);xm(H_t(),vl);xm(tCe(),vl);xm(PH(),vl);xm(Y_t(),vl);xm(Q_t(),vl);xm(Sm(),vl);xm(tvt(),vl);xm(ovt(),vl);xm(uvt(),vl)});var cvt=v(F1=>{"use strict";var oOr=F1&&F1.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),iOr=F1&&F1.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&oOr(e,t,r)};Object.defineProperty(F1,"__esModule",{value:!0});iOr(lvt(),F1)});var J=v(Ac=>{"use strict";var dvt=Ac&&Ac.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),aOr=Ac&&Ac.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),AH=Ac&&Ac.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&dvt(e,t,r)},sOr=Ac&&Ac.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&dvt(e,t,r);return aOr(e,t),e};Object.defineProperty(Ac,"__esModule",{value:!0});Ac.serialization=void 0;AH(Lbt(),Ac);AH(qbt(),Ac);AH(Wbt(),Ac);AH(Fk(),Ac);AH(f_t(),Ac);Ac.serialization=sOr(cvt())});var pvt=v(Ls=>{"use strict";var IH=Ls&&Ls.__awaiter||function(t,e,r,n){function o(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function s(c){try{l(n.next(c))}catch(d){a(d)}}function u(c){try{l(n.throw(c))}catch(d){a(d)}}function l(c){c.done?i(c.value):o(c.value).then(s,u)}l((n=n.apply(t,e||[])).next())})},MH=Ls&&Ls.__asyncValues||function(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof __values=="function"?__values(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(i){r[i]=t[i]&&function(a){return new Promise(function(s,u){a=t[i](a),o(s,u,a.done,a.value)})}}function o(i,a,s,u){Promise.resolve(u).then(function(l){i({value:l,done:s})},a)}},wa=Ls&&Ls.__await||function(t){return this instanceof wa?(this.v=t,this):new wa(t)},RH=Ls&&Ls.__asyncGenerator||function(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),o,i=[];return o={},a("next"),a("throw"),a("return"),o[Symbol.asyncIterator]=function(){return this},o;function a(f){n[f]&&(o[f]=function(p){return new Promise(function(m,h){i.push([f,p,m,h])>1||s(f,p)})})}function s(f,p){try{u(n[f](p))}catch(m){d(i[0][3],m)}}function u(f){f.value instanceof wa?Promise.resolve(f.value.v).then(l,c):d(i[0][2],f)}function l(f){s("next",f)}function c(f){s("throw",f)}function d(f,p){f(p),i.shift(),i.length&&s(i[0][0],i[0][1])}};Object.defineProperty(Ls,"__esModule",{value:!0});Ls.readableStreamAsyncIterable=Ls._decodeChunks=Ls.LineDecoder=Ls._iterSSEMessages=Ls.StreamUtils=void 0;var n$=ws(),iCe=class t{constructor(e,r){this.iterator=e,this.controller=r}static fromSSEResponse(e,r){let n=!1;function o(){return RH(this,arguments,function*(){var a,s;if(n)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");n=!0;let u=!1;try{try{for(var l=MH(fvt(e,r)),c;c=yield wa(l.next()),!c.done;){let d=c.value;if(!u){if(d.data.startsWith("[DONE]")){u=!0;continue}if(d.event===null){let f;try{f=JSON.parse(d.data)}catch(p){throw console.error("Could not parse message into JSON:",d.data),console.error("From chunk:",d.raw),p}if(f&&f.error)throw new n$.CohereError({message:`Error: ${f.error}`});yield yield wa(f)}else{let f;try{f=JSON.parse(d.data)}catch(p){throw console.error("Could not parse message into JSON:",d.data),console.error("From chunk:",d.raw),p}if(d.event=="error")throw new n$.CohereError({message:`Error: ${f.message}, ${f.error}`});yield yield wa({event:d.event,data:f})}}}}catch(d){a={error:d}}finally{try{c&&!c.done&&(s=l.return)&&(yield wa(s.call(l)))}finally{if(a)throw a.error}}u=!0}catch(d){if(d instanceof Error&&d.name==="AbortError")return yield wa(void 0);throw d}finally{u||r?.abort()}})}return new t(o,r)}static fromReadableStream(e,r){let n=!1;function o(){return RH(this,arguments,function*(){var s,u;let l=new HT,c=sCe(e);try{for(var d=MH(c),f;f=yield wa(d.next()),!f.done;){let p=f.value;for(let m of l.decode(p))yield yield wa(m)}}catch(p){s={error:p}}finally{try{f&&!f.done&&(u=d.return)&&(yield wa(u.call(d)))}finally{if(s)throw s.error}}for(let p of l.flush())yield yield wa(p)})}function i(){return RH(this,arguments,function*(){var s,u;if(n)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");n=!0;let l=!1;try{try{for(var c=MH(o()),d;d=yield wa(c.next()),!d.done;){let f=d.value;l||f&&(yield yield wa(JSON.parse(f)))}}catch(f){s={error:f}}finally{try{d&&!d.done&&(u=c.return)&&(yield wa(u.call(c)))}finally{if(s)throw s.error}}l=!0}catch(f){if(f instanceof Error&&f.name==="AbortError")return yield wa(void 0);throw f}finally{l||r?.abort()}})}return new t(i,r)}[Symbol.asyncIterator](){return this.iterator()}tee(){let e=[],r=[],n=this.iterator(),o=i=>({next:()=>{if(i.length===0){let a=n.next();e.push(a),r.push(a)}return i.shift()}});return[new t(()=>o(e),this.controller),new t(()=>o(r),this.controller)]}toReadableStream(){let e=this,r,n=new TextEncoder;return new ReadableStream({start(){return IH(this,void 0,void 0,function*(){r=e[Symbol.asyncIterator]()})},pull(o){return IH(this,void 0,void 0,function*(){try{let{value:i,done:a}=yield r.next();if(a)return o.close();let s=n.encode(JSON.stringify(i)+`
`);o.enqueue(s)}catch(i){o.error(i)}})},cancel(){var o;return IH(this,void 0,void 0,function*(){yield(o=r.return)===null||o===void 0?void 0:o.call(r)})}})}};Ls.StreamUtils=iCe;function fvt(t,e){return RH(this,arguments,function*(){var n,o;if(!t.body)throw e?.abort(),new n$.CohereError({message:"Attempted to iterate over a response with no body"});let i=new aCe,a=new HT,s=sCe(t.body);try{for(var u=MH(uOr(s)),l;l=yield wa(u.next()),!l.done;){let c=l.value;for(let d of a.decode(c)){let f=i.decode(d);f&&(yield yield wa(f))}}}catch(c){n={error:c}}finally{try{l&&!l.done&&(o=u.return)&&(yield wa(o.call(u)))}finally{if(n)throw n.error}}for(let c of a.flush()){let d=i.decode(c);d&&(yield yield wa(d))}})}Ls._iterSSEMessages=fvt;function uOr(t){return RH(this,arguments,function*(){var r,n;let o=new Uint8Array;try{for(var i=MH(t),a;a=yield wa(i.next()),!a.done;){let s=a.value;if(s==null)continue;let u=s instanceof ArrayBuffer?new Uint8Array(s):typeof s=="string"?new TextEncoder().encode(s):s,l=new Uint8Array(o.length+u.length);l.set(o),l.set(u,o.length),o=l;let c;for(;(c=lOr(o))!==-1;)yield yield wa(o.slice(0,c)),o=o.slice(c)}}catch(s){r={error:s}}finally{try{a&&!a.done&&(n=i.return)&&(yield wa(n.call(i)))}finally{if(r)throw r.error}}o.length>0&&(yield yield wa(o))})}function lOr(t){for(let n=0;n<t.length-2;n++){if(t[n]===10&&t[n+1]===10||t[n]===13&&t[n+1]===13)return n+2;if(t[n]===13&&t[n+1]===10&&n+3<t.length&&t[n+2]===13&&t[n+3]===10)return n+4}return-1}var aCe=class{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;let i={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],i}if(this.chunks.push(e),e.startsWith(":"))return null;let[r,n,o]=dOr(e,":");return o.startsWith(" ")&&(o=o.substring(1)),r==="event"?this.event=o:r==="data"&&this.data.push(o),null}},HT=class t{constructor(){this.buffer=[],this.trailingCR=!1}decode(e){let r=this.decodeText(e);if(this.trailingCR&&(r="\r"+r,this.trailingCR=!1),r.endsWith("\r")&&(this.trailingCR=!0,r=r.slice(0,-1)),!r)return[];let n=t.NEWLINE_CHARS.has(r[r.length-1]||""),o=r.split(t.NEWLINE_REGEXP);return n&&o.pop(),o.length===1&&!n?(this.buffer.push(o[0]),[]):(this.buffer.length>0&&(o=[this.buffer.join("")+o[0],...o.slice(1)],this.buffer=[]),n||(this.buffer=[o.pop()||""]),o)}decodeText(e){var r;if(e==null)return"";if(typeof e=="string")return e;if(typeof Buffer<"u"){if(e instanceof Buffer)return e.toString();if(e instanceof Uint8Array)return Buffer.from(e).toString();throw new n$.CohereError({message:`Unexpected: received non-Uint8Array (${e.constructor.name}) stream chunk in an environment with a global "Buffer" defined, which this library assumes to be Node. Please report this error.`})}if(typeof TextDecoder<"u"){if(e instanceof Uint8Array||e instanceof ArrayBuffer)return(r=this.textDecoder)!==null&&r!==void 0||(this.textDecoder=new TextDecoder("utf8")),this.textDecoder.decode(e);throw new n$.CohereError({message:`Unexpected: received non-Uint8Array/ArrayBuffer (${e.constructor.name}) in a web platform. Please report this error.`})}throw new n$.CohereError({message:"Unexpected: neither Buffer nor TextDecoder are available as globals. Please report this error."})}flush(){if(!this.buffer.length&&!this.trailingCR)return[];let e=[this.buffer.join("")];return this.buffer=[],this.trailingCR=!1,e}};Ls.LineDecoder=HT;HT.NEWLINE_CHARS=new Set([`
`,"\r"]);HT.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function cOr(t){let e=new HT,r=[];for(let n of t)r.push(...e.decode(n));return r}Ls._decodeChunks=cOr;function dOr(t,e){let r=t.indexOf(e);return r!==-1?[t.substring(0,r),e,t.substring(r+e.length)]:[t,"",""]}function sCe(t){if(t[Symbol.asyncIterator])return t;let e=t.getReader();return{next(){return IH(this,void 0,void 0,function*(){try{let r=yield e.read();return r?.done&&e.releaseLock(),r}catch(r){throw e.releaseLock(),r}})},return(){return IH(this,void 0,void 0,function*(){let r=e.cancel();return e.releaseLock(),yield r,{done:!0,value:void 0}})},[Symbol.asyncIterator](){return this}}}Ls.readableStreamAsyncIterable=sCe});var uCe=v(M_=>{"use strict";var fOr=M_&&M_.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),pOr=M_&&M_.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),mOr=M_&&M_.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&fOr(e,t,r);return pOr(e,t),e};Object.defineProperty(M_,"__esModule",{value:!0});M_.V2ChatStreamRequestCitationMode=void 0;var hOr=mOr(J());M_.V2ChatStreamRequestCitationMode=hOr.serialization.enum_(["FAST","ACCURATE","OFF"])});var lCe=v(R_=>{"use strict";var gOr=R_&&R_.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),yOr=R_&&R_.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),bOr=R_&&R_.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&gOr(e,t,r);return yOr(e,t),e};Object.defineProperty(R_,"__esModule",{value:!0});R_.V2ChatRequestCitationMode=void 0;var _Or=bOr(J());R_.V2ChatRequestCitationMode=_Or.serialization.enum_(["FAST","ACCURATE","OFF"])});var o$=v(j_=>{"use strict";var vOr=j_&&j_.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),wOr=j_&&j_.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),SOr=j_&&j_.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&vOr(e,t,r);return wOr(e,t),e};Object.defineProperty(j_,"__esModule",{value:!0});j_.TextContent=void 0;var mvt=SOr(J());j_.TextContent=mvt.serialization.object({text:mvt.serialization.string()})});var cCe=v(N_=>{"use strict";var xOr=N_&&N_.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),COr=N_&&N_.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),OOr=N_&&N_.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&xOr(e,t,r);return COr(e,t),e};Object.defineProperty(N_,"__esModule",{value:!0});N_.Content=void 0;var POr=OOr(J()),EOr=o$();N_.Content=POr.serialization.union("type",{text:EOr.TextContent}).transform({transform:t=>t,untransform:t=>t})});var fCe=v(D_=>{"use strict";var TOr=D_&&D_.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),AOr=D_&&D_.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),IOr=D_&&D_.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&TOr(e,t,r);return AOr(e,t),e};Object.defineProperty(D_,"__esModule",{value:!0});D_.UserMessageContent=void 0;var dCe=IOr(J()),MOr=cCe();D_.UserMessageContent=dCe.serialization.undiscriminatedUnion([dCe.serialization.string(),dCe.serialization.list(MOr.Content)])});var k1=v(L_=>{"use strict";var ROr=L_&&L_.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),jOr=L_&&L_.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),NOr=L_&&L_.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&ROr(e,t,r);return jOr(e,t),e};Object.defineProperty(L_,"__esModule",{value:!0});L_.ChatDocument=void 0;var pCe=NOr(J());L_.ChatDocument=pCe.serialization.record(pCe.serialization.string(),pCe.serialization.string())});var mCe=v(F_=>{"use strict";var DOr=F_&&F_.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),LOr=F_&&F_.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),FOr=F_&&F_.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&DOr(e,t,r);return LOr(e,t),e};Object.defineProperty(F_,"__esModule",{value:!0});F_.UserMessage=void 0;var hvt=FOr(J()),kOr=fCe(),$Or=k1();F_.UserMessage=hvt.serialization.object({content:kOr.UserMessageContent,documents:hvt.serialization.list($Or.ChatDocument).optional()})});var gCe=v(k_=>{"use strict";var BOr=k_&&k_.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),qOr=k_&&k_.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),UOr=k_&&k_.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&BOr(e,t,r);return qOr(e,t),e};Object.defineProperty(k_,"__esModule",{value:!0});k_.ToolCall2Function=void 0;var hCe=UOr(J());k_.ToolCall2Function=hCe.serialization.object({name:hCe.serialization.string().optional(),arguments:hCe.serialization.string().optional()})});var qee=v($_=>{"use strict";var zOr=$_&&$_.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),HOr=$_&&$_.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),VOr=$_&&$_.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&zOr(e,t,r);return HOr(e,t),e};Object.defineProperty($_,"__esModule",{value:!0});$_.ToolCall2=void 0;var yCe=VOr(J()),WOr=gCe();$_.ToolCall2=yCe.serialization.object({id:yCe.serialization.string().optional(),type:yCe.serialization.stringLiteral("function").optional(),function:WOr.ToolCall2Function.optional()})});var bCe=v(B_=>{"use strict";var KOr=B_&&B_.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),GOr=B_&&B_.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),JOr=B_&&B_.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&KOr(e,t,r);return GOr(e,t),e};Object.defineProperty(B_,"__esModule",{value:!0});B_.ToolSource=void 0;var i$=JOr(J());B_.ToolSource=i$.serialization.object({id:i$.serialization.string().optional(),toolOutput:i$.serialization.property("tool_output",i$.serialization.record(i$.serialization.string(),i$.serialization.unknown()).optional())})});var _Ce=v(q_=>{"use strict";var YOr=q_&&q_.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),ZOr=q_&&q_.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),XOr=q_&&q_.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&YOr(e,t,r);return ZOr(e,t),e};Object.defineProperty(q_,"__esModule",{value:!0});q_.DocumentSource=void 0;var jH=XOr(J());q_.DocumentSource=jH.serialization.object({id:jH.serialization.string().optional(),document:jH.serialization.record(jH.serialization.string(),jH.serialization.unknown()).optional()})});var vCe=v(U_=>{"use strict";var QOr=U_&&U_.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),ePr=U_&&U_.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),tPr=U_&&U_.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&QOr(e,t,r);return ePr(e,t),e};Object.defineProperty(U_,"__esModule",{value:!0});U_.Source=void 0;var rPr=tPr(J()),nPr=bCe(),oPr=_Ce();U_.Source=rPr.serialization.union("type",{tool:nPr.ToolSource,document:oPr.DocumentSource}).transform({transform:t=>t,untransform:t=>t})});var DH=v(z_=>{"use strict";var iPr=z_&&z_.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),aPr=z_&&z_.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),sPr=z_&&z_.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&iPr(e,t,r);return aPr(e,t),e};Object.defineProperty(z_,"__esModule",{value:!0});z_.Citation=void 0;var NH=sPr(J()),uPr=vCe();z_.Citation=NH.serialization.object({start:NH.serialization.number().optional(),end:NH.serialization.number().optional(),text:NH.serialization.string().optional(),sources:NH.serialization.list(uPr.Source).optional()})});var wCe=v(H_=>{"use strict";var lPr=H_&&H_.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),cPr=H_&&H_.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),dPr=H_&&H_.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&lPr(e,t,r);return cPr(e,t),e};Object.defineProperty(H_,"__esModule",{value:!0});H_.AssistantMessageContentItem=void 0;var fPr=dPr(J()),pPr=o$();H_.AssistantMessageContentItem=fPr.serialization.union("type",{text:pPr.TextContent}).transform({transform:t=>t,untransform:t=>t})});var xCe=v(V_=>{"use strict";var mPr=V_&&V_.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),hPr=V_&&V_.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),gPr=V_&&V_.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&mPr(e,t,r);return hPr(e,t),e};Object.defineProperty(V_,"__esModule",{value:!0});V_.AssistantMessageContent=void 0;var SCe=gPr(J()),yPr=wCe();V_.AssistantMessageContent=SCe.serialization.undiscriminatedUnion([SCe.serialization.string(),SCe.serialization.list(yPr.AssistantMessageContentItem)])});var CCe=v(W_=>{"use strict";var bPr=W_&&W_.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),_Pr=W_&&W_.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),vPr=W_&&W_.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&bPr(e,t,r);return _Pr(e,t),e};Object.defineProperty(W_,"__esModule",{value:!0});W_.AssistantMessage=void 0;var a$=vPr(J()),wPr=qee(),SPr=xCe(),xPr=DH();W_.AssistantMessage=a$.serialization.object({toolCalls:a$.serialization.property("tool_calls",a$.serialization.list(wPr.ToolCall2).optional()),toolPlan:a$.serialization.property("tool_plan",a$.serialization.string().optional()),content:SPr.AssistantMessageContent.optional(),citations:a$.serialization.list(xPr.Citation).optional()})});var OCe=v(K_=>{"use strict";var CPr=K_&&K_.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),OPr=K_&&K_.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),PPr=K_&&K_.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&CPr(e,t,r);return OPr(e,t),e};Object.defineProperty(K_,"__esModule",{value:!0});K_.SystemMessageContentItem=void 0;var EPr=PPr(J()),TPr=o$();K_.SystemMessageContentItem=EPr.serialization.union("type",{text:TPr.TextContent}).transform({transform:t=>t,untransform:t=>t})});var ECe=v(G_=>{"use strict";var APr=G_&&G_.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),IPr=G_&&G_.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),MPr=G_&&G_.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&APr(e,t,r);return IPr(e,t),e};Object.defineProperty(G_,"__esModule",{value:!0});G_.SystemMessageContent=void 0;var PCe=MPr(J()),RPr=OCe();G_.SystemMessageContent=PCe.serialization.undiscriminatedUnion([PCe.serialization.string(),PCe.serialization.list(RPr.SystemMessageContentItem)])});var TCe=v(J_=>{"use strict";var jPr=J_&&J_.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),NPr=J_&&J_.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),DPr=J_&&J_.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&jPr(e,t,r);return NPr(e,t),e};Object.defineProperty(J_,"__esModule",{value:!0});J_.SystemMessage=void 0;var LPr=DPr(J()),FPr=ECe();J_.SystemMessage=LPr.serialization.object({content:FPr.SystemMessageContent})});var ACe=v(Y_=>{"use strict";var kPr=Y_&&Y_.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),$Pr=Y_&&Y_.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),BPr=Y_&&Y_.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&kPr(e,t,r);return $Pr(e,t),e};Object.defineProperty(Y_,"__esModule",{value:!0});Y_.ToolContent=void 0;var Uee=BPr(J());Y_.ToolContent=Uee.serialization.object({output:Uee.serialization.record(Uee.serialization.string(),Uee.serialization.unknown())})});var ICe=v(Z_=>{"use strict";var qPr=Z_&&Z_.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),UPr=Z_&&Z_.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),zPr=Z_&&Z_.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&qPr(e,t,r);return UPr(e,t),e};Object.defineProperty(Z_,"__esModule",{value:!0});Z_.ToolMessage2ToolContentItem=void 0;var HPr=zPr(J()),VPr=ACe();Z_.ToolMessage2ToolContentItem=HPr.serialization.union("type",{tool_result_object:VPr.ToolContent}).transform({transform:t=>t,untransform:t=>t})});var MCe=v(X_=>{"use strict";var WPr=X_&&X_.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),KPr=X_&&X_.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),GPr=X_&&X_.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&WPr(e,t,r);return KPr(e,t),e};Object.defineProperty(X_,"__esModule",{value:!0});X_.ToolMessage2=void 0;var LH=GPr(J()),JPr=ICe();X_.ToolMessage2=LH.serialization.object({toolCallId:LH.serialization.property("tool_call_id",LH.serialization.string()),toolContent:LH.serialization.property("tool_content",LH.serialization.list(JPr.ToolMessage2ToolContentItem))})});var RCe=v(Q_=>{"use strict";var YPr=Q_&&Q_.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),ZPr=Q_&&Q_.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),XPr=Q_&&Q_.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&YPr(e,t,r);return ZPr(e,t),e};Object.defineProperty(Q_,"__esModule",{value:!0});Q_.ChatMessage2=void 0;var QPr=XPr(J()),eEr=mCe(),tEr=CCe(),rEr=TCe(),nEr=MCe();Q_.ChatMessage2=QPr.serialization.union("role",{user:eEr.UserMessage,assistant:tEr.AssistantMessage,system:rEr.SystemMessage,tool:nEr.ToolMessage2}).transform({transform:t=>t,untransform:t=>t})});var zee=v(ev=>{"use strict";var oEr=ev&&ev.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),iEr=ev&&ev.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),aEr=ev&&ev.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&oEr(e,t,r);return iEr(e,t),e};Object.defineProperty(ev,"__esModule",{value:!0});ev.ChatMessages=void 0;var sEr=aEr(J()),uEr=RCe();ev.ChatMessages=sEr.serialization.list(uEr.ChatMessage2)});var jCe=v(tv=>{"use strict";var lEr=tv&&tv.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),cEr=tv&&tv.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),dEr=tv&&tv.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&lEr(e,t,r);return cEr(e,t),e};Object.defineProperty(tv,"__esModule",{value:!0});tv.Tool2Function=void 0;var s$=dEr(J());tv.Tool2Function=s$.serialization.object({name:s$.serialization.string().optional(),description:s$.serialization.string().optional(),parameters:s$.serialization.record(s$.serialization.string(),s$.serialization.unknown()).optional()})});var Hee=v(rv=>{"use strict";var fEr=rv&&rv.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),pEr=rv&&rv.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),mEr=rv&&rv.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&fEr(e,t,r);return pEr(e,t),e};Object.defineProperty(rv,"__esModule",{value:!0});rv.Tool2=void 0;var gvt=mEr(J()),hEr=jCe();rv.Tool2=gvt.serialization.object({type:gvt.serialization.stringLiteral("function").optional(),function:hEr.Tool2Function.optional()})});var Vee=v(nv=>{"use strict";var gEr=nv&&nv.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),yEr=nv&&nv.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),bEr=nv&&nv.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&gEr(e,t,r);return yEr(e,t),e};Object.defineProperty(nv,"__esModule",{value:!0});nv.ChatFinishReason=void 0;var _Er=bEr(J());nv.ChatFinishReason=_Er.serialization.enum_(["complete","stop_sequence","max_tokens","tool_call","error","content_blocked","error_limit"])});var NCe=v(ov=>{"use strict";var vEr=ov&&ov.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),wEr=ov&&ov.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),SEr=ov&&ov.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&vEr(e,t,r);return wEr(e,t),e};Object.defineProperty(ov,"__esModule",{value:!0});ov.AssistantMessageResponseContentItem=void 0;var xEr=SEr(J()),CEr=o$();ov.AssistantMessageResponseContentItem=xEr.serialization.union("type",{text:CEr.TextContent}).transform({transform:t=>t,untransform:t=>t})});var DCe=v(iv=>{"use strict";var OEr=iv&&iv.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),PEr=iv&&iv.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),EEr=iv&&iv.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&OEr(e,t,r);return PEr(e,t),e};Object.defineProperty(iv,"__esModule",{value:!0});iv.AssistantMessageResponse=void 0;var VT=EEr(J()),TEr=qee(),AEr=NCe(),IEr=DH();iv.AssistantMessageResponse=VT.serialization.object({role:VT.serialization.stringLiteral("assistant"),toolCalls:VT.serialization.property("tool_calls",VT.serialization.list(TEr.ToolCall2).optional()),toolPlan:VT.serialization.property("tool_plan",VT.serialization.string().optional()),content:VT.serialization.list(AEr.AssistantMessageResponseContentItem).optional(),citations:VT.serialization.list(IEr.Citation).optional()})});var LCe=v(av=>{"use strict";var MEr=av&&av.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),REr=av&&av.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),jEr=av&&av.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&MEr(e,t,r);return REr(e,t),e};Object.defineProperty(av,"__esModule",{value:!0});av.UsageBilledUnits=void 0;var WT=jEr(J());av.UsageBilledUnits=WT.serialization.object({inputTokens:WT.serialization.property("input_tokens",WT.serialization.number().optional()),outputTokens:WT.serialization.property("output_tokens",WT.serialization.number().optional()),searchUnits:WT.serialization.property("search_units",WT.serialization.number().optional()),classifications:WT.serialization.number().optional()})});var FCe=v(sv=>{"use strict";var NEr=sv&&sv.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),DEr=sv&&sv.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),LEr=sv&&sv.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&NEr(e,t,r);return DEr(e,t),e};Object.defineProperty(sv,"__esModule",{value:!0});sv.UsageTokens=void 0;var FH=LEr(J());sv.UsageTokens=FH.serialization.object({inputTokens:FH.serialization.property("input_tokens",FH.serialization.number().optional()),outputTokens:FH.serialization.property("output_tokens",FH.serialization.number().optional())})});var Wee=v(uv=>{"use strict";var FEr=uv&&uv.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),kEr=uv&&uv.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),$Er=uv&&uv.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&FEr(e,t,r);return kEr(e,t),e};Object.defineProperty(uv,"__esModule",{value:!0});uv.Usage=void 0;var yvt=$Er(J()),BEr=LCe(),qEr=FCe();uv.Usage=yvt.serialization.object({billedUnits:yvt.serialization.property("billed_units",BEr.UsageBilledUnits.optional()),tokens:qEr.UsageTokens.optional()})});var bvt=v(lv=>{"use strict";var UEr=lv&&lv.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),zEr=lv&&lv.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),HEr=lv&&lv.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&UEr(e,t,r);return zEr(e,t),e};Object.defineProperty(lv,"__esModule",{value:!0});lv.NonStreamedChatResponse2=void 0;var Kee=HEr(J()),VEr=Vee(),WEr=DCe(),KEr=Wee();lv.NonStreamedChatResponse2=Kee.serialization.object({id:Kee.serialization.string(),finishReason:Kee.serialization.property("finish_reason",VEr.ChatFinishReason),prompt:Kee.serialization.string().optional(),message:WEr.AssistantMessageResponse.optional(),usage:KEr.Usage.optional()})});var Cm=v(cv=>{"use strict";var GEr=cv&&cv.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),JEr=cv&&cv.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),YEr=cv&&cv.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&GEr(e,t,r);return JEr(e,t),e};Object.defineProperty(cv,"__esModule",{value:!0});cv.ChatStreamEventType=void 0;var ZEr=YEr(J());cv.ChatStreamEventType=ZEr.serialization.object({})});var kCe=v(dv=>{"use strict";var XEr=dv&&dv.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),QEr=dv&&dv.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),eTr=dv&&dv.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&XEr(e,t,r);return QEr(e,t),e};Object.defineProperty(dv,"__esModule",{value:!0});dv.ChatMessageStartEventDeltaMessage=void 0;var _vt=eTr(J());dv.ChatMessageStartEventDeltaMessage=_vt.serialization.object({role:_vt.serialization.stringLiteral("assistant").optional()})});var $Ce=v(fv=>{"use strict";var tTr=fv&&fv.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),rTr=fv&&fv.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),nTr=fv&&fv.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&tTr(e,t,r);return rTr(e,t),e};Object.defineProperty(fv,"__esModule",{value:!0});fv.ChatMessageStartEventDelta=void 0;var oTr=nTr(J()),iTr=kCe();fv.ChatMessageStartEventDelta=oTr.serialization.object({message:iTr.ChatMessageStartEventDeltaMessage.optional()})});var BCe=v(pv=>{"use strict";var aTr=pv&&pv.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),sTr=pv&&pv.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),uTr=pv&&pv.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&aTr(e,t,r);return sTr(e,t),e};Object.defineProperty(pv,"__esModule",{value:!0});pv.ChatMessageStartEvent=void 0;var vvt=uTr(J()),lTr=$Ce(),cTr=Cm();pv.ChatMessageStartEvent=vvt.serialization.object({id:vvt.serialization.string().optional(),delta:lTr.ChatMessageStartEventDelta.optional()}).extend(cTr.ChatStreamEventType)});var UCe=v(mv=>{"use strict";var dTr=mv&&mv.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),fTr=mv&&mv.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),pTr=mv&&mv.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&dTr(e,t,r);return fTr(e,t),e};Object.defineProperty(mv,"__esModule",{value:!0});mv.ChatContentStartEventDeltaMessageContent=void 0;var qCe=pTr(J());mv.ChatContentStartEventDeltaMessageContent=qCe.serialization.object({text:qCe.serialization.string().optional(),type:qCe.serialization.stringLiteral("text").optional()})});var zCe=v(hv=>{"use strict";var mTr=hv&&hv.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),hTr=hv&&hv.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),gTr=hv&&hv.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&mTr(e,t,r);return hTr(e,t),e};Object.defineProperty(hv,"__esModule",{value:!0});hv.ChatContentStartEventDeltaMessage=void 0;var yTr=gTr(J()),bTr=UCe();hv.ChatContentStartEventDeltaMessage=yTr.serialization.object({content:bTr.ChatContentStartEventDeltaMessageContent.optional()})});var HCe=v(gv=>{"use strict";var _Tr=gv&&gv.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),vTr=gv&&gv.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),wTr=gv&&gv.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&_Tr(e,t,r);return vTr(e,t),e};Object.defineProperty(gv,"__esModule",{value:!0});gv.ChatContentStartEventDelta=void 0;var STr=wTr(J()),xTr=zCe();gv.ChatContentStartEventDelta=STr.serialization.object({message:xTr.ChatContentStartEventDeltaMessage.optional()})});var VCe=v(yv=>{"use strict";var CTr=yv&&yv.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),OTr=yv&&yv.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),PTr=yv&&yv.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&CTr(e,t,r);return OTr(e,t),e};Object.defineProperty(yv,"__esModule",{value:!0});yv.ChatContentStartEvent=void 0;var wvt=PTr(J()),ETr=HCe(),TTr=Cm();yv.ChatContentStartEvent=wvt.serialization.object({index:wvt.serialization.number().optional(),delta:ETr.ChatContentStartEventDelta.optional()}).extend(TTr.ChatStreamEventType)});var WCe=v(bv=>{"use strict";var ATr=bv&&bv.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),ITr=bv&&bv.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),MTr=bv&&bv.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&ATr(e,t,r);return ITr(e,t),e};Object.defineProperty(bv,"__esModule",{value:!0});bv.ChatContentDeltaEventDeltaMessageContent=void 0;var Svt=MTr(J());bv.ChatContentDeltaEventDeltaMessageContent=Svt.serialization.object({text:Svt.serialization.string().optional()})});var KCe=v(_v=>{"use strict";var RTr=_v&&_v.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),jTr=_v&&_v.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),NTr=_v&&_v.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&RTr(e,t,r);return jTr(e,t),e};Object.defineProperty(_v,"__esModule",{value:!0});_v.ChatContentDeltaEventDeltaMessage=void 0;var DTr=NTr(J()),LTr=WCe();_v.ChatContentDeltaEventDeltaMessage=DTr.serialization.object({content:LTr.ChatContentDeltaEventDeltaMessageContent.optional()})});var GCe=v(vv=>{"use strict";var FTr=vv&&vv.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),kTr=vv&&vv.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),$Tr=vv&&vv.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&FTr(e,t,r);return kTr(e,t),e};Object.defineProperty(vv,"__esModule",{value:!0});vv.ChatContentDeltaEventDelta=void 0;var BTr=$Tr(J()),qTr=KCe();vv.ChatContentDeltaEventDelta=BTr.serialization.object({message:qTr.ChatContentDeltaEventDeltaMessage.optional()})});var JCe=v(wv=>{"use strict";var UTr=wv&&wv.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),zTr=wv&&wv.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),HTr=wv&&wv.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&UTr(e,t,r);return zTr(e,t),e};Object.defineProperty(wv,"__esModule",{value:!0});wv.ChatContentDeltaEvent=void 0;var xvt=HTr(J()),VTr=GCe(),WTr=Cm();wv.ChatContentDeltaEvent=xvt.serialization.object({index:xvt.serialization.number().optional(),delta:VTr.ChatContentDeltaEventDelta.optional()}).extend(WTr.ChatStreamEventType)});var YCe=v(Sv=>{"use strict";var KTr=Sv&&Sv.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),GTr=Sv&&Sv.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),JTr=Sv&&Sv.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&KTr(e,t,r);return GTr(e,t),e};Object.defineProperty(Sv,"__esModule",{value:!0});Sv.ChatContentEndEvent=void 0;var Cvt=JTr(J()),YTr=Cm();Sv.ChatContentEndEvent=Cvt.serialization.object({index:Cvt.serialization.number().optional()}).extend(YTr.ChatStreamEventType)});var XCe=v(xv=>{"use strict";var ZTr=xv&&xv.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),XTr=xv&&xv.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),QTr=xv&&xv.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&ZTr(e,t,r);return XTr(e,t),e};Object.defineProperty(xv,"__esModule",{value:!0});xv.ChatToolPlanDeltaEventDelta=void 0;var ZCe=QTr(J());xv.ChatToolPlanDeltaEventDelta=ZCe.serialization.object({toolPlan:ZCe.serialization.property("tool_plan",ZCe.serialization.string().optional())})});var QCe=v(Cv=>{"use strict";var eAr=Cv&&Cv.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),tAr=Cv&&Cv.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),rAr=Cv&&Cv.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&eAr(e,t,r);return tAr(e,t),e};Object.defineProperty(Cv,"__esModule",{value:!0});Cv.ChatToolPlanDeltaEvent=void 0;var nAr=rAr(J()),oAr=XCe(),iAr=Cm();Cv.ChatToolPlanDeltaEvent=nAr.serialization.object({delta:oAr.ChatToolPlanDeltaEventDelta.optional()}).extend(iAr.ChatStreamEventType)});var tOe=v(Ov=>{"use strict";var aAr=Ov&&Ov.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),sAr=Ov&&Ov.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),uAr=Ov&&Ov.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&aAr(e,t,r);return sAr(e,t),e};Object.defineProperty(Ov,"__esModule",{value:!0});Ov.ChatToolCallStartEventDeltaToolCallFunction=void 0;var eOe=uAr(J());Ov.ChatToolCallStartEventDeltaToolCallFunction=eOe.serialization.object({name:eOe.serialization.string().optional(),arguments:eOe.serialization.string().optional()})});var nOe=v(Pv=>{"use strict";var lAr=Pv&&Pv.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),cAr=Pv&&Pv.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),dAr=Pv&&Pv.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&lAr(e,t,r);return cAr(e,t),e};Object.defineProperty(Pv,"__esModule",{value:!0});Pv.ChatToolCallStartEventDeltaToolCall=void 0;var rOe=dAr(J()),fAr=tOe();Pv.ChatToolCallStartEventDeltaToolCall=rOe.serialization.object({id:rOe.serialization.string().optional(),type:rOe.serialization.stringLiteral("function").optional(),function:fAr.ChatToolCallStartEventDeltaToolCallFunction.optional()})});var oOe=v(Ev=>{"use strict";var pAr=Ev&&Ev.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),mAr=Ev&&Ev.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),hAr=Ev&&Ev.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&pAr(e,t,r);return mAr(e,t),e};Object.defineProperty(Ev,"__esModule",{value:!0});Ev.ChatToolCallStartEventDelta=void 0;var Ovt=hAr(J()),gAr=nOe();Ev.ChatToolCallStartEventDelta=Ovt.serialization.object({toolCall:Ovt.serialization.property("tool_call",gAr.ChatToolCallStartEventDeltaToolCall.optional())})});var iOe=v(Tv=>{"use strict";var yAr=Tv&&Tv.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),bAr=Tv&&Tv.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),_Ar=Tv&&Tv.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&yAr(e,t,r);return bAr(e,t),e};Object.defineProperty(Tv,"__esModule",{value:!0});Tv.ChatToolCallStartEvent=void 0;var Pvt=_Ar(J()),vAr=oOe(),wAr=Cm();Tv.ChatToolCallStartEvent=Pvt.serialization.object({index:Pvt.serialization.number().optional(),delta:vAr.ChatToolCallStartEventDelta.optional()}).extend(wAr.ChatStreamEventType)});var aOe=v(Av=>{"use strict";var SAr=Av&&Av.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),xAr=Av&&Av.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),CAr=Av&&Av.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&SAr(e,t,r);return xAr(e,t),e};Object.defineProperty(Av,"__esModule",{value:!0});Av.ChatToolCallDeltaEventDeltaToolCallFunction=void 0;var Evt=CAr(J());Av.ChatToolCallDeltaEventDeltaToolCallFunction=Evt.serialization.object({arguments:Evt.serialization.string().optional()})});var sOe=v(Iv=>{"use strict";var OAr=Iv&&Iv.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),PAr=Iv&&Iv.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),EAr=Iv&&Iv.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&OAr(e,t,r);return PAr(e,t),e};Object.defineProperty(Iv,"__esModule",{value:!0});Iv.ChatToolCallDeltaEventDeltaToolCall=void 0;var TAr=EAr(J()),AAr=aOe();Iv.ChatToolCallDeltaEventDeltaToolCall=TAr.serialization.object({function:AAr.ChatToolCallDeltaEventDeltaToolCallFunction.optional()})});var uOe=v(Mv=>{"use strict";var IAr=Mv&&Mv.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),MAr=Mv&&Mv.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),RAr=Mv&&Mv.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&IAr(e,t,r);return MAr(e,t),e};Object.defineProperty(Mv,"__esModule",{value:!0});Mv.ChatToolCallDeltaEventDelta=void 0;var Tvt=RAr(J()),jAr=sOe();Mv.ChatToolCallDeltaEventDelta=Tvt.serialization.object({toolCall:Tvt.serialization.property("tool_call",jAr.ChatToolCallDeltaEventDeltaToolCall.optional())})});var lOe=v(Rv=>{"use strict";var NAr=Rv&&Rv.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),DAr=Rv&&Rv.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),LAr=Rv&&Rv.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&NAr(e,t,r);return DAr(e,t),e};Object.defineProperty(Rv,"__esModule",{value:!0});Rv.ChatToolCallDeltaEvent=void 0;var Avt=LAr(J()),FAr=uOe(),kAr=Cm();Rv.ChatToolCallDeltaEvent=Avt.serialization.object({index:Avt.serialization.number().optional(),delta:FAr.ChatToolCallDeltaEventDelta.optional()}).extend(kAr.ChatStreamEventType)});var cOe=v(jv=>{"use strict";var $Ar=jv&&jv.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),BAr=jv&&jv.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),qAr=jv&&jv.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&$Ar(e,t,r);return BAr(e,t),e};Object.defineProperty(jv,"__esModule",{value:!0});jv.ChatToolCallEndEvent=void 0;var Ivt=qAr(J()),UAr=Cm();jv.ChatToolCallEndEvent=Ivt.serialization.object({index:Ivt.serialization.number().optional()}).extend(UAr.ChatStreamEventType)});var dOe=v(Nv=>{"use strict";var zAr=Nv&&Nv.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),HAr=Nv&&Nv.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),VAr=Nv&&Nv.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&zAr(e,t,r);return HAr(e,t),e};Object.defineProperty(Nv,"__esModule",{value:!0});Nv.ChatMessageEndEventDelta=void 0;var Mvt=VAr(J()),WAr=Vee(),KAr=Wee();Nv.ChatMessageEndEventDelta=Mvt.serialization.object({finishReason:Mvt.serialization.property("finish_reason",WAr.ChatFinishReason.optional()),usage:KAr.Usage.optional()})});var fOe=v(Dv=>{"use strict";var GAr=Dv&&Dv.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),JAr=Dv&&Dv.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),YAr=Dv&&Dv.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&GAr(e,t,r);return JAr(e,t),e};Object.defineProperty(Dv,"__esModule",{value:!0});Dv.ChatMessageEndEvent=void 0;var Rvt=YAr(J()),ZAr=dOe(),XAr=Cm();Dv.ChatMessageEndEvent=Rvt.serialization.object({id:Rvt.serialization.string().optional(),delta:ZAr.ChatMessageEndEventDelta.optional()}).extend(XAr.ChatStreamEventType)});var pOe=v(Lv=>{"use strict";var QAr=Lv&&Lv.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),eIr=Lv&&Lv.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),tIr=Lv&&Lv.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&QAr(e,t,r);return eIr(e,t),e};Object.defineProperty(Lv,"__esModule",{value:!0});Lv.CitationStartEventDeltaMessage=void 0;var rIr=tIr(J()),nIr=DH();Lv.CitationStartEventDeltaMessage=rIr.serialization.object({citations:nIr.Citation.optional()})});var mOe=v(Fv=>{"use strict";var oIr=Fv&&Fv.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),iIr=Fv&&Fv.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),aIr=Fv&&Fv.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&oIr(e,t,r);return iIr(e,t),e};Object.defineProperty(Fv,"__esModule",{value:!0});Fv.CitationStartEventDelta=void 0;var sIr=aIr(J()),uIr=pOe();Fv.CitationStartEventDelta=sIr.serialization.object({message:uIr.CitationStartEventDeltaMessage.optional()})});var hOe=v(kv=>{"use strict";var lIr=kv&&kv.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),cIr=kv&&kv.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),dIr=kv&&kv.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&lIr(e,t,r);return cIr(e,t),e};Object.defineProperty(kv,"__esModule",{value:!0});kv.CitationStartEvent=void 0;var jvt=dIr(J()),fIr=mOe(),pIr=Cm();kv.CitationStartEvent=jvt.serialization.object({index:jvt.serialization.number().optional(),delta:fIr.CitationStartEventDelta.optional()}).extend(pIr.ChatStreamEventType)});var gOe=v($v=>{"use strict";var mIr=$v&&$v.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),hIr=$v&&$v.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),gIr=$v&&$v.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&mIr(e,t,r);return hIr(e,t),e};Object.defineProperty($v,"__esModule",{value:!0});$v.CitationEndEvent=void 0;var Nvt=gIr(J()),yIr=Cm();$v.CitationEndEvent=Nvt.serialization.object({index:Nvt.serialization.number().optional()}).extend(yIr.ChatStreamEventType)});var Dvt=v(Bv=>{"use strict";var bIr=Bv&&Bv.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),_Ir=Bv&&Bv.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),vIr=Bv&&Bv.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&bIr(e,t,r);return _Ir(e,t),e};Object.defineProperty(Bv,"__esModule",{value:!0});Bv.StreamedChatResponse2=void 0;var wIr=vIr(J()),SIr=BCe(),xIr=VCe(),CIr=JCe(),OIr=YCe(),PIr=QCe(),EIr=iOe(),TIr=lOe(),AIr=cOe(),IIr=hOe(),MIr=gOe(),RIr=fOe();Bv.StreamedChatResponse2=wIr.serialization.union("type",{"message-start":SIr.ChatMessageStartEvent,"content-start":xIr.ChatContentStartEvent,"content-delta":CIr.ChatContentDeltaEvent,"content-end":OIr.ChatContentEndEvent,"tool-plan-delta":PIr.ChatToolPlanDeltaEvent,"tool-call-start":EIr.ChatToolCallStartEvent,"tool-call-delta":TIr.ChatToolCallDeltaEvent,"tool-call-end":AIr.ChatToolCallEndEvent,"citation-start":IIr.CitationStartEvent,"citation-end":MIr.CitationEndEvent,"message-end":RIr.ChatMessageEndEvent}).transform({transform:t=>t,untransform:t=>t})});var yOe=v(At=>{"use strict";var jIr=At&&At.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),$t=At&&At.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&jIr(e,t,r)};Object.defineProperty(At,"__esModule",{value:!0});$t(uCe(),At);$t(lCe(),At);$t(o$(),At);$t(cCe(),At);$t(fCe(),At);$t(mCe(),At);$t(gCe(),At);$t(qee(),At);$t(bCe(),At);$t(_Ce(),At);$t(vCe(),At);$t(DH(),At);$t(wCe(),At);$t(xCe(),At);$t(CCe(),At);$t(OCe(),At);$t(ECe(),At);$t(TCe(),At);$t(ACe(),At);$t(ICe(),At);$t(MCe(),At);$t(RCe(),At);$t(zee(),At);$t(jCe(),At);$t(Hee(),At);$t(Vee(),At);$t(NCe(),At);$t(DCe(),At);$t(LCe(),At);$t(FCe(),At);$t(Wee(),At);$t(bvt(),At);$t(Cm(),At);$t(kCe(),At);$t($Ce(),At);$t(BCe(),At);$t(UCe(),At);$t(zCe(),At);$t(HCe(),At);$t(VCe(),At);$t(WCe(),At);$t(KCe(),At);$t(GCe(),At);$t(JCe(),At);$t(YCe(),At);$t(XCe(),At);$t(QCe(),At);$t(tOe(),At);$t(nOe(),At);$t(oOe(),At);$t(iOe(),At);$t(aOe(),At);$t(sOe(),At);$t(uOe(),At);$t(lOe(),At);$t(cOe(),At);$t(dOe(),At);$t(fOe(),At);$t(Dvt(),At)});var Gee=v(qv=>{"use strict";var NIr=qv&&qv.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),DIr=qv&&qv.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),LIr=qv&&qv.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&NIr(e,t,r);return DIr(e,t),e};Object.defineProperty(qv,"__esModule",{value:!0});qv.TextResponseFormat=void 0;var FIr=LIr(J());qv.TextResponseFormat=FIr.serialization.object({})});var bOe=v(Uv=>{"use strict";var kIr=Uv&&Uv.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),$Ir=Uv&&Uv.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),BIr=Uv&&Uv.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&kIr(e,t,r);return $Ir(e,t),e};Object.defineProperty(Uv,"__esModule",{value:!0});Uv.JsonResponseFormat2=void 0;var kH=BIr(J());Uv.JsonResponseFormat2=kH.serialization.object({jsonSchema:kH.serialization.property("json_schema",kH.serialization.record(kH.serialization.string(),kH.serialization.unknown()).optional())})});var Jee=v(zv=>{"use strict";var qIr=zv&&zv.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),UIr=zv&&zv.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),zIr=zv&&zv.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&qIr(e,t,r);return UIr(e,t),e};Object.defineProperty(zv,"__esModule",{value:!0});zv.ResponseFormat2=void 0;var HIr=zIr(J()),VIr=Gee(),WIr=bOe();zv.ResponseFormat2=HIr.serialization.union("type",{text:VIr.TextResponseFormat,json_object:WIr.JsonResponseFormat2}).transform({transform:t=>t,untransform:t=>t})});var Lvt=v(Hv=>{"use strict";var KIr=Hv&&Hv.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),GIr=Hv&&Hv.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),JIr=Hv&&Hv.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&KIr(e,t,r);return GIr(e,t),e};Object.defineProperty(Hv,"__esModule",{value:!0});Hv.V2ChatStreamRequest=void 0;var Fs=JIr(J()),YIr=zee(),ZIr=Hee(),XIr=uCe(),QIr=Jee();Hv.V2ChatStreamRequest=Fs.serialization.object({model:Fs.serialization.string(),messages:YIr.ChatMessages,tools:Fs.serialization.list(ZIr.Tool2).optional(),citationMode:Fs.serialization.property("citation_mode",XIr.V2ChatStreamRequestCitationMode.optional()),responseFormat:Fs.serialization.property("response_format",QIr.ResponseFormat2.optional()),maxTokens:Fs.serialization.property("max_tokens",Fs.serialization.number().optional()),stopSequences:Fs.serialization.property("stop_sequences",Fs.serialization.list(Fs.serialization.string()).optional()),temperature:Fs.serialization.number().optional(),seed:Fs.serialization.number().optional(),frequencyPenalty:Fs.serialization.property("frequency_penalty",Fs.serialization.number().optional()),presencePenalty:Fs.serialization.property("presence_penalty",Fs.serialization.number().optional()),k:Fs.serialization.number().optional(),p:Fs.serialization.number().optional(),returnPrompt:Fs.serialization.property("return_prompt",Fs.serialization.boolean().optional())})});var Fvt=v(Vv=>{"use strict";var eMr=Vv&&Vv.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),tMr=Vv&&Vv.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),rMr=Vv&&Vv.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&eMr(e,t,r);return tMr(e,t),e};Object.defineProperty(Vv,"__esModule",{value:!0});Vv.V2ChatRequest=void 0;var ks=rMr(J()),nMr=zee(),oMr=Hee(),iMr=lCe(),aMr=Jee();Vv.V2ChatRequest=ks.serialization.object({model:ks.serialization.string(),messages:nMr.ChatMessages,tools:ks.serialization.list(oMr.Tool2).optional(),citationMode:ks.serialization.property("citation_mode",iMr.V2ChatRequestCitationMode.optional()),responseFormat:ks.serialization.property("response_format",aMr.ResponseFormat2.optional()),maxTokens:ks.serialization.property("max_tokens",ks.serialization.number().optional()),stopSequences:ks.serialization.property("stop_sequences",ks.serialization.list(ks.serialization.string()).optional()),temperature:ks.serialization.number().optional(),seed:ks.serialization.number().optional(),frequencyPenalty:ks.serialization.property("frequency_penalty",ks.serialization.number().optional()),presencePenalty:ks.serialization.property("presence_penalty",ks.serialization.number().optional()),k:ks.serialization.number().optional(),p:ks.serialization.number().optional(),returnPrompt:ks.serialization.property("return_prompt",ks.serialization.boolean().optional())})});var _Oe=v(u$=>{"use strict";Object.defineProperty(u$,"__esModule",{value:!0});u$.V2ChatRequest=u$.V2ChatStreamRequest=void 0;var sMr=Lvt();Object.defineProperty(u$,"V2ChatStreamRequest",{enumerable:!0,get:function(){return sMr.V2ChatStreamRequest}});var uMr=Fvt();Object.defineProperty(u$,"V2ChatRequest",{enumerable:!0,get:function(){return uMr.V2ChatRequest}})});var kvt=v($1=>{"use strict";var lMr=$1&&$1.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),cMr=$1&&$1.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&lMr(e,t,r)};Object.defineProperty($1,"__esModule",{value:!0});cMr(_Oe(),$1)});var Bvt=v(KT=>{"use strict";var dMr=KT&&KT.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),$vt=KT&&KT.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&dMr(e,t,r)};Object.defineProperty(KT,"__esModule",{value:!0});$vt(yOe(),KT);$vt(kvt(),KT)});var vOe=v(Wv=>{"use strict";var fMr=Wv&&Wv.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),pMr=Wv&&Wv.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),mMr=Wv&&Wv.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&fMr(e,t,r);return pMr(e,t),e};Object.defineProperty(Wv,"__esModule",{value:!0});Wv.CreateEmbedJobRequestTruncate=void 0;var hMr=mMr(J());Wv.CreateEmbedJobRequestTruncate=hMr.serialization.enum_(["START","END"])});var wOe=v(B1=>{"use strict";var gMr=B1&&B1.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),yMr=B1&&B1.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&gMr(e,t,r)};Object.defineProperty(B1,"__esModule",{value:!0});yMr(vOe(),B1)});var Yee=v(Kv=>{"use strict";var bMr=Kv&&Kv.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),_Mr=Kv&&Kv.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),vMr=Kv&&Kv.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&bMr(e,t,r);return _Mr(e,t),e};Object.defineProperty(Kv,"__esModule",{value:!0});Kv.EmbedInputType=void 0;var wMr=vMr(J());Kv.EmbedInputType=wMr.serialization.enum_(["search_document","search_query","classification","clustering"])});var Zee=v(Gv=>{"use strict";var SMr=Gv&&Gv.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),xMr=Gv&&Gv.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),CMr=Gv&&Gv.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&SMr(e,t,r);return xMr(e,t),e};Object.defineProperty(Gv,"__esModule",{value:!0});Gv.EmbeddingType=void 0;var OMr=CMr(J());Gv.EmbeddingType=OMr.serialization.enum_(["float","int8","uint8","binary","ubinary"])});var qvt=v(Jv=>{"use strict";var PMr=Jv&&Jv.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),EMr=Jv&&Jv.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),TMr=Jv&&Jv.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&PMr(e,t,r);return EMr(e,t),e};Object.defineProperty(Jv,"__esModule",{value:!0});Jv.CreateEmbedJobRequest=void 0;var GT=TMr(J()),AMr=Yee(),IMr=Zee(),MMr=vOe();Jv.CreateEmbedJobRequest=GT.serialization.object({model:GT.serialization.string(),datasetId:GT.serialization.property("dataset_id",GT.serialization.string()),inputType:GT.serialization.property("input_type",AMr.EmbedInputType),name:GT.serialization.string().optional(),embeddingTypes:GT.serialization.property("embedding_types",GT.serialization.list(IMr.EmbeddingType).optional()),truncate:MMr.CreateEmbedJobRequestTruncate.optional()})});var SOe=v(Xee=>{"use strict";Object.defineProperty(Xee,"__esModule",{value:!0});Xee.CreateEmbedJobRequest=void 0;var RMr=qvt();Object.defineProperty(Xee,"CreateEmbedJobRequest",{enumerable:!0,get:function(){return RMr.CreateEmbedJobRequest}})});var Uvt=v(q1=>{"use strict";var jMr=q1&&q1.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),NMr=q1&&q1.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&jMr(e,t,r)};Object.defineProperty(q1,"__esModule",{value:!0});NMr(SOe(),q1)});var Hvt=v(JT=>{"use strict";var DMr=JT&&JT.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),zvt=JT&&JT.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&DMr(e,t,r)};Object.defineProperty(JT,"__esModule",{value:!0});zvt(wOe(),JT);zvt(Uvt(),JT)});var xOe=v(Yv=>{"use strict";var LMr=Yv&&Yv.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),FMr=Yv&&Yv.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),kMr=Yv&&Yv.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&LMr(e,t,r);return FMr(e,t),e};Object.defineProperty(Yv,"__esModule",{value:!0});Yv.DatasetType=void 0;var $Mr=kMr(J());Yv.DatasetType=$Mr.serialization.enum_(["embed-input","embed-result","cluster-result","cluster-outliers","reranker-finetune-input","single-label-classification-finetune-input","chat-finetune-input","multi-label-classification-finetune-input"])});var COe=v(Zv=>{"use strict";var BMr=Zv&&Zv.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),qMr=Zv&&Zv.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),UMr=Zv&&Zv.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&BMr(e,t,r);return qMr(e,t),e};Object.defineProperty(Zv,"__esModule",{value:!0});Zv.DatasetValidationStatus=void 0;var zMr=UMr(J());Zv.DatasetValidationStatus=zMr.serialization.enum_(["unknown","queued","processing","failed","validated","skipped"])});var OOe=v(Xv=>{"use strict";var HMr=Xv&&Xv.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),VMr=Xv&&Xv.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),WMr=Xv&&Xv.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&HMr(e,t,r);return VMr(e,t),e};Object.defineProperty(Xv,"__esModule",{value:!0});Xv.DatasetPart=void 0;var Om=WMr(J());Xv.DatasetPart=Om.serialization.object({id:Om.serialization.string(),name:Om.serialization.string(),url:Om.serialization.string().optional(),index:Om.serialization.number().optional(),sizeBytes:Om.serialization.property("size_bytes",Om.serialization.number().optional()),numRows:Om.serialization.property("num_rows",Om.serialization.number().optional()),originalUrl:Om.serialization.property("original_url",Om.serialization.string().optional()),samples:Om.serialization.list(Om.serialization.string()).optional()})});var Qee=v(Qv=>{"use strict";var KMr=Qv&&Qv.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),GMr=Qv&&Qv.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),JMr=Qv&&Qv.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&KMr(e,t,r);return GMr(e,t),e};Object.defineProperty(Qv,"__esModule",{value:!0});Qv.Dataset=void 0;var Ba=JMr(J()),YMr=xOe(),ZMr=COe(),XMr=OOe();Qv.Dataset=Ba.serialization.object({id:Ba.serialization.string(),name:Ba.serialization.string(),createdAt:Ba.serialization.property("created_at",Ba.serialization.date()),updatedAt:Ba.serialization.property("updated_at",Ba.serialization.date()),datasetType:Ba.serialization.property("dataset_type",YMr.DatasetType),validationStatus:Ba.serialization.property("validation_status",ZMr.DatasetValidationStatus),validationError:Ba.serialization.property("validation_error",Ba.serialization.string().optional()),schema:Ba.serialization.string().optional(),requiredFields:Ba.serialization.property("required_fields",Ba.serialization.list(Ba.serialization.string()).optional()),preserveFields:Ba.serialization.property("preserve_fields",Ba.serialization.list(Ba.serialization.string()).optional()),datasetParts:Ba.serialization.property("dataset_parts",Ba.serialization.list(XMr.DatasetPart).optional()),validationWarnings:Ba.serialization.property("validation_warnings",Ba.serialization.list(Ba.serialization.string()).optional())})});var Wvt=v(ew=>{"use strict";var QMr=ew&&ew.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),eRr=ew&&ew.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),tRr=ew&&ew.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&QMr(e,t,r);return eRr(e,t),e};Object.defineProperty(ew,"__esModule",{value:!0});ew.DatasetsListResponse=void 0;var Vvt=tRr(J()),rRr=Qee();ew.DatasetsListResponse=Vvt.serialization.object({datasets:Vvt.serialization.list(rRr.Dataset).optional()})});var Kvt=v(tw=>{"use strict";var nRr=tw&&tw.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),oRr=tw&&tw.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),iRr=tw&&tw.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&nRr(e,t,r);return oRr(e,t),e};Object.defineProperty(tw,"__esModule",{value:!0});tw.DatasetsCreateResponseDatasetPartsItem=void 0;var YT=iRr(J());tw.DatasetsCreateResponseDatasetPartsItem=YT.serialization.object({name:YT.serialization.string().optional(),numRows:YT.serialization.property("num_rows",YT.serialization.number().optional()),samples:YT.serialization.list(YT.serialization.string()).optional(),partKind:YT.serialization.property("part_kind",YT.serialization.string().optional())})});var Jvt=v(rw=>{"use strict";var aRr=rw&&rw.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),sRr=rw&&rw.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),uRr=rw&&rw.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&aRr(e,t,r);return sRr(e,t),e};Object.defineProperty(rw,"__esModule",{value:!0});rw.DatasetsCreateResponse=void 0;var Gvt=uRr(J());rw.DatasetsCreateResponse=Gvt.serialization.object({id:Gvt.serialization.string().optional()})});var Yvt=v(nw=>{"use strict";var lRr=nw&&nw.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),cRr=nw&&nw.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),dRr=nw&&nw.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&lRr(e,t,r);return cRr(e,t),e};Object.defineProperty(nw,"__esModule",{value:!0});nw.DatasetsGetUsageResponse=void 0;var POe=dRr(J());nw.DatasetsGetUsageResponse=POe.serialization.object({organizationUsage:POe.serialization.property("organization_usage",POe.serialization.number().optional())})});var Zvt=v(ow=>{"use strict";var fRr=ow&&ow.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),pRr=ow&&ow.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),mRr=ow&&ow.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&fRr(e,t,r);return pRr(e,t),e};Object.defineProperty(ow,"__esModule",{value:!0});ow.DatasetsGetResponse=void 0;var hRr=mRr(J()),gRr=Qee();ow.DatasetsGetResponse=hRr.serialization.object({dataset:gRr.Dataset})});var EOe=v(vy=>{"use strict";var yRr=vy&&vy.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),$H=vy&&vy.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&yRr(e,t,r)};Object.defineProperty(vy,"__esModule",{value:!0});$H(Wvt(),vy);$H(Kvt(),vy);$H(Jvt(),vy);$H(Yvt(),vy);$H(Zvt(),vy)});var Xvt=v(iw=>{"use strict";var bRr=iw&&iw.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),_Rr=iw&&iw.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),vRr=iw&&iw.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&bRr(e,t,r);return _Rr(e,t),e};Object.defineProperty(iw,"__esModule",{value:!0});iw.Response=void 0;var TOe=vRr(J());iw.Response=TOe.serialization.record(TOe.serialization.string(),TOe.serialization.unknown())});var Qvt=v(aw=>{"use strict";var wRr=aw&&aw.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),SRr=aw&&aw.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),xRr=aw&&aw.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&wRr(e,t,r);return SRr(e,t),e};Object.defineProperty(aw,"__esModule",{value:!0});aw.delete=void 0;aw.delete=xRr(Xvt())});var twt=v(ZT=>{"use strict";var CRr=ZT&&ZT.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),ewt=ZT&&ZT.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&CRr(e,t,r)};Object.defineProperty(ZT,"__esModule",{value:!0});ewt(EOe(),ZT);ewt(Qvt(),ZT)});var AOe=v(sw=>{"use strict";var ORr=sw&&sw.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),PRr=sw&&sw.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),ERr=sw&&sw.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&ORr(e,t,r);return PRr(e,t),e};Object.defineProperty(sw,"__esModule",{value:!0});sw.BaseType=void 0;var TRr=ERr(J());sw.BaseType=TRr.serialization.enum_(["BASE_TYPE_UNSPECIFIED","BASE_TYPE_GENERATIVE","BASE_TYPE_CLASSIFICATION","BASE_TYPE_RERANK","BASE_TYPE_CHAT"])});var IOe=v(uw=>{"use strict";var ARr=uw&&uw.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),IRr=uw&&uw.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),MRr=uw&&uw.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&ARr(e,t,r);return IRr(e,t),e};Object.defineProperty(uw,"__esModule",{value:!0});uw.Strategy=void 0;var RRr=MRr(J());uw.Strategy=RRr.serialization.enum_(["STRATEGY_UNSPECIFIED","STRATEGY_VANILLA","STRATEGY_TFEW"])});var MOe=v(lw=>{"use strict";var jRr=lw&&lw.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),NRr=lw&&lw.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),DRr=lw&&lw.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&jRr(e,t,r);return NRr(e,t),e};Object.defineProperty(lw,"__esModule",{value:!0});lw.BaseModel=void 0;var ete=DRr(J()),LRr=AOe(),FRr=IOe();lw.BaseModel=ete.serialization.object({name:ete.serialization.string().optional(),version:ete.serialization.string().optional(),baseType:ete.serialization.property("base_type",LRr.BaseType),strategy:FRr.Strategy.optional()})});var ROe=v(cw=>{"use strict";var kRr=cw&&cw.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),$Rr=cw&&cw.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),BRr=cw&&cw.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&kRr(e,t,r);return $Rr(e,t),e};Object.defineProperty(cw,"__esModule",{value:!0});cw.Hyperparameters=void 0;var wy=BRr(J());cw.Hyperparameters=wy.serialization.object({earlyStoppingPatience:wy.serialization.property("early_stopping_patience",wy.serialization.number().optional()),earlyStoppingThreshold:wy.serialization.property("early_stopping_threshold",wy.serialization.number().optional()),trainBatchSize:wy.serialization.property("train_batch_size",wy.serialization.number().optional()),trainEpochs:wy.serialization.property("train_epochs",wy.serialization.number().optional()),learningRate:wy.serialization.property("learning_rate",wy.serialization.number().optional())})});var jOe=v(dw=>{"use strict";var qRr=dw&&dw.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),URr=dw&&dw.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),zRr=dw&&dw.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&qRr(e,t,r);return URr(e,t),e};Object.defineProperty(dw,"__esModule",{value:!0});dw.WandbConfig=void 0;var BH=zRr(J());dw.WandbConfig=BH.serialization.object({project:BH.serialization.string(),apiKey:BH.serialization.property("api_key",BH.serialization.string()),entity:BH.serialization.string().optional()})});var tte=v(fw=>{"use strict";var HRr=fw&&fw.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),VRr=fw&&fw.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),WRr=fw&&fw.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&HRr(e,t,r);return VRr(e,t),e};Object.defineProperty(fw,"__esModule",{value:!0});fw.Settings=void 0;var l$=WRr(J()),KRr=MOe(),GRr=ROe(),JRr=jOe();fw.Settings=l$.serialization.object({baseModel:l$.serialization.property("base_model",KRr.BaseModel),datasetId:l$.serialization.property("dataset_id",l$.serialization.string()),hyperparameters:GRr.Hyperparameters.optional(),multiLabel:l$.serialization.property("multi_label",l$.serialization.boolean().optional()),wandb:JRr.WandbConfig.optional()})});var qH=v(pw=>{"use strict";var YRr=pw&&pw.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),ZRr=pw&&pw.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),XRr=pw&&pw.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&YRr(e,t,r);return ZRr(e,t),e};Object.defineProperty(pw,"__esModule",{value:!0});pw.Status=void 0;var QRr=XRr(J());pw.Status=QRr.serialization.enum_(["STATUS_UNSPECIFIED","STATUS_FINETUNING","STATUS_DEPLOYING_API","STATUS_READY","STATUS_FAILED","STATUS_DELETED","STATUS_TEMPORARILY_OFFLINE","STATUS_PAUSED","STATUS_QUEUED"])});var c$=v(mw=>{"use strict";var e1r=mw&&mw.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),t1r=mw&&mw.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),r1r=mw&&mw.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&e1r(e,t,r);return t1r(e,t),e};Object.defineProperty(mw,"__esModule",{value:!0});mw.FinetunedModel=void 0;var jf=r1r(J()),n1r=tte(),o1r=qH();mw.FinetunedModel=jf.serialization.object({id:jf.serialization.string().optional(),name:jf.serialization.string(),creatorId:jf.serialization.property("creator_id",jf.serialization.string().optional()),organizationId:jf.serialization.property("organization_id",jf.serialization.string().optional()),settings:n1r.Settings,status:o1r.Status.optional(),createdAt:jf.serialization.property("created_at",jf.serialization.date().optional()),updatedAt:jf.serialization.property("updated_at",jf.serialization.date().optional()),completedAt:jf.serialization.property("completed_at",jf.serialization.date().optional()),lastUsed:jf.serialization.property("last_used",jf.serialization.date().optional())})});var rwt=v(hw=>{"use strict";var i1r=hw&&hw.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),a1r=hw&&hw.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),s1r=hw&&hw.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&i1r(e,t,r);return a1r(e,t),e};Object.defineProperty(hw,"__esModule",{value:!0});hw.ListFinetunedModelsResponse=void 0;var U1=s1r(J()),u1r=c$();hw.ListFinetunedModelsResponse=U1.serialization.object({finetunedModels:U1.serialization.property("finetuned_models",U1.serialization.list(u1r.FinetunedModel).optional()),nextPageToken:U1.serialization.property("next_page_token",U1.serialization.string().optional()),totalSize:U1.serialization.property("total_size",U1.serialization.number().optional())})});var owt=v(gw=>{"use strict";var l1r=gw&&gw.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),c1r=gw&&gw.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),d1r=gw&&gw.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&l1r(e,t,r);return c1r(e,t),e};Object.defineProperty(gw,"__esModule",{value:!0});gw.CreateFinetunedModelResponse=void 0;var nwt=d1r(J()),f1r=c$();gw.CreateFinetunedModelResponse=nwt.serialization.object({finetunedModel:nwt.serialization.property("finetuned_model",f1r.FinetunedModel.optional())})});var awt=v(yw=>{"use strict";var p1r=yw&&yw.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),m1r=yw&&yw.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),h1r=yw&&yw.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&p1r(e,t,r);return m1r(e,t),e};Object.defineProperty(yw,"__esModule",{value:!0});yw.GetFinetunedModelResponse=void 0;var iwt=h1r(J()),g1r=c$();yw.GetFinetunedModelResponse=iwt.serialization.object({finetunedModel:iwt.serialization.property("finetuned_model",g1r.FinetunedModel.optional())})});var swt=v(bw=>{"use strict";var y1r=bw&&bw.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),b1r=bw&&bw.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),_1r=bw&&bw.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&y1r(e,t,r);return b1r(e,t),e};Object.defineProperty(bw,"__esModule",{value:!0});bw.DeleteFinetunedModelResponse=void 0;var NOe=_1r(J());bw.DeleteFinetunedModelResponse=NOe.serialization.record(NOe.serialization.string(),NOe.serialization.unknown())});var lwt=v(_w=>{"use strict";var v1r=_w&&_w.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),w1r=_w&&_w.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),S1r=_w&&_w.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&v1r(e,t,r);return w1r(e,t),e};Object.defineProperty(_w,"__esModule",{value:!0});_w.UpdateFinetunedModelResponse=void 0;var uwt=S1r(J()),x1r=c$();_w.UpdateFinetunedModelResponse=uwt.serialization.object({finetunedModel:uwt.serialization.property("finetuned_model",x1r.FinetunedModel.optional())})});var DOe=v(vw=>{"use strict";var C1r=vw&&vw.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),O1r=vw&&vw.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),P1r=vw&&vw.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&C1r(e,t,r);return O1r(e,t),e};Object.defineProperty(vw,"__esModule",{value:!0});vw.Event=void 0;var UH=P1r(J()),E1r=qH();vw.Event=UH.serialization.object({userId:UH.serialization.property("user_id",UH.serialization.string().optional()),status:E1r.Status.optional(),createdAt:UH.serialization.property("created_at",UH.serialization.date().optional())})});var cwt=v(ww=>{"use strict";var T1r=ww&&ww.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),A1r=ww&&ww.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),I1r=ww&&ww.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&T1r(e,t,r);return A1r(e,t),e};Object.defineProperty(ww,"__esModule",{value:!0});ww.ListEventsResponse=void 0;var d$=I1r(J()),M1r=DOe();ww.ListEventsResponse=d$.serialization.object({events:d$.serialization.list(M1r.Event).optional(),nextPageToken:d$.serialization.property("next_page_token",d$.serialization.string().optional()),totalSize:d$.serialization.property("total_size",d$.serialization.number().optional())})});var LOe=v(Sw=>{"use strict";var R1r=Sw&&Sw.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),j1r=Sw&&Sw.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),N1r=Sw&&Sw.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&R1r(e,t,r);return j1r(e,t),e};Object.defineProperty(Sw,"__esModule",{value:!0});Sw.TrainingStepMetrics=void 0;var XT=N1r(J());Sw.TrainingStepMetrics=XT.serialization.object({createdAt:XT.serialization.property("created_at",XT.serialization.date().optional()),stepNumber:XT.serialization.property("step_number",XT.serialization.number().optional()),metrics:XT.serialization.record(XT.serialization.string(),XT.serialization.number()).optional()})});var dwt=v(xw=>{"use strict";var D1r=xw&&xw.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),L1r=xw&&xw.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),F1r=xw&&xw.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&D1r(e,t,r);return L1r(e,t),e};Object.defineProperty(xw,"__esModule",{value:!0});xw.ListTrainingStepMetricsResponse=void 0;var zH=F1r(J()),k1r=LOe();xw.ListTrainingStepMetricsResponse=zH.serialization.object({stepMetrics:zH.serialization.property("step_metrics",zH.serialization.list(k1r.TrainingStepMetrics).optional()),nextPageToken:zH.serialization.property("next_page_token",zH.serialization.string().optional())})});var FOe=v(qa=>{"use strict";var $1r=qa&&qa.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Ic=qa&&qa.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&$1r(e,t,r)};Object.defineProperty(qa,"__esModule",{value:!0});Ic(AOe(),qa);Ic(IOe(),qa);Ic(MOe(),qa);Ic(ROe(),qa);Ic(jOe(),qa);Ic(tte(),qa);Ic(qH(),qa);Ic(c$(),qa);Ic(rwt(),qa);Ic(owt(),qa);Ic(awt(),qa);Ic(swt(),qa);Ic(lwt(),qa);Ic(DOe(),qa);Ic(cwt(),qa);Ic(LOe(),qa);Ic(dwt(),qa)});var fwt=v(z1=>{"use strict";var B1r=z1&&z1.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),q1r=z1&&z1.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&B1r(e,t,r)};Object.defineProperty(z1,"__esModule",{value:!0});q1r(FOe(),z1)});var mwt=v(Pm=>{"use strict";var pwt=Pm&&Pm.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),U1r=Pm&&Pm.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),z1r=Pm&&Pm.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&pwt(e,t,r);return U1r(e,t),e},H1r=Pm&&Pm.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&pwt(e,t,r)};Object.defineProperty(Pm,"__esModule",{value:!0});Pm.finetuning=void 0;Pm.finetuning=z1r(fwt());H1r(FOe(),Pm)});var hwt=v(Cw=>{"use strict";var V1r=Cw&&Cw.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),W1r=Cw&&Cw.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),K1r=Cw&&Cw.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&V1r(e,t,r);return W1r(e,t),e};Object.defineProperty(Cw,"__esModule",{value:!0});Cw.FinetuningUpdateFinetunedModelRequest=void 0;var Cp=K1r(J()),G1r=tte(),J1r=qH();Cw.FinetuningUpdateFinetunedModelRequest=Cp.serialization.object({name:Cp.serialization.string(),creatorId:Cp.serialization.property("creator_id",Cp.serialization.string().optional()),organizationId:Cp.serialization.property("organization_id",Cp.serialization.string().optional()),settings:G1r.Settings,status:J1r.Status.optional(),createdAt:Cp.serialization.property("created_at",Cp.serialization.date().optional()),updatedAt:Cp.serialization.property("updated_at",Cp.serialization.date().optional()),completedAt:Cp.serialization.property("completed_at",Cp.serialization.date().optional()),lastUsed:Cp.serialization.property("last_used",Cp.serialization.date().optional())})});var kOe=v(rte=>{"use strict";Object.defineProperty(rte,"__esModule",{value:!0});rte.FinetuningUpdateFinetunedModelRequest=void 0;var Y1r=hwt();Object.defineProperty(rte,"FinetuningUpdateFinetunedModelRequest",{enumerable:!0,get:function(){return Y1r.FinetuningUpdateFinetunedModelRequest}})});var gwt=v(H1=>{"use strict";var Z1r=H1&&H1.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),X1r=H1&&H1.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Z1r(e,t,r)};Object.defineProperty(H1,"__esModule",{value:!0});X1r(kOe(),H1)});var bwt=v(QT=>{"use strict";var Q1r=QT&&QT.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),ywt=QT&&QT.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Q1r(e,t,r)};Object.defineProperty(QT,"__esModule",{value:!0});ywt(mwt(),QT);ywt(gwt(),QT)});var nte=v(Pw=>{"use strict";var ejr=Pw&&Pw.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),tjr=Pw&&Pw.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),rjr=Pw&&Pw.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&ejr(e,t,r);return tjr(e,t),e};Object.defineProperty(Pw,"__esModule",{value:!0});Pw.CreateConnectorOAuth=void 0;var Ow=rjr(J());Pw.CreateConnectorOAuth=Ow.serialization.object({clientId:Ow.serialization.property("client_id",Ow.serialization.string().optional()),clientSecret:Ow.serialization.property("client_secret",Ow.serialization.string().optional()),authorizeUrl:Ow.serialization.property("authorize_url",Ow.serialization.string().optional()),tokenUrl:Ow.serialization.property("token_url",Ow.serialization.string().optional()),scope:Ow.serialization.string().optional()})});var $Oe=v(Ew=>{"use strict";var njr=Ew&&Ew.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),ojr=Ew&&Ew.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),ijr=Ew&&Ew.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&njr(e,t,r);return ojr(e,t),e};Object.defineProperty(Ew,"__esModule",{value:!0});Ew.AuthTokenType=void 0;var ajr=ijr(J());Ew.AuthTokenType=ajr.serialization.enum_(["bearer","basic","noscheme"])});var ote=v(Tw=>{"use strict";var sjr=Tw&&Tw.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),ujr=Tw&&Tw.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),ljr=Tw&&Tw.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&sjr(e,t,r);return ujr(e,t),e};Object.defineProperty(Tw,"__esModule",{value:!0});Tw.CreateConnectorServiceAuth=void 0;var _wt=ljr(J()),cjr=$Oe();Tw.CreateConnectorServiceAuth=_wt.serialization.object({type:cjr.AuthTokenType,token:_wt.serialization.string()})});var vwt=v(Iw=>{"use strict";var djr=Iw&&Iw.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),fjr=Iw&&Iw.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),pjr=Iw&&Iw.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&djr(e,t,r);return fjr(e,t),e};Object.defineProperty(Iw,"__esModule",{value:!0});Iw.CreateConnectorRequest=void 0;var Aw=pjr(J()),mjr=nte(),hjr=ote();Iw.CreateConnectorRequest=Aw.serialization.object({name:Aw.serialization.string(),description:Aw.serialization.string().optional(),url:Aw.serialization.string(),excludes:Aw.serialization.list(Aw.serialization.string()).optional(),oauth:mjr.CreateConnectorOAuth.optional(),active:Aw.serialization.boolean().optional(),continueOnFailure:Aw.serialization.property("continue_on_failure",Aw.serialization.boolean().optional()),serviceAuth:Aw.serialization.property("service_auth",hjr.CreateConnectorServiceAuth.optional())})});var wwt=v(Mw=>{"use strict";var gjr=Mw&&Mw.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),yjr=Mw&&Mw.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),bjr=Mw&&Mw.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&gjr(e,t,r);return yjr(e,t),e};Object.defineProperty(Mw,"__esModule",{value:!0});Mw.UpdateConnectorRequest=void 0;var sO=bjr(J()),_jr=nte(),vjr=ote();Mw.UpdateConnectorRequest=sO.serialization.object({name:sO.serialization.string().optional(),url:sO.serialization.string().optional(),excludes:sO.serialization.list(sO.serialization.string()).optional(),oauth:_jr.CreateConnectorOAuth.optional(),active:sO.serialization.boolean().optional(),continueOnFailure:sO.serialization.property("continue_on_failure",sO.serialization.boolean().optional()),serviceAuth:sO.serialization.property("service_auth",vjr.CreateConnectorServiceAuth.optional())})});var BOe=v(f$=>{"use strict";Object.defineProperty(f$,"__esModule",{value:!0});f$.UpdateConnectorRequest=f$.CreateConnectorRequest=void 0;var wjr=vwt();Object.defineProperty(f$,"CreateConnectorRequest",{enumerable:!0,get:function(){return wjr.CreateConnectorRequest}});var Sjr=wwt();Object.defineProperty(f$,"UpdateConnectorRequest",{enumerable:!0,get:function(){return Sjr.UpdateConnectorRequest}})});var Swt=v(V1=>{"use strict";var xjr=V1&&V1.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Cjr=V1&&V1.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&xjr(e,t,r)};Object.defineProperty(V1,"__esModule",{value:!0});Cjr(BOe(),V1)});var xwt=v(W1=>{"use strict";var Ojr=W1&&W1.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Pjr=W1&&W1.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Ojr(e,t,r)};Object.defineProperty(W1,"__esModule",{value:!0});Pjr(Swt(),W1)});var Owt=v(Ti=>{"use strict";var Cwt=Ti&&Ti.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Ejr=Ti&&Ti.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),HH=Ti&&Ti.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&Cwt(e,t,r);return Ejr(e,t),e},K1=Ti&&Ti.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Cwt(e,t,r)};Object.defineProperty(Ti,"__esModule",{value:!0});Ti.connectors=Ti.finetuning=Ti.datasets=Ti.embedJobs=Ti.v2=void 0;Ti.v2=HH(Bvt());K1(yOe(),Ti);Ti.embedJobs=HH(Hvt());K1(wOe(),Ti);Ti.datasets=HH(twt());K1(EOe(),Ti);Ti.finetuning=HH(bwt());K1(_Oe(),Ti);K1(SOe(),Ti);Ti.connectors=HH(xwt());K1(BOe(),Ti);K1(kOe(),Ti)});var qOe=v(Rw=>{"use strict";var Tjr=Rw&&Rw.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Ajr=Rw&&Rw.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Ijr=Rw&&Rw.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&Tjr(e,t,r);return Ajr(e,t),e};Object.defineProperty(Rw,"__esModule",{value:!0});Rw.ChatStreamRequestPromptTruncation=void 0;var Mjr=Ijr(J());Rw.ChatStreamRequestPromptTruncation=Mjr.serialization.enum_(["OFF","AUTO","AUTO_PRESERVE_ORDER"])});var UOe=v(jw=>{"use strict";var Rjr=jw&&jw.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),jjr=jw&&jw.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Njr=jw&&jw.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&Rjr(e,t,r);return jjr(e,t),e};Object.defineProperty(jw,"__esModule",{value:!0});jw.ChatStreamRequestCitationQuality=void 0;var Djr=Njr(J());jw.ChatStreamRequestCitationQuality=Djr.serialization.enum_(["fast","accurate","off"])});var Ewt=v(Nw=>{"use strict";var Ljr=Nw&&Nw.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Fjr=Nw&&Nw.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),kjr=Nw&&Nw.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&Ljr(e,t,r);return Fjr(e,t),e};Object.defineProperty(Nw,"__esModule",{value:!0});Nw.ChatStreamRequestConnectorsSearchOptions=void 0;var Pwt=kjr(J());Nw.ChatStreamRequestConnectorsSearchOptions=Pwt.serialization.object({seed:Pwt.serialization.number().optional()})});var zOe=v(Dw=>{"use strict";var $jr=Dw&&Dw.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Bjr=Dw&&Dw.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),qjr=Dw&&Dw.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&$jr(e,t,r);return Bjr(e,t),e};Object.defineProperty(Dw,"__esModule",{value:!0});Dw.ChatStreamRequestSafetyMode=void 0;var Ujr=qjr(J());Dw.ChatStreamRequestSafetyMode=Ujr.serialization.enum_(["CONTEXTUAL","STRICT","NONE"])});var Awt=v(Lw=>{"use strict";var zjr=Lw&&Lw.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Hjr=Lw&&Lw.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Vjr=Lw&&Lw.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&zjr(e,t,r);return Hjr(e,t),e};Object.defineProperty(Lw,"__esModule",{value:!0});Lw.UnprocessableEntityErrorBody=void 0;var Twt=Vjr(J());Lw.UnprocessableEntityErrorBody=Twt.serialization.object({data:Twt.serialization.string().optional()})});var Mwt=v(Fw=>{"use strict";var Wjr=Fw&&Fw.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Kjr=Fw&&Fw.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Gjr=Fw&&Fw.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&Wjr(e,t,r);return Kjr(e,t),e};Object.defineProperty(Fw,"__esModule",{value:!0});Fw.TooManyRequestsErrorBody=void 0;var Iwt=Gjr(J());Fw.TooManyRequestsErrorBody=Iwt.serialization.object({data:Iwt.serialization.string().optional()})});var jwt=v(kw=>{"use strict";var Jjr=kw&&kw.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Yjr=kw&&kw.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Zjr=kw&&kw.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&Jjr(e,t,r);return Yjr(e,t),e};Object.defineProperty(kw,"__esModule",{value:!0});kw.ClientClosedRequestErrorBody=void 0;var Rwt=Zjr(J());kw.ClientClosedRequestErrorBody=Rwt.serialization.object({data:Rwt.serialization.string().optional()})});var Dwt=v($w=>{"use strict";var Xjr=$w&&$w.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Qjr=$w&&$w.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),eNr=$w&&$w.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&Xjr(e,t,r);return Qjr(e,t),e};Object.defineProperty($w,"__esModule",{value:!0});$w.NotImplementedErrorBody=void 0;var Nwt=eNr(J());$w.NotImplementedErrorBody=Nwt.serialization.object({data:Nwt.serialization.string().optional()})});var Fwt=v(Bw=>{"use strict";var tNr=Bw&&Bw.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),rNr=Bw&&Bw.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),nNr=Bw&&Bw.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&tNr(e,t,r);return rNr(e,t),e};Object.defineProperty(Bw,"__esModule",{value:!0});Bw.GatewayTimeoutErrorBody=void 0;var Lwt=nNr(J());Bw.GatewayTimeoutErrorBody=Lwt.serialization.object({data:Lwt.serialization.string().optional()})});var HOe=v(qw=>{"use strict";var oNr=qw&&qw.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),iNr=qw&&qw.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),aNr=qw&&qw.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&oNr(e,t,r);return iNr(e,t),e};Object.defineProperty(qw,"__esModule",{value:!0});qw.ChatRequestPromptTruncation=void 0;var sNr=aNr(J());qw.ChatRequestPromptTruncation=sNr.serialization.enum_(["OFF","AUTO","AUTO_PRESERVE_ORDER"])});var VOe=v(Uw=>{"use strict";var uNr=Uw&&Uw.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),lNr=Uw&&Uw.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),cNr=Uw&&Uw.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&uNr(e,t,r);return lNr(e,t),e};Object.defineProperty(Uw,"__esModule",{value:!0});Uw.ChatRequestCitationQuality=void 0;var dNr=cNr(J());Uw.ChatRequestCitationQuality=dNr.serialization.enum_(["fast","accurate","off"])});var $wt=v(zw=>{"use strict";var fNr=zw&&zw.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),pNr=zw&&zw.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),mNr=zw&&zw.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&fNr(e,t,r);return pNr(e,t),e};Object.defineProperty(zw,"__esModule",{value:!0});zw.ChatRequestConnectorsSearchOptions=void 0;var kwt=mNr(J());zw.ChatRequestConnectorsSearchOptions=kwt.serialization.object({seed:kwt.serialization.number().optional()})});var WOe=v(Hw=>{"use strict";var hNr=Hw&&Hw.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),gNr=Hw&&Hw.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),yNr=Hw&&Hw.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&hNr(e,t,r);return gNr(e,t),e};Object.defineProperty(Hw,"__esModule",{value:!0});Hw.ChatRequestSafetyMode=void 0;var bNr=yNr(J());Hw.ChatRequestSafetyMode=bNr.serialization.enum_(["CONTEXTUAL","STRICT","NONE"])});var KOe=v(Vw=>{"use strict";var _Nr=Vw&&Vw.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),vNr=Vw&&Vw.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),wNr=Vw&&Vw.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&_Nr(e,t,r);return vNr(e,t),e};Object.defineProperty(Vw,"__esModule",{value:!0});Vw.GenerateStreamRequestTruncate=void 0;var SNr=wNr(J());Vw.GenerateStreamRequestTruncate=SNr.serialization.enum_(["NONE","START","END"])});var GOe=v(Ww=>{"use strict";var xNr=Ww&&Ww.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),CNr=Ww&&Ww.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),ONr=Ww&&Ww.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&xNr(e,t,r);return CNr(e,t),e};Object.defineProperty(Ww,"__esModule",{value:!0});Ww.GenerateStreamRequestReturnLikelihoods=void 0;var PNr=ONr(J());Ww.GenerateStreamRequestReturnLikelihoods=PNr.serialization.enum_(["GENERATION","ALL","NONE"])});var JOe=v(Kw=>{"use strict";var ENr=Kw&&Kw.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),TNr=Kw&&Kw.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),ANr=Kw&&Kw.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&ENr(e,t,r);return TNr(e,t),e};Object.defineProperty(Kw,"__esModule",{value:!0});Kw.GenerateRequestTruncate=void 0;var INr=ANr(J());Kw.GenerateRequestTruncate=INr.serialization.enum_(["NONE","START","END"])});var YOe=v(Gw=>{"use strict";var MNr=Gw&&Gw.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),RNr=Gw&&Gw.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),jNr=Gw&&Gw.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&MNr(e,t,r);return RNr(e,t),e};Object.defineProperty(Gw,"__esModule",{value:!0});Gw.GenerateRequestReturnLikelihoods=void 0;var NNr=jNr(J());Gw.GenerateRequestReturnLikelihoods=NNr.serialization.enum_(["GENERATION","ALL","NONE"])});var ZOe=v(Jw=>{"use strict";var DNr=Jw&&Jw.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),LNr=Jw&&Jw.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),FNr=Jw&&Jw.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&DNr(e,t,r);return LNr(e,t),e};Object.defineProperty(Jw,"__esModule",{value:!0});Jw.EmbedRequestTruncate=void 0;var kNr=FNr(J());Jw.EmbedRequestTruncate=kNr.serialization.enum_(["NONE","START","END"])});var XOe=v(Yw=>{"use strict";var $Nr=Yw&&Yw.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),BNr=Yw&&Yw.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),qNr=Yw&&Yw.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&$Nr(e,t,r);return BNr(e,t),e};Object.defineProperty(Yw,"__esModule",{value:!0});Yw.ApiMetaApiVersion=void 0;var p$=qNr(J());Yw.ApiMetaApiVersion=p$.serialization.object({version:p$.serialization.string(),isDeprecated:p$.serialization.property("is_deprecated",p$.serialization.boolean().optional()),isExperimental:p$.serialization.property("is_experimental",p$.serialization.boolean().optional())})});var QOe=v(Zw=>{"use strict";var UNr=Zw&&Zw.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),zNr=Zw&&Zw.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),HNr=Zw&&Zw.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&UNr(e,t,r);return zNr(e,t),e};Object.defineProperty(Zw,"__esModule",{value:!0});Zw.ApiMetaBilledUnits=void 0;var eA=HNr(J());Zw.ApiMetaBilledUnits=eA.serialization.object({inputTokens:eA.serialization.property("input_tokens",eA.serialization.number().optional()),outputTokens:eA.serialization.property("output_tokens",eA.serialization.number().optional()),searchUnits:eA.serialization.property("search_units",eA.serialization.number().optional()),classifications:eA.serialization.number().optional()})});var ePe=v(Xw=>{"use strict";var VNr=Xw&&Xw.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),WNr=Xw&&Xw.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),KNr=Xw&&Xw.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&VNr(e,t,r);return WNr(e,t),e};Object.defineProperty(Xw,"__esModule",{value:!0});Xw.ApiMetaTokens=void 0;var VH=KNr(J());Xw.ApiMetaTokens=VH.serialization.object({inputTokens:VH.serialization.property("input_tokens",VH.serialization.number().optional()),outputTokens:VH.serialization.property("output_tokens",VH.serialization.number().optional())})});var Em=v(Qw=>{"use strict";var GNr=Qw&&Qw.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),JNr=Qw&&Qw.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),YNr=Qw&&Qw.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&GNr(e,t,r);return JNr(e,t),e};Object.defineProperty(Qw,"__esModule",{value:!0});Qw.ApiMeta=void 0;var WH=YNr(J()),ZNr=XOe(),XNr=QOe(),QNr=ePe();Qw.ApiMeta=WH.serialization.object({apiVersion:WH.serialization.property("api_version",ZNr.ApiMetaApiVersion.optional()),billedUnits:WH.serialization.property("billed_units",XNr.ApiMetaBilledUnits.optional()),tokens:QNr.ApiMetaTokens.optional(),warnings:WH.serialization.list(WH.serialization.string()).optional()})});var tPe=v(e0=>{"use strict";var eDr=e0&&e0.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),tDr=e0&&e0.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),rDr=e0&&e0.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&eDr(e,t,r);return tDr(e,t),e};Object.defineProperty(e0,"__esModule",{value:!0});e0.EmbedFloatsResponse=void 0;var G1=rDr(J()),nDr=Em();e0.EmbedFloatsResponse=G1.serialization.object({id:G1.serialization.string(),embeddings:G1.serialization.list(G1.serialization.list(G1.serialization.number())),texts:G1.serialization.list(G1.serialization.string()),meta:nDr.ApiMeta.optional()})});var rPe=v(t0=>{"use strict";var oDr=t0&&t0.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),iDr=t0&&t0.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),aDr=t0&&t0.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&oDr(e,t,r);return iDr(e,t),e};Object.defineProperty(t0,"__esModule",{value:!0});t0.EmbedByTypeResponseEmbeddings=void 0;var kd=aDr(J());t0.EmbedByTypeResponseEmbeddings=kd.serialization.object({float:kd.serialization.list(kd.serialization.list(kd.serialization.number())).optional(),int8:kd.serialization.list(kd.serialization.list(kd.serialization.number())).optional(),uint8:kd.serialization.list(kd.serialization.list(kd.serialization.number())).optional(),binary:kd.serialization.list(kd.serialization.list(kd.serialization.number())).optional(),ubinary:kd.serialization.list(kd.serialization.list(kd.serialization.number())).optional()})});var nPe=v(r0=>{"use strict";var sDr=r0&&r0.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),uDr=r0&&r0.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),lDr=r0&&r0.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&sDr(e,t,r);return uDr(e,t),e};Object.defineProperty(r0,"__esModule",{value:!0});r0.EmbedByTypeResponse=void 0;var ite=lDr(J()),cDr=rPe(),dDr=Em();r0.EmbedByTypeResponse=ite.serialization.object({id:ite.serialization.string(),embeddings:cDr.EmbedByTypeResponseEmbeddings,texts:ite.serialization.list(ite.serialization.string()),meta:dDr.ApiMeta.optional()})});var qwt=v(n0=>{"use strict";var fDr=n0&&n0.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),pDr=n0&&n0.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),mDr=n0&&n0.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&fDr(e,t,r);return pDr(e,t),e};Object.defineProperty(n0,"__esModule",{value:!0});n0.EmbedResponse=void 0;var Bwt=mDr(J()),hDr=tPe(),gDr=nPe();n0.EmbedResponse=Bwt.serialization.union(Bwt.serialization.discriminant("responseType","response_type"),{embeddings_floats:hDr.EmbedFloatsResponse,embeddings_by_type:gDr.EmbedByTypeResponse}).transform({transform:t=>t,untransform:t=>t})});var iPe=v(o0=>{"use strict";var yDr=o0&&o0.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),bDr=o0&&o0.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),_Dr=o0&&o0.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&yDr(e,t,r);return bDr(e,t),e};Object.defineProperty(o0,"__esModule",{value:!0});o0.RerankDocument=void 0;var oPe=_Dr(J());o0.RerankDocument=oPe.serialization.record(oPe.serialization.string(),oPe.serialization.string())});var aPe=v(i0=>{"use strict";var vDr=i0&&i0.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),wDr=i0&&i0.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),SDr=i0&&i0.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&vDr(e,t,r);return wDr(e,t),e};Object.defineProperty(i0,"__esModule",{value:!0});i0.RerankRequestDocumentsItem=void 0;var Uwt=SDr(J()),xDr=iPe();i0.RerankRequestDocumentsItem=Uwt.serialization.undiscriminatedUnion([Uwt.serialization.string(),xDr.RerankDocument])});var sPe=v(a0=>{"use strict";var CDr=a0&&a0.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),ODr=a0&&a0.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),PDr=a0&&a0.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&CDr(e,t,r);return ODr(e,t),e};Object.defineProperty(a0,"__esModule",{value:!0});a0.RerankResponseResultsItemDocument=void 0;var zwt=PDr(J());a0.RerankResponseResultsItemDocument=zwt.serialization.object({text:zwt.serialization.string()})});var uPe=v(s0=>{"use strict";var EDr=s0&&s0.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),TDr=s0&&s0.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),ADr=s0&&s0.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&EDr(e,t,r);return TDr(e,t),e};Object.defineProperty(s0,"__esModule",{value:!0});s0.RerankResponseResultsItem=void 0;var ate=ADr(J()),IDr=sPe();s0.RerankResponseResultsItem=ate.serialization.object({document:IDr.RerankResponseResultsItemDocument.optional(),index:ate.serialization.number(),relevanceScore:ate.serialization.property("relevance_score",ate.serialization.number())})});var Hwt=v(u0=>{"use strict";var MDr=u0&&u0.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),RDr=u0&&u0.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),jDr=u0&&u0.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&MDr(e,t,r);return RDr(e,t),e};Object.defineProperty(u0,"__esModule",{value:!0});u0.RerankResponse=void 0;var lPe=jDr(J()),NDr=uPe(),DDr=Em();u0.RerankResponse=lPe.serialization.object({id:lPe.serialization.string().optional(),results:lPe.serialization.list(NDr.RerankResponseResultsItem),meta:DDr.ApiMeta.optional()})});var cPe=v(l0=>{"use strict";var LDr=l0&&l0.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),FDr=l0&&l0.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),kDr=l0&&l0.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&LDr(e,t,r);return FDr(e,t),e};Object.defineProperty(l0,"__esModule",{value:!0});l0.ClassifyRequestTruncate=void 0;var $Dr=kDr(J());l0.ClassifyRequestTruncate=$Dr.serialization.enum_(["NONE","START","END"])});var dPe=v(c0=>{"use strict";var BDr=c0&&c0.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),qDr=c0&&c0.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),UDr=c0&&c0.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&BDr(e,t,r);return qDr(e,t),e};Object.defineProperty(c0,"__esModule",{value:!0});c0.ClassifyResponseClassificationsItemLabelsValue=void 0;var Vwt=UDr(J());c0.ClassifyResponseClassificationsItemLabelsValue=Vwt.serialization.object({confidence:Vwt.serialization.number().optional()})});var fPe=v(d0=>{"use strict";var zDr=d0&&d0.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),HDr=d0&&d0.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),VDr=d0&&d0.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&zDr(e,t,r);return HDr(e,t),e};Object.defineProperty(d0,"__esModule",{value:!0});d0.ClassifyResponseClassificationsItemClassificationType=void 0;var WDr=VDr(J());d0.ClassifyResponseClassificationsItemClassificationType=WDr.serialization.enum_(["single-label","multi-label"])});var pPe=v(f0=>{"use strict";var KDr=f0&&f0.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),GDr=f0&&f0.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),JDr=f0&&f0.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&KDr(e,t,r);return GDr(e,t),e};Object.defineProperty(f0,"__esModule",{value:!0});f0.ClassifyResponseClassificationsItem=void 0;var Gh=JDr(J()),YDr=dPe(),ZDr=fPe();f0.ClassifyResponseClassificationsItem=Gh.serialization.object({id:Gh.serialization.string(),input:Gh.serialization.string().optional(),prediction:Gh.serialization.string().optional(),predictions:Gh.serialization.list(Gh.serialization.string()),confidence:Gh.serialization.number().optional(),confidences:Gh.serialization.list(Gh.serialization.number()),labels:Gh.serialization.record(Gh.serialization.string(),YDr.ClassifyResponseClassificationsItemLabelsValue),classificationType:Gh.serialization.property("classification_type",ZDr.ClassifyResponseClassificationsItemClassificationType)})});var Wwt=v(p0=>{"use strict";var XDr=p0&&p0.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),QDr=p0&&p0.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),eLr=p0&&p0.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&XDr(e,t,r);return QDr(e,t),e};Object.defineProperty(p0,"__esModule",{value:!0});p0.ClassifyResponse=void 0;var mPe=eLr(J()),tLr=pPe(),rLr=Em();p0.ClassifyResponse=mPe.serialization.object({id:mPe.serialization.string(),classifications:mPe.serialization.list(tLr.ClassifyResponseClassificationsItem),meta:rLr.ApiMeta.optional()})});var hPe=v(m0=>{"use strict";var nLr=m0&&m0.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),oLr=m0&&m0.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),iLr=m0&&m0.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&nLr(e,t,r);return oLr(e,t),e};Object.defineProperty(m0,"__esModule",{value:!0});m0.SummarizeRequestLength=void 0;var aLr=iLr(J());m0.SummarizeRequestLength=aLr.serialization.enum_(["short","medium","long"])});var gPe=v(h0=>{"use strict";var sLr=h0&&h0.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),uLr=h0&&h0.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),lLr=h0&&h0.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&sLr(e,t,r);return uLr(e,t),e};Object.defineProperty(h0,"__esModule",{value:!0});h0.SummarizeRequestFormat=void 0;var cLr=lLr(J());h0.SummarizeRequestFormat=cLr.serialization.enum_(["paragraph","bullets"])});var yPe=v(g0=>{"use strict";var dLr=g0&&g0.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),fLr=g0&&g0.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),pLr=g0&&g0.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&dLr(e,t,r);return fLr(e,t),e};Object.defineProperty(g0,"__esModule",{value:!0});g0.SummarizeRequestExtractiveness=void 0;var mLr=pLr(J());g0.SummarizeRequestExtractiveness=mLr.serialization.enum_(["low","medium","high"])});var Kwt=v(y0=>{"use strict";var hLr=y0&&y0.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),gLr=y0&&y0.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),yLr=y0&&y0.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&hLr(e,t,r);return gLr(e,t),e};Object.defineProperty(y0,"__esModule",{value:!0});y0.SummarizeResponse=void 0;var bPe=yLr(J()),bLr=Em();y0.SummarizeResponse=bPe.serialization.object({id:bPe.serialization.string().optional(),summary:bPe.serialization.string().optional(),meta:bLr.ApiMeta.optional()})});var Gwt=v(b0=>{"use strict";var _Lr=b0&&b0.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),vLr=b0&&b0.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),wLr=b0&&b0.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&_Lr(e,t,r);return vLr(e,t),e};Object.defineProperty(b0,"__esModule",{value:!0});b0.TokenizeResponse=void 0;var m$=wLr(J()),SLr=Em();b0.TokenizeResponse=m$.serialization.object({tokens:m$.serialization.list(m$.serialization.number()),tokenStrings:m$.serialization.property("token_strings",m$.serialization.list(m$.serialization.string())),meta:SLr.ApiMeta.optional()})});var Ywt=v(_0=>{"use strict";var xLr=_0&&_0.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),CLr=_0&&_0.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),OLr=_0&&_0.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&xLr(e,t,r);return CLr(e,t),e};Object.defineProperty(_0,"__esModule",{value:!0});_0.DetokenizeResponse=void 0;var Jwt=OLr(J()),PLr=Em();_0.DetokenizeResponse=Jwt.serialization.object({text:Jwt.serialization.string(),meta:PLr.ApiMeta.optional()})});var Zwt=v(v0=>{"use strict";var ELr=v0&&v0.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),TLr=v0&&v0.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),ALr=v0&&v0.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&ELr(e,t,r);return TLr(e,t),e};Object.defineProperty(v0,"__esModule",{value:!0});v0.CheckApiKeyResponse=void 0;var h$=ALr(J());v0.CheckApiKeyResponse=h$.serialization.object({valid:h$.serialization.boolean(),organizationId:h$.serialization.property("organization_id",h$.serialization.string().optional()),ownerId:h$.serialization.property("owner_id",h$.serialization.string().optional())})});var g$=v(w0=>{"use strict";var ILr=w0&&w0.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),MLr=w0&&w0.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),RLr=w0&&w0.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&ILr(e,t,r);return MLr(e,t),e};Object.defineProperty(w0,"__esModule",{value:!0});w0.ToolCall=void 0;var KH=RLr(J());w0.ToolCall=KH.serialization.object({name:KH.serialization.string(),parameters:KH.serialization.record(KH.serialization.string(),KH.serialization.unknown())})});var _Pe=v(S0=>{"use strict";var jLr=S0&&S0.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),NLr=S0&&S0.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),DLr=S0&&S0.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&jLr(e,t,r);return NLr(e,t),e};Object.defineProperty(S0,"__esModule",{value:!0});S0.ChatMessage=void 0;var ste=DLr(J()),LLr=g$();S0.ChatMessage=ste.serialization.object({message:ste.serialization.string(),toolCalls:ste.serialization.property("tool_calls",ste.serialization.list(LLr.ToolCall).optional())})});var JH=v(x0=>{"use strict";var FLr=x0&&x0.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),kLr=x0&&x0.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),$Lr=x0&&x0.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&FLr(e,t,r);return kLr(e,t),e};Object.defineProperty(x0,"__esModule",{value:!0});x0.ToolResult=void 0;var GH=$Lr(J()),BLr=g$();x0.ToolResult=GH.serialization.object({call:BLr.ToolCall,outputs:GH.serialization.list(GH.serialization.record(GH.serialization.string(),GH.serialization.unknown()))})});var wPe=v(C0=>{"use strict";var qLr=C0&&C0.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),ULr=C0&&C0.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),zLr=C0&&C0.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&qLr(e,t,r);return ULr(e,t),e};Object.defineProperty(C0,"__esModule",{value:!0});C0.ToolMessage=void 0;var vPe=zLr(J()),HLr=JH();C0.ToolMessage=vPe.serialization.object({toolResults:vPe.serialization.property("tool_results",vPe.serialization.list(HLr.ToolResult).optional())})});var YH=v(O0=>{"use strict";var VLr=O0&&O0.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),WLr=O0&&O0.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),KLr=O0&&O0.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&VLr(e,t,r);return WLr(e,t),e};Object.defineProperty(O0,"__esModule",{value:!0});O0.Message=void 0;var GLr=KLr(J()),SPe=_Pe(),JLr=wPe();O0.Message=GLr.serialization.union("role",{CHATBOT:SPe.ChatMessage,SYSTEM:SPe.ChatMessage,USER:SPe.ChatMessage,TOOL:JLr.ToolMessage}).transform({transform:t=>t,untransform:t=>t})});var ute=v(P0=>{"use strict";var YLr=P0&&P0.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),ZLr=P0&&P0.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),XLr=P0&&P0.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&YLr(e,t,r);return ZLr(e,t),e};Object.defineProperty(P0,"__esModule",{value:!0});P0.ChatConnector=void 0;var uO=XLr(J());P0.ChatConnector=uO.serialization.object({id:uO.serialization.string(),userAccessToken:uO.serialization.property("user_access_token",uO.serialization.string().optional()),continueOnFailure:uO.serialization.property("continue_on_failure",uO.serialization.boolean().optional()),options:uO.serialization.record(uO.serialization.string(),uO.serialization.unknown()).optional()})});var xPe=v(E0=>{"use strict";var QLr=E0&&E0.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),eFr=E0&&E0.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),tFr=E0&&E0.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&QLr(e,t,r);return eFr(e,t),e};Object.defineProperty(E0,"__esModule",{value:!0});E0.ToolParameterDefinitionsValue=void 0;var lte=tFr(J());E0.ToolParameterDefinitionsValue=lte.serialization.object({description:lte.serialization.string().optional(),type:lte.serialization.string(),required:lte.serialization.boolean().optional()})});var cte=v(T0=>{"use strict";var rFr=T0&&T0.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),nFr=T0&&T0.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),oFr=T0&&T0.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&rFr(e,t,r);return nFr(e,t),e};Object.defineProperty(T0,"__esModule",{value:!0});T0.Tool=void 0;var y$=oFr(J()),iFr=xPe();T0.Tool=y$.serialization.object({name:y$.serialization.string(),description:y$.serialization.string(),parameterDefinitions:y$.serialization.property("parameter_definitions",y$.serialization.record(y$.serialization.string(),iFr.ToolParameterDefinitionsValue).optional())})});var CPe=v(A0=>{"use strict";var aFr=A0&&A0.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),sFr=A0&&A0.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),uFr=A0&&A0.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&aFr(e,t,r);return sFr(e,t),e};Object.defineProperty(A0,"__esModule",{value:!0});A0.JsonResponseFormat=void 0;var dte=uFr(J());A0.JsonResponseFormat=dte.serialization.object({schema:dte.serialization.record(dte.serialization.string(),dte.serialization.unknown()).optional()})});var fte=v(I0=>{"use strict";var lFr=I0&&I0.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),cFr=I0&&I0.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),dFr=I0&&I0.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&lFr(e,t,r);return cFr(e,t),e};Object.defineProperty(I0,"__esModule",{value:!0});I0.ResponseFormat=void 0;var fFr=dFr(J()),pFr=Gee(),mFr=CPe();I0.ResponseFormat=fFr.serialization.union("type",{text:pFr.TextResponseFormat,json_object:mFr.JsonResponseFormat}).transform({transform:t=>t,untransform:t=>t})});var pte=v(M0=>{"use strict";var hFr=M0&&M0.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),gFr=M0&&M0.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),yFr=M0&&M0.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&hFr(e,t,r);return gFr(e,t),e};Object.defineProperty(M0,"__esModule",{value:!0});M0.ChatCitation=void 0;var J1=yFr(J());M0.ChatCitation=J1.serialization.object({start:J1.serialization.number(),end:J1.serialization.number(),text:J1.serialization.string(),documentIds:J1.serialization.property("document_ids",J1.serialization.list(J1.serialization.string()))})});var ZH=v(R0=>{"use strict";var bFr=R0&&R0.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),_Fr=R0&&R0.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),vFr=R0&&R0.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&bFr(e,t,r);return _Fr(e,t),e};Object.defineProperty(R0,"__esModule",{value:!0});R0.ChatSearchQuery=void 0;var mte=vFr(J());R0.ChatSearchQuery=mte.serialization.object({text:mte.serialization.string(),generationId:mte.serialization.property("generation_id",mte.serialization.string())})});var OPe=v(j0=>{"use strict";var wFr=j0&&j0.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),SFr=j0&&j0.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),xFr=j0&&j0.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&wFr(e,t,r);return SFr(e,t),e};Object.defineProperty(j0,"__esModule",{value:!0});j0.ChatSearchResultConnector=void 0;var Xwt=xFr(J());j0.ChatSearchResultConnector=Xwt.serialization.object({id:Xwt.serialization.string()})});var hte=v(N0=>{"use strict";var CFr=N0&&N0.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),OFr=N0&&N0.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),PFr=N0&&N0.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&CFr(e,t,r);return OFr(e,t),e};Object.defineProperty(N0,"__esModule",{value:!0});N0.ChatSearchResult=void 0;var lO=PFr(J()),EFr=ZH(),TFr=OPe();N0.ChatSearchResult=lO.serialization.object({searchQuery:lO.serialization.property("search_query",EFr.ChatSearchQuery.optional()),connector:TFr.ChatSearchResultConnector,documentIds:lO.serialization.property("document_ids",lO.serialization.list(lO.serialization.string())),errorMessage:lO.serialization.property("error_message",lO.serialization.string().optional()),continueOnFailure:lO.serialization.property("continue_on_failure",lO.serialization.boolean().optional())})});var b$=v(D0=>{"use strict";var AFr=D0&&D0.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),IFr=D0&&D0.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),MFr=D0&&D0.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&AFr(e,t,r);return IFr(e,t),e};Object.defineProperty(D0,"__esModule",{value:!0});D0.FinishReason=void 0;var RFr=MFr(J());D0.FinishReason=RFr.serialization.enum_(["COMPLETE","STOP_SEQUENCE","ERROR","ERROR_TOXIC","ERROR_LIMIT","USER_CANCEL","MAX_TOKENS"])});var PPe=v(L0=>{"use strict";var jFr=L0&&L0.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),NFr=L0&&L0.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),DFr=L0&&L0.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&jFr(e,t,r);return NFr(e,t),e};Object.defineProperty(L0,"__esModule",{value:!0});L0.NonStreamedChatResponse=void 0;var zl=DFr(J()),LFr=pte(),FFr=k1(),kFr=ZH(),$Fr=hte(),BFr=b$(),qFr=g$(),UFr=YH(),zFr=Em();L0.NonStreamedChatResponse=zl.serialization.object({text:zl.serialization.string(),generationId:zl.serialization.property("generation_id",zl.serialization.string().optional()),citations:zl.serialization.list(LFr.ChatCitation).optional(),documents:zl.serialization.list(FFr.ChatDocument).optional(),isSearchRequired:zl.serialization.property("is_search_required",zl.serialization.boolean().optional()),searchQueries:zl.serialization.property("search_queries",zl.serialization.list(kFr.ChatSearchQuery).optional()),searchResults:zl.serialization.property("search_results",zl.serialization.list($Fr.ChatSearchResult).optional()),finishReason:zl.serialization.property("finish_reason",BFr.FinishReason.optional()),toolCalls:zl.serialization.property("tool_calls",zl.serialization.list(qFr.ToolCall).optional()),chatHistory:zl.serialization.property("chat_history",zl.serialization.list(UFr.Message).optional()),prompt:zl.serialization.string().optional(),meta:zFr.ApiMeta.optional()})});var k0=v(F0=>{"use strict";var HFr=F0&&F0.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),VFr=F0&&F0.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),WFr=F0&&F0.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&HFr(e,t,r);return VFr(e,t),e};Object.defineProperty(F0,"__esModule",{value:!0});F0.ChatStreamEvent=void 0;var KFr=WFr(J());F0.ChatStreamEvent=KFr.serialization.object({})});var TPe=v($0=>{"use strict";var GFr=$0&&$0.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),JFr=$0&&$0.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),YFr=$0&&$0.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&GFr(e,t,r);return JFr(e,t),e};Object.defineProperty($0,"__esModule",{value:!0});$0.ChatStreamStartEvent=void 0;var EPe=YFr(J()),ZFr=k0();$0.ChatStreamStartEvent=EPe.serialization.object({generationId:EPe.serialization.property("generation_id",EPe.serialization.string())}).extend(ZFr.ChatStreamEvent)});var IPe=v(B0=>{"use strict";var XFr=B0&&B0.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),QFr=B0&&B0.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),ekr=B0&&B0.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&XFr(e,t,r);return QFr(e,t),e};Object.defineProperty(B0,"__esModule",{value:!0});B0.ChatSearchQueriesGenerationEvent=void 0;var APe=ekr(J()),tkr=ZH(),rkr=k0();B0.ChatSearchQueriesGenerationEvent=APe.serialization.object({searchQueries:APe.serialization.property("search_queries",APe.serialization.list(tkr.ChatSearchQuery))}).extend(rkr.ChatStreamEvent)});var MPe=v(q0=>{"use strict";var nkr=q0&&q0.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),okr=q0&&q0.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),ikr=q0&&q0.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&nkr(e,t,r);return okr(e,t),e};Object.defineProperty(q0,"__esModule",{value:!0});q0.ChatSearchResultsEvent=void 0;var gte=ikr(J()),akr=hte(),skr=k1(),ukr=k0();q0.ChatSearchResultsEvent=gte.serialization.object({searchResults:gte.serialization.property("search_results",gte.serialization.list(akr.ChatSearchResult).optional()),documents:gte.serialization.list(skr.ChatDocument).optional()}).extend(ukr.ChatStreamEvent)});var RPe=v(U0=>{"use strict";var lkr=U0&&U0.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),ckr=U0&&U0.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),dkr=U0&&U0.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&lkr(e,t,r);return ckr(e,t),e};Object.defineProperty(U0,"__esModule",{value:!0});U0.ChatTextGenerationEvent=void 0;var Qwt=dkr(J()),fkr=k0();U0.ChatTextGenerationEvent=Qwt.serialization.object({text:Qwt.serialization.string()}).extend(fkr.ChatStreamEvent)});var jPe=v(z0=>{"use strict";var pkr=z0&&z0.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),mkr=z0&&z0.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),hkr=z0&&z0.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&pkr(e,t,r);return mkr(e,t),e};Object.defineProperty(z0,"__esModule",{value:!0});z0.ChatCitationGenerationEvent=void 0;var e0t=hkr(J()),gkr=pte(),ykr=k0();z0.ChatCitationGenerationEvent=e0t.serialization.object({citations:e0t.serialization.list(gkr.ChatCitation)}).extend(ykr.ChatStreamEvent)});var NPe=v(H0=>{"use strict";var bkr=H0&&H0.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),_kr=H0&&H0.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),vkr=H0&&H0.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&bkr(e,t,r);return _kr(e,t),e};Object.defineProperty(H0,"__esModule",{value:!0});H0.ChatToolCallsGenerationEvent=void 0;var yte=vkr(J()),wkr=g$(),Skr=k0();H0.ChatToolCallsGenerationEvent=yte.serialization.object({text:yte.serialization.string().optional(),toolCalls:yte.serialization.property("tool_calls",yte.serialization.list(wkr.ToolCall))}).extend(Skr.ChatStreamEvent)});var DPe=v(V0=>{"use strict";var xkr=V0&&V0.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Ckr=V0&&V0.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Okr=V0&&V0.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&xkr(e,t,r);return Ckr(e,t),e};Object.defineProperty(V0,"__esModule",{value:!0});V0.ChatStreamEndEventFinishReason=void 0;var Pkr=Okr(J());V0.ChatStreamEndEventFinishReason=Pkr.serialization.enum_(["COMPLETE","ERROR_LIMIT","MAX_TOKENS","ERROR","ERROR_TOXIC"])});var LPe=v(W0=>{"use strict";var Ekr=W0&&W0.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Tkr=W0&&W0.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Akr=W0&&W0.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&Ekr(e,t,r);return Tkr(e,t),e};Object.defineProperty(W0,"__esModule",{value:!0});W0.ChatStreamEndEvent=void 0;var t0t=Akr(J()),Ikr=DPe(),Mkr=PPe(),Rkr=k0();W0.ChatStreamEndEvent=t0t.serialization.object({finishReason:t0t.serialization.property("finish_reason",Ikr.ChatStreamEndEventFinishReason),response:Mkr.NonStreamedChatResponse}).extend(Rkr.ChatStreamEvent)});var FPe=v(K0=>{"use strict";var jkr=K0&&K0.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Nkr=K0&&K0.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Dkr=K0&&K0.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&jkr(e,t,r);return Nkr(e,t),e};Object.defineProperty(K0,"__esModule",{value:!0});K0.ToolCallDelta=void 0;var XH=Dkr(J());K0.ToolCallDelta=XH.serialization.object({name:XH.serialization.string().optional(),index:XH.serialization.number().optional(),parameters:XH.serialization.string().optional(),text:XH.serialization.string().optional()})});var kPe=v(G0=>{"use strict";var Lkr=G0&&G0.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Fkr=G0&&G0.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),kkr=G0&&G0.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&Lkr(e,t,r);return Fkr(e,t),e};Object.defineProperty(G0,"__esModule",{value:!0});G0.ChatToolCallsChunkEvent=void 0;var r0t=kkr(J()),$kr=FPe(),Bkr=k0();G0.ChatToolCallsChunkEvent=r0t.serialization.object({toolCallDelta:r0t.serialization.property("tool_call_delta",$kr.ToolCallDelta)}).extend(Bkr.ChatStreamEvent)});var o0t=v(J0=>{"use strict";var qkr=J0&&J0.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Ukr=J0&&J0.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),zkr=J0&&J0.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&qkr(e,t,r);return Ukr(e,t),e};Object.defineProperty(J0,"__esModule",{value:!0});J0.StreamedChatResponse=void 0;var n0t=zkr(J()),Hkr=TPe(),Vkr=IPe(),Wkr=MPe(),Kkr=RPe(),Gkr=jPe(),Jkr=NPe(),Ykr=LPe(),Zkr=kPe();J0.StreamedChatResponse=n0t.serialization.union(n0t.serialization.discriminant("eventType","event_type"),{"stream-start":Hkr.ChatStreamStartEvent,"search-queries-generation":Vkr.ChatSearchQueriesGenerationEvent,"search-results":Wkr.ChatSearchResultsEvent,"text-generation":Kkr.ChatTextGenerationEvent,"citation-generation":Gkr.ChatCitationGenerationEvent,"tool-calls-generation":Jkr.ChatToolCallsGenerationEvent,"stream-end":Ykr.ChatStreamEndEvent,"tool-calls-chunk":Zkr.ChatToolCallsChunkEvent}).transform({transform:t=>t,untransform:t=>t})});var BPe=v(Y0=>{"use strict";var Xkr=Y0&&Y0.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Qkr=Y0&&Y0.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),e$r=Y0&&Y0.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&Xkr(e,t,r);return Qkr(e,t),e};Object.defineProperty(Y0,"__esModule",{value:!0});Y0.SingleGenerationTokenLikelihoodsItem=void 0;var $Pe=e$r(J());Y0.SingleGenerationTokenLikelihoodsItem=$Pe.serialization.object({token:$Pe.serialization.string(),likelihood:$Pe.serialization.number()})});var qPe=v(Z0=>{"use strict";var t$r=Z0&&Z0.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),r$r=Z0&&Z0.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),n$r=Z0&&Z0.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&t$r(e,t,r);return r$r(e,t),e};Object.defineProperty(Z0,"__esModule",{value:!0});Z0.SingleGeneration=void 0;var Y1=n$r(J()),o$r=BPe();Z0.SingleGeneration=Y1.serialization.object({id:Y1.serialization.string(),text:Y1.serialization.string(),index:Y1.serialization.number().optional(),likelihood:Y1.serialization.number().optional(),tokenLikelihoods:Y1.serialization.property("token_likelihoods",Y1.serialization.list(o$r.SingleGenerationTokenLikelihoodsItem).optional())})});var i0t=v(X0=>{"use strict";var i$r=X0&&X0.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),a$r=X0&&X0.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),s$r=X0&&X0.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&i$r(e,t,r);return a$r(e,t),e};Object.defineProperty(X0,"__esModule",{value:!0});X0.Generation=void 0;var bte=s$r(J()),u$r=qPe(),l$r=Em();X0.Generation=bte.serialization.object({id:bte.serialization.string(),prompt:bte.serialization.string().optional(),generations:bte.serialization.list(u$r.SingleGeneration),meta:l$r.ApiMeta.optional()})});var QH=v(Q0=>{"use strict";var c$r=Q0&&Q0.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),d$r=Q0&&Q0.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),f$r=Q0&&Q0.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&c$r(e,t,r);return d$r(e,t),e};Object.defineProperty(Q0,"__esModule",{value:!0});Q0.GenerateStreamEvent=void 0;var p$r=f$r(J());Q0.GenerateStreamEvent=p$r.serialization.object({})});var UPe=v(eS=>{"use strict";var m$r=eS&&eS.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),h$r=eS&&eS.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),g$r=eS&&eS.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&m$r(e,t,r);return h$r(e,t),e};Object.defineProperty(eS,"__esModule",{value:!0});eS.GenerateStreamText=void 0;var eV=g$r(J()),y$r=QH();eS.GenerateStreamText=eV.serialization.object({text:eV.serialization.string(),index:eV.serialization.number().optional(),isFinished:eV.serialization.property("is_finished",eV.serialization.boolean())}).extend(y$r.GenerateStreamEvent)});var zPe=v(tS=>{"use strict";var b$r=tS&&tS.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),_$r=tS&&tS.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),v$r=tS&&tS.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&b$r(e,t,r);return _$r(e,t),e};Object.defineProperty(tS,"__esModule",{value:!0});tS.SingleGenerationInStream=void 0;var tV=v$r(J()),w$r=b$();tS.SingleGenerationInStream=tV.serialization.object({id:tV.serialization.string(),text:tV.serialization.string(),index:tV.serialization.number().optional(),finishReason:tV.serialization.property("finish_reason",w$r.FinishReason)})});var HPe=v(rS=>{"use strict";var S$r=rS&&rS.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),x$r=rS&&rS.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),C$r=rS&&rS.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&S$r(e,t,r);return x$r(e,t),e};Object.defineProperty(rS,"__esModule",{value:!0});rS.GenerateStreamEndResponse=void 0;var _te=C$r(J()),O$r=zPe();rS.GenerateStreamEndResponse=_te.serialization.object({id:_te.serialization.string(),prompt:_te.serialization.string().optional(),generations:_te.serialization.list(O$r.SingleGenerationInStream).optional()})});var VPe=v(nS=>{"use strict";var P$r=nS&&nS.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),E$r=nS&&nS.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),T$r=nS&&nS.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&P$r(e,t,r);return E$r(e,t),e};Object.defineProperty(nS,"__esModule",{value:!0});nS.GenerateStreamEnd=void 0;var vte=T$r(J()),A$r=b$(),I$r=HPe(),M$r=QH();nS.GenerateStreamEnd=vte.serialization.object({isFinished:vte.serialization.property("is_finished",vte.serialization.boolean()),finishReason:vte.serialization.property("finish_reason",A$r.FinishReason.optional()),response:I$r.GenerateStreamEndResponse}).extend(M$r.GenerateStreamEvent)});var WPe=v(oS=>{"use strict";var R$r=oS&&oS.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),j$r=oS&&oS.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),N$r=oS&&oS.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&R$r(e,t,r);return j$r(e,t),e};Object.defineProperty(oS,"__esModule",{value:!0});oS.GenerateStreamError=void 0;var _$=N$r(J()),D$r=b$(),L$r=QH();oS.GenerateStreamError=_$.serialization.object({index:_$.serialization.number().optional(),isFinished:_$.serialization.property("is_finished",_$.serialization.boolean()),finishReason:_$.serialization.property("finish_reason",D$r.FinishReason),err:_$.serialization.string()}).extend(L$r.GenerateStreamEvent)});var s0t=v(iS=>{"use strict";var F$r=iS&&iS.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),k$r=iS&&iS.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),$$r=iS&&iS.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&F$r(e,t,r);return k$r(e,t),e};Object.defineProperty(iS,"__esModule",{value:!0});iS.GenerateStreamedResponse=void 0;var a0t=$$r(J()),B$r=UPe(),q$r=VPe(),U$r=WPe();iS.GenerateStreamedResponse=a0t.serialization.union(a0t.serialization.discriminant("eventType","event_type"),{"text-generation":B$r.GenerateStreamText,"stream-end":q$r.GenerateStreamEnd,"stream-error":U$r.GenerateStreamError}).transform({transform:t=>t,untransform:t=>t})});var KPe=v(aS=>{"use strict";var z$r=aS&&aS.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),H$r=aS&&aS.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),V$r=aS&&aS.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&z$r(e,t,r);return H$r(e,t),e};Object.defineProperty(aS,"__esModule",{value:!0});aS.EmbedJobStatus=void 0;var W$r=V$r(J());aS.EmbedJobStatus=W$r.serialization.enum_(["processing","complete","cancelling","cancelled","failed"])});var GPe=v(sS=>{"use strict";var K$r=sS&&sS.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),G$r=sS&&sS.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),J$r=sS&&sS.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&K$r(e,t,r);return G$r(e,t),e};Object.defineProperty(sS,"__esModule",{value:!0});sS.EmbedJobTruncate=void 0;var Y$r=J$r(J());sS.EmbedJobTruncate=Y$r.serialization.enum_(["START","END"])});var JPe=v(uS=>{"use strict";var Z$r=uS&&uS.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),X$r=uS&&uS.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Q$r=uS&&uS.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&Z$r(e,t,r);return X$r(e,t),e};Object.defineProperty(uS,"__esModule",{value:!0});uS.EmbedJob=void 0;var Sy=Q$r(J()),eBr=KPe(),tBr=GPe(),rBr=Em();uS.EmbedJob=Sy.serialization.object({jobId:Sy.serialization.property("job_id",Sy.serialization.string()),name:Sy.serialization.string().optional(),status:eBr.EmbedJobStatus,createdAt:Sy.serialization.property("created_at",Sy.serialization.date()),inputDatasetId:Sy.serialization.property("input_dataset_id",Sy.serialization.string()),outputDatasetId:Sy.serialization.property("output_dataset_id",Sy.serialization.string().optional()),model:Sy.serialization.string(),truncate:tBr.EmbedJobTruncate,meta:rBr.ApiMeta.optional()})});var u0t=v(lS=>{"use strict";var nBr=lS&&lS.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),oBr=lS&&lS.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),iBr=lS&&lS.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&nBr(e,t,r);return oBr(e,t),e};Object.defineProperty(lS,"__esModule",{value:!0});lS.ListEmbedJobResponse=void 0;var YPe=iBr(J()),aBr=JPe();lS.ListEmbedJobResponse=YPe.serialization.object({embedJobs:YPe.serialization.property("embed_jobs",YPe.serialization.list(aBr.EmbedJob).optional())})});var l0t=v(cS=>{"use strict";var sBr=cS&&cS.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),uBr=cS&&cS.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),lBr=cS&&cS.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&sBr(e,t,r);return uBr(e,t),e};Object.defineProperty(cS,"__esModule",{value:!0});cS.CreateEmbedJobResponse=void 0;var ZPe=lBr(J()),cBr=Em();cS.CreateEmbedJobResponse=ZPe.serialization.object({jobId:ZPe.serialization.property("job_id",ZPe.serialization.string()),meta:cBr.ApiMeta.optional()})});var QPe=v(dS=>{"use strict";var dBr=dS&&dS.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),fBr=dS&&dS.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),pBr=dS&&dS.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&dBr(e,t,r);return fBr(e,t),e};Object.defineProperty(dS,"__esModule",{value:!0});dS.ClassifyExample=void 0;var XPe=pBr(J());dS.ClassifyExample=XPe.serialization.object({text:XPe.serialization.string().optional(),label:XPe.serialization.string().optional()})});var c0t=v(fS=>{"use strict";var mBr=fS&&fS.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),hBr=fS&&fS.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),gBr=fS&&fS.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&mBr(e,t,r);return hBr(e,t),e};Object.defineProperty(fS,"__esModule",{value:!0});fS.ParseInfo=void 0;var eEe=gBr(J());fS.ParseInfo=eEe.serialization.object({separator:eEe.serialization.string().optional(),delimiter:eEe.serialization.string().optional()})});var d0t=v(pS=>{"use strict";var yBr=pS&&pS.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),bBr=pS&&pS.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),_Br=pS&&pS.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&yBr(e,t,r);return bBr(e,t),e};Object.defineProperty(pS,"__esModule",{value:!0});pS.RerankerDataMetrics=void 0;var Tm=_Br(J());pS.RerankerDataMetrics=Tm.serialization.object({numTrainQueries:Tm.serialization.property("num_train_queries",Tm.serialization.number().optional()),numTrainRelevantPassages:Tm.serialization.property("num_train_relevant_passages",Tm.serialization.number().optional()),numTrainHardNegatives:Tm.serialization.property("num_train_hard_negatives",Tm.serialization.number().optional()),numEvalQueries:Tm.serialization.property("num_eval_queries",Tm.serialization.number().optional()),numEvalRelevantPassages:Tm.serialization.property("num_eval_relevant_passages",Tm.serialization.number().optional()),numEvalHardNegatives:Tm.serialization.property("num_eval_hard_negatives",Tm.serialization.number().optional())})});var f0t=v(mS=>{"use strict";var vBr=mS&&mS.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),wBr=mS&&mS.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),SBr=mS&&mS.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&vBr(e,t,r);return wBr(e,t),e};Object.defineProperty(mS,"__esModule",{value:!0});mS.ChatDataMetrics=void 0;var v$=SBr(J());mS.ChatDataMetrics=v$.serialization.object({numTrainTurns:v$.serialization.property("num_train_turns",v$.serialization.number().optional()),numEvalTurns:v$.serialization.property("num_eval_turns",v$.serialization.number().optional()),preamble:v$.serialization.string().optional()})});var tEe=v(hS=>{"use strict";var xBr=hS&&hS.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),CBr=hS&&hS.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),OBr=hS&&hS.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&xBr(e,t,r);return CBr(e,t),e};Object.defineProperty(hS,"__esModule",{value:!0});hS.LabelMetric=void 0;var w$=OBr(J());hS.LabelMetric=w$.serialization.object({totalExamples:w$.serialization.property("total_examples",w$.serialization.number().optional()),label:w$.serialization.string().optional(),samples:w$.serialization.list(w$.serialization.string()).optional()})});var p0t=v(gS=>{"use strict";var PBr=gS&&gS.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),EBr=gS&&gS.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),TBr=gS&&gS.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&PBr(e,t,r);return EBr(e,t),e};Object.defineProperty(gS,"__esModule",{value:!0});gS.ClassifyDataMetrics=void 0;var rEe=TBr(J()),ABr=tEe();gS.ClassifyDataMetrics=rEe.serialization.object({labelMetrics:rEe.serialization.property("label_metrics",rEe.serialization.list(ABr.LabelMetric).optional())})});var nEe=v(yS=>{"use strict";var IBr=yS&&yS.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),MBr=yS&&yS.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),RBr=yS&&yS.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&IBr(e,t,r);return MBr(e,t),e};Object.defineProperty(yS,"__esModule",{value:!0});yS.FinetuneDatasetMetrics=void 0;var Am=RBr(J());yS.FinetuneDatasetMetrics=Am.serialization.object({trainableTokenCount:Am.serialization.property("trainable_token_count",Am.serialization.number().optional()),totalExamples:Am.serialization.property("total_examples",Am.serialization.number().optional()),trainExamples:Am.serialization.property("train_examples",Am.serialization.number().optional()),trainSizeBytes:Am.serialization.property("train_size_bytes",Am.serialization.number().optional()),evalExamples:Am.serialization.property("eval_examples",Am.serialization.number().optional()),evalSizeBytes:Am.serialization.property("eval_size_bytes",Am.serialization.number().optional())})});var iEe=v(bS=>{"use strict";var jBr=bS&&bS.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),NBr=bS&&bS.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),DBr=bS&&bS.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&jBr(e,t,r);return NBr(e,t),e};Object.defineProperty(bS,"__esModule",{value:!0});bS.MetricsEmbedDataFieldsItem=void 0;var oEe=DBr(J());bS.MetricsEmbedDataFieldsItem=oEe.serialization.object({name:oEe.serialization.string().optional(),count:oEe.serialization.number().optional()})});var aEe=v(_S=>{"use strict";var LBr=_S&&_S.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),FBr=_S&&_S.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),kBr=_S&&_S.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&LBr(e,t,r);return FBr(e,t),e};Object.defineProperty(_S,"__esModule",{value:!0});_S.MetricsEmbedData=void 0;var m0t=kBr(J()),$Br=iEe();_S.MetricsEmbedData=m0t.serialization.object({fields:m0t.serialization.list($Br.MetricsEmbedDataFieldsItem).optional()})});var h0t=v(vS=>{"use strict";var BBr=vS&&vS.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),qBr=vS&&vS.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),UBr=vS&&vS.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&BBr(e,t,r);return qBr(e,t),e};Object.defineProperty(vS,"__esModule",{value:!0});vS.Metrics=void 0;var sEe=UBr(J()),zBr=nEe(),HBr=aEe();vS.Metrics=sEe.serialization.object({finetuneDatasetMetrics:sEe.serialization.property("finetune_dataset_metrics",zBr.FinetuneDatasetMetrics.optional()),embedData:sEe.serialization.property("embed_data",HBr.MetricsEmbedData.optional())})});var uEe=v(SS=>{"use strict";var VBr=SS&&SS.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),WBr=SS&&SS.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),KBr=SS&&SS.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&VBr(e,t,r);return WBr(e,t),e};Object.defineProperty(SS,"__esModule",{value:!0});SS.ConnectorOAuth=void 0;var wS=KBr(J());SS.ConnectorOAuth=wS.serialization.object({clientId:wS.serialization.property("client_id",wS.serialization.string().optional()),clientSecret:wS.serialization.property("client_secret",wS.serialization.string().optional()),authorizeUrl:wS.serialization.property("authorize_url",wS.serialization.string()),tokenUrl:wS.serialization.property("token_url",wS.serialization.string()),scope:wS.serialization.string().optional()})});var lEe=v(xS=>{"use strict";var GBr=xS&&xS.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),JBr=xS&&xS.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),YBr=xS&&xS.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&GBr(e,t,r);return JBr(e,t),e};Object.defineProperty(xS,"__esModule",{value:!0});xS.ConnectorAuthStatus=void 0;var ZBr=YBr(J());xS.ConnectorAuthStatus=ZBr.serialization.enum_(["valid","expired"])});var S$=v(CS=>{"use strict";var XBr=CS&&CS.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),QBr=CS&&CS.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),eqr=CS&&CS.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&XBr(e,t,r);return QBr(e,t),e};Object.defineProperty(CS,"__esModule",{value:!0});CS.Connector=void 0;var wl=eqr(J()),tqr=uEe(),rqr=lEe();CS.Connector=wl.serialization.object({id:wl.serialization.string(),organizationId:wl.serialization.property("organization_id",wl.serialization.string().optional()),name:wl.serialization.string(),description:wl.serialization.string().optional(),url:wl.serialization.string().optional(),createdAt:wl.serialization.property("created_at",wl.serialization.date()),updatedAt:wl.serialization.property("updated_at",wl.serialization.date()),excludes:wl.serialization.list(wl.serialization.string()).optional(),authType:wl.serialization.property("auth_type",wl.serialization.string().optional()),oauth:tqr.ConnectorOAuth.optional(),authStatus:wl.serialization.property("auth_status",rqr.ConnectorAuthStatus.optional()),active:wl.serialization.boolean().optional(),continueOnFailure:wl.serialization.property("continue_on_failure",wl.serialization.boolean().optional())})});var g0t=v(OS=>{"use strict";var nqr=OS&&OS.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),oqr=OS&&OS.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),iqr=OS&&OS.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&nqr(e,t,r);return oqr(e,t),e};Object.defineProperty(OS,"__esModule",{value:!0});OS.ListConnectorsResponse=void 0;var wte=iqr(J()),aqr=S$();OS.ListConnectorsResponse=wte.serialization.object({connectors:wte.serialization.list(aqr.Connector),totalCount:wte.serialization.property("total_count",wte.serialization.number().optional())})});var y0t=v(PS=>{"use strict";var sqr=PS&&PS.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),uqr=PS&&PS.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),lqr=PS&&PS.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&sqr(e,t,r);return uqr(e,t),e};Object.defineProperty(PS,"__esModule",{value:!0});PS.CreateConnectorResponse=void 0;var cqr=lqr(J()),dqr=S$();PS.CreateConnectorResponse=cqr.serialization.object({connector:dqr.Connector})});var b0t=v(ES=>{"use strict";var fqr=ES&&ES.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),pqr=ES&&ES.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),mqr=ES&&ES.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&fqr(e,t,r);return pqr(e,t),e};Object.defineProperty(ES,"__esModule",{value:!0});ES.GetConnectorResponse=void 0;var hqr=mqr(J()),gqr=S$();ES.GetConnectorResponse=hqr.serialization.object({connector:gqr.Connector})});var _0t=v(TS=>{"use strict";var yqr=TS&&TS.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),bqr=TS&&TS.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),_qr=TS&&TS.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&yqr(e,t,r);return bqr(e,t),e};Object.defineProperty(TS,"__esModule",{value:!0});TS.DeleteConnectorResponse=void 0;var cEe=_qr(J());TS.DeleteConnectorResponse=cEe.serialization.record(cEe.serialization.string(),cEe.serialization.unknown())});var v0t=v(AS=>{"use strict";var vqr=AS&&AS.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),wqr=AS&&AS.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Sqr=AS&&AS.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&vqr(e,t,r);return wqr(e,t),e};Object.defineProperty(AS,"__esModule",{value:!0});AS.UpdateConnectorResponse=void 0;var xqr=Sqr(J()),Cqr=S$();AS.UpdateConnectorResponse=xqr.serialization.object({connector:Cqr.Connector})});var w0t=v(IS=>{"use strict";var Oqr=IS&&IS.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Pqr=IS&&IS.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Eqr=IS&&IS.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&Oqr(e,t,r);return Pqr(e,t),e};Object.defineProperty(IS,"__esModule",{value:!0});IS.OAuthAuthorizeResponse=void 0;var dEe=Eqr(J());IS.OAuthAuthorizeResponse=dEe.serialization.object({redirectUrl:dEe.serialization.property("redirect_url",dEe.serialization.string().optional())})});var fEe=v(MS=>{"use strict";var Tqr=MS&&MS.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Aqr=MS&&MS.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Iqr=MS&&MS.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&Tqr(e,t,r);return Aqr(e,t),e};Object.defineProperty(MS,"__esModule",{value:!0});MS.CompatibleEndpoint=void 0;var Mqr=Iqr(J());MS.CompatibleEndpoint=Mqr.serialization.enum_(["chat","embed","classify","summarize","rerank","rate","generate"])});var pEe=v(jS=>{"use strict";var Rqr=jS&&jS.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),jqr=jS&&jS.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Nqr=jS&&jS.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&Rqr(e,t,r);return jqr(e,t),e};Object.defineProperty(jS,"__esModule",{value:!0});jS.GetModelResponse=void 0;var RS=Nqr(J()),S0t=fEe();jS.GetModelResponse=RS.serialization.object({name:RS.serialization.string().optional(),endpoints:RS.serialization.list(S0t.CompatibleEndpoint).optional(),finetuned:RS.serialization.boolean().optional(),contextLength:RS.serialization.property("context_length",RS.serialization.number().optional()),tokenizerUrl:RS.serialization.property("tokenizer_url",RS.serialization.string().optional()),defaultEndpoints:RS.serialization.property("default_endpoints",RS.serialization.list(S0t.CompatibleEndpoint).optional())})});var x0t=v(NS=>{"use strict";var Dqr=NS&&NS.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Lqr=NS&&NS.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Fqr=NS&&NS.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&Dqr(e,t,r);return Lqr(e,t),e};Object.defineProperty(NS,"__esModule",{value:!0});NS.ListModelsResponse=void 0;var Ste=Fqr(J()),kqr=pEe();NS.ListModelsResponse=Ste.serialization.object({models:Ste.serialization.list(kqr.GetModelResponse),nextPageToken:Ste.serialization.property("next_page_token",Ste.serialization.string().optional())})});var C0t=v(me=>{"use strict";var $qr=me&&me.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Ce=me&&me.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&$qr(e,t,r)};Object.defineProperty(me,"__esModule",{value:!0});Ce(qOe(),me);Ce(UOe(),me);Ce(Ewt(),me);Ce(zOe(),me);Ce(Awt(),me);Ce(Mwt(),me);Ce(jwt(),me);Ce(Dwt(),me);Ce(Fwt(),me);Ce(HOe(),me);Ce(VOe(),me);Ce($wt(),me);Ce(WOe(),me);Ce(KOe(),me);Ce(GOe(),me);Ce(JOe(),me);Ce(YOe(),me);Ce(ZOe(),me);Ce(qwt(),me);Ce(aPe(),me);Ce(sPe(),me);Ce(uPe(),me);Ce(Hwt(),me);Ce(cPe(),me);Ce(dPe(),me);Ce(fPe(),me);Ce(pPe(),me);Ce(Wwt(),me);Ce(hPe(),me);Ce(gPe(),me);Ce(yPe(),me);Ce(Kwt(),me);Ce(Gwt(),me);Ce(Ywt(),me);Ce(Zwt(),me);Ce(g$(),me);Ce(_Pe(),me);Ce(JH(),me);Ce(wPe(),me);Ce(YH(),me);Ce(ute(),me);Ce(k1(),me);Ce(xPe(),me);Ce(cte(),me);Ce(Gee(),me);Ce(CPe(),me);Ce(fte(),me);Ce(pte(),me);Ce(ZH(),me);Ce(OPe(),me);Ce(hte(),me);Ce(b$(),me);Ce(XOe(),me);Ce(QOe(),me);Ce(ePe(),me);Ce(Em(),me);Ce(PPe(),me);Ce(k0(),me);Ce(TPe(),me);Ce(IPe(),me);Ce(MPe(),me);Ce(RPe(),me);Ce(jPe(),me);Ce(NPe(),me);Ce(DPe(),me);Ce(LPe(),me);Ce(FPe(),me);Ce(kPe(),me);Ce(o0t(),me);Ce(bOe(),me);Ce(Jee(),me);Ce(pOe(),me);Ce(mOe(),me);Ce(hOe(),me);Ce(gOe(),me);Ce(BPe(),me);Ce(qPe(),me);Ce(i0t(),me);Ce(QH(),me);Ce(UPe(),me);Ce(zPe(),me);Ce(HPe(),me);Ce(VPe(),me);Ce(WPe(),me);Ce(s0t(),me);Ce(Yee(),me);Ce(Zee(),me);Ce(tPe(),me);Ce(rPe(),me);Ce(nPe(),me);Ce(KPe(),me);Ce(GPe(),me);Ce(JPe(),me);Ce(u0t(),me);Ce(l0t(),me);Ce(iPe(),me);Ce(QPe(),me);Ce(COe(),me);Ce(xOe(),me);Ce(OOe(),me);Ce(c0t(),me);Ce(d0t(),me);Ce(f0t(),me);Ce(tEe(),me);Ce(p0t(),me);Ce(nEe(),me);Ce(iEe(),me);Ce(aEe(),me);Ce(h0t(),me);Ce(Qee(),me);Ce(uEe(),me);Ce(lEe(),me);Ce(S$(),me);Ce(g0t(),me);Ce(nte(),me);Ce($Oe(),me);Ce(ote(),me);Ce(y0t(),me);Ce(b0t(),me);Ce(_0t(),me);Ce(v0t(),me);Ce(w0t(),me);Ce(fEe(),me);Ce(pEe(),me);Ce(x0t(),me)});var O0t=v(DS=>{"use strict";var Bqr=DS&&DS.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),qqr=DS&&DS.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Uqr=DS&&DS.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&Bqr(e,t,r);return qqr(e,t),e};Object.defineProperty(DS,"__esModule",{value:!0});DS.ChatStreamRequest=void 0;var ln=Uqr(J()),zqr=YH(),Hqr=qOe(),Vqr=ute(),Wqr=k1(),Kqr=UOe(),Gqr=cte(),Jqr=JH(),Yqr=fte(),Zqr=zOe();DS.ChatStreamRequest=ln.serialization.object({message:ln.serialization.string(),model:ln.serialization.string().optional(),preamble:ln.serialization.string().optional(),chatHistory:ln.serialization.property("chat_history",ln.serialization.list(zqr.Message).optional()),conversationId:ln.serialization.property("conversation_id",ln.serialization.string().optional()),promptTruncation:ln.serialization.property("prompt_truncation",Hqr.ChatStreamRequestPromptTruncation.optional()),connectors:ln.serialization.list(Vqr.ChatConnector).optional(),searchQueriesOnly:ln.serialization.property("search_queries_only",ln.serialization.boolean().optional()),documents:ln.serialization.list(Wqr.ChatDocument).optional(),citationQuality:ln.serialization.property("citation_quality",Kqr.ChatStreamRequestCitationQuality.optional()),temperature:ln.serialization.number().optional(),maxTokens:ln.serialization.property("max_tokens",ln.serialization.number().optional()),maxInputTokens:ln.serialization.property("max_input_tokens",ln.serialization.number().optional()),k:ln.serialization.number().optional(),p:ln.serialization.number().optional(),seed:ln.serialization.number().optional(),stopSequences:ln.serialization.property("stop_sequences",ln.serialization.list(ln.serialization.string()).optional()),frequencyPenalty:ln.serialization.property("frequency_penalty",ln.serialization.number().optional()),presencePenalty:ln.serialization.property("presence_penalty",ln.serialization.number().optional()),rawPrompting:ln.serialization.property("raw_prompting",ln.serialization.boolean().optional()),returnPrompt:ln.serialization.property("return_prompt",ln.serialization.boolean().optional()),tools:ln.serialization.list(Gqr.Tool).optional(),toolResults:ln.serialization.property("tool_results",ln.serialization.list(Jqr.ToolResult).optional()),forceSingleStep:ln.serialization.property("force_single_step",ln.serialization.boolean().optional()),responseFormat:ln.serialization.property("response_format",Yqr.ResponseFormat.optional()),safetyMode:ln.serialization.property("safety_mode",Zqr.ChatStreamRequestSafetyMode.optional())})});var P0t=v(LS=>{"use strict";var Xqr=LS&&LS.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Qqr=LS&&LS.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),eUr=LS&&LS.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&Xqr(e,t,r);return Qqr(e,t),e};Object.defineProperty(LS,"__esModule",{value:!0});LS.ChatRequest=void 0;var cn=eUr(J()),tUr=YH(),rUr=HOe(),nUr=ute(),oUr=k1(),iUr=VOe(),aUr=cte(),sUr=JH(),uUr=fte(),lUr=WOe();LS.ChatRequest=cn.serialization.object({message:cn.serialization.string(),model:cn.serialization.string().optional(),preamble:cn.serialization.string().optional(),chatHistory:cn.serialization.property("chat_history",cn.serialization.list(tUr.Message).optional()),conversationId:cn.serialization.property("conversation_id",cn.serialization.string().optional()),promptTruncation:cn.serialization.property("prompt_truncation",rUr.ChatRequestPromptTruncation.optional()),connectors:cn.serialization.list(nUr.ChatConnector).optional(),searchQueriesOnly:cn.serialization.property("search_queries_only",cn.serialization.boolean().optional()),documents:cn.serialization.list(oUr.ChatDocument).optional(),citationQuality:cn.serialization.property("citation_quality",iUr.ChatRequestCitationQuality.optional()),temperature:cn.serialization.number().optional(),maxTokens:cn.serialization.property("max_tokens",cn.serialization.number().optional()),maxInputTokens:cn.serialization.property("max_input_tokens",cn.serialization.number().optional()),k:cn.serialization.number().optional(),p:cn.serialization.number().optional(),seed:cn.serialization.number().optional(),stopSequences:cn.serialization.property("stop_sequences",cn.serialization.list(cn.serialization.string()).optional()),frequencyPenalty:cn.serialization.property("frequency_penalty",cn.serialization.number().optional()),presencePenalty:cn.serialization.property("presence_penalty",cn.serialization.number().optional()),rawPrompting:cn.serialization.property("raw_prompting",cn.serialization.boolean().optional()),returnPrompt:cn.serialization.property("return_prompt",cn.serialization.boolean().optional()),tools:cn.serialization.list(aUr.Tool).optional(),toolResults:cn.serialization.property("tool_results",cn.serialization.list(sUr.ToolResult).optional()),forceSingleStep:cn.serialization.property("force_single_step",cn.serialization.boolean().optional()),responseFormat:cn.serialization.property("response_format",uUr.ResponseFormat.optional()),safetyMode:cn.serialization.property("safety_mode",lUr.ChatRequestSafetyMode.optional())})});var E0t=v(FS=>{"use strict";var cUr=FS&&FS.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),dUr=FS&&FS.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),fUr=FS&&FS.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&cUr(e,t,r);return dUr(e,t),e};Object.defineProperty(FS,"__esModule",{value:!0});FS.GenerateStreamRequest=void 0;var oa=fUr(J()),pUr=KOe(),mUr=GOe();FS.GenerateStreamRequest=oa.serialization.object({prompt:oa.serialization.string(),model:oa.serialization.string().optional(),numGenerations:oa.serialization.property("num_generations",oa.serialization.number().optional()),maxTokens:oa.serialization.property("max_tokens",oa.serialization.number().optional()),truncate:pUr.GenerateStreamRequestTruncate.optional(),temperature:oa.serialization.number().optional(),seed:oa.serialization.number().optional(),preset:oa.serialization.string().optional(),endSequences:oa.serialization.property("end_sequences",oa.serialization.list(oa.serialization.string()).optional()),stopSequences:oa.serialization.property("stop_sequences",oa.serialization.list(oa.serialization.string()).optional()),k:oa.serialization.number().optional(),p:oa.serialization.number().optional(),frequencyPenalty:oa.serialization.property("frequency_penalty",oa.serialization.number().optional()),presencePenalty:oa.serialization.property("presence_penalty",oa.serialization.number().optional()),returnLikelihoods:oa.serialization.property("return_likelihoods",mUr.GenerateStreamRequestReturnLikelihoods.optional()),rawPrompting:oa.serialization.property("raw_prompting",oa.serialization.boolean().optional())})});var T0t=v(kS=>{"use strict";var hUr=kS&&kS.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),gUr=kS&&kS.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),yUr=kS&&kS.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&hUr(e,t,r);return gUr(e,t),e};Object.defineProperty(kS,"__esModule",{value:!0});kS.GenerateRequest=void 0;var ia=yUr(J()),bUr=JOe(),_Ur=YOe();kS.GenerateRequest=ia.serialization.object({prompt:ia.serialization.string(),model:ia.serialization.string().optional(),numGenerations:ia.serialization.property("num_generations",ia.serialization.number().optional()),maxTokens:ia.serialization.property("max_tokens",ia.serialization.number().optional()),truncate:bUr.GenerateRequestTruncate.optional(),temperature:ia.serialization.number().optional(),seed:ia.serialization.number().optional(),preset:ia.serialization.string().optional(),endSequences:ia.serialization.property("end_sequences",ia.serialization.list(ia.serialization.string()).optional()),stopSequences:ia.serialization.property("stop_sequences",ia.serialization.list(ia.serialization.string()).optional()),k:ia.serialization.number().optional(),p:ia.serialization.number().optional(),frequencyPenalty:ia.serialization.property("frequency_penalty",ia.serialization.number().optional()),presencePenalty:ia.serialization.property("presence_penalty",ia.serialization.number().optional()),returnLikelihoods:ia.serialization.property("return_likelihoods",_Ur.GenerateRequestReturnLikelihoods.optional()),rawPrompting:ia.serialization.property("raw_prompting",ia.serialization.boolean().optional())})});var A0t=v($S=>{"use strict";var vUr=$S&&$S.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),wUr=$S&&$S.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),SUr=$S&&$S.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&vUr(e,t,r);return wUr(e,t),e};Object.defineProperty($S,"__esModule",{value:!0});$S.EmbedRequest=void 0;var Z1=SUr(J()),xUr=Yee(),CUr=Zee(),OUr=ZOe();$S.EmbedRequest=Z1.serialization.object({texts:Z1.serialization.list(Z1.serialization.string()),model:Z1.serialization.string().optional(),inputType:Z1.serialization.property("input_type",xUr.EmbedInputType.optional()),embeddingTypes:Z1.serialization.property("embedding_types",Z1.serialization.list(CUr.EmbeddingType).optional()),truncate:OUr.EmbedRequestTruncate.optional()})});var I0t=v(BS=>{"use strict";var PUr=BS&&BS.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),EUr=BS&&BS.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),TUr=BS&&BS.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&PUr(e,t,r);return EUr(e,t),e};Object.defineProperty(BS,"__esModule",{value:!0});BS.RerankRequest=void 0;var Im=TUr(J()),AUr=aPe();BS.RerankRequest=Im.serialization.object({model:Im.serialization.string().optional(),query:Im.serialization.string(),documents:Im.serialization.list(AUr.RerankRequestDocumentsItem),topN:Im.serialization.property("top_n",Im.serialization.number().optional()),rankFields:Im.serialization.property("rank_fields",Im.serialization.list(Im.serialization.string()).optional()),returnDocuments:Im.serialization.property("return_documents",Im.serialization.boolean().optional()),maxChunksPerDoc:Im.serialization.property("max_chunks_per_doc",Im.serialization.number().optional())})});var M0t=v(qS=>{"use strict";var IUr=qS&&qS.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),MUr=qS&&qS.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),RUr=qS&&qS.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&IUr(e,t,r);return MUr(e,t),e};Object.defineProperty(qS,"__esModule",{value:!0});qS.ClassifyRequest=void 0;var x$=RUr(J()),jUr=QPe(),NUr=cPe();qS.ClassifyRequest=x$.serialization.object({inputs:x$.serialization.list(x$.serialization.string()),examples:x$.serialization.list(jUr.ClassifyExample).optional(),model:x$.serialization.string().optional(),preset:x$.serialization.string().optional(),truncate:NUr.ClassifyRequestTruncate.optional()})});var R0t=v(US=>{"use strict";var DUr=US&&US.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),LUr=US&&US.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),FUr=US&&US.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&DUr(e,t,r);return LUr(e,t),e};Object.defineProperty(US,"__esModule",{value:!0});US.SummarizeRequest=void 0;var C$=FUr(J()),kUr=hPe(),$Ur=gPe(),BUr=yPe();US.SummarizeRequest=C$.serialization.object({text:C$.serialization.string(),length:kUr.SummarizeRequestLength.optional(),format:$Ur.SummarizeRequestFormat.optional(),model:C$.serialization.string().optional(),extractiveness:BUr.SummarizeRequestExtractiveness.optional(),temperature:C$.serialization.number().optional(),additionalCommand:C$.serialization.property("additional_command",C$.serialization.string().optional())})});var j0t=v(zS=>{"use strict";var qUr=zS&&zS.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),UUr=zS&&zS.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),zUr=zS&&zS.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&qUr(e,t,r);return UUr(e,t),e};Object.defineProperty(zS,"__esModule",{value:!0});zS.TokenizeRequest=void 0;var mEe=zUr(J());zS.TokenizeRequest=mEe.serialization.object({text:mEe.serialization.string(),model:mEe.serialization.string()})});var N0t=v(HS=>{"use strict";var HUr=HS&&HS.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),VUr=HS&&HS.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),WUr=HS&&HS.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&HUr(e,t,r);return VUr(e,t),e};Object.defineProperty(HS,"__esModule",{value:!0});HS.DetokenizeRequest=void 0;var xte=WUr(J());HS.DetokenizeRequest=xte.serialization.object({tokens:xte.serialization.list(xte.serialization.number()),model:xte.serialization.string()})});var D0t=v(as=>{"use strict";Object.defineProperty(as,"__esModule",{value:!0});as.DetokenizeRequest=as.TokenizeRequest=as.SummarizeRequest=as.ClassifyRequest=as.RerankRequest=as.EmbedRequest=as.GenerateRequest=as.GenerateStreamRequest=as.ChatRequest=as.ChatStreamRequest=void 0;var KUr=O0t();Object.defineProperty(as,"ChatStreamRequest",{enumerable:!0,get:function(){return KUr.ChatStreamRequest}});var GUr=P0t();Object.defineProperty(as,"ChatRequest",{enumerable:!0,get:function(){return GUr.ChatRequest}});var JUr=E0t();Object.defineProperty(as,"GenerateStreamRequest",{enumerable:!0,get:function(){return JUr.GenerateStreamRequest}});var YUr=T0t();Object.defineProperty(as,"GenerateRequest",{enumerable:!0,get:function(){return YUr.GenerateRequest}});var ZUr=A0t();Object.defineProperty(as,"EmbedRequest",{enumerable:!0,get:function(){return ZUr.EmbedRequest}});var XUr=I0t();Object.defineProperty(as,"RerankRequest",{enumerable:!0,get:function(){return XUr.RerankRequest}});var QUr=M0t();Object.defineProperty(as,"ClassifyRequest",{enumerable:!0,get:function(){return QUr.ClassifyRequest}});var ezr=R0t();Object.defineProperty(as,"SummarizeRequest",{enumerable:!0,get:function(){return ezr.SummarizeRequest}});var tzr=j0t();Object.defineProperty(as,"TokenizeRequest",{enumerable:!0,get:function(){return tzr.TokenizeRequest}});var rzr=N0t();Object.defineProperty(as,"DetokenizeRequest",{enumerable:!0,get:function(){return rzr.DetokenizeRequest}})});var L0t=v(X1=>{"use strict";var nzr=X1&&X1.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),ozr=X1&&X1.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&nzr(e,t,r)};Object.defineProperty(X1,"__esModule",{value:!0});ozr(D0t(),X1)});var dO=v(cO=>{"use strict";var izr=cO&&cO.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),hEe=cO&&cO.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&izr(e,t,r)};Object.defineProperty(cO,"__esModule",{value:!0});hEe(Owt(),cO);hEe(C0t(),cO);hEe(L0t(),cO)});var gEe=v(Yo=>{"use strict";var azr=Yo&&Yo.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),szr=Yo&&Yo.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),uzr=Yo&&Yo.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&azr(e,t,r);return szr(e,t),e},Cte=Yo&&Yo.__awaiter||function(t,e,r,n){function o(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function s(c){try{l(n.next(c))}catch(d){a(d)}}function u(c){try{l(n.throw(c))}catch(d){a(d)}}function l(c){c.done?i(c.value):o(c.value).then(s,u)}l((n=n.apply(t,e||[])).next())})},lzr=Yo&&Yo.__asyncValues||function(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof __values=="function"?__values(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(i){r[i]=t[i]&&function(a){return new Promise(function(s,u){a=t[i](a),o(s,u,a.done,a.value)})}}function o(i,a,s,u){Promise.resolve(u).then(function(l){i({value:l,done:s})},a)}};Object.defineProperty(Yo,"__esModule",{value:!0});Yo.fetchOverride=Yo.parseAWSEvent=Yo.getEndpointFromUrl=Yo.getAuthHeaders=Yo.getUrl=Yo.mapResponseFromBedrock=void 0;var czr=rbe(),dzr=(Tlt(),Rl(Elt)),fzr=Ndt(),pzr=Jft(),mzr=uH(),hzr=J(),gzr=Mxe(),yzr=pvt(),rV=uzr(dO()),bzr=(t,e)=>Cte(void 0,void 0,void 0,function*(){let r=Object.assign({},process.env);try{return t(),yield e()}finally{process.env=r}}),_zr={chat:rV.StreamedChatResponse,generate:rV.GenerateStreamedResponse},vzr={chat:rV.NonStreamedChatResponse,embed:rV.EmbedResponse,generate:rV.Generation},wzr=(t,e,r)=>Cte(void 0,void 0,void 0,function*(){let n=t?_zr[e]:vzr[e],o={unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]},i=yield n.parseOrThrow(r,o);return n.jsonOrThrow(i,o)});Yo.mapResponseFromBedrock=wzr;var Szr=(t,e,r,n)=>{let o={bedrock:n?"invoke-with-response-stream":"invoke",sagemaker:n?"invocations-response-stream":"invocations"}[t];return{bedrock:`https://${t}-runtime.${e}.amazonaws.com/model/${r}/${o}`,sagemaker:`https://runtime.sagemaker.${e}.amazonaws.com/endpoints/${r}/${o}`}[t]};Yo.getUrl=Szr;var xzr=(t,e,r,n,o,i)=>Cte(void 0,void 0,void 0,function*(){let a=(0,dzr.fromNodeProviderChain)(),s=yield bzr(()=>{i.awsAccessKey&&(process.env.AWS_ACCESS_KEY_ID=i.awsAccessKey),i.awsSecretKey&&(process.env.AWS_SECRET_ACCESS_KEY=i.awsSecretKey),i.awsSessionToken&&(process.env.AWS_SESSION_TOKEN=i.awsSessionToken)},()=>a()),u=new pzr.SignatureV4({service:o,region:i.awsRegion,credentials:s,sha256:czr.Sha256});delete r.connection,r.host=t.hostname;let l=new fzr.HttpRequest({method:e.toUpperCase(),protocol:t.protocol,path:t.pathname,headers:r,body:n});return(yield u.sign(l)).headers});Yo.getAuthHeaders=xzr;var Czr=(t,e,r,n)=>{if(e&&t.includes(e))return"chat";if(r&&t.includes(r))return"embed";if(n&&t.includes(n))return"generate";throw new Error(`Unknown endpoint in url: ${t}`)};Yo.getEndpointFromUrl=Czr;var Ozr=t=>{let e=/{[^\}]*}/,r=t.match(e);if(r?.[0]){let n=JSON.parse(r[0]);if(n.bytes){let o=Buffer.from(n.bytes,"base64").toString("utf-8"),i=JSON.parse(o);if(i.event_type)return i}}};Yo.parseAWSEvent=Ozr;var Pzr=(t,{awsRegion:e,awsAccessKey:r,awsSecretKey:n,awsSessionToken:o})=>i=>Cte(void 0,void 0,void 0,function*(){var a,s;let u=i.url.split("/").pop(),l=i.body;console.assert(l.model,"model is required");let c=!!l.stream,d=(0,Yo.getUrl)(t,e,l.model,c);delete l.stream,delete l.model,delete i.headers.Authorization,i.headers.Host=new URL(d).hostname;let f=yield(0,Yo.getAuthHeaders)(new URL(d),i.method,i.headers,JSON.stringify(l),t,{awsRegion:e,awsAccessKey:r,awsSecretKey:n,awsSessionToken:o});i.url=d,i.headers=f;let p=yield(0,hzr.fetcher)(i);if(!p.ok)return p;try{if(c){let b=(0,gzr.readableStreamAsyncIterable)(p.body),g=new yzr.LineDecoder,y=new mzr.PassThrough;try{for(var m=lzr(b),h;h=yield m.next(),!h.done;){let w=h.value;for(let S of g.decode(w)){let C=(0,Yo.parseAWSEvent)(S);if(C){let P=yield(0,Yo.mapResponseFromBedrock)(c,u,C);y.push(JSON.stringify(P)+`
`)}}}}catch(w){a={error:w}}finally{try{h&&!h.done&&(s=m.return)&&(yield s.call(m))}finally{if(a)throw a.error}}for(let w of g.flush()){let S=(0,Yo.parseAWSEvent)(w);if(S){let C=yield(0,Yo.mapResponseFromBedrock)(c,u,S);y.push(JSON.stringify(C)+`
`)}}return y.end(),{ok:!0,body:y}}else{let b=yield p.body;return{ok:!0,body:yield(0,Yo.mapResponseFromBedrock)(c,u,b)}}}catch(b){throw b}});Yo.fetchOverride=Pzr});var fO=v(Ote=>{"use strict";Object.defineProperty(Ote,"__esModule",{value:!0});Ote.CohereEnvironment=void 0;Ote.CohereEnvironment={Production:"https://api.cohere.com"}});var tA=v((F0t,Pte)=>{(function(t,e,r){typeof Pte<"u"&&Pte.exports?Pte.exports=r():typeof define=="function"&&define.amd?define(r):e[t]=r()})("urljoin",F0t,function(){function t(e){var r=[];if(e.length===0)return"";if(typeof e[0]!="string")throw new TypeError("Url must be a string. Received "+e[0]);if(e[0].match(/^[^/:]+:\/*$/)&&e.length>1){var n=e.shift();e[0]=n+e[0]}e[0].match(/^file:\/\/\//)?e[0]=e[0].replace(/^([^/:]+):\/*/,"$1:///"):e[0]=e[0].replace(/^([^/:]+):\/*/,"$1://");for(var o=0;o<e.length;o++){var i=e[o];if(typeof i!="string")throw new TypeError("Url must be a string. Received "+i);i!==""&&(o>0&&(i=i.replace(/^[\/]+/,"")),o<e.length-1?i=i.replace(/[\/]+$/,""):i=i.replace(/[\/]+$/,"/"),r.push(i))}var a=r.join("/");a=a.replace(/\/(\?|&|#[^!])/g,"$1");var s=a.split("?");return a=s.shift()+(s.length>0?"?":"")+s.join("&"),a}return function(){var e;return typeof arguments[0]=="object"?e=arguments[0]:e=[].slice.call(arguments),t(e)}})});var bEe=v(Ep=>{"use strict";var Ezr=Ep&&Ep.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Tzr=Ep&&Ep.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),nV=Ep&&Ep.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&Ezr(e,t,r);return Tzr(e,t),e},Ete=Ep&&Ep.__awaiter||function(t,e,r,n){function o(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function s(c){try{l(n.next(c))}catch(d){a(d)}}function u(c){try{l(n.throw(c))}catch(d){a(d)}}function l(c){c.done?i(c.value):o(c.value).then(s,u)}l((n=n.apply(t,e||[])).next())})},Azr=Ep&&Ep.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ep,"__esModule",{value:!0});Ep.V2=void 0;var k0t=nV(fO()),Op=nV(J()),ss=nV(LC()),Pp=nV(dO()),$0t=Azr(tA()),pO=nV(ws()),yEe=class{constructor(e={}){this._options=e}chatStream(e,r){var n,o;return Ete(this,void 0,void 0,function*(){let i=yield((n=this._options.fetcher)!==null&&n!==void 0?n:Op.fetcher)({url:(0,$0t.default)((o=yield Op.Supplier.get(this._options.environment))!==null&&o!==void 0?o:k0t.CohereEnvironment.Production,"v2/chat"),method:"POST",headers:{Authorization:yield this._getAuthorizationHeader(),"X-Client-Name":(yield Op.Supplier.get(this._options.clientName))!=null?yield Op.Supplier.get(this._options.clientName):void 0,"X-Fern-Language":"JavaScript","X-Fern-SDK-Name":"cohere-ai","X-Fern-SDK-Version":"7.13.0","User-Agent":"cohere-ai/7.13.0","X-Fern-Runtime":Op.RUNTIME.type,"X-Fern-Runtime-Version":Op.RUNTIME.version},contentType:"application/json",requestType:"json",body:Object.assign(Object.assign({},Pp.V2ChatStreamRequest.jsonOrThrow(e,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0})),{stream:!0}),responseType:"sse",timeoutMs:r?.timeoutInSeconds!=null?r.timeoutInSeconds*1e3:3e5,maxRetries:r?.maxRetries,abortSignal:r?.abortSignal});if(i.ok)return new Op.Stream({stream:i.body,parse:a=>Ete(this,void 0,void 0,function*(){return Pp.StreamedChatResponse2.parseOrThrow(a,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]})}),signal:r?.abortSignal,eventShape:{type:"sse",streamTerminator:"[DONE]"}});if(i.error.reason==="status-code")switch(i.error.statusCode){case 400:throw new ss.BadRequestError(i.error.body);case 401:throw new ss.UnauthorizedError(i.error.body);case 403:throw new ss.ForbiddenError(i.error.body);case 404:throw new ss.NotFoundError(i.error.body);case 422:throw new ss.UnprocessableEntityError(Pp.UnprocessableEntityErrorBody.parseOrThrow(i.error.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]}));case 429:throw new ss.TooManyRequestsError(Pp.TooManyRequestsErrorBody.parseOrThrow(i.error.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]}));case 499:throw new ss.ClientClosedRequestError(Pp.ClientClosedRequestErrorBody.parseOrThrow(i.error.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]}));case 500:throw new ss.InternalServerError(i.error.body);case 501:throw new ss.NotImplementedError(Pp.NotImplementedErrorBody.parseOrThrow(i.error.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]}));case 503:throw new ss.ServiceUnavailableError(i.error.body);case 504:throw new ss.GatewayTimeoutError(Pp.GatewayTimeoutErrorBody.parseOrThrow(i.error.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]}));default:throw new pO.CohereError({statusCode:i.error.statusCode,body:i.error.body})}switch(i.error.reason){case"non-json":throw new pO.CohereError({statusCode:i.error.statusCode,body:i.error.rawBody});case"timeout":throw new pO.CohereTimeoutError;case"unknown":throw new pO.CohereError({message:i.error.errorMessage})}})}chat(e,r){var n,o;return Ete(this,void 0,void 0,function*(){let i=yield((n=this._options.fetcher)!==null&&n!==void 0?n:Op.fetcher)({url:(0,$0t.default)((o=yield Op.Supplier.get(this._options.environment))!==null&&o!==void 0?o:k0t.CohereEnvironment.Production,"v2/chat"),method:"POST",headers:{Authorization:yield this._getAuthorizationHeader(),"X-Client-Name":(yield Op.Supplier.get(this._options.clientName))!=null?yield Op.Supplier.get(this._options.clientName):void 0,"X-Fern-Language":"JavaScript","X-Fern-SDK-Name":"cohere-ai","X-Fern-SDK-Version":"7.13.0","User-Agent":"cohere-ai/7.13.0","X-Fern-Runtime":Op.RUNTIME.type,"X-Fern-Runtime-Version":Op.RUNTIME.version},contentType:"application/json",requestType:"json",body:Object.assign(Object.assign({},Pp.V2ChatRequest.jsonOrThrow(e,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0})),{stream:!1}),timeoutMs:r?.timeoutInSeconds!=null?r.timeoutInSeconds*1e3:3e5,maxRetries:r?.maxRetries,abortSignal:r?.abortSignal});if(i.ok)return Pp.NonStreamedChatResponse2.parseOrThrow(i.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]});if(i.error.reason==="status-code")switch(i.error.statusCode){case 400:throw new ss.BadRequestError(i.error.body);case 401:throw new ss.UnauthorizedError(i.error.body);case 403:throw new ss.ForbiddenError(i.error.body);case 404:throw new ss.NotFoundError(i.error.body);case 422:throw new ss.UnprocessableEntityError(Pp.UnprocessableEntityErrorBody.parseOrThrow(i.error.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]}));case 429:throw new ss.TooManyRequestsError(Pp.TooManyRequestsErrorBody.parseOrThrow(i.error.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]}));case 499:throw new ss.ClientClosedRequestError(Pp.ClientClosedRequestErrorBody.parseOrThrow(i.error.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]}));case 500:throw new ss.InternalServerError(i.error.body);case 501:throw new ss.NotImplementedError(Pp.NotImplementedErrorBody.parseOrThrow(i.error.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]}));case 503:throw new ss.ServiceUnavailableError(i.error.body);case 504:throw new ss.GatewayTimeoutError(Pp.GatewayTimeoutErrorBody.parseOrThrow(i.error.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]}));default:throw new pO.CohereError({statusCode:i.error.statusCode,body:i.error.body})}switch(i.error.reason){case"non-json":throw new pO.CohereError({statusCode:i.error.statusCode,body:i.error.rawBody});case"timeout":throw new pO.CohereTimeoutError;case"unknown":throw new pO.CohereError({message:i.error.errorMessage})}})}_getAuthorizationHeader(){var e;return Ete(this,void 0,void 0,function*(){let r=(e=yield Op.Supplier.get(this._options.token))!==null&&e!==void 0?e:process==null?void 0:process.env.CO_API_KEY;if(r==null)throw new pO.CohereError({message:"Please specify CO_API_KEY when instantiating the client."});return`Bearer ${r}`})}};Ep.V2=yEe});var B0t=v(Tp=>{"use strict";var Izr=Tp&&Tp.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Mzr=Tp&&Tp.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),iV=Tp&&Tp.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&Izr(e,t,r);return Mzr(e,t),e},oV=Tp&&Tp.__awaiter||function(t,e,r,n){function o(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function s(c){try{l(n.next(c))}catch(d){a(d)}}function u(c){try{l(n.throw(c))}catch(d){a(d)}}function l(c){c.done?i(c.value):o(c.value).then(s,u)}l((n=n.apply(t,e||[])).next())})},Rzr=Tp&&Tp.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Tp,"__esModule",{value:!0});Tp.EmbedJobs=void 0;var Tte=iV(fO()),aa=iV(J()),Nr=iV(LC()),Ate=Rzr(tA()),Sa=iV(dO()),Mc=iV(ws()),_Ee=class{constructor(e={}){this._options=e}list(e){var r,n;return oV(this,void 0,void 0,function*(){let o=yield((r=this._options.fetcher)!==null&&r!==void 0?r:aa.fetcher)({url:(0,Ate.default)((n=yield aa.Supplier.get(this._options.environment))!==null&&n!==void 0?n:Tte.CohereEnvironment.Production,"v1/embed-jobs"),method:"GET",headers:{Authorization:yield this._getAuthorizationHeader(),"X-Client-Name":(yield aa.Supplier.get(this._options.clientName))!=null?yield aa.Supplier.get(this._options.clientName):void 0,"X-Fern-Language":"JavaScript","X-Fern-SDK-Name":"cohere-ai","X-Fern-SDK-Version":"7.13.0","User-Agent":"cohere-ai/7.13.0","X-Fern-Runtime":aa.RUNTIME.type,"X-Fern-Runtime-Version":aa.RUNTIME.version},contentType:"application/json",requestType:"json",timeoutMs:e?.timeoutInSeconds!=null?e.timeoutInSeconds*1e3:3e5,maxRetries:e?.maxRetries,abortSignal:e?.abortSignal});if(o.ok)return Sa.ListEmbedJobResponse.parseOrThrow(o.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]});if(o.error.reason==="status-code")switch(o.error.statusCode){case 400:throw new Nr.BadRequestError(o.error.body);case 401:throw new Nr.UnauthorizedError(o.error.body);case 403:throw new Nr.ForbiddenError(o.error.body);case 404:throw new Nr.NotFoundError(o.error.body);case 422:throw new Nr.UnprocessableEntityError(Sa.UnprocessableEntityErrorBody.parseOrThrow(o.error.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]}));case 429:throw new Nr.TooManyRequestsError(Sa.TooManyRequestsErrorBody.parseOrThrow(o.error.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]}));case 499:throw new Nr.ClientClosedRequestError(Sa.ClientClosedRequestErrorBody.parseOrThrow(o.error.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]}));case 500:throw new Nr.InternalServerError(o.error.body);case 501:throw new Nr.NotImplementedError(Sa.NotImplementedErrorBody.parseOrThrow(o.error.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]}));case 503:throw new Nr.ServiceUnavailableError(o.error.body);case 504:throw new Nr.GatewayTimeoutError(Sa.GatewayTimeoutErrorBody.parseOrThrow(o.error.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]}));default:throw new Mc.CohereError({statusCode:o.error.statusCode,body:o.error.body})}switch(o.error.reason){case"non-json":throw new Mc.CohereError({statusCode:o.error.statusCode,body:o.error.rawBody});case"timeout":throw new Mc.CohereTimeoutError;case"unknown":throw new Mc.CohereError({message:o.error.errorMessage})}})}create(e,r){var n,o;return oV(this,void 0,void 0,function*(){let i=yield((n=this._options.fetcher)!==null&&n!==void 0?n:aa.fetcher)({url:(0,Ate.default)((o=yield aa.Supplier.get(this._options.environment))!==null&&o!==void 0?o:Tte.CohereEnvironment.Production,"v1/embed-jobs"),method:"POST",headers:{Authorization:yield this._getAuthorizationHeader(),"X-Client-Name":(yield aa.Supplier.get(this._options.clientName))!=null?yield aa.Supplier.get(this._options.clientName):void 0,"X-Fern-Language":"JavaScript","X-Fern-SDK-Name":"cohere-ai","X-Fern-SDK-Version":"7.13.0","User-Agent":"cohere-ai/7.13.0","X-Fern-Runtime":aa.RUNTIME.type,"X-Fern-Runtime-Version":aa.RUNTIME.version},contentType:"application/json",requestType:"json",body:Sa.CreateEmbedJobRequest.jsonOrThrow(e,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0}),timeoutMs:r?.timeoutInSeconds!=null?r.timeoutInSeconds*1e3:3e5,maxRetries:r?.maxRetries,abortSignal:r?.abortSignal});if(i.ok)return Sa.CreateEmbedJobResponse.parseOrThrow(i.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]});if(i.error.reason==="status-code")switch(i.error.statusCode){case 400:throw new Nr.BadRequestError(i.error.body);case 401:throw new Nr.UnauthorizedError(i.error.body);case 403:throw new Nr.ForbiddenError(i.error.body);case 404:throw new Nr.NotFoundError(i.error.body);case 422:throw new Nr.UnprocessableEntityError(Sa.UnprocessableEntityErrorBody.parseOrThrow(i.error.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]}));case 429:throw new Nr.TooManyRequestsError(Sa.TooManyRequestsErrorBody.parseOrThrow(i.error.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]}));case 499:throw new Nr.ClientClosedRequestError(Sa.ClientClosedRequestErrorBody.parseOrThrow(i.error.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]}));case 500:throw new Nr.InternalServerError(i.error.body);case 501:throw new Nr.NotImplementedError(Sa.NotImplementedErrorBody.parseOrThrow(i.error.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]}));case 503:throw new Nr.ServiceUnavailableError(i.error.body);case 504:throw new Nr.GatewayTimeoutError(Sa.GatewayTimeoutErrorBody.parseOrThrow(i.error.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]}));default:throw new Mc.CohereError({statusCode:i.error.statusCode,body:i.error.body})}switch(i.error.reason){case"non-json":throw new Mc.CohereError({statusCode:i.error.statusCode,body:i.error.rawBody});case"timeout":throw new Mc.CohereTimeoutError;case"unknown":throw new Mc.CohereError({message:i.error.errorMessage})}})}get(e,r){var n,o;return oV(this,void 0,void 0,function*(){let i=yield((n=this._options.fetcher)!==null&&n!==void 0?n:aa.fetcher)({url:(0,Ate.default)((o=yield aa.Supplier.get(this._options.environment))!==null&&o!==void 0?o:Tte.CohereEnvironment.Production,`v1/embed-jobs/${encodeURIComponent(e)}`),method:"GET",headers:{Authorization:yield this._getAuthorizationHeader(),"X-Client-Name":(yield aa.Supplier.get(this._options.clientName))!=null?yield aa.Supplier.get(this._options.clientName):void 0,"X-Fern-Language":"JavaScript","X-Fern-SDK-Name":"cohere-ai","X-Fern-SDK-Version":"7.13.0","User-Agent":"cohere-ai/7.13.0","X-Fern-Runtime":aa.RUNTIME.type,"X-Fern-Runtime-Version":aa.RUNTIME.version},contentType:"application/json",requestType:"json",timeoutMs:r?.timeoutInSeconds!=null?r.timeoutInSeconds*1e3:3e5,maxRetries:r?.maxRetries,abortSignal:r?.abortSignal});if(i.ok)return Sa.EmbedJob.parseOrThrow(i.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]});if(i.error.reason==="status-code")switch(i.error.statusCode){case 400:throw new Nr.BadRequestError(i.error.body);case 401:throw new Nr.UnauthorizedError(i.error.body);case 403:throw new Nr.ForbiddenError(i.error.body);case 404:throw new Nr.NotFoundError(i.error.body);case 422:throw new Nr.UnprocessableEntityError(Sa.UnprocessableEntityErrorBody.parseOrThrow(i.error.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]}));case 429:throw new Nr.TooManyRequestsError(Sa.TooManyRequestsErrorBody.parseOrThrow(i.error.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]}));case 499:throw new Nr.ClientClosedRequestError(Sa.ClientClosedRequestErrorBody.parseOrThrow(i.error.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]}));case 500:throw new Nr.InternalServerError(i.error.body);case 501:throw new Nr.NotImplementedError(Sa.NotImplementedErrorBody.parseOrThrow(i.error.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]}));case 503:throw new Nr.ServiceUnavailableError(i.error.body);case 504:throw new Nr.GatewayTimeoutError(Sa.GatewayTimeoutErrorBody.parseOrThrow(i.error.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]}));default:throw new Mc.CohereError({statusCode:i.error.statusCode,body:i.error.body})}switch(i.error.reason){case"non-json":throw new Mc.CohereError({statusCode:i.error.statusCode,body:i.error.rawBody});case"timeout":throw new Mc.CohereTimeoutError;case"unknown":throw new Mc.CohereError({message:i.error.errorMessage})}})}cancel(e,r){var n,o;return oV(this,void 0,void 0,function*(){let i=yield((n=this._options.fetcher)!==null&&n!==void 0?n:aa.fetcher)({url:(0,Ate.default)((o=yield aa.Supplier.get(this._options.environment))!==null&&o!==void 0?o:Tte.CohereEnvironment.Production,`v1/embed-jobs/${encodeURIComponent(e)}/cancel`),method:"POST",headers:{Authorization:yield this._getAuthorizationHeader(),"X-Client-Name":(yield aa.Supplier.get(this._options.clientName))!=null?yield aa.Supplier.get(this._options.clientName):void 0,"X-Fern-Language":"JavaScript","X-Fern-SDK-Name":"cohere-ai","X-Fern-SDK-Version":"7.13.0","User-Agent":"cohere-ai/7.13.0","X-Fern-Runtime":aa.RUNTIME.type,"X-Fern-Runtime-Version":aa.RUNTIME.version},contentType:"application/json",requestType:"json",timeoutMs:r?.timeoutInSeconds!=null?r.timeoutInSeconds*1e3:3e5,maxRetries:r?.maxRetries,abortSignal:r?.abortSignal});if(!i.ok){if(i.error.reason==="status-code")switch(i.error.statusCode){case 400:throw new Nr.BadRequestError(i.error.body);case 401:throw new Nr.UnauthorizedError(i.error.body);case 403:throw new Nr.ForbiddenError(i.error.body);case 404:throw new Nr.NotFoundError(i.error.body);case 422:throw new Nr.UnprocessableEntityError(Sa.UnprocessableEntityErrorBody.parseOrThrow(i.error.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]}));case 429:throw new Nr.TooManyRequestsError(Sa.TooManyRequestsErrorBody.parseOrThrow(i.error.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]}));case 499:throw new Nr.ClientClosedRequestError(Sa.ClientClosedRequestErrorBody.parseOrThrow(i.error.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]}));case 500:throw new Nr.InternalServerError(i.error.body);case 501:throw new Nr.NotImplementedError(Sa.NotImplementedErrorBody.parseOrThrow(i.error.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]}));case 503:throw new Nr.ServiceUnavailableError(i.error.body);case 504:throw new Nr.GatewayTimeoutError(Sa.GatewayTimeoutErrorBody.parseOrThrow(i.error.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]}));default:throw new Mc.CohereError({statusCode:i.error.statusCode,body:i.error.body})}switch(i.error.reason){case"non-json":throw new Mc.CohereError({statusCode:i.error.statusCode,body:i.error.rawBody});case"timeout":throw new Mc.CohereTimeoutError;case"unknown":throw new Mc.CohereError({message:i.error.errorMessage})}}})}_getAuthorizationHeader(){var e;return oV(this,void 0,void 0,function*(){let r=(e=yield aa.Supplier.get(this._options.token))!==null&&e!==void 0?e:process==null?void 0:process.env.CO_API_KEY;if(r==null)throw new Mc.CohereError({message:"Please specify CO_API_KEY when instantiating the client."});return`Bearer ${r}`})}};Tp.EmbedJobs=_Ee});var q0t=v(Ap=>{"use strict";var jzr=Ap&&Ap.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Nzr=Ap&&Ap.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),uV=Ap&&Ap.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&jzr(e,t,r);return Nzr(e,t),e},O$=Ap&&Ap.__awaiter||function(t,e,r,n){function o(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function s(c){try{l(n.next(c))}catch(d){a(d)}}function u(c){try{l(n.throw(c))}catch(d){a(d)}}function l(c){c.done?i(c.value):o(c.value).then(s,u)}l((n=n.apply(t,e||[])).next())})},Dzr=Ap&&Ap.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ap,"__esModule",{value:!0});Ap.Datasets=void 0;var aV=uV(fO()),bo=uV(J()),er=uV(LC()),sV=Dzr(tA()),ii=uV(dO()),Ps=uV(ws()),vEe=class{constructor(e={}){this._options=e}list(e={},r){var n,o;return O$(this,void 0,void 0,function*(){let{datasetType:i,before:a,after:s,limit:u,offset:l,validationStatus:c}=e,d={};i!=null&&(d.datasetType=i),a!=null&&(d.before=a.toISOString()),s!=null&&(d.after=s.toISOString()),u!=null&&(d.limit=u.toString()),l!=null&&(d.offset=l.toString()),c!=null&&(d.validationStatus=c);let f=yield((n=this._options.fetcher)!==null&&n!==void 0?n:bo.fetcher)({url:(0,sV.default)((o=yield bo.Supplier.get(this._options.environment))!==null&&o!==void 0?o:aV.CohereEnvironment.Production,"v1/datasets"),method:"GET",headers:{Authorization:yield this._getAuthorizationHeader(),"X-Client-Name":(yield bo.Supplier.get(this._options.clientName))!=null?yield bo.Supplier.get(this._options.clientName):void 0,"X-Fern-Language":"JavaScript","X-Fern-SDK-Name":"cohere-ai","X-Fern-SDK-Version":"7.12.0","X-Fern-Runtime":bo.RUNTIME.type,"X-Fern-Runtime-Version":bo.RUNTIME.version},contentType:"application/json",queryParameters:d,requestType:"json",timeoutMs:r?.timeoutInSeconds!=null?r.timeoutInSeconds*1e3:3e5,maxRetries:r?.maxRetries,abortSignal:r?.abortSignal});if(f.ok)return ii.DatasetsListResponse.parseOrThrow(f.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]});if(f.error.reason==="status-code")switch(f.error.statusCode){case 400:throw new er.BadRequestError(f.error.body);case 401:throw new er.UnauthorizedError(f.error.body);case 403:throw new er.ForbiddenError(f.error.body);case 404:throw new er.NotFoundError(f.error.body);case 422:throw new er.UnprocessableEntityError(ii.UnprocessableEntityErrorBody.parseOrThrow(f.error.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]}));case 429:throw new er.TooManyRequestsError(ii.TooManyRequestsErrorBody.parseOrThrow(f.error.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]}));case 499:throw new er.ClientClosedRequestError(ii.ClientClosedRequestErrorBody.parseOrThrow(f.error.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]}));case 500:throw new er.InternalServerError(f.error.body);case 501:throw new er.NotImplementedError(ii.NotImplementedErrorBody.parseOrThrow(f.error.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]}));case 503:throw new er.ServiceUnavailableError(f.error.body);case 504:throw new er.GatewayTimeoutError(ii.GatewayTimeoutErrorBody.parseOrThrow(f.error.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]}));default:throw new Ps.CohereError({statusCode:f.error.statusCode,body:f.error.body})}switch(f.error.reason){case"non-json":throw new Ps.CohereError({statusCode:f.error.statusCode,body:f.error.rawBody});case"timeout":throw new Ps.CohereTimeoutError;case"unknown":throw new Ps.CohereError({message:f.error.errorMessage})}})}create(e,r,n,o){var i,a;return O$(this,void 0,void 0,function*(){let s={};s.name=n.name,s.type=n.type,n.keepOriginalFile!=null&&(s.keep_original_file=n.keepOriginalFile.toString()),n.skipMalformedInput!=null&&(s.skip_malformed_input=n.skipMalformedInput.toString()),n.keepFields!=null&&(Array.isArray(n.keepFields)?s.keep_fields=n.keepFields.map(d=>d):s.keep_fields=n.keepFields),n.optionalFields!=null&&(Array.isArray(n.optionalFields)?s.optional_fields=n.optionalFields.map(d=>d):s.optional_fields=n.optionalFields),n.textSeparator!=null&&(s.text_separator=n.textSeparator),n.csvDelimiter!=null&&(s.csv_delimiter=n.csvDelimiter),n.dryRun!=null&&(s.dry_run=n.dryRun.toString());let u=yield bo.newFormData();yield u.appendFile("data",e,e?.name),r!=null&&(yield u.appendFile("eval_data",r,r?.name));let l=yield u.getRequest(),c=yield((i=this._options.fetcher)!==null&&i!==void 0?i:bo.fetcher)({url:(0,sV.default)((a=yield bo.Supplier.get(this._options.environment))!==null&&a!==void 0?a:aV.CohereEnvironment.Production,"v1/datasets"),method:"POST",headers:Object.assign({Authorization:yield this._getAuthorizationHeader(),"X-Client-Name":(yield bo.Supplier.get(this._options.clientName))!=null?yield bo.Supplier.get(this._options.clientName):void 0,"X-Fern-Language":"JavaScript","X-Fern-SDK-Name":"cohere-ai","X-Fern-SDK-Version":"7.12.0","X-Fern-Runtime":bo.RUNTIME.type,"X-Fern-Runtime-Version":bo.RUNTIME.version},l.headers),queryParameters:s,requestType:"file",duplex:l.duplex,body:l.body,timeoutMs:o?.timeoutInSeconds!=null?o.timeoutInSeconds*1e3:3e5,maxRetries:o?.maxRetries,abortSignal:o?.abortSignal});if(c.ok)return ii.DatasetsCreateResponse.parseOrThrow(c.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]});if(c.error.reason==="status-code")switch(c.error.statusCode){case 400:throw new er.BadRequestError(c.error.body);case 401:throw new er.UnauthorizedError(c.error.body);case 403:throw new er.ForbiddenError(c.error.body);case 404:throw new er.NotFoundError(c.error.body);case 422:throw new er.UnprocessableEntityError(ii.UnprocessableEntityErrorBody.parseOrThrow(c.error.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]}));case 429:throw new er.TooManyRequestsError(ii.TooManyRequestsErrorBody.parseOrThrow(c.error.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]}));case 499:throw new er.ClientClosedRequestError(ii.ClientClosedRequestErrorBody.parseOrThrow(c.error.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]}));case 500:throw new er.InternalServerError(c.error.body);case 501:throw new er.NotImplementedError(ii.NotImplementedErrorBody.parseOrThrow(c.error.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]}));case 503:throw new er.ServiceUnavailableError(c.error.body);case 504:throw new er.GatewayTimeoutError(ii.GatewayTimeoutErrorBody.parseOrThrow(c.error.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]}));default:throw new Ps.CohereError({statusCode:c.error.statusCode,body:c.error.body})}switch(c.error.reason){case"non-json":throw new Ps.CohereError({statusCode:c.error.statusCode,body:c.error.rawBody});case"timeout":throw new Ps.CohereTimeoutError;case"unknown":throw new Ps.CohereError({message:c.error.errorMessage})}})}getUsage(e){var r,n;return O$(this,void 0,void 0,function*(){let o=yield((r=this._options.fetcher)!==null&&r!==void 0?r:bo.fetcher)({url:(0,sV.default)((n=yield bo.Supplier.get(this._options.environment))!==null&&n!==void 0?n:aV.CohereEnvironment.Production,"v1/datasets/usage"),method:"GET",headers:{Authorization:yield this._getAuthorizationHeader(),"X-Client-Name":(yield bo.Supplier.get(this._options.clientName))!=null?yield bo.Supplier.get(this._options.clientName):void 0,"X-Fern-Language":"JavaScript","X-Fern-SDK-Name":"cohere-ai","X-Fern-SDK-Version":"7.12.0","X-Fern-Runtime":bo.RUNTIME.type,"X-Fern-Runtime-Version":bo.RUNTIME.version},contentType:"application/json",requestType:"json",timeoutMs:e?.timeoutInSeconds!=null?e.timeoutInSeconds*1e3:3e5,maxRetries:e?.maxRetries,abortSignal:e?.abortSignal});if(o.ok)return ii.DatasetsGetUsageResponse.parseOrThrow(o.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]});if(o.error.reason==="status-code")switch(o.error.statusCode){case 400:throw new er.BadRequestError(o.error.body);case 401:throw new er.UnauthorizedError(o.error.body);case 403:throw new er.ForbiddenError(o.error.body);case 404:throw new er.NotFoundError(o.error.body);case 422:throw new er.UnprocessableEntityError(ii.UnprocessableEntityErrorBody.parseOrThrow(o.error.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]}));case 429:throw new er.TooManyRequestsError(ii.TooManyRequestsErrorBody.parseOrThrow(o.error.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]}));case 499:throw new er.ClientClosedRequestError(ii.ClientClosedRequestErrorBody.parseOrThrow(o.error.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]}));case 500:throw new er.InternalServerError(o.error.body);case 501:throw new er.NotImplementedError(ii.NotImplementedErrorBody.parseOrThrow(o.error.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]}));case 503:throw new er.ServiceUnavailableError(o.error.body);case 504:throw new er.GatewayTimeoutError(ii.GatewayTimeoutErrorBody.parseOrThrow(o.error.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]}));default:throw new Ps.CohereError({statusCode:o.error.statusCode,body:o.error.body})}switch(o.error.reason){case"non-json":throw new Ps.CohereError({statusCode:o.error.statusCode,body:o.error.rawBody});case"timeout":throw new Ps.CohereTimeoutError;case"unknown":throw new Ps.CohereError({message:o.error.errorMessage})}})}get(e,r){var n,o;return O$(this,void 0,void 0,function*(){let i=yield((n=this._options.fetcher)!==null&&n!==void 0?n:bo.fetcher)({url:(0,sV.default)((o=yield bo.Supplier.get(this._options.environment))!==null&&o!==void 0?o:aV.CohereEnvironment.Production,`v1/datasets/${encodeURIComponent(e)}`),method:"GET",headers:{Authorization:yield this._getAuthorizationHeader(),"X-Client-Name":(yield bo.Supplier.get(this._options.clientName))!=null?yield bo.Supplier.get(this._options.clientName):void 0,"X-Fern-Language":"JavaScript","X-Fern-SDK-Name":"cohere-ai","X-Fern-SDK-Version":"7.12.0","X-Fern-Runtime":bo.RUNTIME.type,"X-Fern-Runtime-Version":bo.RUNTIME.version},contentType:"application/json",requestType:"json",timeoutMs:r?.timeoutInSeconds!=null?r.timeoutInSeconds*1e3:3e5,maxRetries:r?.maxRetries,abortSignal:r?.abortSignal});if(i.ok)return ii.DatasetsGetResponse.parseOrThrow(i.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]});if(i.error.reason==="status-code")switch(i.error.statusCode){case 400:throw new er.BadRequestError(i.error.body);case 401:throw new er.UnauthorizedError(i.error.body);case 403:throw new er.ForbiddenError(i.error.body);case 404:throw new er.NotFoundError(i.error.body);case 422:throw new er.UnprocessableEntityError(ii.UnprocessableEntityErrorBody.parseOrThrow(i.error.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]}));case 429:throw new er.TooManyRequestsError(ii.TooManyRequestsErrorBody.parseOrThrow(i.error.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]}));case 499:throw new er.ClientClosedRequestError(ii.ClientClosedRequestErrorBody.parseOrThrow(i.error.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]}));case 500:throw new er.InternalServerError(i.error.body);case 501:throw new er.NotImplementedError(ii.NotImplementedErrorBody.parseOrThrow(i.error.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]}));case 503:throw new er.ServiceUnavailableError(i.error.body);case 504:throw new er.GatewayTimeoutError(ii.GatewayTimeoutErrorBody.parseOrThrow(i.error.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]}));default:throw new Ps.CohereError({statusCode:i.error.statusCode,body:i.error.body})}switch(i.error.reason){case"non-json":throw new Ps.CohereError({statusCode:i.error.statusCode,body:i.error.rawBody});case"timeout":throw new Ps.CohereTimeoutError;case"unknown":throw new Ps.CohereError({message:i.error.errorMessage})}})}delete(e,r){var n,o;return O$(this,void 0,void 0,function*(){let i=yield((n=this._options.fetcher)!==null&&n!==void 0?n:bo.fetcher)({url:(0,sV.default)((o=yield bo.Supplier.get(this._options.environment))!==null&&o!==void 0?o:aV.CohereEnvironment.Production,`v1/datasets/${encodeURIComponent(e)}`),method:"DELETE",headers:{Authorization:yield this._getAuthorizationHeader(),"X-Client-Name":(yield bo.Supplier.get(this._options.clientName))!=null?yield bo.Supplier.get(this._options.clientName):void 0,"X-Fern-Language":"JavaScript","X-Fern-SDK-Name":"cohere-ai","X-Fern-SDK-Version":"7.12.0","X-Fern-Runtime":bo.RUNTIME.type,"X-Fern-Runtime-Version":bo.RUNTIME.version},contentType:"application/json",requestType:"json",timeoutMs:r?.timeoutInSeconds!=null?r.timeoutInSeconds*1e3:3e5,maxRetries:r?.maxRetries,abortSignal:r?.abortSignal});if(i.ok)return ii.datasets.delete.Response.parseOrThrow(i.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]});if(i.error.reason==="status-code")switch(i.error.statusCode){case 400:throw new er.BadRequestError(i.error.body);case 401:throw new er.UnauthorizedError(i.error.body);case 403:throw new er.ForbiddenError(i.error.body);case 404:throw new er.NotFoundError(i.error.body);case 422:throw new er.UnprocessableEntityError(ii.UnprocessableEntityErrorBody.parseOrThrow(i.error.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]}));case 429:throw new er.TooManyRequestsError(ii.TooManyRequestsErrorBody.parseOrThrow(i.error.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]}));case 499:throw new er.ClientClosedRequestError(ii.ClientClosedRequestErrorBody.parseOrThrow(i.error.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]}));case 500:throw new er.InternalServerError(i.error.body);case 501:throw new er.NotImplementedError(ii.NotImplementedErrorBody.parseOrThrow(i.error.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]}));case 503:throw new er.ServiceUnavailableError(i.error.body);case 504:throw new er.GatewayTimeoutError(ii.GatewayTimeoutErrorBody.parseOrThrow(i.error.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]}));default:throw new Ps.CohereError({statusCode:i.error.statusCode,body:i.error.body})}switch(i.error.reason){case"non-json":throw new Ps.CohereError({statusCode:i.error.statusCode,body:i.error.rawBody});case"timeout":throw new Ps.CohereTimeoutError;case"unknown":throw new Ps.CohereError({message:i.error.errorMessage})}})}_getAuthorizationHeader(){var e;return O$(this,void 0,void 0,function*(){let r=(e=yield bo.Supplier.get(this._options.token))!==null&&e!==void 0?e:process==null?void 0:process.env.CO_API_KEY;if(r==null)throw new Ps.CohereError({message:"Please specify CO_API_KEY when instantiating the client."});return`Bearer ${r}`})}};Ap.Datasets=vEe});var U0t=v(Ip=>{"use strict";var Lzr=Ip&&Ip.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Fzr=Ip&&Ip.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),lV=Ip&&Ip.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&Lzr(e,t,r);return Fzr(e,t),e},Q1=Ip&&Ip.__awaiter||function(t,e,r,n){function o(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function s(c){try{l(n.next(c))}catch(d){a(d)}}function u(c){try{l(n.throw(c))}catch(d){a(d)}}function l(c){c.done?i(c.value):o(c.value).then(s,u)}l((n=n.apply(t,e||[])).next())})},kzr=Ip&&Ip.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ip,"__esModule",{value:!0});Ip.Connectors=void 0;var P$=lV(fO()),On=lV(J()),Pt=lV(LC()),E$=kzr(tA()),Sn=lV(dO()),sa=lV(ws()),wEe=class{constructor(e={}){this._options=e}list(e={},r){var n,o;return Q1(this,void 0,void 0,function*(){let{limit:i,offset:a}=e,s={};i!=null&&(s.limit=i.toString()),a!=null&&(s.offset=a.toString());let u=yield((n=this._options.fetcher)!==null&&n!==void 0?n:On.fetcher)({url:(0,E$.default)((o=yield On.Supplier.get(this._options.environment))!==null&&o!==void 0?o:P$.CohereEnvironment.Production,"v1/connectors"),method:"GET",headers:{Authorization:yield this._getAuthorizationHeader(),"X-Client-Name":(yield On.Supplier.get(this._options.clientName))!=null?yield On.Supplier.get(this._options.clientName):void 0,"X-Fern-Language":"JavaScript","X-Fern-SDK-Name":"cohere-ai","X-Fern-SDK-Version":"7.13.0","User-Agent":"cohere-ai/7.13.0","X-Fern-Runtime":On.RUNTIME.type,"X-Fern-Runtime-Version":On.RUNTIME.version},contentType:"application/json",queryParameters:s,requestType:"json",timeoutMs:r?.timeoutInSeconds!=null?r.timeoutInSeconds*1e3:3e5,maxRetries:r?.maxRetries,abortSignal:r?.abortSignal});if(u.ok)return Sn.ListConnectorsResponse.parseOrThrow(u.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]});if(u.error.reason==="status-code")switch(u.error.statusCode){case 400:throw new Pt.BadRequestError(u.error.body);case 401:throw new Pt.UnauthorizedError(u.error.body);case 403:throw new Pt.ForbiddenError(u.error.body);case 404:throw new Pt.NotFoundError(u.error.body);case 422:throw new Pt.UnprocessableEntityError(Sn.UnprocessableEntityErrorBody.parseOrThrow(u.error.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]}));case 429:throw new Pt.TooManyRequestsError(Sn.TooManyRequestsErrorBody.parseOrThrow(u.error.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]}));case 499:throw new Pt.ClientClosedRequestError(Sn.ClientClosedRequestErrorBody.parseOrThrow(u.error.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]}));case 500:throw new Pt.InternalServerError(u.error.body);case 501:throw new Pt.NotImplementedError(Sn.NotImplementedErrorBody.parseOrThrow(u.error.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]}));case 503:throw new Pt.ServiceUnavailableError(u.error.body);case 504:throw new Pt.GatewayTimeoutError(Sn.GatewayTimeoutErrorBody.parseOrThrow(u.error.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]}));default:throw new sa.CohereError({statusCode:u.error.statusCode,body:u.error.body})}switch(u.error.reason){case"non-json":throw new sa.CohereError({statusCode:u.error.statusCode,body:u.error.rawBody});case"timeout":throw new sa.CohereTimeoutError;case"unknown":throw new sa.CohereError({message:u.error.errorMessage})}})}create(e,r){var n,o;return Q1(this,void 0,void 0,function*(){let i=yield((n=this._options.fetcher)!==null&&n!==void 0?n:On.fetcher)({url:(0,E$.default)((o=yield On.Supplier.get(this._options.environment))!==null&&o!==void 0?o:P$.CohereEnvironment.Production,"v1/connectors"),method:"POST",headers:{Authorization:yield this._getAuthorizationHeader(),"X-Client-Name":(yield On.Supplier.get(this._options.clientName))!=null?yield On.Supplier.get(this._options.clientName):void 0,"X-Fern-Language":"JavaScript","X-Fern-SDK-Name":"cohere-ai","X-Fern-SDK-Version":"7.13.0","User-Agent":"cohere-ai/7.13.0","X-Fern-Runtime":On.RUNTIME.type,"X-Fern-Runtime-Version":On.RUNTIME.version},contentType:"application/json",requestType:"json",body:Sn.CreateConnectorRequest.jsonOrThrow(e,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0}),timeoutMs:r?.timeoutInSeconds!=null?r.timeoutInSeconds*1e3:3e5,maxRetries:r?.maxRetries,abortSignal:r?.abortSignal});if(i.ok)return Sn.CreateConnectorResponse.parseOrThrow(i.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]});if(i.error.reason==="status-code")switch(i.error.statusCode){case 400:throw new Pt.BadRequestError(i.error.body);case 401:throw new Pt.UnauthorizedError(i.error.body);case 403:throw new Pt.ForbiddenError(i.error.body);case 404:throw new Pt.NotFoundError(i.error.body);case 422:throw new Pt.UnprocessableEntityError(Sn.UnprocessableEntityErrorBody.parseOrThrow(i.error.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]}));case 429:throw new Pt.TooManyRequestsError(Sn.TooManyRequestsErrorBody.parseOrThrow(i.error.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]}));case 499:throw new Pt.ClientClosedRequestError(Sn.ClientClosedRequestErrorBody.parseOrThrow(i.error.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]}));case 500:throw new Pt.InternalServerError(i.error.body);case 501:throw new Pt.NotImplementedError(Sn.NotImplementedErrorBody.parseOrThrow(i.error.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]}));case 503:throw new Pt.ServiceUnavailableError(i.error.body);case 504:throw new Pt.GatewayTimeoutError(Sn.GatewayTimeoutErrorBody.parseOrThrow(i.error.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]}));default:throw new sa.CohereError({statusCode:i.error.statusCode,body:i.error.body})}switch(i.error.reason){case"non-json":throw new sa.CohereError({statusCode:i.error.statusCode,body:i.error.rawBody});case"timeout":throw new sa.CohereTimeoutError;case"unknown":throw new sa.CohereError({message:i.error.errorMessage})}})}get(e,r){var n,o;return Q1(this,void 0,void 0,function*(){let i=yield((n=this._options.fetcher)!==null&&n!==void 0?n:On.fetcher)({url:(0,E$.default)((o=yield On.Supplier.get(this._options.environment))!==null&&o!==void 0?o:P$.CohereEnvironment.Production,`v1/connectors/${encodeURIComponent(e)}`),method:"GET",headers:{Authorization:yield this._getAuthorizationHeader(),"X-Client-Name":(yield On.Supplier.get(this._options.clientName))!=null?yield On.Supplier.get(this._options.clientName):void 0,"X-Fern-Language":"JavaScript","X-Fern-SDK-Name":"cohere-ai","X-Fern-SDK-Version":"7.13.0","User-Agent":"cohere-ai/7.13.0","X-Fern-Runtime":On.RUNTIME.type,"X-Fern-Runtime-Version":On.RUNTIME.version},contentType:"application/json",requestType:"json",timeoutMs:r?.timeoutInSeconds!=null?r.timeoutInSeconds*1e3:3e5,maxRetries:r?.maxRetries,abortSignal:r?.abortSignal});if(i.ok)return Sn.GetConnectorResponse.parseOrThrow(i.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]});if(i.error.reason==="status-code")switch(i.error.statusCode){case 400:throw new Pt.BadRequestError(i.error.body);case 401:throw new Pt.UnauthorizedError(i.error.body);case 403:throw new Pt.ForbiddenError(i.error.body);case 404:throw new Pt.NotFoundError(i.error.body);case 422:throw new Pt.UnprocessableEntityError(Sn.UnprocessableEntityErrorBody.parseOrThrow(i.error.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]}));case 429:throw new Pt.TooManyRequestsError(Sn.TooManyRequestsErrorBody.parseOrThrow(i.error.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]}));case 499:throw new Pt.ClientClosedRequestError(Sn.ClientClosedRequestErrorBody.parseOrThrow(i.error.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]}));case 500:throw new Pt.InternalServerError(i.error.body);case 501:throw new Pt.NotImplementedError(Sn.NotImplementedErrorBody.parseOrThrow(i.error.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]}));case 503:throw new Pt.ServiceUnavailableError(i.error.body);case 504:throw new Pt.GatewayTimeoutError(Sn.GatewayTimeoutErrorBody.parseOrThrow(i.error.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]}));default:throw new sa.CohereError({statusCode:i.error.statusCode,body:i.error.body})}switch(i.error.reason){case"non-json":throw new sa.CohereError({statusCode:i.error.statusCode,body:i.error.rawBody});case"timeout":throw new sa.CohereTimeoutError;case"unknown":throw new sa.CohereError({message:i.error.errorMessage})}})}delete(e,r){var n,o;return Q1(this,void 0,void 0,function*(){let i=yield((n=this._options.fetcher)!==null&&n!==void 0?n:On.fetcher)({url:(0,E$.default)((o=yield On.Supplier.get(this._options.environment))!==null&&o!==void 0?o:P$.CohereEnvironment.Production,`v1/connectors/${encodeURIComponent(e)}`),method:"DELETE",headers:{Authorization:yield this._getAuthorizationHeader(),"X-Client-Name":(yield On.Supplier.get(this._options.clientName))!=null?yield On.Supplier.get(this._options.clientName):void 0,"X-Fern-Language":"JavaScript","X-Fern-SDK-Name":"cohere-ai","X-Fern-SDK-Version":"7.13.0","User-Agent":"cohere-ai/7.13.0","X-Fern-Runtime":On.RUNTIME.type,"X-Fern-Runtime-Version":On.RUNTIME.version},contentType:"application/json",requestType:"json",timeoutMs:r?.timeoutInSeconds!=null?r.timeoutInSeconds*1e3:3e5,maxRetries:r?.maxRetries,abortSignal:r?.abortSignal});if(i.ok)return Sn.DeleteConnectorResponse.parseOrThrow(i.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]});if(i.error.reason==="status-code")switch(i.error.statusCode){case 400:throw new Pt.BadRequestError(i.error.body);case 401:throw new Pt.UnauthorizedError(i.error.body);case 403:throw new Pt.ForbiddenError(i.error.body);case 404:throw new Pt.NotFoundError(i.error.body);case 422:throw new Pt.UnprocessableEntityError(Sn.UnprocessableEntityErrorBody.parseOrThrow(i.error.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]}));case 429:throw new Pt.TooManyRequestsError(Sn.TooManyRequestsErrorBody.parseOrThrow(i.error.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]}));case 499:throw new Pt.ClientClosedRequestError(Sn.ClientClosedRequestErrorBody.parseOrThrow(i.error.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]}));case 500:throw new Pt.InternalServerError(i.error.body);case 501:throw new Pt.NotImplementedError(Sn.NotImplementedErrorBody.parseOrThrow(i.error.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]}));case 503:throw new Pt.ServiceUnavailableError(i.error.body);case 504:throw new Pt.GatewayTimeoutError(Sn.GatewayTimeoutErrorBody.parseOrThrow(i.error.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]}));default:throw new sa.CohereError({statusCode:i.error.statusCode,body:i.error.body})}switch(i.error.reason){case"non-json":throw new sa.CohereError({statusCode:i.error.statusCode,body:i.error.rawBody});case"timeout":throw new sa.CohereTimeoutError;case"unknown":throw new sa.CohereError({message:i.error.errorMessage})}})}update(e,r={},n){var o,i;return Q1(this,void 0,void 0,function*(){let a=yield((o=this._options.fetcher)!==null&&o!==void 0?o:On.fetcher)({url:(0,E$.default)((i=yield On.Supplier.get(this._options.environment))!==null&&i!==void 0?i:P$.CohereEnvironment.Production,`v1/connectors/${encodeURIComponent(e)}`),method:"PATCH",headers:{Authorization:yield this._getAuthorizationHeader(),"X-Client-Name":(yield On.Supplier.get(this._options.clientName))!=null?yield On.Supplier.get(this._options.clientName):void 0,"X-Fern-Language":"JavaScript","X-Fern-SDK-Name":"cohere-ai","X-Fern-SDK-Version":"7.13.0","User-Agent":"cohere-ai/7.13.0","X-Fern-Runtime":On.RUNTIME.type,"X-Fern-Runtime-Version":On.RUNTIME.version},contentType:"application/json",requestType:"json",body:Sn.UpdateConnectorRequest.jsonOrThrow(r,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0}),timeoutMs:n?.timeoutInSeconds!=null?n.timeoutInSeconds*1e3:3e5,maxRetries:n?.maxRetries,abortSignal:n?.abortSignal});if(a.ok)return Sn.UpdateConnectorResponse.parseOrThrow(a.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]});if(a.error.reason==="status-code")switch(a.error.statusCode){case 400:throw new Pt.BadRequestError(a.error.body);case 401:throw new Pt.UnauthorizedError(a.error.body);case 403:throw new Pt.ForbiddenError(a.error.body);case 404:throw new Pt.NotFoundError(a.error.body);case 422:throw new Pt.UnprocessableEntityError(Sn.UnprocessableEntityErrorBody.parseOrThrow(a.error.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]}));case 429:throw new Pt.TooManyRequestsError(Sn.TooManyRequestsErrorBody.parseOrThrow(a.error.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]}));case 499:throw new Pt.ClientClosedRequestError(Sn.ClientClosedRequestErrorBody.parseOrThrow(a.error.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]}));case 500:throw new Pt.InternalServerError(a.error.body);case 501:throw new Pt.NotImplementedError(Sn.NotImplementedErrorBody.parseOrThrow(a.error.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]}));case 503:throw new Pt.ServiceUnavailableError(a.error.body);case 504:throw new Pt.GatewayTimeoutError(Sn.GatewayTimeoutErrorBody.parseOrThrow(a.error.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]}));default:throw new sa.CohereError({statusCode:a.error.statusCode,body:a.error.body})}switch(a.error.reason){case"non-json":throw new sa.CohereError({statusCode:a.error.statusCode,body:a.error.rawBody});case"timeout":throw new sa.CohereTimeoutError;case"unknown":throw new sa.CohereError({message:a.error.errorMessage})}})}oAuthAuthorize(e,r={},n){var o,i;return Q1(this,void 0,void 0,function*(){let{afterTokenRedirect:a}=r,s={};a!=null&&(s.after_token_redirect=a);let u=yield((o=this._options.fetcher)!==null&&o!==void 0?o:On.fetcher)({url:(0,E$.default)((i=yield On.Supplier.get(this._options.environment))!==null&&i!==void 0?i:P$.CohereEnvironment.Production,`v1/connectors/${encodeURIComponent(e)}/oauth/authorize`),method:"POST",headers:{Authorization:yield this._getAuthorizationHeader(),"X-Client-Name":(yield On.Supplier.get(this._options.clientName))!=null?yield On.Supplier.get(this._options.clientName):void 0,"X-Fern-Language":"JavaScript","X-Fern-SDK-Name":"cohere-ai","X-Fern-SDK-Version":"7.13.0","User-Agent":"cohere-ai/7.13.0","X-Fern-Runtime":On.RUNTIME.type,"X-Fern-Runtime-Version":On.RUNTIME.version},contentType:"application/json",queryParameters:s,requestType:"json",timeoutMs:n?.timeoutInSeconds!=null?n.timeoutInSeconds*1e3:3e5,maxRetries:n?.maxRetries,abortSignal:n?.abortSignal});if(u.ok)return Sn.OAuthAuthorizeResponse.parseOrThrow(u.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]});if(u.error.reason==="status-code")switch(u.error.statusCode){case 400:throw new Pt.BadRequestError(u.error.body);case 401:throw new Pt.UnauthorizedError(u.error.body);case 403:throw new Pt.ForbiddenError(u.error.body);case 404:throw new Pt.NotFoundError(u.error.body);case 422:throw new Pt.UnprocessableEntityError(Sn.UnprocessableEntityErrorBody.parseOrThrow(u.error.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]}));case 429:throw new Pt.TooManyRequestsError(Sn.TooManyRequestsErrorBody.parseOrThrow(u.error.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]}));case 499:throw new Pt.ClientClosedRequestError(Sn.ClientClosedRequestErrorBody.parseOrThrow(u.error.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]}));case 500:throw new Pt.InternalServerError(u.error.body);case 501:throw new Pt.NotImplementedError(Sn.NotImplementedErrorBody.parseOrThrow(u.error.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]}));case 503:throw new Pt.ServiceUnavailableError(u.error.body);case 504:throw new Pt.GatewayTimeoutError(Sn.GatewayTimeoutErrorBody.parseOrThrow(u.error.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]}));default:throw new sa.CohereError({statusCode:u.error.statusCode,body:u.error.body})}switch(u.error.reason){case"non-json":throw new sa.CohereError({statusCode:u.error.statusCode,body:u.error.rawBody});case"timeout":throw new sa.CohereTimeoutError;case"unknown":throw new sa.CohereError({message:u.error.errorMessage})}})}_getAuthorizationHeader(){var e;return Q1(this,void 0,void 0,function*(){let r=(e=yield On.Supplier.get(this._options.token))!==null&&e!==void 0?e:process==null?void 0:process.env.CO_API_KEY;if(r==null)throw new sa.CohereError({message:"Please specify CO_API_KEY when instantiating the client."});return`Bearer ${r}`})}};Ip.Connectors=wEe});var V0t=v(Mp=>{"use strict";var $zr=Mp&&Mp.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Bzr=Mp&&Mp.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),cV=Mp&&Mp.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&$zr(e,t,r);return Bzr(e,t),e},SEe=Mp&&Mp.__awaiter||function(t,e,r,n){function o(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function s(c){try{l(n.next(c))}catch(d){a(d)}}function u(c){try{l(n.throw(c))}catch(d){a(d)}}function l(c){c.done?i(c.value):o(c.value).then(s,u)}l((n=n.apply(t,e||[])).next())})},qzr=Mp&&Mp.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Mp,"__esModule",{value:!0});Mp.Models=void 0;var z0t=cV(fO()),Mm=cV(J()),us=cV(LC()),H0t=qzr(tA()),Jh=cV(dO()),mO=cV(ws()),xEe=class{constructor(e={}){this._options=e}get(e,r){var n,o;return SEe(this,void 0,void 0,function*(){let i=yield((n=this._options.fetcher)!==null&&n!==void 0?n:Mm.fetcher)({url:(0,H0t.default)((o=yield Mm.Supplier.get(this._options.environment))!==null&&o!==void 0?o:z0t.CohereEnvironment.Production,`v1/models/${encodeURIComponent(e)}`),method:"GET",headers:{Authorization:yield this._getAuthorizationHeader(),"X-Client-Name":(yield Mm.Supplier.get(this._options.clientName))!=null?yield Mm.Supplier.get(this._options.clientName):void 0,"X-Fern-Language":"JavaScript","X-Fern-SDK-Name":"cohere-ai","X-Fern-SDK-Version":"7.13.0","User-Agent":"cohere-ai/7.13.0","X-Fern-Runtime":Mm.RUNTIME.type,"X-Fern-Runtime-Version":Mm.RUNTIME.version},contentType:"application/json",requestType:"json",timeoutMs:r?.timeoutInSeconds!=null?r.timeoutInSeconds*1e3:3e5,maxRetries:r?.maxRetries,abortSignal:r?.abortSignal});if(i.ok)return Jh.GetModelResponse.parseOrThrow(i.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]});if(i.error.reason==="status-code")switch(i.error.statusCode){case 400:throw new us.BadRequestError(i.error.body);case 401:throw new us.UnauthorizedError(i.error.body);case 403:throw new us.ForbiddenError(i.error.body);case 404:throw new us.NotFoundError(i.error.body);case 422:throw new us.UnprocessableEntityError(Jh.UnprocessableEntityErrorBody.parseOrThrow(i.error.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]}));case 429:throw new us.TooManyRequestsError(Jh.TooManyRequestsErrorBody.parseOrThrow(i.error.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]}));case 499:throw new us.ClientClosedRequestError(Jh.ClientClosedRequestErrorBody.parseOrThrow(i.error.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]}));case 500:throw new us.InternalServerError(i.error.body);case 501:throw new us.NotImplementedError(Jh.NotImplementedErrorBody.parseOrThrow(i.error.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]}));case 503:throw new us.ServiceUnavailableError(i.error.body);case 504:throw new us.GatewayTimeoutError(Jh.GatewayTimeoutErrorBody.parseOrThrow(i.error.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]}));default:throw new mO.CohereError({statusCode:i.error.statusCode,body:i.error.body})}switch(i.error.reason){case"non-json":throw new mO.CohereError({statusCode:i.error.statusCode,body:i.error.rawBody});case"timeout":throw new mO.CohereTimeoutError;case"unknown":throw new mO.CohereError({message:i.error.errorMessage})}})}list(e={},r){var n,o;return SEe(this,void 0,void 0,function*(){let{pageSize:i,pageToken:a,endpoint:s,defaultOnly:u}=e,l={};i!=null&&(l.page_size=i.toString()),a!=null&&(l.page_token=a),s!=null&&(l.endpoint=s),u!=null&&(l.default_only=u.toString());let c=yield((n=this._options.fetcher)!==null&&n!==void 0?n:Mm.fetcher)({url:(0,H0t.default)((o=yield Mm.Supplier.get(this._options.environment))!==null&&o!==void 0?o:z0t.CohereEnvironment.Production,"v1/models"),method:"GET",headers:{Authorization:yield this._getAuthorizationHeader(),"X-Client-Name":(yield Mm.Supplier.get(this._options.clientName))!=null?yield Mm.Supplier.get(this._options.clientName):void 0,"X-Fern-Language":"JavaScript","X-Fern-SDK-Name":"cohere-ai","X-Fern-SDK-Version":"7.13.0","User-Agent":"cohere-ai/7.13.0","X-Fern-Runtime":Mm.RUNTIME.type,"X-Fern-Runtime-Version":Mm.RUNTIME.version},contentType:"application/json",queryParameters:l,requestType:"json",timeoutMs:r?.timeoutInSeconds!=null?r.timeoutInSeconds*1e3:3e5,maxRetries:r?.maxRetries,abortSignal:r?.abortSignal});if(c.ok)return Jh.ListModelsResponse.parseOrThrow(c.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]});if(c.error.reason==="status-code")switch(c.error.statusCode){case 400:throw new us.BadRequestError(c.error.body);case 401:throw new us.UnauthorizedError(c.error.body);case 403:throw new us.ForbiddenError(c.error.body);case 404:throw new us.NotFoundError(c.error.body);case 422:throw new us.UnprocessableEntityError(Jh.UnprocessableEntityErrorBody.parseOrThrow(c.error.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]}));case 429:throw new us.TooManyRequestsError(Jh.TooManyRequestsErrorBody.parseOrThrow(c.error.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]}));case 499:throw new us.ClientClosedRequestError(Jh.ClientClosedRequestErrorBody.parseOrThrow(c.error.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]}));case 500:throw new us.InternalServerError(c.error.body);case 501:throw new us.NotImplementedError(Jh.NotImplementedErrorBody.parseOrThrow(c.error.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]}));case 503:throw new us.ServiceUnavailableError(c.error.body);case 504:throw new us.GatewayTimeoutError(Jh.GatewayTimeoutErrorBody.parseOrThrow(c.error.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]}));default:throw new mO.CohereError({statusCode:c.error.statusCode,body:c.error.body})}switch(c.error.reason){case"non-json":throw new mO.CohereError({statusCode:c.error.statusCode,body:c.error.rawBody});case"timeout":throw new mO.CohereTimeoutError;case"unknown":throw new mO.CohereError({message:c.error.errorMessage})}})}_getAuthorizationHeader(){var e;return SEe(this,void 0,void 0,function*(){let r=(e=yield Mm.Supplier.get(this._options.token))!==null&&e!==void 0?e:process==null?void 0:process.env.CO_API_KEY;if(r==null)throw new mO.CohereError({message:"Please specify CO_API_KEY when instantiating the client."});return`Bearer ${r}`})}};Mp.Models=xEe});var W0t=v(Rp=>{"use strict";var Uzr=Rp&&Rp.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),zzr=Rp&&Rp.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),dV=Rp&&Rp.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&Uzr(e,t,r);return zzr(e,t),e},rA=Rp&&Rp.__awaiter||function(t,e,r,n){function o(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function s(c){try{l(n.next(c))}catch(d){a(d)}}function u(c){try{l(n.throw(c))}catch(d){a(d)}}function l(c){c.done?i(c.value):o(c.value).then(s,u)}l((n=n.apply(t,e||[])).next())})},Hzr=Rp&&Rp.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Rp,"__esModule",{value:!0});Rp.Finetuning=void 0;var ej=dV(fO()),Br=dV(J()),Kr=dV(LC()),tj=Hzr(tA()),hO=dV(dO()),pi=dV(ws()),CEe=class{constructor(e={}){this._options=e}listFinetunedModels(e={},r){var n,o;return rA(this,void 0,void 0,function*(){let{pageSize:i,pageToken:a,orderBy:s}=e,u={};i!=null&&(u.page_size=i.toString()),a!=null&&(u.page_token=a),s!=null&&(u.order_by=s);let l=yield((n=this._options.fetcher)!==null&&n!==void 0?n:Br.fetcher)({url:(0,tj.default)((o=yield Br.Supplier.get(this._options.environment))!==null&&o!==void 0?o:ej.CohereEnvironment.Production,"v1/finetuning/finetuned-models"),method:"GET",headers:{Authorization:yield this._getAuthorizationHeader(),"X-Client-Name":(yield Br.Supplier.get(this._options.clientName))!=null?yield Br.Supplier.get(this._options.clientName):void 0,"X-Fern-Language":"JavaScript","X-Fern-SDK-Name":"cohere-ai","X-Fern-SDK-Version":"7.13.0","User-Agent":"cohere-ai/7.13.0","X-Fern-Runtime":Br.RUNTIME.type,"X-Fern-Runtime-Version":Br.RUNTIME.version},contentType:"application/json",queryParameters:u,requestType:"json",timeoutMs:r?.timeoutInSeconds!=null?r.timeoutInSeconds*1e3:3e5,maxRetries:r?.maxRetries,abortSignal:r?.abortSignal});if(l.ok)return hO.finetuning.ListFinetunedModelsResponse.parseOrThrow(l.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]});if(l.error.reason==="status-code")switch(l.error.statusCode){case 400:throw new Kr.BadRequestError(l.error.body);case 401:throw new Kr.UnauthorizedError(l.error.body);case 403:throw new Kr.ForbiddenError(l.error.body);case 404:throw new Kr.NotFoundError(l.error.body);case 500:throw new Kr.InternalServerError(l.error.body);case 503:throw new Kr.ServiceUnavailableError(l.error.body);default:throw new pi.CohereError({statusCode:l.error.statusCode,body:l.error.body})}switch(l.error.reason){case"non-json":throw new pi.CohereError({statusCode:l.error.statusCode,body:l.error.rawBody});case"timeout":throw new pi.CohereTimeoutError;case"unknown":throw new pi.CohereError({message:l.error.errorMessage})}})}createFinetunedModel(e,r){var n,o;return rA(this,void 0,void 0,function*(){let i=yield((n=this._options.fetcher)!==null&&n!==void 0?n:Br.fetcher)({url:(0,tj.default)((o=yield Br.Supplier.get(this._options.environment))!==null&&o!==void 0?o:ej.CohereEnvironment.Production,"v1/finetuning/finetuned-models"),method:"POST",headers:{Authorization:yield this._getAuthorizationHeader(),"X-Client-Name":(yield Br.Supplier.get(this._options.clientName))!=null?yield Br.Supplier.get(this._options.clientName):void 0,"X-Fern-Language":"JavaScript","X-Fern-SDK-Name":"cohere-ai","X-Fern-SDK-Version":"7.13.0","User-Agent":"cohere-ai/7.13.0","X-Fern-Runtime":Br.RUNTIME.type,"X-Fern-Runtime-Version":Br.RUNTIME.version},contentType:"application/json",requestType:"json",body:hO.finetuning.FinetunedModel.jsonOrThrow(e,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0}),timeoutMs:r?.timeoutInSeconds!=null?r.timeoutInSeconds*1e3:3e5,maxRetries:r?.maxRetries,abortSignal:r?.abortSignal});if(i.ok)return hO.finetuning.CreateFinetunedModelResponse.parseOrThrow(i.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]});if(i.error.reason==="status-code")switch(i.error.statusCode){case 400:throw new Kr.BadRequestError(i.error.body);case 401:throw new Kr.UnauthorizedError(i.error.body);case 403:throw new Kr.ForbiddenError(i.error.body);case 404:throw new Kr.NotFoundError(i.error.body);case 500:throw new Kr.InternalServerError(i.error.body);case 503:throw new Kr.ServiceUnavailableError(i.error.body);default:throw new pi.CohereError({statusCode:i.error.statusCode,body:i.error.body})}switch(i.error.reason){case"non-json":throw new pi.CohereError({statusCode:i.error.statusCode,body:i.error.rawBody});case"timeout":throw new pi.CohereTimeoutError;case"unknown":throw new pi.CohereError({message:i.error.errorMessage})}})}getFinetunedModel(e,r){var n,o;return rA(this,void 0,void 0,function*(){let i=yield((n=this._options.fetcher)!==null&&n!==void 0?n:Br.fetcher)({url:(0,tj.default)((o=yield Br.Supplier.get(this._options.environment))!==null&&o!==void 0?o:ej.CohereEnvironment.Production,`v1/finetuning/finetuned-models/${encodeURIComponent(e)}`),method:"GET",headers:{Authorization:yield this._getAuthorizationHeader(),"X-Client-Name":(yield Br.Supplier.get(this._options.clientName))!=null?yield Br.Supplier.get(this._options.clientName):void 0,"X-Fern-Language":"JavaScript","X-Fern-SDK-Name":"cohere-ai","X-Fern-SDK-Version":"7.13.0","User-Agent":"cohere-ai/7.13.0","X-Fern-Runtime":Br.RUNTIME.type,"X-Fern-Runtime-Version":Br.RUNTIME.version},contentType:"application/json",requestType:"json",timeoutMs:r?.timeoutInSeconds!=null?r.timeoutInSeconds*1e3:3e5,maxRetries:r?.maxRetries,abortSignal:r?.abortSignal});if(i.ok)return hO.finetuning.GetFinetunedModelResponse.parseOrThrow(i.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]});if(i.error.reason==="status-code")switch(i.error.statusCode){case 400:throw new Kr.BadRequestError(i.error.body);case 401:throw new Kr.UnauthorizedError(i.error.body);case 403:throw new Kr.ForbiddenError(i.error.body);case 404:throw new Kr.NotFoundError(i.error.body);case 500:throw new Kr.InternalServerError(i.error.body);case 503:throw new Kr.ServiceUnavailableError(i.error.body);default:throw new pi.CohereError({statusCode:i.error.statusCode,body:i.error.body})}switch(i.error.reason){case"non-json":throw new pi.CohereError({statusCode:i.error.statusCode,body:i.error.rawBody});case"timeout":throw new pi.CohereTimeoutError;case"unknown":throw new pi.CohereError({message:i.error.errorMessage})}})}deleteFinetunedModel(e,r){var n,o;return rA(this,void 0,void 0,function*(){let i=yield((n=this._options.fetcher)!==null&&n!==void 0?n:Br.fetcher)({url:(0,tj.default)((o=yield Br.Supplier.get(this._options.environment))!==null&&o!==void 0?o:ej.CohereEnvironment.Production,`v1/finetuning/finetuned-models/${encodeURIComponent(e)}`),method:"DELETE",headers:{Authorization:yield this._getAuthorizationHeader(),"X-Client-Name":(yield Br.Supplier.get(this._options.clientName))!=null?yield Br.Supplier.get(this._options.clientName):void 0,"X-Fern-Language":"JavaScript","X-Fern-SDK-Name":"cohere-ai","X-Fern-SDK-Version":"7.13.0","User-Agent":"cohere-ai/7.13.0","X-Fern-Runtime":Br.RUNTIME.type,"X-Fern-Runtime-Version":Br.RUNTIME.version},contentType:"application/json",requestType:"json",timeoutMs:r?.timeoutInSeconds!=null?r.timeoutInSeconds*1e3:3e5,maxRetries:r?.maxRetries,abortSignal:r?.abortSignal});if(i.ok)return hO.finetuning.DeleteFinetunedModelResponse.parseOrThrow(i.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]});if(i.error.reason==="status-code")switch(i.error.statusCode){case 400:throw new Kr.BadRequestError(i.error.body);case 401:throw new Kr.UnauthorizedError(i.error.body);case 403:throw new Kr.ForbiddenError(i.error.body);case 404:throw new Kr.NotFoundError(i.error.body);case 500:throw new Kr.InternalServerError(i.error.body);case 503:throw new Kr.ServiceUnavailableError(i.error.body);default:throw new pi.CohereError({statusCode:i.error.statusCode,body:i.error.body})}switch(i.error.reason){case"non-json":throw new pi.CohereError({statusCode:i.error.statusCode,body:i.error.rawBody});case"timeout":throw new pi.CohereTimeoutError;case"unknown":throw new pi.CohereError({message:i.error.errorMessage})}})}updateFinetunedModel(e,r,n){var o,i;return rA(this,void 0,void 0,function*(){let a=yield((o=this._options.fetcher)!==null&&o!==void 0?o:Br.fetcher)({url:(0,tj.default)((i=yield Br.Supplier.get(this._options.environment))!==null&&i!==void 0?i:ej.CohereEnvironment.Production,`v1/finetuning/finetuned-models/${encodeURIComponent(e)}`),method:"PATCH",headers:{Authorization:yield this._getAuthorizationHeader(),"X-Client-Name":(yield Br.Supplier.get(this._options.clientName))!=null?yield Br.Supplier.get(this._options.clientName):void 0,"X-Fern-Language":"JavaScript","X-Fern-SDK-Name":"cohere-ai","X-Fern-SDK-Version":"7.13.0","User-Agent":"cohere-ai/7.13.0","X-Fern-Runtime":Br.RUNTIME.type,"X-Fern-Runtime-Version":Br.RUNTIME.version},contentType:"application/json",requestType:"json",body:hO.FinetuningUpdateFinetunedModelRequest.jsonOrThrow(r,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0}),timeoutMs:n?.timeoutInSeconds!=null?n.timeoutInSeconds*1e3:3e5,maxRetries:n?.maxRetries,abortSignal:n?.abortSignal});if(a.ok)return hO.finetuning.UpdateFinetunedModelResponse.parseOrThrow(a.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]});if(a.error.reason==="status-code")switch(a.error.statusCode){case 400:throw new Kr.BadRequestError(a.error.body);case 401:throw new Kr.UnauthorizedError(a.error.body);case 403:throw new Kr.ForbiddenError(a.error.body);case 404:throw new Kr.NotFoundError(a.error.body);case 500:throw new Kr.InternalServerError(a.error.body);case 503:throw new Kr.ServiceUnavailableError(a.error.body);default:throw new pi.CohereError({statusCode:a.error.statusCode,body:a.error.body})}switch(a.error.reason){case"non-json":throw new pi.CohereError({statusCode:a.error.statusCode,body:a.error.rawBody});case"timeout":throw new pi.CohereTimeoutError;case"unknown":throw new pi.CohereError({message:a.error.errorMessage})}})}listEvents(e,r={},n){var o,i;return rA(this,void 0,void 0,function*(){let{pageSize:a,pageToken:s,orderBy:u}=r,l={};a!=null&&(l.page_size=a.toString()),s!=null&&(l.page_token=s),u!=null&&(l.order_by=u);let c=yield((o=this._options.fetcher)!==null&&o!==void 0?o:Br.fetcher)({url:(0,tj.default)((i=yield Br.Supplier.get(this._options.environment))!==null&&i!==void 0?i:ej.CohereEnvironment.Production,`v1/finetuning/finetuned-models/${encodeURIComponent(e)}/events`),method:"GET",headers:{Authorization:yield this._getAuthorizationHeader(),"X-Client-Name":(yield Br.Supplier.get(this._options.clientName))!=null?yield Br.Supplier.get(this._options.clientName):void 0,"X-Fern-Language":"JavaScript","X-Fern-SDK-Name":"cohere-ai","X-Fern-SDK-Version":"7.13.0","User-Agent":"cohere-ai/7.13.0","X-Fern-Runtime":Br.RUNTIME.type,"X-Fern-Runtime-Version":Br.RUNTIME.version},contentType:"application/json",queryParameters:l,requestType:"json",timeoutMs:n?.timeoutInSeconds!=null?n.timeoutInSeconds*1e3:3e5,maxRetries:n?.maxRetries,abortSignal:n?.abortSignal});if(c.ok)return hO.finetuning.ListEventsResponse.parseOrThrow(c.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]});if(c.error.reason==="status-code")switch(c.error.statusCode){case 400:throw new Kr.BadRequestError(c.error.body);case 401:throw new Kr.UnauthorizedError(c.error.body);case 403:throw new Kr.ForbiddenError(c.error.body);case 404:throw new Kr.NotFoundError(c.error.body);case 500:throw new Kr.InternalServerError(c.error.body);case 503:throw new Kr.ServiceUnavailableError(c.error.body);default:throw new pi.CohereError({statusCode:c.error.statusCode,body:c.error.body})}switch(c.error.reason){case"non-json":throw new pi.CohereError({statusCode:c.error.statusCode,body:c.error.rawBody});case"timeout":throw new pi.CohereTimeoutError;case"unknown":throw new pi.CohereError({message:c.error.errorMessage})}})}listTrainingStepMetrics(e,r={},n){var o,i;return rA(this,void 0,void 0,function*(){let{pageSize:a,pageToken:s}=r,u={};a!=null&&(u.page_size=a.toString()),s!=null&&(u.page_token=s);let l=yield((o=this._options.fetcher)!==null&&o!==void 0?o:Br.fetcher)({url:(0,tj.default)((i=yield Br.Supplier.get(this._options.environment))!==null&&i!==void 0?i:ej.CohereEnvironment.Production,`v1/finetuning/finetuned-models/${encodeURIComponent(e)}/training-step-metrics`),method:"GET",headers:{Authorization:yield this._getAuthorizationHeader(),"X-Client-Name":(yield Br.Supplier.get(this._options.clientName))!=null?yield Br.Supplier.get(this._options.clientName):void 0,"X-Fern-Language":"JavaScript","X-Fern-SDK-Name":"cohere-ai","X-Fern-SDK-Version":"7.13.0","User-Agent":"cohere-ai/7.13.0","X-Fern-Runtime":Br.RUNTIME.type,"X-Fern-Runtime-Version":Br.RUNTIME.version},contentType:"application/json",queryParameters:u,requestType:"json",timeoutMs:n?.timeoutInSeconds!=null?n.timeoutInSeconds*1e3:3e5,maxRetries:n?.maxRetries,abortSignal:n?.abortSignal});if(l.ok)return hO.finetuning.ListTrainingStepMetricsResponse.parseOrThrow(l.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]});if(l.error.reason==="status-code")switch(l.error.statusCode){case 400:throw new Kr.BadRequestError(l.error.body);case 401:throw new Kr.UnauthorizedError(l.error.body);case 403:throw new Kr.ForbiddenError(l.error.body);case 404:throw new Kr.NotFoundError(l.error.body);case 500:throw new Kr.InternalServerError(l.error.body);case 503:throw new Kr.ServiceUnavailableError(l.error.body);default:throw new pi.CohereError({statusCode:l.error.statusCode,body:l.error.body})}switch(l.error.reason){case"non-json":throw new pi.CohereError({statusCode:l.error.statusCode,body:l.error.rawBody});case"timeout":throw new pi.CohereTimeoutError;case"unknown":throw new pi.CohereError({message:l.error.errorMessage})}})}_getAuthorizationHeader(){var e;return rA(this,void 0,void 0,function*(){let r=(e=yield Br.Supplier.get(this._options.token))!==null&&e!==void 0?e:process==null?void 0:process.env.CO_API_KEY;if(r==null)throw new pi.CohereError({message:"Please specify CO_API_KEY when instantiating the client."});return`Bearer ${r}`})}};Rp.Finetuning=CEe});var Ite=v(Np=>{"use strict";var Vzr=Np&&Np.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Wzr=Np&&Np.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),fV=Np&&Np.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&Vzr(e,t,r);return Wzr(e,t),e},jp=Np&&Np.__awaiter||function(t,e,r,n){function o(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function s(c){try{l(n.next(c))}catch(d){a(d)}}function u(c){try{l(n.throw(c))}catch(d){a(d)}}function l(c){c.done?i(c.value):o(c.value).then(s,u)}l((n=n.apply(t,e||[])).next())})},Kzr=Np&&Np.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Np,"__esModule",{value:!0});Np.CohereClient=void 0;var xy=fV(fO()),bt=fV(J()),Ee=fV(LC()),st=fV(dO()),Cy=Kzr(tA()),Rr=fV(ws()),Gzr=bEe(),Jzr=B0t(),Yzr=q0t(),Zzr=U0t(),Xzr=V0t(),Qzr=W0t(),OEe=class{constructor(e={}){this._options=e}chatStream(e,r){var n,o;return jp(this,void 0,void 0,function*(){let i=yield((n=this._options.fetcher)!==null&&n!==void 0?n:bt.fetcher)({url:(0,Cy.default)((o=yield bt.Supplier.get(this._options.environment))!==null&&o!==void 0?o:xy.CohereEnvironment.Production,"v1/chat"),method:"POST",headers:{Authorization:yield this._getAuthorizationHeader(),"X-Client-Name":(yield bt.Supplier.get(this._options.clientName))!=null?yield bt.Supplier.get(this._options.clientName):void 0,"X-Fern-Language":"JavaScript","X-Fern-SDK-Name":"cohere-ai","X-Fern-SDK-Version":"7.13.0","User-Agent":"cohere-ai/7.13.0","X-Fern-Runtime":bt.RUNTIME.type,"X-Fern-Runtime-Version":bt.RUNTIME.version},contentType:"application/json",requestType:"json",body:Object.assign(Object.assign({},st.ChatStreamRequest.jsonOrThrow(e,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0})),{stream:!0}),responseType:"sse",timeoutMs:r?.timeoutInSeconds!=null?r.timeoutInSeconds*1e3:3e5,maxRetries:r?.maxRetries,abortSignal:r?.abortSignal});if(i.ok)return new bt.Stream({stream:i.body,parse:a=>jp(this,void 0,void 0,function*(){return st.StreamedChatResponse.parseOrThrow(a,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]})}),signal:r?.abortSignal,eventShape:{type:"json",messageTerminator:`
`}});if(i.error.reason==="status-code")switch(i.error.statusCode){case 400:throw new Ee.BadRequestError(i.error.body);case 401:throw new Ee.UnauthorizedError(i.error.body);case 403:throw new Ee.ForbiddenError(i.error.body);case 404:throw new Ee.NotFoundError(i.error.body);case 422:throw new Ee.UnprocessableEntityError(st.UnprocessableEntityErrorBody.parseOrThrow(i.error.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]}));case 429:throw new Ee.TooManyRequestsError(st.TooManyRequestsErrorBody.parseOrThrow(i.error.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]}));case 499:throw new Ee.ClientClosedRequestError(st.ClientClosedRequestErrorBody.parseOrThrow(i.error.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]}));case 500:throw new Ee.InternalServerError(i.error.body);case 501:throw new Ee.NotImplementedError(st.NotImplementedErrorBody.parseOrThrow(i.error.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]}));case 503:throw new Ee.ServiceUnavailableError(i.error.body);case 504:throw new Ee.GatewayTimeoutError(st.GatewayTimeoutErrorBody.parseOrThrow(i.error.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]}));default:throw new Rr.CohereError({statusCode:i.error.statusCode,body:i.error.body})}switch(i.error.reason){case"non-json":throw new Rr.CohereError({statusCode:i.error.statusCode,body:i.error.rawBody});case"timeout":throw new Rr.CohereTimeoutError;case"unknown":throw new Rr.CohereError({message:i.error.errorMessage})}})}chat(e,r){var n,o;return jp(this,void 0,void 0,function*(){let i=yield((n=this._options.fetcher)!==null&&n!==void 0?n:bt.fetcher)({url:(0,Cy.default)((o=yield bt.Supplier.get(this._options.environment))!==null&&o!==void 0?o:xy.CohereEnvironment.Production,"v1/chat"),method:"POST",headers:{Authorization:yield this._getAuthorizationHeader(),"X-Client-Name":(yield bt.Supplier.get(this._options.clientName))!=null?yield bt.Supplier.get(this._options.clientName):void 0,"X-Fern-Language":"JavaScript","X-Fern-SDK-Name":"cohere-ai","X-Fern-SDK-Version":"7.13.0","User-Agent":"cohere-ai/7.13.0","X-Fern-Runtime":bt.RUNTIME.type,"X-Fern-Runtime-Version":bt.RUNTIME.version},contentType:"application/json",requestType:"json",body:Object.assign(Object.assign({},st.ChatRequest.jsonOrThrow(e,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0})),{stream:!1}),timeoutMs:r?.timeoutInSeconds!=null?r.timeoutInSeconds*1e3:3e5,maxRetries:r?.maxRetries,abortSignal:r?.abortSignal});if(i.ok)return st.NonStreamedChatResponse.parseOrThrow(i.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]});if(i.error.reason==="status-code")switch(i.error.statusCode){case 400:throw new Ee.BadRequestError(i.error.body);case 401:throw new Ee.UnauthorizedError(i.error.body);case 403:throw new Ee.ForbiddenError(i.error.body);case 404:throw new Ee.NotFoundError(i.error.body);case 422:throw new Ee.UnprocessableEntityError(st.UnprocessableEntityErrorBody.parseOrThrow(i.error.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]}));case 429:throw new Ee.TooManyRequestsError(st.TooManyRequestsErrorBody.parseOrThrow(i.error.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]}));case 499:throw new Ee.ClientClosedRequestError(st.ClientClosedRequestErrorBody.parseOrThrow(i.error.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]}));case 500:throw new Ee.InternalServerError(i.error.body);case 501:throw new Ee.NotImplementedError(st.NotImplementedErrorBody.parseOrThrow(i.error.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]}));case 503:throw new Ee.ServiceUnavailableError(i.error.body);case 504:throw new Ee.GatewayTimeoutError(st.GatewayTimeoutErrorBody.parseOrThrow(i.error.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]}));default:throw new Rr.CohereError({statusCode:i.error.statusCode,body:i.error.body})}switch(i.error.reason){case"non-json":throw new Rr.CohereError({statusCode:i.error.statusCode,body:i.error.rawBody});case"timeout":throw new Rr.CohereTimeoutError;case"unknown":throw new Rr.CohereError({message:i.error.errorMessage})}})}generateStream(e,r){var n,o;return jp(this,void 0,void 0,function*(){let i=yield((n=this._options.fetcher)!==null&&n!==void 0?n:bt.fetcher)({url:(0,Cy.default)((o=yield bt.Supplier.get(this._options.environment))!==null&&o!==void 0?o:xy.CohereEnvironment.Production,"v1/generate"),method:"POST",headers:{Authorization:yield this._getAuthorizationHeader(),"X-Client-Name":(yield bt.Supplier.get(this._options.clientName))!=null?yield bt.Supplier.get(this._options.clientName):void 0,"X-Fern-Language":"JavaScript","X-Fern-SDK-Name":"cohere-ai","X-Fern-SDK-Version":"7.13.0","User-Agent":"cohere-ai/7.13.0","X-Fern-Runtime":bt.RUNTIME.type,"X-Fern-Runtime-Version":bt.RUNTIME.version},contentType:"application/json",requestType:"json",body:Object.assign(Object.assign({},st.GenerateStreamRequest.jsonOrThrow(e,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0})),{stream:!0}),responseType:"sse",timeoutMs:r?.timeoutInSeconds!=null?r.timeoutInSeconds*1e3:3e5,maxRetries:r?.maxRetries,abortSignal:r?.abortSignal});if(i.ok)return new bt.Stream({stream:i.body,parse:a=>jp(this,void 0,void 0,function*(){return st.GenerateStreamedResponse.parseOrThrow(a,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]})}),signal:r?.abortSignal,eventShape:{type:"json",messageTerminator:`
`}});if(i.error.reason==="status-code")switch(i.error.statusCode){case 400:throw new Ee.BadRequestError(i.error.body);case 401:throw new Ee.UnauthorizedError(i.error.body);case 403:throw new Ee.ForbiddenError(i.error.body);case 404:throw new Ee.NotFoundError(i.error.body);case 422:throw new Ee.UnprocessableEntityError(st.UnprocessableEntityErrorBody.parseOrThrow(i.error.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]}));case 429:throw new Ee.TooManyRequestsError(st.TooManyRequestsErrorBody.parseOrThrow(i.error.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]}));case 499:throw new Ee.ClientClosedRequestError(st.ClientClosedRequestErrorBody.parseOrThrow(i.error.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]}));case 500:throw new Ee.InternalServerError(i.error.body);case 501:throw new Ee.NotImplementedError(st.NotImplementedErrorBody.parseOrThrow(i.error.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]}));case 503:throw new Ee.ServiceUnavailableError(i.error.body);case 504:throw new Ee.GatewayTimeoutError(st.GatewayTimeoutErrorBody.parseOrThrow(i.error.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]}));default:throw new Rr.CohereError({statusCode:i.error.statusCode,body:i.error.body})}switch(i.error.reason){case"non-json":throw new Rr.CohereError({statusCode:i.error.statusCode,body:i.error.rawBody});case"timeout":throw new Rr.CohereTimeoutError;case"unknown":throw new Rr.CohereError({message:i.error.errorMessage})}})}generate(e,r){var n,o;return jp(this,void 0,void 0,function*(){let i=yield((n=this._options.fetcher)!==null&&n!==void 0?n:bt.fetcher)({url:(0,Cy.default)((o=yield bt.Supplier.get(this._options.environment))!==null&&o!==void 0?o:xy.CohereEnvironment.Production,"v1/generate"),method:"POST",headers:{Authorization:yield this._getAuthorizationHeader(),"X-Client-Name":(yield bt.Supplier.get(this._options.clientName))!=null?yield bt.Supplier.get(this._options.clientName):void 0,"X-Fern-Language":"JavaScript","X-Fern-SDK-Name":"cohere-ai","X-Fern-SDK-Version":"7.13.0","User-Agent":"cohere-ai/7.13.0","X-Fern-Runtime":bt.RUNTIME.type,"X-Fern-Runtime-Version":bt.RUNTIME.version},contentType:"application/json",requestType:"json",body:Object.assign(Object.assign({},st.GenerateRequest.jsonOrThrow(e,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0})),{stream:!1}),timeoutMs:r?.timeoutInSeconds!=null?r.timeoutInSeconds*1e3:3e5,maxRetries:r?.maxRetries,abortSignal:r?.abortSignal});if(i.ok)return st.Generation.parseOrThrow(i.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]});if(i.error.reason==="status-code")switch(i.error.statusCode){case 400:throw new Ee.BadRequestError(i.error.body);case 401:throw new Ee.UnauthorizedError(i.error.body);case 403:throw new Ee.ForbiddenError(i.error.body);case 404:throw new Ee.NotFoundError(i.error.body);case 422:throw new Ee.UnprocessableEntityError(st.UnprocessableEntityErrorBody.parseOrThrow(i.error.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]}));case 429:throw new Ee.TooManyRequestsError(st.TooManyRequestsErrorBody.parseOrThrow(i.error.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]}));case 499:throw new Ee.ClientClosedRequestError(st.ClientClosedRequestErrorBody.parseOrThrow(i.error.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]}));case 500:throw new Ee.InternalServerError(i.error.body);case 501:throw new Ee.NotImplementedError(st.NotImplementedErrorBody.parseOrThrow(i.error.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]}));case 503:throw new Ee.ServiceUnavailableError(i.error.body);case 504:throw new Ee.GatewayTimeoutError(st.GatewayTimeoutErrorBody.parseOrThrow(i.error.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]}));default:throw new Rr.CohereError({statusCode:i.error.statusCode,body:i.error.body})}switch(i.error.reason){case"non-json":throw new Rr.CohereError({statusCode:i.error.statusCode,body:i.error.rawBody});case"timeout":throw new Rr.CohereTimeoutError;case"unknown":throw new Rr.CohereError({message:i.error.errorMessage})}})}embed(e,r){var n,o;return jp(this,void 0,void 0,function*(){let i=yield((n=this._options.fetcher)!==null&&n!==void 0?n:bt.fetcher)({url:(0,Cy.default)((o=yield bt.Supplier.get(this._options.environment))!==null&&o!==void 0?o:xy.CohereEnvironment.Production,"v1/embed"),method:"POST",headers:{Authorization:yield this._getAuthorizationHeader(),"X-Client-Name":(yield bt.Supplier.get(this._options.clientName))!=null?yield bt.Supplier.get(this._options.clientName):void 0,"X-Fern-Language":"JavaScript","X-Fern-SDK-Name":"cohere-ai","X-Fern-SDK-Version":"7.13.0","User-Agent":"cohere-ai/7.13.0","X-Fern-Runtime":bt.RUNTIME.type,"X-Fern-Runtime-Version":bt.RUNTIME.version},contentType:"application/json",requestType:"json",body:st.EmbedRequest.jsonOrThrow(e,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0}),timeoutMs:r?.timeoutInSeconds!=null?r.timeoutInSeconds*1e3:3e5,maxRetries:r?.maxRetries,abortSignal:r?.abortSignal});if(i.ok)return st.EmbedResponse.parseOrThrow(i.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]});if(i.error.reason==="status-code")switch(i.error.statusCode){case 400:throw new Ee.BadRequestError(i.error.body);case 401:throw new Ee.UnauthorizedError(i.error.body);case 403:throw new Ee.ForbiddenError(i.error.body);case 404:throw new Ee.NotFoundError(i.error.body);case 422:throw new Ee.UnprocessableEntityError(st.UnprocessableEntityErrorBody.parseOrThrow(i.error.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]}));case 429:throw new Ee.TooManyRequestsError(st.TooManyRequestsErrorBody.parseOrThrow(i.error.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]}));case 499:throw new Ee.ClientClosedRequestError(st.ClientClosedRequestErrorBody.parseOrThrow(i.error.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]}));case 500:throw new Ee.InternalServerError(i.error.body);case 501:throw new Ee.NotImplementedError(st.NotImplementedErrorBody.parseOrThrow(i.error.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]}));case 503:throw new Ee.ServiceUnavailableError(i.error.body);case 504:throw new Ee.GatewayTimeoutError(st.GatewayTimeoutErrorBody.parseOrThrow(i.error.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]}));default:throw new Rr.CohereError({statusCode:i.error.statusCode,body:i.error.body})}switch(i.error.reason){case"non-json":throw new Rr.CohereError({statusCode:i.error.statusCode,body:i.error.rawBody});case"timeout":throw new Rr.CohereTimeoutError;case"unknown":throw new Rr.CohereError({message:i.error.errorMessage})}})}rerank(e,r){var n,o;return jp(this,void 0,void 0,function*(){let i=yield((n=this._options.fetcher)!==null&&n!==void 0?n:bt.fetcher)({url:(0,Cy.default)((o=yield bt.Supplier.get(this._options.environment))!==null&&o!==void 0?o:xy.CohereEnvironment.Production,"v1/rerank"),method:"POST",headers:{Authorization:yield this._getAuthorizationHeader(),"X-Client-Name":(yield bt.Supplier.get(this._options.clientName))!=null?yield bt.Supplier.get(this._options.clientName):void 0,"X-Fern-Language":"JavaScript","X-Fern-SDK-Name":"cohere-ai","X-Fern-SDK-Version":"7.13.0","User-Agent":"cohere-ai/7.13.0","X-Fern-Runtime":bt.RUNTIME.type,"X-Fern-Runtime-Version":bt.RUNTIME.version},contentType:"application/json",requestType:"json",body:st.RerankRequest.jsonOrThrow(e,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0}),timeoutMs:r?.timeoutInSeconds!=null?r.timeoutInSeconds*1e3:3e5,maxRetries:r?.maxRetries,abortSignal:r?.abortSignal});if(i.ok)return st.RerankResponse.parseOrThrow(i.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]});if(i.error.reason==="status-code")switch(i.error.statusCode){case 400:throw new Ee.BadRequestError(i.error.body);case 401:throw new Ee.UnauthorizedError(i.error.body);case 403:throw new Ee.ForbiddenError(i.error.body);case 404:throw new Ee.NotFoundError(i.error.body);case 422:throw new Ee.UnprocessableEntityError(st.UnprocessableEntityErrorBody.parseOrThrow(i.error.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]}));case 429:throw new Ee.TooManyRequestsError(st.TooManyRequestsErrorBody.parseOrThrow(i.error.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]}));case 499:throw new Ee.ClientClosedRequestError(st.ClientClosedRequestErrorBody.parseOrThrow(i.error.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]}));case 500:throw new Ee.InternalServerError(i.error.body);case 501:throw new Ee.NotImplementedError(st.NotImplementedErrorBody.parseOrThrow(i.error.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]}));case 503:throw new Ee.ServiceUnavailableError(i.error.body);case 504:throw new Ee.GatewayTimeoutError(st.GatewayTimeoutErrorBody.parseOrThrow(i.error.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]}));default:throw new Rr.CohereError({statusCode:i.error.statusCode,body:i.error.body})}switch(i.error.reason){case"non-json":throw new Rr.CohereError({statusCode:i.error.statusCode,body:i.error.rawBody});case"timeout":throw new Rr.CohereTimeoutError;case"unknown":throw new Rr.CohereError({message:i.error.errorMessage})}})}classify(e,r){var n,o;return jp(this,void 0,void 0,function*(){let i=yield((n=this._options.fetcher)!==null&&n!==void 0?n:bt.fetcher)({url:(0,Cy.default)((o=yield bt.Supplier.get(this._options.environment))!==null&&o!==void 0?o:xy.CohereEnvironment.Production,"v1/classify"),method:"POST",headers:{Authorization:yield this._getAuthorizationHeader(),"X-Client-Name":(yield bt.Supplier.get(this._options.clientName))!=null?yield bt.Supplier.get(this._options.clientName):void 0,"X-Fern-Language":"JavaScript","X-Fern-SDK-Name":"cohere-ai","X-Fern-SDK-Version":"7.13.0","User-Agent":"cohere-ai/7.13.0","X-Fern-Runtime":bt.RUNTIME.type,"X-Fern-Runtime-Version":bt.RUNTIME.version},contentType:"application/json",requestType:"json",body:st.ClassifyRequest.jsonOrThrow(e,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0}),timeoutMs:r?.timeoutInSeconds!=null?r.timeoutInSeconds*1e3:3e5,maxRetries:r?.maxRetries,abortSignal:r?.abortSignal});if(i.ok)return st.ClassifyResponse.parseOrThrow(i.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]});if(i.error.reason==="status-code")switch(i.error.statusCode){case 400:throw new Ee.BadRequestError(i.error.body);case 401:throw new Ee.UnauthorizedError(i.error.body);case 403:throw new Ee.ForbiddenError(i.error.body);case 404:throw new Ee.NotFoundError(i.error.body);case 422:throw new Ee.UnprocessableEntityError(st.UnprocessableEntityErrorBody.parseOrThrow(i.error.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]}));case 429:throw new Ee.TooManyRequestsError(st.TooManyRequestsErrorBody.parseOrThrow(i.error.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]}));case 499:throw new Ee.ClientClosedRequestError(st.ClientClosedRequestErrorBody.parseOrThrow(i.error.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]}));case 500:throw new Ee.InternalServerError(i.error.body);case 501:throw new Ee.NotImplementedError(st.NotImplementedErrorBody.parseOrThrow(i.error.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]}));case 503:throw new Ee.ServiceUnavailableError(i.error.body);case 504:throw new Ee.GatewayTimeoutError(st.GatewayTimeoutErrorBody.parseOrThrow(i.error.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]}));default:throw new Rr.CohereError({statusCode:i.error.statusCode,body:i.error.body})}switch(i.error.reason){case"non-json":throw new Rr.CohereError({statusCode:i.error.statusCode,body:i.error.rawBody});case"timeout":throw new Rr.CohereTimeoutError;case"unknown":throw new Rr.CohereError({message:i.error.errorMessage})}})}summarize(e,r){var n,o;return jp(this,void 0,void 0,function*(){let i=yield((n=this._options.fetcher)!==null&&n!==void 0?n:bt.fetcher)({url:(0,Cy.default)((o=yield bt.Supplier.get(this._options.environment))!==null&&o!==void 0?o:xy.CohereEnvironment.Production,"v1/summarize"),method:"POST",headers:{Authorization:yield this._getAuthorizationHeader(),"X-Client-Name":(yield bt.Supplier.get(this._options.clientName))!=null?yield bt.Supplier.get(this._options.clientName):void 0,"X-Fern-Language":"JavaScript","X-Fern-SDK-Name":"cohere-ai","X-Fern-SDK-Version":"7.13.0","User-Agent":"cohere-ai/7.13.0","X-Fern-Runtime":bt.RUNTIME.type,"X-Fern-Runtime-Version":bt.RUNTIME.version},contentType:"application/json",requestType:"json",body:st.SummarizeRequest.jsonOrThrow(e,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0}),timeoutMs:r?.timeoutInSeconds!=null?r.timeoutInSeconds*1e3:3e5,maxRetries:r?.maxRetries,abortSignal:r?.abortSignal});if(i.ok)return st.SummarizeResponse.parseOrThrow(i.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]});if(i.error.reason==="status-code")switch(i.error.statusCode){case 400:throw new Ee.BadRequestError(i.error.body);case 401:throw new Ee.UnauthorizedError(i.error.body);case 403:throw new Ee.ForbiddenError(i.error.body);case 404:throw new Ee.NotFoundError(i.error.body);case 422:throw new Ee.UnprocessableEntityError(st.UnprocessableEntityErrorBody.parseOrThrow(i.error.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]}));case 429:throw new Ee.TooManyRequestsError(st.TooManyRequestsErrorBody.parseOrThrow(i.error.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]}));case 499:throw new Ee.ClientClosedRequestError(st.ClientClosedRequestErrorBody.parseOrThrow(i.error.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]}));case 500:throw new Ee.InternalServerError(i.error.body);case 501:throw new Ee.NotImplementedError(st.NotImplementedErrorBody.parseOrThrow(i.error.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]}));case 503:throw new Ee.ServiceUnavailableError(i.error.body);case 504:throw new Ee.GatewayTimeoutError(st.GatewayTimeoutErrorBody.parseOrThrow(i.error.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]}));default:throw new Rr.CohereError({statusCode:i.error.statusCode,body:i.error.body})}switch(i.error.reason){case"non-json":throw new Rr.CohereError({statusCode:i.error.statusCode,body:i.error.rawBody});case"timeout":throw new Rr.CohereTimeoutError;case"unknown":throw new Rr.CohereError({message:i.error.errorMessage})}})}tokenize(e,r){var n,o;return jp(this,void 0,void 0,function*(){let i=yield((n=this._options.fetcher)!==null&&n!==void 0?n:bt.fetcher)({url:(0,Cy.default)((o=yield bt.Supplier.get(this._options.environment))!==null&&o!==void 0?o:xy.CohereEnvironment.Production,"v1/tokenize"),method:"POST",headers:{Authorization:yield this._getAuthorizationHeader(),"X-Client-Name":(yield bt.Supplier.get(this._options.clientName))!=null?yield bt.Supplier.get(this._options.clientName):void 0,"X-Fern-Language":"JavaScript","X-Fern-SDK-Name":"cohere-ai","X-Fern-SDK-Version":"7.13.0","User-Agent":"cohere-ai/7.13.0","X-Fern-Runtime":bt.RUNTIME.type,"X-Fern-Runtime-Version":bt.RUNTIME.version},contentType:"application/json",requestType:"json",body:st.TokenizeRequest.jsonOrThrow(e,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0}),timeoutMs:r?.timeoutInSeconds!=null?r.timeoutInSeconds*1e3:3e5,maxRetries:r?.maxRetries,abortSignal:r?.abortSignal});if(i.ok)return st.TokenizeResponse.parseOrThrow(i.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]});if(i.error.reason==="status-code")switch(i.error.statusCode){case 400:throw new Ee.BadRequestError(i.error.body);case 401:throw new Ee.UnauthorizedError(i.error.body);case 403:throw new Ee.ForbiddenError(i.error.body);case 404:throw new Ee.NotFoundError(i.error.body);case 422:throw new Ee.UnprocessableEntityError(st.UnprocessableEntityErrorBody.parseOrThrow(i.error.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]}));case 429:throw new Ee.TooManyRequestsError(st.TooManyRequestsErrorBody.parseOrThrow(i.error.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]}));case 499:throw new Ee.ClientClosedRequestError(st.ClientClosedRequestErrorBody.parseOrThrow(i.error.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]}));case 500:throw new Ee.InternalServerError(i.error.body);case 501:throw new Ee.NotImplementedError(st.NotImplementedErrorBody.parseOrThrow(i.error.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]}));case 503:throw new Ee.ServiceUnavailableError(i.error.body);case 504:throw new Ee.GatewayTimeoutError(st.GatewayTimeoutErrorBody.parseOrThrow(i.error.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]}));default:throw new Rr.CohereError({statusCode:i.error.statusCode,body:i.error.body})}switch(i.error.reason){case"non-json":throw new Rr.CohereError({statusCode:i.error.statusCode,body:i.error.rawBody});case"timeout":throw new Rr.CohereTimeoutError;case"unknown":throw new Rr.CohereError({message:i.error.errorMessage})}})}detokenize(e,r){var n,o;return jp(this,void 0,void 0,function*(){let i=yield((n=this._options.fetcher)!==null&&n!==void 0?n:bt.fetcher)({url:(0,Cy.default)((o=yield bt.Supplier.get(this._options.environment))!==null&&o!==void 0?o:xy.CohereEnvironment.Production,"v1/detokenize"),method:"POST",headers:{Authorization:yield this._getAuthorizationHeader(),"X-Client-Name":(yield bt.Supplier.get(this._options.clientName))!=null?yield bt.Supplier.get(this._options.clientName):void 0,"X-Fern-Language":"JavaScript","X-Fern-SDK-Name":"cohere-ai","X-Fern-SDK-Version":"7.13.0","User-Agent":"cohere-ai/7.13.0","X-Fern-Runtime":bt.RUNTIME.type,"X-Fern-Runtime-Version":bt.RUNTIME.version},contentType:"application/json",requestType:"json",body:st.DetokenizeRequest.jsonOrThrow(e,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0}),timeoutMs:r?.timeoutInSeconds!=null?r.timeoutInSeconds*1e3:3e5,maxRetries:r?.maxRetries,abortSignal:r?.abortSignal});if(i.ok)return st.DetokenizeResponse.parseOrThrow(i.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]});if(i.error.reason==="status-code")switch(i.error.statusCode){case 400:throw new Ee.BadRequestError(i.error.body);case 401:throw new Ee.UnauthorizedError(i.error.body);case 403:throw new Ee.ForbiddenError(i.error.body);case 404:throw new Ee.NotFoundError(i.error.body);case 422:throw new Ee.UnprocessableEntityError(st.UnprocessableEntityErrorBody.parseOrThrow(i.error.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]}));case 429:throw new Ee.TooManyRequestsError(st.TooManyRequestsErrorBody.parseOrThrow(i.error.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]}));case 499:throw new Ee.ClientClosedRequestError(st.ClientClosedRequestErrorBody.parseOrThrow(i.error.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]}));case 500:throw new Ee.InternalServerError(i.error.body);case 501:throw new Ee.NotImplementedError(st.NotImplementedErrorBody.parseOrThrow(i.error.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]}));case 503:throw new Ee.ServiceUnavailableError(i.error.body);case 504:throw new Ee.GatewayTimeoutError(st.GatewayTimeoutErrorBody.parseOrThrow(i.error.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]}));default:throw new Rr.CohereError({statusCode:i.error.statusCode,body:i.error.body})}switch(i.error.reason){case"non-json":throw new Rr.CohereError({statusCode:i.error.statusCode,body:i.error.rawBody});case"timeout":throw new Rr.CohereTimeoutError;case"unknown":throw new Rr.CohereError({message:i.error.errorMessage})}})}checkApiKey(e){var r,n;return jp(this,void 0,void 0,function*(){let o=yield((r=this._options.fetcher)!==null&&r!==void 0?r:bt.fetcher)({url:(0,Cy.default)((n=yield bt.Supplier.get(this._options.environment))!==null&&n!==void 0?n:xy.CohereEnvironment.Production,"v1/check-api-key"),method:"POST",headers:{Authorization:yield this._getAuthorizationHeader(),"X-Client-Name":(yield bt.Supplier.get(this._options.clientName))!=null?yield bt.Supplier.get(this._options.clientName):void 0,"X-Fern-Language":"JavaScript","X-Fern-SDK-Name":"cohere-ai","X-Fern-SDK-Version":"7.13.0","User-Agent":"cohere-ai/7.13.0","X-Fern-Runtime":bt.RUNTIME.type,"X-Fern-Runtime-Version":bt.RUNTIME.version},contentType:"application/json",requestType:"json",timeoutMs:e?.timeoutInSeconds!=null?e.timeoutInSeconds*1e3:3e5,maxRetries:e?.maxRetries,abortSignal:e?.abortSignal});if(o.ok)return st.CheckApiKeyResponse.parseOrThrow(o.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]});if(o.error.reason==="status-code")switch(o.error.statusCode){case 400:throw new Ee.BadRequestError(o.error.body);case 401:throw new Ee.UnauthorizedError(o.error.body);case 403:throw new Ee.ForbiddenError(o.error.body);case 404:throw new Ee.NotFoundError(o.error.body);case 422:throw new Ee.UnprocessableEntityError(st.UnprocessableEntityErrorBody.parseOrThrow(o.error.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]}));case 429:throw new Ee.TooManyRequestsError(st.TooManyRequestsErrorBody.parseOrThrow(o.error.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]}));case 499:throw new Ee.ClientClosedRequestError(st.ClientClosedRequestErrorBody.parseOrThrow(o.error.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]}));case 500:throw new Ee.InternalServerError(o.error.body);case 501:throw new Ee.NotImplementedError(st.NotImplementedErrorBody.parseOrThrow(o.error.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]}));case 503:throw new Ee.ServiceUnavailableError(o.error.body);case 504:throw new Ee.GatewayTimeoutError(st.GatewayTimeoutErrorBody.parseOrThrow(o.error.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]}));default:throw new Rr.CohereError({statusCode:o.error.statusCode,body:o.error.body})}switch(o.error.reason){case"non-json":throw new Rr.CohereError({statusCode:o.error.statusCode,body:o.error.rawBody});case"timeout":throw new Rr.CohereTimeoutError;case"unknown":throw new Rr.CohereError({message:o.error.errorMessage})}})}get v2(){var e;return(e=this._v2)!==null&&e!==void 0?e:this._v2=new Gzr.V2(this._options)}get embedJobs(){var e;return(e=this._embedJobs)!==null&&e!==void 0?e:this._embedJobs=new Jzr.EmbedJobs(this._options)}get datasets(){var e;return(e=this._datasets)!==null&&e!==void 0?e:this._datasets=new Yzr.Datasets(this._options)}get connectors(){var e;return(e=this._connectors)!==null&&e!==void 0?e:this._connectors=new Zzr.Connectors(this._options)}get models(){var e;return(e=this._models)!==null&&e!==void 0?e:this._models=new Xzr.Models(this._options)}get finetuning(){var e;return(e=this._finetuning)!==null&&e!==void 0?e:this._finetuning=new Qzr.Finetuning(this._options)}_getAuthorizationHeader(){var e;return jp(this,void 0,void 0,function*(){let r=(e=yield bt.Supplier.get(this._options.token))!==null&&e!==void 0?e:process==null?void 0:process.env.CO_API_KEY;if(r==null)throw new Rr.CohereError({message:"Please specify CO_API_KEY when instantiating the client."});return`Bearer ${r}`})}};Np.CohereClient=OEe});var EEe=v(Mte=>{"use strict";Object.defineProperty(Mte,"__esModule",{value:!0});Mte.AwsClient=void 0;var e2r=Ite(),PEe=class extends e2r.CohereClient{constructor(e){e.token="n/a",super(e)}};Mte.AwsClient=PEe});var K0t=v(Rte=>{"use strict";Object.defineProperty(Rte,"__esModule",{value:!0});Rte.BedrockClient=void 0;var t2r=gEe(),r2r=EEe(),TEe=class extends r2r.AwsClient{constructor(e){super(Object.assign(Object.assign({},e),{fetcher:(0,t2r.fetchOverride)("bedrock",e)}))}};Rte.BedrockClient=TEe});var G0t=v(jte=>{"use strict";Object.defineProperty(jte,"__esModule",{value:!0});jte.CohereClientV2=void 0;var n2r=bEe(),o2r=Ite(),AEe=class{constructor(e){this._options=e,this.client=new o2r.CohereClient(this._options),this.clientV2=new n2r.V2(this._options),this.chat=this.clientV2.chat.bind(this.clientV2),this.chatStream=this.clientV2.chatStream.bind(this.clientV2),this.generateStream=this.client.generateStream.bind(this.clientV2),this.generate=this.client.generate.bind(this.clientV2),this.embed=this.client.embed.bind(this.clientV2),this.rerank=this.client.rerank.bind(this.clientV2),this.classify=this.client.classify.bind(this.clientV2),this.summarize=this.client.summarize.bind(this.clientV2),this.tokenize=this.client.tokenize.bind(this.clientV2),this.detokenize=this.client.detokenize.bind(this.clientV2),this.checkApiKey=this.client.checkApiKey.bind(this.clientV2),this.embedJobs=this.client.embedJobs,this.datasets=this.client.datasets,this.connectors=this.client.connectors,this.models=this.client.models,this.finetuning=this.client.finetuning}};jte.CohereClientV2=AEe});var J0t=v(Nte=>{"use strict";Object.defineProperty(Nte,"__esModule",{value:!0});Nte.CustomClient=void 0;var i2r=Ite(),IEe=class extends i2r.CohereClient{constructor(e={}){var r,n;try{let o=/\/v1\/?$/,i=(r=e.environment)===null||r===void 0?void 0:r.toString().replace(o,"");i!==((n=e.environment)===null||n===void 0?void 0:n.toString())&&(e.environment=i)}catch{}super(e),this._options=e}};Nte.CustomClient=IEe});var Y0t=v(Dte=>{"use strict";Object.defineProperty(Dte,"__esModule",{value:!0});Dte.SagemakerClient=void 0;var a2r=EEe(),s2r=gEe(),MEe=class extends a2r.AwsClient{constructor(e){super(Object.assign(Object.assign({},e),{fetcher:(0,s2r.fetchOverride)("sagemaker",e)}))}};Dte.SagemakerClient=MEe});var pV=v(xa=>{"use strict";var u2r=xa&&xa.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),l2r=xa&&xa.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),c2r=xa&&xa.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&u2r(e,t,r);return l2r(e,t),e};Object.defineProperty(xa,"__esModule",{value:!0});xa.SagemakerClient=xa.CohereTimeoutError=xa.CohereError=xa.CohereEnvironment=xa.CohereClient=xa.CohereClientV2=xa.BedrockClient=xa.Cohere=void 0;xa.Cohere=c2r(LC());var d2r=K0t();Object.defineProperty(xa,"BedrockClient",{enumerable:!0,get:function(){return d2r.BedrockClient}});var f2r=G0t();Object.defineProperty(xa,"CohereClientV2",{enumerable:!0,get:function(){return f2r.CohereClientV2}});var p2r=J0t();Object.defineProperty(xa,"CohereClient",{enumerable:!0,get:function(){return p2r.CustomClient}});var m2r=fO();Object.defineProperty(xa,"CohereEnvironment",{enumerable:!0,get:function(){return m2r.CohereEnvironment}});var Z0t=ws();Object.defineProperty(xa,"CohereError",{enumerable:!0,get:function(){return Z0t.CohereError}});Object.defineProperty(xa,"CohereTimeoutError",{enumerable:!0,get:function(){return Z0t.CohereTimeoutError}});var h2r=Y0t();Object.defineProperty(xa,"SagemakerClient",{enumerable:!0,get:function(){return h2r.SagemakerClient}})});function Py(t){t?(Hl[0]=Hl[16]=Hl[1]=Hl[2]=Hl[3]=Hl[4]=Hl[5]=Hl[6]=Hl[7]=Hl[8]=Hl[9]=Hl[10]=Hl[11]=Hl[12]=Hl[13]=Hl[14]=Hl[15]=0,this.blocks=Hl):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.h0=1732584193,this.h1=4023233417,this.h2=2562383102,this.h3=271733878,this.h4=3285377520,this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0}var g2r,dn,y2r,Oy,Hl,REe,X0t=O(()=>{"use strict";g2r=typeof window=="object"?window:{},dn="0123456789abcdef".split(""),y2r=[-2147483648,8388608,32768,128],Oy=[24,16,8,0],Hl=[];Py.prototype.update=function(t){if(!this.finalized){var e=typeof t!="string";e&&t.constructor===g2r.ArrayBuffer&&(t=new Uint8Array(t));for(var r,n=0,o,i=t.length||0,a=this.blocks;n<i;){if(this.hashed&&(this.hashed=!1,a[0]=this.block,a[16]=a[1]=a[2]=a[3]=a[4]=a[5]=a[6]=a[7]=a[8]=a[9]=a[10]=a[11]=a[12]=a[13]=a[14]=a[15]=0),e)for(o=this.start;n<i&&o<64;++n)a[o>>2]|=t[n]<<Oy[o++&3];else for(o=this.start;n<i&&o<64;++n)r=t.charCodeAt(n),r<128?a[o>>2]|=r<<Oy[o++&3]:r<2048?(a[o>>2]|=(192|r>>6)<<Oy[o++&3],a[o>>2]|=(128|r&63)<<Oy[o++&3]):r<55296||r>=57344?(a[o>>2]|=(224|r>>12)<<Oy[o++&3],a[o>>2]|=(128|r>>6&63)<<Oy[o++&3],a[o>>2]|=(128|r&63)<<Oy[o++&3]):(r=65536+((r&1023)<<10|t.charCodeAt(++n)&1023),a[o>>2]|=(240|r>>18)<<Oy[o++&3],a[o>>2]|=(128|r>>12&63)<<Oy[o++&3],a[o>>2]|=(128|r>>6&63)<<Oy[o++&3],a[o>>2]|=(128|r&63)<<Oy[o++&3]);this.lastByteIndex=o,this.bytes+=o-this.start,o>=64?(this.block=a[16],this.start=o-64,this.hash(),this.hashed=!0):this.start=o}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}};Py.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var t=this.blocks,e=this.lastByteIndex;t[16]=this.block,t[e>>2]|=y2r[e&3],this.block=t[16],e>=56&&(this.hashed||this.hash(),t[0]=this.block,t[16]=t[1]=t[2]=t[3]=t[4]=t[5]=t[6]=t[7]=t[8]=t[9]=t[10]=t[11]=t[12]=t[13]=t[14]=t[15]=0),t[14]=this.hBytes<<3|this.bytes>>>29,t[15]=this.bytes<<3,this.hash()}};Py.prototype.hash=function(){var t=this.h0,e=this.h1,r=this.h2,n=this.h3,o=this.h4,i,a,s,u=this.blocks;for(a=16;a<80;++a)s=u[a-3]^u[a-8]^u[a-14]^u[a-16],u[a]=s<<1|s>>>31;for(a=0;a<20;a+=5)i=e&r|~e&n,s=t<<5|t>>>27,o=s+i+o+1518500249+u[a]<<0,e=e<<30|e>>>2,i=t&e|~t&r,s=o<<5|o>>>27,n=s+i+n+1518500249+u[a+1]<<0,t=t<<30|t>>>2,i=o&t|~o&e,s=n<<5|n>>>27,r=s+i+r+1518500249+u[a+2]<<0,o=o<<30|o>>>2,i=n&o|~n&t,s=r<<5|r>>>27,e=s+i+e+1518500249+u[a+3]<<0,n=n<<30|n>>>2,i=r&n|~r&o,s=e<<5|e>>>27,t=s+i+t+1518500249+u[a+4]<<0,r=r<<30|r>>>2;for(;a<40;a+=5)i=e^r^n,s=t<<5|t>>>27,o=s+i+o+1859775393+u[a]<<0,e=e<<30|e>>>2,i=t^e^r,s=o<<5|o>>>27,n=s+i+n+1859775393+u[a+1]<<0,t=t<<30|t>>>2,i=o^t^e,s=n<<5|n>>>27,r=s+i+r+1859775393+u[a+2]<<0,o=o<<30|o>>>2,i=n^o^t,s=r<<5|r>>>27,e=s+i+e+1859775393+u[a+3]<<0,n=n<<30|n>>>2,i=r^n^o,s=e<<5|e>>>27,t=s+i+t+1859775393+u[a+4]<<0,r=r<<30|r>>>2;for(;a<60;a+=5)i=e&r|e&n|r&n,s=t<<5|t>>>27,o=s+i+o-1894007588+u[a]<<0,e=e<<30|e>>>2,i=t&e|t&r|e&r,s=o<<5|o>>>27,n=s+i+n-1894007588+u[a+1]<<0,t=t<<30|t>>>2,i=o&t|o&e|t&e,s=n<<5|n>>>27,r=s+i+r-1894007588+u[a+2]<<0,o=o<<30|o>>>2,i=n&o|n&t|o&t,s=r<<5|r>>>27,e=s+i+e-1894007588+u[a+3]<<0,n=n<<30|n>>>2,i=r&n|r&o|n&o,s=e<<5|e>>>27,t=s+i+t-1894007588+u[a+4]<<0,r=r<<30|r>>>2;for(;a<80;a+=5)i=e^r^n,s=t<<5|t>>>27,o=s+i+o-899497514+u[a]<<0,e=e<<30|e>>>2,i=t^e^r,s=o<<5|o>>>27,n=s+i+n-899497514+u[a+1]<<0,t=t<<30|t>>>2,i=o^t^e,s=n<<5|n>>>27,r=s+i+r-899497514+u[a+2]<<0,o=o<<30|o>>>2,i=n^o^t,s=r<<5|r>>>27,e=s+i+e-899497514+u[a+3]<<0,n=n<<30|n>>>2,i=r^n^o,s=e<<5|e>>>27,t=s+i+t-899497514+u[a+4]<<0,r=r<<30|r>>>2;this.h0=this.h0+t<<0,this.h1=this.h1+e<<0,this.h2=this.h2+r<<0,this.h3=this.h3+n<<0,this.h4=this.h4+o<<0};Py.prototype.hex=function(){this.finalize();var t=this.h0,e=this.h1,r=this.h2,n=this.h3,o=this.h4;return dn[t>>28&15]+dn[t>>24&15]+dn[t>>20&15]+dn[t>>16&15]+dn[t>>12&15]+dn[t>>8&15]+dn[t>>4&15]+dn[t&15]+dn[e>>28&15]+dn[e>>24&15]+dn[e>>20&15]+dn[e>>16&15]+dn[e>>12&15]+dn[e>>8&15]+dn[e>>4&15]+dn[e&15]+dn[r>>28&15]+dn[r>>24&15]+dn[r>>20&15]+dn[r>>16&15]+dn[r>>12&15]+dn[r>>8&15]+dn[r>>4&15]+dn[r&15]+dn[n>>28&15]+dn[n>>24&15]+dn[n>>20&15]+dn[n>>16&15]+dn[n>>12&15]+dn[n>>8&15]+dn[n>>4&15]+dn[n&15]+dn[o>>28&15]+dn[o>>24&15]+dn[o>>20&15]+dn[o>>16&15]+dn[o>>12&15]+dn[o>>8&15]+dn[o>>4&15]+dn[o&15]};Py.prototype.toString=Py.prototype.hex;Py.prototype.digest=function(){this.finalize();var t=this.h0,e=this.h1,r=this.h2,n=this.h3,o=this.h4;return[t>>24&255,t>>16&255,t>>8&255,t&255,e>>24&255,e>>16&255,e>>8&255,e&255,r>>24&255,r>>16&255,r>>8&255,r&255,n>>24&255,n>>16&255,n>>8&255,n&255,o>>24&255,o>>16&255,o>>8&255,o&255]};Py.prototype.array=Py.prototype.digest;Py.prototype.arrayBuffer=function(){this.finalize();var t=new ArrayBuffer(20),e=new DataView(t);return e.setUint32(0,this.h0),e.setUint32(4,this.h1),e.setUint32(8,this.h2),e.setUint32(12,this.h3),e.setUint32(16,this.h4),t};REe=t=>new Py(!0).update(t).hex()});var Q0t=O(()=>{X0t()});var eSt,jEe,b2r,Lte,tSt=O(()=>{Q0t();cE();eSt=(...t)=>REe(t.join("_")),jEe=class{},b2r=new Map,Lte=class t extends jEe{constructor(e){super(),Object.defineProperty(this,"cache",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cache=e??new Map}lookup(e,r){return Promise.resolve(this.cache.get(eSt(e,r))??null)}async update(e,r,n){this.cache.set(eSt(e,r),n)}static global(){return new t(b2r)}}});function S2r(t,e){let r=Array.from({length:t.length},(n,o)=>({start:o,end:o+1}));for(;r.length>1;){let n=null;for(let o=0;o<r.length-1;o++){let i=t.slice(r[o].start,r[o+1].end),a=e.get(i.join(","));a!=null&&(n==null||a<n[0])&&(n=[a,o])}if(n!=null){let o=n[1];r[o]={start:r[o].start,end:r[o+1].end},r.splice(o+1,1)}else break}return r}function x2r(t,e){return t.length===1?[e.get(t.join(","))]:S2r(t,e).map(r=>e.get(t.slice(r.start,r.end).join(","))).filter(r=>r!=null)}function C2r(t){return t.replace(/[\\^$*+?.()|[\]{}]/g,"\\$&")}function DEe(t){switch(t){case"gpt2":return"gpt2";case"code-cushman-001":case"code-cushman-002":case"code-davinci-001":case"code-davinci-002":case"cushman-codex":case"davinci-codex":case"davinci-002":case"text-davinci-002":case"text-davinci-003":return"p50k_base";case"code-davinci-edit-001":case"text-davinci-edit-001":return"p50k_edit";case"ada":case"babbage":case"babbage-002":case"code-search-ada-code-001":case"code-search-babbage-code-001":case"curie":case"davinci":case"text-ada-001":case"text-babbage-001":case"text-curie-001":case"text-davinci-001":case"text-search-ada-doc-001":case"text-search-babbage-doc-001":case"text-search-curie-doc-001":case"text-search-davinci-doc-001":case"text-similarity-ada-001":case"text-similarity-babbage-001":case"text-similarity-curie-001":case"text-similarity-davinci-001":return"r50k_base";case"gpt-3.5-turbo-instruct-0914":case"gpt-3.5-turbo-instruct":case"gpt-3.5-turbo-16k-0613":case"gpt-3.5-turbo-16k":case"gpt-3.5-turbo-0613":case"gpt-3.5-turbo-0301":case"gpt-3.5-turbo":case"gpt-4-32k-0613":case"gpt-4-32k-0314":case"gpt-4-32k":case"gpt-4-0613":case"gpt-4-0314":case"gpt-4":case"gpt-3.5-turbo-1106":case"gpt-35-turbo":case"gpt-4-1106-preview":case"gpt-4-vision-preview":case"gpt-3.5-turbo-0125":case"gpt-4-turbo":case"gpt-4-turbo-2024-04-09":case"gpt-4-turbo-preview":case"gpt-4-0125-preview":case"text-embedding-ada-002":case"text-embedding-3-small":case"text-embedding-3-large":return"cl100k_base";case"gpt-4o":case"gpt-4o-2024-05-13":case"gpt-4o-2024-08-06":case"gpt-4o-mini-2024-07-18":case"gpt-4o-mini":return"o200k_base";default:throw new Error("Unknown model")}}var rSt,_2r,v2r,w2r,NEe,Fte,nSt=O(()=>{rSt=F(Ume(),1),_2r=Object.defineProperty,v2r=(t,e,r)=>e in t?_2r(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,w2r=(t,e,r)=>(v2r(t,typeof e!="symbol"?e+"":e,r),r);NEe=class{constructor(t,e){dc(this,"specialTokens");dc(this,"inverseSpecialTokens");dc(this,"patStr");dc(this,"textEncoder",new TextEncoder);dc(this,"textDecoder",new TextDecoder("utf-8"));dc(this,"rankMap",new Map);dc(this,"textMap",new Map);this.patStr=t.pat_str;let r=t.bpe_ranks.split(`
`).filter(Boolean).reduce((n,o)=>{let[i,a,...s]=o.split(" "),u=Number.parseInt(a,10);return s.forEach((l,c)=>n[l]=u+c),n},{});for(let[n,o]of Object.entries(r)){let i=rSt.default.toByteArray(n);this.rankMap.set(i.join(","),o),this.textMap.set(o,i)}this.specialTokens={...t.special_tokens,...e},this.inverseSpecialTokens=Object.entries(this.specialTokens).reduce((n,[o,i])=>(n[i]=this.textEncoder.encode(o),n),{})}encode(t,e=[],r="all"){let n=new RegExp(this.patStr,"ug"),o=NEe.specialTokenRegex(Object.keys(this.specialTokens)),i=[],a=new Set(e==="all"?Object.keys(this.specialTokens):e),s=new Set(r==="all"?Object.keys(this.specialTokens).filter(l=>!a.has(l)):r);if(s.size>0){let l=NEe.specialTokenRegex([...s]),c=t.match(l);if(c!=null)throw new Error(`The text contains a special token that is not allowed: ${c[0]}`)}let u=0;for(;;){let l=null,c=u;for(;o.lastIndex=c,l=o.exec(t),!(l==null||a.has(l[0]));)c=l.index+1;let d=l?.index??t.length;for(let p of t.substring(u,d).matchAll(n)){let m=this.textEncoder.encode(p[0]),h=this.rankMap.get(m.join(","));if(h!=null){i.push(h);continue}i.push(...x2r(m,this.rankMap))}if(l==null)break;let f=this.specialTokens[l[0]];i.push(f),u=l.index+l[0].length}return i}decode(t){let e=[],r=0;for(let i=0;i<t.length;++i){let a=t[i],s=this.textMap.get(a)??this.inverseSpecialTokens[a];s!=null&&(e.push(s),r+=s.length)}let n=new Uint8Array(r),o=0;for(let i of e)n.set(i,o),o+=i.length;return this.textDecoder.decode(n)}},Fte=NEe;w2r(Fte,"specialTokenRegex",t=>new RegExp(t.map(e=>C2r(e)).join("|"),"g"))});var oSt=O(()=>{nSt()});async function iSt(t){return t in kte||(kte[t]=O2r.fetch(`https://tiktoken.pages.dev/js/${t}.json`).then(e=>e.json()).then(e=>new Fte(e)).catch(e=>{throw delete kte[t],e})),await kte[t]}async function aSt(t){return iSt(DEe(t))}var kte,O2r,LEe=O(()=>{oSt();gL();kte={},O2r=new im({})});function Rc(t){return typeof t!="object"||!t?!1:!!("type"in t&&t.type==="function"&&"function"in t&&typeof t.function=="object"&&t.function&&"name"in t.function&&"parameters"in t.function)}var P2r,E2r,T$,A$,mV=O(()=>{tSt();o2();cE();gL();LEe();vf();P2r=t=>t.startsWith("gpt-3.5-turbo-16k")?"gpt-3.5-turbo-16k":t.startsWith("gpt-3.5-turbo-")?"gpt-3.5-turbo":t.startsWith("gpt-4-32k")?"gpt-4-32k":t.startsWith("gpt-4-")?"gpt-4":t.startsWith("gpt-4o")?"gpt-4o":t;E2r=()=>!1,T$=class extends vn{get lc_attributes(){return{callbacks:void 0,verbose:void 0}}constructor(e){super(e),Object.defineProperty(this,"verbose",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"callbacks",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.verbose=e.verbose??E2r(),this.callbacks=e.callbacks,this.tags=e.tags??[],this.metadata=e.metadata??{}}},A$=class extends T${get callKeys(){return["stop","timeout","signal","tags","metadata","callbacks"]}constructor({callbacks:e,callbackManager:r,...n}){let{cache:o,...i}=n;super({callbacks:e??r,...i}),Object.defineProperty(this,"caller",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cache",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_encoding",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),typeof o=="object"?this.cache=o:o?this.cache=Lte.global():this.cache=void 0,this.caller=new im(n??{})}async getNumTokens(e){if(typeof e!="string")return 0;let r=Math.ceil(e.length/4);if(!this._encoding)try{this._encoding=await aSt("modelName"in this?P2r(this.modelName):"gpt2")}catch(n){console.warn("Failed to calculate number of tokens, falling back to approximate count",n)}if(this._encoding)try{r=this._encoding.encode(e).length}catch(n){console.warn("Failed to calculate number of tokens, falling back to approximate count",n)}return r}static _convertInputToPromptValue(e){return typeof e=="string"?new _L(e):Array.isArray(e)?new vL(e.map(Wg)):e}_identifyingParams(){return{}}_getSerializedCacheKeyParametersForCall({config:e,...r}){let n={...this._identifyingParams(),...r,_type:this._llmType(),_model:this._modelType()};return Object.entries(n).filter(([a,s])=>s!==void 0).map(([a,s])=>`${a}:${JSON.stringify(s)}`).sort().join(",")}serialize(){return{...this._identifyingParams(),_type:this._llmType(),_model:this._modelType()}}static async deserialize(e){throw new Error("Use .toJSON() instead")}}});var Rm=O(()=>{mV()});var $d=O(()=>{hL()});var BOt=v(()=>{});var Mn=v((Xre,qOt)=>{(function(t,e){typeof Xre=="object"?qOt.exports=Xre=e():typeof define=="function"&&define.amd?define([],e):t.CryptoJS=e()})(Xre,function(){var t=t||function(e,r){var n;if(typeof window<"u"&&window.crypto&&(n=window.crypto),typeof self<"u"&&self.crypto&&(n=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(n=globalThis.crypto),!n&&typeof window<"u"&&window.msCrypto&&(n=window.msCrypto),!n&&typeof window<"u"&&window.crypto&&(n=window.crypto),!n&&typeof require=="function")try{n=BOt()}catch{}var o=function(){if(n){if(typeof n.getRandomValues=="function")try{return n.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof n.randomBytes=="function")try{return n.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},i=Object.create||function(){function g(){}return function(y){var w;return g.prototype=y,w=new g,g.prototype=null,w}}(),a={},s=a.lib={},u=s.Base=function(){return{extend:function(g){var y=i(this);return g&&y.mixIn(g),(!y.hasOwnProperty("init")||this.init===y.init)&&(y.init=function(){y.$super.init.apply(this,arguments)}),y.init.prototype=y,y.$super=this,y},create:function(){var g=this.extend();return g.init.apply(g,arguments),g},init:function(){},mixIn:function(g){for(var y in g)g.hasOwnProperty(y)&&(this[y]=g[y]);g.hasOwnProperty("toString")&&(this.toString=g.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),l=s.WordArray=u.extend({init:function(g,y){g=this.words=g||[],y!=r?this.sigBytes=y:this.sigBytes=g.length*4},toString:function(g){return(g||d).stringify(this)},concat:function(g){var y=this.words,w=g.words,S=this.sigBytes,C=g.sigBytes;if(this.clamp(),S%4)for(var P=0;P<C;P++){var E=w[P>>>2]>>>24-P%4*8&255;y[S+P>>>2]|=E<<24-(S+P)%4*8}else for(var A=0;A<C;A+=4)y[S+A>>>2]=w[A>>>2];return this.sigBytes+=C,this},clamp:function(){var g=this.words,y=this.sigBytes;g[y>>>2]&=4294967295<<32-y%4*8,g.length=e.ceil(y/4)},clone:function(){var g=u.clone.call(this);return g.words=this.words.slice(0),g},random:function(g){for(var y=[],w=0;w<g;w+=4)y.push(o());return new l.init(y,g)}}),c=a.enc={},d=c.Hex={stringify:function(g){for(var y=g.words,w=g.sigBytes,S=[],C=0;C<w;C++){var P=y[C>>>2]>>>24-C%4*8&255;S.push((P>>>4).toString(16)),S.push((P&15).toString(16))}return S.join("")},parse:function(g){for(var y=g.length,w=[],S=0;S<y;S+=2)w[S>>>3]|=parseInt(g.substr(S,2),16)<<24-S%8*4;return new l.init(w,y/2)}},f=c.Latin1={stringify:function(g){for(var y=g.words,w=g.sigBytes,S=[],C=0;C<w;C++){var P=y[C>>>2]>>>24-C%4*8&255;S.push(String.fromCharCode(P))}return S.join("")},parse:function(g){for(var y=g.length,w=[],S=0;S<y;S++)w[S>>>2]|=(g.charCodeAt(S)&255)<<24-S%4*8;return new l.init(w,y)}},p=c.Utf8={stringify:function(g){try{return decodeURIComponent(escape(f.stringify(g)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(g){return f.parse(unescape(encodeURIComponent(g)))}},m=s.BufferedBlockAlgorithm=u.extend({reset:function(){this._data=new l.init,this._nDataBytes=0},_append:function(g){typeof g=="string"&&(g=p.parse(g)),this._data.concat(g),this._nDataBytes+=g.sigBytes},_process:function(g){var y,w=this._data,S=w.words,C=w.sigBytes,P=this.blockSize,E=P*4,A=C/E;g?A=e.ceil(A):A=e.max((A|0)-this._minBufferSize,0);var I=A*P,R=e.min(I*4,C);if(I){for(var j=0;j<I;j+=P)this._doProcessBlock(S,j);y=S.splice(0,I),w.sigBytes-=R}return new l.init(y,R)},clone:function(){var g=u.clone.call(this);return g._data=this._data.clone(),g},_minBufferSize:0}),h=s.Hasher=m.extend({cfg:u.extend(),init:function(g){this.cfg=this.cfg.extend(g),this.reset()},reset:function(){m.reset.call(this),this._doReset()},update:function(g){return this._append(g),this._process(),this},finalize:function(g){g&&this._append(g);var y=this._doFinalize();return y},blockSize:512/32,_createHelper:function(g){return function(y,w){return new g.init(w).finalize(y)}},_createHmacHelper:function(g){return function(y,w){return new b.HMAC.init(g,w).finalize(y)}}}),b=a.algo={};return a}(Math);return t})});var HV=v((Qre,UOt)=>{(function(t,e){typeof Qre=="object"?UOt.exports=Qre=e(Mn()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(Qre,function(t){return function(e){var r=t,n=r.lib,o=n.Base,i=n.WordArray,a=r.x64={},s=a.Word=o.extend({init:function(l,c){this.high=l,this.low=c}}),u=a.WordArray=o.extend({init:function(l,c){l=this.words=l||[],c!=e?this.sigBytes=c:this.sigBytes=l.length*8},toX32:function(){for(var l=this.words,c=l.length,d=[],f=0;f<c;f++){var p=l[f];d.push(p.high),d.push(p.low)}return i.create(d,this.sigBytes)},clone:function(){for(var l=o.clone.call(this),c=l.words=this.words.slice(0),d=c.length,f=0;f<d;f++)c[f]=c[f].clone();return l}})}(),t})});var HOt=v((ene,zOt)=>{(function(t,e){typeof ene=="object"?zOt.exports=ene=e(Mn()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(ene,function(t){return function(){if(typeof ArrayBuffer=="function"){var e=t,r=e.lib,n=r.WordArray,o=n.init,i=n.init=function(a){if(a instanceof ArrayBuffer&&(a=new Uint8Array(a)),(a instanceof Int8Array||typeof Uint8ClampedArray<"u"&&a instanceof Uint8ClampedArray||a instanceof Int16Array||a instanceof Uint16Array||a instanceof Int32Array||a instanceof Uint32Array||a instanceof Float32Array||a instanceof Float64Array)&&(a=new Uint8Array(a.buffer,a.byteOffset,a.byteLength)),a instanceof Uint8Array){for(var s=a.byteLength,u=[],l=0;l<s;l++)u[l>>>2]|=a[l]<<24-l%4*8;o.call(this,u,s)}else o.apply(this,arguments)};i.prototype=n}}(),t.lib.WordArray})});var WOt=v((tne,VOt)=>{(function(t,e){typeof tne=="object"?VOt.exports=tne=e(Mn()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(tne,function(t){return function(){var e=t,r=e.lib,n=r.WordArray,o=e.enc,i=o.Utf16=o.Utf16BE={stringify:function(s){for(var u=s.words,l=s.sigBytes,c=[],d=0;d<l;d+=2){var f=u[d>>>2]>>>16-d%4*8&65535;c.push(String.fromCharCode(f))}return c.join("")},parse:function(s){for(var u=s.length,l=[],c=0;c<u;c++)l[c>>>1]|=s.charCodeAt(c)<<16-c%2*16;return n.create(l,u*2)}};o.Utf16LE={stringify:function(s){for(var u=s.words,l=s.sigBytes,c=[],d=0;d<l;d+=2){var f=a(u[d>>>2]>>>16-d%4*8&65535);c.push(String.fromCharCode(f))}return c.join("")},parse:function(s){for(var u=s.length,l=[],c=0;c<u;c++)l[c>>>1]|=a(s.charCodeAt(c)<<16-c%2*16);return n.create(l,u*2)}};function a(s){return s<<8&4278255360|s>>>8&16711935}}(),t.enc.Utf16})});var PA=v((rne,KOt)=>{(function(t,e){typeof rne=="object"?KOt.exports=rne=e(Mn()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(rne,function(t){return function(){var e=t,r=e.lib,n=r.WordArray,o=e.enc,i=o.Base64={stringify:function(s){var u=s.words,l=s.sigBytes,c=this._map;s.clamp();for(var d=[],f=0;f<l;f+=3)for(var p=u[f>>>2]>>>24-f%4*8&255,m=u[f+1>>>2]>>>24-(f+1)%4*8&255,h=u[f+2>>>2]>>>24-(f+2)%4*8&255,b=p<<16|m<<8|h,g=0;g<4&&f+g*.75<l;g++)d.push(c.charAt(b>>>6*(3-g)&63));var y=c.charAt(64);if(y)for(;d.length%4;)d.push(y);return d.join("")},parse:function(s){var u=s.length,l=this._map,c=this._reverseMap;if(!c){c=this._reverseMap=[];for(var d=0;d<l.length;d++)c[l.charCodeAt(d)]=d}var f=l.charAt(64);if(f){var p=s.indexOf(f);p!==-1&&(u=p)}return a(s,u,c)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};function a(s,u,l){for(var c=[],d=0,f=0;f<u;f++)if(f%4){var p=l[s.charCodeAt(f-1)]<<f%4*2,m=l[s.charCodeAt(f)]>>>6-f%4*2,h=p|m;c[d>>>2]|=h<<24-d%4*8,d++}return n.create(c,d)}}(),t.enc.Base64})});var JOt=v((nne,GOt)=>{(function(t,e){typeof nne=="object"?GOt.exports=nne=e(Mn()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(nne,function(t){return function(){var e=t,r=e.lib,n=r.WordArray,o=e.enc,i=o.Base64url={stringify:function(s,u){u===void 0&&(u=!0);var l=s.words,c=s.sigBytes,d=u?this._safe_map:this._map;s.clamp();for(var f=[],p=0;p<c;p+=3)for(var m=l[p>>>2]>>>24-p%4*8&255,h=l[p+1>>>2]>>>24-(p+1)%4*8&255,b=l[p+2>>>2]>>>24-(p+2)%4*8&255,g=m<<16|h<<8|b,y=0;y<4&&p+y*.75<c;y++)f.push(d.charAt(g>>>6*(3-y)&63));var w=d.charAt(64);if(w)for(;f.length%4;)f.push(w);return f.join("")},parse:function(s,u){u===void 0&&(u=!0);var l=s.length,c=u?this._safe_map:this._map,d=this._reverseMap;if(!d){d=this._reverseMap=[];for(var f=0;f<c.length;f++)d[c.charCodeAt(f)]=f}var p=c.charAt(64);if(p){var m=s.indexOf(p);m!==-1&&(l=m)}return a(s,l,d)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"};function a(s,u,l){for(var c=[],d=0,f=0;f<u;f++)if(f%4){var p=l[s.charCodeAt(f-1)]<<f%4*2,m=l[s.charCodeAt(f)]>>>6-f%4*2,h=p|m;c[d>>>2]|=h<<24-d%4*8,d++}return n.create(c,d)}}(),t.enc.Base64url})});var EA=v((one,YOt)=>{(function(t,e){typeof one=="object"?YOt.exports=one=e(Mn()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(one,function(t){return function(e){var r=t,n=r.lib,o=n.WordArray,i=n.Hasher,a=r.algo,s=[];(function(){for(var p=0;p<64;p++)s[p]=e.abs(e.sin(p+1))*4294967296|0})();var u=a.MD5=i.extend({_doReset:function(){this._hash=new o.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(p,m){for(var h=0;h<16;h++){var b=m+h,g=p[b];p[b]=(g<<8|g>>>24)&16711935|(g<<24|g>>>8)&4278255360}var y=this._hash.words,w=p[m+0],S=p[m+1],C=p[m+2],P=p[m+3],E=p[m+4],A=p[m+5],I=p[m+6],R=p[m+7],j=p[m+8],N=p[m+9],$=p[m+10],k=p[m+11],H=p[m+12],V=p[m+13],Q=p[m+14],G=p[m+15],D=y[0],B=y[1],q=y[2],K=y[3];D=l(D,B,q,K,w,7,s[0]),K=l(K,D,B,q,S,12,s[1]),q=l(q,K,D,B,C,17,s[2]),B=l(B,q,K,D,P,22,s[3]),D=l(D,B,q,K,E,7,s[4]),K=l(K,D,B,q,A,12,s[5]),q=l(q,K,D,B,I,17,s[6]),B=l(B,q,K,D,R,22,s[7]),D=l(D,B,q,K,j,7,s[8]),K=l(K,D,B,q,N,12,s[9]),q=l(q,K,D,B,$,17,s[10]),B=l(B,q,K,D,k,22,s[11]),D=l(D,B,q,K,H,7,s[12]),K=l(K,D,B,q,V,12,s[13]),q=l(q,K,D,B,Q,17,s[14]),B=l(B,q,K,D,G,22,s[15]),D=c(D,B,q,K,S,5,s[16]),K=c(K,D,B,q,I,9,s[17]),q=c(q,K,D,B,k,14,s[18]),B=c(B,q,K,D,w,20,s[19]),D=c(D,B,q,K,A,5,s[20]),K=c(K,D,B,q,$,9,s[21]),q=c(q,K,D,B,G,14,s[22]),B=c(B,q,K,D,E,20,s[23]),D=c(D,B,q,K,N,5,s[24]),K=c(K,D,B,q,Q,9,s[25]),q=c(q,K,D,B,P,14,s[26]),B=c(B,q,K,D,j,20,s[27]),D=c(D,B,q,K,V,5,s[28]),K=c(K,D,B,q,C,9,s[29]),q=c(q,K,D,B,R,14,s[30]),B=c(B,q,K,D,H,20,s[31]),D=d(D,B,q,K,A,4,s[32]),K=d(K,D,B,q,j,11,s[33]),q=d(q,K,D,B,k,16,s[34]),B=d(B,q,K,D,Q,23,s[35]),D=d(D,B,q,K,S,4,s[36]),K=d(K,D,B,q,E,11,s[37]),q=d(q,K,D,B,R,16,s[38]),B=d(B,q,K,D,$,23,s[39]),D=d(D,B,q,K,V,4,s[40]),K=d(K,D,B,q,w,11,s[41]),q=d(q,K,D,B,P,16,s[42]),B=d(B,q,K,D,I,23,s[43]),D=d(D,B,q,K,N,4,s[44]),K=d(K,D,B,q,H,11,s[45]),q=d(q,K,D,B,G,16,s[46]),B=d(B,q,K,D,C,23,s[47]),D=f(D,B,q,K,w,6,s[48]),K=f(K,D,B,q,R,10,s[49]),q=f(q,K,D,B,Q,15,s[50]),B=f(B,q,K,D,A,21,s[51]),D=f(D,B,q,K,H,6,s[52]),K=f(K,D,B,q,P,10,s[53]),q=f(q,K,D,B,$,15,s[54]),B=f(B,q,K,D,S,21,s[55]),D=f(D,B,q,K,j,6,s[56]),K=f(K,D,B,q,G,10,s[57]),q=f(q,K,D,B,I,15,s[58]),B=f(B,q,K,D,V,21,s[59]),D=f(D,B,q,K,E,6,s[60]),K=f(K,D,B,q,k,10,s[61]),q=f(q,K,D,B,C,15,s[62]),B=f(B,q,K,D,N,21,s[63]),y[0]=y[0]+D|0,y[1]=y[1]+B|0,y[2]=y[2]+q|0,y[3]=y[3]+K|0},_doFinalize:function(){var p=this._data,m=p.words,h=this._nDataBytes*8,b=p.sigBytes*8;m[b>>>5]|=128<<24-b%32;var g=e.floor(h/4294967296),y=h;m[(b+64>>>9<<4)+15]=(g<<8|g>>>24)&16711935|(g<<24|g>>>8)&4278255360,m[(b+64>>>9<<4)+14]=(y<<8|y>>>24)&16711935|(y<<24|y>>>8)&4278255360,p.sigBytes=(m.length+1)*4,this._process();for(var w=this._hash,S=w.words,C=0;C<4;C++){var P=S[C];S[C]=(P<<8|P>>>24)&16711935|(P<<24|P>>>8)&4278255360}return w},clone:function(){var p=i.clone.call(this);return p._hash=this._hash.clone(),p}});function l(p,m,h,b,g,y,w){var S=p+(m&h|~m&b)+g+w;return(S<<y|S>>>32-y)+m}function c(p,m,h,b,g,y,w){var S=p+(m&b|h&~b)+g+w;return(S<<y|S>>>32-y)+m}function d(p,m,h,b,g,y,w){var S=p+(m^h^b)+g+w;return(S<<y|S>>>32-y)+m}function f(p,m,h,b,g,y,w){var S=p+(h^(m|~b))+g+w;return(S<<y|S>>>32-y)+m}r.MD5=i._createHelper(u),r.HmacMD5=i._createHmacHelper(u)}(Math),t.MD5})});var DAe=v((ine,ZOt)=>{(function(t,e){typeof ine=="object"?ZOt.exports=ine=e(Mn()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(ine,function(t){return function(){var e=t,r=e.lib,n=r.WordArray,o=r.Hasher,i=e.algo,a=[],s=i.SHA1=o.extend({_doReset:function(){this._hash=new n.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(u,l){for(var c=this._hash.words,d=c[0],f=c[1],p=c[2],m=c[3],h=c[4],b=0;b<80;b++){if(b<16)a[b]=u[l+b]|0;else{var g=a[b-3]^a[b-8]^a[b-14]^a[b-16];a[b]=g<<1|g>>>31}var y=(d<<5|d>>>27)+h+a[b];b<20?y+=(f&p|~f&m)+1518500249:b<40?y+=(f^p^m)+1859775393:b<60?y+=(f&p|f&m|p&m)-1894007588:y+=(f^p^m)-899497514,h=m,m=p,p=f<<30|f>>>2,f=d,d=y}c[0]=c[0]+d|0,c[1]=c[1]+f|0,c[2]=c[2]+p|0,c[3]=c[3]+m|0,c[4]=c[4]+h|0},_doFinalize:function(){var u=this._data,l=u.words,c=this._nDataBytes*8,d=u.sigBytes*8;return l[d>>>5]|=128<<24-d%32,l[(d+64>>>9<<4)+14]=Math.floor(c/4294967296),l[(d+64>>>9<<4)+15]=c,u.sigBytes=l.length*4,this._process(),this._hash},clone:function(){var u=o.clone.call(this);return u._hash=this._hash.clone(),u}});e.SHA1=o._createHelper(s),e.HmacSHA1=o._createHmacHelper(s)}(),t.SHA1})});var sne=v((ane,XOt)=>{(function(t,e){typeof ane=="object"?XOt.exports=ane=e(Mn()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(ane,function(t){return function(e){var r=t,n=r.lib,o=n.WordArray,i=n.Hasher,a=r.algo,s=[],u=[];(function(){function d(h){for(var b=e.sqrt(h),g=2;g<=b;g++)if(!(h%g))return!1;return!0}function f(h){return(h-(h|0))*4294967296|0}for(var p=2,m=0;m<64;)d(p)&&(m<8&&(s[m]=f(e.pow(p,1/2))),u[m]=f(e.pow(p,1/3)),m++),p++})();var l=[],c=a.SHA256=i.extend({_doReset:function(){this._hash=new o.init(s.slice(0))},_doProcessBlock:function(d,f){for(var p=this._hash.words,m=p[0],h=p[1],b=p[2],g=p[3],y=p[4],w=p[5],S=p[6],C=p[7],P=0;P<64;P++){if(P<16)l[P]=d[f+P]|0;else{var E=l[P-15],A=(E<<25|E>>>7)^(E<<14|E>>>18)^E>>>3,I=l[P-2],R=(I<<15|I>>>17)^(I<<13|I>>>19)^I>>>10;l[P]=A+l[P-7]+R+l[P-16]}var j=y&w^~y&S,N=m&h^m&b^h&b,$=(m<<30|m>>>2)^(m<<19|m>>>13)^(m<<10|m>>>22),k=(y<<26|y>>>6)^(y<<21|y>>>11)^(y<<7|y>>>25),H=C+k+j+u[P]+l[P],V=$+N;C=S,S=w,w=y,y=g+H|0,g=b,b=h,h=m,m=H+V|0}p[0]=p[0]+m|0,p[1]=p[1]+h|0,p[2]=p[2]+b|0,p[3]=p[3]+g|0,p[4]=p[4]+y|0,p[5]=p[5]+w|0,p[6]=p[6]+S|0,p[7]=p[7]+C|0},_doFinalize:function(){var d=this._data,f=d.words,p=this._nDataBytes*8,m=d.sigBytes*8;return f[m>>>5]|=128<<24-m%32,f[(m+64>>>9<<4)+14]=e.floor(p/4294967296),f[(m+64>>>9<<4)+15]=p,d.sigBytes=f.length*4,this._process(),this._hash},clone:function(){var d=i.clone.call(this);return d._hash=this._hash.clone(),d}});r.SHA256=i._createHelper(c),r.HmacSHA256=i._createHmacHelper(c)}(Math),t.SHA256})});var ePt=v((une,QOt)=>{(function(t,e,r){typeof une=="object"?QOt.exports=une=e(Mn(),sne()):typeof define=="function"&&define.amd?define(["./core","./sha256"],e):e(t.CryptoJS)})(une,function(t){return function(){var e=t,r=e.lib,n=r.WordArray,o=e.algo,i=o.SHA256,a=o.SHA224=i.extend({_doReset:function(){this._hash=new n.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var s=i._doFinalize.call(this);return s.sigBytes-=4,s}});e.SHA224=i._createHelper(a),e.HmacSHA224=i._createHmacHelper(a)}(),t.SHA224})});var LAe=v((lne,tPt)=>{(function(t,e,r){typeof lne=="object"?tPt.exports=lne=e(Mn(),HV()):typeof define=="function"&&define.amd?define(["./core","./x64-core"],e):e(t.CryptoJS)})(lne,function(t){return function(){var e=t,r=e.lib,n=r.Hasher,o=e.x64,i=o.Word,a=o.WordArray,s=e.algo;function u(){return i.create.apply(i,arguments)}var l=[u(1116352408,3609767458),u(1899447441,602891725),u(3049323471,3964484399),u(3921009573,2173295548),u(961987163,4081628472),u(1508970993,3053834265),u(2453635748,2937671579),u(2870763221,3664609560),u(3624381080,2734883394),u(310598401,1164996542),u(607225278,1323610764),u(1426881987,3590304994),u(1925078388,4068182383),u(2162078206,991336113),u(2614888103,633803317),u(3248222580,3479774868),u(3835390401,2666613458),u(4022224774,944711139),u(264347078,2341262773),u(604807628,2007800933),u(770255983,1495990901),u(1249150122,1856431235),u(1555081692,3175218132),u(1996064986,2198950837),u(2554220882,3999719339),u(2821834349,766784016),u(2952996808,2566594879),u(3210313671,3203337956),u(3336571891,1034457026),u(3584528711,2466948901),u(113926993,3758326383),u(338241895,168717936),u(666307205,1188179964),u(773529912,1546045734),u(1294757372,1522805485),u(1396182291,2643833823),u(1695183700,2343527390),u(1986661051,1014477480),u(2177026350,1206759142),u(2456956037,344077627),u(2730485921,1290863460),u(2820302411,3158454273),u(3259730800,3505952657),u(3345764771,106217008),u(3516065817,3606008344),u(3600352804,1432725776),u(4094571909,1467031594),u(275423344,851169720),u(430227734,3100823752),u(506948616,1363258195),u(659060556,3750685593),u(883997877,3785050280),u(958139571,3318307427),u(1322822218,3812723403),u(1537002063,2003034995),u(1747873779,3602036899),u(1955562222,1575990012),u(2024104815,1125592928),u(2227730452,2716904306),u(2361852424,442776044),u(2428436474,593698344),u(2756734187,3733110249),u(3204031479,2999351573),u(3329325298,3815920427),u(3391569614,3928383900),u(3515267271,566280711),u(3940187606,3454069534),u(4118630271,4000239992),u(116418474,1914138554),u(174292421,2731055270),u(289380356,3203993006),u(460393269,320620315),u(685471733,587496836),u(852142971,1086792851),u(1017036298,365543100),u(1126000580,2618297676),u(1288033470,3409855158),u(1501505948,4234509866),u(1607167915,987167468),u(1816402316,1246189591)],c=[];(function(){for(var f=0;f<80;f++)c[f]=u()})();var d=s.SHA512=n.extend({_doReset:function(){this._hash=new a.init([new i.init(1779033703,4089235720),new i.init(3144134277,2227873595),new i.init(1013904242,4271175723),new i.init(2773480762,1595750129),new i.init(1359893119,2917565137),new i.init(2600822924,725511199),new i.init(528734635,4215389547),new i.init(1541459225,327033209)])},_doProcessBlock:function(f,p){for(var m=this._hash.words,h=m[0],b=m[1],g=m[2],y=m[3],w=m[4],S=m[5],C=m[6],P=m[7],E=h.high,A=h.low,I=b.high,R=b.low,j=g.high,N=g.low,$=y.high,k=y.low,H=w.high,V=w.low,Q=S.high,G=S.low,D=C.high,B=C.low,q=P.high,K=P.low,U=E,te=A,z=I,W=R,Y=j,ae=N,we=$,de=k,Ue=H,Ve=V,rt=Q,lr=G,bn=D,Le=B,gt=q,vt=K,pt=0;pt<80;pt++){var ee,et,Re=c[pt];if(pt<16)et=Re.high=f[p+pt*2]|0,ee=Re.low=f[p+pt*2+1]|0;else{var Pe=c[pt-15],oe=Pe.high,se=Pe.low,le=(oe>>>1|se<<31)^(oe>>>8|se<<24)^oe>>>7,Oe=(se>>>1|oe<<31)^(se>>>8|oe<<24)^(se>>>7|oe<<25),Je=c[pt-2],nr=Je.high,Ji=Je.low,Ni=(nr>>>19|Ji<<13)^(nr<<3|Ji>>>29)^nr>>>6,cc=(Ji>>>19|nr<<13)^(Ji<<3|nr>>>29)^(Ji>>>6|nr<<26),cd=c[pt-7],Di=cd.high,Jf=cd.low,rf=c[pt-16],nf=rf.high,_n=rf.low;ee=Oe+Jf,et=le+Di+(ee>>>0<Oe>>>0?1:0),ee=ee+cc,et=et+Ni+(ee>>>0<cc>>>0?1:0),ee=ee+_n,et=et+nf+(ee>>>0<_n>>>0?1:0),Re.high=et,Re.low=ee}var of=Ue&rt^~Ue&bn,$x=Ve&lr^~Ve&Le,bb=U&z^U&Y^z&Y,Xa=te&W^te&ae^W&ae,Is=(U>>>28|te<<4)^(U<<30|te>>>2)^(U<<25|te>>>7),Aa=(te>>>28|U<<4)^(te<<30|U>>>2)^(te<<25|U>>>7),af=(Ue>>>14|Ve<<18)^(Ue>>>18|Ve<<14)^(Ue<<23|Ve>>>9),dd=(Ve>>>14|Ue<<18)^(Ve>>>18|Ue<<14)^(Ve<<23|Ue>>>9),ps=l[pt],Yf=ps.high,sf=ps.low,Pn=vt+dd,Ye=gt+af+(Pn>>>0<vt>>>0?1:0),Pn=Pn+$x,Ye=Ye+of+(Pn>>>0<$x>>>0?1:0),Pn=Pn+sf,Ye=Ye+Yf+(Pn>>>0<sf>>>0?1:0),Pn=Pn+ee,Ye=Ye+et+(Pn>>>0<ee>>>0?1:0),uf=Aa+Xa,em=Is+bb+(uf>>>0<Aa>>>0?1:0);gt=bn,vt=Le,bn=rt,Le=lr,rt=Ue,lr=Ve,Ve=de+Pn|0,Ue=we+Ye+(Ve>>>0<de>>>0?1:0)|0,we=Y,de=ae,Y=z,ae=W,z=U,W=te,te=Pn+uf|0,U=Ye+em+(te>>>0<Pn>>>0?1:0)|0}A=h.low=A+te,h.high=E+U+(A>>>0<te>>>0?1:0),R=b.low=R+W,b.high=I+z+(R>>>0<W>>>0?1:0),N=g.low=N+ae,g.high=j+Y+(N>>>0<ae>>>0?1:0),k=y.low=k+de,y.high=$+we+(k>>>0<de>>>0?1:0),V=w.low=V+Ve,w.high=H+Ue+(V>>>0<Ve>>>0?1:0),G=S.low=G+lr,S.high=Q+rt+(G>>>0<lr>>>0?1:0),B=C.low=B+Le,C.high=D+bn+(B>>>0<Le>>>0?1:0),K=P.low=K+vt,P.high=q+gt+(K>>>0<vt>>>0?1:0)},_doFinalize:function(){var f=this._data,p=f.words,m=this._nDataBytes*8,h=f.sigBytes*8;p[h>>>5]|=128<<24-h%32,p[(h+128>>>10<<5)+30]=Math.floor(m/4294967296),p[(h+128>>>10<<5)+31]=m,f.sigBytes=p.length*4,this._process();var b=this._hash.toX32();return b},clone:function(){var f=n.clone.call(this);return f._hash=this._hash.clone(),f},blockSize:1024/32});e.SHA512=n._createHelper(d),e.HmacSHA512=n._createHmacHelper(d)}(),t.SHA512})});var nPt=v((cne,rPt)=>{(function(t,e,r){typeof cne=="object"?rPt.exports=cne=e(Mn(),HV(),LAe()):typeof define=="function"&&define.amd?define(["./core","./x64-core","./sha512"],e):e(t.CryptoJS)})(cne,function(t){return function(){var e=t,r=e.x64,n=r.Word,o=r.WordArray,i=e.algo,a=i.SHA512,s=i.SHA384=a.extend({_doReset:function(){this._hash=new o.init([new n.init(3418070365,3238371032),new n.init(1654270250,914150663),new n.init(2438529370,812702999),new n.init(355462360,4144912697),new n.init(1731405415,4290775857),new n.init(2394180231,1750603025),new n.init(3675008525,1694076839),new n.init(1203062813,3204075428)])},_doFinalize:function(){var u=a._doFinalize.call(this);return u.sigBytes-=16,u}});e.SHA384=a._createHelper(s),e.HmacSHA384=a._createHmacHelper(s)}(),t.SHA384})});var iPt=v((dne,oPt)=>{(function(t,e,r){typeof dne=="object"?oPt.exports=dne=e(Mn(),HV()):typeof define=="function"&&define.amd?define(["./core","./x64-core"],e):e(t.CryptoJS)})(dne,function(t){return function(e){var r=t,n=r.lib,o=n.WordArray,i=n.Hasher,a=r.x64,s=a.Word,u=r.algo,l=[],c=[],d=[];(function(){for(var m=1,h=0,b=0;b<24;b++){l[m+5*h]=(b+1)*(b+2)/2%64;var g=h%5,y=(2*m+3*h)%5;m=g,h=y}for(var m=0;m<5;m++)for(var h=0;h<5;h++)c[m+5*h]=h+(2*m+3*h)%5*5;for(var w=1,S=0;S<24;S++){for(var C=0,P=0,E=0;E<7;E++){if(w&1){var A=(1<<E)-1;A<32?P^=1<<A:C^=1<<A-32}w&128?w=w<<1^113:w<<=1}d[S]=s.create(C,P)}})();var f=[];(function(){for(var m=0;m<25;m++)f[m]=s.create()})();var p=u.SHA3=i.extend({cfg:i.cfg.extend({outputLength:512}),_doReset:function(){for(var m=this._state=[],h=0;h<25;h++)m[h]=new s.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(m,h){for(var b=this._state,g=this.blockSize/2,y=0;y<g;y++){var w=m[h+2*y],S=m[h+2*y+1];w=(w<<8|w>>>24)&16711935|(w<<24|w>>>8)&4278255360,S=(S<<8|S>>>24)&16711935|(S<<24|S>>>8)&4278255360;var C=b[y];C.high^=S,C.low^=w}for(var P=0;P<24;P++){for(var E=0;E<5;E++){for(var A=0,I=0,R=0;R<5;R++){var C=b[E+5*R];A^=C.high,I^=C.low}var j=f[E];j.high=A,j.low=I}for(var E=0;E<5;E++)for(var N=f[(E+4)%5],$=f[(E+1)%5],k=$.high,H=$.low,A=N.high^(k<<1|H>>>31),I=N.low^(H<<1|k>>>31),R=0;R<5;R++){var C=b[E+5*R];C.high^=A,C.low^=I}for(var V=1;V<25;V++){var A,I,C=b[V],Q=C.high,G=C.low,D=l[V];D<32?(A=Q<<D|G>>>32-D,I=G<<D|Q>>>32-D):(A=G<<D-32|Q>>>64-D,I=Q<<D-32|G>>>64-D);var B=f[c[V]];B.high=A,B.low=I}var q=f[0],K=b[0];q.high=K.high,q.low=K.low;for(var E=0;E<5;E++)for(var R=0;R<5;R++){var V=E+5*R,C=b[V],U=f[V],te=f[(E+1)%5+5*R],z=f[(E+2)%5+5*R];C.high=U.high^~te.high&z.high,C.low=U.low^~te.low&z.low}var C=b[0],W=d[P];C.high^=W.high,C.low^=W.low}},_doFinalize:function(){var m=this._data,h=m.words,b=this._nDataBytes*8,g=m.sigBytes*8,y=this.blockSize*32;h[g>>>5]|=1<<24-g%32,h[(e.ceil((g+1)/y)*y>>>5)-1]|=128,m.sigBytes=h.length*4,this._process();for(var w=this._state,S=this.cfg.outputLength/8,C=S/8,P=[],E=0;E<C;E++){var A=w[E],I=A.high,R=A.low;I=(I<<8|I>>>24)&16711935|(I<<24|I>>>8)&4278255360,R=(R<<8|R>>>24)&16711935|(R<<24|R>>>8)&4278255360,P.push(R),P.push(I)}return new o.init(P,S)},clone:function(){for(var m=i.clone.call(this),h=m._state=this._state.slice(0),b=0;b<25;b++)h[b]=h[b].clone();return m}});r.SHA3=i._createHelper(p),r.HmacSHA3=i._createHmacHelper(p)}(Math),t.SHA3})});var sPt=v((fne,aPt)=>{(function(t,e){typeof fne=="object"?aPt.exports=fne=e(Mn()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(fne,function(t){return function(e){var r=t,n=r.lib,o=n.WordArray,i=n.Hasher,a=r.algo,s=o.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),u=o.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),l=o.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),c=o.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),d=o.create([0,1518500249,1859775393,2400959708,2840853838]),f=o.create([1352829926,1548603684,1836072691,2053994217,0]),p=a.RIPEMD160=i.extend({_doReset:function(){this._hash=o.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(S,C){for(var P=0;P<16;P++){var E=C+P,A=S[E];S[E]=(A<<8|A>>>24)&16711935|(A<<24|A>>>8)&4278255360}var I=this._hash.words,R=d.words,j=f.words,N=s.words,$=u.words,k=l.words,H=c.words,V,Q,G,D,B,q,K,U,te,z;q=V=I[0],K=Q=I[1],U=G=I[2],te=D=I[3],z=B=I[4];for(var W,P=0;P<80;P+=1)W=V+S[C+N[P]]|0,P<16?W+=m(Q,G,D)+R[0]:P<32?W+=h(Q,G,D)+R[1]:P<48?W+=b(Q,G,D)+R[2]:P<64?W+=g(Q,G,D)+R[3]:W+=y(Q,G,D)+R[4],W=W|0,W=w(W,k[P]),W=W+B|0,V=B,B=D,D=w(G,10),G=Q,Q=W,W=q+S[C+$[P]]|0,P<16?W+=y(K,U,te)+j[0]:P<32?W+=g(K,U,te)+j[1]:P<48?W+=b(K,U,te)+j[2]:P<64?W+=h(K,U,te)+j[3]:W+=m(K,U,te)+j[4],W=W|0,W=w(W,H[P]),W=W+z|0,q=z,z=te,te=w(U,10),U=K,K=W;W=I[1]+G+te|0,I[1]=I[2]+D+z|0,I[2]=I[3]+B+q|0,I[3]=I[4]+V+K|0,I[4]=I[0]+Q+U|0,I[0]=W},_doFinalize:function(){var S=this._data,C=S.words,P=this._nDataBytes*8,E=S.sigBytes*8;C[E>>>5]|=128<<24-E%32,C[(E+64>>>9<<4)+14]=(P<<8|P>>>24)&16711935|(P<<24|P>>>8)&4278255360,S.sigBytes=(C.length+1)*4,this._process();for(var A=this._hash,I=A.words,R=0;R<5;R++){var j=I[R];I[R]=(j<<8|j>>>24)&16711935|(j<<24|j>>>8)&4278255360}return A},clone:function(){var S=i.clone.call(this);return S._hash=this._hash.clone(),S}});function m(S,C,P){return S^C^P}function h(S,C,P){return S&C|~S&P}function b(S,C,P){return(S|~C)^P}function g(S,C,P){return S&P|C&~P}function y(S,C,P){return S^(C|~P)}function w(S,C){return S<<C|S>>>32-C}r.RIPEMD160=i._createHelper(p),r.HmacRIPEMD160=i._createHmacHelper(p)}(Math),t.RIPEMD160})});var mne=v((pne,uPt)=>{(function(t,e){typeof pne=="object"?uPt.exports=pne=e(Mn()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(pne,function(t){(function(){var e=t,r=e.lib,n=r.Base,o=e.enc,i=o.Utf8,a=e.algo,s=a.HMAC=n.extend({init:function(u,l){u=this._hasher=new u.init,typeof l=="string"&&(l=i.parse(l));var c=u.blockSize,d=c*4;l.sigBytes>d&&(l=u.finalize(l)),l.clamp();for(var f=this._oKey=l.clone(),p=this._iKey=l.clone(),m=f.words,h=p.words,b=0;b<c;b++)m[b]^=1549556828,h[b]^=909522486;f.sigBytes=p.sigBytes=d,this.reset()},reset:function(){var u=this._hasher;u.reset(),u.update(this._iKey)},update:function(u){return this._hasher.update(u),this},finalize:function(u){var l=this._hasher,c=l.finalize(u);l.reset();var d=l.finalize(this._oKey.clone().concat(c));return d}})})()})});var cPt=v((hne,lPt)=>{(function(t,e,r){typeof hne=="object"?lPt.exports=hne=e(Mn(),sne(),mne()):typeof define=="function"&&define.amd?define(["./core","./sha256","./hmac"],e):e(t.CryptoJS)})(hne,function(t){return function(){var e=t,r=e.lib,n=r.Base,o=r.WordArray,i=e.algo,a=i.SHA256,s=i.HMAC,u=i.PBKDF2=n.extend({cfg:n.extend({keySize:128/32,hasher:a,iterations:25e4}),init:function(l){this.cfg=this.cfg.extend(l)},compute:function(l,c){for(var d=this.cfg,f=s.create(d.hasher,l),p=o.create(),m=o.create([1]),h=p.words,b=m.words,g=d.keySize,y=d.iterations;h.length<g;){var w=f.update(c).finalize(m);f.reset();for(var S=w.words,C=S.length,P=w,E=1;E<y;E++){P=f.finalize(P),f.reset();for(var A=P.words,I=0;I<C;I++)S[I]^=A[I]}p.concat(w),b[0]++}return p.sigBytes=g*4,p}});e.PBKDF2=function(l,c,d){return u.create(d).compute(l,c)}}(),t.PBKDF2})});var AO=v((gne,dPt)=>{(function(t,e,r){typeof gne=="object"?dPt.exports=gne=e(Mn(),DAe(),mne()):typeof define=="function"&&define.amd?define(["./core","./sha1","./hmac"],e):e(t.CryptoJS)})(gne,function(t){return function(){var e=t,r=e.lib,n=r.Base,o=r.WordArray,i=e.algo,a=i.MD5,s=i.EvpKDF=n.extend({cfg:n.extend({keySize:128/32,hasher:a,iterations:1}),init:function(u){this.cfg=this.cfg.extend(u)},compute:function(u,l){for(var c,d=this.cfg,f=d.hasher.create(),p=o.create(),m=p.words,h=d.keySize,b=d.iterations;m.length<h;){c&&f.update(c),c=f.update(u).finalize(l),f.reset();for(var g=1;g<b;g++)c=f.finalize(c),f.reset();p.concat(c)}return p.sigBytes=h*4,p}});e.EvpKDF=function(u,l,c){return s.create(c).compute(u,l)}}(),t.EvpKDF})});var Ol=v((yne,fPt)=>{(function(t,e,r){typeof yne=="object"?fPt.exports=yne=e(Mn(),AO()):typeof define=="function"&&define.amd?define(["./core","./evpkdf"],e):e(t.CryptoJS)})(yne,function(t){t.lib.Cipher||function(e){var r=t,n=r.lib,o=n.Base,i=n.WordArray,a=n.BufferedBlockAlgorithm,s=r.enc,u=s.Utf8,l=s.Base64,c=r.algo,d=c.EvpKDF,f=n.Cipher=a.extend({cfg:o.extend(),createEncryptor:function(j,N){return this.create(this._ENC_XFORM_MODE,j,N)},createDecryptor:function(j,N){return this.create(this._DEC_XFORM_MODE,j,N)},init:function(j,N,$){this.cfg=this.cfg.extend($),this._xformMode=j,this._key=N,this.reset()},reset:function(){a.reset.call(this),this._doReset()},process:function(j){return this._append(j),this._process()},finalize:function(j){j&&this._append(j);var N=this._doFinalize();return N},keySize:128/32,ivSize:128/32,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function j(N){return typeof N=="string"?R:E}return function(N){return{encrypt:function($,k,H){return j(k).encrypt(N,$,k,H)},decrypt:function($,k,H){return j(k).decrypt(N,$,k,H)}}}}()}),p=n.StreamCipher=f.extend({_doFinalize:function(){var j=this._process(!0);return j},blockSize:1}),m=r.mode={},h=n.BlockCipherMode=o.extend({createEncryptor:function(j,N){return this.Encryptor.create(j,N)},createDecryptor:function(j,N){return this.Decryptor.create(j,N)},init:function(j,N){this._cipher=j,this._iv=N}}),b=m.CBC=function(){var j=h.extend();j.Encryptor=j.extend({processBlock:function($,k){var H=this._cipher,V=H.blockSize;N.call(this,$,k,V),H.encryptBlock($,k),this._prevBlock=$.slice(k,k+V)}}),j.Decryptor=j.extend({processBlock:function($,k){var H=this._cipher,V=H.blockSize,Q=$.slice(k,k+V);H.decryptBlock($,k),N.call(this,$,k,V),this._prevBlock=Q}});function N($,k,H){var V,Q=this._iv;Q?(V=Q,this._iv=e):V=this._prevBlock;for(var G=0;G<H;G++)$[k+G]^=V[G]}return j}(),g=r.pad={},y=g.Pkcs7={pad:function(j,N){for(var $=N*4,k=$-j.sigBytes%$,H=k<<24|k<<16|k<<8|k,V=[],Q=0;Q<k;Q+=4)V.push(H);var G=i.create(V,k);j.concat(G)},unpad:function(j){var N=j.words[j.sigBytes-1>>>2]&255;j.sigBytes-=N}},w=n.BlockCipher=f.extend({cfg:f.cfg.extend({mode:b,padding:y}),reset:function(){var j;f.reset.call(this);var N=this.cfg,$=N.iv,k=N.mode;this._xformMode==this._ENC_XFORM_MODE?j=k.createEncryptor:(j=k.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==j?this._mode.init(this,$&&$.words):(this._mode=j.call(k,this,$&&$.words),this._mode.__creator=j)},_doProcessBlock:function(j,N){this._mode.processBlock(j,N)},_doFinalize:function(){var j,N=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(N.pad(this._data,this.blockSize),j=this._process(!0)):(j=this._process(!0),N.unpad(j)),j},blockSize:128/32}),S=n.CipherParams=o.extend({init:function(j){this.mixIn(j)},toString:function(j){return(j||this.formatter).stringify(this)}}),C=r.format={},P=C.OpenSSL={stringify:function(j){var N,$=j.ciphertext,k=j.salt;return k?N=i.create([1398893684,1701076831]).concat(k).concat($):N=$,N.toString(l)},parse:function(j){var N,$=l.parse(j),k=$.words;return k[0]==1398893684&&k[1]==1701076831&&(N=i.create(k.slice(2,4)),k.splice(0,4),$.sigBytes-=16),S.create({ciphertext:$,salt:N})}},E=n.SerializableCipher=o.extend({cfg:o.extend({format:P}),encrypt:function(j,N,$,k){k=this.cfg.extend(k);var H=j.createEncryptor($,k),V=H.finalize(N),Q=H.cfg;return S.create({ciphertext:V,key:$,iv:Q.iv,algorithm:j,mode:Q.mode,padding:Q.padding,blockSize:j.blockSize,formatter:k.format})},decrypt:function(j,N,$,k){k=this.cfg.extend(k),N=this._parse(N,k.format);var H=j.createDecryptor($,k).finalize(N.ciphertext);return H},_parse:function(j,N){return typeof j=="string"?N.parse(j,this):j}}),A=r.kdf={},I=A.OpenSSL={execute:function(j,N,$,k,H){if(k||(k=i.random(64/8)),H)var V=d.create({keySize:N+$,hasher:H}).compute(j,k);else var V=d.create({keySize:N+$}).compute(j,k);var Q=i.create(V.words.slice(N),$*4);return V.sigBytes=N*4,S.create({key:V,iv:Q,salt:k})}},R=n.PasswordBasedCipher=E.extend({cfg:E.cfg.extend({kdf:I}),encrypt:function(j,N,$,k){k=this.cfg.extend(k);var H=k.kdf.execute($,j.keySize,j.ivSize,k.salt,k.hasher);k.iv=H.iv;var V=E.encrypt.call(this,j,N,H.key,k);return V.mixIn(H),V},decrypt:function(j,N,$,k){k=this.cfg.extend(k),N=this._parse(N,k.format);var H=k.kdf.execute($,j.keySize,j.ivSize,N.salt,k.hasher);k.iv=H.iv;var V=E.decrypt.call(this,j,N,H.key,k);return V}})}()})});var mPt=v((bne,pPt)=>{(function(t,e,r){typeof bne=="object"?pPt.exports=bne=e(Mn(),Ol()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(bne,function(t){return t.mode.CFB=function(){var e=t.lib.BlockCipherMode.extend();e.Encryptor=e.extend({processBlock:function(n,o){var i=this._cipher,a=i.blockSize;r.call(this,n,o,a,i),this._prevBlock=n.slice(o,o+a)}}),e.Decryptor=e.extend({processBlock:function(n,o){var i=this._cipher,a=i.blockSize,s=n.slice(o,o+a);r.call(this,n,o,a,i),this._prevBlock=s}});function r(n,o,i,a){var s,u=this._iv;u?(s=u.slice(0),this._iv=void 0):s=this._prevBlock,a.encryptBlock(s,0);for(var l=0;l<i;l++)n[o+l]^=s[l]}return e}(),t.mode.CFB})});var gPt=v((_ne,hPt)=>{(function(t,e,r){typeof _ne=="object"?hPt.exports=_ne=e(Mn(),Ol()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(_ne,function(t){return t.mode.CTR=function(){var e=t.lib.BlockCipherMode.extend(),r=e.Encryptor=e.extend({processBlock:function(n,o){var i=this._cipher,a=i.blockSize,s=this._iv,u=this._counter;s&&(u=this._counter=s.slice(0),this._iv=void 0);var l=u.slice(0);i.encryptBlock(l,0),u[a-1]=u[a-1]+1|0;for(var c=0;c<a;c++)n[o+c]^=l[c]}});return e.Decryptor=r,e}(),t.mode.CTR})});var bPt=v((vne,yPt)=>{(function(t,e,r){typeof vne=="object"?yPt.exports=vne=e(Mn(),Ol()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(vne,function(t){return t.mode.CTRGladman=function(){var e=t.lib.BlockCipherMode.extend();function r(i){if((i>>24&255)===255){var a=i>>16&255,s=i>>8&255,u=i&255;a===255?(a=0,s===255?(s=0,u===255?u=0:++u):++s):++a,i=0,i+=a<<16,i+=s<<8,i+=u}else i+=1<<24;return i}function n(i){return(i[0]=r(i[0]))===0&&(i[1]=r(i[1])),i}var o=e.Encryptor=e.extend({processBlock:function(i,a){var s=this._cipher,u=s.blockSize,l=this._iv,c=this._counter;l&&(c=this._counter=l.slice(0),this._iv=void 0),n(c);var d=c.slice(0);s.encryptBlock(d,0);for(var f=0;f<u;f++)i[a+f]^=d[f]}});return e.Decryptor=o,e}(),t.mode.CTRGladman})});var vPt=v((wne,_Pt)=>{(function(t,e,r){typeof wne=="object"?_Pt.exports=wne=e(Mn(),Ol()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(wne,function(t){return t.mode.OFB=function(){var e=t.lib.BlockCipherMode.extend(),r=e.Encryptor=e.extend({processBlock:function(n,o){var i=this._cipher,a=i.blockSize,s=this._iv,u=this._keystream;s&&(u=this._keystream=s.slice(0),this._iv=void 0),i.encryptBlock(u,0);for(var l=0;l<a;l++)n[o+l]^=u[l]}});return e.Decryptor=r,e}(),t.mode.OFB})});var SPt=v((Sne,wPt)=>{(function(t,e,r){typeof Sne=="object"?wPt.exports=Sne=e(Mn(),Ol()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(Sne,function(t){return t.mode.ECB=function(){var e=t.lib.BlockCipherMode.extend();return e.Encryptor=e.extend({processBlock:function(r,n){this._cipher.encryptBlock(r,n)}}),e.Decryptor=e.extend({processBlock:function(r,n){this._cipher.decryptBlock(r,n)}}),e}(),t.mode.ECB})});var CPt=v((xne,xPt)=>{(function(t,e,r){typeof xne=="object"?xPt.exports=xne=e(Mn(),Ol()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(xne,function(t){return t.pad.AnsiX923={pad:function(e,r){var n=e.sigBytes,o=r*4,i=o-n%o,a=n+i-1;e.clamp(),e.words[a>>>2]|=i<<24-a%4*8,e.sigBytes+=i},unpad:function(e){var r=e.words[e.sigBytes-1>>>2]&255;e.sigBytes-=r}},t.pad.Ansix923})});var PPt=v((Cne,OPt)=>{(function(t,e,r){typeof Cne=="object"?OPt.exports=Cne=e(Mn(),Ol()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(Cne,function(t){return t.pad.Iso10126={pad:function(e,r){var n=r*4,o=n-e.sigBytes%n;e.concat(t.lib.WordArray.random(o-1)).concat(t.lib.WordArray.create([o<<24],1))},unpad:function(e){var r=e.words[e.sigBytes-1>>>2]&255;e.sigBytes-=r}},t.pad.Iso10126})});var TPt=v((One,EPt)=>{(function(t,e,r){typeof One=="object"?EPt.exports=One=e(Mn(),Ol()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(One,function(t){return t.pad.Iso97971={pad:function(e,r){e.concat(t.lib.WordArray.create([2147483648],1)),t.pad.ZeroPadding.pad(e,r)},unpad:function(e){t.pad.ZeroPadding.unpad(e),e.sigBytes--}},t.pad.Iso97971})});var IPt=v((Pne,APt)=>{(function(t,e,r){typeof Pne=="object"?APt.exports=Pne=e(Mn(),Ol()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(Pne,function(t){return t.pad.ZeroPadding={pad:function(e,r){var n=r*4;e.clamp(),e.sigBytes+=n-(e.sigBytes%n||n)},unpad:function(e){for(var r=e.words,n=e.sigBytes-1,n=e.sigBytes-1;n>=0;n--)if(r[n>>>2]>>>24-n%4*8&255){e.sigBytes=n+1;break}}},t.pad.ZeroPadding})});var RPt=v((Ene,MPt)=>{(function(t,e,r){typeof Ene=="object"?MPt.exports=Ene=e(Mn(),Ol()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(Ene,function(t){return t.pad.NoPadding={pad:function(){},unpad:function(){}},t.pad.NoPadding})});var NPt=v((Tne,jPt)=>{(function(t,e,r){typeof Tne=="object"?jPt.exports=Tne=e(Mn(),Ol()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(Tne,function(t){return function(e){var r=t,n=r.lib,o=n.CipherParams,i=r.enc,a=i.Hex,s=r.format,u=s.Hex={stringify:function(l){return l.ciphertext.toString(a)},parse:function(l){var c=a.parse(l);return o.create({ciphertext:c})}}}(),t.format.Hex})});var LPt=v((Ane,DPt)=>{(function(t,e,r){typeof Ane=="object"?DPt.exports=Ane=e(Mn(),PA(),EA(),AO(),Ol()):typeof define=="function"&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],e):e(t.CryptoJS)})(Ane,function(t){return function(){var e=t,r=e.lib,n=r.BlockCipher,o=e.algo,i=[],a=[],s=[],u=[],l=[],c=[],d=[],f=[],p=[],m=[];(function(){for(var g=[],y=0;y<256;y++)y<128?g[y]=y<<1:g[y]=y<<1^283;for(var w=0,S=0,y=0;y<256;y++){var C=S^S<<1^S<<2^S<<3^S<<4;C=C>>>8^C&255^99,i[w]=C,a[C]=w;var P=g[w],E=g[P],A=g[E],I=g[C]*257^C*16843008;s[w]=I<<24|I>>>8,u[w]=I<<16|I>>>16,l[w]=I<<8|I>>>24,c[w]=I;var I=A*16843009^E*65537^P*257^w*16843008;d[C]=I<<24|I>>>8,f[C]=I<<16|I>>>16,p[C]=I<<8|I>>>24,m[C]=I,w?(w=P^g[g[g[A^P]]],S^=g[g[S]]):w=S=1}})();var h=[0,1,2,4,8,16,32,64,128,27,54],b=o.AES=n.extend({_doReset:function(){var g;if(!(this._nRounds&&this._keyPriorReset===this._key)){for(var y=this._keyPriorReset=this._key,w=y.words,S=y.sigBytes/4,C=this._nRounds=S+6,P=(C+1)*4,E=this._keySchedule=[],A=0;A<P;A++)A<S?E[A]=w[A]:(g=E[A-1],A%S?S>6&&A%S==4&&(g=i[g>>>24]<<24|i[g>>>16&255]<<16|i[g>>>8&255]<<8|i[g&255]):(g=g<<8|g>>>24,g=i[g>>>24]<<24|i[g>>>16&255]<<16|i[g>>>8&255]<<8|i[g&255],g^=h[A/S|0]<<24),E[A]=E[A-S]^g);for(var I=this._invKeySchedule=[],R=0;R<P;R++){var A=P-R;if(R%4)var g=E[A];else var g=E[A-4];R<4||A<=4?I[R]=g:I[R]=d[i[g>>>24]]^f[i[g>>>16&255]]^p[i[g>>>8&255]]^m[i[g&255]]}}},encryptBlock:function(g,y){this._doCryptBlock(g,y,this._keySchedule,s,u,l,c,i)},decryptBlock:function(g,y){var w=g[y+1];g[y+1]=g[y+3],g[y+3]=w,this._doCryptBlock(g,y,this._invKeySchedule,d,f,p,m,a);var w=g[y+1];g[y+1]=g[y+3],g[y+3]=w},_doCryptBlock:function(g,y,w,S,C,P,E,A){for(var I=this._nRounds,R=g[y]^w[0],j=g[y+1]^w[1],N=g[y+2]^w[2],$=g[y+3]^w[3],k=4,H=1;H<I;H++){var V=S[R>>>24]^C[j>>>16&255]^P[N>>>8&255]^E[$&255]^w[k++],Q=S[j>>>24]^C[N>>>16&255]^P[$>>>8&255]^E[R&255]^w[k++],G=S[N>>>24]^C[$>>>16&255]^P[R>>>8&255]^E[j&255]^w[k++],D=S[$>>>24]^C[R>>>16&255]^P[j>>>8&255]^E[N&255]^w[k++];R=V,j=Q,N=G,$=D}var V=(A[R>>>24]<<24|A[j>>>16&255]<<16|A[N>>>8&255]<<8|A[$&255])^w[k++],Q=(A[j>>>24]<<24|A[N>>>16&255]<<16|A[$>>>8&255]<<8|A[R&255])^w[k++],G=(A[N>>>24]<<24|A[$>>>16&255]<<16|A[R>>>8&255]<<8|A[j&255])^w[k++],D=(A[$>>>24]<<24|A[R>>>16&255]<<16|A[j>>>8&255]<<8|A[N&255])^w[k++];g[y]=V,g[y+1]=Q,g[y+2]=G,g[y+3]=D},keySize:256/32});e.AES=n._createHelper(b)}(),t.AES})});var kPt=v((Ine,FPt)=>{(function(t,e,r){typeof Ine=="object"?FPt.exports=Ine=e(Mn(),PA(),EA(),AO(),Ol()):typeof define=="function"&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],e):e(t.CryptoJS)})(Ine,function(t){return function(){var e=t,r=e.lib,n=r.WordArray,o=r.BlockCipher,i=e.algo,a=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],s=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],u=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],l=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],c=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],d=i.DES=o.extend({_doReset:function(){for(var h=this._key,b=h.words,g=[],y=0;y<56;y++){var w=a[y]-1;g[y]=b[w>>>5]>>>31-w%32&1}for(var S=this._subKeys=[],C=0;C<16;C++){for(var P=S[C]=[],E=u[C],y=0;y<24;y++)P[y/6|0]|=g[(s[y]-1+E)%28]<<31-y%6,P[4+(y/6|0)]|=g[28+(s[y+24]-1+E)%28]<<31-y%6;P[0]=P[0]<<1|P[0]>>>31;for(var y=1;y<7;y++)P[y]=P[y]>>>(y-1)*4+3;P[7]=P[7]<<5|P[7]>>>27}for(var A=this._invSubKeys=[],y=0;y<16;y++)A[y]=S[15-y]},encryptBlock:function(h,b){this._doCryptBlock(h,b,this._subKeys)},decryptBlock:function(h,b){this._doCryptBlock(h,b,this._invSubKeys)},_doCryptBlock:function(h,b,g){this._lBlock=h[b],this._rBlock=h[b+1],f.call(this,4,252645135),f.call(this,16,65535),p.call(this,2,858993459),p.call(this,8,16711935),f.call(this,1,1431655765);for(var y=0;y<16;y++){for(var w=g[y],S=this._lBlock,C=this._rBlock,P=0,E=0;E<8;E++)P|=l[E][((C^w[E])&c[E])>>>0];this._lBlock=C,this._rBlock=S^P}var A=this._lBlock;this._lBlock=this._rBlock,this._rBlock=A,f.call(this,1,1431655765),p.call(this,8,16711935),p.call(this,2,858993459),f.call(this,16,65535),f.call(this,4,252645135),h[b]=this._lBlock,h[b+1]=this._rBlock},keySize:64/32,ivSize:64/32,blockSize:64/32});function f(h,b){var g=(this._lBlock>>>h^this._rBlock)&b;this._rBlock^=g,this._lBlock^=g<<h}function p(h,b){var g=(this._rBlock>>>h^this._lBlock)&b;this._lBlock^=g,this._rBlock^=g<<h}e.DES=o._createHelper(d);var m=i.TripleDES=o.extend({_doReset:function(){var h=this._key,b=h.words;if(b.length!==2&&b.length!==4&&b.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var g=b.slice(0,2),y=b.length<4?b.slice(0,2):b.slice(2,4),w=b.length<6?b.slice(0,2):b.slice(4,6);this._des1=d.createEncryptor(n.create(g)),this._des2=d.createEncryptor(n.create(y)),this._des3=d.createEncryptor(n.create(w))},encryptBlock:function(h,b){this._des1.encryptBlock(h,b),this._des2.decryptBlock(h,b),this._des3.encryptBlock(h,b)},decryptBlock:function(h,b){this._des3.decryptBlock(h,b),this._des2.encryptBlock(h,b),this._des1.decryptBlock(h,b)},keySize:192/32,ivSize:64/32,blockSize:64/32});e.TripleDES=o._createHelper(m)}(),t.TripleDES})});var BPt=v((Mne,$Pt)=>{(function(t,e,r){typeof Mne=="object"?$Pt.exports=Mne=e(Mn(),PA(),EA(),AO(),Ol()):typeof define=="function"&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],e):e(t.CryptoJS)})(Mne,function(t){return function(){var e=t,r=e.lib,n=r.StreamCipher,o=e.algo,i=o.RC4=n.extend({_doReset:function(){for(var u=this._key,l=u.words,c=u.sigBytes,d=this._S=[],f=0;f<256;f++)d[f]=f;for(var f=0,p=0;f<256;f++){var m=f%c,h=l[m>>>2]>>>24-m%4*8&255;p=(p+d[f]+h)%256;var b=d[f];d[f]=d[p],d[p]=b}this._i=this._j=0},_doProcessBlock:function(u,l){u[l]^=a.call(this)},keySize:256/32,ivSize:0});function a(){for(var u=this._S,l=this._i,c=this._j,d=0,f=0;f<4;f++){l=(l+1)%256,c=(c+u[l])%256;var p=u[l];u[l]=u[c],u[c]=p,d|=u[(u[l]+u[c])%256]<<24-f*8}return this._i=l,this._j=c,d}e.RC4=n._createHelper(i);var s=o.RC4Drop=i.extend({cfg:i.cfg.extend({drop:192}),_doReset:function(){i._doReset.call(this);for(var u=this.cfg.drop;u>0;u--)a.call(this)}});e.RC4Drop=n._createHelper(s)}(),t.RC4})});var UPt=v((Rne,qPt)=>{(function(t,e,r){typeof Rne=="object"?qPt.exports=Rne=e(Mn(),PA(),EA(),AO(),Ol()):typeof define=="function"&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],e):e(t.CryptoJS)})(Rne,function(t){return function(){var e=t,r=e.lib,n=r.StreamCipher,o=e.algo,i=[],a=[],s=[],u=o.Rabbit=n.extend({_doReset:function(){for(var c=this._key.words,d=this.cfg.iv,f=0;f<4;f++)c[f]=(c[f]<<8|c[f]>>>24)&16711935|(c[f]<<24|c[f]>>>8)&4278255360;var p=this._X=[c[0],c[3]<<16|c[2]>>>16,c[1],c[0]<<16|c[3]>>>16,c[2],c[1]<<16|c[0]>>>16,c[3],c[2]<<16|c[1]>>>16],m=this._C=[c[2]<<16|c[2]>>>16,c[0]&4294901760|c[1]&65535,c[3]<<16|c[3]>>>16,c[1]&4294901760|c[2]&65535,c[0]<<16|c[0]>>>16,c[2]&4294901760|c[3]&65535,c[1]<<16|c[1]>>>16,c[3]&4294901760|c[0]&65535];this._b=0;for(var f=0;f<4;f++)l.call(this);for(var f=0;f<8;f++)m[f]^=p[f+4&7];if(d){var h=d.words,b=h[0],g=h[1],y=(b<<8|b>>>24)&16711935|(b<<24|b>>>8)&4278255360,w=(g<<8|g>>>24)&16711935|(g<<24|g>>>8)&4278255360,S=y>>>16|w&4294901760,C=w<<16|y&65535;m[0]^=y,m[1]^=S,m[2]^=w,m[3]^=C,m[4]^=y,m[5]^=S,m[6]^=w,m[7]^=C;for(var f=0;f<4;f++)l.call(this)}},_doProcessBlock:function(c,d){var f=this._X;l.call(this),i[0]=f[0]^f[5]>>>16^f[3]<<16,i[1]=f[2]^f[7]>>>16^f[5]<<16,i[2]=f[4]^f[1]>>>16^f[7]<<16,i[3]=f[6]^f[3]>>>16^f[1]<<16;for(var p=0;p<4;p++)i[p]=(i[p]<<8|i[p]>>>24)&16711935|(i[p]<<24|i[p]>>>8)&4278255360,c[d+p]^=i[p]},blockSize:128/32,ivSize:64/32});function l(){for(var c=this._X,d=this._C,f=0;f<8;f++)a[f]=d[f];d[0]=d[0]+1295307597+this._b|0,d[1]=d[1]+3545052371+(d[0]>>>0<a[0]>>>0?1:0)|0,d[2]=d[2]+886263092+(d[1]>>>0<a[1]>>>0?1:0)|0,d[3]=d[3]+1295307597+(d[2]>>>0<a[2]>>>0?1:0)|0,d[4]=d[4]+3545052371+(d[3]>>>0<a[3]>>>0?1:0)|0,d[5]=d[5]+886263092+(d[4]>>>0<a[4]>>>0?1:0)|0,d[6]=d[6]+1295307597+(d[5]>>>0<a[5]>>>0?1:0)|0,d[7]=d[7]+3545052371+(d[6]>>>0<a[6]>>>0?1:0)|0,this._b=d[7]>>>0<a[7]>>>0?1:0;for(var f=0;f<8;f++){var p=c[f]+d[f],m=p&65535,h=p>>>16,b=((m*m>>>17)+m*h>>>15)+h*h,g=((p&4294901760)*p|0)+((p&65535)*p|0);s[f]=b^g}c[0]=s[0]+(s[7]<<16|s[7]>>>16)+(s[6]<<16|s[6]>>>16)|0,c[1]=s[1]+(s[0]<<8|s[0]>>>24)+s[7]|0,c[2]=s[2]+(s[1]<<16|s[1]>>>16)+(s[0]<<16|s[0]>>>16)|0,c[3]=s[3]+(s[2]<<8|s[2]>>>24)+s[1]|0,c[4]=s[4]+(s[3]<<16|s[3]>>>16)+(s[2]<<16|s[2]>>>16)|0,c[5]=s[5]+(s[4]<<8|s[4]>>>24)+s[3]|0,c[6]=s[6]+(s[5]<<16|s[5]>>>16)+(s[4]<<16|s[4]>>>16)|0,c[7]=s[7]+(s[6]<<8|s[6]>>>24)+s[5]|0}e.Rabbit=n._createHelper(u)}(),t.Rabbit})});var HPt=v((jne,zPt)=>{(function(t,e,r){typeof jne=="object"?zPt.exports=jne=e(Mn(),PA(),EA(),AO(),Ol()):typeof define=="function"&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],e):e(t.CryptoJS)})(jne,function(t){return function(){var e=t,r=e.lib,n=r.StreamCipher,o=e.algo,i=[],a=[],s=[],u=o.RabbitLegacy=n.extend({_doReset:function(){var c=this._key.words,d=this.cfg.iv,f=this._X=[c[0],c[3]<<16|c[2]>>>16,c[1],c[0]<<16|c[3]>>>16,c[2],c[1]<<16|c[0]>>>16,c[3],c[2]<<16|c[1]>>>16],p=this._C=[c[2]<<16|c[2]>>>16,c[0]&4294901760|c[1]&65535,c[3]<<16|c[3]>>>16,c[1]&4294901760|c[2]&65535,c[0]<<16|c[0]>>>16,c[2]&4294901760|c[3]&65535,c[1]<<16|c[1]>>>16,c[3]&4294901760|c[0]&65535];this._b=0;for(var m=0;m<4;m++)l.call(this);for(var m=0;m<8;m++)p[m]^=f[m+4&7];if(d){var h=d.words,b=h[0],g=h[1],y=(b<<8|b>>>24)&16711935|(b<<24|b>>>8)&4278255360,w=(g<<8|g>>>24)&16711935|(g<<24|g>>>8)&4278255360,S=y>>>16|w&4294901760,C=w<<16|y&65535;p[0]^=y,p[1]^=S,p[2]^=w,p[3]^=C,p[4]^=y,p[5]^=S,p[6]^=w,p[7]^=C;for(var m=0;m<4;m++)l.call(this)}},_doProcessBlock:function(c,d){var f=this._X;l.call(this),i[0]=f[0]^f[5]>>>16^f[3]<<16,i[1]=f[2]^f[7]>>>16^f[5]<<16,i[2]=f[4]^f[1]>>>16^f[7]<<16,i[3]=f[6]^f[3]>>>16^f[1]<<16;for(var p=0;p<4;p++)i[p]=(i[p]<<8|i[p]>>>24)&16711935|(i[p]<<24|i[p]>>>8)&4278255360,c[d+p]^=i[p]},blockSize:128/32,ivSize:64/32});function l(){for(var c=this._X,d=this._C,f=0;f<8;f++)a[f]=d[f];d[0]=d[0]+1295307597+this._b|0,d[1]=d[1]+3545052371+(d[0]>>>0<a[0]>>>0?1:0)|0,d[2]=d[2]+886263092+(d[1]>>>0<a[1]>>>0?1:0)|0,d[3]=d[3]+1295307597+(d[2]>>>0<a[2]>>>0?1:0)|0,d[4]=d[4]+3545052371+(d[3]>>>0<a[3]>>>0?1:0)|0,d[5]=d[5]+886263092+(d[4]>>>0<a[4]>>>0?1:0)|0,d[6]=d[6]+1295307597+(d[5]>>>0<a[5]>>>0?1:0)|0,d[7]=d[7]+3545052371+(d[6]>>>0<a[6]>>>0?1:0)|0,this._b=d[7]>>>0<a[7]>>>0?1:0;for(var f=0;f<8;f++){var p=c[f]+d[f],m=p&65535,h=p>>>16,b=((m*m>>>17)+m*h>>>15)+h*h,g=((p&4294901760)*p|0)+((p&65535)*p|0);s[f]=b^g}c[0]=s[0]+(s[7]<<16|s[7]>>>16)+(s[6]<<16|s[6]>>>16)|0,c[1]=s[1]+(s[0]<<8|s[0]>>>24)+s[7]|0,c[2]=s[2]+(s[1]<<16|s[1]>>>16)+(s[0]<<16|s[0]>>>16)|0,c[3]=s[3]+(s[2]<<8|s[2]>>>24)+s[1]|0,c[4]=s[4]+(s[3]<<16|s[3]>>>16)+(s[2]<<16|s[2]>>>16)|0,c[5]=s[5]+(s[4]<<8|s[4]>>>24)+s[3]|0,c[6]=s[6]+(s[5]<<16|s[5]>>>16)+(s[4]<<16|s[4]>>>16)|0,c[7]=s[7]+(s[6]<<8|s[6]>>>24)+s[5]|0}e.RabbitLegacy=n._createHelper(u)}(),t.RabbitLegacy})});var WPt=v((Nne,VPt)=>{(function(t,e,r){typeof Nne=="object"?VPt.exports=Nne=e(Mn(),PA(),EA(),AO(),Ol()):typeof define=="function"&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],e):e(t.CryptoJS)})(Nne,function(t){return function(){var e=t,r=e.lib,n=r.BlockCipher,o=e.algo;let i=16,a=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],s=[[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946],[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055],[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504],[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462]];var u={pbox:[],sbox:[]};function l(m,h){let b=h>>24&255,g=h>>16&255,y=h>>8&255,w=h&255,S=m.sbox[0][b]+m.sbox[1][g];return S=S^m.sbox[2][y],S=S+m.sbox[3][w],S}function c(m,h,b){let g=h,y=b,w;for(let S=0;S<i;++S)g=g^m.pbox[S],y=l(m,g)^y,w=g,g=y,y=w;return w=g,g=y,y=w,y=y^m.pbox[i],g=g^m.pbox[i+1],{left:g,right:y}}function d(m,h,b){let g=h,y=b,w;for(let S=i+1;S>1;--S)g=g^m.pbox[S],y=l(m,g)^y,w=g,g=y,y=w;return w=g,g=y,y=w,y=y^m.pbox[1],g=g^m.pbox[0],{left:g,right:y}}function f(m,h,b){for(let C=0;C<4;C++){m.sbox[C]=[];for(let P=0;P<256;P++)m.sbox[C][P]=s[C][P]}let g=0;for(let C=0;C<i+2;C++)m.pbox[C]=a[C]^h[g],g++,g>=b&&(g=0);let y=0,w=0,S=0;for(let C=0;C<i+2;C+=2)S=c(m,y,w),y=S.left,w=S.right,m.pbox[C]=y,m.pbox[C+1]=w;for(let C=0;C<4;C++)for(let P=0;P<256;P+=2)S=c(m,y,w),y=S.left,w=S.right,m.sbox[C][P]=y,m.sbox[C][P+1]=w;return!0}var p=o.Blowfish=n.extend({_doReset:function(){if(this._keyPriorReset!==this._key){var m=this._keyPriorReset=this._key,h=m.words,b=m.sigBytes/4;f(u,h,b)}},encryptBlock:function(m,h){var b=c(u,m[h],m[h+1]);m[h]=b.left,m[h+1]=b.right},decryptBlock:function(m,h){var b=d(u,m[h],m[h+1]);m[h]=b.left,m[h+1]=b.right},blockSize:64/32,keySize:128/32,ivSize:64/32});e.Blowfish=n._createHelper(p)}(),t.Blowfish})});var jB=v((Dne,KPt)=>{(function(t,e,r){typeof Dne=="object"?KPt.exports=Dne=e(Mn(),HV(),HOt(),WOt(),PA(),JOt(),EA(),DAe(),sne(),ePt(),LAe(),nPt(),iPt(),sPt(),mne(),cPt(),AO(),Ol(),mPt(),gPt(),bPt(),vPt(),SPt(),CPt(),PPt(),TPt(),IPt(),RPt(),NPt(),LPt(),kPt(),BPt(),UPt(),HPt(),WPt()):typeof define=="function"&&define.amd?define(["./core","./x64-core","./lib-typedarrays","./enc-utf16","./enc-base64","./enc-base64url","./md5","./sha1","./sha256","./sha224","./sha512","./sha384","./sha3","./ripemd160","./hmac","./pbkdf2","./evpkdf","./cipher-core","./mode-cfb","./mode-ctr","./mode-ctr-gladman","./mode-ofb","./mode-ecb","./pad-ansix923","./pad-iso10126","./pad-iso97971","./pad-zeropadding","./pad-nopadding","./format-hex","./aes","./tripledes","./rc4","./rabbit","./rabbit-legacy","./blowfish"],e):t.CryptoJS=e(t.CryptoJS)})(Dne,function(t){return t})});var MO,QPt=O(()=>{MO=class{constructor(e){Object.defineProperty(this,"pageContent",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.pageContent=e.pageContent!==void 0?e.pageContent.toString():"",this.metadata=e.metadata??{},this.id=e.id}}});var KAe=v((RLo,uEt)=>{var b8r="Expected a function",aEt=NaN,_8r="[object Symbol]",v8r=/^\s+|\s+$/g,w8r=/^[-+]0x[0-9a-f]+$/i,S8r=/^0b[01]+$/i,x8r=/^0o[0-7]+$/i,C8r=parseInt,O8r=typeof window=="object"&&window&&window.Object===Object&&window,P8r=typeof self=="object"&&self&&self.Object===Object&&self,E8r=O8r||P8r||Function("return this")(),T8r=Object.prototype,A8r=T8r.toString,I8r=Math.max,M8r=Math.min,VAe=function(){return E8r.Date.now()};function R8r(t,e,r){var n,o,i,a,s,u,l=0,c=!1,d=!1,f=!0;if(typeof t!="function")throw new TypeError(b8r);e=sEt(e)||0,WAe(r)&&(c=!!r.leading,d="maxWait"in r,i=d?I8r(sEt(r.maxWait)||0,e):i,f="trailing"in r?!!r.trailing:f);function p(P){var E=n,A=o;return n=o=void 0,l=P,a=t.apply(A,E),a}function m(P){return l=P,s=setTimeout(g,e),c?p(P):a}function h(P){var E=P-u,A=P-l,I=e-E;return d?M8r(I,i-A):I}function b(P){var E=P-u,A=P-l;return u===void 0||E>=e||E<0||d&&A>=i}function g(){var P=VAe();if(b(P))return y(P);s=setTimeout(g,h(P))}function y(P){return s=void 0,f&&n?p(P):(n=o=void 0,a)}function w(){s!==void 0&&clearTimeout(s),l=0,n=u=o=s=void 0}function S(){return s===void 0?a:y(VAe())}function C(){var P=VAe(),E=b(P);if(n=arguments,o=this,u=P,E){if(s===void 0)return m(u);if(d)return s=setTimeout(g,e),p(u)}return s===void 0&&(s=setTimeout(g,e)),a}return C.cancel=w,C.flush=S,C}function WAe(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}function j8r(t){return!!t&&typeof t=="object"}function N8r(t){return typeof t=="symbol"||j8r(t)&&A8r.call(t)==_8r}function sEt(t){if(typeof t=="number")return t;if(N8r(t))return aEt;if(WAe(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=WAe(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=t.replace(v8r,"");var r=S8r.test(t);return r||x8r.test(t)?C8r(t.slice(2),r?2:8):w8r.test(t)?aEt:+t}uEt.exports=R8r});var yEt=v((eIe,tIe)=>{(function(t,e){typeof eIe=="object"&&typeof tIe<"u"?tIe.exports=e():typeof define=="function"&&define.amd?define(e):(t=typeof globalThis<"u"?globalThis:t||self).dayjs_plugin_quarterOfYear=e()})(eIe,function(){"use strict";var t="month",e="quarter";return function(r,n){var o=n.prototype;o.quarter=function(s){return this.$utils().u(s)?Math.ceil((this.month()+1)/3):this.month(this.month()%3+3*(s-1))};var i=o.add;o.add=function(s,u){return s=Number(s),this.$utils().p(u)===e?this.add(3*s,t):i.bind(this)(s,u)};var a=o.startOf;o.startOf=function(s,u){var l=this.$utils(),c=!!l.u(u)||u;if(l.p(s)===e){var d=this.quarter()-1;return c?this.month(3*d).startOf(t).startOf("day"):this.month(3*d+2).endOf(t).endOf("day")}return a.bind(this)(s,u)}}})});var IA=v((rIe,nIe)=>{(function(t,e){typeof rIe=="object"&&typeof nIe<"u"?nIe.exports=e():typeof define=="function"&&define.amd?define(e):(t=typeof globalThis<"u"?globalThis:t||self).dayjs=e()})(rIe,function(){"use strict";var t=1e3,e=6e4,r=36e5,n="millisecond",o="second",i="minute",a="hour",s="day",u="week",l="month",c="quarter",d="year",f="date",p="Invalid Date",m=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,h=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,b={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(N){var $=["th","st","nd","rd"],k=N%100;return"["+N+($[(k-20)%10]||$[k]||$[0])+"]"}},g=function(N,$,k){var H=String(N);return!H||H.length>=$?N:""+Array($+1-H.length).join(k)+N},y={s:g,z:function(N){var $=-N.utcOffset(),k=Math.abs($),H=Math.floor(k/60),V=k%60;return($<=0?"+":"-")+g(H,2,"0")+":"+g(V,2,"0")},m:function N($,k){if($.date()<k.date())return-N(k,$);var H=12*(k.year()-$.year())+(k.month()-$.month()),V=$.clone().add(H,l),Q=k-V<0,G=$.clone().add(H+(Q?-1:1),l);return+(-(H+(k-V)/(Q?V-G:G-V))||0)},a:function(N){return N<0?Math.ceil(N)||0:Math.floor(N)},p:function(N){return{M:l,y:d,w:u,d:s,D:f,h:a,m:i,s:o,ms:n,Q:c}[N]||String(N||"").toLowerCase().replace(/s$/,"")},u:function(N){return N===void 0}},w="en",S={};S[w]=b;var C="$isDayjsObject",P=function(N){return N instanceof R||!(!N||!N[C])},E=function N($,k,H){var V;if(!$)return w;if(typeof $=="string"){var Q=$.toLowerCase();S[Q]&&(V=Q),k&&(S[Q]=k,V=Q);var G=$.split("-");if(!V&&G.length>1)return N(G[0])}else{var D=$.name;S[D]=$,V=D}return!H&&V&&(w=V),V||!H&&w},A=function(N,$){if(P(N))return N.clone();var k=typeof $=="object"?$:{};return k.date=N,k.args=arguments,new R(k)},I=y;I.l=E,I.i=P,I.w=function(N,$){return A(N,{locale:$.$L,utc:$.$u,x:$.$x,$offset:$.$offset})};var R=function(){function N(k){this.$L=E(k.locale,null,!0),this.parse(k),this.$x=this.$x||k.x||{},this[C]=!0}var $=N.prototype;return $.parse=function(k){this.$d=function(H){var V=H.date,Q=H.utc;if(V===null)return new Date(NaN);if(I.u(V))return new Date;if(V instanceof Date)return new Date(V);if(typeof V=="string"&&!/Z$/i.test(V)){var G=V.match(m);if(G){var D=G[2]-1||0,B=(G[7]||"0").substring(0,3);return Q?new Date(Date.UTC(G[1],D,G[3]||1,G[4]||0,G[5]||0,G[6]||0,B)):new Date(G[1],D,G[3]||1,G[4]||0,G[5]||0,G[6]||0,B)}}return new Date(V)}(k),this.init()},$.init=function(){var k=this.$d;this.$y=k.getFullYear(),this.$M=k.getMonth(),this.$D=k.getDate(),this.$W=k.getDay(),this.$H=k.getHours(),this.$m=k.getMinutes(),this.$s=k.getSeconds(),this.$ms=k.getMilliseconds()},$.$utils=function(){return I},$.isValid=function(){return this.$d.toString()!==p},$.isSame=function(k,H){var V=A(k);return this.startOf(H)<=V&&V<=this.endOf(H)},$.isAfter=function(k,H){return A(k)<this.startOf(H)},$.isBefore=function(k,H){return this.endOf(H)<A(k)},$.$g=function(k,H,V){return I.u(k)?this[H]:this.set(V,k)},$.unix=function(){return Math.floor(this.valueOf()/1e3)},$.valueOf=function(){return this.$d.getTime()},$.startOf=function(k,H){var V=this,Q=!!I.u(H)||H,G=I.p(k),D=function(Y,ae){var we=I.w(V.$u?Date.UTC(V.$y,ae,Y):new Date(V.$y,ae,Y),V);return Q?we:we.endOf(s)},B=function(Y,ae){return I.w(V.toDate()[Y].apply(V.toDate("s"),(Q?[0,0,0,0]:[23,59,59,999]).slice(ae)),V)},q=this.$W,K=this.$M,U=this.$D,te="set"+(this.$u?"UTC":"");switch(G){case d:return Q?D(1,0):D(31,11);case l:return Q?D(1,K):D(0,K+1);case u:var z=this.$locale().weekStart||0,W=(q<z?q+7:q)-z;return D(Q?U-W:U+(6-W),K);case s:case f:return B(te+"Hours",0);case a:return B(te+"Minutes",1);case i:return B(te+"Seconds",2);case o:return B(te+"Milliseconds",3);default:return this.clone()}},$.endOf=function(k){return this.startOf(k,!1)},$.$set=function(k,H){var V,Q=I.p(k),G="set"+(this.$u?"UTC":""),D=(V={},V[s]=G+"Date",V[f]=G+"Date",V[l]=G+"Month",V[d]=G+"FullYear",V[a]=G+"Hours",V[i]=G+"Minutes",V[o]=G+"Seconds",V[n]=G+"Milliseconds",V)[Q],B=Q===s?this.$D+(H-this.$W):H;if(Q===l||Q===d){var q=this.clone().set(f,1);q.$d[D](B),q.init(),this.$d=q.set(f,Math.min(this.$D,q.daysInMonth())).$d}else D&&this.$d[D](B);return this.init(),this},$.set=function(k,H){return this.clone().$set(k,H)},$.get=function(k){return this[I.p(k)]()},$.add=function(k,H){var V,Q=this;k=Number(k);var G=I.p(H),D=function(K){var U=A(Q);return I.w(U.date(U.date()+Math.round(K*k)),Q)};if(G===l)return this.set(l,this.$M+k);if(G===d)return this.set(d,this.$y+k);if(G===s)return D(1);if(G===u)return D(7);var B=(V={},V[i]=e,V[a]=r,V[o]=t,V)[G]||1,q=this.$d.getTime()+k*B;return I.w(q,this)},$.subtract=function(k,H){return this.add(-1*k,H)},$.format=function(k){var H=this,V=this.$locale();if(!this.isValid())return V.invalidDate||p;var Q=k||"YYYY-MM-DDTHH:mm:ssZ",G=I.z(this),D=this.$H,B=this.$m,q=this.$M,K=V.weekdays,U=V.months,te=V.meridiem,z=function(ae,we,de,Ue){return ae&&(ae[we]||ae(H,Q))||de[we].slice(0,Ue)},W=function(ae){return I.s(D%12||12,ae,"0")},Y=te||function(ae,we,de){var Ue=ae<12?"AM":"PM";return de?Ue.toLowerCase():Ue};return Q.replace(h,function(ae,we){return we||function(de){switch(de){case"YY":return String(H.$y).slice(-2);case"YYYY":return I.s(H.$y,4,"0");case"M":return q+1;case"MM":return I.s(q+1,2,"0");case"MMM":return z(V.monthsShort,q,U,3);case"MMMM":return z(U,q);case"D":return H.$D;case"DD":return I.s(H.$D,2,"0");case"d":return String(H.$W);case"dd":return z(V.weekdaysMin,H.$W,K,2);case"ddd":return z(V.weekdaysShort,H.$W,K,3);case"dddd":return K[H.$W];case"H":return String(D);case"HH":return I.s(D,2,"0");case"h":return W(1);case"hh":return W(2);case"a":return Y(D,B,!0);case"A":return Y(D,B,!1);case"m":return String(B);case"mm":return I.s(B,2,"0");case"s":return String(H.$s);case"ss":return I.s(H.$s,2,"0");case"SSS":return I.s(H.$ms,3,"0");case"Z":return G}return null}(ae)||G.replace(":","")})},$.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},$.diff=function(k,H,V){var Q,G=this,D=I.p(H),B=A(k),q=(B.utcOffset()-this.utcOffset())*e,K=this-B,U=function(){return I.m(G,B)};switch(D){case d:Q=U()/12;break;case l:Q=U();break;case c:Q=U()/3;break;case u:Q=(K-q)/6048e5;break;case s:Q=(K-q)/864e5;break;case a:Q=K/r;break;case i:Q=K/e;break;case o:Q=K/t;break;default:Q=K}return V?Q:I.a(Q)},$.daysInMonth=function(){return this.endOf(l).$D},$.$locale=function(){return S[this.$L]},$.locale=function(k,H){if(!k)return this.$L;var V=this.clone(),Q=E(k,H,!0);return Q&&(V.$L=Q),V},$.clone=function(){return I.w(this.$d,this)},$.toDate=function(){return new Date(this.valueOf())},$.toJSON=function(){return this.isValid()?this.toISOString():null},$.toISOString=function(){return this.$d.toISOString()},$.toString=function(){return this.$d.toUTCString()},N}(),j=R.prototype;return A.prototype=j,[["$ms",n],["$s",o],["$m",i],["$H",a],["$W",s],["$M",l],["$y",d],["$D",f]].forEach(function(N){j[N[1]]=function($){return this.$g($,N[0],N[1])}}),A.extend=function(N,$){return N.$i||(N($,R,A),N.$i=!0),A},A.locale=E,A.isDayjs=P,A.unix=function(N){return A(1e3*N)},A.en=S[w],A.Ls=S,A.p={},A})});var wo=v(YMe=>{"use strict";Object.defineProperty(YMe,"__esModule",{value:!0});YMe.pathToFunc=pKr;var fKr=Object.prototype.hasOwnProperty;function pKr(t,e){let r=/\{([a-zA-Z0-9_]+?)\}/g;return function(o={}){return t.replace(r,function(i,a){if(!fKr.call(o,a))throw new Error(`Parameter '${a}' is required`);let s=o[a];if(typeof s!="string"&&typeof s!="number")throw new Error(`Parameter '${a}' must be a string or number`);return e?.charEncoding==="percent"?encodeURIComponent(`${s}`):`${s}`})}}});var bie=v(lg=>{"use strict";Object.defineProperty(lg,"__esModule",{value:!0});lg.SDK_METADATA=lg.ServerList=lg.ServerEu=void 0;lg.serverURLFromOptions=hKr;var mKr=wo();lg.ServerEu="eu";lg.ServerList={[lg.ServerEu]:"https://api.mistral.ai"};function hKr(t){let e=t.serverURL,r={};if(!e){let o=t.server??lg.ServerEu;e=lg.ServerList[o]||""}let n=(0,mKr.pathToFunc)(e)(r);return new URL(n)}lg.SDK_METADATA={language:"typescript",openapiDocVersion:"0.0.2",sdkVersion:"1.5.0",genVersion:"2.497.0",userAgent:"speakeasy-sdk/typescript 1.5.0 2.497.0 0.0.2 @mistralai/mistralai"}});var XMe=v(ZMe=>{"use strict";Object.defineProperty(ZMe,"__esModule",{value:!0});ZMe.readableStreamToArrayBuffer=gKr;async function gKr(t){let e=t.getReader(),r=[],n=0,o=!1;for(;!o;){let{value:s,done:u}=await e.read();u?o=!0:(r.push(s),n+=s.length)}let i=new Uint8Array(n),a=0;for(let s of r)i.set(s,a),a+=s.length;return i.buffer}});var IIt=v(_ie=>{"use strict";Object.defineProperty(_ie,"__esModule",{value:!0});_ie.CustomUserAgentHook=void 0;var yKr=bie(),QMe=class{beforeRequest(e,r){let o=`mistral-client-typescript/${yKr.SDK_METADATA.sdkVersion}`;return r.headers.set("user-agent",o),r.headers.get("user-agent")||r.headers.set("x-mistral-user-agent",o),r}};_ie.CustomUserAgentHook=QMe});var RIt=v(vie=>{"use strict";Object.defineProperty(vie,"__esModule",{value:!0});vie.DeprecationWarningHook=void 0;var MIt="x-model-deprecation-timestamp",eRe=class{afterSuccess(e,r){return r.headers.has(MIt)&&r.clone().json().then(n=>{let o=n.model;console.warn(`WARNING: The model ${o} is deprecated and will be removed on ${r.headers.get(MIt)}. Please refer to https://docs.mistral.ai/getting-started/models/#api-versioning for more information.`)}),r}};vie.DeprecationWarningHook=eRe});var jIt=v(tRe=>{"use strict";Object.defineProperty(tRe,"__esModule",{value:!0});tRe.initHooks=vKr;var bKr=IIt(),_Kr=RIt();function vKr(t){let e=new bKr.CustomUserAgentHook;t.registerBeforeRequestHook(e);let r=new _Kr.DeprecationWarningHook;t.registerAfterSuccessHook(r)}});var NIt=v(wie=>{"use strict";Object.defineProperty(wie,"__esModule",{value:!0});wie.SDKHooks=void 0;var wKr=jIt(),rRe=class{constructor(){this.sdkInitHooks=[],this.beforeCreateRequestHooks=[],this.beforeRequestHooks=[],this.afterSuccessHooks=[],this.afterErrorHooks=[];let e=[];for(let r of e)"sdkInit"in r&&this.registerSDKInitHook(r),"beforeCreateRequest"in r&&this.registerBeforeCreateRequestHook(r),"beforeRequest"in r&&this.registerBeforeRequestHook(r),"afterSuccess"in r&&this.registerAfterSuccessHook(r),"afterError"in r&&this.registerAfterErrorHook(r);(0,wKr.initHooks)(this)}registerSDKInitHook(e){this.sdkInitHooks.push(e)}registerBeforeCreateRequestHook(e){this.beforeCreateRequestHooks.push(e)}registerBeforeRequestHook(e){this.beforeRequestHooks.push(e)}registerAfterSuccessHook(e){this.afterSuccessHooks.push(e)}registerAfterErrorHook(e){this.afterErrorHooks.push(e)}sdkInit(e){return this.sdkInitHooks.reduce((r,n)=>n.sdkInit(r),e)}beforeCreateRequest(e,r){let n=r;for(let o of this.beforeCreateRequestHooks)n=o.beforeCreateRequest(e,n);return n}async beforeRequest(e,r){let n=r;for(let o of this.beforeRequestHooks)n=await o.beforeRequest(e,n);return n}async afterSuccess(e,r){let n=r;for(let o of this.afterSuccessHooks)n=await o.afterSuccess(e,n);return n}async afterError(e,r,n){let o=r,i=n;for(let a of this.afterErrorHooks){let s=await a.afterError(e,o,i);o=s.response,i=s.error}return{response:o,error:i}}};wie.SDKHooks=rRe});var uRe=v(kp=>{"use strict";Object.defineProperty(kp,"__esModule",{value:!0});kp.ConnectionError=kp.RequestTimeoutError=kp.RequestAbortedError=kp.InvalidRequestError=kp.UnexpectedClientError=kp.HTTPClientError=void 0;var nI=class extends Error{constructor(e,r){let n=e;r?.cause&&(n+=`: ${r.cause}`),super(n,r),this.name="HTTPClientError",typeof this.cause>"u"&&(this.cause=r?.cause)}};kp.HTTPClientError=nI;var nRe=class extends nI{constructor(){super(...arguments),this.name="UnexpectedClientError"}};kp.UnexpectedClientError=nRe;var oRe=class extends nI{constructor(){super(...arguments),this.name="InvalidRequestError"}};kp.InvalidRequestError=oRe;var iRe=class extends nI{constructor(){super(...arguments),this.name="RequestAbortedError"}};kp.RequestAbortedError=iRe;var aRe=class extends nI{constructor(){super(...arguments),this.name="RequestTimeoutError"}};kp.RequestTimeoutError=aRe;var sRe=class extends nI{constructor(){super(...arguments),this.name="ConnectionError"}};kp.ConnectionError=sRe});var cg=v(Tq=>{"use strict";Object.defineProperty(Tq,"__esModule",{value:!0});Tq.OK=SKr;Tq.ERR=xKr;Tq.unwrap=CKr;Tq.unwrapAsync=OKr;function SKr(t){return{ok:!0,value:t}}function xKr(t){return{ok:!1,error:t}}function CKr(t){if(!t.ok)throw t.error;return t.value}async function OKr(t){let e=await t;if(!e.ok)throw e.error;return e.value}});var R6=v(Ui=>{"use strict";Object.defineProperty(Ui,"__esModule",{value:!0});Ui.getParsedType=Ui.ZodParsedType=Ui.objectUtil=Ui.util=void 0;var lRe;(function(t){t.assertEqual=o=>o;function e(o){}t.assertIs=e;function r(o){throw new Error}t.assertNever=r,t.arrayToEnum=o=>{let i={};for(let a of o)i[a]=a;return i},t.getValidEnumValues=o=>{let i=t.objectKeys(o).filter(s=>typeof o[o[s]]!="number"),a={};for(let s of i)a[s]=o[s];return t.objectValues(a)},t.objectValues=o=>t.objectKeys(o).map(function(i){return o[i]}),t.objectKeys=typeof Object.keys=="function"?o=>Object.keys(o):o=>{let i=[];for(let a in o)Object.prototype.hasOwnProperty.call(o,a)&&i.push(a);return i},t.find=(o,i)=>{for(let a of o)if(i(a))return a},t.isInteger=typeof Number.isInteger=="function"?o=>Number.isInteger(o):o=>typeof o=="number"&&isFinite(o)&&Math.floor(o)===o;function n(o,i=" | "){return o.map(a=>typeof a=="string"?`'${a}'`:a).join(i)}t.joinValues=n,t.jsonStringifyReplacer=(o,i)=>typeof i=="bigint"?i.toString():i})(lRe||(Ui.util=lRe={}));var DIt;(function(t){t.mergeShapes=(e,r)=>({...e,...r})})(DIt||(Ui.objectUtil=DIt={}));Ui.ZodParsedType=lRe.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]);var PKr=t=>{switch(typeof t){case"undefined":return Ui.ZodParsedType.undefined;case"string":return Ui.ZodParsedType.string;case"number":return isNaN(t)?Ui.ZodParsedType.nan:Ui.ZodParsedType.number;case"boolean":return Ui.ZodParsedType.boolean;case"function":return Ui.ZodParsedType.function;case"bigint":return Ui.ZodParsedType.bigint;case"symbol":return Ui.ZodParsedType.symbol;case"object":return Array.isArray(t)?Ui.ZodParsedType.array:t===null?Ui.ZodParsedType.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?Ui.ZodParsedType.promise:typeof Map<"u"&&t instanceof Map?Ui.ZodParsedType.map:typeof Set<"u"&&t instanceof Set?Ui.ZodParsedType.set:typeof Date<"u"&&t instanceof Date?Ui.ZodParsedType.date:Ui.ZodParsedType.object;default:return Ui.ZodParsedType.unknown}};Ui.getParsedType=PKr});var Sie=v(oI=>{"use strict";Object.defineProperty(oI,"__esModule",{value:!0});oI.ZodError=oI.quotelessJson=oI.ZodIssueCode=void 0;var LIt=R6();oI.ZodIssueCode=LIt.util.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);var EKr=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:");oI.quotelessJson=EKr;var j6=class t extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};let r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=e}format(e){let r=e||function(i){return i.message},n={_errors:[]},o=i=>{for(let a of i.issues)if(a.code==="invalid_union")a.unionErrors.map(o);else if(a.code==="invalid_return_type")o(a.returnTypeError);else if(a.code==="invalid_arguments")o(a.argumentsError);else if(a.path.length===0)n._errors.push(r(a));else{let s=n,u=0;for(;u<a.path.length;){let l=a.path[u];u===a.path.length-1?(s[l]=s[l]||{_errors:[]},s[l]._errors.push(r(a))):s[l]=s[l]||{_errors:[]},s=s[l],u++}}};return o(this),n}static assert(e){if(!(e instanceof t))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,LIt.util.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=r=>r.message){let r={},n=[];for(let o of this.issues)o.path.length>0?(r[o.path[0]]=r[o.path[0]]||[],r[o.path[0]].push(e(o))):n.push(e(o));return{formErrors:n,fieldErrors:r}}get formErrors(){return this.flatten()}};oI.ZodError=j6;j6.create=t=>new j6(t)});var dRe=v(cRe=>{"use strict";Object.defineProperty(cRe,"__esModule",{value:!0});var dN=R6(),Wd=Sie(),TKr=(t,e)=>{let r;switch(t.code){case Wd.ZodIssueCode.invalid_type:t.received===dN.ZodParsedType.undefined?r="Required":r=`Expected ${t.expected}, received ${t.received}`;break;case Wd.ZodIssueCode.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(t.expected,dN.util.jsonStringifyReplacer)}`;break;case Wd.ZodIssueCode.unrecognized_keys:r=`Unrecognized key(s) in object: ${dN.util.joinValues(t.keys,", ")}`;break;case Wd.ZodIssueCode.invalid_union:r="Invalid input";break;case Wd.ZodIssueCode.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${dN.util.joinValues(t.options)}`;break;case Wd.ZodIssueCode.invalid_enum_value:r=`Invalid enum value. Expected ${dN.util.joinValues(t.options)}, received '${t.received}'`;break;case Wd.ZodIssueCode.invalid_arguments:r="Invalid function arguments";break;case Wd.ZodIssueCode.invalid_return_type:r="Invalid function return type";break;case Wd.ZodIssueCode.invalid_date:r="Invalid date";break;case Wd.ZodIssueCode.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(r=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?r=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?r=`Invalid input: must end with "${t.validation.endsWith}"`:dN.util.assertNever(t.validation):t.validation!=="regex"?r=`Invalid ${t.validation}`:r="Invalid";break;case Wd.ZodIssueCode.too_small:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:r="Invalid input";break;case Wd.ZodIssueCode.too_big:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?r=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:r="Invalid input";break;case Wd.ZodIssueCode.custom:r="Invalid input";break;case Wd.ZodIssueCode.invalid_intersection_types:r="Intersection results could not be merged";break;case Wd.ZodIssueCode.not_multiple_of:r=`Number must be a multiple of ${t.multipleOf}`;break;case Wd.ZodIssueCode.not_finite:r="Number must be finite";break;default:r=e.defaultError,dN.util.assertNever(t)}return{message:r}};cRe.default=TKr});var xie=v(mx=>{"use strict";var AKr=mx&&mx.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(mx,"__esModule",{value:!0});mx.getErrorMap=mx.setErrorMap=mx.defaultErrorMap=void 0;var FIt=AKr(dRe());mx.defaultErrorMap=FIt.default;var kIt=FIt.default;function IKr(t){kIt=t}mx.setErrorMap=IKr;function MKr(){return kIt}mx.getErrorMap=MKr});var pRe=v(ui=>{"use strict";var RKr=ui&&ui.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ui,"__esModule",{value:!0});ui.isAsync=ui.isValid=ui.isDirty=ui.isAborted=ui.OK=ui.DIRTY=ui.INVALID=ui.ParseStatus=ui.addIssueToContext=ui.EMPTY_PATH=ui.makeIssue=void 0;var jKr=xie(),$It=RKr(dRe()),NKr=t=>{let{data:e,path:r,errorMaps:n,issueData:o}=t,i=[...r,...o.path||[]],a={...o,path:i};if(o.message!==void 0)return{...o,path:i,message:o.message};let s="",u=n.filter(l=>!!l).slice().reverse();for(let l of u)s=l(a,{data:e,defaultError:s}).message;return{...o,path:i,message:s}};ui.makeIssue=NKr;ui.EMPTY_PATH=[];function DKr(t,e){let r=(0,jKr.getErrorMap)(),n=(0,ui.makeIssue)({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,r,r===$It.default?void 0:$It.default].filter(o=>!!o)});t.common.issues.push(n)}ui.addIssueToContext=DKr;var fRe=class t{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,r){let n=[];for(let o of r){if(o.status==="aborted")return ui.INVALID;o.status==="dirty"&&e.dirty(),n.push(o.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,r){let n=[];for(let o of r){let i=await o.key,a=await o.value;n.push({key:i,value:a})}return t.mergeObjectSync(e,n)}static mergeObjectSync(e,r){let n={};for(let o of r){let{key:i,value:a}=o;if(i.status==="aborted"||a.status==="aborted")return ui.INVALID;i.status==="dirty"&&e.dirty(),a.status==="dirty"&&e.dirty(),i.value!=="__proto__"&&(typeof a.value<"u"||o.alwaysSet)&&(n[i.value]=a.value)}return{status:e.value,value:n}}};ui.ParseStatus=fRe;ui.INVALID=Object.freeze({status:"aborted"});var LKr=t=>({status:"dirty",value:t});ui.DIRTY=LKr;var FKr=t=>({status:"valid",value:t});ui.OK=FKr;var kKr=t=>t.status==="aborted";ui.isAborted=kKr;var $Kr=t=>t.status==="dirty";ui.isDirty=$Kr;var BKr=t=>t.status==="valid";ui.isValid=BKr;var qKr=t=>typeof Promise<"u"&&t instanceof Promise;ui.isAsync=qKr});var qIt=v(BIt=>{"use strict";Object.defineProperty(BIt,"__esModule",{value:!0})});var zIt=v(Cie=>{"use strict";Object.defineProperty(Cie,"__esModule",{value:!0});Cie.errorUtil=void 0;var UIt;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e?.message})(UIt||(Cie.errorUtil=UIt={}))});var rMt=v(re=>{"use strict";var Pie=re&&re.__classPrivateFieldGet||function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},WIt=re&&re.__classPrivateFieldSet||function(t,e,r,n,o){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!o:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?o.call(t,r):o?o.value=r:e.set(t,r),r},N6,D6;Object.defineProperty(re,"__esModule",{value:!0});re.boolean=re.bigint=re.array=re.any=re.coerce=re.ZodFirstPartyTypeKind=re.late=re.ZodSchema=re.Schema=re.custom=re.ZodReadonly=re.ZodPipeline=re.ZodBranded=re.BRAND=re.ZodNaN=re.ZodCatch=re.ZodDefault=re.ZodNullable=re.ZodOptional=re.ZodTransformer=re.ZodEffects=re.ZodPromise=re.ZodNativeEnum=re.ZodEnum=re.ZodLiteral=re.ZodLazy=re.ZodFunction=re.ZodSet=re.ZodMap=re.ZodRecord=re.ZodTuple=re.ZodIntersection=re.ZodDiscriminatedUnion=re.ZodUnion=re.ZodObject=re.ZodArray=re.ZodVoid=re.ZodNever=re.ZodUnknown=re.ZodAny=re.ZodNull=re.ZodUndefined=re.ZodSymbol=re.ZodDate=re.ZodBoolean=re.ZodBigInt=re.ZodNumber=re.ZodString=re.datetimeRegex=re.ZodType=void 0;re.NEVER=re.void=re.unknown=re.union=re.undefined=re.tuple=re.transformer=re.symbol=re.string=re.strictObject=re.set=re.record=re.promise=re.preprocess=re.pipeline=re.ostring=re.optional=re.onumber=re.oboolean=re.object=re.number=re.nullable=re.null=re.never=re.nativeEnum=re.nan=re.map=re.literal=re.lazy=re.intersection=re.instanceof=re.function=re.enum=re.effect=re.discriminatedUnion=re.date=void 0;var Oie=xie(),qt=zIt(),ne=pRe(),nt=R6(),We=Sie(),fg=class{constructor(e,r,n,o){this._cachedPath=[],this.parent=e,this.data=r,this._path=n,this._key=o}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}},HIt=(t,e)=>{if((0,ne.isValid)(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let r=new We.ZodError(t.common.issues);return this._error=r,this._error}}};function Yr(t){if(!t)return{};let{errorMap:e,invalid_type_error:r,required_error:n,description:o}=t;if(e&&(r||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:o}:{errorMap:(a,s)=>{var u,l;let{message:c}=t;return a.code==="invalid_enum_value"?{message:c??s.defaultError}:typeof s.data>"u"?{message:(u=c??n)!==null&&u!==void 0?u:s.defaultError}:a.code!=="invalid_type"?{message:s.defaultError}:{message:(l=c??r)!==null&&l!==void 0?l:s.defaultError}},description:o}}var Zr=class{get description(){return this._def.description}_getType(e){return(0,nt.getParsedType)(e.data)}_getOrReturnCtx(e,r){return r||{common:e.parent.common,data:e.data,parsedType:(0,nt.getParsedType)(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new ne.ParseStatus,ctx:{common:e.parent.common,data:e.data,parsedType:(0,nt.getParsedType)(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){let r=this._parse(e);if((0,ne.isAsync)(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(e){let r=this._parse(e);return Promise.resolve(r)}parse(e,r){let n=this.safeParse(e,r);if(n.success)return n.data;throw n.error}safeParse(e,r){var n;let o={common:{issues:[],async:(n=r?.async)!==null&&n!==void 0?n:!1,contextualErrorMap:r?.errorMap},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:(0,nt.getParsedType)(e)},i=this._parseSync({data:e,path:o.path,parent:o});return HIt(o,i)}"~validate"(e){var r,n;let o={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:(0,nt.getParsedType)(e)};if(!this["~standard"].async)try{let i=this._parseSync({data:e,path:[],parent:o});return(0,ne.isValid)(i)?{value:i.value}:{issues:o.common.issues}}catch(i){!((n=(r=i?.message)===null||r===void 0?void 0:r.toLowerCase())===null||n===void 0)&&n.includes("encountered")&&(this["~standard"].async=!0),o.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:o}).then(i=>(0,ne.isValid)(i)?{value:i.value}:{issues:o.common.issues})}async parseAsync(e,r){let n=await this.safeParseAsync(e,r);if(n.success)return n.data;throw n.error}async safeParseAsync(e,r){let n={common:{issues:[],contextualErrorMap:r?.errorMap,async:!0},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:(0,nt.getParsedType)(e)},o=this._parse({data:e,path:n.path,parent:n}),i=await((0,ne.isAsync)(o)?o:Promise.resolve(o));return HIt(n,i)}refine(e,r){let n=o=>typeof r=="string"||typeof r>"u"?{message:r}:typeof r=="function"?r(o):r;return this._refinement((o,i)=>{let a=e(o),s=()=>i.addIssue({code:We.ZodIssueCode.custom,...n(o)});return typeof Promise<"u"&&a instanceof Promise?a.then(u=>u?!0:(s(),!1)):a?!0:(s(),!1)})}refinement(e,r){return this._refinement((n,o)=>e(n)?!0:(o.addIssue(typeof r=="function"?r(n,o):r),!1))}_refinement(e){return new zm({schema:this,typeName:hr.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:r=>this["~validate"](r)}}optional(){return dg.create(this,this._def)}nullable(){return gx.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return VO.create(this)}promise(){return sI.create(this,this._def)}or(e){return bN.create([this,e],this._def)}and(e){return _N.create(this,e,this._def)}transform(e){return new zm({...Yr(this._def),schema:this,typeName:hr.ZodEffects,effect:{type:"transform",transform:e}})}default(e){let r=typeof e=="function"?e:()=>e;return new CN({...Yr(this._def),innerType:this,defaultValue:r,typeName:hr.ZodDefault})}brand(){return new L6({typeName:hr.ZodBranded,type:this,...Yr(this._def)})}catch(e){let r=typeof e=="function"?e:()=>e;return new ON({...Yr(this._def),innerType:this,catchValue:r,typeName:hr.ZodCatch})}describe(e){let r=this.constructor;return new r({...this._def,description:e})}pipe(e){return F6.create(this,e)}readonly(){return PN.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}};re.ZodType=Zr;re.Schema=Zr;re.ZodSchema=Zr;var UKr=/^c[^\s-]{8,}$/i,zKr=/^[0-9a-z]+$/,HKr=/^[0-9A-HJKMNP-TV-Z]{26}$/i,VKr=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,WKr=/^[a-z0-9_-]{21}$/i,KKr=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,GKr=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,JKr=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,YKr="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$",mRe,ZKr=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,XKr=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,QKr=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,eGr=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,tGr=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,rGr=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,KIt="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",nGr=new RegExp(`^${KIt}$`);function GIt(t){let e="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`),e}function oGr(t){return new RegExp(`^${GIt(t)}$`)}function JIt(t){let e=`${KIt}T${GIt(t)}`,r=[];return r.push(t.local?"Z?":"Z"),t.offset&&r.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${r.join("|")})`,new RegExp(`^${e}$`)}re.datetimeRegex=JIt;function iGr(t,e){return!!((e==="v4"||!e)&&ZKr.test(t)||(e==="v6"||!e)&&QKr.test(t))}function aGr(t,e){if(!KKr.test(t))return!1;try{let[r]=t.split("."),n=r.replace(/-/g,"+").replace(/_/g,"/").padEnd(r.length+(4-r.length%4)%4,"="),o=JSON.parse(atob(n));return!(typeof o!="object"||o===null||!o.typ||!o.alg||e&&o.alg!==e)}catch{return!1}}function sGr(t,e){return!!((e==="v4"||!e)&&XKr.test(t)||(e==="v6"||!e)&&eGr.test(t))}var iI=class t extends Zr{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==nt.ZodParsedType.string){let i=this._getOrReturnCtx(e);return(0,ne.addIssueToContext)(i,{code:We.ZodIssueCode.invalid_type,expected:nt.ZodParsedType.string,received:i.parsedType}),ne.INVALID}let n=new ne.ParseStatus,o;for(let i of this._def.checks)if(i.kind==="min")e.data.length<i.value&&(o=this._getOrReturnCtx(e,o),(0,ne.addIssueToContext)(o,{code:We.ZodIssueCode.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),n.dirty());else if(i.kind==="max")e.data.length>i.value&&(o=this._getOrReturnCtx(e,o),(0,ne.addIssueToContext)(o,{code:We.ZodIssueCode.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),n.dirty());else if(i.kind==="length"){let a=e.data.length>i.value,s=e.data.length<i.value;(a||s)&&(o=this._getOrReturnCtx(e,o),a?(0,ne.addIssueToContext)(o,{code:We.ZodIssueCode.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):s&&(0,ne.addIssueToContext)(o,{code:We.ZodIssueCode.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),n.dirty())}else if(i.kind==="email")JKr.test(e.data)||(o=this._getOrReturnCtx(e,o),(0,ne.addIssueToContext)(o,{validation:"email",code:We.ZodIssueCode.invalid_string,message:i.message}),n.dirty());else if(i.kind==="emoji")mRe||(mRe=new RegExp(YKr,"u")),mRe.test(e.data)||(o=this._getOrReturnCtx(e,o),(0,ne.addIssueToContext)(o,{validation:"emoji",code:We.ZodIssueCode.invalid_string,message:i.message}),n.dirty());else if(i.kind==="uuid")VKr.test(e.data)||(o=this._getOrReturnCtx(e,o),(0,ne.addIssueToContext)(o,{validation:"uuid",code:We.ZodIssueCode.invalid_string,message:i.message}),n.dirty());else if(i.kind==="nanoid")WKr.test(e.data)||(o=this._getOrReturnCtx(e,o),(0,ne.addIssueToContext)(o,{validation:"nanoid",code:We.ZodIssueCode.invalid_string,message:i.message}),n.dirty());else if(i.kind==="cuid")UKr.test(e.data)||(o=this._getOrReturnCtx(e,o),(0,ne.addIssueToContext)(o,{validation:"cuid",code:We.ZodIssueCode.invalid_string,message:i.message}),n.dirty());else if(i.kind==="cuid2")zKr.test(e.data)||(o=this._getOrReturnCtx(e,o),(0,ne.addIssueToContext)(o,{validation:"cuid2",code:We.ZodIssueCode.invalid_string,message:i.message}),n.dirty());else if(i.kind==="ulid")HKr.test(e.data)||(o=this._getOrReturnCtx(e,o),(0,ne.addIssueToContext)(o,{validation:"ulid",code:We.ZodIssueCode.invalid_string,message:i.message}),n.dirty());else if(i.kind==="url")try{new URL(e.data)}catch{o=this._getOrReturnCtx(e,o),(0,ne.addIssueToContext)(o,{validation:"url",code:We.ZodIssueCode.invalid_string,message:i.message}),n.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(e.data)||(o=this._getOrReturnCtx(e,o),(0,ne.addIssueToContext)(o,{validation:"regex",code:We.ZodIssueCode.invalid_string,message:i.message}),n.dirty())):i.kind==="trim"?e.data=e.data.trim():i.kind==="includes"?e.data.includes(i.value,i.position)||(o=this._getOrReturnCtx(e,o),(0,ne.addIssueToContext)(o,{code:We.ZodIssueCode.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),n.dirty()):i.kind==="toLowerCase"?e.data=e.data.toLowerCase():i.kind==="toUpperCase"?e.data=e.data.toUpperCase():i.kind==="startsWith"?e.data.startsWith(i.value)||(o=this._getOrReturnCtx(e,o),(0,ne.addIssueToContext)(o,{code:We.ZodIssueCode.invalid_string,validation:{startsWith:i.value},message:i.message}),n.dirty()):i.kind==="endsWith"?e.data.endsWith(i.value)||(o=this._getOrReturnCtx(e,o),(0,ne.addIssueToContext)(o,{code:We.ZodIssueCode.invalid_string,validation:{endsWith:i.value},message:i.message}),n.dirty()):i.kind==="datetime"?JIt(i).test(e.data)||(o=this._getOrReturnCtx(e,o),(0,ne.addIssueToContext)(o,{code:We.ZodIssueCode.invalid_string,validation:"datetime",message:i.message}),n.dirty()):i.kind==="date"?nGr.test(e.data)||(o=this._getOrReturnCtx(e,o),(0,ne.addIssueToContext)(o,{code:We.ZodIssueCode.invalid_string,validation:"date",message:i.message}),n.dirty()):i.kind==="time"?oGr(i).test(e.data)||(o=this._getOrReturnCtx(e,o),(0,ne.addIssueToContext)(o,{code:We.ZodIssueCode.invalid_string,validation:"time",message:i.message}),n.dirty()):i.kind==="duration"?GKr.test(e.data)||(o=this._getOrReturnCtx(e,o),(0,ne.addIssueToContext)(o,{validation:"duration",code:We.ZodIssueCode.invalid_string,message:i.message}),n.dirty()):i.kind==="ip"?iGr(e.data,i.version)||(o=this._getOrReturnCtx(e,o),(0,ne.addIssueToContext)(o,{validation:"ip",code:We.ZodIssueCode.invalid_string,message:i.message}),n.dirty()):i.kind==="jwt"?aGr(e.data,i.alg)||(o=this._getOrReturnCtx(e,o),(0,ne.addIssueToContext)(o,{validation:"jwt",code:We.ZodIssueCode.invalid_string,message:i.message}),n.dirty()):i.kind==="cidr"?sGr(e.data,i.version)||(o=this._getOrReturnCtx(e,o),(0,ne.addIssueToContext)(o,{validation:"cidr",code:We.ZodIssueCode.invalid_string,message:i.message}),n.dirty()):i.kind==="base64"?tGr.test(e.data)||(o=this._getOrReturnCtx(e,o),(0,ne.addIssueToContext)(o,{validation:"base64",code:We.ZodIssueCode.invalid_string,message:i.message}),n.dirty()):i.kind==="base64url"?rGr.test(e.data)||(o=this._getOrReturnCtx(e,o),(0,ne.addIssueToContext)(o,{validation:"base64url",code:We.ZodIssueCode.invalid_string,message:i.message}),n.dirty()):nt.util.assertNever(i);return{status:n.value,value:e.data}}_regex(e,r,n){return this.refinement(o=>e.test(o),{validation:r,code:We.ZodIssueCode.invalid_string,...qt.errorUtil.errToObj(n)})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...qt.errorUtil.errToObj(e)})}url(e){return this._addCheck({kind:"url",...qt.errorUtil.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...qt.errorUtil.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...qt.errorUtil.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...qt.errorUtil.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...qt.errorUtil.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...qt.errorUtil.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...qt.errorUtil.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...qt.errorUtil.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...qt.errorUtil.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...qt.errorUtil.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...qt.errorUtil.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...qt.errorUtil.errToObj(e)})}datetime(e){var r,n;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof e?.precision>"u"?null:e?.precision,offset:(r=e?.offset)!==null&&r!==void 0?r:!1,local:(n=e?.local)!==null&&n!==void 0?n:!1,...qt.errorUtil.errToObj(e?.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof e?.precision>"u"?null:e?.precision,...qt.errorUtil.errToObj(e?.message)})}duration(e){return this._addCheck({kind:"duration",...qt.errorUtil.errToObj(e)})}regex(e,r){return this._addCheck({kind:"regex",regex:e,...qt.errorUtil.errToObj(r)})}includes(e,r){return this._addCheck({kind:"includes",value:e,position:r?.position,...qt.errorUtil.errToObj(r?.message)})}startsWith(e,r){return this._addCheck({kind:"startsWith",value:e,...qt.errorUtil.errToObj(r)})}endsWith(e,r){return this._addCheck({kind:"endsWith",value:e,...qt.errorUtil.errToObj(r)})}min(e,r){return this._addCheck({kind:"min",value:e,...qt.errorUtil.errToObj(r)})}max(e,r){return this._addCheck({kind:"max",value:e,...qt.errorUtil.errToObj(r)})}length(e,r){return this._addCheck({kind:"length",value:e,...qt.errorUtil.errToObj(r)})}nonempty(e){return this.min(1,qt.errorUtil.errToObj(e))}trim(){return new t({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new t({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new t({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxLength(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}};re.ZodString=iI;iI.create=t=>{var e;return new iI({checks:[],typeName:hr.ZodString,coerce:(e=t?.coerce)!==null&&e!==void 0?e:!1,...Yr(t)})};function uGr(t,e){let r=(t.toString().split(".")[1]||"").length,n=(e.toString().split(".")[1]||"").length,o=r>n?r:n,i=parseInt(t.toFixed(o).replace(".","")),a=parseInt(e.toFixed(o).replace(".",""));return i%a/Math.pow(10,o)}var fN=class t extends Zr{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==nt.ZodParsedType.number){let i=this._getOrReturnCtx(e);return(0,ne.addIssueToContext)(i,{code:We.ZodIssueCode.invalid_type,expected:nt.ZodParsedType.number,received:i.parsedType}),ne.INVALID}let n,o=new ne.ParseStatus;for(let i of this._def.checks)i.kind==="int"?nt.util.isInteger(e.data)||(n=this._getOrReturnCtx(e,n),(0,ne.addIssueToContext)(n,{code:We.ZodIssueCode.invalid_type,expected:"integer",received:"float",message:i.message}),o.dirty()):i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(n=this._getOrReturnCtx(e,n),(0,ne.addIssueToContext)(n,{code:We.ZodIssueCode.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),o.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(n=this._getOrReturnCtx(e,n),(0,ne.addIssueToContext)(n,{code:We.ZodIssueCode.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),o.dirty()):i.kind==="multipleOf"?uGr(e.data,i.value)!==0&&(n=this._getOrReturnCtx(e,n),(0,ne.addIssueToContext)(n,{code:We.ZodIssueCode.not_multiple_of,multipleOf:i.value,message:i.message}),o.dirty()):i.kind==="finite"?Number.isFinite(e.data)||(n=this._getOrReturnCtx(e,n),(0,ne.addIssueToContext)(n,{code:We.ZodIssueCode.not_finite,message:i.message}),o.dirty()):nt.util.assertNever(i);return{status:o.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,qt.errorUtil.toString(r))}gt(e,r){return this.setLimit("min",e,!1,qt.errorUtil.toString(r))}lte(e,r){return this.setLimit("max",e,!0,qt.errorUtil.toString(r))}lt(e,r){return this.setLimit("max",e,!1,qt.errorUtil.toString(r))}setLimit(e,r,n,o){return new t({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:qt.errorUtil.toString(o)}]})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:qt.errorUtil.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:qt.errorUtil.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:qt.errorUtil.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:qt.errorUtil.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:qt.errorUtil.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:qt.errorUtil.toString(r)})}finite(e){return this._addCheck({kind:"finite",message:qt.errorUtil.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:qt.errorUtil.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:qt.errorUtil.toString(e)})}get minValue(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&nt.util.isInteger(e.value))}get isFinite(){let e=null,r=null;for(let n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(r===null||n.value>r)&&(r=n.value):n.kind==="max"&&(e===null||n.value<e)&&(e=n.value)}return Number.isFinite(r)&&Number.isFinite(e)}};re.ZodNumber=fN;fN.create=t=>new fN({checks:[],typeName:hr.ZodNumber,coerce:t?.coerce||!1,...Yr(t)});var pN=class t extends Zr{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==nt.ZodParsedType.bigint)return this._getInvalidInput(e);let n,o=new ne.ParseStatus;for(let i of this._def.checks)i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(n=this._getOrReturnCtx(e,n),(0,ne.addIssueToContext)(n,{code:We.ZodIssueCode.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),o.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(n=this._getOrReturnCtx(e,n),(0,ne.addIssueToContext)(n,{code:We.ZodIssueCode.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),o.dirty()):i.kind==="multipleOf"?e.data%i.value!==BigInt(0)&&(n=this._getOrReturnCtx(e,n),(0,ne.addIssueToContext)(n,{code:We.ZodIssueCode.not_multiple_of,multipleOf:i.value,message:i.message}),o.dirty()):nt.util.assertNever(i);return{status:o.value,value:e.data}}_getInvalidInput(e){let r=this._getOrReturnCtx(e);return(0,ne.addIssueToContext)(r,{code:We.ZodIssueCode.invalid_type,expected:nt.ZodParsedType.bigint,received:r.parsedType}),ne.INVALID}gte(e,r){return this.setLimit("min",e,!0,qt.errorUtil.toString(r))}gt(e,r){return this.setLimit("min",e,!1,qt.errorUtil.toString(r))}lte(e,r){return this.setLimit("max",e,!0,qt.errorUtil.toString(r))}lt(e,r){return this.setLimit("max",e,!1,qt.errorUtil.toString(r))}setLimit(e,r,n,o){return new t({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:qt.errorUtil.toString(o)}]})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:qt.errorUtil.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:qt.errorUtil.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:qt.errorUtil.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:qt.errorUtil.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:qt.errorUtil.toString(r)})}get minValue(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}};re.ZodBigInt=pN;pN.create=t=>{var e;return new pN({checks:[],typeName:hr.ZodBigInt,coerce:(e=t?.coerce)!==null&&e!==void 0?e:!1,...Yr(t)})};var mN=class extends Zr{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==nt.ZodParsedType.boolean){let n=this._getOrReturnCtx(e);return(0,ne.addIssueToContext)(n,{code:We.ZodIssueCode.invalid_type,expected:nt.ZodParsedType.boolean,received:n.parsedType}),ne.INVALID}return(0,ne.OK)(e.data)}};re.ZodBoolean=mN;mN.create=t=>new mN({typeName:hr.ZodBoolean,coerce:t?.coerce||!1,...Yr(t)});var hN=class t extends Zr{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==nt.ZodParsedType.date){let i=this._getOrReturnCtx(e);return(0,ne.addIssueToContext)(i,{code:We.ZodIssueCode.invalid_type,expected:nt.ZodParsedType.date,received:i.parsedType}),ne.INVALID}if(isNaN(e.data.getTime())){let i=this._getOrReturnCtx(e);return(0,ne.addIssueToContext)(i,{code:We.ZodIssueCode.invalid_date}),ne.INVALID}let n=new ne.ParseStatus,o;for(let i of this._def.checks)i.kind==="min"?e.data.getTime()<i.value&&(o=this._getOrReturnCtx(e,o),(0,ne.addIssueToContext)(o,{code:We.ZodIssueCode.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),n.dirty()):i.kind==="max"?e.data.getTime()>i.value&&(o=this._getOrReturnCtx(e,o),(0,ne.addIssueToContext)(o,{code:We.ZodIssueCode.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),n.dirty()):nt.util.assertNever(i);return{status:n.value,value:new Date(e.data.getTime())}}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}min(e,r){return this._addCheck({kind:"min",value:e.getTime(),message:qt.errorUtil.toString(r)})}max(e,r){return this._addCheck({kind:"max",value:e.getTime(),message:qt.errorUtil.toString(r)})}get minDate(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e!=null?new Date(e):null}};re.ZodDate=hN;hN.create=t=>new hN({checks:[],coerce:t?.coerce||!1,typeName:hr.ZodDate,...Yr(t)});var Iq=class extends Zr{_parse(e){if(this._getType(e)!==nt.ZodParsedType.symbol){let n=this._getOrReturnCtx(e);return(0,ne.addIssueToContext)(n,{code:We.ZodIssueCode.invalid_type,expected:nt.ZodParsedType.symbol,received:n.parsedType}),ne.INVALID}return(0,ne.OK)(e.data)}};re.ZodSymbol=Iq;Iq.create=t=>new Iq({typeName:hr.ZodSymbol,...Yr(t)});var gN=class extends Zr{_parse(e){if(this._getType(e)!==nt.ZodParsedType.undefined){let n=this._getOrReturnCtx(e);return(0,ne.addIssueToContext)(n,{code:We.ZodIssueCode.invalid_type,expected:nt.ZodParsedType.undefined,received:n.parsedType}),ne.INVALID}return(0,ne.OK)(e.data)}};re.ZodUndefined=gN;gN.create=t=>new gN({typeName:hr.ZodUndefined,...Yr(t)});var yN=class extends Zr{_parse(e){if(this._getType(e)!==nt.ZodParsedType.null){let n=this._getOrReturnCtx(e);return(0,ne.addIssueToContext)(n,{code:We.ZodIssueCode.invalid_type,expected:nt.ZodParsedType.null,received:n.parsedType}),ne.INVALID}return(0,ne.OK)(e.data)}};re.ZodNull=yN;yN.create=t=>new yN({typeName:hr.ZodNull,...Yr(t)});var aI=class extends Zr{constructor(){super(...arguments),this._any=!0}_parse(e){return(0,ne.OK)(e.data)}};re.ZodAny=aI;aI.create=t=>new aI({typeName:hr.ZodAny,...Yr(t)});var HO=class extends Zr{constructor(){super(...arguments),this._unknown=!0}_parse(e){return(0,ne.OK)(e.data)}};re.ZodUnknown=HO;HO.create=t=>new HO({typeName:hr.ZodUnknown,...Yr(t)});var zy=class extends Zr{_parse(e){let r=this._getOrReturnCtx(e);return(0,ne.addIssueToContext)(r,{code:We.ZodIssueCode.invalid_type,expected:nt.ZodParsedType.never,received:r.parsedType}),ne.INVALID}};re.ZodNever=zy;zy.create=t=>new zy({typeName:hr.ZodNever,...Yr(t)});var Mq=class extends Zr{_parse(e){if(this._getType(e)!==nt.ZodParsedType.undefined){let n=this._getOrReturnCtx(e);return(0,ne.addIssueToContext)(n,{code:We.ZodIssueCode.invalid_type,expected:nt.ZodParsedType.void,received:n.parsedType}),ne.INVALID}return(0,ne.OK)(e.data)}};re.ZodVoid=Mq;Mq.create=t=>new Mq({typeName:hr.ZodVoid,...Yr(t)});var VO=class t extends Zr{_parse(e){let{ctx:r,status:n}=this._processInputParams(e),o=this._def;if(r.parsedType!==nt.ZodParsedType.array)return(0,ne.addIssueToContext)(r,{code:We.ZodIssueCode.invalid_type,expected:nt.ZodParsedType.array,received:r.parsedType}),ne.INVALID;if(o.exactLength!==null){let a=r.data.length>o.exactLength.value,s=r.data.length<o.exactLength.value;(a||s)&&((0,ne.addIssueToContext)(r,{code:a?We.ZodIssueCode.too_big:We.ZodIssueCode.too_small,minimum:s?o.exactLength.value:void 0,maximum:a?o.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:o.exactLength.message}),n.dirty())}if(o.minLength!==null&&r.data.length<o.minLength.value&&((0,ne.addIssueToContext)(r,{code:We.ZodIssueCode.too_small,minimum:o.minLength.value,type:"array",inclusive:!0,exact:!1,message:o.minLength.message}),n.dirty()),o.maxLength!==null&&r.data.length>o.maxLength.value&&((0,ne.addIssueToContext)(r,{code:We.ZodIssueCode.too_big,maximum:o.maxLength.value,type:"array",inclusive:!0,exact:!1,message:o.maxLength.message}),n.dirty()),r.common.async)return Promise.all([...r.data].map((a,s)=>o.type._parseAsync(new fg(r,a,r.path,s)))).then(a=>ne.ParseStatus.mergeArray(n,a));let i=[...r.data].map((a,s)=>o.type._parseSync(new fg(r,a,r.path,s)));return ne.ParseStatus.mergeArray(n,i)}get element(){return this._def.type}min(e,r){return new t({...this._def,minLength:{value:e,message:qt.errorUtil.toString(r)}})}max(e,r){return new t({...this._def,maxLength:{value:e,message:qt.errorUtil.toString(r)}})}length(e,r){return new t({...this._def,exactLength:{value:e,message:qt.errorUtil.toString(r)}})}nonempty(e){return this.min(1,e)}};re.ZodArray=VO;VO.create=(t,e)=>new VO({type:t,minLength:null,maxLength:null,exactLength:null,typeName:hr.ZodArray,...Yr(e)});function Aq(t){if(t instanceof $p){let e={};for(let r in t.shape){let n=t.shape[r];e[r]=dg.create(Aq(n))}return new $p({...t._def,shape:()=>e})}else return t instanceof VO?new VO({...t._def,type:Aq(t.element)}):t instanceof dg?dg.create(Aq(t.unwrap())):t instanceof gx?gx.create(Aq(t.unwrap())):t instanceof hx?hx.create(t.items.map(e=>Aq(e))):t}var $p=class t extends Zr{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;let e=this._def.shape(),r=nt.util.objectKeys(e);return this._cached={shape:e,keys:r}}_parse(e){if(this._getType(e)!==nt.ZodParsedType.object){let l=this._getOrReturnCtx(e);return(0,ne.addIssueToContext)(l,{code:We.ZodIssueCode.invalid_type,expected:nt.ZodParsedType.object,received:l.parsedType}),ne.INVALID}let{status:n,ctx:o}=this._processInputParams(e),{shape:i,keys:a}=this._getCached(),s=[];if(!(this._def.catchall instanceof zy&&this._def.unknownKeys==="strip"))for(let l in o.data)a.includes(l)||s.push(l);let u=[];for(let l of a){let c=i[l],d=o.data[l];u.push({key:{status:"valid",value:l},value:c._parse(new fg(o,d,o.path,l)),alwaysSet:l in o.data})}if(this._def.catchall instanceof zy){let l=this._def.unknownKeys;if(l==="passthrough")for(let c of s)u.push({key:{status:"valid",value:c},value:{status:"valid",value:o.data[c]}});else if(l==="strict")s.length>0&&((0,ne.addIssueToContext)(o,{code:We.ZodIssueCode.unrecognized_keys,keys:s}),n.dirty());else if(l!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{let l=this._def.catchall;for(let c of s){let d=o.data[c];u.push({key:{status:"valid",value:c},value:l._parse(new fg(o,d,o.path,c)),alwaysSet:c in o.data})}}return o.common.async?Promise.resolve().then(async()=>{let l=[];for(let c of u){let d=await c.key,f=await c.value;l.push({key:d,value:f,alwaysSet:c.alwaysSet})}return l}).then(l=>ne.ParseStatus.mergeObjectSync(n,l)):ne.ParseStatus.mergeObjectSync(n,u)}get shape(){return this._def.shape()}strict(e){return qt.errorUtil.errToObj,new t({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(r,n)=>{var o,i,a,s;let u=(a=(i=(o=this._def).errorMap)===null||i===void 0?void 0:i.call(o,r,n).message)!==null&&a!==void 0?a:n.defaultError;return r.code==="unrecognized_keys"?{message:(s=qt.errorUtil.errToObj(e).message)!==null&&s!==void 0?s:u}:{message:u}}}:{}})}strip(){return new t({...this._def,unknownKeys:"strip"})}passthrough(){return new t({...this._def,unknownKeys:"passthrough"})}extend(e){return new t({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new t({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:hr.ZodObject})}setKey(e,r){return this.augment({[e]:r})}catchall(e){return new t({...this._def,catchall:e})}pick(e){let r={};return nt.util.objectKeys(e).forEach(n=>{e[n]&&this.shape[n]&&(r[n]=this.shape[n])}),new t({...this._def,shape:()=>r})}omit(e){let r={};return nt.util.objectKeys(this.shape).forEach(n=>{e[n]||(r[n]=this.shape[n])}),new t({...this._def,shape:()=>r})}deepPartial(){return Aq(this)}partial(e){let r={};return nt.util.objectKeys(this.shape).forEach(n=>{let o=this.shape[n];e&&!e[n]?r[n]=o:r[n]=o.optional()}),new t({...this._def,shape:()=>r})}required(e){let r={};return nt.util.objectKeys(this.shape).forEach(n=>{if(e&&!e[n])r[n]=this.shape[n];else{let i=this.shape[n];for(;i instanceof dg;)i=i._def.innerType;r[n]=i}}),new t({...this._def,shape:()=>r})}keyof(){return YIt(nt.util.objectKeys(this.shape))}};re.ZodObject=$p;$p.create=(t,e)=>new $p({shape:()=>t,unknownKeys:"strip",catchall:zy.create(),typeName:hr.ZodObject,...Yr(e)});$p.strictCreate=(t,e)=>new $p({shape:()=>t,unknownKeys:"strict",catchall:zy.create(),typeName:hr.ZodObject,...Yr(e)});$p.lazycreate=(t,e)=>new $p({shape:t,unknownKeys:"strip",catchall:zy.create(),typeName:hr.ZodObject,...Yr(e)});var bN=class extends Zr{_parse(e){let{ctx:r}=this._processInputParams(e),n=this._def.options;function o(i){for(let s of i)if(s.result.status==="valid")return s.result;for(let s of i)if(s.result.status==="dirty")return r.common.issues.push(...s.ctx.common.issues),s.result;let a=i.map(s=>new We.ZodError(s.ctx.common.issues));return(0,ne.addIssueToContext)(r,{code:We.ZodIssueCode.invalid_union,unionErrors:a}),ne.INVALID}if(r.common.async)return Promise.all(n.map(async i=>{let a={...r,common:{...r.common,issues:[]},parent:null};return{result:await i._parseAsync({data:r.data,path:r.path,parent:a}),ctx:a}})).then(o);{let i,a=[];for(let u of n){let l={...r,common:{...r.common,issues:[]},parent:null},c=u._parseSync({data:r.data,path:r.path,parent:l});if(c.status==="valid")return c;c.status==="dirty"&&!i&&(i={result:c,ctx:l}),l.common.issues.length&&a.push(l.common.issues)}if(i)return r.common.issues.push(...i.ctx.common.issues),i.result;let s=a.map(u=>new We.ZodError(u));return(0,ne.addIssueToContext)(r,{code:We.ZodIssueCode.invalid_union,unionErrors:s}),ne.INVALID}}get options(){return this._def.options}};re.ZodUnion=bN;bN.create=(t,e)=>new bN({options:t,typeName:hr.ZodUnion,...Yr(e)});var zO=t=>t instanceof vN?zO(t.schema):t instanceof zm?zO(t.innerType()):t instanceof wN?[t.value]:t instanceof SN?t.options:t instanceof xN?nt.util.objectValues(t.enum):t instanceof CN?zO(t._def.innerType):t instanceof gN?[void 0]:t instanceof yN?[null]:t instanceof dg?[void 0,...zO(t.unwrap())]:t instanceof gx?[null,...zO(t.unwrap())]:t instanceof L6||t instanceof PN?zO(t.unwrap()):t instanceof ON?zO(t._def.innerType):[],Eie=class t extends Zr{_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==nt.ZodParsedType.object)return(0,ne.addIssueToContext)(r,{code:We.ZodIssueCode.invalid_type,expected:nt.ZodParsedType.object,received:r.parsedType}),ne.INVALID;let n=this.discriminator,o=r.data[n],i=this.optionsMap.get(o);return i?r.common.async?i._parseAsync({data:r.data,path:r.path,parent:r}):i._parseSync({data:r.data,path:r.path,parent:r}):((0,ne.addIssueToContext)(r,{code:We.ZodIssueCode.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),ne.INVALID)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,r,n){let o=new Map;for(let i of r){let a=zO(i.shape[e]);if(!a.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(let s of a){if(o.has(s))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(s)}`);o.set(s,i)}}return new t({typeName:hr.ZodDiscriminatedUnion,discriminator:e,options:r,optionsMap:o,...Yr(n)})}};re.ZodDiscriminatedUnion=Eie;function hRe(t,e){let r=(0,nt.getParsedType)(t),n=(0,nt.getParsedType)(e);if(t===e)return{valid:!0,data:t};if(r===nt.ZodParsedType.object&&n===nt.ZodParsedType.object){let o=nt.util.objectKeys(e),i=nt.util.objectKeys(t).filter(s=>o.indexOf(s)!==-1),a={...t,...e};for(let s of i){let u=hRe(t[s],e[s]);if(!u.valid)return{valid:!1};a[s]=u.data}return{valid:!0,data:a}}else if(r===nt.ZodParsedType.array&&n===nt.ZodParsedType.array){if(t.length!==e.length)return{valid:!1};let o=[];for(let i=0;i<t.length;i++){let a=t[i],s=e[i],u=hRe(a,s);if(!u.valid)return{valid:!1};o.push(u.data)}return{valid:!0,data:o}}else return r===nt.ZodParsedType.date&&n===nt.ZodParsedType.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}var _N=class extends Zr{_parse(e){let{status:r,ctx:n}=this._processInputParams(e),o=(i,a)=>{if((0,ne.isAborted)(i)||(0,ne.isAborted)(a))return ne.INVALID;let s=hRe(i.value,a.value);return s.valid?(((0,ne.isDirty)(i)||(0,ne.isDirty)(a))&&r.dirty(),{status:r.value,value:s.data}):((0,ne.addIssueToContext)(n,{code:We.ZodIssueCode.invalid_intersection_types}),ne.INVALID)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([i,a])=>o(i,a)):o(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}};re.ZodIntersection=_N;_N.create=(t,e,r)=>new _N({left:t,right:e,typeName:hr.ZodIntersection,...Yr(r)});var hx=class t extends Zr{_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==nt.ZodParsedType.array)return(0,ne.addIssueToContext)(n,{code:We.ZodIssueCode.invalid_type,expected:nt.ZodParsedType.array,received:n.parsedType}),ne.INVALID;if(n.data.length<this._def.items.length)return(0,ne.addIssueToContext)(n,{code:We.ZodIssueCode.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),ne.INVALID;!this._def.rest&&n.data.length>this._def.items.length&&((0,ne.addIssueToContext)(n,{code:We.ZodIssueCode.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());let i=[...n.data].map((a,s)=>{let u=this._def.items[s]||this._def.rest;return u?u._parse(new fg(n,a,n.path,s)):null}).filter(a=>!!a);return n.common.async?Promise.all(i).then(a=>ne.ParseStatus.mergeArray(r,a)):ne.ParseStatus.mergeArray(r,i)}get items(){return this._def.items}rest(e){return new t({...this._def,rest:e})}};re.ZodTuple=hx;hx.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new hx({items:t,typeName:hr.ZodTuple,rest:null,...Yr(e)})};var Tie=class t extends Zr{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==nt.ZodParsedType.object)return(0,ne.addIssueToContext)(n,{code:We.ZodIssueCode.invalid_type,expected:nt.ZodParsedType.object,received:n.parsedType}),ne.INVALID;let o=[],i=this._def.keyType,a=this._def.valueType;for(let s in n.data)o.push({key:i._parse(new fg(n,s,n.path,s)),value:a._parse(new fg(n,n.data[s],n.path,s)),alwaysSet:s in n.data});return n.common.async?ne.ParseStatus.mergeObjectAsync(r,o):ne.ParseStatus.mergeObjectSync(r,o)}get element(){return this._def.valueType}static create(e,r,n){return r instanceof Zr?new t({keyType:e,valueType:r,typeName:hr.ZodRecord,...Yr(n)}):new t({keyType:iI.create(),valueType:e,typeName:hr.ZodRecord,...Yr(r)})}};re.ZodRecord=Tie;var Rq=class extends Zr{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==nt.ZodParsedType.map)return(0,ne.addIssueToContext)(n,{code:We.ZodIssueCode.invalid_type,expected:nt.ZodParsedType.map,received:n.parsedType}),ne.INVALID;let o=this._def.keyType,i=this._def.valueType,a=[...n.data.entries()].map(([s,u],l)=>({key:o._parse(new fg(n,s,n.path,[l,"key"])),value:i._parse(new fg(n,u,n.path,[l,"value"]))}));if(n.common.async){let s=new Map;return Promise.resolve().then(async()=>{for(let u of a){let l=await u.key,c=await u.value;if(l.status==="aborted"||c.status==="aborted")return ne.INVALID;(l.status==="dirty"||c.status==="dirty")&&r.dirty(),s.set(l.value,c.value)}return{status:r.value,value:s}})}else{let s=new Map;for(let u of a){let l=u.key,c=u.value;if(l.status==="aborted"||c.status==="aborted")return ne.INVALID;(l.status==="dirty"||c.status==="dirty")&&r.dirty(),s.set(l.value,c.value)}return{status:r.value,value:s}}}};re.ZodMap=Rq;Rq.create=(t,e,r)=>new Rq({valueType:e,keyType:t,typeName:hr.ZodMap,...Yr(r)});var jq=class t extends Zr{_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==nt.ZodParsedType.set)return(0,ne.addIssueToContext)(n,{code:We.ZodIssueCode.invalid_type,expected:nt.ZodParsedType.set,received:n.parsedType}),ne.INVALID;let o=this._def;o.minSize!==null&&n.data.size<o.minSize.value&&((0,ne.addIssueToContext)(n,{code:We.ZodIssueCode.too_small,minimum:o.minSize.value,type:"set",inclusive:!0,exact:!1,message:o.minSize.message}),r.dirty()),o.maxSize!==null&&n.data.size>o.maxSize.value&&((0,ne.addIssueToContext)(n,{code:We.ZodIssueCode.too_big,maximum:o.maxSize.value,type:"set",inclusive:!0,exact:!1,message:o.maxSize.message}),r.dirty());let i=this._def.valueType;function a(u){let l=new Set;for(let c of u){if(c.status==="aborted")return ne.INVALID;c.status==="dirty"&&r.dirty(),l.add(c.value)}return{status:r.value,value:l}}let s=[...n.data.values()].map((u,l)=>i._parse(new fg(n,u,n.path,l)));return n.common.async?Promise.all(s).then(u=>a(u)):a(s)}min(e,r){return new t({...this._def,minSize:{value:e,message:qt.errorUtil.toString(r)}})}max(e,r){return new t({...this._def,maxSize:{value:e,message:qt.errorUtil.toString(r)}})}size(e,r){return this.min(e,r).max(e,r)}nonempty(e){return this.min(1,e)}};re.ZodSet=jq;jq.create=(t,e)=>new jq({valueType:t,minSize:null,maxSize:null,typeName:hr.ZodSet,...Yr(e)});var Aie=class t extends Zr{constructor(){super(...arguments),this.validate=this.implement}_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==nt.ZodParsedType.function)return(0,ne.addIssueToContext)(r,{code:We.ZodIssueCode.invalid_type,expected:nt.ZodParsedType.function,received:r.parsedType}),ne.INVALID;function n(s,u){return(0,ne.makeIssue)({data:s,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,(0,Oie.getErrorMap)(),Oie.defaultErrorMap].filter(l=>!!l),issueData:{code:We.ZodIssueCode.invalid_arguments,argumentsError:u}})}function o(s,u){return(0,ne.makeIssue)({data:s,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,(0,Oie.getErrorMap)(),Oie.defaultErrorMap].filter(l=>!!l),issueData:{code:We.ZodIssueCode.invalid_return_type,returnTypeError:u}})}let i={errorMap:r.common.contextualErrorMap},a=r.data;if(this._def.returns instanceof sI){let s=this;return(0,ne.OK)(async function(...u){let l=new We.ZodError([]),c=await s._def.args.parseAsync(u,i).catch(p=>{throw l.addIssue(n(u,p)),l}),d=await Reflect.apply(a,this,c);return await s._def.returns._def.type.parseAsync(d,i).catch(p=>{throw l.addIssue(o(d,p)),l})})}else{let s=this;return(0,ne.OK)(function(...u){let l=s._def.args.safeParse(u,i);if(!l.success)throw new We.ZodError([n(u,l.error)]);let c=Reflect.apply(a,this,l.data),d=s._def.returns.safeParse(c,i);if(!d.success)throw new We.ZodError([o(c,d.error)]);return d.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new t({...this._def,args:hx.create(e).rest(HO.create())})}returns(e){return new t({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,r,n){return new t({args:e||hx.create([]).rest(HO.create()),returns:r||HO.create(),typeName:hr.ZodFunction,...Yr(n)})}};re.ZodFunction=Aie;var vN=class extends Zr{get schema(){return this._def.getter()}_parse(e){let{ctx:r}=this._processInputParams(e);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}};re.ZodLazy=vN;vN.create=(t,e)=>new vN({getter:t,typeName:hr.ZodLazy,...Yr(e)});var wN=class extends Zr{_parse(e){if(e.data!==this._def.value){let r=this._getOrReturnCtx(e);return(0,ne.addIssueToContext)(r,{received:r.data,code:We.ZodIssueCode.invalid_literal,expected:this._def.value}),ne.INVALID}return{status:"valid",value:e.data}}get value(){return this._def.value}};re.ZodLiteral=wN;wN.create=(t,e)=>new wN({value:t,typeName:hr.ZodLiteral,...Yr(e)});function YIt(t,e){return new SN({values:t,typeName:hr.ZodEnum,...Yr(e)})}var SN=class t extends Zr{constructor(){super(...arguments),N6.set(this,void 0)}_parse(e){if(typeof e.data!="string"){let r=this._getOrReturnCtx(e),n=this._def.values;return(0,ne.addIssueToContext)(r,{expected:nt.util.joinValues(n),received:r.parsedType,code:We.ZodIssueCode.invalid_type}),ne.INVALID}if(Pie(this,N6,"f")||WIt(this,N6,new Set(this._def.values),"f"),!Pie(this,N6,"f").has(e.data)){let r=this._getOrReturnCtx(e),n=this._def.values;return(0,ne.addIssueToContext)(r,{received:r.data,code:We.ZodIssueCode.invalid_enum_value,options:n}),ne.INVALID}return(0,ne.OK)(e.data)}get options(){return this._def.values}get enum(){let e={};for(let r of this._def.values)e[r]=r;return e}get Values(){let e={};for(let r of this._def.values)e[r]=r;return e}get Enum(){let e={};for(let r of this._def.values)e[r]=r;return e}extract(e,r=this._def){return t.create(e,{...this._def,...r})}exclude(e,r=this._def){return t.create(this.options.filter(n=>!e.includes(n)),{...this._def,...r})}};re.ZodEnum=SN;N6=new WeakMap;SN.create=YIt;var xN=class extends Zr{constructor(){super(...arguments),D6.set(this,void 0)}_parse(e){let r=nt.util.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==nt.ZodParsedType.string&&n.parsedType!==nt.ZodParsedType.number){let o=nt.util.objectValues(r);return(0,ne.addIssueToContext)(n,{expected:nt.util.joinValues(o),received:n.parsedType,code:We.ZodIssueCode.invalid_type}),ne.INVALID}if(Pie(this,D6,"f")||WIt(this,D6,new Set(nt.util.getValidEnumValues(this._def.values)),"f"),!Pie(this,D6,"f").has(e.data)){let o=nt.util.objectValues(r);return(0,ne.addIssueToContext)(n,{received:n.data,code:We.ZodIssueCode.invalid_enum_value,options:o}),ne.INVALID}return(0,ne.OK)(e.data)}get enum(){return this._def.values}};re.ZodNativeEnum=xN;D6=new WeakMap;xN.create=(t,e)=>new xN({values:t,typeName:hr.ZodNativeEnum,...Yr(e)});var sI=class extends Zr{unwrap(){return this._def.type}_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==nt.ZodParsedType.promise&&r.common.async===!1)return(0,ne.addIssueToContext)(r,{code:We.ZodIssueCode.invalid_type,expected:nt.ZodParsedType.promise,received:r.parsedType}),ne.INVALID;let n=r.parsedType===nt.ZodParsedType.promise?r.data:Promise.resolve(r.data);return(0,ne.OK)(n.then(o=>this._def.type.parseAsync(o,{path:r.path,errorMap:r.common.contextualErrorMap})))}};re.ZodPromise=sI;sI.create=(t,e)=>new sI({type:t,typeName:hr.ZodPromise,...Yr(e)});var zm=class extends Zr{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===hr.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){let{status:r,ctx:n}=this._processInputParams(e),o=this._def.effect||null,i={addIssue:a=>{(0,ne.addIssueToContext)(n,a),a.fatal?r.abort():r.dirty()},get path(){return n.path}};if(i.addIssue=i.addIssue.bind(i),o.type==="preprocess"){let a=o.transform(n.data,i);if(n.common.async)return Promise.resolve(a).then(async s=>{if(r.value==="aborted")return ne.INVALID;let u=await this._def.schema._parseAsync({data:s,path:n.path,parent:n});return u.status==="aborted"?ne.INVALID:u.status==="dirty"||r.value==="dirty"?(0,ne.DIRTY)(u.value):u});{if(r.value==="aborted")return ne.INVALID;let s=this._def.schema._parseSync({data:a,path:n.path,parent:n});return s.status==="aborted"?ne.INVALID:s.status==="dirty"||r.value==="dirty"?(0,ne.DIRTY)(s.value):s}}if(o.type==="refinement"){let a=s=>{let u=o.refinement(s,i);if(n.common.async)return Promise.resolve(u);if(u instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return s};if(n.common.async===!1){let s=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return s.status==="aborted"?ne.INVALID:(s.status==="dirty"&&r.dirty(),a(s.value),{status:r.value,value:s.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(s=>s.status==="aborted"?ne.INVALID:(s.status==="dirty"&&r.dirty(),a(s.value).then(()=>({status:r.value,value:s.value}))))}if(o.type==="transform")if(n.common.async===!1){let a=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!(0,ne.isValid)(a))return a;let s=o.transform(a.value,i);if(s instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:s}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(a=>(0,ne.isValid)(a)?Promise.resolve(o.transform(a.value,i)).then(s=>({status:r.value,value:s})):a);nt.util.assertNever(o)}};re.ZodEffects=zm;re.ZodTransformer=zm;zm.create=(t,e,r)=>new zm({schema:t,typeName:hr.ZodEffects,effect:e,...Yr(r)});zm.createWithPreprocess=(t,e,r)=>new zm({schema:e,effect:{type:"preprocess",transform:t},typeName:hr.ZodEffects,...Yr(r)});var dg=class extends Zr{_parse(e){return this._getType(e)===nt.ZodParsedType.undefined?(0,ne.OK)(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};re.ZodOptional=dg;dg.create=(t,e)=>new dg({innerType:t,typeName:hr.ZodOptional,...Yr(e)});var gx=class extends Zr{_parse(e){return this._getType(e)===nt.ZodParsedType.null?(0,ne.OK)(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};re.ZodNullable=gx;gx.create=(t,e)=>new gx({innerType:t,typeName:hr.ZodNullable,...Yr(e)});var CN=class extends Zr{_parse(e){let{ctx:r}=this._processInputParams(e),n=r.data;return r.parsedType===nt.ZodParsedType.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:r.path,parent:r})}removeDefault(){return this._def.innerType}};re.ZodDefault=CN;CN.create=(t,e)=>new CN({innerType:t,typeName:hr.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Yr(e)});var ON=class extends Zr{_parse(e){let{ctx:r}=this._processInputParams(e),n={...r,common:{...r.common,issues:[]}},o=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return(0,ne.isAsync)(o)?o.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new We.ZodError(n.common.issues)},input:n.data})})):{status:"valid",value:o.status==="valid"?o.value:this._def.catchValue({get error(){return new We.ZodError(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}};re.ZodCatch=ON;ON.create=(t,e)=>new ON({innerType:t,typeName:hr.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...Yr(e)});var Nq=class extends Zr{_parse(e){if(this._getType(e)!==nt.ZodParsedType.nan){let n=this._getOrReturnCtx(e);return(0,ne.addIssueToContext)(n,{code:We.ZodIssueCode.invalid_type,expected:nt.ZodParsedType.nan,received:n.parsedType}),ne.INVALID}return{status:"valid",value:e.data}}};re.ZodNaN=Nq;Nq.create=t=>new Nq({typeName:hr.ZodNaN,...Yr(t)});re.BRAND=Symbol("zod_brand");var L6=class extends Zr{_parse(e){let{ctx:r}=this._processInputParams(e),n=r.data;return this._def.type._parse({data:n,path:r.path,parent:r})}unwrap(){return this._def.type}};re.ZodBranded=L6;var F6=class t extends Zr{_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.common.async)return(async()=>{let i=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return i.status==="aborted"?ne.INVALID:i.status==="dirty"?(r.dirty(),(0,ne.DIRTY)(i.value)):this._def.out._parseAsync({data:i.value,path:n.path,parent:n})})();{let o=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return o.status==="aborted"?ne.INVALID:o.status==="dirty"?(r.dirty(),{status:"dirty",value:o.value}):this._def.out._parseSync({data:o.value,path:n.path,parent:n})}}static create(e,r){return new t({in:e,out:r,typeName:hr.ZodPipeline})}};re.ZodPipeline=F6;var PN=class extends Zr{_parse(e){let r=this._def.innerType._parse(e),n=o=>((0,ne.isValid)(o)&&(o.value=Object.freeze(o.value)),o);return(0,ne.isAsync)(r)?r.then(o=>n(o)):n(r)}unwrap(){return this._def.innerType}};re.ZodReadonly=PN;PN.create=(t,e)=>new PN({innerType:t,typeName:hr.ZodReadonly,...Yr(e)});function VIt(t,e){let r=typeof t=="function"?t(e):typeof t=="string"?{message:t}:t;return typeof r=="string"?{message:r}:r}function ZIt(t,e={},r){return t?aI.create().superRefine((n,o)=>{var i,a;let s=t(n);if(s instanceof Promise)return s.then(u=>{var l,c;if(!u){let d=VIt(e,n),f=(c=(l=d.fatal)!==null&&l!==void 0?l:r)!==null&&c!==void 0?c:!0;o.addIssue({code:"custom",...d,fatal:f})}});if(!s){let u=VIt(e,n),l=(a=(i=u.fatal)!==null&&i!==void 0?i:r)!==null&&a!==void 0?a:!0;o.addIssue({code:"custom",...u,fatal:l})}}):aI.create()}re.custom=ZIt;re.late={object:$p.lazycreate};var hr;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(hr||(re.ZodFirstPartyTypeKind=hr={}));var lGr=(t,e={message:`Input not instance of ${t.name}`})=>ZIt(r=>r instanceof t,e);re.instanceof=lGr;var XIt=iI.create;re.string=XIt;var QIt=fN.create;re.number=QIt;var cGr=Nq.create;re.nan=cGr;var dGr=pN.create;re.bigint=dGr;var eMt=mN.create;re.boolean=eMt;var fGr=hN.create;re.date=fGr;var pGr=Iq.create;re.symbol=pGr;var mGr=gN.create;re.undefined=mGr;var hGr=yN.create;re.null=hGr;var gGr=aI.create;re.any=gGr;var yGr=HO.create;re.unknown=yGr;var bGr=zy.create;re.never=bGr;var _Gr=Mq.create;re.void=_Gr;var vGr=VO.create;re.array=vGr;var wGr=$p.create;re.object=wGr;var SGr=$p.strictCreate;re.strictObject=SGr;var xGr=bN.create;re.union=xGr;var CGr=Eie.create;re.discriminatedUnion=CGr;var OGr=_N.create;re.intersection=OGr;var PGr=hx.create;re.tuple=PGr;var EGr=Tie.create;re.record=EGr;var TGr=Rq.create;re.map=TGr;var AGr=jq.create;re.set=AGr;var IGr=Aie.create;re.function=IGr;var MGr=vN.create;re.lazy=MGr;var RGr=wN.create;re.literal=RGr;var jGr=SN.create;re.enum=jGr;var NGr=xN.create;re.nativeEnum=NGr;var DGr=sI.create;re.promise=DGr;var tMt=zm.create;re.effect=tMt;re.transformer=tMt;var LGr=dg.create;re.optional=LGr;var FGr=gx.create;re.nullable=FGr;var kGr=zm.createWithPreprocess;re.preprocess=kGr;var $Gr=F6.create;re.pipeline=$Gr;var BGr=()=>XIt().optional();re.ostring=BGr;var qGr=()=>QIt().optional();re.onumber=qGr;var UGr=()=>eMt().optional();re.oboolean=UGr;re.coerce={string:t=>iI.create({...t,coerce:!0}),number:t=>fN.create({...t,coerce:!0}),boolean:t=>mN.create({...t,coerce:!0}),bigint:t=>pN.create({...t,coerce:!0}),date:t=>hN.create({...t,coerce:!0})};re.NEVER=ne.INVALID});var gRe=v(pg=>{"use strict";var zGr=pg&&pg.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Dq=pg&&pg.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&zGr(e,t,r)};Object.defineProperty(pg,"__esModule",{value:!0});Dq(xie(),pg);Dq(pRe(),pg);Dq(qIt(),pg);Dq(R6(),pg);Dq(rMt(),pg);Dq(Sie(),pg)});var Te=v(Bp=>{"use strict";var nMt=Bp&&Bp.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),HGr=Bp&&Bp.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),VGr=Bp&&Bp.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&nMt(e,t,r);return HGr(e,t),e},WGr=Bp&&Bp.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&nMt(e,t,r)};Object.defineProperty(Bp,"__esModule",{value:!0});Bp.z=void 0;var oMt=VGr(gRe());Bp.z=oMt;WGr(gRe(),Bp);Bp.default=oMt});var _Re=v(tc=>{"use strict";var KGr=tc&&tc.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),GGr=tc&&tc.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),JGr=tc&&tc.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&KGr(e,t,r);return GGr(e,t),e};Object.defineProperty(tc,"__esModule",{value:!0});tc.zodInbound=tc.zodOutbound=void 0;tc.bytesToBase64=iMt;tc.bytesFromBase64=yRe;tc.stringToBytes=bRe;tc.stringFromBytes=aMt;tc.stringToBase64=YGr;tc.stringFromBase64=ZGr;var Iie=JGr(Te());function iMt(t){return btoa(String.fromCodePoint(...t))}function yRe(t){return Uint8Array.from(atob(t),e=>e.charCodeAt(0))}function bRe(t){return new TextEncoder().encode(t)}function aMt(t){return new TextDecoder().decode(t)}function YGr(t){return iMt(bRe(t))}function ZGr(t){return aMt(yRe(t))}tc.zodOutbound=Iie.instanceof(Uint8Array).or(Iie.string().transform(bRe));tc.zodInbound=Iie.instanceof(Uint8Array).or(Iie.string().transform(yRe))});var wRe=v(vRe=>{"use strict";Object.defineProperty(vRe,"__esModule",{value:!0});vRe.isPlainObject=XGr;function XGr(t){if(typeof t!="object"||t===null)return!1;let e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}});var Xo=v(eo=>{"use strict";Object.defineProperty(eo,"__esModule",{value:!0});eo.encodeDeepObjectQuery=eo.encodePipeDelimitedQuery=eo.encodeSpaceDelimitedQuery=eo.encodeFormQuery=eo.encodeJSONQuery=eo.encodeSimple=eo.encodePipeDelimited=eo.encodeSpaceDelimited=eo.encodeForm=eo.EncodingError=void 0;eo.encodeMatrix=QGr;eo.encodeLabel=eJr;eo.encodeBodyForm=tJr;eo.encodeDeepObject=uMt;eo.encodeDeepObjectObject=xRe;eo.encodeJSON=lMt;eo.queryJoin=cMt;eo.queryEncoder=Fq;eo.appendForm=nJr;var sMt=_Re(),Hy=wRe(),k6=class extends Error{constructor(e){super(e),this.name="EncodingError"}};eo.EncodingError=k6;function QGr(t,e,r){let n="",o=r?.explode?$6(t,e):[[t,e]];if(o.every(([s,u])=>u==null))return;let i=s=>r?.charEncoding==="percent"?encodeURIComponent(s):s,a=s=>i(Lq(s));return o.forEach(([s,u])=>{let l="",c=null;if(u==null||(Array.isArray(u)?c=B6(u,f=>`${a(f)}`)?.join(","):(0,Hy.isPlainObject)(u)?c=Rie(Object.entries(u),([p,m])=>`,${i(p)},${a(m)}`)?.join("").slice(1):c=`${a(u)}`,c==null))return;let d=i(s);l=`${d}=${c}`,l===`${d}=`&&(l=l.slice(0,-1)),l&&(n+=`;${l}`)}),n}function eJr(t,e,r){let n="",o=r?.explode?$6(t,e):[[t,e]];if(o.every(([s,u])=>u==null))return;let i=s=>r?.charEncoding==="percent"?encodeURIComponent(s):s,a=s=>i(Lq(s));return o.forEach(([s,u])=>{let l="";u!=null&&(Array.isArray(u)?l=B6(u,c=>`${a(c)}`)?.join("."):(0,Hy.isPlainObject)(u)?l=Rie(Object.entries(u),([d,f])=>`.${i(d)}.${a(f)}`)?.join("").slice(1):l=`${r?.explode&&(0,Hy.isPlainObject)(e)?`${i(s)}=`:""}${a(u)}`,n+=l==null?"":`.${l}`)}),n}function SRe(t){return(e,r,n)=>{let o="",i=n?.explode?$6(e,r):[[e,r]];if(i.every(([l,c])=>c==null))return;let a=l=>n?.charEncoding==="percent"?encodeURIComponent(l):l,s=l=>a(Lq(l)),u=a(t);return i.forEach(([l,c])=>{let d="",f=null;c!=null&&(Array.isArray(c)?f=B6(c,p=>`${s(p)}`)?.join(u):(0,Hy.isPlainObject)(c)?f=Rie(Object.entries(c),([p,m])=>`${a(p)}${u}${s(m)}`)?.join(u):f=`${s(c)}`,f!=null&&(d=`${a(l)}=${f}`,!(!d||d==="=")&&(o+=`&${d}`)))}),o.slice(1)}}eo.encodeForm=SRe(",");eo.encodeSpaceDelimited=SRe(" ");eo.encodePipeDelimited=SRe("|");function tJr(t,e,r){let n="",o=r?.explode?$6(t,e):[[t,e]],i=s=>r?.charEncoding==="percent"?encodeURIComponent(s):s,a=s=>i(Lq(s));return o.forEach(([s,u])=>{let l="",c="";u!=null&&(Array.isArray(u)||(0,Hy.isPlainObject)(u)?c=JSON.stringify(u,Mie):c=`${a(u)}`,l=`${i(s)}=${c}`,!(!l||l==="=")&&(n+=`&${l}`))}),n.slice(1)}function uMt(t,e,r){if(e!=null){if(!(0,Hy.isPlainObject)(e))throw new k6(`Value of parameter '${t}' which uses deepObject encoding must be an object or null`);return xRe(t,e,r)}}function xRe(t,e,r){if(e==null)return;let n="",o=i=>r?.charEncoding==="percent"?encodeURIComponent(i):i;if(!(0,Hy.isPlainObject)(e))throw new k6(`Expected parameter '${t}' to be an object.`);return Object.entries(e).forEach(([i,a])=>{if(a==null)return;let s=`${t}[${i}]`;if((0,Hy.isPlainObject)(a)){let c=xRe(s,a,r);n+=c==null?"":`&${c}`;return}let u=Array.isArray(a)?a:[a],l=B6(u,c=>`${o(s)}=${o(Lq(c))}`)?.join("&");n+=l==null?"":`&${l}`}),n.slice(1)}function lMt(t,e,r){if(typeof e>"u")return;let n=i=>r?.charEncoding==="percent"?encodeURIComponent(i):i,o=n(JSON.stringify(e,Mie));return r?.explode?o:`${n(t)}=${o}`}var rJr=(t,e,r)=>{let n="",o=r?.explode?$6(t,e):[[t,e]];if(o.every(([s,u])=>u==null))return;let i=s=>r?.charEncoding==="percent"?encodeURIComponent(s):s,a=s=>i(Lq(s));return o.forEach(([s,u])=>{let l="";u!=null&&(Array.isArray(u)?l=B6(u,c=>`${a(c)}`)?.join(","):(0,Hy.isPlainObject)(u)?l=Rie(Object.entries(u),([d,f])=>`,${i(d)},${a(f)}`)?.join("").slice(1):l=`${r?.explode&&(0,Hy.isPlainObject)(e)?`${s}=`:""}${a(u)}`,n+=l?`,${l}`:"")}),n.slice(1)};eo.encodeSimple=rJr;function $6(t,e){return Array.isArray(e)?e.map(r=>[t,r]):(0,Hy.isPlainObject)(e)?Object.entries(e??{}).map(([n,o])=>[n,o]):[[t,e]]}function Lq(t){return t==null?"":t instanceof Date?t.toISOString():t instanceof Uint8Array?(0,sMt.bytesToBase64)(t):typeof t=="object"?JSON.stringify(t,Mie):`${t}`}function Mie(t,e){return e instanceof Uint8Array?(0,sMt.bytesToBase64)(e):e}function B6(t,e){let r=t.reduce((n,o)=>{if(o==null)return n;let i=e(o);return i==null||n.push(i),n},[]);return r.length?r:null}function Rie(t,e){let r=[];for(let[n,o]of t){if(o==null)continue;let i=e([n,o]);i!=null&&r.push(i)}return r.length?r:null}function cMt(...t){return t.filter(Boolean).join("&")}function Fq(t){return function(r,n){let o={...n,explode:n?.explode??!0,charEncoding:n?.charEncoding??"percent"},i=Object.entries(r).map(([a,s])=>t(a,s,o));return cMt(...i)}}eo.encodeJSONQuery=Fq(lMt);eo.encodeFormQuery=Fq(eo.encodeForm);eo.encodeSpaceDelimitedQuery=Fq(eo.encodeSpaceDelimited);eo.encodePipeDelimitedQuery=Fq(eo.encodePipeDelimited);eo.encodeDeepObjectQuery=Fq(uMt);function nJr(t,e,r,n){r!=null&&(r instanceof Blob&&n?t.append(e,r,n):r instanceof Blob?t.append(e,r):t.append(e,String(r)))}});var dMt=v(CRe=>{"use strict";Object.defineProperty(CRe,"__esModule",{value:!0});CRe.dlv=oJr;function oJr(t,e,r,n,o){for(e=Array.isArray(e)?e:e.split("."),n=0;n<e.length;n++){let i=e[n];t=i!=null&&t?t[i]:o}return t===o?r:t}});var PRe=v(Hm=>{"use strict";var iJr=Hm&&Hm.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),aJr=Hm&&Hm.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),sJr=Hm&&Hm.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&iJr(e,t,r);return aJr(e,t),e};Object.defineProperty(Hm,"__esModule",{value:!0});Hm.envSchema=void 0;Hm.env=uJr;Hm.resetEnv=lJr;var fMt=dMt(),ORe=sJr(Te());Hm.envSchema=ORe.object({MISTRAL_API_KEY:ORe.string().optional(),MISTRAL_DEBUG:ORe.coerce.boolean().optional()});var q6;function uJr(){return q6||(q6=Hm.envSchema.parse((0,fMt.dlv)(globalThis,"process.env")??(0,fMt.dlv)(globalThis,"Deno.env")??{}),q6)}function lJr(){q6=void 0}});var U6=v(yx=>{"use strict";Object.defineProperty(yx,"__esModule",{value:!0});yx.HTTPClient=void 0;yx.matchContentType=mMt;yx.matchStatusCode=hMt;yx.matchResponse=fJr;yx.isConnectionError=pJr;yx.isTimeoutError=mJr;yx.isAbortError=hJr;var cJr=(t,e)=>e==null?fetch(t):fetch(t,e),ERe=class t{constructor(e={}){this.options=e,this.requestHooks=[],this.requestErrorHooks=[],this.responseHooks=[],this.fetcher=e.fetcher||cJr}async request(e){let r=e;for(let n of this.requestHooks){let o=await n(r);o&&(r=o)}try{let n=await this.fetcher(r);for(let o of this.responseHooks)await o(n,r);return n}catch(n){for(let o of this.requestErrorHooks)await o(n,r);throw n}}addHook(...e){if(e[0]==="beforeRequest")this.requestHooks.push(e[1]);else if(e[0]==="requestError")this.requestErrorHooks.push(e[1]);else if(e[0]==="response")this.responseHooks.push(e[1]);else throw new Error(`Invalid hook type: ${e[0]}`);return this}removeHook(...e){let r;if(e[0]==="beforeRequest")r=this.requestHooks;else if(e[0]==="requestError")r=this.requestErrorHooks;else if(e[0]==="response")r=this.responseHooks;else throw new Error(`Invalid hook type: ${e[0]}`);let n=r.findIndex(o=>o===e[1]);return n>=0&&r.splice(n,1),this}clone(){let e=new t(this.options);return e.requestHooks=this.requestHooks.slice(),e.requestErrorHooks=this.requestErrorHooks.slice(),e.responseHooks=this.responseHooks.slice(),e}};yx.HTTPClient=ERe;var pMt=/\s*;\s*/g;function mMt(t,e){if(e==="*")return!0;let r=t.headers.get("content-type")?.trim()||"application/octet-stream";r=r.toLowerCase();let n=e.toLowerCase().trim().split(pMt),[o="",...i]=n;if(o.split("/").length!==2)return!1;let a=r.split(pMt),[s="",...u]=a,[l="",c=""]=s.split("/");if(!l||!c||o!=="*/*"&&s!==o&&`${l}/*`!==o&&`*/${c}`!==o||u.length<i.length)return!1;let d=new Set(u);for(let f of i)if(!d.has(f))return!1;return!0}var dJr=new RegExp("^[0-9]xx$","i");function hMt(t,e){let r=`${t.status}`,n=Array.isArray(e)?e:[e];return n.length?n.some(o=>{let i=`${o}`;if(i==="default")return!0;if(!dJr.test(`${i}`))return i===r;let a=i.charAt(0);if(!a)throw new Error("Invalid status code range");let s=r.charAt(0);if(!s)throw new Error(`Invalid response status code: ${r}`);return s===a}):!1}function fJr(t,e,r){return hMt(t,e)&&mMt(t,r)}function pJr(t){if(typeof t!="object"||t==null)return!1;let e=t instanceof TypeError&&t.message.toLowerCase().startsWith("failed to fetch"),r=t instanceof TypeError&&t.message.toLowerCase().startsWith("fetch failed"),n="name"in t&&t.name==="ConnectionError",o="code"in t&&typeof t.code=="string"&&t.code.toLowerCase()==="econnreset";return e||r||o||n}function mJr(t){if(typeof t!="object"||t==null)return!1;let e="name"in t&&t.name==="TimeoutError",r="code"in t&&t.code===23,n="code"in t&&typeof t.code=="string"&&t.code.toLowerCase()==="econnaborted";return e||r||n}function hJr(t){if(typeof t!="object"||t==null)return!1;let e="name"in t&&t.name==="AbortError",r="code"in t&&t.code===20,n="code"in t&&typeof t.code=="string"&&t.code.toLowerCase()==="econnaborted";return e||r||n}});var yMt=v(TN=>{"use strict";Object.defineProperty(TN,"__esModule",{value:!0});TN.TemporaryError=TN.PermanentError=void 0;TN.retry=yJr;var gMt=U6(),gJr={initialInterval:500,maxInterval:6e4,exponent:1.5,maxElapsedTime:36e5},z6=class t extends Error{constructor(e,r){let n=e;r?.cause&&(n+=`: ${r.cause}`),super(n,r),this.name="PermanentError",typeof this.cause>"u"&&(this.cause=r?.cause),Object.setPrototypeOf(this,t.prototype)}};TN.PermanentError=z6;var EN=class t extends Error{constructor(e,r){super(e),this.response=r,this.name="TemporaryError",Object.setPrototypeOf(this,t.prototype)}};TN.TemporaryError=EN;async function yJr(t,e){switch(e.config.strategy){case"backoff":return wJr(bJr(t,{statusCodes:e.statusCodes,retryConnectionErrors:!!e.config.retryConnectionErrors}),e.config.backoff??gJr);default:return await t()}}function bJr(t,e){return async()=>{try{let r=await t();if(vJr(r,e.statusCodes))throw new EN("Response failed with retryable status code",r);return r}catch(r){throw r instanceof EN||e.retryConnectionErrors&&((0,gMt.isTimeoutError)(r)||(0,gMt.isConnectionError)(r))?r:new z6("Permanent error",{cause:r})}}}var _Jr=new RegExp("^[0-9]xx$","i");function vJr(t,e){let r=`${t.status}`;return e.some(n=>{if(!_Jr.test(n))return n===r;let o=n.charAt(0);if(!o)throw new Error("Invalid status code range");let i=r.charAt(0);if(!i)throw new Error(`Invalid response status code: ${r}`);return i===o})}async function wJr(t,e){let{maxElapsedTime:r,initialInterval:n,exponent:o,maxInterval:i}=e,a=Date.now(),s=0;for(;;)try{return await t()}catch(u){if(u instanceof z6)throw u.cause;if(Date.now()-a>r){if(u instanceof EN)return u.response;throw u}let c=0;u instanceof EN&&(c=SJr(u.response)),c<=0&&(c=n*Math.pow(s,o)+Math.random()*1e3);let d=Math.min(c,i);await xJr(d),s++}}function SJr(t){let e=t.headers.get("retry-after")||"";if(!e)return 0;let r=Number(e);if(Number.isInteger(r))return r*1e3;let n=Date.parse(e);if(Number.isInteger(n)){let o=n-Date.now();return o>0?Math.ceil(o):0}return 0}async function xJr(t){return new Promise(e=>setTimeout(e,t))}});var Vm=v(lI=>{"use strict";var H6=lI&&lI.__classPrivateFieldSet||function(t,e,r,n,o){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!o:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?o.call(t,r):o?o.value=r:e.set(t,r),r},mg=lI&&lI.__classPrivateFieldGet||function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},Nie,bx,WO;Object.defineProperty(lI,"__esModule",{value:!0});lI.ClientSDK=void 0;var bMt=NIt(),kq=uRe(),uI=cg(),CJr=_Re(),_Mt=bie(),OJr=Xo(),PJr=PRe(),KO=U6(),EJr=yMt(),jie=typeof globalThis>"u"?null:globalThis,TJr=typeof jie=="object"&&jie!=null&&"importScripts"in jie&&typeof jie.importScripts=="function",AJr=TJr||typeof navigator<"u"&&"serviceWorker"in navigator||typeof window=="object"&&typeof window.document<"u",TRe=class{constructor(e={}){Nie.set(this,void 0),bx.set(this,void 0),WO.set(this,void 0);let r=e;typeof r=="object"&&r!=null&&"hooks"in r&&r.hooks instanceof bMt.SDKHooks?H6(this,bx,r.hooks,"f"):H6(this,bx,new bMt.SDKHooks,"f"),this._options={...e,hooks:mg(this,bx,"f")};let n=(0,_Mt.serverURLFromOptions)(e);n&&(n.pathname=n.pathname.replace(/\/+$/,"")+"/");let{baseURL:o,client:i}=mg(this,bx,"f").sdkInit({baseURL:n,client:e.httpClient||new KO.HTTPClient});this._baseURL=o,H6(this,Nie,i,"f"),H6(this,WO,e.debugLogger,"f"),!mg(this,WO,"f")&&(0,PJr.env)().MISTRAL_DEBUG&&H6(this,WO,console,"f")}_createRequest(e,r,n){let{method:o,path:i,query:a,headers:s,security:u}=r,l=r.baseURL??this._baseURL;if(!l)return(0,uI.ERR)(new kq.InvalidRequestError("No base URL provided for operation"));let c=new URL(l),d=new URL(i,c);i&&(c.pathname+=c.pathname.endsWith("/")?"":"/",c.pathname+=d.pathname.replace(/^\/+/,""));let f=a||"",p=[];for(let[P,E]of Object.entries(u?.queryParams||{})){let A=(0,OJr.encodeForm)(P,E,{charEncoding:"percent"});typeof A<"u"&&p.push(A)}if(p.length&&(f+=`&${p.join("&")}`),f){let P=f.startsWith("&")?f.slice(1):f;c.search=`?${P}`}let m=new Headers(s),h=u?.basic.username,b=u?.basic.password;if(h!=null||b!=null){let P=(0,CJr.stringToBase64)([h||"",b||""].join(":"));m.set("Authorization",`Basic ${P}`)}let g=new Headers(u?.headers||{});for(let[P,E]of g)m.set(P,E);let y=m.get("cookie")||"";for(let[P,E]of Object.entries(u?.cookies||{}))y+=`; ${P}=${E}`;y=y.startsWith("; ")?y.slice(2):y,m.set("cookie",y);let w=new Headers(n?.fetchOptions?.headers);for(let[P,E]of w)m.set(P,E);AJr||m.set(r.uaHeader??"user-agent",_Mt.SDK_METADATA.userAgent);let S=n?.fetchOptions;if(!S?.signal&&r.timeoutMs&&r.timeoutMs>0){let P=AbortSignal.timeout(r.timeoutMs);S?S.signal=P:S={signal:P}}r.body instanceof ReadableStream&&(S?S.duplex="half":S={duplex:"half"});let C;try{C=mg(this,bx,"f").beforeCreateRequest(e,{url:c,options:{...S,body:r.body??null,headers:m,method:o}})}catch(P){return(0,uI.ERR)(new kq.UnexpectedClientError("Create request hook failed to execute",{cause:P}))}return(0,uI.OK)(new Request(C.url,C.options))}async _do(e,r){let{context:n,errorCodes:o}=r;return(0,EJr.retry)(async()=>{let i=await mg(this,bx,"f").beforeRequest(n,e.clone());await IJr(mg(this,WO,"f"),i).catch(s=>mg(this,WO,"f")?.log("Failed to log request:",s));let a=await mg(this,Nie,"f").request(i);try{if((0,KO.matchStatusCode)(a,o)){let s=await mg(this,bx,"f").afterError(n,a,null);if(s.error)throw s.error;a=s.response||a}else a=await mg(this,bx,"f").afterSuccess(n,a)}finally{await MJr(mg(this,WO,"f"),a,i).catch(s=>mg(this,WO,"f")?.log("Failed to log response:",s))}return a},{config:r.retryConfig,statusCodes:r.retryCodes}).then(i=>(0,uI.OK)(i),i=>{switch(!0){case(0,KO.isAbortError)(i):return(0,uI.ERR)(new kq.RequestAbortedError("Request aborted by client",{cause:i}));case(0,KO.isTimeoutError)(i):return(0,uI.ERR)(new kq.RequestTimeoutError("Request timed out",{cause:i}));case(0,KO.isConnectionError)(i):return(0,uI.ERR)(new kq.ConnectionError("Unable to make request",{cause:i}));default:return(0,uI.ERR)(new kq.UnexpectedClientError("Unexpected HTTP client error",{cause:i}))}})}};lI.ClientSDK=TRe;Nie=new WeakMap,bx=new WeakMap,WO=new WeakMap;var vMt=/^application\/(?:.{0,100}\+)?json/;async function IJr(t,e){if(!t)return;let r=e.headers.get("content-type"),n=r?.split(";")[0]||"";t.group(`> Request: ${e.method} ${e.url}`),t.group("Headers:");for(let[o,i]of e.headers.entries())t.log(`${o}: ${i}`);switch(t.groupEnd(),t.group("Body:"),!0){case vMt.test(n):t.log(await e.clone().json());break;case n.startsWith("text/"):t.log(await e.clone().text());break;case n==="multipart/form-data":{let o=await e.clone().formData();for(let[i,a]of o){let s=a instanceof Blob?"<Blob>":a;t.log(`${i}: ${s}`)}break}default:t.log(`<${r}>`);break}t.groupEnd(),t.groupEnd()}async function MJr(t,e,r){if(!t)return;let n=e.headers.get("content-type"),o=n?.split(";")[0]||"";t.group(`< Response: ${r.method} ${r.url}`),t.log("Status Code:",e.status,e.statusText),t.group("Headers:");for(let[i,a]of e.headers.entries())t.log(`${i}: ${a}`);switch(t.groupEnd(),t.group("Body:"),!0){case((0,KO.matchContentType)(e,"application/json")||vMt.test(o)):t.log(await e.clone().json());break;case(0,KO.matchContentType)(e,"text/event-stream"):t.log(`<${n}>`);break;case(0,KO.matchContentType)(e,"text/*"):t.log(await e.clone().text());break;case(0,KO.matchContentType)(e,"multipart/form-data"):{let i=await e.clone().formData();for(let[a,s]of i){let u=s instanceof Blob?"<Blob>":s;t.log(`${a}: ${u}`)}break}default:t.log(`<${n}>`);break}t.groupEnd(),t.groupEnd()}});var IRe=v(Die=>{"use strict";Object.defineProperty(Die,"__esModule",{value:!0});Die.SDKError=void 0;var ARe=class extends Error{constructor(e,r,n=""){let o=r.status,i=r.headers.get("content-type")||"",a=n.length>0?`
${n}`:"";super(`${e}: Status ${o} Content-Type ${i} Body ${a}`),this.rawResponse=r,this.body=n,this.statusCode=o,this.contentType=i,this.name="SDKError"}};Die.SDKError=ARe});var G6=v(K6=>{"use strict";Object.defineProperty(K6,"__esModule",{value:!0});K6.EventStream=void 0;K6.discardSentinel=NJr;var V6=10,W6=13,wMt=new Set([V6,W6]),RJr=[new Uint8Array([W6,V6,W6,V6]),new Uint8Array([W6,W6]),new Uint8Array([V6,V6])],MRe=class{constructor(e){this.stream=e.stream,this.decoder=e.decoder}async*[Symbol.asyncIterator](){let e=this.stream.getReader(),r=new Uint8Array([]),n=0;try{for(;;){let{done:o,value:i}=await e.read();if(o)break;let a=new Uint8Array(r.length+i.length);a.set(r),a.set(i,r.length),r=a;for(let s=n;s<r.length;s++){let u=SMt(r,s);if(u==null)continue;let l=r.slice(n,s);n=s+u.length;let c=RRe(l,this.decoder);c!=null&&(yield c)}n>0&&(r=r.slice(n),n=0)}if(r.length>0){let o=RRe(r,this.decoder);o!=null&&(yield o)}}catch(o){if(o instanceof Error&&o.name==="AbortError")return;throw o}finally{e.releaseLock()}}};K6.EventStream=MRe;function SMt(t,e){let r=t[e],n=t[e+1];if(r==null||n==null||!wMt.has(r)||!wMt.has(n))return null;for(let o of RJr){let i=jJr(e,t,o);if(i!=null)return i}return null}function jJr(t,e,r){if(r.length>e.length-t)return null;for(let n=0;n<r.length;n++)if(e[t+n]!==r[n])return null;return r}function RRe(t,e){if(!t.length)return null;let o=new TextDecoder().decode(t).split(/\r?\n|\r/g),i=!1,a={};for(let s of o){if(!s)continue;let u=s.indexOf(":");if(u===0)continue;let l=u>0?s.substring(0,u):"",c=u>0?s.substring(u+1):"";switch(c.charAt(0)===" "&&(c=c.substring(1)),l){case"event":{i=!0,a.event=c;break}case"data":{i=!0,a.data??(a.data=""),a.data+=c+`
`;break}case"id":{i=!0,a.id=c;break}case"retry":{let d=parseInt(c,10);Number.isNaN(d)||(i=!0,a.retry=d);break}}}return i?(a.data!=null&&(a.data=a.data.slice(0,-1)),e(a)):null}function NJr(t,e){return new ReadableStream({async start(r){let n=new Uint8Array([]),o=0,i=!1,a=!1,s=t.getReader();try{for(;!i;){let u=await s.read(),l=u.value;if(i=i||u.done,a||typeof l>"u")continue;let c=new Uint8Array(n.length+l.length);c.set(n),c.set(l,n.length),n=c;for(let d=o;d<n.length;d++){let f=SMt(n,d);if(f==null)continue;let p=o,m=n.slice(p,d);o=d+f.length,RRe(m,DJr)?.data===e?(r.enqueue(n.slice(0,p)),a=!0):(r.enqueue(n.slice(0,o)),n=n.slice(o),o=0)}}}catch(u){r.error(u)}finally{r.close(),s.releaseLock()}}})}function DJr(t){return t}});var DRe=v(Vy=>{"use strict";var LJr=Vy&&Vy.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),FJr=Vy&&Vy.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),kJr=Vy&&Vy.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&LJr(e,t,r);return FJr(e,t),e};Object.defineProperty(Vy,"__esModule",{value:!0});Vy.SDKValidationError=void 0;Vy.formatZodError=NRe;var $Jr=kJr(Te()),jRe=class extends Error{constructor(e,r,n){super(`${e}: ${r}`),this.name="SDKValidationError",this.cause=r,this.rawValue=n,this.rawMessage=e}pretty(){return this.cause instanceof $Jr.ZodError?`${this.rawMessage}
${NRe(this.cause)}`:this.toString()}};Vy.SDKValidationError=jRe;function NRe(t,e=0){let r="  ".repeat(e);r=e>0?`\u2502${r}`:r,r+=" ".repeat(e);let n="",o=s=>n+=`
${r}${s}`,i=t.issues.length,a=i===1?`${i} issue found`:`${i} issues found`;i&&o(`\u250C ${a}:`);for(let s of t.issues){let u=s.path.join(".");switch(u=u?`<root>.${u}`:"<root>",o(`\u2502 \u2022 [${u}]: ${s.message} (${s.code})`),s.code){case"invalid_literal":case"invalid_type":{o(`\u2502     Want: ${s.expected}`),o(`\u2502      Got: ${s.received}`);break}case"unrecognized_keys":{o(`\u2502     Keys: ${s.keys.join(", ")}`);break}case"invalid_enum_value":{o(`\u2502     Allowed: ${s.options.join(", ")}`),o(`\u2502         Got: ${s.received}`);break}case"invalid_union_discriminator":{o(`\u2502     Allowed: ${s.options.join(", ")}`);break}case"invalid_union":{let l=s.unionErrors.length;o(`\u2502   \u2716\uFE0E Attemped to deserialize into one of ${l} union members:`),s.unionErrors.forEach((c,d)=>{o(`\u2502   \u2716\uFE0E Member ${d+1} of ${l}`),o(`${NRe(c,e+1)}`)})}}}return t.issues.length&&o("\u2514\u2500*"),n.slice(1)}});var ve=v(J6=>{"use strict";Object.defineProperty(J6,"__esModule",{value:!0});J6.parse=qJr;J6.safeParse=UJr;J6.collectExtraKeys=zJr;var BJr=Te(),CMt=DRe(),xMt=cg();function qJr(t,e,r){try{return e(t)}catch(n){throw n instanceof BJr.ZodError?new CMt.SDKValidationError(r,n,t):n}}function UJr(t,e,r){try{return(0,xMt.OK)(e(t))}catch(n){return(0,xMt.ERR)(new CMt.SDKValidationError(r,n,t))}}function zJr(t,e,r){return t.transform(n=>{let o={},{shape:i}=t;for(let[a]of Object.entries(n)){if(a in i)continue;let s=n[a];typeof s>"u"||(o[a]=s,delete n[a])}return r&&Object.keys(o).length===0?n:{...n,[e]:o}})}});var Qo=v(rc=>{"use strict";Object.defineProperty(rc,"__esModule",{value:!0});rc.jsonErr=WJr;rc.json=KJr;rc.textErr=GJr;rc.text=JJr;rc.bytesErr=YJr;rc.bytes=ZJr;rc.streamErr=XJr;rc.stream=QJr;rc.sseErr=e7r;rc.sse=t7r;rc.nilErr=r7r;rc.nil=n7r;rc.fail=o7r;rc.match=i7r;rc.unpackHeaders=Lie;rc.discardResponseBody=AMt;var OMt=IRe(),HJr=G6(),PMt=U6(),EMt=wRe(),TMt=ve(),VJr={json:"application/json",text:"text/plain",bytes:"application/octet-stream",stream:"application/octet-stream",sse:"text/event-stream",nil:"*",fail:"*"};function WJr(t,e,r){return{...r,err:!0,enc:"json",codes:t,schema:e}}function KJr(t,e,r){return{...r,enc:"json",codes:t,schema:e}}function GJr(t,e,r){return{...r,err:!0,enc:"text",codes:t,schema:e}}function JJr(t,e,r){return{...r,enc:"text",codes:t,schema:e}}function YJr(t,e,r){return{...r,err:!0,enc:"bytes",codes:t,schema:e}}function ZJr(t,e,r){return{...r,enc:"bytes",codes:t,schema:e}}function XJr(t,e,r){return{...r,err:!0,enc:"stream",codes:t,schema:e}}function QJr(t,e,r){return{...r,enc:"stream",codes:t,schema:e}}function e7r(t,e,r){return{...r,err:!0,enc:"sse",codes:t,schema:e}}function t7r(t,e,r){return{...r,enc:"sse",codes:t,schema:e}}function r7r(t,e,r){return{...r,err:!0,enc:"nil",codes:t,schema:e}}function n7r(t,e,r){return{...r,enc:"nil",codes:t,schema:e}}function o7r(t){return{enc:"fail",codes:t}}function i7r(...t){return async function(r,n){let o,i;for(let l of t){let{codes:c}=l,d="ctype"in l?l.ctype:VJr[l.enc];if(d&&(0,PMt.matchResponse)(r,c,d)){i=l;break}else if(!d&&(0,PMt.matchStatusCode)(r,c)){i=l;break}}if(!i){let l=await r.text();return[{ok:!1,error:new OMt.SDKError("Unexpected API response status or content-type",r,l)},l]}let a=i.enc;switch(a){case"json":o=await r.json();break;case"bytes":o=new Uint8Array(await r.arrayBuffer());break;case"stream":o=r.body;break;case"text":o=await r.text();break;case"sse":o=r.body&&i.sseSentinel?(0,HJr.discardSentinel)(r.body,i.sseSentinel):r.body;break;case"nil":o=await AMt(r);break;case"fail":o=await r.text();break;default:throw new Error(`Unsupported response type: ${a}`)}if(i.enc==="fail")return[{ok:!1,error:new OMt.SDKError("API error occurred",r,typeof o=="string"?o:"")},o];let s=i.key||n?.resultKey,u;if("err"in i?u={...n?.extraFields,...i.hdrs?{Headers:Lie(r.headers)}:null,...(0,EMt.isPlainObject)(o)?o:null}:s?u={...n?.extraFields,...i.hdrs?{Headers:Lie(r.headers)}:null,[s]:o}:i.hdrs?u={...n?.extraFields,...i.hdrs?{Headers:Lie(r.headers)}:null,...(0,EMt.isPlainObject)(o)?o:null}:u=o,"err"in i){let l=(0,TMt.safeParse)(u,c=>i.schema.parse(c),"Response validation failed");return[l.ok?{ok:!1,error:l.value}:l,o]}else return[(0,TMt.safeParse)(u,l=>i.schema.parse(l),"Response validation failed"),o]}}var a7r=/, */;function Lie(t){let e={};for(let[r,n]of t.entries())e[r]=n.split(a7r);return e}async function AMt(t){let e=t.body?.getReader();if(e!=null)try{let r=!1;for(;!r;)r=(await e.read()).done}finally{e.releaseLock()}}});var qe=v(AN=>{"use strict";Object.defineProperty(AN,"__esModule",{value:!0});AN.invariant=s7r;AN.remap=u7r;AN.combineSignals=l7r;AN.abortSignalAny=IMt;AN.compactMap=c7r;var LRe=class extends Error{constructor(e){super(e),this.name="InvariantError"}};function s7r(t,e){if(!t)throw new LRe(e)}function u7r(t,e){let r={};if(!Object.keys(e).length)return r=t,r;for(let[n,o]of Object.entries(t)){let i=e[n];i!==null&&(r[i??n]=o)}return r}function l7r(...t){let e=[];for(let r of t)r&&e.push(r);switch(e.length){case 0:case 1:return e[0]||null;default:return"any"in AbortSignal&&typeof AbortSignal.any=="function"?AbortSignal.any(e):IMt(e)}}function IMt(t){let e=new AbortController,r=e.signal;if(!t.length)return e.signal;if(t.length===1)return t[0]||e.signal;for(let a of t)if(a.aborted)return a;function n(){e.abort(this.reason),i()}let o=[];function i(){for(let a of o){let s=a.deref();s&&s.removeEventListener("abort",n)}}for(let a of t)o.push(new WeakRef(a)),a.addEventListener("abort",n);return r}function c7r(t){let e={};for(let[r,n]of Object.entries(t))typeof n<"u"&&(e[r]=n);return e}});var ei=v(GO=>{"use strict";Object.defineProperty(GO,"__esModule",{value:!0});GO.SecurityError=GO.SecurityErrorCode=void 0;GO.resolveSecurity=MMt;GO.resolveGlobalSecurity=p7r;GO.extractSecurity=m7r;var d7r=PRe(),kie;(function(t){t.Incomplete="incomplete",t.UnrecognisedSecurityType="unrecognized_security_type"})(kie||(GO.SecurityErrorCode=kie={}));var $ie=class t extends Error{constructor(e,r){super(r),this.code=e,this.name="SecurityError"}static incomplete(){return new t(kie.Incomplete,"Security requirements not met in order to perform the operation")}static unrecognizedType(e){return new t(kie.UnrecognisedSecurityType,`Unrecognised security type: ${e}`)}};GO.SecurityError=$ie;function MMt(...t){let e={basic:{},headers:{},queryParams:{},cookies:{},oauth2:{type:"none"}},r=t.find(n=>n.every(o=>{if(o.value==null)return!1;if(o.type==="http:basic")return o.value.username!=null||o.value.password!=null;if(o.type==="http:custom")return null;if(o.type==="oauth2:password")return typeof o.value=="string"&&!!o.value;if(o.type==="oauth2:client_credentials")return o.value.clientID!=null||o.value.clientSecret!=null;if(typeof o.value=="string")return!!o.value;throw new Error(`Unrecognized security type: ${o.type} (value type: ${typeof o.value})`)}));return r==null?null:(r.forEach(n=>{if(n.value==null)return;let{type:o}=n;switch(o){case"apiKey:header":e.headers[n.fieldName]=n.value;break;case"apiKey:query":e.queryParams[n.fieldName]=n.value;break;case"apiKey:cookie":e.cookies[n.fieldName]=n.value;break;case"http:basic":f7r(e,n);break;case"http:custom":break;case"http:bearer":Fie(e,n);break;case"oauth2":Fie(e,n);break;case"oauth2:password":Fie(e,n);break;case"oauth2:client_credentials":break;case"openIdConnect":Fie(e,n);break;default:throw $ie.unrecognizedType(o)}}),e)}function f7r(t,e){e.value!=null&&(t.basic=e.value)}function Fie(t,e){if(typeof e.value!="string"||!e.value)return;let r=e.value;r.slice(0,7).toLowerCase()!=="bearer "&&(r=`Bearer ${r}`),t.headers[e.fieldName]=r}function p7r(t){return MMt([{fieldName:"Authorization",type:"http:bearer",value:t?.apiKey??(0,d7r.env)().MISTRAL_API_KEY}])}async function m7r(t){if(t!=null)return typeof t=="function"?t():t}});var FRe=v(Ws=>{"use strict";var h7r=Ws&&Ws.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),g7r=Ws&&Ws.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),y7r=Ws&&Ws.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&h7r(e,t,r);return g7r(e,t),e};Object.defineProperty(Ws,"__esModule",{value:!0});Ws.ImageURL$=Ws.ImageURL$outboundSchema=Ws.ImageURL$inboundSchema=void 0;Ws.imageURLToJSON=_7r;Ws.imageURLFromJSON=v7r;var cI=y7r(Te()),b7r=ve();Ws.ImageURL$inboundSchema=cI.object({url:cI.string(),detail:cI.nullable(cI.string()).optional()});Ws.ImageURL$outboundSchema=cI.object({url:cI.string(),detail:cI.nullable(cI.string()).optional()});var RMt;(function(t){t.inboundSchema=Ws.ImageURL$inboundSchema,t.outboundSchema=Ws.ImageURL$outboundSchema})(RMt||(Ws.ImageURL$=RMt={}));function _7r(t){return JSON.stringify(Ws.ImageURL$outboundSchema.parse(t))}function v7r(t){return(0,b7r.safeParse)(t,e=>Ws.ImageURL$inboundSchema.parse(JSON.parse(e)),"Failed to parse 'ImageURL' from JSON")}});var kRe=v(Or=>{"use strict";var w7r=Or&&Or.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),S7r=Or&&Or.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),x7r=Or&&Or.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&w7r(e,t,r);return S7r(e,t),e};Object.defineProperty(Or,"__esModule",{value:!0});Or.ImageURLChunk$=Or.ImageURLChunk$outboundSchema=Or.ImageURLChunk$inboundSchema=Or.ImageURLChunkType$=Or.ImageURLChunkType$outboundSchema=Or.ImageURLChunkType$inboundSchema=Or.ImageURLChunkImageURL$=Or.ImageURLChunkImageURL$outboundSchema=Or.ImageURLChunkImageURL$inboundSchema=Or.ImageURLChunkType=void 0;Or.imageURLChunkImageURLToJSON=C7r;Or.imageURLChunkImageURLFromJSON=O7r;Or.imageURLChunkToJSON=P7r;Or.imageURLChunkFromJSON=E7r;var Wy=x7r(Te()),LMt=qe(),FMt=ve(),Bie=FRe();Or.ImageURLChunkType={ImageUrl:"image_url"};Or.ImageURLChunkImageURL$inboundSchema=Wy.union([Bie.ImageURL$inboundSchema,Wy.string()]);Or.ImageURLChunkImageURL$outboundSchema=Wy.union([Bie.ImageURL$outboundSchema,Wy.string()]);var jMt;(function(t){t.inboundSchema=Or.ImageURLChunkImageURL$inboundSchema,t.outboundSchema=Or.ImageURLChunkImageURL$outboundSchema})(jMt||(Or.ImageURLChunkImageURL$=jMt={}));function C7r(t){return JSON.stringify(Or.ImageURLChunkImageURL$outboundSchema.parse(t))}function O7r(t){return(0,FMt.safeParse)(t,e=>Or.ImageURLChunkImageURL$inboundSchema.parse(JSON.parse(e)),"Failed to parse 'ImageURLChunkImageURL' from JSON")}Or.ImageURLChunkType$inboundSchema=Wy.nativeEnum(Or.ImageURLChunkType);Or.ImageURLChunkType$outboundSchema=Or.ImageURLChunkType$inboundSchema;var NMt;(function(t){t.inboundSchema=Or.ImageURLChunkType$inboundSchema,t.outboundSchema=Or.ImageURLChunkType$outboundSchema})(NMt||(Or.ImageURLChunkType$=NMt={}));Or.ImageURLChunk$inboundSchema=Wy.object({image_url:Wy.union([Bie.ImageURL$inboundSchema,Wy.string()]),type:Or.ImageURLChunkType$inboundSchema.default("image_url")}).transform(t=>(0,LMt.remap)(t,{image_url:"imageUrl"}));Or.ImageURLChunk$outboundSchema=Wy.object({imageUrl:Wy.union([Bie.ImageURL$outboundSchema,Wy.string()]),type:Or.ImageURLChunkType$outboundSchema.default("image_url")}).transform(t=>(0,LMt.remap)(t,{imageUrl:"image_url"}));var DMt;(function(t){t.inboundSchema=Or.ImageURLChunk$inboundSchema,t.outboundSchema=Or.ImageURLChunk$outboundSchema})(DMt||(Or.ImageURLChunk$=DMt={}));function P7r(t){return JSON.stringify(Or.ImageURLChunk$outboundSchema.parse(t))}function E7r(t){return(0,FMt.safeParse)(t,e=>Or.ImageURLChunk$inboundSchema.parse(JSON.parse(e)),"Failed to parse 'ImageURLChunk' from JSON")}});var $Re=v(to=>{"use strict";var T7r=to&&to.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),A7r=to&&to.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),I7r=to&&to.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&T7r(e,t,r);return A7r(e,t),e};Object.defineProperty(to,"__esModule",{value:!0});to.ReferenceChunk$=to.ReferenceChunk$outboundSchema=to.ReferenceChunk$inboundSchema=to.ReferenceChunkType$=to.ReferenceChunkType$outboundSchema=to.ReferenceChunkType$inboundSchema=to.ReferenceChunkType=void 0;to.referenceChunkToJSON=R7r;to.referenceChunkFromJSON=j7r;var IN=I7r(Te()),BMt=qe(),M7r=ve();to.ReferenceChunkType={Reference:"reference"};to.ReferenceChunkType$inboundSchema=IN.nativeEnum(to.ReferenceChunkType);to.ReferenceChunkType$outboundSchema=to.ReferenceChunkType$inboundSchema;var kMt;(function(t){t.inboundSchema=to.ReferenceChunkType$inboundSchema,t.outboundSchema=to.ReferenceChunkType$outboundSchema})(kMt||(to.ReferenceChunkType$=kMt={}));to.ReferenceChunk$inboundSchema=IN.object({reference_ids:IN.array(IN.number().int()),type:to.ReferenceChunkType$inboundSchema.default("reference")}).transform(t=>(0,BMt.remap)(t,{reference_ids:"referenceIds"}));to.ReferenceChunk$outboundSchema=IN.object({referenceIds:IN.array(IN.number().int()),type:to.ReferenceChunkType$outboundSchema.default("reference")}).transform(t=>(0,BMt.remap)(t,{referenceIds:"reference_ids"}));var $Mt;(function(t){t.inboundSchema=to.ReferenceChunk$inboundSchema,t.outboundSchema=to.ReferenceChunk$outboundSchema})($Mt||(to.ReferenceChunk$=$Mt={}));function R7r(t){return JSON.stringify(to.ReferenceChunk$outboundSchema.parse(t))}function j7r(t){return(0,M7r.safeParse)(t,e=>to.ReferenceChunk$inboundSchema.parse(JSON.parse(e)),"Failed to parse 'ReferenceChunk' from JSON")}});var qie=v(ro=>{"use strict";var N7r=ro&&ro.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),D7r=ro&&ro.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),L7r=ro&&ro.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&N7r(e,t,r);return D7r(e,t),e};Object.defineProperty(ro,"__esModule",{value:!0});ro.TextChunk$=ro.TextChunk$outboundSchema=ro.TextChunk$inboundSchema=ro.TextChunkType$=ro.TextChunkType$outboundSchema=ro.TextChunkType$inboundSchema=ro.TextChunkType=void 0;ro.textChunkToJSON=k7r;ro.textChunkFromJSON=$7r;var Y6=L7r(Te()),F7r=ve();ro.TextChunkType={Text:"text"};ro.TextChunkType$inboundSchema=Y6.nativeEnum(ro.TextChunkType);ro.TextChunkType$outboundSchema=ro.TextChunkType$inboundSchema;var qMt;(function(t){t.inboundSchema=ro.TextChunkType$inboundSchema,t.outboundSchema=ro.TextChunkType$outboundSchema})(qMt||(ro.TextChunkType$=qMt={}));ro.TextChunk$inboundSchema=Y6.object({text:Y6.string(),type:ro.TextChunkType$inboundSchema.default("text")});ro.TextChunk$outboundSchema=Y6.object({text:Y6.string(),type:ro.TextChunkType$outboundSchema.default("text")});var UMt;(function(t){t.inboundSchema=ro.TextChunk$inboundSchema,t.outboundSchema=ro.TextChunk$outboundSchema})(UMt||(ro.TextChunk$=UMt={}));function k7r(t){return JSON.stringify(ro.TextChunk$outboundSchema.parse(t))}function $7r(t){return(0,F7r.safeParse)(t,e=>ro.TextChunk$inboundSchema.parse(JSON.parse(e)),"Failed to parse 'TextChunk' from JSON")}});var $q=v(Ks=>{"use strict";var B7r=Ks&&Ks.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),q7r=Ks&&Ks.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),U7r=Ks&&Ks.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&B7r(e,t,r);return q7r(e,t),e};Object.defineProperty(Ks,"__esModule",{value:!0});Ks.ContentChunk$=Ks.ContentChunk$outboundSchema=Ks.ContentChunk$inboundSchema=void 0;Ks.contentChunkToJSON=H7r;Ks.contentChunkFromJSON=V7r;var qp=U7r(Te()),z7r=ve(),HMt=kRe(),VMt=$Re(),WMt=qie();Ks.ContentChunk$inboundSchema=qp.union([HMt.ImageURLChunk$inboundSchema.and(qp.object({type:qp.literal("image_url")}).transform(t=>({type:t.type}))),WMt.TextChunk$inboundSchema.and(qp.object({type:qp.literal("text")}).transform(t=>({type:t.type}))),VMt.ReferenceChunk$inboundSchema.and(qp.object({type:qp.literal("reference")}).transform(t=>({type:t.type})))]);Ks.ContentChunk$outboundSchema=qp.union([HMt.ImageURLChunk$outboundSchema.and(qp.object({type:qp.literal("image_url")}).transform(t=>({type:t.type}))),WMt.TextChunk$outboundSchema.and(qp.object({type:qp.literal("text")}).transform(t=>({type:t.type}))),VMt.ReferenceChunk$outboundSchema.and(qp.object({type:qp.literal("reference")}).transform(t=>({type:t.type})))]);var zMt;(function(t){t.inboundSchema=Ks.ContentChunk$inboundSchema,t.outboundSchema=Ks.ContentChunk$outboundSchema})(zMt||(Ks.ContentChunk$=zMt={}));function H7r(t){return JSON.stringify(Ks.ContentChunk$outboundSchema.parse(t))}function V7r(t){return(0,z7r.safeParse)(t,e=>Ks.ContentChunk$inboundSchema.parse(JSON.parse(e)),"Failed to parse 'ContentChunk' from JSON")}});var BRe=v(So=>{"use strict";var W7r=So&&So.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),K7r=So&&So.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),G7r=So&&So.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&W7r(e,t,r);return K7r(e,t),e};Object.defineProperty(So,"__esModule",{value:!0});So.FunctionCall$=So.FunctionCall$outboundSchema=So.FunctionCall$inboundSchema=So.Arguments$=So.Arguments$outboundSchema=So.Arguments$inboundSchema=void 0;So.argumentsToJSON=J7r;So.argumentsFromJSON=Y7r;So.functionCallToJSON=Z7r;So.functionCallFromJSON=X7r;var Gs=G7r(Te()),JMt=ve();So.Arguments$inboundSchema=Gs.union([Gs.record(Gs.any()),Gs.string()]);So.Arguments$outboundSchema=Gs.union([Gs.record(Gs.any()),Gs.string()]);var KMt;(function(t){t.inboundSchema=So.Arguments$inboundSchema,t.outboundSchema=So.Arguments$outboundSchema})(KMt||(So.Arguments$=KMt={}));function J7r(t){return JSON.stringify(So.Arguments$outboundSchema.parse(t))}function Y7r(t){return(0,JMt.safeParse)(t,e=>So.Arguments$inboundSchema.parse(JSON.parse(e)),"Failed to parse 'Arguments' from JSON")}So.FunctionCall$inboundSchema=Gs.object({name:Gs.string(),arguments:Gs.union([Gs.record(Gs.any()),Gs.string()])});So.FunctionCall$outboundSchema=Gs.object({name:Gs.string(),arguments:Gs.union([Gs.record(Gs.any()),Gs.string()])});var GMt;(function(t){t.inboundSchema=So.FunctionCall$inboundSchema,t.outboundSchema=So.FunctionCall$outboundSchema})(GMt||(So.FunctionCall$=GMt={}));function Z7r(t){return JSON.stringify(So.FunctionCall$outboundSchema.parse(t))}function X7r(t){return(0,JMt.safeParse)(t,e=>So.FunctionCall$inboundSchema.parse(JSON.parse(e)),"Failed to parse 'FunctionCall' from JSON")}});var dI=v(qRe=>{"use strict";Object.defineProperty(qRe,"__esModule",{value:!0});qRe.catchUnrecognizedEnum=Q7r;function Q7r(t){return t}});var Z6=v(Js=>{"use strict";var eYr=Js&&Js.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),tYr=Js&&Js.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),rYr=Js&&Js.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&eYr(e,t,r);return tYr(e,t),e};Object.defineProperty(Js,"__esModule",{value:!0});Js.ToolTypes$=Js.ToolTypes$outboundSchema=Js.ToolTypes$inboundSchema=Js.ToolTypes=void 0;var MN=rYr(Te()),nYr=dI();Js.ToolTypes={Function:"function"};Js.ToolTypes$inboundSchema=MN.union([MN.nativeEnum(Js.ToolTypes),MN.string().transform(nYr.catchUnrecognizedEnum)]);Js.ToolTypes$outboundSchema=MN.union([MN.nativeEnum(Js.ToolTypes),MN.string().and(MN.custom())]);var YMt;(function(t){t.inboundSchema=Js.ToolTypes$inboundSchema,t.outboundSchema=Js.ToolTypes$outboundSchema})(YMt||(Js.ToolTypes$=YMt={}))});var Uie=v(Ys=>{"use strict";var oYr=Ys&&Ys.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),iYr=Ys&&Ys.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),aYr=Ys&&Ys.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&oYr(e,t,r);return iYr(e,t),e};Object.defineProperty(Ys,"__esModule",{value:!0});Ys.ToolCall$=Ys.ToolCall$outboundSchema=Ys.ToolCall$inboundSchema=void 0;Ys.toolCallToJSON=uYr;Ys.toolCallFromJSON=lYr;var Bq=aYr(Te()),sYr=ve(),XMt=BRe(),QMt=Z6();Ys.ToolCall$inboundSchema=Bq.object({id:Bq.string().default("null"),type:QMt.ToolTypes$inboundSchema.optional(),function:XMt.FunctionCall$inboundSchema,index:Bq.number().int().default(0)});Ys.ToolCall$outboundSchema=Bq.object({id:Bq.string().default("null"),type:QMt.ToolTypes$outboundSchema.optional(),function:XMt.FunctionCall$outboundSchema,index:Bq.number().int().default(0)});var ZMt;(function(t){t.inboundSchema=Ys.ToolCall$inboundSchema,t.outboundSchema=Ys.ToolCall$outboundSchema})(ZMt||(Ys.ToolCall$=ZMt={}));function uYr(t){return JSON.stringify(Ys.ToolCall$outboundSchema.parse(t))}function lYr(t){return(0,sYr.safeParse)(t,e=>Ys.ToolCall$inboundSchema.parse(JSON.parse(e)),"Failed to parse 'ToolCall' from JSON")}});var fI=v(Pr=>{"use strict";var cYr=Pr&&Pr.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),dYr=Pr&&Pr.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),fYr=Pr&&Pr.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&cYr(e,t,r);return dYr(e,t),e};Object.defineProperty(Pr,"__esModule",{value:!0});Pr.AssistantMessage$=Pr.AssistantMessage$outboundSchema=Pr.AssistantMessage$inboundSchema=Pr.AssistantMessageRole$=Pr.AssistantMessageRole$outboundSchema=Pr.AssistantMessageRole$inboundSchema=Pr.AssistantMessageContent$=Pr.AssistantMessageContent$outboundSchema=Pr.AssistantMessageContent$inboundSchema=Pr.AssistantMessageRole=void 0;Pr.assistantMessageContentToJSON=pYr;Pr.assistantMessageContentFromJSON=mYr;Pr.assistantMessageToJSON=hYr;Pr.assistantMessageFromJSON=gYr;var Va=fYr(Te()),nRt=qe(),oRt=ve(),zie=$q(),iRt=Uie();Pr.AssistantMessageRole={Assistant:"assistant"};Pr.AssistantMessageContent$inboundSchema=Va.union([Va.string(),Va.array(zie.ContentChunk$inboundSchema)]);Pr.AssistantMessageContent$outboundSchema=Va.union([Va.string(),Va.array(zie.ContentChunk$outboundSchema)]);var eRt;(function(t){t.inboundSchema=Pr.AssistantMessageContent$inboundSchema,t.outboundSchema=Pr.AssistantMessageContent$outboundSchema})(eRt||(Pr.AssistantMessageContent$=eRt={}));function pYr(t){return JSON.stringify(Pr.AssistantMessageContent$outboundSchema.parse(t))}function mYr(t){return(0,oRt.safeParse)(t,e=>Pr.AssistantMessageContent$inboundSchema.parse(JSON.parse(e)),"Failed to parse 'AssistantMessageContent' from JSON")}Pr.AssistantMessageRole$inboundSchema=Va.nativeEnum(Pr.AssistantMessageRole);Pr.AssistantMessageRole$outboundSchema=Pr.AssistantMessageRole$inboundSchema;var tRt;(function(t){t.inboundSchema=Pr.AssistantMessageRole$inboundSchema,t.outboundSchema=Pr.AssistantMessageRole$outboundSchema})(tRt||(Pr.AssistantMessageRole$=tRt={}));Pr.AssistantMessage$inboundSchema=Va.object({content:Va.nullable(Va.union([Va.string(),Va.array(zie.ContentChunk$inboundSchema)])).optional(),tool_calls:Va.nullable(Va.array(iRt.ToolCall$inboundSchema)).optional(),prefix:Va.boolean().default(!1),role:Pr.AssistantMessageRole$inboundSchema.default("assistant")}).transform(t=>(0,nRt.remap)(t,{tool_calls:"toolCalls"}));Pr.AssistantMessage$outboundSchema=Va.object({content:Va.nullable(Va.union([Va.string(),Va.array(zie.ContentChunk$outboundSchema)])).optional(),toolCalls:Va.nullable(Va.array(iRt.ToolCall$outboundSchema)).optional(),prefix:Va.boolean().default(!1),role:Pr.AssistantMessageRole$outboundSchema.default("assistant")}).transform(t=>(0,nRt.remap)(t,{toolCalls:"tool_calls"}));var rRt;(function(t){t.inboundSchema=Pr.AssistantMessage$inboundSchema,t.outboundSchema=Pr.AssistantMessage$outboundSchema})(rRt||(Pr.AssistantMessage$=rRt={}));function hYr(t){return JSON.stringify(Pr.AssistantMessage$outboundSchema.parse(t))}function gYr(t){return(0,oRt.safeParse)(t,e=>Pr.AssistantMessage$inboundSchema.parse(JSON.parse(e)),"Failed to parse 'AssistantMessage' from JSON")}});var qq=v(xo=>{"use strict";var yYr=xo&&xo.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),bYr=xo&&xo.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),_Yr=xo&&xo.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&yYr(e,t,r);return bYr(e,t),e};Object.defineProperty(xo,"__esModule",{value:!0});xo.Prediction$=xo.Prediction$outboundSchema=xo.Prediction$inboundSchema=xo.PredictionType$=xo.PredictionType$outboundSchema=xo.PredictionType$inboundSchema=xo.PredictionType=void 0;xo.predictionToJSON=wYr;xo.predictionFromJSON=SYr;var RN=_Yr(Te()),vYr=ve();xo.PredictionType={Content:"content"};xo.PredictionType$inboundSchema=RN.nativeEnum(xo.PredictionType);xo.PredictionType$outboundSchema=xo.PredictionType$inboundSchema;var aRt;(function(t){t.inboundSchema=xo.PredictionType$inboundSchema,t.outboundSchema=xo.PredictionType$outboundSchema})(aRt||(xo.PredictionType$=aRt={}));xo.Prediction$inboundSchema=RN.object({type:RN.literal("content").default("content"),content:RN.string().default("")});xo.Prediction$outboundSchema=RN.object({type:RN.literal("content").default("content"),content:RN.string().default("")});var sRt;(function(t){t.inboundSchema=xo.Prediction$inboundSchema,t.outboundSchema=xo.Prediction$outboundSchema})(sRt||(xo.Prediction$=sRt={}));function wYr(t){return JSON.stringify(xo.Prediction$outboundSchema.parse(t))}function SYr(t){return(0,vYr.safeParse)(t,e=>xo.Prediction$inboundSchema.parse(JSON.parse(e)),"Failed to parse 'Prediction' from JSON")}});var URe=v(Zs=>{"use strict";var xYr=Zs&&Zs.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),CYr=Zs&&Zs.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),OYr=Zs&&Zs.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&xYr(e,t,r);return CYr(e,t),e};Object.defineProperty(Zs,"__esModule",{value:!0});Zs.JsonSchema$=Zs.JsonSchema$outboundSchema=Zs.JsonSchema$inboundSchema=void 0;Zs.jsonSchemaToJSON=EYr;Zs.jsonSchemaFromJSON=TYr;var Up=OYr(Te()),lRt=qe(),PYr=ve();Zs.JsonSchema$inboundSchema=Up.object({name:Up.string(),description:Up.nullable(Up.string()).optional(),schema:Up.record(Up.any()),strict:Up.boolean().default(!1)}).transform(t=>(0,lRt.remap)(t,{schema:"schemaDefinition"}));Zs.JsonSchema$outboundSchema=Up.object({name:Up.string(),description:Up.nullable(Up.string()).optional(),schemaDefinition:Up.record(Up.any()),strict:Up.boolean().default(!1)}).transform(t=>(0,lRt.remap)(t,{schemaDefinition:"schema"}));var uRt;(function(t){t.inboundSchema=Zs.JsonSchema$inboundSchema,t.outboundSchema=Zs.JsonSchema$outboundSchema})(uRt||(Zs.JsonSchema$=uRt={}));function EYr(t){return JSON.stringify(Zs.JsonSchema$outboundSchema.parse(t))}function TYr(t){return(0,PYr.safeParse)(t,e=>Zs.JsonSchema$inboundSchema.parse(JSON.parse(e)),"Failed to parse 'JsonSchema' from JSON")}});var zRe=v(Xs=>{"use strict";var AYr=Xs&&Xs.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),IYr=Xs&&Xs.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),MYr=Xs&&Xs.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&AYr(e,t,r);return IYr(e,t),e};Object.defineProperty(Xs,"__esModule",{value:!0});Xs.ResponseFormats$=Xs.ResponseFormats$outboundSchema=Xs.ResponseFormats$inboundSchema=Xs.ResponseFormats=void 0;var RYr=MYr(Te());Xs.ResponseFormats={Text:"text",JsonObject:"json_object",JsonSchema:"json_schema"};Xs.ResponseFormats$inboundSchema=RYr.nativeEnum(Xs.ResponseFormats);Xs.ResponseFormats$outboundSchema=Xs.ResponseFormats$inboundSchema;var cRt;(function(t){t.inboundSchema=Xs.ResponseFormats$inboundSchema,t.outboundSchema=Xs.ResponseFormats$outboundSchema})(cRt||(Xs.ResponseFormats$=cRt={}))});var Uq=v(Qs=>{"use strict";var jYr=Qs&&Qs.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),NYr=Qs&&Qs.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),DYr=Qs&&Qs.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&jYr(e,t,r);return NYr(e,t),e};Object.defineProperty(Qs,"__esModule",{value:!0});Qs.ResponseFormat$=Qs.ResponseFormat$outboundSchema=Qs.ResponseFormat$inboundSchema=void 0;Qs.responseFormatToJSON=FYr;Qs.responseFormatFromJSON=kYr;var Hie=DYr(Te()),fRt=qe(),LYr=ve(),pRt=URe(),mRt=zRe();Qs.ResponseFormat$inboundSchema=Hie.object({type:mRt.ResponseFormats$inboundSchema.optional(),json_schema:Hie.nullable(pRt.JsonSchema$inboundSchema).optional()}).transform(t=>(0,fRt.remap)(t,{json_schema:"jsonSchema"}));Qs.ResponseFormat$outboundSchema=Hie.object({type:mRt.ResponseFormats$outboundSchema.optional(),jsonSchema:Hie.nullable(pRt.JsonSchema$outboundSchema).optional()}).transform(t=>(0,fRt.remap)(t,{jsonSchema:"json_schema"}));var dRt;(function(t){t.inboundSchema=Qs.ResponseFormat$inboundSchema,t.outboundSchema=Qs.ResponseFormat$outboundSchema})(dRt||(Qs.ResponseFormat$=dRt={}));function FYr(t){return JSON.stringify(Qs.ResponseFormat$outboundSchema.parse(t))}function kYr(t){return(0,LYr.safeParse)(t,e=>Qs.ResponseFormat$inboundSchema.parse(JSON.parse(e)),"Failed to parse 'ResponseFormat' from JSON")}});var jN=v(Er=>{"use strict";var $Yr=Er&&Er.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),BYr=Er&&Er.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),qYr=Er&&Er.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&$Yr(e,t,r);return BYr(e,t),e};Object.defineProperty(Er,"__esModule",{value:!0});Er.SystemMessage$=Er.SystemMessage$outboundSchema=Er.SystemMessage$inboundSchema=Er.Role$=Er.Role$outboundSchema=Er.Role$inboundSchema=Er.SystemMessageContent$=Er.SystemMessageContent$outboundSchema=Er.SystemMessageContent$inboundSchema=Er.Role=void 0;Er.systemMessageContentToJSON=UYr;Er.systemMessageContentFromJSON=zYr;Er.systemMessageToJSON=HYr;Er.systemMessageFromJSON=VYr;var kf=qYr(Te()),bRt=ve(),Vie=qie();Er.Role={System:"system"};Er.SystemMessageContent$inboundSchema=kf.union([kf.string(),kf.array(Vie.TextChunk$inboundSchema)]);Er.SystemMessageContent$outboundSchema=kf.union([kf.string(),kf.array(Vie.TextChunk$outboundSchema)]);var hRt;(function(t){t.inboundSchema=Er.SystemMessageContent$inboundSchema,t.outboundSchema=Er.SystemMessageContent$outboundSchema})(hRt||(Er.SystemMessageContent$=hRt={}));function UYr(t){return JSON.stringify(Er.SystemMessageContent$outboundSchema.parse(t))}function zYr(t){return(0,bRt.safeParse)(t,e=>Er.SystemMessageContent$inboundSchema.parse(JSON.parse(e)),"Failed to parse 'SystemMessageContent' from JSON")}Er.Role$inboundSchema=kf.nativeEnum(Er.Role);Er.Role$outboundSchema=Er.Role$inboundSchema;var gRt;(function(t){t.inboundSchema=Er.Role$inboundSchema,t.outboundSchema=Er.Role$outboundSchema})(gRt||(Er.Role$=gRt={}));Er.SystemMessage$inboundSchema=kf.object({content:kf.union([kf.string(),kf.array(Vie.TextChunk$inboundSchema)]),role:Er.Role$inboundSchema.default("system")});Er.SystemMessage$outboundSchema=kf.object({content:kf.union([kf.string(),kf.array(Vie.TextChunk$outboundSchema)]),role:Er.Role$outboundSchema.default("system")});var yRt;(function(t){t.inboundSchema=Er.SystemMessage$inboundSchema,t.outboundSchema=Er.SystemMessage$outboundSchema})(yRt||(Er.SystemMessage$=yRt={}));function HYr(t){return JSON.stringify(Er.SystemMessage$outboundSchema.parse(t))}function VYr(t){return(0,bRt.safeParse)(t,e=>Er.SystemMessage$inboundSchema.parse(JSON.parse(e)),"Failed to parse 'SystemMessage' from JSON")}});var HRe=v(eu=>{"use strict";var WYr=eu&&eu.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),KYr=eu&&eu.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),GYr=eu&&eu.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&WYr(e,t,r);return KYr(e,t),e};Object.defineProperty(eu,"__esModule",{value:!0});eu.FunctionT$=eu.FunctionT$outboundSchema=eu.FunctionT$inboundSchema=void 0;eu.functionToJSON=YYr;eu.functionFromJSON=ZYr;var hg=GYr(Te()),JYr=ve();eu.FunctionT$inboundSchema=hg.object({name:hg.string(),description:hg.string().default(""),strict:hg.boolean().default(!1),parameters:hg.record(hg.any())});eu.FunctionT$outboundSchema=hg.object({name:hg.string(),description:hg.string().default(""),strict:hg.boolean().default(!1),parameters:hg.record(hg.any())});var _Rt;(function(t){t.inboundSchema=eu.FunctionT$inboundSchema,t.outboundSchema=eu.FunctionT$outboundSchema})(_Rt||(eu.FunctionT$=_Rt={}));function YYr(t){return JSON.stringify(eu.FunctionT$outboundSchema.parse(t))}function ZYr(t){return(0,JYr.safeParse)(t,e=>eu.FunctionT$inboundSchema.parse(JSON.parse(e)),"Failed to parse 'FunctionT' from JSON")}});var zq=v(tu=>{"use strict";var XYr=tu&&tu.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),QYr=tu&&tu.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),eZr=tu&&tu.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&XYr(e,t,r);return QYr(e,t),e};Object.defineProperty(tu,"__esModule",{value:!0});tu.Tool$=tu.Tool$outboundSchema=tu.Tool$inboundSchema=void 0;tu.toolToJSON=rZr;tu.toolFromJSON=nZr;var wRt=eZr(Te()),tZr=ve(),SRt=HRe(),xRt=Z6();tu.Tool$inboundSchema=wRt.object({type:xRt.ToolTypes$inboundSchema.optional(),function:SRt.FunctionT$inboundSchema});tu.Tool$outboundSchema=wRt.object({type:xRt.ToolTypes$outboundSchema.optional(),function:SRt.FunctionT$outboundSchema});var vRt;(function(t){t.inboundSchema=tu.Tool$inboundSchema,t.outboundSchema=tu.Tool$outboundSchema})(vRt||(tu.Tool$=vRt={}));function rZr(t){return JSON.stringify(tu.Tool$outboundSchema.parse(t))}function nZr(t){return(0,tZr.safeParse)(t,e=>tu.Tool$inboundSchema.parse(JSON.parse(e)),"Failed to parse 'Tool' from JSON")}});var VRe=v(ru=>{"use strict";var oZr=ru&&ru.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),iZr=ru&&ru.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),aZr=ru&&ru.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&oZr(e,t,r);return iZr(e,t),e};Object.defineProperty(ru,"__esModule",{value:!0});ru.FunctionName$=ru.FunctionName$outboundSchema=ru.FunctionName$inboundSchema=void 0;ru.functionNameToJSON=uZr;ru.functionNameFromJSON=lZr;var Wie=aZr(Te()),sZr=ve();ru.FunctionName$inboundSchema=Wie.object({name:Wie.string()});ru.FunctionName$outboundSchema=Wie.object({name:Wie.string()});var CRt;(function(t){t.inboundSchema=ru.FunctionName$inboundSchema,t.outboundSchema=ru.FunctionName$outboundSchema})(CRt||(ru.FunctionName$=CRt={}));function uZr(t){return JSON.stringify(ru.FunctionName$outboundSchema.parse(t))}function lZr(t){return(0,sZr.safeParse)(t,e=>ru.FunctionName$inboundSchema.parse(JSON.parse(e)),"Failed to parse 'FunctionName' from JSON")}});var Hq=v(nu=>{"use strict";var cZr=nu&&nu.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),dZr=nu&&nu.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),fZr=nu&&nu.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&cZr(e,t,r);return dZr(e,t),e};Object.defineProperty(nu,"__esModule",{value:!0});nu.ToolChoice$=nu.ToolChoice$outboundSchema=nu.ToolChoice$inboundSchema=void 0;nu.toolChoiceToJSON=mZr;nu.toolChoiceFromJSON=hZr;var PRt=fZr(Te()),pZr=ve(),ERt=VRe(),TRt=Z6();nu.ToolChoice$inboundSchema=PRt.object({type:TRt.ToolTypes$inboundSchema.optional(),function:ERt.FunctionName$inboundSchema});nu.ToolChoice$outboundSchema=PRt.object({type:TRt.ToolTypes$outboundSchema.optional(),function:ERt.FunctionName$outboundSchema});var ORt;(function(t){t.inboundSchema=nu.ToolChoice$inboundSchema,t.outboundSchema=nu.ToolChoice$outboundSchema})(ORt||(nu.ToolChoice$=ORt={}));function mZr(t){return JSON.stringify(nu.ToolChoice$outboundSchema.parse(t))}function hZr(t){return(0,pZr.safeParse)(t,e=>nu.ToolChoice$inboundSchema.parse(JSON.parse(e)),"Failed to parse 'ToolChoice' from JSON")}});var Vq=v(ou=>{"use strict";var gZr=ou&&ou.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),yZr=ou&&ou.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),bZr=ou&&ou.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&gZr(e,t,r);return yZr(e,t),e};Object.defineProperty(ou,"__esModule",{value:!0});ou.ToolChoiceEnum$=ou.ToolChoiceEnum$outboundSchema=ou.ToolChoiceEnum$inboundSchema=ou.ToolChoiceEnum=void 0;var _Zr=bZr(Te());ou.ToolChoiceEnum={Auto:"auto",None:"none",Any:"any",Required:"required"};ou.ToolChoiceEnum$inboundSchema=_Zr.nativeEnum(ou.ToolChoiceEnum);ou.ToolChoiceEnum$outboundSchema=ou.ToolChoiceEnum$inboundSchema;var ARt;(function(t){t.inboundSchema=ou.ToolChoiceEnum$inboundSchema,t.outboundSchema=ou.ToolChoiceEnum$outboundSchema})(ARt||(ou.ToolChoiceEnum$=ARt={}))});var NN=v(Tr=>{"use strict";var vZr=Tr&&Tr.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),wZr=Tr&&Tr.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),SZr=Tr&&Tr.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&vZr(e,t,r);return wZr(e,t),e};Object.defineProperty(Tr,"__esModule",{value:!0});Tr.ToolMessage$=Tr.ToolMessage$outboundSchema=Tr.ToolMessage$inboundSchema=Tr.ToolMessageRole$=Tr.ToolMessageRole$outboundSchema=Tr.ToolMessageRole$inboundSchema=Tr.ToolMessageContent$=Tr.ToolMessageContent$outboundSchema=Tr.ToolMessageContent$inboundSchema=Tr.ToolMessageRole=void 0;Tr.toolMessageContentToJSON=xZr;Tr.toolMessageContentFromJSON=CZr;Tr.toolMessageToJSON=OZr;Tr.toolMessageFromJSON=PZr;var ua=SZr(Te()),jRt=qe(),NRt=ve(),Kie=$q();Tr.ToolMessageRole={Tool:"tool"};Tr.ToolMessageContent$inboundSchema=ua.union([ua.string(),ua.array(Kie.ContentChunk$inboundSchema)]);Tr.ToolMessageContent$outboundSchema=ua.union([ua.string(),ua.array(Kie.ContentChunk$outboundSchema)]);var IRt;(function(t){t.inboundSchema=Tr.ToolMessageContent$inboundSchema,t.outboundSchema=Tr.ToolMessageContent$outboundSchema})(IRt||(Tr.ToolMessageContent$=IRt={}));function xZr(t){return JSON.stringify(Tr.ToolMessageContent$outboundSchema.parse(t))}function CZr(t){return(0,NRt.safeParse)(t,e=>Tr.ToolMessageContent$inboundSchema.parse(JSON.parse(e)),"Failed to parse 'ToolMessageContent' from JSON")}Tr.ToolMessageRole$inboundSchema=ua.nativeEnum(Tr.ToolMessageRole);Tr.ToolMessageRole$outboundSchema=Tr.ToolMessageRole$inboundSchema;var MRt;(function(t){t.inboundSchema=Tr.ToolMessageRole$inboundSchema,t.outboundSchema=Tr.ToolMessageRole$outboundSchema})(MRt||(Tr.ToolMessageRole$=MRt={}));Tr.ToolMessage$inboundSchema=ua.object({content:ua.nullable(ua.union([ua.string(),ua.array(Kie.ContentChunk$inboundSchema)])),tool_call_id:ua.nullable(ua.string()).optional(),name:ua.nullable(ua.string()).optional(),role:Tr.ToolMessageRole$inboundSchema.default("tool")}).transform(t=>(0,jRt.remap)(t,{tool_call_id:"toolCallId"}));Tr.ToolMessage$outboundSchema=ua.object({content:ua.nullable(ua.union([ua.string(),ua.array(Kie.ContentChunk$outboundSchema)])),toolCallId:ua.nullable(ua.string()).optional(),name:ua.nullable(ua.string()).optional(),role:Tr.ToolMessageRole$outboundSchema.default("tool")}).transform(t=>(0,jRt.remap)(t,{toolCallId:"tool_call_id"}));var RRt;(function(t){t.inboundSchema=Tr.ToolMessage$inboundSchema,t.outboundSchema=Tr.ToolMessage$outboundSchema})(RRt||(Tr.ToolMessage$=RRt={}));function OZr(t){return JSON.stringify(Tr.ToolMessage$outboundSchema.parse(t))}function PZr(t){return(0,NRt.safeParse)(t,e=>Tr.ToolMessage$inboundSchema.parse(JSON.parse(e)),"Failed to parse 'ToolMessage' from JSON")}});var DN=v(Ar=>{"use strict";var EZr=Ar&&Ar.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),TZr=Ar&&Ar.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),AZr=Ar&&Ar.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&EZr(e,t,r);return TZr(e,t),e};Object.defineProperty(Ar,"__esModule",{value:!0});Ar.UserMessage$=Ar.UserMessage$outboundSchema=Ar.UserMessage$inboundSchema=Ar.UserMessageRole$=Ar.UserMessageRole$outboundSchema=Ar.UserMessageRole$inboundSchema=Ar.UserMessageContent$=Ar.UserMessageContent$outboundSchema=Ar.UserMessageContent$inboundSchema=Ar.UserMessageRole=void 0;Ar.userMessageContentToJSON=IZr;Ar.userMessageContentFromJSON=MZr;Ar.userMessageToJSON=RZr;Ar.userMessageFromJSON=jZr;var Uc=AZr(Te()),kRt=ve(),Gie=$q();Ar.UserMessageRole={User:"user"};Ar.UserMessageContent$inboundSchema=Uc.union([Uc.string(),Uc.array(Gie.ContentChunk$inboundSchema)]);Ar.UserMessageContent$outboundSchema=Uc.union([Uc.string(),Uc.array(Gie.ContentChunk$outboundSchema)]);var DRt;(function(t){t.inboundSchema=Ar.UserMessageContent$inboundSchema,t.outboundSchema=Ar.UserMessageContent$outboundSchema})(DRt||(Ar.UserMessageContent$=DRt={}));function IZr(t){return JSON.stringify(Ar.UserMessageContent$outboundSchema.parse(t))}function MZr(t){return(0,kRt.safeParse)(t,e=>Ar.UserMessageContent$inboundSchema.parse(JSON.parse(e)),"Failed to parse 'UserMessageContent' from JSON")}Ar.UserMessageRole$inboundSchema=Uc.nativeEnum(Ar.UserMessageRole);Ar.UserMessageRole$outboundSchema=Ar.UserMessageRole$inboundSchema;var LRt;(function(t){t.inboundSchema=Ar.UserMessageRole$inboundSchema,t.outboundSchema=Ar.UserMessageRole$outboundSchema})(LRt||(Ar.UserMessageRole$=LRt={}));Ar.UserMessage$inboundSchema=Uc.object({content:Uc.nullable(Uc.union([Uc.string(),Uc.array(Gie.ContentChunk$inboundSchema)])),role:Ar.UserMessageRole$inboundSchema.default("user")});Ar.UserMessage$outboundSchema=Uc.object({content:Uc.nullable(Uc.union([Uc.string(),Uc.array(Gie.ContentChunk$outboundSchema)])),role:Ar.UserMessageRole$outboundSchema.default("user")});var FRt;(function(t){t.inboundSchema=Ar.UserMessage$inboundSchema,t.outboundSchema=Ar.UserMessage$outboundSchema})(FRt||(Ar.UserMessage$=FRt={}));function RZr(t){return JSON.stringify(Ar.UserMessage$outboundSchema.parse(t))}function jZr(t){return(0,kRt.safeParse)(t,e=>Ar.UserMessage$inboundSchema.parse(JSON.parse(e)),"Failed to parse 'UserMessage' from JSON")}});var KRt=v(Kt=>{"use strict";var NZr=Kt&&Kt.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),DZr=Kt&&Kt.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),LZr=Kt&&Kt.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&NZr(e,t,r);return DZr(e,t),e};Object.defineProperty(Kt,"__esModule",{value:!0});Kt.AgentsCompletionRequest$=Kt.AgentsCompletionRequest$outboundSchema=Kt.AgentsCompletionRequest$inboundSchema=Kt.AgentsCompletionRequestToolChoice$=Kt.AgentsCompletionRequestToolChoice$outboundSchema=Kt.AgentsCompletionRequestToolChoice$inboundSchema=Kt.AgentsCompletionRequestMessages$=Kt.AgentsCompletionRequestMessages$outboundSchema=Kt.AgentsCompletionRequestMessages$inboundSchema=Kt.AgentsCompletionRequestStop$=Kt.AgentsCompletionRequestStop$outboundSchema=Kt.AgentsCompletionRequestStop$inboundSchema=void 0;Kt.agentsCompletionRequestStopToJSON=FZr;Kt.agentsCompletionRequestStopFromJSON=kZr;Kt.agentsCompletionRequestMessagesToJSON=$Zr;Kt.agentsCompletionRequestMessagesFromJSON=BZr;Kt.agentsCompletionRequestToolChoiceToJSON=qZr;Kt.agentsCompletionRequestToolChoiceFromJSON=UZr;Kt.agentsCompletionRequestToJSON=zZr;Kt.agentsCompletionRequestFromJSON=HZr;var Xe=LZr(Te()),zRt=qe(),Jie=ve(),Yie=fI(),HRt=qq(),VRt=Uq(),Zie=jN(),WRt=zq(),Xie=Hq(),Qie=Vq(),eae=NN(),tae=DN();Kt.AgentsCompletionRequestStop$inboundSchema=Xe.union([Xe.string(),Xe.array(Xe.string())]);Kt.AgentsCompletionRequestStop$outboundSchema=Xe.union([Xe.string(),Xe.array(Xe.string())]);var $Rt;(function(t){t.inboundSchema=Kt.AgentsCompletionRequestStop$inboundSchema,t.outboundSchema=Kt.AgentsCompletionRequestStop$outboundSchema})($Rt||(Kt.AgentsCompletionRequestStop$=$Rt={}));function FZr(t){return JSON.stringify(Kt.AgentsCompletionRequestStop$outboundSchema.parse(t))}function kZr(t){return(0,Jie.safeParse)(t,e=>Kt.AgentsCompletionRequestStop$inboundSchema.parse(JSON.parse(e)),"Failed to parse 'AgentsCompletionRequestStop' from JSON")}Kt.AgentsCompletionRequestMessages$inboundSchema=Xe.union([Zie.SystemMessage$inboundSchema.and(Xe.object({role:Xe.literal("system")}).transform(t=>({role:t.role}))),tae.UserMessage$inboundSchema.and(Xe.object({role:Xe.literal("user")}).transform(t=>({role:t.role}))),Yie.AssistantMessage$inboundSchema.and(Xe.object({role:Xe.literal("assistant")}).transform(t=>({role:t.role}))),eae.ToolMessage$inboundSchema.and(Xe.object({role:Xe.literal("tool")}).transform(t=>({role:t.role})))]);Kt.AgentsCompletionRequestMessages$outboundSchema=Xe.union([Zie.SystemMessage$outboundSchema.and(Xe.object({role:Xe.literal("system")}).transform(t=>({role:t.role}))),tae.UserMessage$outboundSchema.and(Xe.object({role:Xe.literal("user")}).transform(t=>({role:t.role}))),Yie.AssistantMessage$outboundSchema.and(Xe.object({role:Xe.literal("assistant")}).transform(t=>({role:t.role}))),eae.ToolMessage$outboundSchema.and(Xe.object({role:Xe.literal("tool")}).transform(t=>({role:t.role})))]);var BRt;(function(t){t.inboundSchema=Kt.AgentsCompletionRequestMessages$inboundSchema,t.outboundSchema=Kt.AgentsCompletionRequestMessages$outboundSchema})(BRt||(Kt.AgentsCompletionRequestMessages$=BRt={}));function $Zr(t){return JSON.stringify(Kt.AgentsCompletionRequestMessages$outboundSchema.parse(t))}function BZr(t){return(0,Jie.safeParse)(t,e=>Kt.AgentsCompletionRequestMessages$inboundSchema.parse(JSON.parse(e)),"Failed to parse 'AgentsCompletionRequestMessages' from JSON")}Kt.AgentsCompletionRequestToolChoice$inboundSchema=Xe.union([Xie.ToolChoice$inboundSchema,Qie.ToolChoiceEnum$inboundSchema]);Kt.AgentsCompletionRequestToolChoice$outboundSchema=Xe.union([Xie.ToolChoice$outboundSchema,Qie.ToolChoiceEnum$outboundSchema]);var qRt;(function(t){t.inboundSchema=Kt.AgentsCompletionRequestToolChoice$inboundSchema,t.outboundSchema=Kt.AgentsCompletionRequestToolChoice$outboundSchema})(qRt||(Kt.AgentsCompletionRequestToolChoice$=qRt={}));function qZr(t){return JSON.stringify(Kt.AgentsCompletionRequestToolChoice$outboundSchema.parse(t))}function UZr(t){return(0,Jie.safeParse)(t,e=>Kt.AgentsCompletionRequestToolChoice$inboundSchema.parse(JSON.parse(e)),"Failed to parse 'AgentsCompletionRequestToolChoice' from JSON")}Kt.AgentsCompletionRequest$inboundSchema=Xe.object({max_tokens:Xe.nullable(Xe.number().int()).optional(),stream:Xe.boolean().default(!1),stop:Xe.union([Xe.string(),Xe.array(Xe.string())]).optional(),random_seed:Xe.nullable(Xe.number().int()).optional(),messages:Xe.array(Xe.union([Zie.SystemMessage$inboundSchema.and(Xe.object({role:Xe.literal("system")}).transform(t=>({role:t.role}))),tae.UserMessage$inboundSchema.and(Xe.object({role:Xe.literal("user")}).transform(t=>({role:t.role}))),Yie.AssistantMessage$inboundSchema.and(Xe.object({role:Xe.literal("assistant")}).transform(t=>({role:t.role}))),eae.ToolMessage$inboundSchema.and(Xe.object({role:Xe.literal("tool")}).transform(t=>({role:t.role})))])),response_format:VRt.ResponseFormat$inboundSchema.optional(),tools:Xe.nullable(Xe.array(WRt.Tool$inboundSchema)).optional(),tool_choice:Xe.union([Xie.ToolChoice$inboundSchema,Qie.ToolChoiceEnum$inboundSchema]).optional(),presence_penalty:Xe.number().optional(),frequency_penalty:Xe.number().optional(),n:Xe.nullable(Xe.number().int()).optional(),prediction:HRt.Prediction$inboundSchema.optional(),agent_id:Xe.string()}).transform(t=>(0,zRt.remap)(t,{max_tokens:"maxTokens",random_seed:"randomSeed",response_format:"responseFormat",tool_choice:"toolChoice",presence_penalty:"presencePenalty",frequency_penalty:"frequencyPenalty",agent_id:"agentId"}));Kt.AgentsCompletionRequest$outboundSchema=Xe.object({maxTokens:Xe.nullable(Xe.number().int()).optional(),stream:Xe.boolean().default(!1),stop:Xe.union([Xe.string(),Xe.array(Xe.string())]).optional(),randomSeed:Xe.nullable(Xe.number().int()).optional(),messages:Xe.array(Xe.union([Zie.SystemMessage$outboundSchema.and(Xe.object({role:Xe.literal("system")}).transform(t=>({role:t.role}))),tae.UserMessage$outboundSchema.and(Xe.object({role:Xe.literal("user")}).transform(t=>({role:t.role}))),Yie.AssistantMessage$outboundSchema.and(Xe.object({role:Xe.literal("assistant")}).transform(t=>({role:t.role}))),eae.ToolMessage$outboundSchema.and(Xe.object({role:Xe.literal("tool")}).transform(t=>({role:t.role})))])),responseFormat:VRt.ResponseFormat$outboundSchema.optional(),tools:Xe.nullable(Xe.array(WRt.Tool$outboundSchema)).optional(),toolChoice:Xe.union([Xie.ToolChoice$outboundSchema,Qie.ToolChoiceEnum$outboundSchema]).optional(),presencePenalty:Xe.number().optional(),frequencyPenalty:Xe.number().optional(),n:Xe.nullable(Xe.number().int()).optional(),prediction:HRt.Prediction$outboundSchema.optional(),agentId:Xe.string()}).transform(t=>(0,zRt.remap)(t,{maxTokens:"max_tokens",randomSeed:"random_seed",responseFormat:"response_format",toolChoice:"tool_choice",presencePenalty:"presence_penalty",frequencyPenalty:"frequency_penalty",agentId:"agent_id"}));var URt;(function(t){t.inboundSchema=Kt.AgentsCompletionRequest$inboundSchema,t.outboundSchema=Kt.AgentsCompletionRequest$outboundSchema})(URt||(Kt.AgentsCompletionRequest$=URt={}));function zZr(t){return JSON.stringify(Kt.AgentsCompletionRequest$outboundSchema.parse(t))}function HZr(t){return(0,Jie.safeParse)(t,e=>Kt.AgentsCompletionRequest$inboundSchema.parse(JSON.parse(e)),"Failed to parse 'AgentsCompletionRequest' from JSON")}});var r1t=v(Gt=>{"use strict";var VZr=Gt&&Gt.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),WZr=Gt&&Gt.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),KZr=Gt&&Gt.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&VZr(e,t,r);return WZr(e,t),e};Object.defineProperty(Gt,"__esModule",{value:!0});Gt.AgentsCompletionStreamRequest$=Gt.AgentsCompletionStreamRequest$outboundSchema=Gt.AgentsCompletionStreamRequest$inboundSchema=Gt.AgentsCompletionStreamRequestToolChoice$=Gt.AgentsCompletionStreamRequestToolChoice$outboundSchema=Gt.AgentsCompletionStreamRequestToolChoice$inboundSchema=Gt.AgentsCompletionStreamRequestMessages$=Gt.AgentsCompletionStreamRequestMessages$outboundSchema=Gt.AgentsCompletionStreamRequestMessages$inboundSchema=Gt.AgentsCompletionStreamRequestStop$=Gt.AgentsCompletionStreamRequestStop$outboundSchema=Gt.AgentsCompletionStreamRequestStop$inboundSchema=void 0;Gt.agentsCompletionStreamRequestStopToJSON=GZr;Gt.agentsCompletionStreamRequestStopFromJSON=JZr;Gt.agentsCompletionStreamRequestMessagesToJSON=YZr;Gt.agentsCompletionStreamRequestMessagesFromJSON=ZZr;Gt.agentsCompletionStreamRequestToolChoiceToJSON=XZr;Gt.agentsCompletionStreamRequestToolChoiceFromJSON=QZr;Gt.agentsCompletionStreamRequestToJSON=eXr;Gt.agentsCompletionStreamRequestFromJSON=tXr;var Qe=KZr(Te()),XRt=qe(),rae=ve(),nae=fI(),QRt=qq(),e1t=Uq(),oae=jN(),t1t=zq(),iae=Hq(),aae=Vq(),sae=NN(),uae=DN();Gt.AgentsCompletionStreamRequestStop$inboundSchema=Qe.union([Qe.string(),Qe.array(Qe.string())]);Gt.AgentsCompletionStreamRequestStop$outboundSchema=Qe.union([Qe.string(),Qe.array(Qe.string())]);var GRt;(function(t){t.inboundSchema=Gt.AgentsCompletionStreamRequestStop$inboundSchema,t.outboundSchema=Gt.AgentsCompletionStreamRequestStop$outboundSchema})(GRt||(Gt.AgentsCompletionStreamRequestStop$=GRt={}));function GZr(t){return JSON.stringify(Gt.AgentsCompletionStreamRequestStop$outboundSchema.parse(t))}function JZr(t){return(0,rae.safeParse)(t,e=>Gt.AgentsCompletionStreamRequestStop$inboundSchema.parse(JSON.parse(e)),"Failed to parse 'AgentsCompletionStreamRequestStop' from JSON")}Gt.AgentsCompletionStreamRequestMessages$inboundSchema=Qe.union([oae.SystemMessage$inboundSchema.and(Qe.object({role:Qe.literal("system")}).transform(t=>({role:t.role}))),uae.UserMessage$inboundSchema.and(Qe.object({role:Qe.literal("user")}).transform(t=>({role:t.role}))),nae.AssistantMessage$inboundSchema.and(Qe.object({role:Qe.literal("assistant")}).transform(t=>({role:t.role}))),sae.ToolMessage$inboundSchema.and(Qe.object({role:Qe.literal("tool")}).transform(t=>({role:t.role})))]);Gt.AgentsCompletionStreamRequestMessages$outboundSchema=Qe.union([oae.SystemMessage$outboundSchema.and(Qe.object({role:Qe.literal("system")}).transform(t=>({role:t.role}))),uae.UserMessage$outboundSchema.and(Qe.object({role:Qe.literal("user")}).transform(t=>({role:t.role}))),nae.AssistantMessage$outboundSchema.and(Qe.object({role:Qe.literal("assistant")}).transform(t=>({role:t.role}))),sae.ToolMessage$outboundSchema.and(Qe.object({role:Qe.literal("tool")}).transform(t=>({role:t.role})))]);var JRt;(function(t){t.inboundSchema=Gt.AgentsCompletionStreamRequestMessages$inboundSchema,t.outboundSchema=Gt.AgentsCompletionStreamRequestMessages$outboundSchema})(JRt||(Gt.AgentsCompletionStreamRequestMessages$=JRt={}));function YZr(t){return JSON.stringify(Gt.AgentsCompletionStreamRequestMessages$outboundSchema.parse(t))}function ZZr(t){return(0,rae.safeParse)(t,e=>Gt.AgentsCompletionStreamRequestMessages$inboundSchema.parse(JSON.parse(e)),"Failed to parse 'AgentsCompletionStreamRequestMessages' from JSON")}Gt.AgentsCompletionStreamRequestToolChoice$inboundSchema=Qe.union([iae.ToolChoice$inboundSchema,aae.ToolChoiceEnum$inboundSchema]);Gt.AgentsCompletionStreamRequestToolChoice$outboundSchema=Qe.union([iae.ToolChoice$outboundSchema,aae.ToolChoiceEnum$outboundSchema]);var YRt;(function(t){t.inboundSchema=Gt.AgentsCompletionStreamRequestToolChoice$inboundSchema,t.outboundSchema=Gt.AgentsCompletionStreamRequestToolChoice$outboundSchema})(YRt||(Gt.AgentsCompletionStreamRequestToolChoice$=YRt={}));function XZr(t){return JSON.stringify(Gt.AgentsCompletionStreamRequestToolChoice$outboundSchema.parse(t))}function QZr(t){return(0,rae.safeParse)(t,e=>Gt.AgentsCompletionStreamRequestToolChoice$inboundSchema.parse(JSON.parse(e)),"Failed to parse 'AgentsCompletionStreamRequestToolChoice' from JSON")}Gt.AgentsCompletionStreamRequest$inboundSchema=Qe.object({max_tokens:Qe.nullable(Qe.number().int()).optional(),stream:Qe.boolean().default(!0),stop:Qe.union([Qe.string(),Qe.array(Qe.string())]).optional(),random_seed:Qe.nullable(Qe.number().int()).optional(),messages:Qe.array(Qe.union([oae.SystemMessage$inboundSchema.and(Qe.object({role:Qe.literal("system")}).transform(t=>({role:t.role}))),uae.UserMessage$inboundSchema.and(Qe.object({role:Qe.literal("user")}).transform(t=>({role:t.role}))),nae.AssistantMessage$inboundSchema.and(Qe.object({role:Qe.literal("assistant")}).transform(t=>({role:t.role}))),sae.ToolMessage$inboundSchema.and(Qe.object({role:Qe.literal("tool")}).transform(t=>({role:t.role})))])),response_format:e1t.ResponseFormat$inboundSchema.optional(),tools:Qe.nullable(Qe.array(t1t.Tool$inboundSchema)).optional(),tool_choice:Qe.union([iae.ToolChoice$inboundSchema,aae.ToolChoiceEnum$inboundSchema]).optional(),presence_penalty:Qe.number().optional(),frequency_penalty:Qe.number().optional(),n:Qe.nullable(Qe.number().int()).optional(),prediction:QRt.Prediction$inboundSchema.optional(),agent_id:Qe.string()}).transform(t=>(0,XRt.remap)(t,{max_tokens:"maxTokens",random_seed:"randomSeed",response_format:"responseFormat",tool_choice:"toolChoice",presence_penalty:"presencePenalty",frequency_penalty:"frequencyPenalty",agent_id:"agentId"}));Gt.AgentsCompletionStreamRequest$outboundSchema=Qe.object({maxTokens:Qe.nullable(Qe.number().int()).optional(),stream:Qe.boolean().default(!0),stop:Qe.union([Qe.string(),Qe.array(Qe.string())]).optional(),randomSeed:Qe.nullable(Qe.number().int()).optional(),messages:Qe.array(Qe.union([oae.SystemMessage$outboundSchema.and(Qe.object({role:Qe.literal("system")}).transform(t=>({role:t.role}))),uae.UserMessage$outboundSchema.and(Qe.object({role:Qe.literal("user")}).transform(t=>({role:t.role}))),nae.AssistantMessage$outboundSchema.and(Qe.object({role:Qe.literal("assistant")}).transform(t=>({role:t.role}))),sae.ToolMessage$outboundSchema.and(Qe.object({role:Qe.literal("tool")}).transform(t=>({role:t.role})))])),responseFormat:e1t.ResponseFormat$outboundSchema.optional(),tools:Qe.nullable(Qe.array(t1t.Tool$outboundSchema)).optional(),toolChoice:Qe.union([iae.ToolChoice$outboundSchema,aae.ToolChoiceEnum$outboundSchema]).optional(),presencePenalty:Qe.number().optional(),frequencyPenalty:Qe.number().optional(),n:Qe.nullable(Qe.number().int()).optional(),prediction:QRt.Prediction$outboundSchema.optional(),agentId:Qe.string()}).transform(t=>(0,XRt.remap)(t,{maxTokens:"max_tokens",randomSeed:"random_seed",responseFormat:"response_format",toolChoice:"tool_choice",presencePenalty:"presence_penalty",frequencyPenalty:"frequency_penalty",agentId:"agent_id"}));var ZRt;(function(t){t.inboundSchema=Gt.AgentsCompletionStreamRequest$inboundSchema,t.outboundSchema=Gt.AgentsCompletionStreamRequest$outboundSchema})(ZRt||(Gt.AgentsCompletionStreamRequest$=ZRt={}));function eXr(t){return JSON.stringify(Gt.AgentsCompletionStreamRequest$outboundSchema.parse(t))}function tXr(t){return(0,rae.safeParse)(t,e=>Gt.AgentsCompletionStreamRequest$inboundSchema.parse(JSON.parse(e)),"Failed to parse 'AgentsCompletionStreamRequest' from JSON")}});var WRe=v(iu=>{"use strict";var rXr=iu&&iu.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),nXr=iu&&iu.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),oXr=iu&&iu.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&rXr(e,t,r);return nXr(e,t),e};Object.defineProperty(iu,"__esModule",{value:!0});iu.ApiEndpoint$=iu.ApiEndpoint$outboundSchema=iu.ApiEndpoint$inboundSchema=iu.ApiEndpoint=void 0;var LN=oXr(Te()),iXr=dI();iu.ApiEndpoint={RootV1ChatCompletions:"/v1/chat/completions",RootV1Embeddings:"/v1/embeddings",RootV1FimCompletions:"/v1/fim/completions",RootV1Moderations:"/v1/moderations",RootV1ChatModerations:"/v1/chat/moderations"};iu.ApiEndpoint$inboundSchema=LN.union([LN.nativeEnum(iu.ApiEndpoint),LN.string().transform(iXr.catchUnrecognizedEnum)]);iu.ApiEndpoint$outboundSchema=LN.union([LN.nativeEnum(iu.ApiEndpoint),LN.string().and(LN.custom())]);var n1t;(function(t){t.inboundSchema=iu.ApiEndpoint$inboundSchema,t.outboundSchema=iu.ApiEndpoint$outboundSchema})(n1t||(iu.ApiEndpoint$=n1t={}))});var a1t=v(Co=>{"use strict";var aXr=Co&&Co.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),sXr=Co&&Co.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),uXr=Co&&Co.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&aXr(e,t,r);return sXr(e,t),e};Object.defineProperty(Co,"__esModule",{value:!0});Co.ArchiveFTModelOut$=Co.ArchiveFTModelOut$outboundSchema=Co.ArchiveFTModelOut$inboundSchema=Co.ArchiveFTModelOutObject$=Co.ArchiveFTModelOutObject$outboundSchema=Co.ArchiveFTModelOutObject$inboundSchema=Co.ArchiveFTModelOutObject=void 0;Co.archiveFTModelOutToJSON=cXr;Co.archiveFTModelOutFromJSON=dXr;var JO=uXr(Te()),lXr=ve();Co.ArchiveFTModelOutObject={Model:"model"};Co.ArchiveFTModelOutObject$inboundSchema=JO.nativeEnum(Co.ArchiveFTModelOutObject);Co.ArchiveFTModelOutObject$outboundSchema=Co.ArchiveFTModelOutObject$inboundSchema;var o1t;(function(t){t.inboundSchema=Co.ArchiveFTModelOutObject$inboundSchema,t.outboundSchema=Co.ArchiveFTModelOutObject$outboundSchema})(o1t||(Co.ArchiveFTModelOutObject$=o1t={}));Co.ArchiveFTModelOut$inboundSchema=JO.object({id:JO.string(),object:JO.literal("model").default("model"),archived:JO.boolean().default(!0)});Co.ArchiveFTModelOut$outboundSchema=JO.object({id:JO.string(),object:JO.literal("model").default("model"),archived:JO.boolean().default(!0)});var i1t;(function(t){t.inboundSchema=Co.ArchiveFTModelOut$inboundSchema,t.outboundSchema=Co.ArchiveFTModelOut$outboundSchema})(i1t||(Co.ArchiveFTModelOut$=i1t={}));function cXr(t){return JSON.stringify(Co.ArchiveFTModelOut$outboundSchema.parse(t))}function dXr(t){return(0,lXr.safeParse)(t,e=>Co.ArchiveFTModelOut$inboundSchema.parse(JSON.parse(e)),"Failed to parse 'ArchiveFTModelOut' from JSON")}});var lae=v(au=>{"use strict";var fXr=au&&au.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),pXr=au&&au.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),mXr=au&&au.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&fXr(e,t,r);return pXr(e,t),e};Object.defineProperty(au,"__esModule",{value:!0});au.ModelCapabilities$=au.ModelCapabilities$outboundSchema=au.ModelCapabilities$inboundSchema=void 0;au.modelCapabilitiesToJSON=gXr;au.modelCapabilitiesFromJSON=yXr;var gg=mXr(Te()),u1t=qe(),hXr=ve();au.ModelCapabilities$inboundSchema=gg.object({completion_chat:gg.boolean().default(!0),completion_fim:gg.boolean().default(!1),function_calling:gg.boolean().default(!0),fine_tuning:gg.boolean().default(!1),vision:gg.boolean().default(!1)}).transform(t=>(0,u1t.remap)(t,{completion_chat:"completionChat",completion_fim:"completionFim",function_calling:"functionCalling",fine_tuning:"fineTuning"}));au.ModelCapabilities$outboundSchema=gg.object({completionChat:gg.boolean().default(!0),completionFim:gg.boolean().default(!1),functionCalling:gg.boolean().default(!0),fineTuning:gg.boolean().default(!1),vision:gg.boolean().default(!1)}).transform(t=>(0,u1t.remap)(t,{completionChat:"completion_chat",completionFim:"completion_fim",functionCalling:"function_calling",fineTuning:"fine_tuning"}));var s1t;(function(t){t.inboundSchema=au.ModelCapabilities$inboundSchema,t.outboundSchema=au.ModelCapabilities$outboundSchema})(s1t||(au.ModelCapabilities$=s1t={}));function gXr(t){return JSON.stringify(au.ModelCapabilities$outboundSchema.parse(t))}function yXr(t){return(0,hXr.safeParse)(t,e=>au.ModelCapabilities$inboundSchema.parse(JSON.parse(e)),"Failed to parse 'ModelCapabilities' from JSON")}});var KRe=v(Oo=>{"use strict";var bXr=Oo&&Oo.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),_Xr=Oo&&Oo.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),vXr=Oo&&Oo.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&bXr(e,t,r);return _Xr(e,t),e};Object.defineProperty(Oo,"__esModule",{value:!0});Oo.BaseModelCard$=Oo.BaseModelCard$outboundSchema=Oo.BaseModelCard$inboundSchema=Oo.Type$=Oo.Type$outboundSchema=Oo.Type$inboundSchema=Oo.Type=void 0;Oo.baseModelCardToJSON=SXr;Oo.baseModelCardFromJSON=xXr;var qn=vXr(Te()),d1t=qe(),wXr=ve(),f1t=lae();Oo.Type={Base:"base"};Oo.Type$inboundSchema=qn.nativeEnum(Oo.Type);Oo.Type$outboundSchema=Oo.Type$inboundSchema;var l1t;(function(t){t.inboundSchema=Oo.Type$inboundSchema,t.outboundSchema=Oo.Type$outboundSchema})(l1t||(Oo.Type$=l1t={}));Oo.BaseModelCard$inboundSchema=qn.object({id:qn.string(),object:qn.string().default("model"),created:qn.number().int().optional(),owned_by:qn.string().default("mistralai"),capabilities:f1t.ModelCapabilities$inboundSchema,name:qn.nullable(qn.string()).optional(),description:qn.nullable(qn.string()).optional(),max_context_length:qn.number().int().default(32768),aliases:qn.array(qn.string()).optional(),deprecation:qn.nullable(qn.string().datetime({offset:!0}).transform(t=>new Date(t))).optional(),default_model_temperature:qn.nullable(qn.number()).optional(),type:qn.literal("base").default("base")}).transform(t=>(0,d1t.remap)(t,{owned_by:"ownedBy",max_context_length:"maxContextLength",default_model_temperature:"defaultModelTemperature"}));Oo.BaseModelCard$outboundSchema=qn.object({id:qn.string(),object:qn.string().default("model"),created:qn.number().int().optional(),ownedBy:qn.string().default("mistralai"),capabilities:f1t.ModelCapabilities$outboundSchema,name:qn.nullable(qn.string()).optional(),description:qn.nullable(qn.string()).optional(),maxContextLength:qn.number().int().default(32768),aliases:qn.array(qn.string()).optional(),deprecation:qn.nullable(qn.date().transform(t=>t.toISOString())).optional(),defaultModelTemperature:qn.nullable(qn.number()).optional(),type:qn.literal("base").default("base")}).transform(t=>(0,d1t.remap)(t,{ownedBy:"owned_by",maxContextLength:"max_context_length",defaultModelTemperature:"default_model_temperature"}));var c1t;(function(t){t.inboundSchema=Oo.BaseModelCard$inboundSchema,t.outboundSchema=Oo.BaseModelCard$outboundSchema})(c1t||(Oo.BaseModelCard$=c1t={}));function SXr(t){return JSON.stringify(Oo.BaseModelCard$outboundSchema.parse(t))}function xXr(t){return(0,wXr.safeParse)(t,e=>Oo.BaseModelCard$inboundSchema.parse(JSON.parse(e)),"Failed to parse 'BaseModelCard' from JSON")}});var GRe=v(su=>{"use strict";var CXr=su&&su.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),OXr=su&&su.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),PXr=su&&su.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&CXr(e,t,r);return OXr(e,t),e};Object.defineProperty(su,"__esModule",{value:!0});su.BatchError$=su.BatchError$outboundSchema=su.BatchError$inboundSchema=void 0;su.batchErrorToJSON=TXr;su.batchErrorFromJSON=AXr;var Wq=PXr(Te()),EXr=ve();su.BatchError$inboundSchema=Wq.object({message:Wq.string(),count:Wq.number().int().default(1)});su.BatchError$outboundSchema=Wq.object({message:Wq.string(),count:Wq.number().int().default(1)});var p1t;(function(t){t.inboundSchema=su.BatchError$inboundSchema,t.outboundSchema=su.BatchError$outboundSchema})(p1t||(su.BatchError$=p1t={}));function TXr(t){return JSON.stringify(su.BatchError$outboundSchema.parse(t))}function AXr(t){return(0,EXr.safeParse)(t,e=>su.BatchError$inboundSchema.parse(JSON.parse(e)),"Failed to parse 'BatchError' from JSON")}});var y1t=v(uu=>{"use strict";var IXr=uu&&uu.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),MXr=uu&&uu.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),RXr=uu&&uu.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&IXr(e,t,r);return MXr(e,t),e};Object.defineProperty(uu,"__esModule",{value:!0});uu.BatchJobIn$=uu.BatchJobIn$outboundSchema=uu.BatchJobIn$inboundSchema=void 0;uu.batchJobInToJSON=NXr;uu.batchJobInFromJSON=DXr;var Kd=RXr(Te()),h1t=qe(),jXr=ve(),g1t=WRe();uu.BatchJobIn$inboundSchema=Kd.object({input_files:Kd.array(Kd.string()),endpoint:g1t.ApiEndpoint$inboundSchema,model:Kd.string(),metadata:Kd.nullable(Kd.record(Kd.string())).optional(),timeout_hours:Kd.number().int().default(24)}).transform(t=>(0,h1t.remap)(t,{input_files:"inputFiles",timeout_hours:"timeoutHours"}));uu.BatchJobIn$outboundSchema=Kd.object({inputFiles:Kd.array(Kd.string()),endpoint:g1t.ApiEndpoint$outboundSchema,model:Kd.string(),metadata:Kd.nullable(Kd.record(Kd.string())).optional(),timeoutHours:Kd.number().int().default(24)}).transform(t=>(0,h1t.remap)(t,{inputFiles:"input_files",timeoutHours:"timeout_hours"}));var m1t;(function(t){t.inboundSchema=uu.BatchJobIn$inboundSchema,t.outboundSchema=uu.BatchJobIn$outboundSchema})(m1t||(uu.BatchJobIn$=m1t={}));function NXr(t){return JSON.stringify(uu.BatchJobIn$outboundSchema.parse(t))}function DXr(t){return(0,jXr.safeParse)(t,e=>uu.BatchJobIn$inboundSchema.parse(JSON.parse(e)),"Failed to parse 'BatchJobIn' from JSON")}});var JRe=v(lu=>{"use strict";var LXr=lu&&lu.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),FXr=lu&&lu.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),kXr=lu&&lu.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&LXr(e,t,r);return FXr(e,t),e};Object.defineProperty(lu,"__esModule",{value:!0});lu.BatchJobStatus$=lu.BatchJobStatus$outboundSchema=lu.BatchJobStatus$inboundSchema=lu.BatchJobStatus=void 0;var $Xr=kXr(Te());lu.BatchJobStatus={Queued:"QUEUED",Running:"RUNNING",Success:"SUCCESS",Failed:"FAILED",TimeoutExceeded:"TIMEOUT_EXCEEDED",CancellationRequested:"CANCELLATION_REQUESTED",Cancelled:"CANCELLED"};lu.BatchJobStatus$inboundSchema=$Xr.nativeEnum(lu.BatchJobStatus);lu.BatchJobStatus$outboundSchema=lu.BatchJobStatus$inboundSchema;var b1t;(function(t){t.inboundSchema=lu.BatchJobStatus$inboundSchema,t.outboundSchema=lu.BatchJobStatus$outboundSchema})(b1t||(lu.BatchJobStatus$=b1t={}))});var YRe=v(Po=>{"use strict";var BXr=Po&&Po.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),qXr=Po&&Po.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),UXr=Po&&Po.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&BXr(e,t,r);return qXr(e,t),e};Object.defineProperty(Po,"__esModule",{value:!0});Po.BatchJobOut$=Po.BatchJobOut$outboundSchema=Po.BatchJobOut$inboundSchema=Po.BatchJobOutObject$=Po.BatchJobOutObject$outboundSchema=Po.BatchJobOutObject$inboundSchema=Po.BatchJobOutObject=void 0;Po.batchJobOutToJSON=HXr;Po.batchJobOutFromJSON=VXr;var pr=UXr(Te()),w1t=qe(),zXr=ve(),S1t=GRe(),x1t=JRe();Po.BatchJobOutObject={Batch:"batch"};Po.BatchJobOutObject$inboundSchema=pr.nativeEnum(Po.BatchJobOutObject);Po.BatchJobOutObject$outboundSchema=Po.BatchJobOutObject$inboundSchema;var _1t;(function(t){t.inboundSchema=Po.BatchJobOutObject$inboundSchema,t.outboundSchema=Po.BatchJobOutObject$outboundSchema})(_1t||(Po.BatchJobOutObject$=_1t={}));Po.BatchJobOut$inboundSchema=pr.object({id:pr.string(),object:pr.literal("batch").default("batch"),input_files:pr.array(pr.string()),metadata:pr.nullable(pr.record(pr.any())).optional(),endpoint:pr.string(),model:pr.string(),output_file:pr.nullable(pr.string()).optional(),error_file:pr.nullable(pr.string()).optional(),errors:pr.array(S1t.BatchError$inboundSchema),status:x1t.BatchJobStatus$inboundSchema,created_at:pr.number().int(),total_requests:pr.number().int(),completed_requests:pr.number().int(),succeeded_requests:pr.number().int(),failed_requests:pr.number().int(),started_at:pr.nullable(pr.number().int()).optional(),completed_at:pr.nullable(pr.number().int()).optional()}).transform(t=>(0,w1t.remap)(t,{input_files:"inputFiles",output_file:"outputFile",error_file:"errorFile",created_at:"createdAt",total_requests:"totalRequests",completed_requests:"completedRequests",succeeded_requests:"succeededRequests",failed_requests:"failedRequests",started_at:"startedAt",completed_at:"completedAt"}));Po.BatchJobOut$outboundSchema=pr.object({id:pr.string(),object:pr.literal("batch").default("batch"),inputFiles:pr.array(pr.string()),metadata:pr.nullable(pr.record(pr.any())).optional(),endpoint:pr.string(),model:pr.string(),outputFile:pr.nullable(pr.string()).optional(),errorFile:pr.nullable(pr.string()).optional(),errors:pr.array(S1t.BatchError$outboundSchema),status:x1t.BatchJobStatus$outboundSchema,createdAt:pr.number().int(),totalRequests:pr.number().int(),completedRequests:pr.number().int(),succeededRequests:pr.number().int(),failedRequests:pr.number().int(),startedAt:pr.nullable(pr.number().int()).optional(),completedAt:pr.nullable(pr.number().int()).optional()}).transform(t=>(0,w1t.remap)(t,{inputFiles:"input_files",outputFile:"output_file",errorFile:"error_file",createdAt:"created_at",totalRequests:"total_requests",completedRequests:"completed_requests",succeededRequests:"succeeded_requests",failedRequests:"failed_requests",startedAt:"started_at",completedAt:"completed_at"}));var v1t;(function(t){t.inboundSchema=Po.BatchJobOut$inboundSchema,t.outboundSchema=Po.BatchJobOut$outboundSchema})(v1t||(Po.BatchJobOut$=v1t={}));function HXr(t){return JSON.stringify(Po.BatchJobOut$outboundSchema.parse(t))}function VXr(t){return(0,zXr.safeParse)(t,e=>Po.BatchJobOut$inboundSchema.parse(JSON.parse(e)),"Failed to parse 'BatchJobOut' from JSON")}});var E1t=v(Eo=>{"use strict";var WXr=Eo&&Eo.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),KXr=Eo&&Eo.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),GXr=Eo&&Eo.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&WXr(e,t,r);return KXr(e,t),e};Object.defineProperty(Eo,"__esModule",{value:!0});Eo.BatchJobsOut$=Eo.BatchJobsOut$outboundSchema=Eo.BatchJobsOut$inboundSchema=Eo.BatchJobsOutObject$=Eo.BatchJobsOutObject$outboundSchema=Eo.BatchJobsOutObject$inboundSchema=Eo.BatchJobsOutObject=void 0;Eo.batchJobsOutToJSON=YXr;Eo.batchJobsOutFromJSON=ZXr;var YO=GXr(Te()),JXr=ve(),P1t=YRe();Eo.BatchJobsOutObject={List:"list"};Eo.BatchJobsOutObject$inboundSchema=YO.nativeEnum(Eo.BatchJobsOutObject);Eo.BatchJobsOutObject$outboundSchema=Eo.BatchJobsOutObject$inboundSchema;var C1t;(function(t){t.inboundSchema=Eo.BatchJobsOutObject$inboundSchema,t.outboundSchema=Eo.BatchJobsOutObject$outboundSchema})(C1t||(Eo.BatchJobsOutObject$=C1t={}));Eo.BatchJobsOut$inboundSchema=YO.object({data:YO.array(P1t.BatchJobOut$inboundSchema).optional(),object:YO.literal("list").default("list"),total:YO.number().int()});Eo.BatchJobsOut$outboundSchema=YO.object({data:YO.array(P1t.BatchJobOut$outboundSchema).optional(),object:YO.literal("list").default("list"),total:YO.number().int()});var O1t;(function(t){t.inboundSchema=Eo.BatchJobsOut$inboundSchema,t.outboundSchema=Eo.BatchJobsOut$outboundSchema})(O1t||(Eo.BatchJobsOut$=O1t={}));function YXr(t){return JSON.stringify(Eo.BatchJobsOut$outboundSchema.parse(t))}function ZXr(t){return(0,JXr.safeParse)(t,e=>Eo.BatchJobsOut$inboundSchema.parse(JSON.parse(e)),"Failed to parse 'BatchJobsOut' from JSON")}});var j1t=v(Jt=>{"use strict";var XXr=Jt&&Jt.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),QXr=Jt&&Jt.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),eQr=Jt&&Jt.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&XXr(e,t,r);return QXr(e,t),e};Object.defineProperty(Jt,"__esModule",{value:!0});Jt.ChatClassificationRequest$=Jt.ChatClassificationRequest$outboundSchema=Jt.ChatClassificationRequest$inboundSchema=Jt.ChatClassificationRequestInputs$=Jt.ChatClassificationRequestInputs$outboundSchema=Jt.ChatClassificationRequestInputs$inboundSchema=Jt.One$=Jt.One$outboundSchema=Jt.One$inboundSchema=Jt.Two$=Jt.Two$outboundSchema=Jt.Two$inboundSchema=void 0;Jt.twoToJSON=tQr;Jt.twoFromJSON=rQr;Jt.oneToJSON=nQr;Jt.oneFromJSON=oQr;Jt.chatClassificationRequestInputsToJSON=iQr;Jt.chatClassificationRequestInputsFromJSON=aQr;Jt.chatClassificationRequestToJSON=sQr;Jt.chatClassificationRequestFromJSON=uQr;var ye=eQr(Te()),R1t=qe(),cae=ve(),yg=fI(),bg=jN(),_g=NN(),vg=DN();Jt.Two$inboundSchema=ye.union([bg.SystemMessage$inboundSchema.and(ye.object({role:ye.literal("system")}).transform(t=>({role:t.role}))),vg.UserMessage$inboundSchema.and(ye.object({role:ye.literal("user")}).transform(t=>({role:t.role}))),yg.AssistantMessage$inboundSchema.and(ye.object({role:ye.literal("assistant")}).transform(t=>({role:t.role}))),_g.ToolMessage$inboundSchema.and(ye.object({role:ye.literal("tool")}).transform(t=>({role:t.role})))]);Jt.Two$outboundSchema=ye.union([bg.SystemMessage$outboundSchema.and(ye.object({role:ye.literal("system")}).transform(t=>({role:t.role}))),vg.UserMessage$outboundSchema.and(ye.object({role:ye.literal("user")}).transform(t=>({role:t.role}))),yg.AssistantMessage$outboundSchema.and(ye.object({role:ye.literal("assistant")}).transform(t=>({role:t.role}))),_g.ToolMessage$outboundSchema.and(ye.object({role:ye.literal("tool")}).transform(t=>({role:t.role})))]);var T1t;(function(t){t.inboundSchema=Jt.Two$inboundSchema,t.outboundSchema=Jt.Two$outboundSchema})(T1t||(Jt.Two$=T1t={}));function tQr(t){return JSON.stringify(Jt.Two$outboundSchema.parse(t))}function rQr(t){return(0,cae.safeParse)(t,e=>Jt.Two$inboundSchema.parse(JSON.parse(e)),"Failed to parse 'Two' from JSON")}Jt.One$inboundSchema=ye.union([bg.SystemMessage$inboundSchema.and(ye.object({role:ye.literal("system")}).transform(t=>({role:t.role}))),vg.UserMessage$inboundSchema.and(ye.object({role:ye.literal("user")}).transform(t=>({role:t.role}))),yg.AssistantMessage$inboundSchema.and(ye.object({role:ye.literal("assistant")}).transform(t=>({role:t.role}))),_g.ToolMessage$inboundSchema.and(ye.object({role:ye.literal("tool")}).transform(t=>({role:t.role})))]);Jt.One$outboundSchema=ye.union([bg.SystemMessage$outboundSchema.and(ye.object({role:ye.literal("system")}).transform(t=>({role:t.role}))),vg.UserMessage$outboundSchema.and(ye.object({role:ye.literal("user")}).transform(t=>({role:t.role}))),yg.AssistantMessage$outboundSchema.and(ye.object({role:ye.literal("assistant")}).transform(t=>({role:t.role}))),_g.ToolMessage$outboundSchema.and(ye.object({role:ye.literal("tool")}).transform(t=>({role:t.role})))]);var A1t;(function(t){t.inboundSchema=Jt.One$inboundSchema,t.outboundSchema=Jt.One$outboundSchema})(A1t||(Jt.One$=A1t={}));function nQr(t){return JSON.stringify(Jt.One$outboundSchema.parse(t))}function oQr(t){return(0,cae.safeParse)(t,e=>Jt.One$inboundSchema.parse(JSON.parse(e)),"Failed to parse 'One' from JSON")}Jt.ChatClassificationRequestInputs$inboundSchema=ye.union([ye.array(ye.union([bg.SystemMessage$inboundSchema.and(ye.object({role:ye.literal("system")}).transform(t=>({role:t.role}))),vg.UserMessage$inboundSchema.and(ye.object({role:ye.literal("user")}).transform(t=>({role:t.role}))),yg.AssistantMessage$inboundSchema.and(ye.object({role:ye.literal("assistant")}).transform(t=>({role:t.role}))),_g.ToolMessage$inboundSchema.and(ye.object({role:ye.literal("tool")}).transform(t=>({role:t.role})))])),ye.array(ye.array(ye.union([bg.SystemMessage$inboundSchema.and(ye.object({role:ye.literal("system")}).transform(t=>({role:t.role}))),vg.UserMessage$inboundSchema.and(ye.object({role:ye.literal("user")}).transform(t=>({role:t.role}))),yg.AssistantMessage$inboundSchema.and(ye.object({role:ye.literal("assistant")}).transform(t=>({role:t.role}))),_g.ToolMessage$inboundSchema.and(ye.object({role:ye.literal("tool")}).transform(t=>({role:t.role})))])))]);Jt.ChatClassificationRequestInputs$outboundSchema=ye.union([ye.array(ye.union([bg.SystemMessage$outboundSchema.and(ye.object({role:ye.literal("system")}).transform(t=>({role:t.role}))),vg.UserMessage$outboundSchema.and(ye.object({role:ye.literal("user")}).transform(t=>({role:t.role}))),yg.AssistantMessage$outboundSchema.and(ye.object({role:ye.literal("assistant")}).transform(t=>({role:t.role}))),_g.ToolMessage$outboundSchema.and(ye.object({role:ye.literal("tool")}).transform(t=>({role:t.role})))])),ye.array(ye.array(ye.union([bg.SystemMessage$outboundSchema.and(ye.object({role:ye.literal("system")}).transform(t=>({role:t.role}))),vg.UserMessage$outboundSchema.and(ye.object({role:ye.literal("user")}).transform(t=>({role:t.role}))),yg.AssistantMessage$outboundSchema.and(ye.object({role:ye.literal("assistant")}).transform(t=>({role:t.role}))),_g.ToolMessage$outboundSchema.and(ye.object({role:ye.literal("tool")}).transform(t=>({role:t.role})))])))]);var I1t;(function(t){t.inboundSchema=Jt.ChatClassificationRequestInputs$inboundSchema,t.outboundSchema=Jt.ChatClassificationRequestInputs$outboundSchema})(I1t||(Jt.ChatClassificationRequestInputs$=I1t={}));function iQr(t){return JSON.stringify(Jt.ChatClassificationRequestInputs$outboundSchema.parse(t))}function aQr(t){return(0,cae.safeParse)(t,e=>Jt.ChatClassificationRequestInputs$inboundSchema.parse(JSON.parse(e)),"Failed to parse 'ChatClassificationRequestInputs' from JSON")}Jt.ChatClassificationRequest$inboundSchema=ye.object({input:ye.union([ye.array(ye.union([bg.SystemMessage$inboundSchema.and(ye.object({role:ye.literal("system")}).transform(t=>({role:t.role}))),vg.UserMessage$inboundSchema.and(ye.object({role:ye.literal("user")}).transform(t=>({role:t.role}))),yg.AssistantMessage$inboundSchema.and(ye.object({role:ye.literal("assistant")}).transform(t=>({role:t.role}))),_g.ToolMessage$inboundSchema.and(ye.object({role:ye.literal("tool")}).transform(t=>({role:t.role})))])),ye.array(ye.array(ye.union([bg.SystemMessage$inboundSchema.and(ye.object({role:ye.literal("system")}).transform(t=>({role:t.role}))),vg.UserMessage$inboundSchema.and(ye.object({role:ye.literal("user")}).transform(t=>({role:t.role}))),yg.AssistantMessage$inboundSchema.and(ye.object({role:ye.literal("assistant")}).transform(t=>({role:t.role}))),_g.ToolMessage$inboundSchema.and(ye.object({role:ye.literal("tool")}).transform(t=>({role:t.role})))])))]),model:ye.nullable(ye.string())}).transform(t=>(0,R1t.remap)(t,{input:"inputs"}));Jt.ChatClassificationRequest$outboundSchema=ye.object({inputs:ye.union([ye.array(ye.union([bg.SystemMessage$outboundSchema.and(ye.object({role:ye.literal("system")}).transform(t=>({role:t.role}))),vg.UserMessage$outboundSchema.and(ye.object({role:ye.literal("user")}).transform(t=>({role:t.role}))),yg.AssistantMessage$outboundSchema.and(ye.object({role:ye.literal("assistant")}).transform(t=>({role:t.role}))),_g.ToolMessage$outboundSchema.and(ye.object({role:ye.literal("tool")}).transform(t=>({role:t.role})))])),ye.array(ye.array(ye.union([bg.SystemMessage$outboundSchema.and(ye.object({role:ye.literal("system")}).transform(t=>({role:t.role}))),vg.UserMessage$outboundSchema.and(ye.object({role:ye.literal("user")}).transform(t=>({role:t.role}))),yg.AssistantMessage$outboundSchema.and(ye.object({role:ye.literal("assistant")}).transform(t=>({role:t.role}))),_g.ToolMessage$outboundSchema.and(ye.object({role:ye.literal("tool")}).transform(t=>({role:t.role})))])))]),model:ye.nullable(ye.string())}).transform(t=>(0,R1t.remap)(t,{inputs:"input"}));var M1t;(function(t){t.inboundSchema=Jt.ChatClassificationRequest$inboundSchema,t.outboundSchema=Jt.ChatClassificationRequest$outboundSchema})(M1t||(Jt.ChatClassificationRequest$=M1t={}));function sQr(t){return JSON.stringify(Jt.ChatClassificationRequest$outboundSchema.parse(t))}function uQr(t){return(0,cae.safeParse)(t,e=>Jt.ChatClassificationRequest$inboundSchema.parse(JSON.parse(e)),"Failed to parse 'ChatClassificationRequest' from JSON")}});var dae=v(no=>{"use strict";var lQr=no&&no.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),cQr=no&&no.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),dQr=no&&no.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&lQr(e,t,r);return cQr(e,t),e};Object.defineProperty(no,"__esModule",{value:!0});no.ChatCompletionChoice$=no.ChatCompletionChoice$outboundSchema=no.ChatCompletionChoice$inboundSchema=no.FinishReason$=no.FinishReason$outboundSchema=no.FinishReason$inboundSchema=no.FinishReason=void 0;no.chatCompletionChoiceToJSON=mQr;no.chatCompletionChoiceFromJSON=hQr;var Ky=dQr(Te()),L1t=qe(),fQr=ve(),pQr=dI(),F1t=fI();no.FinishReason={Stop:"stop",Length:"length",ModelLength:"model_length",Error:"error",ToolCalls:"tool_calls"};no.FinishReason$inboundSchema=Ky.union([Ky.nativeEnum(no.FinishReason),Ky.string().transform(pQr.catchUnrecognizedEnum)]);no.FinishReason$outboundSchema=Ky.union([Ky.nativeEnum(no.FinishReason),Ky.string().and(Ky.custom())]);var N1t;(function(t){t.inboundSchema=no.FinishReason$inboundSchema,t.outboundSchema=no.FinishReason$outboundSchema})(N1t||(no.FinishReason$=N1t={}));no.ChatCompletionChoice$inboundSchema=Ky.object({index:Ky.number().int(),message:F1t.AssistantMessage$inboundSchema,finish_reason:no.FinishReason$inboundSchema}).transform(t=>(0,L1t.remap)(t,{finish_reason:"finishReason"}));no.ChatCompletionChoice$outboundSchema=Ky.object({index:Ky.number().int(),message:F1t.AssistantMessage$outboundSchema,finishReason:no.FinishReason$outboundSchema}).transform(t=>(0,L1t.remap)(t,{finishReason:"finish_reason"}));var D1t;(function(t){t.inboundSchema=no.ChatCompletionChoice$inboundSchema,t.outboundSchema=no.ChatCompletionChoice$outboundSchema})(D1t||(no.ChatCompletionChoice$=D1t={}));function mQr(t){return JSON.stringify(no.ChatCompletionChoice$outboundSchema.parse(t))}function hQr(t){return(0,fQr.safeParse)(t,e=>no.ChatCompletionChoice$inboundSchema.parse(JSON.parse(e)),"Failed to parse 'ChatCompletionChoice' from JSON")}});var W1t=v(Yt=>{"use strict";var gQr=Yt&&Yt.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),yQr=Yt&&Yt.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),bQr=Yt&&Yt.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&gQr(e,t,r);return yQr(e,t),e};Object.defineProperty(Yt,"__esModule",{value:!0});Yt.ChatCompletionRequest$=Yt.ChatCompletionRequest$outboundSchema=Yt.ChatCompletionRequest$inboundSchema=Yt.ChatCompletionRequestToolChoice$=Yt.ChatCompletionRequestToolChoice$outboundSchema=Yt.ChatCompletionRequestToolChoice$inboundSchema=Yt.Messages$=Yt.Messages$outboundSchema=Yt.Messages$inboundSchema=Yt.Stop$=Yt.Stop$outboundSchema=Yt.Stop$inboundSchema=void 0;Yt.stopToJSON=_Qr;Yt.stopFromJSON=vQr;Yt.messagesToJSON=wQr;Yt.messagesFromJSON=SQr;Yt.chatCompletionRequestToolChoiceToJSON=xQr;Yt.chatCompletionRequestToolChoiceFromJSON=CQr;Yt.chatCompletionRequestToJSON=OQr;Yt.chatCompletionRequestFromJSON=PQr;var ke=bQr(Te()),U1t=qe(),fae=ve(),pae=fI(),z1t=qq(),H1t=Uq(),mae=jN(),V1t=zq(),hae=Hq(),gae=Vq(),yae=NN(),bae=DN();Yt.Stop$inboundSchema=ke.union([ke.string(),ke.array(ke.string())]);Yt.Stop$outboundSchema=ke.union([ke.string(),ke.array(ke.string())]);var k1t;(function(t){t.inboundSchema=Yt.Stop$inboundSchema,t.outboundSchema=Yt.Stop$outboundSchema})(k1t||(Yt.Stop$=k1t={}));function _Qr(t){return JSON.stringify(Yt.Stop$outboundSchema.parse(t))}function vQr(t){return(0,fae.safeParse)(t,e=>Yt.Stop$inboundSchema.parse(JSON.parse(e)),"Failed to parse 'Stop' from JSON")}Yt.Messages$inboundSchema=ke.union([mae.SystemMessage$inboundSchema.and(ke.object({role:ke.literal("system")}).transform(t=>({role:t.role}))),bae.UserMessage$inboundSchema.and(ke.object({role:ke.literal("user")}).transform(t=>({role:t.role}))),pae.AssistantMessage$inboundSchema.and(ke.object({role:ke.literal("assistant")}).transform(t=>({role:t.role}))),yae.ToolMessage$inboundSchema.and(ke.object({role:ke.literal("tool")}).transform(t=>({role:t.role})))]);Yt.Messages$outboundSchema=ke.union([mae.SystemMessage$outboundSchema.and(ke.object({role:ke.literal("system")}).transform(t=>({role:t.role}))),bae.UserMessage$outboundSchema.and(ke.object({role:ke.literal("user")}).transform(t=>({role:t.role}))),pae.AssistantMessage$outboundSchema.and(ke.object({role:ke.literal("assistant")}).transform(t=>({role:t.role}))),yae.ToolMessage$outboundSchema.and(ke.object({role:ke.literal("tool")}).transform(t=>({role:t.role})))]);var $1t;(function(t){t.inboundSchema=Yt.Messages$inboundSchema,t.outboundSchema=Yt.Messages$outboundSchema})($1t||(Yt.Messages$=$1t={}));function wQr(t){return JSON.stringify(Yt.Messages$outboundSchema.parse(t))}function SQr(t){return(0,fae.safeParse)(t,e=>Yt.Messages$inboundSchema.parse(JSON.parse(e)),"Failed to parse 'Messages' from JSON")}Yt.ChatCompletionRequestToolChoice$inboundSchema=ke.union([hae.ToolChoice$inboundSchema,gae.ToolChoiceEnum$inboundSchema]);Yt.ChatCompletionRequestToolChoice$outboundSchema=ke.union([hae.ToolChoice$outboundSchema,gae.ToolChoiceEnum$outboundSchema]);var B1t;(function(t){t.inboundSchema=Yt.ChatCompletionRequestToolChoice$inboundSchema,t.outboundSchema=Yt.ChatCompletionRequestToolChoice$outboundSchema})(B1t||(Yt.ChatCompletionRequestToolChoice$=B1t={}));function xQr(t){return JSON.stringify(Yt.ChatCompletionRequestToolChoice$outboundSchema.parse(t))}function CQr(t){return(0,fae.safeParse)(t,e=>Yt.ChatCompletionRequestToolChoice$inboundSchema.parse(JSON.parse(e)),"Failed to parse 'ChatCompletionRequestToolChoice' from JSON")}Yt.ChatCompletionRequest$inboundSchema=ke.object({model:ke.nullable(ke.string()),temperature:ke.nullable(ke.number()).optional(),top_p:ke.number().optional(),max_tokens:ke.nullable(ke.number().int()).optional(),stream:ke.boolean().default(!1),stop:ke.union([ke.string(),ke.array(ke.string())]).optional(),random_seed:ke.nullable(ke.number().int()).optional(),messages:ke.array(ke.union([mae.SystemMessage$inboundSchema.and(ke.object({role:ke.literal("system")}).transform(t=>({role:t.role}))),bae.UserMessage$inboundSchema.and(ke.object({role:ke.literal("user")}).transform(t=>({role:t.role}))),pae.AssistantMessage$inboundSchema.and(ke.object({role:ke.literal("assistant")}).transform(t=>({role:t.role}))),yae.ToolMessage$inboundSchema.and(ke.object({role:ke.literal("tool")}).transform(t=>({role:t.role})))])),response_format:H1t.ResponseFormat$inboundSchema.optional(),tools:ke.nullable(ke.array(V1t.Tool$inboundSchema)).optional(),tool_choice:ke.union([hae.ToolChoice$inboundSchema,gae.ToolChoiceEnum$inboundSchema]).optional(),presence_penalty:ke.number().optional(),frequency_penalty:ke.number().optional(),n:ke.nullable(ke.number().int()).optional(),prediction:z1t.Prediction$inboundSchema.optional(),safe_prompt:ke.boolean().optional()}).transform(t=>(0,U1t.remap)(t,{top_p:"topP",max_tokens:"maxTokens",random_seed:"randomSeed",response_format:"responseFormat",tool_choice:"toolChoice",presence_penalty:"presencePenalty",frequency_penalty:"frequencyPenalty",safe_prompt:"safePrompt"}));Yt.ChatCompletionRequest$outboundSchema=ke.object({model:ke.nullable(ke.string()),temperature:ke.nullable(ke.number()).optional(),topP:ke.number().optional(),maxTokens:ke.nullable(ke.number().int()).optional(),stream:ke.boolean().default(!1),stop:ke.union([ke.string(),ke.array(ke.string())]).optional(),randomSeed:ke.nullable(ke.number().int()).optional(),messages:ke.array(ke.union([mae.SystemMessage$outboundSchema.and(ke.object({role:ke.literal("system")}).transform(t=>({role:t.role}))),bae.UserMessage$outboundSchema.and(ke.object({role:ke.literal("user")}).transform(t=>({role:t.role}))),pae.AssistantMessage$outboundSchema.and(ke.object({role:ke.literal("assistant")}).transform(t=>({role:t.role}))),yae.ToolMessage$outboundSchema.and(ke.object({role:ke.literal("tool")}).transform(t=>({role:t.role})))])),responseFormat:H1t.ResponseFormat$outboundSchema.optional(),tools:ke.nullable(ke.array(V1t.Tool$outboundSchema)).optional(),toolChoice:ke.union([hae.ToolChoice$outboundSchema,gae.ToolChoiceEnum$outboundSchema]).optional(),presencePenalty:ke.number().optional(),frequencyPenalty:ke.number().optional(),n:ke.nullable(ke.number().int()).optional(),prediction:z1t.Prediction$outboundSchema.optional(),safePrompt:ke.boolean().optional()}).transform(t=>(0,U1t.remap)(t,{topP:"top_p",maxTokens:"max_tokens",randomSeed:"random_seed",responseFormat:"response_format",toolChoice:"tool_choice",presencePenalty:"presence_penalty",frequencyPenalty:"frequency_penalty",safePrompt:"safe_prompt"}));var q1t;(function(t){t.inboundSchema=Yt.ChatCompletionRequest$inboundSchema,t.outboundSchema=Yt.ChatCompletionRequest$outboundSchema})(q1t||(Yt.ChatCompletionRequest$=q1t={}));function OQr(t){return JSON.stringify(Yt.ChatCompletionRequest$outboundSchema.parse(t))}function PQr(t){return(0,fae.safeParse)(t,e=>Yt.ChatCompletionRequest$inboundSchema.parse(JSON.parse(e)),"Failed to parse 'ChatCompletionRequest' from JSON")}});var Kq=v(cu=>{"use strict";var EQr=cu&&cu.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),TQr=cu&&cu.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),AQr=cu&&cu.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&EQr(e,t,r);return TQr(e,t),e};Object.defineProperty(cu,"__esModule",{value:!0});cu.UsageInfo$=cu.UsageInfo$outboundSchema=cu.UsageInfo$inboundSchema=void 0;cu.usageInfoToJSON=MQr;cu.usageInfoFromJSON=RQr;var pI=AQr(Te()),G1t=qe(),IQr=ve();cu.UsageInfo$inboundSchema=pI.object({prompt_tokens:pI.number().int(),completion_tokens:pI.number().int(),total_tokens:pI.number().int()}).transform(t=>(0,G1t.remap)(t,{prompt_tokens:"promptTokens",completion_tokens:"completionTokens",total_tokens:"totalTokens"}));cu.UsageInfo$outboundSchema=pI.object({promptTokens:pI.number().int(),completionTokens:pI.number().int(),totalTokens:pI.number().int()}).transform(t=>(0,G1t.remap)(t,{promptTokens:"prompt_tokens",completionTokens:"completion_tokens",totalTokens:"total_tokens"}));var K1t;(function(t){t.inboundSchema=cu.UsageInfo$inboundSchema,t.outboundSchema=cu.UsageInfo$outboundSchema})(K1t||(cu.UsageInfo$=K1t={}));function MQr(t){return JSON.stringify(cu.UsageInfo$outboundSchema.parse(t))}function RQr(t){return(0,IQr.safeParse)(t,e=>cu.UsageInfo$inboundSchema.parse(JSON.parse(e)),"Failed to parse 'UsageInfo' from JSON")}});var X1t=v(du=>{"use strict";var jQr=du&&du.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),NQr=du&&du.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),DQr=du&&du.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&jQr(e,t,r);return NQr(e,t),e};Object.defineProperty(du,"__esModule",{value:!0});du.ChatCompletionResponse$=du.ChatCompletionResponse$outboundSchema=du.ChatCompletionResponse$inboundSchema=void 0;du.chatCompletionResponseToJSON=FQr;du.chatCompletionResponseFromJSON=kQr;var wg=DQr(Te()),LQr=ve(),Y1t=dae(),Z1t=Kq();du.ChatCompletionResponse$inboundSchema=wg.object({id:wg.string(),object:wg.string(),model:wg.string(),usage:Z1t.UsageInfo$inboundSchema,created:wg.number().int().optional(),choices:wg.array(Y1t.ChatCompletionChoice$inboundSchema).optional()});du.ChatCompletionResponse$outboundSchema=wg.object({id:wg.string(),object:wg.string(),model:wg.string(),usage:Z1t.UsageInfo$outboundSchema,created:wg.number().int().optional(),choices:wg.array(Y1t.ChatCompletionChoice$outboundSchema).optional()});var J1t;(function(t){t.inboundSchema=du.ChatCompletionResponse$inboundSchema,t.outboundSchema=du.ChatCompletionResponse$outboundSchema})(J1t||(du.ChatCompletionResponse$=J1t={}));function FQr(t){return JSON.stringify(du.ChatCompletionResponse$outboundSchema.parse(t))}function kQr(t){return(0,LQr.safeParse)(t,e=>du.ChatCompletionResponse$inboundSchema.parse(JSON.parse(e)),"Failed to parse 'ChatCompletionResponse' from JSON")}});var sjt=v(Zt=>{"use strict";var $Qr=Zt&&Zt.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),BQr=Zt&&Zt.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),qQr=Zt&&Zt.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&$Qr(e,t,r);return BQr(e,t),e};Object.defineProperty(Zt,"__esModule",{value:!0});Zt.ChatCompletionStreamRequest$=Zt.ChatCompletionStreamRequest$outboundSchema=Zt.ChatCompletionStreamRequest$inboundSchema=Zt.ChatCompletionStreamRequestToolChoice$=Zt.ChatCompletionStreamRequestToolChoice$outboundSchema=Zt.ChatCompletionStreamRequestToolChoice$inboundSchema=Zt.ChatCompletionStreamRequestMessages$=Zt.ChatCompletionStreamRequestMessages$outboundSchema=Zt.ChatCompletionStreamRequestMessages$inboundSchema=Zt.ChatCompletionStreamRequestStop$=Zt.ChatCompletionStreamRequestStop$outboundSchema=Zt.ChatCompletionStreamRequestStop$inboundSchema=void 0;Zt.chatCompletionStreamRequestStopToJSON=UQr;Zt.chatCompletionStreamRequestStopFromJSON=zQr;Zt.chatCompletionStreamRequestMessagesToJSON=HQr;Zt.chatCompletionStreamRequestMessagesFromJSON=VQr;Zt.chatCompletionStreamRequestToolChoiceToJSON=WQr;Zt.chatCompletionStreamRequestToolChoiceFromJSON=KQr;Zt.chatCompletionStreamRequestToJSON=GQr;Zt.chatCompletionStreamRequestFromJSON=JQr;var $e=qQr(Te()),njt=qe(),_ae=ve(),vae=fI(),ojt=qq(),ijt=Uq(),wae=jN(),ajt=zq(),Sae=Hq(),xae=Vq(),Cae=NN(),Oae=DN();Zt.ChatCompletionStreamRequestStop$inboundSchema=$e.union([$e.string(),$e.array($e.string())]);Zt.ChatCompletionStreamRequestStop$outboundSchema=$e.union([$e.string(),$e.array($e.string())]);var Q1t;(function(t){t.inboundSchema=Zt.ChatCompletionStreamRequestStop$inboundSchema,t.outboundSchema=Zt.ChatCompletionStreamRequestStop$outboundSchema})(Q1t||(Zt.ChatCompletionStreamRequestStop$=Q1t={}));function UQr(t){return JSON.stringify(Zt.ChatCompletionStreamRequestStop$outboundSchema.parse(t))}function zQr(t){return(0,_ae.safeParse)(t,e=>Zt.ChatCompletionStreamRequestStop$inboundSchema.parse(JSON.parse(e)),"Failed to parse 'ChatCompletionStreamRequestStop' from JSON")}Zt.ChatCompletionStreamRequestMessages$inboundSchema=$e.union([wae.SystemMessage$inboundSchema.and($e.object({role:$e.literal("system")}).transform(t=>({role:t.role}))),Oae.UserMessage$inboundSchema.and($e.object({role:$e.literal("user")}).transform(t=>({role:t.role}))),vae.AssistantMessage$inboundSchema.and($e.object({role:$e.literal("assistant")}).transform(t=>({role:t.role}))),Cae.ToolMessage$inboundSchema.and($e.object({role:$e.literal("tool")}).transform(t=>({role:t.role})))]);Zt.ChatCompletionStreamRequestMessages$outboundSchema=$e.union([wae.SystemMessage$outboundSchema.and($e.object({role:$e.literal("system")}).transform(t=>({role:t.role}))),Oae.UserMessage$outboundSchema.and($e.object({role:$e.literal("user")}).transform(t=>({role:t.role}))),vae.AssistantMessage$outboundSchema.and($e.object({role:$e.literal("assistant")}).transform(t=>({role:t.role}))),Cae.ToolMessage$outboundSchema.and($e.object({role:$e.literal("tool")}).transform(t=>({role:t.role})))]);var ejt;(function(t){t.inboundSchema=Zt.ChatCompletionStreamRequestMessages$inboundSchema,t.outboundSchema=Zt.ChatCompletionStreamRequestMessages$outboundSchema})(ejt||(Zt.ChatCompletionStreamRequestMessages$=ejt={}));function HQr(t){return JSON.stringify(Zt.ChatCompletionStreamRequestMessages$outboundSchema.parse(t))}function VQr(t){return(0,_ae.safeParse)(t,e=>Zt.ChatCompletionStreamRequestMessages$inboundSchema.parse(JSON.parse(e)),"Failed to parse 'ChatCompletionStreamRequestMessages' from JSON")}Zt.ChatCompletionStreamRequestToolChoice$inboundSchema=$e.union([Sae.ToolChoice$inboundSchema,xae.ToolChoiceEnum$inboundSchema]);Zt.ChatCompletionStreamRequestToolChoice$outboundSchema=$e.union([Sae.ToolChoice$outboundSchema,xae.ToolChoiceEnum$outboundSchema]);var tjt;(function(t){t.inboundSchema=Zt.ChatCompletionStreamRequestToolChoice$inboundSchema,t.outboundSchema=Zt.ChatCompletionStreamRequestToolChoice$outboundSchema})(tjt||(Zt.ChatCompletionStreamRequestToolChoice$=tjt={}));function WQr(t){return JSON.stringify(Zt.ChatCompletionStreamRequestToolChoice$outboundSchema.parse(t))}function KQr(t){return(0,_ae.safeParse)(t,e=>Zt.ChatCompletionStreamRequestToolChoice$inboundSchema.parse(JSON.parse(e)),"Failed to parse 'ChatCompletionStreamRequestToolChoice' from JSON")}Zt.ChatCompletionStreamRequest$inboundSchema=$e.object({model:$e.nullable($e.string()),temperature:$e.nullable($e.number()).optional(),top_p:$e.number().optional(),max_tokens:$e.nullable($e.number().int()).optional(),stream:$e.boolean().default(!0),stop:$e.union([$e.string(),$e.array($e.string())]).optional(),random_seed:$e.nullable($e.number().int()).optional(),messages:$e.array($e.union([wae.SystemMessage$inboundSchema.and($e.object({role:$e.literal("system")}).transform(t=>({role:t.role}))),Oae.UserMessage$inboundSchema.and($e.object({role:$e.literal("user")}).transform(t=>({role:t.role}))),vae.AssistantMessage$inboundSchema.and($e.object({role:$e.literal("assistant")}).transform(t=>({role:t.role}))),Cae.ToolMessage$inboundSchema.and($e.object({role:$e.literal("tool")}).transform(t=>({role:t.role})))])),response_format:ijt.ResponseFormat$inboundSchema.optional(),tools:$e.nullable($e.array(ajt.Tool$inboundSchema)).optional(),tool_choice:$e.union([Sae.ToolChoice$inboundSchema,xae.ToolChoiceEnum$inboundSchema]).optional(),presence_penalty:$e.number().optional(),frequency_penalty:$e.number().optional(),n:$e.nullable($e.number().int()).optional(),prediction:ojt.Prediction$inboundSchema.optional(),safe_prompt:$e.boolean().optional()}).transform(t=>(0,njt.remap)(t,{top_p:"topP",max_tokens:"maxTokens",random_seed:"randomSeed",response_format:"responseFormat",tool_choice:"toolChoice",presence_penalty:"presencePenalty",frequency_penalty:"frequencyPenalty",safe_prompt:"safePrompt"}));Zt.ChatCompletionStreamRequest$outboundSchema=$e.object({model:$e.nullable($e.string()),temperature:$e.nullable($e.number()).optional(),topP:$e.number().optional(),maxTokens:$e.nullable($e.number().int()).optional(),stream:$e.boolean().default(!0),stop:$e.union([$e.string(),$e.array($e.string())]).optional(),randomSeed:$e.nullable($e.number().int()).optional(),messages:$e.array($e.union([wae.SystemMessage$outboundSchema.and($e.object({role:$e.literal("system")}).transform(t=>({role:t.role}))),Oae.UserMessage$outboundSchema.and($e.object({role:$e.literal("user")}).transform(t=>({role:t.role}))),vae.AssistantMessage$outboundSchema.and($e.object({role:$e.literal("assistant")}).transform(t=>({role:t.role}))),Cae.ToolMessage$outboundSchema.and($e.object({role:$e.literal("tool")}).transform(t=>({role:t.role})))])),responseFormat:ijt.ResponseFormat$outboundSchema.optional(),tools:$e.nullable($e.array(ajt.Tool$outboundSchema)).optional(),toolChoice:$e.union([Sae.ToolChoice$outboundSchema,xae.ToolChoiceEnum$outboundSchema]).optional(),presencePenalty:$e.number().optional(),frequencyPenalty:$e.number().optional(),n:$e.nullable($e.number().int()).optional(),prediction:ojt.Prediction$outboundSchema.optional(),safePrompt:$e.boolean().optional()}).transform(t=>(0,njt.remap)(t,{topP:"top_p",maxTokens:"max_tokens",randomSeed:"random_seed",responseFormat:"response_format",toolChoice:"tool_choice",presencePenalty:"presence_penalty",frequencyPenalty:"frequency_penalty",safePrompt:"safe_prompt"}));var rjt;(function(t){t.inboundSchema=Zt.ChatCompletionStreamRequest$inboundSchema,t.outboundSchema=Zt.ChatCompletionStreamRequest$outboundSchema})(rjt||(Zt.ChatCompletionStreamRequest$=rjt={}));function GQr(t){return JSON.stringify(Zt.ChatCompletionStreamRequest$outboundSchema.parse(t))}function JQr(t){return(0,_ae.safeParse)(t,e=>Zt.ChatCompletionStreamRequest$inboundSchema.parse(JSON.parse(e)),"Failed to parse 'ChatCompletionStreamRequest' from JSON")}});var ZRe=v(fu=>{"use strict";var YQr=fu&&fu.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),ZQr=fu&&fu.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),XQr=fu&&fu.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&YQr(e,t,r);return ZQr(e,t),e};Object.defineProperty(fu,"__esModule",{value:!0});fu.MetricOut$=fu.MetricOut$outboundSchema=fu.MetricOut$inboundSchema=void 0;fu.metricOutToJSON=een;fu.metricOutFromJSON=ten;var zp=XQr(Te()),ljt=qe(),QQr=ve();fu.MetricOut$inboundSchema=zp.object({train_loss:zp.nullable(zp.number()).optional(),valid_loss:zp.nullable(zp.number()).optional(),valid_mean_token_accuracy:zp.nullable(zp.number()).optional()}).transform(t=>(0,ljt.remap)(t,{train_loss:"trainLoss",valid_loss:"validLoss",valid_mean_token_accuracy:"validMeanTokenAccuracy"}));fu.MetricOut$outboundSchema=zp.object({trainLoss:zp.nullable(zp.number()).optional(),validLoss:zp.nullable(zp.number()).optional(),validMeanTokenAccuracy:zp.nullable(zp.number()).optional()}).transform(t=>(0,ljt.remap)(t,{trainLoss:"train_loss",validLoss:"valid_loss",validMeanTokenAccuracy:"valid_mean_token_accuracy"}));var ujt;(function(t){t.inboundSchema=fu.MetricOut$inboundSchema,t.outboundSchema=fu.MetricOut$outboundSchema})(ujt||(fu.MetricOut$=ujt={}));function een(t){return JSON.stringify(fu.MetricOut$outboundSchema.parse(t))}function ten(t){return(0,QQr.safeParse)(t,e=>fu.MetricOut$inboundSchema.parse(JSON.parse(e)),"Failed to parse 'MetricOut' from JSON")}});var XRe=v(pu=>{"use strict";var ren=pu&&pu.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),nen=pu&&pu.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),oen=pu&&pu.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&ren(e,t,r);return nen(e,t),e};Object.defineProperty(pu,"__esModule",{value:!0});pu.CheckpointOut$=pu.CheckpointOut$outboundSchema=pu.CheckpointOut$inboundSchema=void 0;pu.checkpointOutToJSON=aen;pu.checkpointOutFromJSON=sen;var Gq=oen(Te()),djt=qe(),ien=ve(),fjt=ZRe();pu.CheckpointOut$inboundSchema=Gq.object({metrics:fjt.MetricOut$inboundSchema,step_number:Gq.number().int(),created_at:Gq.number().int()}).transform(t=>(0,djt.remap)(t,{step_number:"stepNumber",created_at:"createdAt"}));pu.CheckpointOut$outboundSchema=Gq.object({metrics:fjt.MetricOut$outboundSchema,stepNumber:Gq.number().int(),createdAt:Gq.number().int()}).transform(t=>(0,djt.remap)(t,{stepNumber:"step_number",createdAt:"created_at"}));var cjt;(function(t){t.inboundSchema=pu.CheckpointOut$inboundSchema,t.outboundSchema=pu.CheckpointOut$outboundSchema})(cjt||(pu.CheckpointOut$=cjt={}));function aen(t){return JSON.stringify(pu.CheckpointOut$outboundSchema.parse(t))}function sen(t){return(0,ien.safeParse)(t,e=>pu.CheckpointOut$inboundSchema.parse(JSON.parse(e)),"Failed to parse 'CheckpointOut' from JSON")}});var QRe=v(mu=>{"use strict";var uen=mu&&mu.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),len=mu&&mu.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),cen=mu&&mu.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&uen(e,t,r);return len(e,t),e};Object.defineProperty(mu,"__esModule",{value:!0});mu.ClassificationObject$=mu.ClassificationObject$outboundSchema=mu.ClassificationObject$inboundSchema=void 0;mu.classificationObjectToJSON=fen;mu.classificationObjectFromJSON=pen;var _x=cen(Te()),mjt=qe(),den=ve();mu.ClassificationObject$inboundSchema=_x.object({categories:_x.record(_x.boolean()).optional(),category_scores:_x.record(_x.number()).optional()}).transform(t=>(0,mjt.remap)(t,{category_scores:"categoryScores"}));mu.ClassificationObject$outboundSchema=_x.object({categories:_x.record(_x.boolean()).optional(),categoryScores:_x.record(_x.number()).optional()}).transform(t=>(0,mjt.remap)(t,{categoryScores:"category_scores"}));var pjt;(function(t){t.inboundSchema=mu.ClassificationObject$inboundSchema,t.outboundSchema=mu.ClassificationObject$outboundSchema})(pjt||(mu.ClassificationObject$=pjt={}));function fen(t){return JSON.stringify(mu.ClassificationObject$outboundSchema.parse(t))}function pen(t){return(0,den.safeParse)(t,e=>mu.ClassificationObject$inboundSchema.parse(JSON.parse(e)),"Failed to parse 'ClassificationObject' from JSON")}});var _jt=v(To=>{"use strict";var men=To&&To.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),hen=To&&To.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),gen=To&&To.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&men(e,t,r);return hen(e,t),e};Object.defineProperty(To,"__esModule",{value:!0});To.ClassificationRequest$=To.ClassificationRequest$outboundSchema=To.ClassificationRequest$inboundSchema=To.ClassificationRequestInputs$=To.ClassificationRequestInputs$outboundSchema=To.ClassificationRequestInputs$inboundSchema=void 0;To.classificationRequestInputsToJSON=yen;To.classificationRequestInputsFromJSON=ben;To.classificationRequestToJSON=_en;To.classificationRequestFromJSON=ven;var ds=gen(Te()),yjt=qe(),bjt=ve();To.ClassificationRequestInputs$inboundSchema=ds.union([ds.string(),ds.array(ds.string())]);To.ClassificationRequestInputs$outboundSchema=ds.union([ds.string(),ds.array(ds.string())]);var hjt;(function(t){t.inboundSchema=To.ClassificationRequestInputs$inboundSchema,t.outboundSchema=To.ClassificationRequestInputs$outboundSchema})(hjt||(To.ClassificationRequestInputs$=hjt={}));function yen(t){return JSON.stringify(To.ClassificationRequestInputs$outboundSchema.parse(t))}function ben(t){return(0,bjt.safeParse)(t,e=>To.ClassificationRequestInputs$inboundSchema.parse(JSON.parse(e)),"Failed to parse 'ClassificationRequestInputs' from JSON")}To.ClassificationRequest$inboundSchema=ds.object({input:ds.union([ds.string(),ds.array(ds.string())]),model:ds.nullable(ds.string()).optional()}).transform(t=>(0,yjt.remap)(t,{input:"inputs"}));To.ClassificationRequest$outboundSchema=ds.object({inputs:ds.union([ds.string(),ds.array(ds.string())]),model:ds.nullable(ds.string()).optional()}).transform(t=>(0,yjt.remap)(t,{inputs:"input"}));var gjt;(function(t){t.inboundSchema=To.ClassificationRequest$inboundSchema,t.outboundSchema=To.ClassificationRequest$outboundSchema})(gjt||(To.ClassificationRequest$=gjt={}));function _en(t){return JSON.stringify(To.ClassificationRequest$outboundSchema.parse(t))}function ven(t){return(0,bjt.safeParse)(t,e=>To.ClassificationRequest$inboundSchema.parse(JSON.parse(e)),"Failed to parse 'ClassificationRequest' from JSON")}});var Sjt=v(hu=>{"use strict";var wen=hu&&hu.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Sen=hu&&hu.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),xen=hu&&hu.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&wen(e,t,r);return Sen(e,t),e};Object.defineProperty(hu,"__esModule",{value:!0});hu.ClassificationResponse$=hu.ClassificationResponse$outboundSchema=hu.ClassificationResponse$inboundSchema=void 0;hu.classificationResponseToJSON=Oen;hu.classificationResponseFromJSON=Pen;var mI=xen(Te()),Cen=ve(),wjt=QRe();hu.ClassificationResponse$inboundSchema=mI.object({id:mI.string().optional(),model:mI.string().optional(),results:mI.array(wjt.ClassificationObject$inboundSchema).optional()});hu.ClassificationResponse$outboundSchema=mI.object({id:mI.string().optional(),model:mI.string().optional(),results:mI.array(wjt.ClassificationObject$outboundSchema).optional()});var vjt;(function(t){t.inboundSchema=hu.ClassificationResponse$inboundSchema,t.outboundSchema=hu.ClassificationResponse$outboundSchema})(vjt||(hu.ClassificationResponse$=vjt={}));function Oen(t){return JSON.stringify(hu.ClassificationResponse$outboundSchema.parse(t))}function Pen(t){return(0,Cen.safeParse)(t,e=>hu.ClassificationResponse$inboundSchema.parse(JSON.parse(e)),"Failed to parse 'ClassificationResponse' from JSON")}});var e1e=v(Ao=>{"use strict";var Een=Ao&&Ao.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Ten=Ao&&Ao.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Aen=Ao&&Ao.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&Een(e,t,r);return Ten(e,t),e};Object.defineProperty(Ao,"__esModule",{value:!0});Ao.DeltaMessage$=Ao.DeltaMessage$outboundSchema=Ao.DeltaMessage$inboundSchema=Ao.Content$=Ao.Content$outboundSchema=Ao.Content$inboundSchema=void 0;Ao.contentToJSON=Ien;Ao.contentFromJSON=Men;Ao.deltaMessageToJSON=Ren;Ao.deltaMessageFromJSON=jen;var Ca=Aen(Te()),Ojt=qe(),Pjt=ve(),Pae=$q(),Ejt=Uie();Ao.Content$inboundSchema=Ca.union([Ca.string(),Ca.array(Pae.ContentChunk$inboundSchema)]);Ao.Content$outboundSchema=Ca.union([Ca.string(),Ca.array(Pae.ContentChunk$outboundSchema)]);var xjt;(function(t){t.inboundSchema=Ao.Content$inboundSchema,t.outboundSchema=Ao.Content$outboundSchema})(xjt||(Ao.Content$=xjt={}));function Ien(t){return JSON.stringify(Ao.Content$outboundSchema.parse(t))}function Men(t){return(0,Pjt.safeParse)(t,e=>Ao.Content$inboundSchema.parse(JSON.parse(e)),"Failed to parse 'Content' from JSON")}Ao.DeltaMessage$inboundSchema=Ca.object({role:Ca.nullable(Ca.string()).optional(),content:Ca.nullable(Ca.union([Ca.string(),Ca.array(Pae.ContentChunk$inboundSchema)])).optional(),tool_calls:Ca.nullable(Ca.array(Ejt.ToolCall$inboundSchema)).optional()}).transform(t=>(0,Ojt.remap)(t,{tool_calls:"toolCalls"}));Ao.DeltaMessage$outboundSchema=Ca.object({role:Ca.nullable(Ca.string()).optional(),content:Ca.nullable(Ca.union([Ca.string(),Ca.array(Pae.ContentChunk$outboundSchema)])).optional(),toolCalls:Ca.nullable(Ca.array(Ejt.ToolCall$outboundSchema)).optional()}).transform(t=>(0,Ojt.remap)(t,{toolCalls:"tool_calls"}));var Cjt;(function(t){t.inboundSchema=Ao.DeltaMessage$inboundSchema,t.outboundSchema=Ao.DeltaMessage$outboundSchema})(Cjt||(Ao.DeltaMessage$=Cjt={}));function Ren(t){return JSON.stringify(Ao.DeltaMessage$outboundSchema.parse(t))}function jen(t){return(0,Pjt.safeParse)(t,e=>Ao.DeltaMessage$inboundSchema.parse(JSON.parse(e)),"Failed to parse 'DeltaMessage' from JSON")}});var t1e=v(oo=>{"use strict";var Nen=oo&&oo.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Den=oo&&oo.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Len=oo&&oo.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&Nen(e,t,r);return Den(e,t),e};Object.defineProperty(oo,"__esModule",{value:!0});oo.CompletionResponseStreamChoice$=oo.CompletionResponseStreamChoice$outboundSchema=oo.CompletionResponseStreamChoice$inboundSchema=oo.CompletionResponseStreamChoiceFinishReason$=oo.CompletionResponseStreamChoiceFinishReason$outboundSchema=oo.CompletionResponseStreamChoiceFinishReason$inboundSchema=oo.CompletionResponseStreamChoiceFinishReason=void 0;oo.completionResponseStreamChoiceToJSON=$en;oo.completionResponseStreamChoiceFromJSON=Ben;var Wm=Len(Te()),Ijt=qe(),Fen=ve(),ken=dI(),Mjt=e1e();oo.CompletionResponseStreamChoiceFinishReason={Stop:"stop",Length:"length",Error:"error",ToolCalls:"tool_calls"};oo.CompletionResponseStreamChoiceFinishReason$inboundSchema=Wm.union([Wm.nativeEnum(oo.CompletionResponseStreamChoiceFinishReason),Wm.string().transform(ken.catchUnrecognizedEnum)]);oo.CompletionResponseStreamChoiceFinishReason$outboundSchema=Wm.union([Wm.nativeEnum(oo.CompletionResponseStreamChoiceFinishReason),Wm.string().and(Wm.custom())]);var Tjt;(function(t){t.inboundSchema=oo.CompletionResponseStreamChoiceFinishReason$inboundSchema,t.outboundSchema=oo.CompletionResponseStreamChoiceFinishReason$outboundSchema})(Tjt||(oo.CompletionResponseStreamChoiceFinishReason$=Tjt={}));oo.CompletionResponseStreamChoice$inboundSchema=Wm.object({index:Wm.number().int(),delta:Mjt.DeltaMessage$inboundSchema,finish_reason:Wm.nullable(oo.CompletionResponseStreamChoiceFinishReason$inboundSchema)}).transform(t=>(0,Ijt.remap)(t,{finish_reason:"finishReason"}));oo.CompletionResponseStreamChoice$outboundSchema=Wm.object({index:Wm.number().int(),delta:Mjt.DeltaMessage$outboundSchema,finishReason:Wm.nullable(oo.CompletionResponseStreamChoiceFinishReason$outboundSchema)}).transform(t=>(0,Ijt.remap)(t,{finishReason:"finish_reason"}));var Ajt;(function(t){t.inboundSchema=oo.CompletionResponseStreamChoice$inboundSchema,t.outboundSchema=oo.CompletionResponseStreamChoice$outboundSchema})(Ajt||(oo.CompletionResponseStreamChoice$=Ajt={}));function $en(t){return JSON.stringify(oo.CompletionResponseStreamChoice$outboundSchema.parse(t))}function Ben(t){return(0,Fen.safeParse)(t,e=>oo.CompletionResponseStreamChoice$inboundSchema.parse(JSON.parse(e)),"Failed to parse 'CompletionResponseStreamChoice' from JSON")}});var r1e=v(gu=>{"use strict";var qen=gu&&gu.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Uen=gu&&gu.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),zen=gu&&gu.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&qen(e,t,r);return Uen(e,t),e};Object.defineProperty(gu,"__esModule",{value:!0});gu.CompletionChunk$=gu.CompletionChunk$outboundSchema=gu.CompletionChunk$inboundSchema=void 0;gu.completionChunkToJSON=Ven;gu.completionChunkFromJSON=Wen;var Sg=zen(Te()),Hen=ve(),jjt=t1e(),Njt=Kq();gu.CompletionChunk$inboundSchema=Sg.object({id:Sg.string(),object:Sg.string().optional(),created:Sg.number().int().optional(),model:Sg.string(),usage:Njt.UsageInfo$inboundSchema.optional(),choices:Sg.array(jjt.CompletionResponseStreamChoice$inboundSchema)});gu.CompletionChunk$outboundSchema=Sg.object({id:Sg.string(),object:Sg.string().optional(),created:Sg.number().int().optional(),model:Sg.string(),usage:Njt.UsageInfo$outboundSchema.optional(),choices:Sg.array(jjt.CompletionResponseStreamChoice$outboundSchema)});var Rjt;(function(t){t.inboundSchema=gu.CompletionChunk$inboundSchema,t.outboundSchema=gu.CompletionChunk$outboundSchema})(Rjt||(gu.CompletionChunk$=Rjt={}));function Ven(t){return JSON.stringify(gu.CompletionChunk$outboundSchema.parse(t))}function Wen(t){return(0,Hen.safeParse)(t,e=>gu.CompletionChunk$inboundSchema.parse(JSON.parse(e)),"Failed to parse 'CompletionChunk' from JSON")}});var Fjt=v(yu=>{"use strict";var Ken=yu&&yu.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Gen=yu&&yu.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Jen=yu&&yu.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&Ken(e,t,r);return Gen(e,t),e};Object.defineProperty(yu,"__esModule",{value:!0});yu.CompletionEvent$=yu.CompletionEvent$outboundSchema=yu.CompletionEvent$inboundSchema=void 0;yu.completionEventToJSON=Zen;yu.completionEventFromJSON=Xen;var X6=Jen(Te()),Yen=ve(),Ljt=r1e();yu.CompletionEvent$inboundSchema=X6.object({data:X6.string().transform((t,e)=>{try{return JSON.parse(t)}catch(r){return e.addIssue({code:X6.ZodIssueCode.custom,message:`malformed json: ${r}`}),X6.NEVER}}).pipe(Ljt.CompletionChunk$inboundSchema)});yu.CompletionEvent$outboundSchema=X6.object({data:Ljt.CompletionChunk$outboundSchema});var Djt;(function(t){t.inboundSchema=yu.CompletionEvent$inboundSchema,t.outboundSchema=yu.CompletionEvent$outboundSchema})(Djt||(yu.CompletionEvent$=Djt={}));function Zen(t){return JSON.stringify(yu.CompletionEvent$outboundSchema.parse(t))}function Xen(t){return(0,Yen.safeParse)(t,e=>yu.CompletionEvent$inboundSchema.parse(JSON.parse(e)),"Failed to parse 'CompletionEvent' from JSON")}});var $jt=v(bu=>{"use strict";var Qen=bu&&bu.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),etn=bu&&bu.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),ttn=bu&&bu.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&Qen(e,t,r);return etn(e,t),e};Object.defineProperty(bu,"__esModule",{value:!0});bu.DeleteFileOut$=bu.DeleteFileOut$outboundSchema=bu.DeleteFileOut$inboundSchema=void 0;bu.deleteFileOutToJSON=ntn;bu.deleteFileOutFromJSON=otn;var hI=ttn(Te()),rtn=ve();bu.DeleteFileOut$inboundSchema=hI.object({id:hI.string(),object:hI.string(),deleted:hI.boolean()});bu.DeleteFileOut$outboundSchema=hI.object({id:hI.string(),object:hI.string(),deleted:hI.boolean()});var kjt;(function(t){t.inboundSchema=bu.DeleteFileOut$inboundSchema,t.outboundSchema=bu.DeleteFileOut$outboundSchema})(kjt||(bu.DeleteFileOut$=kjt={}));function ntn(t){return JSON.stringify(bu.DeleteFileOut$outboundSchema.parse(t))}function otn(t){return(0,rtn.safeParse)(t,e=>bu.DeleteFileOut$inboundSchema.parse(JSON.parse(e)),"Failed to parse 'DeleteFileOut' from JSON")}});var qjt=v(_u=>{"use strict";var itn=_u&&_u.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),atn=_u&&_u.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),stn=_u&&_u.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&itn(e,t,r);return atn(e,t),e};Object.defineProperty(_u,"__esModule",{value:!0});_u.DeleteModelOut$=_u.DeleteModelOut$outboundSchema=_u.DeleteModelOut$inboundSchema=void 0;_u.deleteModelOutToJSON=ltn;_u.deleteModelOutFromJSON=ctn;var gI=stn(Te()),utn=ve();_u.DeleteModelOut$inboundSchema=gI.object({id:gI.string(),object:gI.string().default("model"),deleted:gI.boolean().default(!0)});_u.DeleteModelOut$outboundSchema=gI.object({id:gI.string(),object:gI.string().default("model"),deleted:gI.boolean().default(!0)});var Bjt;(function(t){t.inboundSchema=_u.DeleteModelOut$inboundSchema,t.outboundSchema=_u.DeleteModelOut$outboundSchema})(Bjt||(_u.DeleteModelOut$=Bjt={}));function ltn(t){return JSON.stringify(_u.DeleteModelOut$outboundSchema.parse(t))}function ctn(t){return(0,utn.safeParse)(t,e=>_u.DeleteModelOut$inboundSchema.parse(JSON.parse(e)),"Failed to parse 'DeleteModelOut' from JSON")}});var n1e=v(vu=>{"use strict";var dtn=vu&&vu.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),ftn=vu&&vu.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),ptn=vu&&vu.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&dtn(e,t,r);return ftn(e,t),e};Object.defineProperty(vu,"__esModule",{value:!0});vu.EventOut$=vu.EventOut$outboundSchema=vu.EventOut$inboundSchema=void 0;vu.eventOutToJSON=htn;vu.eventOutFromJSON=gtn;var xg=ptn(Te()),zjt=qe(),mtn=ve();vu.EventOut$inboundSchema=xg.object({name:xg.string(),data:xg.nullable(xg.record(xg.any())).optional(),created_at:xg.number().int()}).transform(t=>(0,zjt.remap)(t,{created_at:"createdAt"}));vu.EventOut$outboundSchema=xg.object({name:xg.string(),data:xg.nullable(xg.record(xg.any())).optional(),createdAt:xg.number().int()}).transform(t=>(0,zjt.remap)(t,{createdAt:"created_at"}));var Ujt;(function(t){t.inboundSchema=vu.EventOut$inboundSchema,t.outboundSchema=vu.EventOut$outboundSchema})(Ujt||(vu.EventOut$=Ujt={}));function htn(t){return JSON.stringify(vu.EventOut$outboundSchema.parse(t))}function gtn(t){return(0,mtn.safeParse)(t,e=>vu.EventOut$inboundSchema.parse(JSON.parse(e)),"Failed to parse 'EventOut' from JSON")}});var Eae=v(Io=>{"use strict";var ytn=Io&&Io.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),btn=Io&&Io.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),_tn=Io&&Io.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&ytn(e,t,r);return btn(e,t),e};Object.defineProperty(Io,"__esModule",{value:!0});Io.GithubRepositoryOut$=Io.GithubRepositoryOut$outboundSchema=Io.GithubRepositoryOut$inboundSchema=Io.GithubRepositoryOutType$=Io.GithubRepositoryOutType$outboundSchema=Io.GithubRepositoryOutType$inboundSchema=Io.GithubRepositoryOutType=void 0;Io.githubRepositoryOutToJSON=wtn;Io.githubRepositoryOutFromJSON=Stn;var zc=_tn(Te()),Wjt=qe(),vtn=ve();Io.GithubRepositoryOutType={Github:"github"};Io.GithubRepositoryOutType$inboundSchema=zc.nativeEnum(Io.GithubRepositoryOutType);Io.GithubRepositoryOutType$outboundSchema=Io.GithubRepositoryOutType$inboundSchema;var Hjt;(function(t){t.inboundSchema=Io.GithubRepositoryOutType$inboundSchema,t.outboundSchema=Io.GithubRepositoryOutType$outboundSchema})(Hjt||(Io.GithubRepositoryOutType$=Hjt={}));Io.GithubRepositoryOut$inboundSchema=zc.object({type:zc.literal("github").default("github"),name:zc.string(),owner:zc.string(),ref:zc.nullable(zc.string()).optional(),weight:zc.number().default(1),commit_id:zc.string()}).transform(t=>(0,Wjt.remap)(t,{commit_id:"commitId"}));Io.GithubRepositoryOut$outboundSchema=zc.object({type:zc.literal("github").default("github"),name:zc.string(),owner:zc.string(),ref:zc.nullable(zc.string()).optional(),weight:zc.number().default(1),commitId:zc.string()}).transform(t=>(0,Wjt.remap)(t,{commitId:"commit_id"}));var Vjt;(function(t){t.inboundSchema=Io.GithubRepositoryOut$inboundSchema,t.outboundSchema=Io.GithubRepositoryOut$outboundSchema})(Vjt||(Io.GithubRepositoryOut$=Vjt={}));function wtn(t){return JSON.stringify(Io.GithubRepositoryOut$outboundSchema.parse(t))}function Stn(t){return(0,vtn.safeParse)(t,e=>Io.GithubRepositoryOut$inboundSchema.parse(JSON.parse(e)),"Failed to parse 'GithubRepositoryOut' from JSON")}});var Tae=v(wu=>{"use strict";var xtn=wu&&wu.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Ctn=wu&&wu.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Otn=wu&&wu.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&xtn(e,t,r);return Ctn(e,t),e};Object.defineProperty(wu,"__esModule",{value:!0});wu.JobMetadataOut$=wu.JobMetadataOut$outboundSchema=wu.JobMetadataOut$inboundSchema=void 0;wu.jobMetadataOutToJSON=Etn;wu.jobMetadataOutFromJSON=Ttn;var li=Otn(Te()),Gjt=qe(),Ptn=ve();wu.JobMetadataOut$inboundSchema=li.object({expected_duration_seconds:li.nullable(li.number().int()).optional(),cost:li.nullable(li.number()).optional(),cost_currency:li.nullable(li.string()).optional(),train_tokens_per_step:li.nullable(li.number().int()).optional(),train_tokens:li.nullable(li.number().int()).optional(),data_tokens:li.nullable(li.number().int()).optional(),estimated_start_time:li.nullable(li.number().int()).optional()}).transform(t=>(0,Gjt.remap)(t,{expected_duration_seconds:"expectedDurationSeconds",cost_currency:"costCurrency",train_tokens_per_step:"trainTokensPerStep",train_tokens:"trainTokens",data_tokens:"dataTokens",estimated_start_time:"estimatedStartTime"}));wu.JobMetadataOut$outboundSchema=li.object({expectedDurationSeconds:li.nullable(li.number().int()).optional(),cost:li.nullable(li.number()).optional(),costCurrency:li.nullable(li.string()).optional(),trainTokensPerStep:li.nullable(li.number().int()).optional(),trainTokens:li.nullable(li.number().int()).optional(),dataTokens:li.nullable(li.number().int()).optional(),estimatedStartTime:li.nullable(li.number().int()).optional()}).transform(t=>(0,Gjt.remap)(t,{expectedDurationSeconds:"expected_duration_seconds",costCurrency:"cost_currency",trainTokensPerStep:"train_tokens_per_step",trainTokens:"train_tokens",dataTokens:"data_tokens",estimatedStartTime:"estimated_start_time"}));var Kjt;(function(t){t.inboundSchema=wu.JobMetadataOut$inboundSchema,t.outboundSchema=wu.JobMetadataOut$outboundSchema})(Kjt||(wu.JobMetadataOut$=Kjt={}));function Etn(t){return JSON.stringify(wu.JobMetadataOut$outboundSchema.parse(t))}function Ttn(t){return(0,Ptn.safeParse)(t,e=>wu.JobMetadataOut$inboundSchema.parse(JSON.parse(e)),"Failed to parse 'JobMetadataOut' from JSON")}});var Aae=v(Su=>{"use strict";var Atn=Su&&Su.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Itn=Su&&Su.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Mtn=Su&&Su.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&Atn(e,t,r);return Itn(e,t),e};Object.defineProperty(Su,"__esModule",{value:!0});Su.TrainingParameters$=Su.TrainingParameters$outboundSchema=Su.TrainingParameters$inboundSchema=void 0;Su.trainingParametersToJSON=jtn;Su.trainingParametersFromJSON=Ntn;var Si=Mtn(Te()),Yjt=qe(),Rtn=ve();Su.TrainingParameters$inboundSchema=Si.object({training_steps:Si.nullable(Si.number().int()).optional(),learning_rate:Si.number().default(1e-4),weight_decay:Si.nullable(Si.number()).optional(),warmup_fraction:Si.nullable(Si.number()).optional(),epochs:Si.nullable(Si.number()).optional(),fim_ratio:Si.nullable(Si.number()).optional(),seq_len:Si.nullable(Si.number().int()).optional()}).transform(t=>(0,Yjt.remap)(t,{training_steps:"trainingSteps",learning_rate:"learningRate",weight_decay:"weightDecay",warmup_fraction:"warmupFraction",fim_ratio:"fimRatio",seq_len:"seqLen"}));Su.TrainingParameters$outboundSchema=Si.object({trainingSteps:Si.nullable(Si.number().int()).optional(),learningRate:Si.number().default(1e-4),weightDecay:Si.nullable(Si.number()).optional(),warmupFraction:Si.nullable(Si.number()).optional(),epochs:Si.nullable(Si.number()).optional(),fimRatio:Si.nullable(Si.number()).optional(),seqLen:Si.nullable(Si.number().int()).optional()}).transform(t=>(0,Yjt.remap)(t,{trainingSteps:"training_steps",learningRate:"learning_rate",weightDecay:"weight_decay",warmupFraction:"warmup_fraction",fimRatio:"fim_ratio",seqLen:"seq_len"}));var Jjt;(function(t){t.inboundSchema=Su.TrainingParameters$inboundSchema,t.outboundSchema=Su.TrainingParameters$outboundSchema})(Jjt||(Su.TrainingParameters$=Jjt={}));function jtn(t){return JSON.stringify(Su.TrainingParameters$outboundSchema.parse(t))}function Ntn(t){return(0,Rtn.safeParse)(t,e=>Su.TrainingParameters$inboundSchema.parse(JSON.parse(e)),"Failed to parse 'TrainingParameters' from JSON")}});var Iae=v(Mo=>{"use strict";var Dtn=Mo&&Mo.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Ltn=Mo&&Mo.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Ftn=Mo&&Mo.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&Dtn(e,t,r);return Ltn(e,t),e};Object.defineProperty(Mo,"__esModule",{value:!0});Mo.WandbIntegrationOut$=Mo.WandbIntegrationOut$outboundSchema=Mo.WandbIntegrationOut$inboundSchema=Mo.WandbIntegrationOutType$=Mo.WandbIntegrationOutType$outboundSchema=Mo.WandbIntegrationOutType$inboundSchema=Mo.WandbIntegrationOutType=void 0;Mo.wandbIntegrationOutToJSON=$tn;Mo.wandbIntegrationOutFromJSON=Btn;var $f=Ftn(Te()),Qjt=qe(),ktn=ve();Mo.WandbIntegrationOutType={Wandb:"wandb"};Mo.WandbIntegrationOutType$inboundSchema=$f.nativeEnum(Mo.WandbIntegrationOutType);Mo.WandbIntegrationOutType$outboundSchema=Mo.WandbIntegrationOutType$inboundSchema;var Zjt;(function(t){t.inboundSchema=Mo.WandbIntegrationOutType$inboundSchema,t.outboundSchema=Mo.WandbIntegrationOutType$outboundSchema})(Zjt||(Mo.WandbIntegrationOutType$=Zjt={}));Mo.WandbIntegrationOut$inboundSchema=$f.object({type:$f.literal("wandb").default("wandb"),project:$f.string(),name:$f.nullable($f.string()).optional(),run_name:$f.nullable($f.string()).optional()}).transform(t=>(0,Qjt.remap)(t,{run_name:"runName"}));Mo.WandbIntegrationOut$outboundSchema=$f.object({type:$f.literal("wandb").default("wandb"),project:$f.string(),name:$f.nullable($f.string()).optional(),runName:$f.nullable($f.string()).optional()}).transform(t=>(0,Qjt.remap)(t,{runName:"run_name"}));var Xjt;(function(t){t.inboundSchema=Mo.WandbIntegrationOut$inboundSchema,t.outboundSchema=Mo.WandbIntegrationOut$outboundSchema})(Xjt||(Mo.WandbIntegrationOut$=Xjt={}));function $tn(t){return JSON.stringify(Mo.WandbIntegrationOut$outboundSchema.parse(t))}function Btn(t){return(0,ktn.safeParse)(t,e=>Mo.WandbIntegrationOut$inboundSchema.parse(JSON.parse(e)),"Failed to parse 'WandbIntegrationOut' from JSON")}});var cNt=v(mt=>{"use strict";var qtn=mt&&mt.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Utn=mt&&mt.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),ztn=mt&&mt.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&qtn(e,t,r);return Utn(e,t),e};Object.defineProperty(mt,"__esModule",{value:!0});mt.DetailedJobOut$=mt.DetailedJobOut$outboundSchema=mt.DetailedJobOut$inboundSchema=mt.DetailedJobOutRepositories$=mt.DetailedJobOutRepositories$outboundSchema=mt.DetailedJobOutRepositories$inboundSchema=mt.DetailedJobOutIntegrations$=mt.DetailedJobOutIntegrations$outboundSchema=mt.DetailedJobOutIntegrations$inboundSchema=mt.DetailedJobOutObject$=mt.DetailedJobOutObject$outboundSchema=mt.DetailedJobOutObject$inboundSchema=mt.DetailedJobOutStatus$=mt.DetailedJobOutStatus$outboundSchema=mt.DetailedJobOutStatus$inboundSchema=mt.DetailedJobOutObject=mt.DetailedJobOutStatus=void 0;mt.detailedJobOutIntegrationsToJSON=Htn;mt.detailedJobOutIntegrationsFromJSON=Vtn;mt.detailedJobOutRepositoriesToJSON=Wtn;mt.detailedJobOutRepositoriesFromJSON=Ktn;mt.detailedJobOutToJSON=Gtn;mt.detailedJobOutFromJSON=Jtn;var sr=ztn(Te()),iNt=qe(),o1e=ve(),aNt=XRe(),sNt=n1e(),Mae=Eae(),uNt=Tae(),lNt=Aae(),Rae=Iae();mt.DetailedJobOutStatus={Queued:"QUEUED",Started:"STARTED",Validating:"VALIDATING",Validated:"VALIDATED",Running:"RUNNING",FailedValidation:"FAILED_VALIDATION",Failed:"FAILED",Success:"SUCCESS",Cancelled:"CANCELLED",CancellationRequested:"CANCELLATION_REQUESTED"};mt.DetailedJobOutObject={Job:"job"};mt.DetailedJobOutStatus$inboundSchema=sr.nativeEnum(mt.DetailedJobOutStatus);mt.DetailedJobOutStatus$outboundSchema=mt.DetailedJobOutStatus$inboundSchema;var eNt;(function(t){t.inboundSchema=mt.DetailedJobOutStatus$inboundSchema,t.outboundSchema=mt.DetailedJobOutStatus$outboundSchema})(eNt||(mt.DetailedJobOutStatus$=eNt={}));mt.DetailedJobOutObject$inboundSchema=sr.nativeEnum(mt.DetailedJobOutObject);mt.DetailedJobOutObject$outboundSchema=mt.DetailedJobOutObject$inboundSchema;var tNt;(function(t){t.inboundSchema=mt.DetailedJobOutObject$inboundSchema,t.outboundSchema=mt.DetailedJobOutObject$outboundSchema})(tNt||(mt.DetailedJobOutObject$=tNt={}));mt.DetailedJobOutIntegrations$inboundSchema=Rae.WandbIntegrationOut$inboundSchema;mt.DetailedJobOutIntegrations$outboundSchema=Rae.WandbIntegrationOut$outboundSchema;var rNt;(function(t){t.inboundSchema=mt.DetailedJobOutIntegrations$inboundSchema,t.outboundSchema=mt.DetailedJobOutIntegrations$outboundSchema})(rNt||(mt.DetailedJobOutIntegrations$=rNt={}));function Htn(t){return JSON.stringify(mt.DetailedJobOutIntegrations$outboundSchema.parse(t))}function Vtn(t){return(0,o1e.safeParse)(t,e=>mt.DetailedJobOutIntegrations$inboundSchema.parse(JSON.parse(e)),"Failed to parse 'DetailedJobOutIntegrations' from JSON")}mt.DetailedJobOutRepositories$inboundSchema=Mae.GithubRepositoryOut$inboundSchema;mt.DetailedJobOutRepositories$outboundSchema=Mae.GithubRepositoryOut$outboundSchema;var nNt;(function(t){t.inboundSchema=mt.DetailedJobOutRepositories$inboundSchema,t.outboundSchema=mt.DetailedJobOutRepositories$outboundSchema})(nNt||(mt.DetailedJobOutRepositories$=nNt={}));function Wtn(t){return JSON.stringify(mt.DetailedJobOutRepositories$outboundSchema.parse(t))}function Ktn(t){return(0,o1e.safeParse)(t,e=>mt.DetailedJobOutRepositories$inboundSchema.parse(JSON.parse(e)),"Failed to parse 'DetailedJobOutRepositories' from JSON")}mt.DetailedJobOut$inboundSchema=sr.object({id:sr.string(),auto_start:sr.boolean(),hyperparameters:lNt.TrainingParameters$inboundSchema,model:sr.string(),status:mt.DetailedJobOutStatus$inboundSchema,job_type:sr.string(),created_at:sr.number().int(),modified_at:sr.number().int(),training_files:sr.array(sr.string()),validation_files:sr.nullable(sr.array(sr.string())).optional(),object:sr.literal("job").default("job"),fine_tuned_model:sr.nullable(sr.string()).optional(),suffix:sr.nullable(sr.string()).optional(),integrations:sr.nullable(sr.array(Rae.WandbIntegrationOut$inboundSchema)).optional(),trained_tokens:sr.nullable(sr.number().int()).optional(),repositories:sr.array(Mae.GithubRepositoryOut$inboundSchema).optional(),metadata:sr.nullable(uNt.JobMetadataOut$inboundSchema).optional(),events:sr.array(sNt.EventOut$inboundSchema).optional(),checkpoints:sr.array(aNt.CheckpointOut$inboundSchema).optional()}).transform(t=>(0,iNt.remap)(t,{auto_start:"autoStart",job_type:"jobType",created_at:"createdAt",modified_at:"modifiedAt",training_files:"trainingFiles",validation_files:"validationFiles",fine_tuned_model:"fineTunedModel",trained_tokens:"trainedTokens"}));mt.DetailedJobOut$outboundSchema=sr.object({id:sr.string(),autoStart:sr.boolean(),hyperparameters:lNt.TrainingParameters$outboundSchema,model:sr.string(),status:mt.DetailedJobOutStatus$outboundSchema,jobType:sr.string(),createdAt:sr.number().int(),modifiedAt:sr.number().int(),trainingFiles:sr.array(sr.string()),validationFiles:sr.nullable(sr.array(sr.string())).optional(),object:sr.literal("job").default("job"),fineTunedModel:sr.nullable(sr.string()).optional(),suffix:sr.nullable(sr.string()).optional(),integrations:sr.nullable(sr.array(Rae.WandbIntegrationOut$outboundSchema)).optional(),trainedTokens:sr.nullable(sr.number().int()).optional(),repositories:sr.array(Mae.GithubRepositoryOut$outboundSchema).optional(),metadata:sr.nullable(uNt.JobMetadataOut$outboundSchema).optional(),events:sr.array(sNt.EventOut$outboundSchema).optional(),checkpoints:sr.array(aNt.CheckpointOut$outboundSchema).optional()}).transform(t=>(0,iNt.remap)(t,{autoStart:"auto_start",jobType:"job_type",createdAt:"created_at",modifiedAt:"modified_at",trainingFiles:"training_files",validationFiles:"validation_files",fineTunedModel:"fine_tuned_model",trainedTokens:"trained_tokens"}));var oNt;(function(t){t.inboundSchema=mt.DetailedJobOut$inboundSchema,t.outboundSchema=mt.DetailedJobOut$outboundSchema})(oNt||(mt.DetailedJobOut$=oNt={}));function Gtn(t){return JSON.stringify(mt.DetailedJobOut$outboundSchema.parse(t))}function Jtn(t){return(0,o1e.safeParse)(t,e=>mt.DetailedJobOut$inboundSchema.parse(JSON.parse(e)),"Failed to parse 'DetailedJobOut' from JSON")}});var hNt=v(Ro=>{"use strict";var Ytn=Ro&&Ro.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Ztn=Ro&&Ro.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Xtn=Ro&&Ro.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&Ytn(e,t,r);return Ztn(e,t),e};Object.defineProperty(Ro,"__esModule",{value:!0});Ro.EmbeddingRequest$=Ro.EmbeddingRequest$outboundSchema=Ro.EmbeddingRequest$inboundSchema=Ro.Inputs$=Ro.Inputs$outboundSchema=Ro.Inputs$inboundSchema=void 0;Ro.inputsToJSON=Qtn;Ro.inputsFromJSON=ern;Ro.embeddingRequestToJSON=trn;Ro.embeddingRequestFromJSON=rrn;var Oa=Xtn(Te()),pNt=qe(),mNt=ve();Ro.Inputs$inboundSchema=Oa.union([Oa.string(),Oa.array(Oa.string())]);Ro.Inputs$outboundSchema=Oa.union([Oa.string(),Oa.array(Oa.string())]);var dNt;(function(t){t.inboundSchema=Ro.Inputs$inboundSchema,t.outboundSchema=Ro.Inputs$outboundSchema})(dNt||(Ro.Inputs$=dNt={}));function Qtn(t){return JSON.stringify(Ro.Inputs$outboundSchema.parse(t))}function ern(t){return(0,mNt.safeParse)(t,e=>Ro.Inputs$inboundSchema.parse(JSON.parse(e)),"Failed to parse 'Inputs' from JSON")}Ro.EmbeddingRequest$inboundSchema=Oa.object({input:Oa.union([Oa.string(),Oa.array(Oa.string())]),model:Oa.string().default("mistral-embed"),encoding_format:Oa.nullable(Oa.string()).optional()}).transform(t=>(0,pNt.remap)(t,{input:"inputs",encoding_format:"encodingFormat"}));Ro.EmbeddingRequest$outboundSchema=Oa.object({inputs:Oa.union([Oa.string(),Oa.array(Oa.string())]),model:Oa.string().default("mistral-embed"),encodingFormat:Oa.nullable(Oa.string()).optional()}).transform(t=>(0,pNt.remap)(t,{inputs:"input",encodingFormat:"encoding_format"}));var fNt;(function(t){t.inboundSchema=Ro.EmbeddingRequest$inboundSchema,t.outboundSchema=Ro.EmbeddingRequest$outboundSchema})(fNt||(Ro.EmbeddingRequest$=fNt={}));function trn(t){return JSON.stringify(Ro.EmbeddingRequest$outboundSchema.parse(t))}function rrn(t){return(0,mNt.safeParse)(t,e=>Ro.EmbeddingRequest$inboundSchema.parse(JSON.parse(e)),"Failed to parse 'EmbeddingRequest' from JSON")}});var i1e=v(xu=>{"use strict";var nrn=xu&&xu.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),orn=xu&&xu.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),irn=xu&&xu.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&nrn(e,t,r);return orn(e,t),e};Object.defineProperty(xu,"__esModule",{value:!0});xu.EmbeddingResponseData$=xu.EmbeddingResponseData$outboundSchema=xu.EmbeddingResponseData$inboundSchema=void 0;xu.embeddingResponseDataToJSON=srn;xu.embeddingResponseDataFromJSON=urn;var vx=irn(Te()),arn=ve();xu.EmbeddingResponseData$inboundSchema=vx.object({object:vx.string().optional(),embedding:vx.array(vx.number()).optional(),index:vx.number().int().optional()});xu.EmbeddingResponseData$outboundSchema=vx.object({object:vx.string().optional(),embedding:vx.array(vx.number()).optional(),index:vx.number().int().optional()});var gNt;(function(t){t.inboundSchema=xu.EmbeddingResponseData$inboundSchema,t.outboundSchema=xu.EmbeddingResponseData$outboundSchema})(gNt||(xu.EmbeddingResponseData$=gNt={}));function srn(t){return JSON.stringify(xu.EmbeddingResponseData$outboundSchema.parse(t))}function urn(t){return(0,arn.safeParse)(t,e=>xu.EmbeddingResponseData$inboundSchema.parse(JSON.parse(e)),"Failed to parse 'EmbeddingResponseData' from JSON")}});var vNt=v(Cu=>{"use strict";var lrn=Cu&&Cu.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),crn=Cu&&Cu.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),drn=Cu&&Cu.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&lrn(e,t,r);return crn(e,t),e};Object.defineProperty(Cu,"__esModule",{value:!0});Cu.EmbeddingResponse$=Cu.EmbeddingResponse$outboundSchema=Cu.EmbeddingResponse$inboundSchema=void 0;Cu.embeddingResponseToJSON=prn;Cu.embeddingResponseFromJSON=mrn;var wx=drn(Te()),frn=ve(),bNt=i1e(),_Nt=Kq();Cu.EmbeddingResponse$inboundSchema=wx.object({id:wx.string(),object:wx.string(),model:wx.string(),usage:_Nt.UsageInfo$inboundSchema,data:wx.array(bNt.EmbeddingResponseData$inboundSchema)});Cu.EmbeddingResponse$outboundSchema=wx.object({id:wx.string(),object:wx.string(),model:wx.string(),usage:_Nt.UsageInfo$outboundSchema,data:wx.array(bNt.EmbeddingResponseData$outboundSchema)});var yNt;(function(t){t.inboundSchema=Cu.EmbeddingResponse$inboundSchema,t.outboundSchema=Cu.EmbeddingResponse$outboundSchema})(yNt||(Cu.EmbeddingResponse$=yNt={}));function prn(t){return JSON.stringify(Cu.EmbeddingResponse$outboundSchema.parse(t))}function mrn(t){return(0,frn.safeParse)(t,e=>Cu.EmbeddingResponse$inboundSchema.parse(JSON.parse(e)),"Failed to parse 'EmbeddingResponse' from JSON")}});var Q6=v(Ou=>{"use strict";var hrn=Ou&&Ou.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),grn=Ou&&Ou.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),yrn=Ou&&Ou.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&hrn(e,t,r);return grn(e,t),e};Object.defineProperty(Ou,"__esModule",{value:!0});Ou.FilePurpose$=Ou.FilePurpose$outboundSchema=Ou.FilePurpose$inboundSchema=Ou.FilePurpose=void 0;var FN=yrn(Te()),brn=dI();Ou.FilePurpose={FineTune:"fine-tune",Batch:"batch"};Ou.FilePurpose$inboundSchema=FN.union([FN.nativeEnum(Ou.FilePurpose),FN.string().transform(brn.catchUnrecognizedEnum)]);Ou.FilePurpose$outboundSchema=FN.union([FN.nativeEnum(Ou.FilePurpose),FN.string().and(FN.custom())]);var wNt;(function(t){t.inboundSchema=Ou.FilePurpose$inboundSchema,t.outboundSchema=Ou.FilePurpose$outboundSchema})(wNt||(Ou.FilePurpose$=wNt={}))});var e5=v(Pu=>{"use strict";var _rn=Pu&&Pu.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),vrn=Pu&&Pu.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),wrn=Pu&&Pu.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&_rn(e,t,r);return vrn(e,t),e};Object.defineProperty(Pu,"__esModule",{value:!0});Pu.SampleType$=Pu.SampleType$outboundSchema=Pu.SampleType$inboundSchema=Pu.SampleType=void 0;var kN=wrn(Te()),Srn=dI();Pu.SampleType={Pretrain:"pretrain",Instruct:"instruct",BatchRequest:"batch_request",BatchResult:"batch_result",BatchError:"batch_error"};Pu.SampleType$inboundSchema=kN.union([kN.nativeEnum(Pu.SampleType),kN.string().transform(Srn.catchUnrecognizedEnum)]);Pu.SampleType$outboundSchema=kN.union([kN.nativeEnum(Pu.SampleType),kN.string().and(kN.custom())]);var SNt;(function(t){t.inboundSchema=Pu.SampleType$inboundSchema,t.outboundSchema=Pu.SampleType$outboundSchema})(SNt||(Pu.SampleType$=SNt={}))});var t5=v(Eu=>{"use strict";var xrn=Eu&&Eu.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Crn=Eu&&Eu.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Orn=Eu&&Eu.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&xrn(e,t,r);return Crn(e,t),e};Object.defineProperty(Eu,"__esModule",{value:!0});Eu.Source$=Eu.Source$outboundSchema=Eu.Source$inboundSchema=Eu.Source=void 0;var $N=Orn(Te()),Prn=dI();Eu.Source={Upload:"upload",Repository:"repository",Mistral:"mistral"};Eu.Source$inboundSchema=$N.union([$N.nativeEnum(Eu.Source),$N.string().transform(Prn.catchUnrecognizedEnum)]);Eu.Source$outboundSchema=$N.union([$N.nativeEnum(Eu.Source),$N.string().and($N.custom())]);var xNt;(function(t){t.inboundSchema=Eu.Source$inboundSchema,t.outboundSchema=Eu.Source$outboundSchema})(xNt||(Eu.Source$=xNt={}))});var a1e=v(Tu=>{"use strict";var Ern=Tu&&Tu.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Trn=Tu&&Tu.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Arn=Tu&&Tu.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&Ern(e,t,r);return Trn(e,t),e};Object.defineProperty(Tu,"__esModule",{value:!0});Tu.FileSchema$=Tu.FileSchema$outboundSchema=Tu.FileSchema$inboundSchema=void 0;Tu.fileSchemaToJSON=Mrn;Tu.fileSchemaFromJSON=Rrn;var Gd=Arn(Te()),ONt=qe(),Irn=ve(),PNt=Q6(),ENt=e5(),TNt=t5();Tu.FileSchema$inboundSchema=Gd.object({id:Gd.string(),object:Gd.string(),bytes:Gd.number().int(),created_at:Gd.number().int(),filename:Gd.string(),purpose:PNt.FilePurpose$inboundSchema,sample_type:ENt.SampleType$inboundSchema,num_lines:Gd.nullable(Gd.number().int()).optional(),source:TNt.Source$inboundSchema}).transform(t=>(0,ONt.remap)(t,{bytes:"sizeBytes",created_at:"createdAt",sample_type:"sampleType",num_lines:"numLines"}));Tu.FileSchema$outboundSchema=Gd.object({id:Gd.string(),object:Gd.string(),sizeBytes:Gd.number().int(),createdAt:Gd.number().int(),filename:Gd.string(),purpose:PNt.FilePurpose$outboundSchema,sampleType:ENt.SampleType$outboundSchema,numLines:Gd.nullable(Gd.number().int()).optional(),source:TNt.Source$outboundSchema}).transform(t=>(0,ONt.remap)(t,{sizeBytes:"bytes",createdAt:"created_at",sampleType:"sample_type",numLines:"num_lines"}));var CNt;(function(t){t.inboundSchema=Tu.FileSchema$inboundSchema,t.outboundSchema=Tu.FileSchema$outboundSchema})(CNt||(Tu.FileSchema$=CNt={}));function Mrn(t){return JSON.stringify(Tu.FileSchema$outboundSchema.parse(t))}function Rrn(t){return(0,Irn.safeParse)(t,e=>Tu.FileSchema$inboundSchema.parse(JSON.parse(e)),"Failed to parse 'FileSchema' from JSON")}});var INt=v(Au=>{"use strict";var jrn=Au&&Au.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Nrn=Au&&Au.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Drn=Au&&Au.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&jrn(e,t,r);return Nrn(e,t),e};Object.defineProperty(Au,"__esModule",{value:!0});Au.FileSignedURL$=Au.FileSignedURL$outboundSchema=Au.FileSignedURL$inboundSchema=void 0;Au.fileSignedURLToJSON=Frn;Au.fileSignedURLFromJSON=krn;var jae=Drn(Te()),Lrn=ve();Au.FileSignedURL$inboundSchema=jae.object({url:jae.string()});Au.FileSignedURL$outboundSchema=jae.object({url:jae.string()});var ANt;(function(t){t.inboundSchema=Au.FileSignedURL$inboundSchema,t.outboundSchema=Au.FileSignedURL$outboundSchema})(ANt||(Au.FileSignedURL$=ANt={}));function Frn(t){return JSON.stringify(Au.FileSignedURL$outboundSchema.parse(t))}function krn(t){return(0,Lrn.safeParse)(t,e=>Au.FileSignedURL$inboundSchema.parse(JSON.parse(e)),"Failed to parse 'FileSignedURL' from JSON")}});var DNt=v(jo=>{"use strict";var $rn=jo&&jo.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Brn=jo&&jo.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),qrn=jo&&jo.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&$rn(e,t,r);return Brn(e,t),e};Object.defineProperty(jo,"__esModule",{value:!0});jo.FIMCompletionRequest$=jo.FIMCompletionRequest$outboundSchema=jo.FIMCompletionRequest$inboundSchema=jo.FIMCompletionRequestStop$=jo.FIMCompletionRequestStop$outboundSchema=jo.FIMCompletionRequestStop$inboundSchema=void 0;jo.fimCompletionRequestStopToJSON=Urn;jo.fimCompletionRequestStopFromJSON=zrn;jo.fimCompletionRequestToJSON=Hrn;jo.fimCompletionRequestFromJSON=Vrn;var gr=qrn(Te()),jNt=qe(),NNt=ve();jo.FIMCompletionRequestStop$inboundSchema=gr.union([gr.string(),gr.array(gr.string())]);jo.FIMCompletionRequestStop$outboundSchema=gr.union([gr.string(),gr.array(gr.string())]);var MNt;(function(t){t.inboundSchema=jo.FIMCompletionRequestStop$inboundSchema,t.outboundSchema=jo.FIMCompletionRequestStop$outboundSchema})(MNt||(jo.FIMCompletionRequestStop$=MNt={}));function Urn(t){return JSON.stringify(jo.FIMCompletionRequestStop$outboundSchema.parse(t))}function zrn(t){return(0,NNt.safeParse)(t,e=>jo.FIMCompletionRequestStop$inboundSchema.parse(JSON.parse(e)),"Failed to parse 'FIMCompletionRequestStop' from JSON")}jo.FIMCompletionRequest$inboundSchema=gr.object({model:gr.nullable(gr.string()),temperature:gr.nullable(gr.number()).optional(),top_p:gr.number().default(1),max_tokens:gr.nullable(gr.number().int()).optional(),stream:gr.boolean().default(!1),stop:gr.union([gr.string(),gr.array(gr.string())]).optional(),random_seed:gr.nullable(gr.number().int()).optional(),prompt:gr.string(),suffix:gr.nullable(gr.string()).optional(),min_tokens:gr.nullable(gr.number().int()).optional()}).transform(t=>(0,jNt.remap)(t,{top_p:"topP",max_tokens:"maxTokens",random_seed:"randomSeed",min_tokens:"minTokens"}));jo.FIMCompletionRequest$outboundSchema=gr.object({model:gr.nullable(gr.string()),temperature:gr.nullable(gr.number()).optional(),topP:gr.number().default(1),maxTokens:gr.nullable(gr.number().int()).optional(),stream:gr.boolean().default(!1),stop:gr.union([gr.string(),gr.array(gr.string())]).optional(),randomSeed:gr.nullable(gr.number().int()).optional(),prompt:gr.string(),suffix:gr.nullable(gr.string()).optional(),minTokens:gr.nullable(gr.number().int()).optional()}).transform(t=>(0,jNt.remap)(t,{topP:"top_p",maxTokens:"max_tokens",randomSeed:"random_seed",minTokens:"min_tokens"}));var RNt;(function(t){t.inboundSchema=jo.FIMCompletionRequest$inboundSchema,t.outboundSchema=jo.FIMCompletionRequest$outboundSchema})(RNt||(jo.FIMCompletionRequest$=RNt={}));function Hrn(t){return JSON.stringify(jo.FIMCompletionRequest$outboundSchema.parse(t))}function Vrn(t){return(0,NNt.safeParse)(t,e=>jo.FIMCompletionRequest$inboundSchema.parse(JSON.parse(e)),"Failed to parse 'FIMCompletionRequest' from JSON")}});var $Nt=v(Iu=>{"use strict";var Wrn=Iu&&Iu.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Krn=Iu&&Iu.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Grn=Iu&&Iu.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&Wrn(e,t,r);return Krn(e,t),e};Object.defineProperty(Iu,"__esModule",{value:!0});Iu.FIMCompletionResponse$=Iu.FIMCompletionResponse$outboundSchema=Iu.FIMCompletionResponse$inboundSchema=void 0;Iu.fimCompletionResponseToJSON=Yrn;Iu.fimCompletionResponseFromJSON=Zrn;var Cg=Grn(Te()),Jrn=ve(),FNt=dae(),kNt=Kq();Iu.FIMCompletionResponse$inboundSchema=Cg.object({id:Cg.string(),object:Cg.string(),model:Cg.string(),usage:kNt.UsageInfo$inboundSchema,created:Cg.number().int().optional(),choices:Cg.array(FNt.ChatCompletionChoice$inboundSchema).optional()});Iu.FIMCompletionResponse$outboundSchema=Cg.object({id:Cg.string(),object:Cg.string(),model:Cg.string(),usage:kNt.UsageInfo$outboundSchema,created:Cg.number().int().optional(),choices:Cg.array(FNt.ChatCompletionChoice$outboundSchema).optional()});var LNt;(function(t){t.inboundSchema=Iu.FIMCompletionResponse$inboundSchema,t.outboundSchema=Iu.FIMCompletionResponse$outboundSchema})(LNt||(Iu.FIMCompletionResponse$=LNt={}));function Yrn(t){return JSON.stringify(Iu.FIMCompletionResponse$outboundSchema.parse(t))}function Zrn(t){return(0,Jrn.safeParse)(t,e=>Iu.FIMCompletionResponse$inboundSchema.parse(JSON.parse(e)),"Failed to parse 'FIMCompletionResponse' from JSON")}});var HNt=v(No=>{"use strict";var Xrn=No&&No.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Qrn=No&&No.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),enn=No&&No.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&Xrn(e,t,r);return Qrn(e,t),e};Object.defineProperty(No,"__esModule",{value:!0});No.FIMCompletionStreamRequest$=No.FIMCompletionStreamRequest$outboundSchema=No.FIMCompletionStreamRequest$inboundSchema=No.FIMCompletionStreamRequestStop$=No.FIMCompletionStreamRequestStop$outboundSchema=No.FIMCompletionStreamRequestStop$inboundSchema=void 0;No.fimCompletionStreamRequestStopToJSON=tnn;No.fimCompletionStreamRequestStopFromJSON=rnn;No.fimCompletionStreamRequestToJSON=nnn;No.fimCompletionStreamRequestFromJSON=onn;var yr=enn(Te()),UNt=qe(),zNt=ve();No.FIMCompletionStreamRequestStop$inboundSchema=yr.union([yr.string(),yr.array(yr.string())]);No.FIMCompletionStreamRequestStop$outboundSchema=yr.union([yr.string(),yr.array(yr.string())]);var BNt;(function(t){t.inboundSchema=No.FIMCompletionStreamRequestStop$inboundSchema,t.outboundSchema=No.FIMCompletionStreamRequestStop$outboundSchema})(BNt||(No.FIMCompletionStreamRequestStop$=BNt={}));function tnn(t){return JSON.stringify(No.FIMCompletionStreamRequestStop$outboundSchema.parse(t))}function rnn(t){return(0,zNt.safeParse)(t,e=>No.FIMCompletionStreamRequestStop$inboundSchema.parse(JSON.parse(e)),"Failed to parse 'FIMCompletionStreamRequestStop' from JSON")}No.FIMCompletionStreamRequest$inboundSchema=yr.object({model:yr.nullable(yr.string()),temperature:yr.nullable(yr.number()).optional(),top_p:yr.number().default(1),max_tokens:yr.nullable(yr.number().int()).optional(),stream:yr.boolean().default(!0),stop:yr.union([yr.string(),yr.array(yr.string())]).optional(),random_seed:yr.nullable(yr.number().int()).optional(),prompt:yr.string(),suffix:yr.nullable(yr.string()).optional(),min_tokens:yr.nullable(yr.number().int()).optional()}).transform(t=>(0,UNt.remap)(t,{top_p:"topP",max_tokens:"maxTokens",random_seed:"randomSeed",min_tokens:"minTokens"}));No.FIMCompletionStreamRequest$outboundSchema=yr.object({model:yr.nullable(yr.string()),temperature:yr.nullable(yr.number()).optional(),topP:yr.number().default(1),maxTokens:yr.nullable(yr.number().int()).optional(),stream:yr.boolean().default(!0),stop:yr.union([yr.string(),yr.array(yr.string())]).optional(),randomSeed:yr.nullable(yr.number().int()).optional(),prompt:yr.string(),suffix:yr.nullable(yr.string()).optional(),minTokens:yr.nullable(yr.number().int()).optional()}).transform(t=>(0,UNt.remap)(t,{topP:"top_p",maxTokens:"max_tokens",randomSeed:"random_seed",minTokens:"min_tokens"}));var qNt;(function(t){t.inboundSchema=No.FIMCompletionStreamRequest$inboundSchema,t.outboundSchema=No.FIMCompletionStreamRequest$outboundSchema})(qNt||(No.FIMCompletionStreamRequest$=qNt={}));function nnn(t){return JSON.stringify(No.FIMCompletionStreamRequest$outboundSchema.parse(t))}function onn(t){return(0,zNt.safeParse)(t,e=>No.FIMCompletionStreamRequest$inboundSchema.parse(JSON.parse(e)),"Failed to parse 'FIMCompletionStreamRequest' from JSON")}});var s1e=v(Mu=>{"use strict";var inn=Mu&&Mu.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),ann=Mu&&Mu.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),snn=Mu&&Mu.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&inn(e,t,r);return ann(e,t),e};Object.defineProperty(Mu,"__esModule",{value:!0});Mu.FTModelCapabilitiesOut$=Mu.FTModelCapabilitiesOut$outboundSchema=Mu.FTModelCapabilitiesOut$inboundSchema=void 0;Mu.ftModelCapabilitiesOutToJSON=lnn;Mu.ftModelCapabilitiesOutFromJSON=cnn;var Sx=snn(Te()),WNt=qe(),unn=ve();Mu.FTModelCapabilitiesOut$inboundSchema=Sx.object({completion_chat:Sx.boolean().default(!0),completion_fim:Sx.boolean().default(!1),function_calling:Sx.boolean().default(!1),fine_tuning:Sx.boolean().default(!1)}).transform(t=>(0,WNt.remap)(t,{completion_chat:"completionChat",completion_fim:"completionFim",function_calling:"functionCalling",fine_tuning:"fineTuning"}));Mu.FTModelCapabilitiesOut$outboundSchema=Sx.object({completionChat:Sx.boolean().default(!0),completionFim:Sx.boolean().default(!1),functionCalling:Sx.boolean().default(!1),fineTuning:Sx.boolean().default(!1)}).transform(t=>(0,WNt.remap)(t,{completionChat:"completion_chat",completionFim:"completion_fim",functionCalling:"function_calling",fineTuning:"fine_tuning"}));var VNt;(function(t){t.inboundSchema=Mu.FTModelCapabilitiesOut$inboundSchema,t.outboundSchema=Mu.FTModelCapabilitiesOut$outboundSchema})(VNt||(Mu.FTModelCapabilitiesOut$=VNt={}));function lnn(t){return JSON.stringify(Mu.FTModelCapabilitiesOut$outboundSchema.parse(t))}function cnn(t){return(0,unn.safeParse)(t,e=>Mu.FTModelCapabilitiesOut$inboundSchema.parse(JSON.parse(e)),"Failed to parse 'FTModelCapabilitiesOut' from JSON")}});var u1e=v(Do=>{"use strict";var dnn=Do&&Do.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),fnn=Do&&Do.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),pnn=Do&&Do.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&dnn(e,t,r);return fnn(e,t),e};Object.defineProperty(Do,"__esModule",{value:!0});Do.FTModelCard$=Do.FTModelCard$outboundSchema=Do.FTModelCard$inboundSchema=Do.FTModelCardType$=Do.FTModelCardType$outboundSchema=Do.FTModelCardType$inboundSchema=Do.FTModelCardType=void 0;Do.ftModelCardToJSON=hnn;Do.ftModelCardFromJSON=gnn;var rn=pnn(Te()),JNt=qe(),mnn=ve(),YNt=lae();Do.FTModelCardType={FineTuned:"fine-tuned"};Do.FTModelCardType$inboundSchema=rn.nativeEnum(Do.FTModelCardType);Do.FTModelCardType$outboundSchema=Do.FTModelCardType$inboundSchema;var KNt;(function(t){t.inboundSchema=Do.FTModelCardType$inboundSchema,t.outboundSchema=Do.FTModelCardType$outboundSchema})(KNt||(Do.FTModelCardType$=KNt={}));Do.FTModelCard$inboundSchema=rn.object({id:rn.string(),object:rn.string().default("model"),created:rn.number().int().optional(),owned_by:rn.string().default("mistralai"),capabilities:YNt.ModelCapabilities$inboundSchema,name:rn.nullable(rn.string()).optional(),description:rn.nullable(rn.string()).optional(),max_context_length:rn.number().int().default(32768),aliases:rn.array(rn.string()).optional(),deprecation:rn.nullable(rn.string().datetime({offset:!0}).transform(t=>new Date(t))).optional(),default_model_temperature:rn.nullable(rn.number()).optional(),type:rn.literal("fine-tuned").default("fine-tuned"),job:rn.string(),root:rn.string(),archived:rn.boolean().default(!1)}).transform(t=>(0,JNt.remap)(t,{owned_by:"ownedBy",max_context_length:"maxContextLength",default_model_temperature:"defaultModelTemperature"}));Do.FTModelCard$outboundSchema=rn.object({id:rn.string(),object:rn.string().default("model"),created:rn.number().int().optional(),ownedBy:rn.string().default("mistralai"),capabilities:YNt.ModelCapabilities$outboundSchema,name:rn.nullable(rn.string()).optional(),description:rn.nullable(rn.string()).optional(),maxContextLength:rn.number().int().default(32768),aliases:rn.array(rn.string()).optional(),deprecation:rn.nullable(rn.date().transform(t=>t.toISOString())).optional(),defaultModelTemperature:rn.nullable(rn.number()).optional(),type:rn.literal("fine-tuned").default("fine-tuned"),job:rn.string(),root:rn.string(),archived:rn.boolean().default(!1)}).transform(t=>(0,JNt.remap)(t,{ownedBy:"owned_by",maxContextLength:"max_context_length",defaultModelTemperature:"default_model_temperature"}));var GNt;(function(t){t.inboundSchema=Do.FTModelCard$inboundSchema,t.outboundSchema=Do.FTModelCard$outboundSchema})(GNt||(Do.FTModelCard$=GNt={}));function hnn(t){return JSON.stringify(Do.FTModelCard$outboundSchema.parse(t))}function gnn(t){return(0,mnn.safeParse)(t,e=>Do.FTModelCard$inboundSchema.parse(JSON.parse(e)),"Failed to parse 'FTModelCard' from JSON")}});var tDt=v(Lo=>{"use strict";var ynn=Lo&&Lo.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),bnn=Lo&&Lo.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),_nn=Lo&&Lo.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&ynn(e,t,r);return bnn(e,t),e};Object.defineProperty(Lo,"__esModule",{value:!0});Lo.FTModelOut$=Lo.FTModelOut$outboundSchema=Lo.FTModelOut$inboundSchema=Lo.FTModelOutObject$=Lo.FTModelOutObject$outboundSchema=Lo.FTModelOutObject$inboundSchema=Lo.FTModelOutObject=void 0;Lo.ftModelOutToJSON=wnn;Lo.ftModelOutFromJSON=Snn;var ti=_nn(Te()),QNt=qe(),vnn=ve(),eDt=s1e();Lo.FTModelOutObject={Model:"model"};Lo.FTModelOutObject$inboundSchema=ti.nativeEnum(Lo.FTModelOutObject);Lo.FTModelOutObject$outboundSchema=Lo.FTModelOutObject$inboundSchema;var ZNt;(function(t){t.inboundSchema=Lo.FTModelOutObject$inboundSchema,t.outboundSchema=Lo.FTModelOutObject$outboundSchema})(ZNt||(Lo.FTModelOutObject$=ZNt={}));Lo.FTModelOut$inboundSchema=ti.object({id:ti.string(),object:ti.literal("model").default("model"),created:ti.number().int(),owned_by:ti.string(),root:ti.string(),archived:ti.boolean(),name:ti.nullable(ti.string()).optional(),description:ti.nullable(ti.string()).optional(),capabilities:eDt.FTModelCapabilitiesOut$inboundSchema,max_context_length:ti.number().int().default(32768),aliases:ti.array(ti.string()).optional(),job:ti.string()}).transform(t=>(0,QNt.remap)(t,{owned_by:"ownedBy",max_context_length:"maxContextLength"}));Lo.FTModelOut$outboundSchema=ti.object({id:ti.string(),object:ti.literal("model").default("model"),created:ti.number().int(),ownedBy:ti.string(),root:ti.string(),archived:ti.boolean(),name:ti.nullable(ti.string()).optional(),description:ti.nullable(ti.string()).optional(),capabilities:eDt.FTModelCapabilitiesOut$outboundSchema,maxContextLength:ti.number().int().default(32768),aliases:ti.array(ti.string()).optional(),job:ti.string()}).transform(t=>(0,QNt.remap)(t,{ownedBy:"owned_by",maxContextLength:"max_context_length"}));var XNt;(function(t){t.inboundSchema=Lo.FTModelOut$inboundSchema,t.outboundSchema=Lo.FTModelOut$outboundSchema})(XNt||(Lo.FTModelOut$=XNt={}));function wnn(t){return JSON.stringify(Lo.FTModelOut$outboundSchema.parse(t))}function Snn(t){return(0,vnn.safeParse)(t,e=>Lo.FTModelOut$inboundSchema.parse(JSON.parse(e)),"Failed to parse 'FTModelOut' from JSON")}});var l1e=v(Fo=>{"use strict";var xnn=Fo&&Fo.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Cnn=Fo&&Fo.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Onn=Fo&&Fo.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&xnn(e,t,r);return Cnn(e,t),e};Object.defineProperty(Fo,"__esModule",{value:!0});Fo.GithubRepositoryIn$=Fo.GithubRepositoryIn$outboundSchema=Fo.GithubRepositoryIn$inboundSchema=Fo.GithubRepositoryInType$=Fo.GithubRepositoryInType$outboundSchema=Fo.GithubRepositoryInType$inboundSchema=Fo.GithubRepositoryInType=void 0;Fo.githubRepositoryInToJSON=Enn;Fo.githubRepositoryInFromJSON=Tnn;var Hc=Onn(Te()),Pnn=ve();Fo.GithubRepositoryInType={Github:"github"};Fo.GithubRepositoryInType$inboundSchema=Hc.nativeEnum(Fo.GithubRepositoryInType);Fo.GithubRepositoryInType$outboundSchema=Fo.GithubRepositoryInType$inboundSchema;var rDt;(function(t){t.inboundSchema=Fo.GithubRepositoryInType$inboundSchema,t.outboundSchema=Fo.GithubRepositoryInType$outboundSchema})(rDt||(Fo.GithubRepositoryInType$=rDt={}));Fo.GithubRepositoryIn$inboundSchema=Hc.object({type:Hc.literal("github").default("github"),name:Hc.string(),owner:Hc.string(),ref:Hc.nullable(Hc.string()).optional(),weight:Hc.number().default(1),token:Hc.string()});Fo.GithubRepositoryIn$outboundSchema=Hc.object({type:Hc.literal("github").default("github"),name:Hc.string(),owner:Hc.string(),ref:Hc.nullable(Hc.string()).optional(),weight:Hc.number().default(1),token:Hc.string()});var nDt;(function(t){t.inboundSchema=Fo.GithubRepositoryIn$inboundSchema,t.outboundSchema=Fo.GithubRepositoryIn$outboundSchema})(nDt||(Fo.GithubRepositoryIn$=nDt={}));function Enn(t){return JSON.stringify(Fo.GithubRepositoryIn$outboundSchema.parse(t))}function Tnn(t){return(0,Pnn.safeParse)(t,e=>Fo.GithubRepositoryIn$inboundSchema.parse(JSON.parse(e)),"Failed to parse 'GithubRepositoryIn' from JSON")}});var c1e=v(Ru=>{"use strict";var Ann=Ru&&Ru.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Inn=Ru&&Ru.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Mnn=Ru&&Ru.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&Ann(e,t,r);return Inn(e,t),e};Object.defineProperty(Ru,"__esModule",{value:!0});Ru.TrainingFile$=Ru.TrainingFile$outboundSchema=Ru.TrainingFile$inboundSchema=void 0;Ru.trainingFileToJSON=jnn;Ru.trainingFileFromJSON=Nnn;var Jq=Mnn(Te()),iDt=qe(),Rnn=ve();Ru.TrainingFile$inboundSchema=Jq.object({file_id:Jq.string(),weight:Jq.number().default(1)}).transform(t=>(0,iDt.remap)(t,{file_id:"fileId"}));Ru.TrainingFile$outboundSchema=Jq.object({fileId:Jq.string(),weight:Jq.number().default(1)}).transform(t=>(0,iDt.remap)(t,{fileId:"file_id"}));var oDt;(function(t){t.inboundSchema=Ru.TrainingFile$inboundSchema,t.outboundSchema=Ru.TrainingFile$outboundSchema})(oDt||(Ru.TrainingFile$=oDt={}));function jnn(t){return JSON.stringify(Ru.TrainingFile$outboundSchema.parse(t))}function Nnn(t){return(0,Rnn.safeParse)(t,e=>Ru.TrainingFile$inboundSchema.parse(JSON.parse(e)),"Failed to parse 'TrainingFile' from JSON")}});var d1e=v(ju=>{"use strict";var Dnn=ju&&ju.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Lnn=ju&&ju.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Fnn=ju&&ju.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&Dnn(e,t,r);return Lnn(e,t),e};Object.defineProperty(ju,"__esModule",{value:!0});ju.TrainingParametersIn$=ju.TrainingParametersIn$outboundSchema=ju.TrainingParametersIn$inboundSchema=void 0;ju.trainingParametersInToJSON=$nn;ju.trainingParametersInFromJSON=Bnn;var xi=Fnn(Te()),sDt=qe(),knn=ve();ju.TrainingParametersIn$inboundSchema=xi.object({training_steps:xi.nullable(xi.number().int()).optional(),learning_rate:xi.number().default(1e-4),weight_decay:xi.nullable(xi.number()).optional(),warmup_fraction:xi.nullable(xi.number()).optional(),epochs:xi.nullable(xi.number()).optional(),fim_ratio:xi.nullable(xi.number()).optional(),seq_len:xi.nullable(xi.number().int()).optional()}).transform(t=>(0,sDt.remap)(t,{training_steps:"trainingSteps",learning_rate:"learningRate",weight_decay:"weightDecay",warmup_fraction:"warmupFraction",fim_ratio:"fimRatio",seq_len:"seqLen"}));ju.TrainingParametersIn$outboundSchema=xi.object({trainingSteps:xi.nullable(xi.number().int()).optional(),learningRate:xi.number().default(1e-4),weightDecay:xi.nullable(xi.number()).optional(),warmupFraction:xi.nullable(xi.number()).optional(),epochs:xi.nullable(xi.number()).optional(),fimRatio:xi.nullable(xi.number()).optional(),seqLen:xi.nullable(xi.number().int()).optional()}).transform(t=>(0,sDt.remap)(t,{trainingSteps:"training_steps",learningRate:"learning_rate",weightDecay:"weight_decay",warmupFraction:"warmup_fraction",fimRatio:"fim_ratio",seqLen:"seq_len"}));var aDt;(function(t){t.inboundSchema=ju.TrainingParametersIn$inboundSchema,t.outboundSchema=ju.TrainingParametersIn$outboundSchema})(aDt||(ju.TrainingParametersIn$=aDt={}));function $nn(t){return JSON.stringify(ju.TrainingParametersIn$outboundSchema.parse(t))}function Bnn(t){return(0,knn.safeParse)(t,e=>ju.TrainingParametersIn$inboundSchema.parse(JSON.parse(e)),"Failed to parse 'TrainingParametersIn' from JSON")}});var f1e=v(ko=>{"use strict";var qnn=ko&&ko.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Unn=ko&&ko.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),znn=ko&&ko.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&qnn(e,t,r);return Unn(e,t),e};Object.defineProperty(ko,"__esModule",{value:!0});ko.WandbIntegration$=ko.WandbIntegration$outboundSchema=ko.WandbIntegration$inboundSchema=ko.WandbIntegrationType$=ko.WandbIntegrationType$outboundSchema=ko.WandbIntegrationType$inboundSchema=ko.WandbIntegrationType=void 0;ko.wandbIntegrationToJSON=Vnn;ko.wandbIntegrationFromJSON=Wnn;var Vc=znn(Te()),cDt=qe(),Hnn=ve();ko.WandbIntegrationType={Wandb:"wandb"};ko.WandbIntegrationType$inboundSchema=Vc.nativeEnum(ko.WandbIntegrationType);ko.WandbIntegrationType$outboundSchema=ko.WandbIntegrationType$inboundSchema;var uDt;(function(t){t.inboundSchema=ko.WandbIntegrationType$inboundSchema,t.outboundSchema=ko.WandbIntegrationType$outboundSchema})(uDt||(ko.WandbIntegrationType$=uDt={}));ko.WandbIntegration$inboundSchema=Vc.object({type:Vc.literal("wandb").default("wandb"),project:Vc.string(),name:Vc.nullable(Vc.string()).optional(),api_key:Vc.string(),run_name:Vc.nullable(Vc.string()).optional()}).transform(t=>(0,cDt.remap)(t,{api_key:"apiKey",run_name:"runName"}));ko.WandbIntegration$outboundSchema=Vc.object({type:Vc.literal("wandb").default("wandb"),project:Vc.string(),name:Vc.nullable(Vc.string()).optional(),apiKey:Vc.string(),runName:Vc.nullable(Vc.string()).optional()}).transform(t=>(0,cDt.remap)(t,{apiKey:"api_key",runName:"run_name"}));var lDt;(function(t){t.inboundSchema=ko.WandbIntegration$inboundSchema,t.outboundSchema=ko.WandbIntegration$outboundSchema})(lDt||(ko.WandbIntegration$=lDt={}));function Vnn(t){return JSON.stringify(ko.WandbIntegration$outboundSchema.parse(t))}function Wnn(t){return(0,Hnn.safeParse)(t,e=>ko.WandbIntegration$inboundSchema.parse(JSON.parse(e)),"Failed to parse 'WandbIntegration' from JSON")}});var yDt=v(Dr=>{"use strict";var Knn=Dr&&Dr.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Gnn=Dr&&Dr.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Jnn=Dr&&Dr.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&Knn(e,t,r);return Gnn(e,t),e};Object.defineProperty(Dr,"__esModule",{value:!0});Dr.JobIn$=Dr.JobIn$outboundSchema=Dr.JobIn$inboundSchema=Dr.JobInRepositories$=Dr.JobInRepositories$outboundSchema=Dr.JobInRepositories$inboundSchema=Dr.JobInIntegrations$=Dr.JobInIntegrations$outboundSchema=Dr.JobInIntegrations$inboundSchema=void 0;Dr.jobInIntegrationsToJSON=Ynn;Dr.jobInIntegrationsFromJSON=Znn;Dr.jobInRepositoriesToJSON=Xnn;Dr.jobInRepositoriesFromJSON=Qnn;Dr.jobInToJSON=eon;Dr.jobInFromJSON=ton;var Pa=Jnn(Te()),mDt=qe(),p1e=ve(),Nae=l1e(),hDt=c1e(),gDt=d1e(),Dae=f1e();Dr.JobInIntegrations$inboundSchema=Dae.WandbIntegration$inboundSchema;Dr.JobInIntegrations$outboundSchema=Dae.WandbIntegration$outboundSchema;var dDt;(function(t){t.inboundSchema=Dr.JobInIntegrations$inboundSchema,t.outboundSchema=Dr.JobInIntegrations$outboundSchema})(dDt||(Dr.JobInIntegrations$=dDt={}));function Ynn(t){return JSON.stringify(Dr.JobInIntegrations$outboundSchema.parse(t))}function Znn(t){return(0,p1e.safeParse)(t,e=>Dr.JobInIntegrations$inboundSchema.parse(JSON.parse(e)),"Failed to parse 'JobInIntegrations' from JSON")}Dr.JobInRepositories$inboundSchema=Nae.GithubRepositoryIn$inboundSchema;Dr.JobInRepositories$outboundSchema=Nae.GithubRepositoryIn$outboundSchema;var fDt;(function(t){t.inboundSchema=Dr.JobInRepositories$inboundSchema,t.outboundSchema=Dr.JobInRepositories$outboundSchema})(fDt||(Dr.JobInRepositories$=fDt={}));function Xnn(t){return JSON.stringify(Dr.JobInRepositories$outboundSchema.parse(t))}function Qnn(t){return(0,p1e.safeParse)(t,e=>Dr.JobInRepositories$inboundSchema.parse(JSON.parse(e)),"Failed to parse 'JobInRepositories' from JSON")}Dr.JobIn$inboundSchema=Pa.object({model:Pa.string(),training_files:Pa.array(hDt.TrainingFile$inboundSchema).optional(),validation_files:Pa.nullable(Pa.array(Pa.string())).optional(),hyperparameters:gDt.TrainingParametersIn$inboundSchema,suffix:Pa.nullable(Pa.string()).optional(),integrations:Pa.nullable(Pa.array(Dae.WandbIntegration$inboundSchema)).optional(),repositories:Pa.array(Nae.GithubRepositoryIn$inboundSchema).optional(),auto_start:Pa.boolean().optional()}).transform(t=>(0,mDt.remap)(t,{training_files:"trainingFiles",validation_files:"validationFiles",auto_start:"autoStart"}));Dr.JobIn$outboundSchema=Pa.object({model:Pa.string(),trainingFiles:Pa.array(hDt.TrainingFile$outboundSchema).optional(),validationFiles:Pa.nullable(Pa.array(Pa.string())).optional(),hyperparameters:gDt.TrainingParametersIn$outboundSchema,suffix:Pa.nullable(Pa.string()).optional(),integrations:Pa.nullable(Pa.array(Dae.WandbIntegration$outboundSchema)).optional(),repositories:Pa.array(Nae.GithubRepositoryIn$outboundSchema).optional(),autoStart:Pa.boolean().optional()}).transform(t=>(0,mDt.remap)(t,{trainingFiles:"training_files",validationFiles:"validation_files",autoStart:"auto_start"}));var pDt;(function(t){t.inboundSchema=Dr.JobIn$inboundSchema,t.outboundSchema=Dr.JobIn$outboundSchema})(pDt||(Dr.JobIn$=pDt={}));function eon(t){return JSON.stringify(Dr.JobIn$outboundSchema.parse(t))}function ton(t){return(0,p1e.safeParse)(t,e=>Dr.JobIn$inboundSchema.parse(JSON.parse(e)),"Failed to parse 'JobIn' from JSON")}});var h1e=v(ht=>{"use strict";var ron=ht&&ht.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),non=ht&&ht.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),oon=ht&&ht.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&ron(e,t,r);return non(e,t),e};Object.defineProperty(ht,"__esModule",{value:!0});ht.JobOut$=ht.JobOut$outboundSchema=ht.JobOut$inboundSchema=ht.Repositories$=ht.Repositories$outboundSchema=ht.Repositories$inboundSchema=ht.Integrations$=ht.Integrations$outboundSchema=ht.Integrations$inboundSchema=ht.ObjectT$=ht.ObjectT$outboundSchema=ht.ObjectT$inboundSchema=ht.Status$=ht.Status$outboundSchema=ht.Status$inboundSchema=ht.ObjectT=ht.Status=void 0;ht.integrationsToJSON=ion;ht.integrationsFromJSON=aon;ht.repositoriesToJSON=son;ht.repositoriesFromJSON=uon;ht.jobOutToJSON=lon;ht.jobOutFromJSON=con;var br=oon(Te()),xDt=qe(),m1e=ve(),Lae=Eae(),CDt=Tae(),ODt=Aae(),Fae=Iae();ht.Status={Queued:"QUEUED",Started:"STARTED",Validating:"VALIDATING",Validated:"VALIDATED",Running:"RUNNING",FailedValidation:"FAILED_VALIDATION",Failed:"FAILED",Success:"SUCCESS",Cancelled:"CANCELLED",CancellationRequested:"CANCELLATION_REQUESTED"};ht.ObjectT={Job:"job"};ht.Status$inboundSchema=br.nativeEnum(ht.Status);ht.Status$outboundSchema=ht.Status$inboundSchema;var bDt;(function(t){t.inboundSchema=ht.Status$inboundSchema,t.outboundSchema=ht.Status$outboundSchema})(bDt||(ht.Status$=bDt={}));ht.ObjectT$inboundSchema=br.nativeEnum(ht.ObjectT);ht.ObjectT$outboundSchema=ht.ObjectT$inboundSchema;var _Dt;(function(t){t.inboundSchema=ht.ObjectT$inboundSchema,t.outboundSchema=ht.ObjectT$outboundSchema})(_Dt||(ht.ObjectT$=_Dt={}));ht.Integrations$inboundSchema=Fae.WandbIntegrationOut$inboundSchema;ht.Integrations$outboundSchema=Fae.WandbIntegrationOut$outboundSchema;var vDt;(function(t){t.inboundSchema=ht.Integrations$inboundSchema,t.outboundSchema=ht.Integrations$outboundSchema})(vDt||(ht.Integrations$=vDt={}));function ion(t){return JSON.stringify(ht.Integrations$outboundSchema.parse(t))}function aon(t){return(0,m1e.safeParse)(t,e=>ht.Integrations$inboundSchema.parse(JSON.parse(e)),"Failed to parse 'Integrations' from JSON")}ht.Repositories$inboundSchema=Lae.GithubRepositoryOut$inboundSchema;ht.Repositories$outboundSchema=Lae.GithubRepositoryOut$outboundSchema;var wDt;(function(t){t.inboundSchema=ht.Repositories$inboundSchema,t.outboundSchema=ht.Repositories$outboundSchema})(wDt||(ht.Repositories$=wDt={}));function son(t){return JSON.stringify(ht.Repositories$outboundSchema.parse(t))}function uon(t){return(0,m1e.safeParse)(t,e=>ht.Repositories$inboundSchema.parse(JSON.parse(e)),"Failed to parse 'Repositories' from JSON")}ht.JobOut$inboundSchema=br.object({id:br.string(),auto_start:br.boolean(),hyperparameters:ODt.TrainingParameters$inboundSchema,model:br.string(),status:ht.Status$inboundSchema,job_type:br.string(),created_at:br.number().int(),modified_at:br.number().int(),training_files:br.array(br.string()),validation_files:br.nullable(br.array(br.string())).optional(),object:br.literal("job").default("job"),fine_tuned_model:br.nullable(br.string()).optional(),suffix:br.nullable(br.string()).optional(),integrations:br.nullable(br.array(Fae.WandbIntegrationOut$inboundSchema)).optional(),trained_tokens:br.nullable(br.number().int()).optional(),repositories:br.array(Lae.GithubRepositoryOut$inboundSchema).optional(),metadata:br.nullable(CDt.JobMetadataOut$inboundSchema).optional()}).transform(t=>(0,xDt.remap)(t,{auto_start:"autoStart",job_type:"jobType",created_at:"createdAt",modified_at:"modifiedAt",training_files:"trainingFiles",validation_files:"validationFiles",fine_tuned_model:"fineTunedModel",trained_tokens:"trainedTokens"}));ht.JobOut$outboundSchema=br.object({id:br.string(),autoStart:br.boolean(),hyperparameters:ODt.TrainingParameters$outboundSchema,model:br.string(),status:ht.Status$outboundSchema,jobType:br.string(),createdAt:br.number().int(),modifiedAt:br.number().int(),trainingFiles:br.array(br.string()),validationFiles:br.nullable(br.array(br.string())).optional(),object:br.literal("job").default("job"),fineTunedModel:br.nullable(br.string()).optional(),suffix:br.nullable(br.string()).optional(),integrations:br.nullable(br.array(Fae.WandbIntegrationOut$outboundSchema)).optional(),trainedTokens:br.nullable(br.number().int()).optional(),repositories:br.array(Lae.GithubRepositoryOut$outboundSchema).optional(),metadata:br.nullable(CDt.JobMetadataOut$outboundSchema).optional()}).transform(t=>(0,xDt.remap)(t,{autoStart:"auto_start",jobType:"job_type",createdAt:"created_at",modifiedAt:"modified_at",trainingFiles:"training_files",validationFiles:"validation_files",fineTunedModel:"fine_tuned_model",trainedTokens:"trained_tokens"}));var SDt;(function(t){t.inboundSchema=ht.JobOut$inboundSchema,t.outboundSchema=ht.JobOut$outboundSchema})(SDt||(ht.JobOut$=SDt={}));function lon(t){return JSON.stringify(ht.JobOut$outboundSchema.parse(t))}function con(t){return(0,m1e.safeParse)(t,e=>ht.JobOut$inboundSchema.parse(JSON.parse(e)),"Failed to parse 'JobOut' from JSON")}});var ADt=v($o=>{"use strict";var don=$o&&$o.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),fon=$o&&$o.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),pon=$o&&$o.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&don(e,t,r);return fon(e,t),e};Object.defineProperty($o,"__esModule",{value:!0});$o.JobsOut$=$o.JobsOut$outboundSchema=$o.JobsOut$inboundSchema=$o.JobsOutObject$=$o.JobsOutObject$outboundSchema=$o.JobsOutObject$inboundSchema=$o.JobsOutObject=void 0;$o.jobsOutToJSON=hon;$o.jobsOutFromJSON=gon;var ZO=pon(Te()),mon=ve(),TDt=h1e();$o.JobsOutObject={List:"list"};$o.JobsOutObject$inboundSchema=ZO.nativeEnum($o.JobsOutObject);$o.JobsOutObject$outboundSchema=$o.JobsOutObject$inboundSchema;var PDt;(function(t){t.inboundSchema=$o.JobsOutObject$inboundSchema,t.outboundSchema=$o.JobsOutObject$outboundSchema})(PDt||($o.JobsOutObject$=PDt={}));$o.JobsOut$inboundSchema=ZO.object({data:ZO.array(TDt.JobOut$inboundSchema).optional(),object:ZO.literal("list").default("list"),total:ZO.number().int()});$o.JobsOut$outboundSchema=ZO.object({data:ZO.array(TDt.JobOut$outboundSchema).optional(),object:ZO.literal("list").default("list"),total:ZO.number().int()});var EDt;(function(t){t.inboundSchema=$o.JobsOut$inboundSchema,t.outboundSchema=$o.JobsOut$outboundSchema})(EDt||($o.JobsOut$=EDt={}));function hon(t){return JSON.stringify($o.JobsOut$outboundSchema.parse(t))}function gon(t){return(0,mon.safeParse)(t,e=>$o.JobsOut$inboundSchema.parse(JSON.parse(e)),"Failed to parse 'JobsOut' from JSON")}});var jDt=v(Bo=>{"use strict";var yon=Bo&&Bo.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),bon=Bo&&Bo.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),_on=Bo&&Bo.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&yon(e,t,r);return bon(e,t),e};Object.defineProperty(Bo,"__esModule",{value:!0});Bo.LegacyJobMetadataOut$=Bo.LegacyJobMetadataOut$outboundSchema=Bo.LegacyJobMetadataOut$inboundSchema=Bo.LegacyJobMetadataOutObject$=Bo.LegacyJobMetadataOutObject$outboundSchema=Bo.LegacyJobMetadataOutObject$inboundSchema=Bo.LegacyJobMetadataOutObject=void 0;Bo.legacyJobMetadataOutToJSON=won;Bo.legacyJobMetadataOutFromJSON=Son;var jr=_on(Te()),RDt=qe(),von=ve();Bo.LegacyJobMetadataOutObject={JobMetadata:"job.metadata"};Bo.LegacyJobMetadataOutObject$inboundSchema=jr.nativeEnum(Bo.LegacyJobMetadataOutObject);Bo.LegacyJobMetadataOutObject$outboundSchema=Bo.LegacyJobMetadataOutObject$inboundSchema;var IDt;(function(t){t.inboundSchema=Bo.LegacyJobMetadataOutObject$inboundSchema,t.outboundSchema=Bo.LegacyJobMetadataOutObject$outboundSchema})(IDt||(Bo.LegacyJobMetadataOutObject$=IDt={}));Bo.LegacyJobMetadataOut$inboundSchema=jr.object({expected_duration_seconds:jr.nullable(jr.number().int()).optional(),cost:jr.nullable(jr.number()).optional(),cost_currency:jr.nullable(jr.string()).optional(),train_tokens_per_step:jr.nullable(jr.number().int()).optional(),train_tokens:jr.nullable(jr.number().int()).optional(),data_tokens:jr.nullable(jr.number().int()).optional(),estimated_start_time:jr.nullable(jr.number().int()).optional(),deprecated:jr.boolean().default(!0),details:jr.string(),epochs:jr.nullable(jr.number()).optional(),training_steps:jr.nullable(jr.number().int()).optional(),object:jr.literal("job.metadata").default("job.metadata")}).transform(t=>(0,RDt.remap)(t,{expected_duration_seconds:"expectedDurationSeconds",cost_currency:"costCurrency",train_tokens_per_step:"trainTokensPerStep",train_tokens:"trainTokens",data_tokens:"dataTokens",estimated_start_time:"estimatedStartTime",training_steps:"trainingSteps"}));Bo.LegacyJobMetadataOut$outboundSchema=jr.object({expectedDurationSeconds:jr.nullable(jr.number().int()).optional(),cost:jr.nullable(jr.number()).optional(),costCurrency:jr.nullable(jr.string()).optional(),trainTokensPerStep:jr.nullable(jr.number().int()).optional(),trainTokens:jr.nullable(jr.number().int()).optional(),dataTokens:jr.nullable(jr.number().int()).optional(),estimatedStartTime:jr.nullable(jr.number().int()).optional(),deprecated:jr.boolean().default(!0),details:jr.string(),epochs:jr.nullable(jr.number()).optional(),trainingSteps:jr.nullable(jr.number().int()).optional(),object:jr.literal("job.metadata").default("job.metadata")}).transform(t=>(0,RDt.remap)(t,{expectedDurationSeconds:"expected_duration_seconds",costCurrency:"cost_currency",trainTokensPerStep:"train_tokens_per_step",trainTokens:"train_tokens",dataTokens:"data_tokens",estimatedStartTime:"estimated_start_time",trainingSteps:"training_steps"}));var MDt;(function(t){t.inboundSchema=Bo.LegacyJobMetadataOut$inboundSchema,t.outboundSchema=Bo.LegacyJobMetadataOut$outboundSchema})(MDt||(Bo.LegacyJobMetadataOut$=MDt={}));function won(t){return JSON.stringify(Bo.LegacyJobMetadataOut$outboundSchema.parse(t))}function Son(t){return(0,von.safeParse)(t,e=>Bo.LegacyJobMetadataOut$inboundSchema.parse(JSON.parse(e)),"Failed to parse 'LegacyJobMetadataOut' from JSON")}});var LDt=v(Nu=>{"use strict";var xon=Nu&&Nu.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Con=Nu&&Nu.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Oon=Nu&&Nu.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&xon(e,t,r);return Con(e,t),e};Object.defineProperty(Nu,"__esModule",{value:!0});Nu.ListFilesOut$=Nu.ListFilesOut$outboundSchema=Nu.ListFilesOut$inboundSchema=void 0;Nu.listFilesOutToJSON=Eon;Nu.listFilesOutFromJSON=Ton;var yI=Oon(Te()),Pon=ve(),DDt=a1e();Nu.ListFilesOut$inboundSchema=yI.object({data:yI.array(DDt.FileSchema$inboundSchema),object:yI.string(),total:yI.number().int()});Nu.ListFilesOut$outboundSchema=yI.object({data:yI.array(DDt.FileSchema$outboundSchema),object:yI.string(),total:yI.number().int()});var NDt;(function(t){t.inboundSchema=Nu.ListFilesOut$inboundSchema,t.outboundSchema=Nu.ListFilesOut$outboundSchema})(NDt||(Nu.ListFilesOut$=NDt={}));function Eon(t){return JSON.stringify(Nu.ListFilesOut$outboundSchema.parse(t))}function Ton(t){return(0,Pon.safeParse)(t,e=>Nu.ListFilesOut$inboundSchema.parse(JSON.parse(e)),"Failed to parse 'ListFilesOut' from JSON")}});var BDt=v(qo=>{"use strict";var Aon=qo&&qo.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Ion=qo&&qo.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Mon=qo&&qo.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&Aon(e,t,r);return Ion(e,t),e};Object.defineProperty(qo,"__esModule",{value:!0});qo.ModelList$=qo.ModelList$outboundSchema=qo.ModelList$inboundSchema=qo.Data$=qo.Data$outboundSchema=qo.Data$inboundSchema=void 0;qo.dataToJSON=Ron;qo.dataFromJSON=jon;qo.modelListToJSON=Non;qo.modelListFromJSON=Don;var zi=Mon(Te()),$Dt=ve(),kae=KRe(),$ae=u1e();qo.Data$inboundSchema=zi.union([kae.BaseModelCard$inboundSchema.and(zi.object({type:zi.literal("base")}).transform(t=>({type:t.type}))),$ae.FTModelCard$inboundSchema.and(zi.object({type:zi.literal("fine-tuned")}).transform(t=>({type:t.type})))]);qo.Data$outboundSchema=zi.union([kae.BaseModelCard$outboundSchema.and(zi.object({type:zi.literal("base")}).transform(t=>({type:t.type}))),$ae.FTModelCard$outboundSchema.and(zi.object({type:zi.literal("fine-tuned")}).transform(t=>({type:t.type})))]);var FDt;(function(t){t.inboundSchema=qo.Data$inboundSchema,t.outboundSchema=qo.Data$outboundSchema})(FDt||(qo.Data$=FDt={}));function Ron(t){return JSON.stringify(qo.Data$outboundSchema.parse(t))}function jon(t){return(0,$Dt.safeParse)(t,e=>qo.Data$inboundSchema.parse(JSON.parse(e)),"Failed to parse 'Data' from JSON")}qo.ModelList$inboundSchema=zi.object({object:zi.string().default("list"),data:zi.array(zi.union([kae.BaseModelCard$inboundSchema.and(zi.object({type:zi.literal("base")}).transform(t=>({type:t.type}))),$ae.FTModelCard$inboundSchema.and(zi.object({type:zi.literal("fine-tuned")}).transform(t=>({type:t.type})))])).optional()});qo.ModelList$outboundSchema=zi.object({object:zi.string().default("list"),data:zi.array(zi.union([kae.BaseModelCard$outboundSchema.and(zi.object({type:zi.literal("base")}).transform(t=>({type:t.type}))),$ae.FTModelCard$outboundSchema.and(zi.object({type:zi.literal("fine-tuned")}).transform(t=>({type:t.type})))])).optional()});var kDt;(function(t){t.inboundSchema=qo.ModelList$inboundSchema,t.outboundSchema=qo.ModelList$outboundSchema})(kDt||(qo.ModelList$=kDt={}));function Non(t){return JSON.stringify(qo.ModelList$outboundSchema.parse(t))}function Don(t){return(0,$Dt.safeParse)(t,e=>qo.ModelList$inboundSchema.parse(JSON.parse(e)),"Failed to parse 'ModelList' from JSON")}});var WDt=v(Du=>{"use strict";var Lon=Du&&Du.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Fon=Du&&Du.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),kon=Du&&Du.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&Lon(e,t,r);return Fon(e,t),e};Object.defineProperty(Du,"__esModule",{value:!0});Du.RetrieveFileOut$=Du.RetrieveFileOut$outboundSchema=Du.RetrieveFileOut$inboundSchema=void 0;Du.retrieveFileOutToJSON=Bon;Du.retrieveFileOutFromJSON=qon;var nc=kon(Te()),UDt=qe(),$on=ve(),zDt=Q6(),HDt=e5(),VDt=t5();Du.RetrieveFileOut$inboundSchema=nc.object({id:nc.string(),object:nc.string(),bytes:nc.number().int(),created_at:nc.number().int(),filename:nc.string(),purpose:zDt.FilePurpose$inboundSchema,sample_type:HDt.SampleType$inboundSchema,num_lines:nc.nullable(nc.number().int()).optional(),source:VDt.Source$inboundSchema,deleted:nc.boolean()}).transform(t=>(0,UDt.remap)(t,{bytes:"sizeBytes",created_at:"createdAt",sample_type:"sampleType",num_lines:"numLines"}));Du.RetrieveFileOut$outboundSchema=nc.object({id:nc.string(),object:nc.string(),sizeBytes:nc.number().int(),createdAt:nc.number().int(),filename:nc.string(),purpose:zDt.FilePurpose$outboundSchema,sampleType:HDt.SampleType$outboundSchema,numLines:nc.nullable(nc.number().int()).optional(),source:VDt.Source$outboundSchema,deleted:nc.boolean()}).transform(t=>(0,UDt.remap)(t,{sizeBytes:"bytes",createdAt:"created_at",sampleType:"sample_type",numLines:"num_lines"}));var qDt;(function(t){t.inboundSchema=Du.RetrieveFileOut$inboundSchema,t.outboundSchema=Du.RetrieveFileOut$outboundSchema})(qDt||(Du.RetrieveFileOut$=qDt={}));function Bon(t){return JSON.stringify(Du.RetrieveFileOut$outboundSchema.parse(t))}function qon(t){return(0,$on.safeParse)(t,e=>Du.RetrieveFileOut$inboundSchema.parse(JSON.parse(e)),"Failed to parse 'RetrieveFileOut' from JSON")}});var JDt=v(Lu=>{"use strict";var Uon=Lu&&Lu.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),zon=Lu&&Lu.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Hon=Lu&&Lu.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&Uon(e,t,r);return zon(e,t),e};Object.defineProperty(Lu,"__esModule",{value:!0});Lu.Security$=Lu.Security$outboundSchema=Lu.Security$inboundSchema=void 0;Lu.securityToJSON=Won;Lu.securityFromJSON=Kon;var Bae=Hon(Te()),GDt=qe(),Von=ve();Lu.Security$inboundSchema=Bae.object({ApiKey:Bae.string().optional()}).transform(t=>(0,GDt.remap)(t,{ApiKey:"apiKey"}));Lu.Security$outboundSchema=Bae.object({apiKey:Bae.string().optional()}).transform(t=>(0,GDt.remap)(t,{apiKey:"ApiKey"}));var KDt;(function(t){t.inboundSchema=Lu.Security$inboundSchema,t.outboundSchema=Lu.Security$outboundSchema})(KDt||(Lu.Security$=KDt={}));function Won(t){return JSON.stringify(Lu.Security$outboundSchema.parse(t))}function Kon(t){return(0,Von.safeParse)(t,e=>Lu.Security$inboundSchema.parse(JSON.parse(e)),"Failed to parse 'Security' from JSON")}});var XDt=v(Uo=>{"use strict";var Gon=Uo&&Uo.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Jon=Uo&&Uo.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Yon=Uo&&Uo.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&Gon(e,t,r);return Jon(e,t),e};Object.defineProperty(Uo,"__esModule",{value:!0});Uo.UnarchiveFTModelOut$=Uo.UnarchiveFTModelOut$outboundSchema=Uo.UnarchiveFTModelOut$inboundSchema=Uo.UnarchiveFTModelOutObject$=Uo.UnarchiveFTModelOutObject$outboundSchema=Uo.UnarchiveFTModelOutObject$inboundSchema=Uo.UnarchiveFTModelOutObject=void 0;Uo.unarchiveFTModelOutToJSON=Xon;Uo.unarchiveFTModelOutFromJSON=Qon;var XO=Yon(Te()),Zon=ve();Uo.UnarchiveFTModelOutObject={Model:"model"};Uo.UnarchiveFTModelOutObject$inboundSchema=XO.nativeEnum(Uo.UnarchiveFTModelOutObject);Uo.UnarchiveFTModelOutObject$outboundSchema=Uo.UnarchiveFTModelOutObject$inboundSchema;var YDt;(function(t){t.inboundSchema=Uo.UnarchiveFTModelOutObject$inboundSchema,t.outboundSchema=Uo.UnarchiveFTModelOutObject$outboundSchema})(YDt||(Uo.UnarchiveFTModelOutObject$=YDt={}));Uo.UnarchiveFTModelOut$inboundSchema=XO.object({id:XO.string(),object:XO.literal("model").default("model"),archived:XO.boolean().default(!1)});Uo.UnarchiveFTModelOut$outboundSchema=XO.object({id:XO.string(),object:XO.literal("model").default("model"),archived:XO.boolean().default(!1)});var ZDt;(function(t){t.inboundSchema=Uo.UnarchiveFTModelOut$inboundSchema,t.outboundSchema=Uo.UnarchiveFTModelOut$outboundSchema})(ZDt||(Uo.UnarchiveFTModelOut$=ZDt={}));function Xon(t){return JSON.stringify(Uo.UnarchiveFTModelOut$outboundSchema.parse(t))}function Qon(t){return(0,Zon.safeParse)(t,e=>Uo.UnarchiveFTModelOut$inboundSchema.parse(JSON.parse(e)),"Failed to parse 'UnarchiveFTModelOut' from JSON")}});var eLt=v(Fu=>{"use strict";var ein=Fu&&Fu.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),tin=Fu&&Fu.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),rin=Fu&&Fu.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&ein(e,t,r);return tin(e,t),e};Object.defineProperty(Fu,"__esModule",{value:!0});Fu.UpdateFTModelIn$=Fu.UpdateFTModelIn$outboundSchema=Fu.UpdateFTModelIn$inboundSchema=void 0;Fu.updateFTModelInToJSON=oin;Fu.updateFTModelInFromJSON=iin;var xx=rin(Te()),nin=ve();Fu.UpdateFTModelIn$inboundSchema=xx.object({name:xx.nullable(xx.string()).optional(),description:xx.nullable(xx.string()).optional()});Fu.UpdateFTModelIn$outboundSchema=xx.object({name:xx.nullable(xx.string()).optional(),description:xx.nullable(xx.string()).optional()});var QDt;(function(t){t.inboundSchema=Fu.UpdateFTModelIn$inboundSchema,t.outboundSchema=Fu.UpdateFTModelIn$outboundSchema})(QDt||(Fu.UpdateFTModelIn$=QDt={}));function oin(t){return JSON.stringify(Fu.UpdateFTModelIn$outboundSchema.parse(t))}function iin(t){return(0,nin.safeParse)(t,e=>Fu.UpdateFTModelIn$inboundSchema.parse(JSON.parse(e)),"Failed to parse 'UpdateFTModelIn' from JSON")}});var aLt=v(ku=>{"use strict";var ain=ku&&ku.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),sin=ku&&ku.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),uin=ku&&ku.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&ain(e,t,r);return sin(e,t),e};Object.defineProperty(ku,"__esModule",{value:!0});ku.UploadFileOut$=ku.UploadFileOut$outboundSchema=ku.UploadFileOut$inboundSchema=void 0;ku.uploadFileOutToJSON=cin;ku.uploadFileOutFromJSON=din;var Jd=uin(Te()),rLt=qe(),lin=ve(),nLt=Q6(),oLt=e5(),iLt=t5();ku.UploadFileOut$inboundSchema=Jd.object({id:Jd.string(),object:Jd.string(),bytes:Jd.number().int(),created_at:Jd.number().int(),filename:Jd.string(),purpose:nLt.FilePurpose$inboundSchema,sample_type:oLt.SampleType$inboundSchema,num_lines:Jd.nullable(Jd.number().int()).optional(),source:iLt.Source$inboundSchema}).transform(t=>(0,rLt.remap)(t,{bytes:"sizeBytes",created_at:"createdAt",sample_type:"sampleType",num_lines:"numLines"}));ku.UploadFileOut$outboundSchema=Jd.object({id:Jd.string(),object:Jd.string(),sizeBytes:Jd.number().int(),createdAt:Jd.number().int(),filename:Jd.string(),purpose:nLt.FilePurpose$outboundSchema,sampleType:oLt.SampleType$outboundSchema,numLines:Jd.nullable(Jd.number().int()).optional(),source:iLt.Source$outboundSchema}).transform(t=>(0,rLt.remap)(t,{sizeBytes:"bytes",createdAt:"created_at",sampleType:"sample_type",numLines:"num_lines"}));var tLt;(function(t){t.inboundSchema=ku.UploadFileOut$inboundSchema,t.outboundSchema=ku.UploadFileOut$outboundSchema})(tLt||(ku.UploadFileOut$=tLt={}));function cin(t){return JSON.stringify(ku.UploadFileOut$outboundSchema.parse(t))}function din(t){return(0,lin.safeParse)(t,e=>ku.UploadFileOut$inboundSchema.parse(JSON.parse(e)),"Failed to parse 'UploadFileOut' from JSON")}});var cLt=v(zo=>{"use strict";var fin=zo&&zo.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),pin=zo&&zo.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),min=zo&&zo.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&fin(e,t,r);return pin(e,t),e};Object.defineProperty(zo,"__esModule",{value:!0});zo.ValidationError$=zo.ValidationError$outboundSchema=zo.ValidationError$inboundSchema=zo.Loc$=zo.Loc$outboundSchema=zo.Loc$inboundSchema=void 0;zo.locToJSON=hin;zo.locFromJSON=gin;zo.validationErrorToJSON=yin;zo.validationErrorFromJSON=bin;var $u=min(Te()),lLt=ve();zo.Loc$inboundSchema=$u.union([$u.string(),$u.number().int()]);zo.Loc$outboundSchema=$u.union([$u.string(),$u.number().int()]);var sLt;(function(t){t.inboundSchema=zo.Loc$inboundSchema,t.outboundSchema=zo.Loc$outboundSchema})(sLt||(zo.Loc$=sLt={}));function hin(t){return JSON.stringify(zo.Loc$outboundSchema.parse(t))}function gin(t){return(0,lLt.safeParse)(t,e=>zo.Loc$inboundSchema.parse(JSON.parse(e)),"Failed to parse 'Loc' from JSON")}zo.ValidationError$inboundSchema=$u.object({loc:$u.array($u.union([$u.string(),$u.number().int()])),msg:$u.string(),type:$u.string()});zo.ValidationError$outboundSchema=$u.object({loc:$u.array($u.union([$u.string(),$u.number().int()])),msg:$u.string(),type:$u.string()});var uLt;(function(t){t.inboundSchema=zo.ValidationError$inboundSchema,t.outboundSchema=zo.ValidationError$outboundSchema})(uLt||(zo.ValidationError$=uLt={}));function yin(t){return JSON.stringify(zo.ValidationError$outboundSchema.parse(t))}function bin(t){return(0,lLt.safeParse)(t,e=>zo.ValidationError$inboundSchema.parse(JSON.parse(e)),"Failed to parse 'ValidationError' from JSON")}});var Rn=v(He=>{"use strict";var _in=He&&He.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Ze=He&&He.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&_in(e,t,r)};Object.defineProperty(He,"__esModule",{value:!0});Ze(KRt(),He);Ze(r1t(),He);Ze(WRe(),He);Ze(a1t(),He);Ze(fI(),He);Ze(KRe(),He);Ze(GRe(),He);Ze(y1t(),He);Ze(YRe(),He);Ze(E1t(),He);Ze(JRe(),He);Ze(j1t(),He);Ze(dae(),He);Ze(W1t(),He);Ze(X1t(),He);Ze(sjt(),He);Ze(XRe(),He);Ze(QRe(),He);Ze(_jt(),He);Ze(Sjt(),He);Ze(r1e(),He);Ze(Fjt(),He);Ze(t1e(),He);Ze($q(),He);Ze($jt(),He);Ze(qjt(),He);Ze(e1e(),He);Ze(cNt(),He);Ze(hNt(),He);Ze(vNt(),He);Ze(i1e(),He);Ze(n1e(),He);Ze(Q6(),He);Ze(a1e(),He);Ze(INt(),He);Ze(DNt(),He);Ze($Nt(),He);Ze(HNt(),He);Ze(s1e(),He);Ze(u1e(),He);Ze(tDt(),He);Ze(HRe(),He);Ze(BRe(),He);Ze(VRe(),He);Ze(l1e(),He);Ze(Eae(),He);Ze(FRe(),He);Ze(kRe(),He);Ze(yDt(),He);Ze(Tae(),He);Ze(h1e(),He);Ze(ADt(),He);Ze(URe(),He);Ze(jDt(),He);Ze(LDt(),He);Ze(ZRe(),He);Ze(lae(),He);Ze(BDt(),He);Ze(qq(),He);Ze($Re(),He);Ze(Uq(),He);Ze(zRe(),He);Ze(WDt(),He);Ze(e5(),He);Ze(JDt(),He);Ze(t5(),He);Ze(jN(),He);Ze(qie(),He);Ze(zq(),He);Ze(Uie(),He);Ze(Hq(),He);Ze(Vq(),He);Ze(NN(),He);Ze(Z6(),He);Ze(c1e(),He);Ze(Aae(),He);Ze(d1e(),He);Ze(XDt(),He);Ze(eLt(),He);Ze(aLt(),He);Ze(Kq(),He);Ze(DN(),He);Ze(cLt(),He);Ze(f1e(),He);Ze(Iae(),He)});var mLt=v(oc=>{"use strict";var vin=oc&&oc.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),win=oc&&oc.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),fLt=oc&&oc.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&vin(e,t,r);return win(e,t),e};Object.defineProperty(oc,"__esModule",{value:!0});oc.HTTPValidationError$=oc.HTTPValidationError$outboundSchema=oc.HTTPValidationError$inboundSchema=oc.HTTPValidationError=void 0;var r5=fLt(Te()),pLt=fLt(Rn()),n5=class extends Error{constructor(e){let r="message"in e&&typeof e.message=="string"?e.message:`API error occurred: ${JSON.stringify(e)}`;super(r),this.data$=e,e.detail!=null&&(this.detail=e.detail),this.name="HTTPValidationError"}};oc.HTTPValidationError=n5;oc.HTTPValidationError$inboundSchema=r5.object({detail:r5.array(pLt.ValidationError$inboundSchema).optional()}).transform(t=>new n5(t));oc.HTTPValidationError$outboundSchema=r5.instanceof(n5).transform(t=>t.data$).pipe(r5.object({detail:r5.array(pLt.ValidationError$outboundSchema).optional()}));var dLt;(function(t){t.inboundSchema=oc.HTTPValidationError$inboundSchema,t.outboundSchema=oc.HTTPValidationError$outboundSchema})(dLt||(oc.HTTPValidationError$=dLt={}))});var Km=v(Cx=>{"use strict";var Sin=Cx&&Cx.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),qae=Cx&&Cx.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Sin(e,t,r)};Object.defineProperty(Cx,"__esModule",{value:!0});qae(uRe(),Cx);qae(mLt(),Cx);qae(IRe(),Cx);qae(DRe(),Cx)});var yLt=v(QO=>{"use strict";var xin=QO&&QO.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Cin=QO&&QO.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),g1e=QO&&QO.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&xin(e,t,r);return Cin(e,t),e};Object.defineProperty(QO,"__esModule",{value:!0});QO.agentsComplete=Iin;var Oin=Xo(),o5=g1e(Qo()),Pin=qe(),Ein=ve(),hLt=ei(),Tin=wo(),gLt=g1e(Rn()),Ain=g1e(Km());async function Iin(t,e,r){let n=(0,Ein.safeParse)(e,y=>gLt.AgentsCompletionRequest$outboundSchema.parse(y),"Input validation failed");if(!n.ok)return n;let o=n.value,i=(0,Oin.encodeJSON)("body",o,{explode:!0}),a=(0,Tin.pathToFunc)("/v1/agents/completions")(),s=new Headers((0,Pin.compactMap)({"Content-Type":"application/json",Accept:"application/json"})),u=await(0,hLt.extractSecurity)(t._options.apiKey),l=u==null?{}:{apiKey:u},c=(0,hLt.resolveGlobalSecurity)(l),d={operationID:"agents_completion_v1_agents_completions_post",oAuth2Scopes:[],resolvedSecurity:c,securitySource:t._options.apiKey,retryConfig:r?.retries||t._options.retryConfig||{strategy:"none"},retryCodes:r?.retryCodes||["429","500","502","503","504"]},f=t._createRequest(d,{security:c,method:"POST",baseURL:r?.serverURL,path:a,headers:s,body:i,timeoutMs:r?.timeoutMs||t._options.timeoutMs||-1},r);if(!f.ok)return f;let p=f.value,m=await t._do(p,{context:d,errorCodes:["422","4XX","5XX"],retryConfig:d.retryConfig,retryCodes:d.retryCodes});if(!m.ok)return m;let h=m.value,b={HttpMeta:{Response:h,Request:p}},[g]=await o5.match(o5.json(200,gLt.ChatCompletionResponse$inboundSchema),o5.jsonErr(422,Ain.HTTPValidationError$inboundSchema),o5.fail("4XX"),o5.fail("5XX"))(h,{extraFields:b});return g.ok,g}});var vLt=v(eP=>{"use strict";var Min=eP&&eP.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Rin=eP&&eP.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Uae=eP&&eP.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&Min(e,t,r);return Rin(e,t),e};Object.defineProperty(eP,"__esModule",{value:!0});eP.agentsStream=Bin;var jin=Uae(Te()),Nin=Xo(),Din=G6(),i5=Uae(Qo()),Lin=qe(),Fin=ve(),bLt=ei(),kin=wo(),_Lt=Uae(Rn()),$in=Uae(Km());async function Bin(t,e,r){let n=(0,Fin.safeParse)(e,y=>_Lt.AgentsCompletionStreamRequest$outboundSchema.parse(y),"Input validation failed");if(!n.ok)return n;let o=n.value,i=(0,Nin.encodeJSON)("body",o,{explode:!0}),a=(0,kin.pathToFunc)("/v1/agents/completions#stream")(),s=new Headers((0,Lin.compactMap)({"Content-Type":"application/json",Accept:"text/event-stream"})),u=await(0,bLt.extractSecurity)(t._options.apiKey),l=u==null?{}:{apiKey:u},c=(0,bLt.resolveGlobalSecurity)(l),d={operationID:"stream_agents",oAuth2Scopes:[],resolvedSecurity:c,securitySource:t._options.apiKey,retryConfig:r?.retries||t._options.retryConfig||{strategy:"none"},retryCodes:r?.retryCodes||["429","500","502","503","504"]},f=t._createRequest(d,{security:c,method:"POST",baseURL:r?.serverURL,path:a,headers:s,body:i,timeoutMs:r?.timeoutMs||t._options.timeoutMs||-1},r);if(!f.ok)return f;let p=f.value,m=await t._do(p,{context:d,errorCodes:["422","4XX","5XX"],retryConfig:d.retryConfig,retryCodes:d.retryCodes});if(!m.ok)return m;let h=m.value,b={HttpMeta:{Response:h,Request:p}},[g]=await i5.match(i5.sse(200,jin.instanceof(ReadableStream).transform(y=>new Din.EventStream({stream:y,decoder(w){return _Lt.CompletionEvent$inboundSchema.parse(w)}})),{sseSentinel:"[DONE]"}),i5.jsonErr(422,$in.HTTPValidationError$inboundSchema),i5.fail("4XX"),i5.fail("5XX"))(h,{extraFields:b});return g.ok,g}});var SLt=v(zae=>{"use strict";Object.defineProperty(zae,"__esModule",{value:!0});zae.Agents=void 0;var qin=yLt(),Uin=vLt(),zin=Vm(),wLt=cg(),y1e=class extends zin.ClientSDK{async complete(e,r){return(0,wLt.unwrapAsync)((0,qin.agentsComplete)(this,e,r))}async stream(e,r){return(0,wLt.unwrapAsync)((0,Uin.agentsStream)(this,e,r))}};zae.Agents=y1e});var OLt=v(Bu=>{"use strict";var Hin=Bu&&Bu.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Vin=Bu&&Bu.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Win=Bu&&Bu.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&Hin(e,t,r);return Vin(e,t),e};Object.defineProperty(Bu,"__esModule",{value:!0});Bu.DeleteModelV1ModelsModelIdDeleteRequest$=Bu.DeleteModelV1ModelsModelIdDeleteRequest$outboundSchema=Bu.DeleteModelV1ModelsModelIdDeleteRequest$inboundSchema=void 0;Bu.deleteModelV1ModelsModelIdDeleteRequestToJSON=Gin;Bu.deleteModelV1ModelsModelIdDeleteRequestFromJSON=Jin;var Hae=Win(Te()),CLt=qe(),Kin=ve();Bu.DeleteModelV1ModelsModelIdDeleteRequest$inboundSchema=Hae.object({model_id:Hae.string()}).transform(t=>(0,CLt.remap)(t,{model_id:"modelId"}));Bu.DeleteModelV1ModelsModelIdDeleteRequest$outboundSchema=Hae.object({modelId:Hae.string()}).transform(t=>(0,CLt.remap)(t,{modelId:"model_id"}));var xLt;(function(t){t.inboundSchema=Bu.DeleteModelV1ModelsModelIdDeleteRequest$inboundSchema,t.outboundSchema=Bu.DeleteModelV1ModelsModelIdDeleteRequest$outboundSchema})(xLt||(Bu.DeleteModelV1ModelsModelIdDeleteRequest$=xLt={}));function Gin(t){return JSON.stringify(Bu.DeleteModelV1ModelsModelIdDeleteRequest$outboundSchema.parse(t))}function Jin(t){return(0,Kin.safeParse)(t,e=>Bu.DeleteModelV1ModelsModelIdDeleteRequest$inboundSchema.parse(JSON.parse(e)),"Failed to parse 'DeleteModelV1ModelsModelIdDeleteRequest' from JSON")}});var TLt=v(qu=>{"use strict";var Yin=qu&&qu.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Zin=qu&&qu.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Xin=qu&&qu.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&Yin(e,t,r);return Zin(e,t),e};Object.defineProperty(qu,"__esModule",{value:!0});qu.FilesApiRoutesDeleteFileRequest$=qu.FilesApiRoutesDeleteFileRequest$outboundSchema=qu.FilesApiRoutesDeleteFileRequest$inboundSchema=void 0;qu.filesApiRoutesDeleteFileRequestToJSON=ean;qu.filesApiRoutesDeleteFileRequestFromJSON=tan;var Vae=Xin(Te()),ELt=qe(),Qin=ve();qu.FilesApiRoutesDeleteFileRequest$inboundSchema=Vae.object({file_id:Vae.string()}).transform(t=>(0,ELt.remap)(t,{file_id:"fileId"}));qu.FilesApiRoutesDeleteFileRequest$outboundSchema=Vae.object({fileId:Vae.string()}).transform(t=>(0,ELt.remap)(t,{fileId:"file_id"}));var PLt;(function(t){t.inboundSchema=qu.FilesApiRoutesDeleteFileRequest$inboundSchema,t.outboundSchema=qu.FilesApiRoutesDeleteFileRequest$outboundSchema})(PLt||(qu.FilesApiRoutesDeleteFileRequest$=PLt={}));function ean(t){return JSON.stringify(qu.FilesApiRoutesDeleteFileRequest$outboundSchema.parse(t))}function tan(t){return(0,Qin.safeParse)(t,e=>qu.FilesApiRoutesDeleteFileRequest$inboundSchema.parse(JSON.parse(e)),"Failed to parse 'FilesApiRoutesDeleteFileRequest' from JSON")}});var MLt=v(Uu=>{"use strict";var ran=Uu&&Uu.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),nan=Uu&&Uu.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),oan=Uu&&Uu.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&ran(e,t,r);return nan(e,t),e};Object.defineProperty(Uu,"__esModule",{value:!0});Uu.FilesApiRoutesDownloadFileRequest$=Uu.FilesApiRoutesDownloadFileRequest$outboundSchema=Uu.FilesApiRoutesDownloadFileRequest$inboundSchema=void 0;Uu.filesApiRoutesDownloadFileRequestToJSON=aan;Uu.filesApiRoutesDownloadFileRequestFromJSON=san;var Wae=oan(Te()),ILt=qe(),ian=ve();Uu.FilesApiRoutesDownloadFileRequest$inboundSchema=Wae.object({file_id:Wae.string()}).transform(t=>(0,ILt.remap)(t,{file_id:"fileId"}));Uu.FilesApiRoutesDownloadFileRequest$outboundSchema=Wae.object({fileId:Wae.string()}).transform(t=>(0,ILt.remap)(t,{fileId:"file_id"}));var ALt;(function(t){t.inboundSchema=Uu.FilesApiRoutesDownloadFileRequest$inboundSchema,t.outboundSchema=Uu.FilesApiRoutesDownloadFileRequest$outboundSchema})(ALt||(Uu.FilesApiRoutesDownloadFileRequest$=ALt={}));function aan(t){return JSON.stringify(Uu.FilesApiRoutesDownloadFileRequest$outboundSchema.parse(t))}function san(t){return(0,ian.safeParse)(t,e=>Uu.FilesApiRoutesDownloadFileRequest$inboundSchema.parse(JSON.parse(e)),"Failed to parse 'FilesApiRoutesDownloadFileRequest' from JSON")}});var NLt=v(zu=>{"use strict";var uan=zu&&zu.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),lan=zu&&zu.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),can=zu&&zu.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&uan(e,t,r);return lan(e,t),e};Object.defineProperty(zu,"__esModule",{value:!0});zu.FilesApiRoutesGetSignedUrlRequest$=zu.FilesApiRoutesGetSignedUrlRequest$outboundSchema=zu.FilesApiRoutesGetSignedUrlRequest$inboundSchema=void 0;zu.filesApiRoutesGetSignedUrlRequestToJSON=fan;zu.filesApiRoutesGetSignedUrlRequestFromJSON=pan;var Yq=can(Te()),jLt=qe(),dan=ve();zu.FilesApiRoutesGetSignedUrlRequest$inboundSchema=Yq.object({file_id:Yq.string(),expiry:Yq.number().int().default(24)}).transform(t=>(0,jLt.remap)(t,{file_id:"fileId"}));zu.FilesApiRoutesGetSignedUrlRequest$outboundSchema=Yq.object({fileId:Yq.string(),expiry:Yq.number().int().default(24)}).transform(t=>(0,jLt.remap)(t,{fileId:"file_id"}));var RLt;(function(t){t.inboundSchema=zu.FilesApiRoutesGetSignedUrlRequest$inboundSchema,t.outboundSchema=zu.FilesApiRoutesGetSignedUrlRequest$outboundSchema})(RLt||(zu.FilesApiRoutesGetSignedUrlRequest$=RLt={}));function fan(t){return JSON.stringify(zu.FilesApiRoutesGetSignedUrlRequest$outboundSchema.parse(t))}function pan(t){return(0,dan.safeParse)(t,e=>zu.FilesApiRoutesGetSignedUrlRequest$inboundSchema.parse(JSON.parse(e)),"Failed to parse 'FilesApiRoutesGetSignedUrlRequest' from JSON")}});var kLt=v(Vu=>{"use strict";var man=Vu&&Vu.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),han=Vu&&Vu.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),LLt=Vu&&Vu.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&man(e,t,r);return han(e,t),e};Object.defineProperty(Vu,"__esModule",{value:!0});Vu.FilesApiRoutesListFilesRequest$=Vu.FilesApiRoutesListFilesRequest$outboundSchema=Vu.FilesApiRoutesListFilesRequest$inboundSchema=void 0;Vu.filesApiRoutesListFilesRequestToJSON=yan;Vu.filesApiRoutesListFilesRequestFromJSON=ban;var Hu=LLt(Te()),FLt=qe(),gan=ve(),Zq=LLt(Rn());Vu.FilesApiRoutesListFilesRequest$inboundSchema=Hu.object({page:Hu.number().int().default(0),page_size:Hu.number().int().default(100),sample_type:Hu.nullable(Hu.array(Zq.SampleType$inboundSchema)).optional(),source:Hu.nullable(Hu.array(Zq.Source$inboundSchema)).optional(),search:Hu.nullable(Hu.string()).optional(),purpose:Hu.nullable(Zq.FilePurpose$inboundSchema).optional()}).transform(t=>(0,FLt.remap)(t,{page_size:"pageSize",sample_type:"sampleType"}));Vu.FilesApiRoutesListFilesRequest$outboundSchema=Hu.object({page:Hu.number().int().default(0),pageSize:Hu.number().int().default(100),sampleType:Hu.nullable(Hu.array(Zq.SampleType$outboundSchema)).optional(),source:Hu.nullable(Hu.array(Zq.Source$outboundSchema)).optional(),search:Hu.nullable(Hu.string()).optional(),purpose:Hu.nullable(Zq.FilePurpose$outboundSchema).optional()}).transform(t=>(0,FLt.remap)(t,{pageSize:"page_size",sampleType:"sample_type"}));var DLt;(function(t){t.inboundSchema=Vu.FilesApiRoutesListFilesRequest$inboundSchema,t.outboundSchema=Vu.FilesApiRoutesListFilesRequest$outboundSchema})(DLt||(Vu.FilesApiRoutesListFilesRequest$=DLt={}));function yan(t){return JSON.stringify(Vu.FilesApiRoutesListFilesRequest$outboundSchema.parse(t))}function ban(t){return(0,gan.safeParse)(t,e=>Vu.FilesApiRoutesListFilesRequest$inboundSchema.parse(JSON.parse(e)),"Failed to parse 'FilesApiRoutesListFilesRequest' from JSON")}});var qLt=v(Wu=>{"use strict";var _an=Wu&&Wu.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),van=Wu&&Wu.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),wan=Wu&&Wu.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&_an(e,t,r);return van(e,t),e};Object.defineProperty(Wu,"__esModule",{value:!0});Wu.FilesApiRoutesRetrieveFileRequest$=Wu.FilesApiRoutesRetrieveFileRequest$outboundSchema=Wu.FilesApiRoutesRetrieveFileRequest$inboundSchema=void 0;Wu.filesApiRoutesRetrieveFileRequestToJSON=xan;Wu.filesApiRoutesRetrieveFileRequestFromJSON=Can;var Kae=wan(Te()),BLt=qe(),San=ve();Wu.FilesApiRoutesRetrieveFileRequest$inboundSchema=Kae.object({file_id:Kae.string()}).transform(t=>(0,BLt.remap)(t,{file_id:"fileId"}));Wu.FilesApiRoutesRetrieveFileRequest$outboundSchema=Kae.object({fileId:Kae.string()}).transform(t=>(0,BLt.remap)(t,{fileId:"file_id"}));var $Lt;(function(t){t.inboundSchema=Wu.FilesApiRoutesRetrieveFileRequest$inboundSchema,t.outboundSchema=Wu.FilesApiRoutesRetrieveFileRequest$outboundSchema})($Lt||(Wu.FilesApiRoutesRetrieveFileRequest$=$Lt={}));function xan(t){return JSON.stringify(Wu.FilesApiRoutesRetrieveFileRequest$outboundSchema.parse(t))}function Can(t){return(0,San.safeParse)(t,e=>Wu.FilesApiRoutesRetrieveFileRequest$inboundSchema.parse(JSON.parse(e)),"Failed to parse 'FilesApiRoutesRetrieveFileRequest' from JSON")}});var b1e=v(Gy=>{"use strict";var Oan=Gy&&Gy.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Pan=Gy&&Gy.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Ean=Gy&&Gy.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&Oan(e,t,r);return Pan(e,t),e};Object.defineProperty(Gy,"__esModule",{value:!0});Gy.blobLikeSchema=void 0;Gy.isBlobLike=ULt;var Tan=Ean(Te());Gy.blobLikeSchema=Tan.custom(ULt,{message:"expected a Blob, File or Blob-like object",fatal:!0});function ULt(t){if(t instanceof Blob)return!0;if(typeof t!="object"||t==null||!(Symbol.toStringTag in t))return!1;let e=t[Symbol.toStringTag];return typeof e!="string"||e!=="Blob"&&e!=="File"?!1:"stream"in t&&typeof t.stream=="function"}});var GLt=v(io=>{"use strict";var Aan=io&&io.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Ian=io&&io.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),VLt=io&&io.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&Aan(e,t,r);return Ian(e,t),e};Object.defineProperty(io,"__esModule",{value:!0});io.FilesApiRoutesUploadFileMultiPartBodyParams$=io.FilesApiRoutesUploadFileMultiPartBodyParams$outboundSchema=io.FilesApiRoutesUploadFileMultiPartBodyParams$inboundSchema=io.FileT$=io.FileT$outboundSchema=io.FileT$inboundSchema=void 0;io.fileToJSON=Ran;io.fileFromJSON=jan;io.filesApiRoutesUploadFileMultiPartBodyParamsToJSON=Nan;io.filesApiRoutesUploadFileMultiPartBodyParamsFromJSON=Dan;var ic=VLt(Te()),WLt=ve(),Man=b1e(),KLt=VLt(Rn());io.FileT$inboundSchema=ic.object({fileName:ic.string(),content:ic.union([ic.instanceof(ReadableStream),ic.instanceof(Blob),ic.instanceof(ArrayBuffer),ic.instanceof(Uint8Array)])});io.FileT$outboundSchema=ic.object({fileName:ic.string(),content:ic.union([ic.instanceof(ReadableStream),ic.instanceof(Blob),ic.instanceof(ArrayBuffer),ic.instanceof(Uint8Array)])});var zLt;(function(t){t.inboundSchema=io.FileT$inboundSchema,t.outboundSchema=io.FileT$outboundSchema})(zLt||(io.FileT$=zLt={}));function Ran(t){return JSON.stringify(io.FileT$outboundSchema.parse(t))}function jan(t){return(0,WLt.safeParse)(t,e=>io.FileT$inboundSchema.parse(JSON.parse(e)),"Failed to parse 'FileT' from JSON")}io.FilesApiRoutesUploadFileMultiPartBodyParams$inboundSchema=ic.object({file:ic.lazy(()=>io.FileT$inboundSchema),purpose:KLt.FilePurpose$inboundSchema.optional()});io.FilesApiRoutesUploadFileMultiPartBodyParams$outboundSchema=ic.object({file:ic.lazy(()=>io.FileT$outboundSchema).or(Man.blobLikeSchema),purpose:KLt.FilePurpose$outboundSchema.optional()});var HLt;(function(t){t.inboundSchema=io.FilesApiRoutesUploadFileMultiPartBodyParams$inboundSchema,t.outboundSchema=io.FilesApiRoutesUploadFileMultiPartBodyParams$outboundSchema})(HLt||(io.FilesApiRoutesUploadFileMultiPartBodyParams$=HLt={}));function Nan(t){return JSON.stringify(io.FilesApiRoutesUploadFileMultiPartBodyParams$outboundSchema.parse(t))}function Dan(t){return(0,WLt.safeParse)(t,e=>io.FilesApiRoutesUploadFileMultiPartBodyParams$inboundSchema.parse(JSON.parse(e)),"Failed to parse 'FilesApiRoutesUploadFileMultiPartBodyParams' from JSON")}});var ZLt=v(Ku=>{"use strict";var Lan=Ku&&Ku.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Fan=Ku&&Ku.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),kan=Ku&&Ku.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&Lan(e,t,r);return Fan(e,t),e};Object.defineProperty(Ku,"__esModule",{value:!0});Ku.JobsApiRoutesBatchCancelBatchJobRequest$=Ku.JobsApiRoutesBatchCancelBatchJobRequest$outboundSchema=Ku.JobsApiRoutesBatchCancelBatchJobRequest$inboundSchema=void 0;Ku.jobsApiRoutesBatchCancelBatchJobRequestToJSON=Ban;Ku.jobsApiRoutesBatchCancelBatchJobRequestFromJSON=qan;var Gae=kan(Te()),YLt=qe(),$an=ve();Ku.JobsApiRoutesBatchCancelBatchJobRequest$inboundSchema=Gae.object({job_id:Gae.string()}).transform(t=>(0,YLt.remap)(t,{job_id:"jobId"}));Ku.JobsApiRoutesBatchCancelBatchJobRequest$outboundSchema=Gae.object({jobId:Gae.string()}).transform(t=>(0,YLt.remap)(t,{jobId:"job_id"}));var JLt;(function(t){t.inboundSchema=Ku.JobsApiRoutesBatchCancelBatchJobRequest$inboundSchema,t.outboundSchema=Ku.JobsApiRoutesBatchCancelBatchJobRequest$outboundSchema})(JLt||(Ku.JobsApiRoutesBatchCancelBatchJobRequest$=JLt={}));function Ban(t){return JSON.stringify(Ku.JobsApiRoutesBatchCancelBatchJobRequest$outboundSchema.parse(t))}function qan(t){return(0,$an.safeParse)(t,e=>Ku.JobsApiRoutesBatchCancelBatchJobRequest$inboundSchema.parse(JSON.parse(e)),"Failed to parse 'JobsApiRoutesBatchCancelBatchJobRequest' from JSON")}});var eFt=v(Gu=>{"use strict";var Uan=Gu&&Gu.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),zan=Gu&&Gu.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Han=Gu&&Gu.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&Uan(e,t,r);return zan(e,t),e};Object.defineProperty(Gu,"__esModule",{value:!0});Gu.JobsApiRoutesBatchGetBatchJobRequest$=Gu.JobsApiRoutesBatchGetBatchJobRequest$outboundSchema=Gu.JobsApiRoutesBatchGetBatchJobRequest$inboundSchema=void 0;Gu.jobsApiRoutesBatchGetBatchJobRequestToJSON=Wan;Gu.jobsApiRoutesBatchGetBatchJobRequestFromJSON=Kan;var Jae=Han(Te()),QLt=qe(),Van=ve();Gu.JobsApiRoutesBatchGetBatchJobRequest$inboundSchema=Jae.object({job_id:Jae.string()}).transform(t=>(0,QLt.remap)(t,{job_id:"jobId"}));Gu.JobsApiRoutesBatchGetBatchJobRequest$outboundSchema=Jae.object({jobId:Jae.string()}).transform(t=>(0,QLt.remap)(t,{jobId:"job_id"}));var XLt;(function(t){t.inboundSchema=Gu.JobsApiRoutesBatchGetBatchJobRequest$inboundSchema,t.outboundSchema=Gu.JobsApiRoutesBatchGetBatchJobRequest$outboundSchema})(XLt||(Gu.JobsApiRoutesBatchGetBatchJobRequest$=XLt={}));function Wan(t){return JSON.stringify(Gu.JobsApiRoutesBatchGetBatchJobRequest$outboundSchema.parse(t))}function Kan(t){return(0,Van.safeParse)(t,e=>Gu.JobsApiRoutesBatchGetBatchJobRequest$inboundSchema.parse(JSON.parse(e)),"Failed to parse 'JobsApiRoutesBatchGetBatchJobRequest' from JSON")}});var iFt=v(Ju=>{"use strict";var Gan=Ju&&Ju.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Jan=Ju&&Ju.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),rFt=Ju&&Ju.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&Gan(e,t,r);return Jan(e,t),e};Object.defineProperty(Ju,"__esModule",{value:!0});Ju.JobsApiRoutesBatchGetBatchJobsRequest$=Ju.JobsApiRoutesBatchGetBatchJobsRequest$outboundSchema=Ju.JobsApiRoutesBatchGetBatchJobsRequest$inboundSchema=void 0;Ju.jobsApiRoutesBatchGetBatchJobsRequestToJSON=Zan;Ju.jobsApiRoutesBatchGetBatchJobsRequestFromJSON=Xan;var Ea=rFt(Te()),nFt=qe(),Yan=ve(),oFt=rFt(Rn());Ju.JobsApiRoutesBatchGetBatchJobsRequest$inboundSchema=Ea.object({page:Ea.number().int().default(0),page_size:Ea.number().int().default(100),model:Ea.nullable(Ea.string()).optional(),metadata:Ea.nullable(Ea.record(Ea.any())).optional(),created_after:Ea.nullable(Ea.string().datetime({offset:!0}).transform(t=>new Date(t))).optional(),created_by_me:Ea.boolean().default(!1),status:Ea.nullable(oFt.BatchJobStatus$inboundSchema).optional()}).transform(t=>(0,nFt.remap)(t,{page_size:"pageSize",created_after:"createdAfter",created_by_me:"createdByMe"}));Ju.JobsApiRoutesBatchGetBatchJobsRequest$outboundSchema=Ea.object({page:Ea.number().int().default(0),pageSize:Ea.number().int().default(100),model:Ea.nullable(Ea.string()).optional(),metadata:Ea.nullable(Ea.record(Ea.any())).optional(),createdAfter:Ea.nullable(Ea.date().transform(t=>t.toISOString())).optional(),createdByMe:Ea.boolean().default(!1),status:Ea.nullable(oFt.BatchJobStatus$outboundSchema).optional()}).transform(t=>(0,nFt.remap)(t,{pageSize:"page_size",createdAfter:"created_after",createdByMe:"created_by_me"}));var tFt;(function(t){t.inboundSchema=Ju.JobsApiRoutesBatchGetBatchJobsRequest$inboundSchema,t.outboundSchema=Ju.JobsApiRoutesBatchGetBatchJobsRequest$outboundSchema})(tFt||(Ju.JobsApiRoutesBatchGetBatchJobsRequest$=tFt={}));function Zan(t){return JSON.stringify(Ju.JobsApiRoutesBatchGetBatchJobsRequest$outboundSchema.parse(t))}function Xan(t){return(0,Yan.safeParse)(t,e=>Ju.JobsApiRoutesBatchGetBatchJobsRequest$inboundSchema.parse(JSON.parse(e)),"Failed to parse 'JobsApiRoutesBatchGetBatchJobsRequest' from JSON")}});var uFt=v(Yu=>{"use strict";var Qan=Yu&&Yu.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),esn=Yu&&Yu.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),tsn=Yu&&Yu.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&Qan(e,t,r);return esn(e,t),e};Object.defineProperty(Yu,"__esModule",{value:!0});Yu.JobsApiRoutesFineTuningArchiveFineTunedModelRequest$=Yu.JobsApiRoutesFineTuningArchiveFineTunedModelRequest$outboundSchema=Yu.JobsApiRoutesFineTuningArchiveFineTunedModelRequest$inboundSchema=void 0;Yu.jobsApiRoutesFineTuningArchiveFineTunedModelRequestToJSON=nsn;Yu.jobsApiRoutesFineTuningArchiveFineTunedModelRequestFromJSON=osn;var Yae=tsn(Te()),sFt=qe(),rsn=ve();Yu.JobsApiRoutesFineTuningArchiveFineTunedModelRequest$inboundSchema=Yae.object({model_id:Yae.string()}).transform(t=>(0,sFt.remap)(t,{model_id:"modelId"}));Yu.JobsApiRoutesFineTuningArchiveFineTunedModelRequest$outboundSchema=Yae.object({modelId:Yae.string()}).transform(t=>(0,sFt.remap)(t,{modelId:"model_id"}));var aFt;(function(t){t.inboundSchema=Yu.JobsApiRoutesFineTuningArchiveFineTunedModelRequest$inboundSchema,t.outboundSchema=Yu.JobsApiRoutesFineTuningArchiveFineTunedModelRequest$outboundSchema})(aFt||(Yu.JobsApiRoutesFineTuningArchiveFineTunedModelRequest$=aFt={}));function nsn(t){return JSON.stringify(Yu.JobsApiRoutesFineTuningArchiveFineTunedModelRequest$outboundSchema.parse(t))}function osn(t){return(0,rsn.safeParse)(t,e=>Yu.JobsApiRoutesFineTuningArchiveFineTunedModelRequest$inboundSchema.parse(JSON.parse(e)),"Failed to parse 'JobsApiRoutesFineTuningArchiveFineTunedModelRequest' from JSON")}});var dFt=v(Zu=>{"use strict";var isn=Zu&&Zu.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),asn=Zu&&Zu.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),ssn=Zu&&Zu.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&isn(e,t,r);return asn(e,t),e};Object.defineProperty(Zu,"__esModule",{value:!0});Zu.JobsApiRoutesFineTuningCancelFineTuningJobRequest$=Zu.JobsApiRoutesFineTuningCancelFineTuningJobRequest$outboundSchema=Zu.JobsApiRoutesFineTuningCancelFineTuningJobRequest$inboundSchema=void 0;Zu.jobsApiRoutesFineTuningCancelFineTuningJobRequestToJSON=lsn;Zu.jobsApiRoutesFineTuningCancelFineTuningJobRequestFromJSON=csn;var Zae=ssn(Te()),cFt=qe(),usn=ve();Zu.JobsApiRoutesFineTuningCancelFineTuningJobRequest$inboundSchema=Zae.object({job_id:Zae.string()}).transform(t=>(0,cFt.remap)(t,{job_id:"jobId"}));Zu.JobsApiRoutesFineTuningCancelFineTuningJobRequest$outboundSchema=Zae.object({jobId:Zae.string()}).transform(t=>(0,cFt.remap)(t,{jobId:"job_id"}));var lFt;(function(t){t.inboundSchema=Zu.JobsApiRoutesFineTuningCancelFineTuningJobRequest$inboundSchema,t.outboundSchema=Zu.JobsApiRoutesFineTuningCancelFineTuningJobRequest$outboundSchema})(lFt||(Zu.JobsApiRoutesFineTuningCancelFineTuningJobRequest$=lFt={}));function lsn(t){return JSON.stringify(Zu.JobsApiRoutesFineTuningCancelFineTuningJobRequest$outboundSchema.parse(t))}function csn(t){return(0,usn.safeParse)(t,e=>Zu.JobsApiRoutesFineTuningCancelFineTuningJobRequest$inboundSchema.parse(JSON.parse(e)),"Failed to parse 'JobsApiRoutesFineTuningCancelFineTuningJobRequest' from JSON")}});var hFt=v(Xu=>{"use strict";var dsn=Xu&&Xu.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),fsn=Xu&&Xu.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),pFt=Xu&&Xu.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&dsn(e,t,r);return fsn(e,t),e};Object.defineProperty(Xu,"__esModule",{value:!0});Xu.JobsApiRoutesFineTuningCreateFineTuningJobResponse$=Xu.JobsApiRoutesFineTuningCreateFineTuningJobResponse$outboundSchema=Xu.JobsApiRoutesFineTuningCreateFineTuningJobResponse$inboundSchema=void 0;Xu.jobsApiRoutesFineTuningCreateFineTuningJobResponseToJSON=msn;Xu.jobsApiRoutesFineTuningCreateFineTuningJobResponseFromJSON=hsn;var mFt=pFt(Te()),psn=ve(),Xae=pFt(Rn());Xu.JobsApiRoutesFineTuningCreateFineTuningJobResponse$inboundSchema=mFt.union([Xae.LegacyJobMetadataOut$inboundSchema,Xae.JobOut$inboundSchema]);Xu.JobsApiRoutesFineTuningCreateFineTuningJobResponse$outboundSchema=mFt.union([Xae.LegacyJobMetadataOut$outboundSchema,Xae.JobOut$outboundSchema]);var fFt;(function(t){t.inboundSchema=Xu.JobsApiRoutesFineTuningCreateFineTuningJobResponse$inboundSchema,t.outboundSchema=Xu.JobsApiRoutesFineTuningCreateFineTuningJobResponse$outboundSchema})(fFt||(Xu.JobsApiRoutesFineTuningCreateFineTuningJobResponse$=fFt={}));function msn(t){return JSON.stringify(Xu.JobsApiRoutesFineTuningCreateFineTuningJobResponse$outboundSchema.parse(t))}function hsn(t){return(0,psn.safeParse)(t,e=>Xu.JobsApiRoutesFineTuningCreateFineTuningJobResponse$inboundSchema.parse(JSON.parse(e)),"Failed to parse 'JobsApiRoutesFineTuningCreateFineTuningJobResponse' from JSON")}});var bFt=v(Qu=>{"use strict";var gsn=Qu&&Qu.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),ysn=Qu&&Qu.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),bsn=Qu&&Qu.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&gsn(e,t,r);return ysn(e,t),e};Object.defineProperty(Qu,"__esModule",{value:!0});Qu.JobsApiRoutesFineTuningGetFineTuningJobRequest$=Qu.JobsApiRoutesFineTuningGetFineTuningJobRequest$outboundSchema=Qu.JobsApiRoutesFineTuningGetFineTuningJobRequest$inboundSchema=void 0;Qu.jobsApiRoutesFineTuningGetFineTuningJobRequestToJSON=vsn;Qu.jobsApiRoutesFineTuningGetFineTuningJobRequestFromJSON=wsn;var Qae=bsn(Te()),yFt=qe(),_sn=ve();Qu.JobsApiRoutesFineTuningGetFineTuningJobRequest$inboundSchema=Qae.object({job_id:Qae.string()}).transform(t=>(0,yFt.remap)(t,{job_id:"jobId"}));Qu.JobsApiRoutesFineTuningGetFineTuningJobRequest$outboundSchema=Qae.object({jobId:Qae.string()}).transform(t=>(0,yFt.remap)(t,{jobId:"job_id"}));var gFt;(function(t){t.inboundSchema=Qu.JobsApiRoutesFineTuningGetFineTuningJobRequest$inboundSchema,t.outboundSchema=Qu.JobsApiRoutesFineTuningGetFineTuningJobRequest$outboundSchema})(gFt||(Qu.JobsApiRoutesFineTuningGetFineTuningJobRequest$=gFt={}));function vsn(t){return JSON.stringify(Qu.JobsApiRoutesFineTuningGetFineTuningJobRequest$outboundSchema.parse(t))}function wsn(t){return(0,_sn.safeParse)(t,e=>Qu.JobsApiRoutesFineTuningGetFineTuningJobRequest$inboundSchema.parse(JSON.parse(e)),"Failed to parse 'JobsApiRoutesFineTuningGetFineTuningJobRequest' from JSON")}});var SFt=v(ao=>{"use strict";var Ssn=ao&&ao.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),xsn=ao&&ao.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Csn=ao&&ao.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&Ssn(e,t,r);return xsn(e,t),e};Object.defineProperty(ao,"__esModule",{value:!0});ao.JobsApiRoutesFineTuningGetFineTuningJobsRequest$=ao.JobsApiRoutesFineTuningGetFineTuningJobsRequest$outboundSchema=ao.JobsApiRoutesFineTuningGetFineTuningJobsRequest$inboundSchema=ao.Status$=ao.Status$outboundSchema=ao.Status$inboundSchema=ao.Status=void 0;ao.jobsApiRoutesFineTuningGetFineTuningJobsRequestToJSON=Psn;ao.jobsApiRoutesFineTuningGetFineTuningJobsRequestFromJSON=Esn;var ri=Csn(Te()),wFt=qe(),Osn=ve();ao.Status={Queued:"QUEUED",Started:"STARTED",Validating:"VALIDATING",Validated:"VALIDATED",Running:"RUNNING",FailedValidation:"FAILED_VALIDATION",Failed:"FAILED",Success:"SUCCESS",Cancelled:"CANCELLED",CancellationRequested:"CANCELLATION_REQUESTED"};ao.Status$inboundSchema=ri.nativeEnum(ao.Status);ao.Status$outboundSchema=ao.Status$inboundSchema;var _Ft;(function(t){t.inboundSchema=ao.Status$inboundSchema,t.outboundSchema=ao.Status$outboundSchema})(_Ft||(ao.Status$=_Ft={}));ao.JobsApiRoutesFineTuningGetFineTuningJobsRequest$inboundSchema=ri.object({page:ri.number().int().default(0),page_size:ri.number().int().default(100),model:ri.nullable(ri.string()).optional(),created_after:ri.nullable(ri.string().datetime({offset:!0}).transform(t=>new Date(t))).optional(),created_by_me:ri.boolean().default(!1),status:ri.nullable(ao.Status$inboundSchema).optional(),wandb_project:ri.nullable(ri.string()).optional(),wandb_name:ri.nullable(ri.string()).optional(),suffix:ri.nullable(ri.string()).optional()}).transform(t=>(0,wFt.remap)(t,{page_size:"pageSize",created_after:"createdAfter",created_by_me:"createdByMe",wandb_project:"wandbProject",wandb_name:"wandbName"}));ao.JobsApiRoutesFineTuningGetFineTuningJobsRequest$outboundSchema=ri.object({page:ri.number().int().default(0),pageSize:ri.number().int().default(100),model:ri.nullable(ri.string()).optional(),createdAfter:ri.nullable(ri.date().transform(t=>t.toISOString())).optional(),createdByMe:ri.boolean().default(!1),status:ri.nullable(ao.Status$outboundSchema).optional(),wandbProject:ri.nullable(ri.string()).optional(),wandbName:ri.nullable(ri.string()).optional(),suffix:ri.nullable(ri.string()).optional()}).transform(t=>(0,wFt.remap)(t,{pageSize:"page_size",createdAfter:"created_after",createdByMe:"created_by_me",wandbProject:"wandb_project",wandbName:"wandb_name"}));var vFt;(function(t){t.inboundSchema=ao.JobsApiRoutesFineTuningGetFineTuningJobsRequest$inboundSchema,t.outboundSchema=ao.JobsApiRoutesFineTuningGetFineTuningJobsRequest$outboundSchema})(vFt||(ao.JobsApiRoutesFineTuningGetFineTuningJobsRequest$=vFt={}));function Psn(t){return JSON.stringify(ao.JobsApiRoutesFineTuningGetFineTuningJobsRequest$outboundSchema.parse(t))}function Esn(t){return(0,Osn.safeParse)(t,e=>ao.JobsApiRoutesFineTuningGetFineTuningJobsRequest$inboundSchema.parse(JSON.parse(e)),"Failed to parse 'JobsApiRoutesFineTuningGetFineTuningJobsRequest' from JSON")}});var OFt=v(el=>{"use strict";var Tsn=el&&el.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Asn=el&&el.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Isn=el&&el.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&Tsn(e,t,r);return Asn(e,t),e};Object.defineProperty(el,"__esModule",{value:!0});el.JobsApiRoutesFineTuningStartFineTuningJobRequest$=el.JobsApiRoutesFineTuningStartFineTuningJobRequest$outboundSchema=el.JobsApiRoutesFineTuningStartFineTuningJobRequest$inboundSchema=void 0;el.jobsApiRoutesFineTuningStartFineTuningJobRequestToJSON=Rsn;el.jobsApiRoutesFineTuningStartFineTuningJobRequestFromJSON=jsn;var ese=Isn(Te()),CFt=qe(),Msn=ve();el.JobsApiRoutesFineTuningStartFineTuningJobRequest$inboundSchema=ese.object({job_id:ese.string()}).transform(t=>(0,CFt.remap)(t,{job_id:"jobId"}));el.JobsApiRoutesFineTuningStartFineTuningJobRequest$outboundSchema=ese.object({jobId:ese.string()}).transform(t=>(0,CFt.remap)(t,{jobId:"job_id"}));var xFt;(function(t){t.inboundSchema=el.JobsApiRoutesFineTuningStartFineTuningJobRequest$inboundSchema,t.outboundSchema=el.JobsApiRoutesFineTuningStartFineTuningJobRequest$outboundSchema})(xFt||(el.JobsApiRoutesFineTuningStartFineTuningJobRequest$=xFt={}));function Rsn(t){return JSON.stringify(el.JobsApiRoutesFineTuningStartFineTuningJobRequest$outboundSchema.parse(t))}function jsn(t){return(0,Msn.safeParse)(t,e=>el.JobsApiRoutesFineTuningStartFineTuningJobRequest$inboundSchema.parse(JSON.parse(e)),"Failed to parse 'JobsApiRoutesFineTuningStartFineTuningJobRequest' from JSON")}});var TFt=v(tl=>{"use strict";var Nsn=tl&&tl.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Dsn=tl&&tl.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Lsn=tl&&tl.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&Nsn(e,t,r);return Dsn(e,t),e};Object.defineProperty(tl,"__esModule",{value:!0});tl.JobsApiRoutesFineTuningUnarchiveFineTunedModelRequest$=tl.JobsApiRoutesFineTuningUnarchiveFineTunedModelRequest$outboundSchema=tl.JobsApiRoutesFineTuningUnarchiveFineTunedModelRequest$inboundSchema=void 0;tl.jobsApiRoutesFineTuningUnarchiveFineTunedModelRequestToJSON=ksn;tl.jobsApiRoutesFineTuningUnarchiveFineTunedModelRequestFromJSON=$sn;var tse=Lsn(Te()),EFt=qe(),Fsn=ve();tl.JobsApiRoutesFineTuningUnarchiveFineTunedModelRequest$inboundSchema=tse.object({model_id:tse.string()}).transform(t=>(0,EFt.remap)(t,{model_id:"modelId"}));tl.JobsApiRoutesFineTuningUnarchiveFineTunedModelRequest$outboundSchema=tse.object({modelId:tse.string()}).transform(t=>(0,EFt.remap)(t,{modelId:"model_id"}));var PFt;(function(t){t.inboundSchema=tl.JobsApiRoutesFineTuningUnarchiveFineTunedModelRequest$inboundSchema,t.outboundSchema=tl.JobsApiRoutesFineTuningUnarchiveFineTunedModelRequest$outboundSchema})(PFt||(tl.JobsApiRoutesFineTuningUnarchiveFineTunedModelRequest$=PFt={}));function ksn(t){return JSON.stringify(tl.JobsApiRoutesFineTuningUnarchiveFineTunedModelRequest$outboundSchema.parse(t))}function $sn(t){return(0,Fsn.safeParse)(t,e=>tl.JobsApiRoutesFineTuningUnarchiveFineTunedModelRequest$inboundSchema.parse(JSON.parse(e)),"Failed to parse 'JobsApiRoutesFineTuningUnarchiveFineTunedModelRequest' from JSON")}});var jFt=v(rl=>{"use strict";var Bsn=rl&&rl.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),qsn=rl&&rl.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),IFt=rl&&rl.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&Bsn(e,t,r);return qsn(e,t),e};Object.defineProperty(rl,"__esModule",{value:!0});rl.JobsApiRoutesFineTuningUpdateFineTunedModelRequest$=rl.JobsApiRoutesFineTuningUpdateFineTunedModelRequest$outboundSchema=rl.JobsApiRoutesFineTuningUpdateFineTunedModelRequest$inboundSchema=void 0;rl.jobsApiRoutesFineTuningUpdateFineTunedModelRequestToJSON=zsn;rl.jobsApiRoutesFineTuningUpdateFineTunedModelRequestFromJSON=Hsn;var rse=IFt(Te()),MFt=qe(),Usn=ve(),RFt=IFt(Rn());rl.JobsApiRoutesFineTuningUpdateFineTunedModelRequest$inboundSchema=rse.object({model_id:rse.string(),UpdateFTModelIn:RFt.UpdateFTModelIn$inboundSchema}).transform(t=>(0,MFt.remap)(t,{model_id:"modelId",UpdateFTModelIn:"updateFTModelIn"}));rl.JobsApiRoutesFineTuningUpdateFineTunedModelRequest$outboundSchema=rse.object({modelId:rse.string(),updateFTModelIn:RFt.UpdateFTModelIn$outboundSchema}).transform(t=>(0,MFt.remap)(t,{modelId:"model_id",updateFTModelIn:"UpdateFTModelIn"}));var AFt;(function(t){t.inboundSchema=rl.JobsApiRoutesFineTuningUpdateFineTunedModelRequest$inboundSchema,t.outboundSchema=rl.JobsApiRoutesFineTuningUpdateFineTunedModelRequest$outboundSchema})(AFt||(rl.JobsApiRoutesFineTuningUpdateFineTunedModelRequest$=AFt={}));function zsn(t){return JSON.stringify(rl.JobsApiRoutesFineTuningUpdateFineTunedModelRequest$outboundSchema.parse(t))}function Hsn(t){return(0,Usn.safeParse)(t,e=>rl.JobsApiRoutesFineTuningUpdateFineTunedModelRequest$inboundSchema.parse(JSON.parse(e)),"Failed to parse 'JobsApiRoutesFineTuningUpdateFineTunedModelRequest' from JSON")}});var $Ft=v(Ho=>{"use strict";var Vsn=Ho&&Ho.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Wsn=Ho&&Ho.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),LFt=Ho&&Ho.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&Vsn(e,t,r);return Wsn(e,t),e};Object.defineProperty(Ho,"__esModule",{value:!0});Ho.RetrieveModelV1ModelsModelIdGetResponseRetrieveModelV1ModelsModelIdGet$=Ho.RetrieveModelV1ModelsModelIdGetResponseRetrieveModelV1ModelsModelIdGet$outboundSchema=Ho.RetrieveModelV1ModelsModelIdGetResponseRetrieveModelV1ModelsModelIdGet$inboundSchema=Ho.RetrieveModelV1ModelsModelIdGetRequest$=Ho.RetrieveModelV1ModelsModelIdGetRequest$outboundSchema=Ho.RetrieveModelV1ModelsModelIdGetRequest$inboundSchema=void 0;Ho.retrieveModelV1ModelsModelIdGetRequestToJSON=Ksn;Ho.retrieveModelV1ModelsModelIdGetRequestFromJSON=Gsn;Ho.retrieveModelV1ModelsModelIdGetResponseRetrieveModelV1ModelsModelIdGetToJSON=Jsn;Ho.retrieveModelV1ModelsModelIdGetResponseRetrieveModelV1ModelsModelIdGetFromJSON=Ysn;var Hp=LFt(Te()),FFt=qe(),kFt=ve(),nse=LFt(Rn());Ho.RetrieveModelV1ModelsModelIdGetRequest$inboundSchema=Hp.object({model_id:Hp.string()}).transform(t=>(0,FFt.remap)(t,{model_id:"modelId"}));Ho.RetrieveModelV1ModelsModelIdGetRequest$outboundSchema=Hp.object({modelId:Hp.string()}).transform(t=>(0,FFt.remap)(t,{modelId:"model_id"}));var NFt;(function(t){t.inboundSchema=Ho.RetrieveModelV1ModelsModelIdGetRequest$inboundSchema,t.outboundSchema=Ho.RetrieveModelV1ModelsModelIdGetRequest$outboundSchema})(NFt||(Ho.RetrieveModelV1ModelsModelIdGetRequest$=NFt={}));function Ksn(t){return JSON.stringify(Ho.RetrieveModelV1ModelsModelIdGetRequest$outboundSchema.parse(t))}function Gsn(t){return(0,kFt.safeParse)(t,e=>Ho.RetrieveModelV1ModelsModelIdGetRequest$inboundSchema.parse(JSON.parse(e)),"Failed to parse 'RetrieveModelV1ModelsModelIdGetRequest' from JSON")}Ho.RetrieveModelV1ModelsModelIdGetResponseRetrieveModelV1ModelsModelIdGet$inboundSchema=Hp.union([nse.BaseModelCard$inboundSchema.and(Hp.object({type:Hp.literal("base")}).transform(t=>({type:t.type}))),nse.FTModelCard$inboundSchema.and(Hp.object({type:Hp.literal("fine-tuned")}).transform(t=>({type:t.type})))]);Ho.RetrieveModelV1ModelsModelIdGetResponseRetrieveModelV1ModelsModelIdGet$outboundSchema=Hp.union([nse.BaseModelCard$outboundSchema.and(Hp.object({type:Hp.literal("base")}).transform(t=>({type:t.type}))),nse.FTModelCard$outboundSchema.and(Hp.object({type:Hp.literal("fine-tuned")}).transform(t=>({type:t.type})))]);var DFt;(function(t){t.inboundSchema=Ho.RetrieveModelV1ModelsModelIdGetResponseRetrieveModelV1ModelsModelIdGet$inboundSchema,t.outboundSchema=Ho.RetrieveModelV1ModelsModelIdGetResponseRetrieveModelV1ModelsModelIdGet$outboundSchema})(DFt||(Ho.RetrieveModelV1ModelsModelIdGetResponseRetrieveModelV1ModelsModelIdGet$=DFt={}));function Jsn(t){return JSON.stringify(Ho.RetrieveModelV1ModelsModelIdGetResponseRetrieveModelV1ModelsModelIdGet$outboundSchema.parse(t))}function Ysn(t){return(0,kFt.safeParse)(t,e=>Ho.RetrieveModelV1ModelsModelIdGetResponseRetrieveModelV1ModelsModelIdGet$inboundSchema.parse(JSON.parse(e)),"Failed to parse 'RetrieveModelV1ModelsModelIdGetResponseRetrieveModelV1ModelsModelIdGet' from JSON")}});var nl=v(la=>{"use strict";var Zsn=la&&la.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),El=la&&la.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Zsn(e,t,r)};Object.defineProperty(la,"__esModule",{value:!0});El(OLt(),la);El(TLt(),la);El(MLt(),la);El(NLt(),la);El(kLt(),la);El(qLt(),la);El(GLt(),la);El(ZLt(),la);El(eFt(),la);El(iFt(),la);El(uFt(),la);El(dFt(),la);El(hFt(),la);El(bFt(),la);El(SFt(),la);El(OFt(),la);El(TFt(),la);El(jFt(),la);El($Ft(),la)});var qFt=v(tP=>{"use strict";var Xsn=tP&&tP.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Qsn=tP&&tP.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),_1e=tP&&tP.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&Xsn(e,t,r);return Qsn(e,t),e};Object.defineProperty(tP,"__esModule",{value:!0});tP.batchJobsCancel=aun;var eun=Xo(),ose=_1e(Qo()),tun=qe(),run=ve(),BFt=ei(),nun=wo(),oun=_1e(Rn()),iun=_1e(nl());async function aun(t,e,r){let n=(0,run.safeParse)(e,y=>iun.JobsApiRoutesBatchCancelBatchJobRequest$outboundSchema.parse(y),"Input validation failed");if(!n.ok)return n;let o=n.value,i=null,a={job_id:(0,eun.encodeSimple)("job_id",o.job_id,{explode:!1,charEncoding:"percent"})},s=(0,nun.pathToFunc)("/v1/batch/jobs/{job_id}/cancel")(a),u=new Headers((0,tun.compactMap)({Accept:"application/json"})),l=await(0,BFt.extractSecurity)(t._options.apiKey),c=l==null?{}:{apiKey:l},d=(0,BFt.resolveGlobalSecurity)(c),f={operationID:"jobs_api_routes_batch_cancel_batch_job",oAuth2Scopes:[],resolvedSecurity:d,securitySource:t._options.apiKey,retryConfig:r?.retries||t._options.retryConfig||{strategy:"none"},retryCodes:r?.retryCodes||["429","500","502","503","504"]},p=t._createRequest(f,{security:d,method:"POST",baseURL:r?.serverURL,path:s,headers:u,body:i,timeoutMs:r?.timeoutMs||t._options.timeoutMs||-1},r);if(!p.ok)return p;let m=p.value,h=await t._do(m,{context:f,errorCodes:["4XX","5XX"],retryConfig:f.retryConfig,retryCodes:f.retryCodes});if(!h.ok)return h;let b=h.value,[g]=await ose.match(ose.json(200,oun.BatchJobOut$inboundSchema),ose.fail("4XX"),ose.fail("5XX"))(b);return g.ok,g}});var VFt=v(rP=>{"use strict";var sun=rP&&rP.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),uun=rP&&rP.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),HFt=rP&&rP.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&sun(e,t,r);return uun(e,t),e};Object.defineProperty(rP,"__esModule",{value:!0});rP.batchJobsCreate=pun;var lun=Xo(),ise=HFt(Qo()),cun=qe(),dun=ve(),UFt=ei(),fun=wo(),zFt=HFt(Rn());async function pun(t,e,r){let n=(0,dun.safeParse)(e,g=>zFt.BatchJobIn$outboundSchema.parse(g),"Input validation failed");if(!n.ok)return n;let o=n.value,i=(0,lun.encodeJSON)("body",o,{explode:!0}),a=(0,fun.pathToFunc)("/v1/batch/jobs")(),s=new Headers((0,cun.compactMap)({"Content-Type":"application/json",Accept:"application/json"})),u=await(0,UFt.extractSecurity)(t._options.apiKey),l=u==null?{}:{apiKey:u},c=(0,UFt.resolveGlobalSecurity)(l),d={operationID:"jobs_api_routes_batch_create_batch_job",oAuth2Scopes:[],resolvedSecurity:c,securitySource:t._options.apiKey,retryConfig:r?.retries||t._options.retryConfig||{strategy:"none"},retryCodes:r?.retryCodes||["429","500","502","503","504"]},f=t._createRequest(d,{security:c,method:"POST",baseURL:r?.serverURL,path:a,headers:s,body:i,timeoutMs:r?.timeoutMs||t._options.timeoutMs||-1},r);if(!f.ok)return f;let p=f.value,m=await t._do(p,{context:d,errorCodes:["4XX","5XX"],retryConfig:d.retryConfig,retryCodes:d.retryCodes});if(!m.ok)return m;let h=m.value,[b]=await ise.match(ise.json(200,zFt.BatchJobOut$inboundSchema),ise.fail("4XX"),ise.fail("5XX"))(h);return b.ok,b}});var KFt=v(nP=>{"use strict";var mun=nP&&nP.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),hun=nP&&nP.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),v1e=nP&&nP.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&mun(e,t,r);return hun(e,t),e};Object.defineProperty(nP,"__esModule",{value:!0});nP.batchJobsGet=Sun;var gun=Xo(),ase=v1e(Qo()),yun=qe(),bun=ve(),WFt=ei(),_un=wo(),vun=v1e(Rn()),wun=v1e(nl());async function Sun(t,e,r){let n=(0,bun.safeParse)(e,y=>wun.JobsApiRoutesBatchGetBatchJobRequest$outboundSchema.parse(y),"Input validation failed");if(!n.ok)return n;let o=n.value,i=null,a={job_id:(0,gun.encodeSimple)("job_id",o.job_id,{explode:!1,charEncoding:"percent"})},s=(0,_un.pathToFunc)("/v1/batch/jobs/{job_id}")(a),u=new Headers((0,yun.compactMap)({Accept:"application/json"})),l=await(0,WFt.extractSecurity)(t._options.apiKey),c=l==null?{}:{apiKey:l},d=(0,WFt.resolveGlobalSecurity)(c),f={operationID:"jobs_api_routes_batch_get_batch_job",oAuth2Scopes:[],resolvedSecurity:d,securitySource:t._options.apiKey,retryConfig:r?.retries||t._options.retryConfig||{strategy:"none"},retryCodes:r?.retryCodes||["429","500","502","503","504"]},p=t._createRequest(f,{security:d,method:"GET",baseURL:r?.serverURL,path:s,headers:u,body:i,timeoutMs:r?.timeoutMs||t._options.timeoutMs||-1},r);if(!p.ok)return p;let m=p.value,h=await t._do(m,{context:f,errorCodes:["4XX","5XX"],retryConfig:f.retryConfig,retryCodes:f.retryCodes});if(!h.ok)return h;let b=h.value,[g]=await ase.match(ase.json(200,vun.BatchJobOut$inboundSchema),ase.fail("4XX"),ase.fail("5XX"))(b);return g.ok,g}});var JFt=v(oP=>{"use strict";var xun=oP&&oP.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Cun=oP&&oP.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),w1e=oP&&oP.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&xun(e,t,r);return Cun(e,t),e};Object.defineProperty(oP,"__esModule",{value:!0});oP.batchJobsList=Mun;var Oun=Xo(),sse=w1e(Qo()),Pun=qe(),Eun=ve(),GFt=ei(),Tun=wo(),Aun=w1e(Rn()),Iun=w1e(nl());async function Mun(t,e,r){let n=(0,Eun.safeParse)(e,y=>Iun.JobsApiRoutesBatchGetBatchJobsRequest$outboundSchema.optional().parse(y),"Input validation failed");if(!n.ok)return n;let o=n.value,i=null,a=(0,Tun.pathToFunc)("/v1/batch/jobs")(),s=(0,Oun.encodeFormQuery)({created_after:o?.created_after,created_by_me:o?.created_by_me,metadata:o?.metadata,model:o?.model,page:o?.page,page_size:o?.page_size,status:o?.status}),u=new Headers((0,Pun.compactMap)({Accept:"application/json"})),l=await(0,GFt.extractSecurity)(t._options.apiKey),c=l==null?{}:{apiKey:l},d=(0,GFt.resolveGlobalSecurity)(c),f={operationID:"jobs_api_routes_batch_get_batch_jobs",oAuth2Scopes:[],resolvedSecurity:d,securitySource:t._options.apiKey,retryConfig:r?.retries||t._options.retryConfig||{strategy:"none"},retryCodes:r?.retryCodes||["429","500","502","503","504"]},p=t._createRequest(f,{security:d,method:"GET",baseURL:r?.serverURL,path:a,headers:u,query:s,body:i,timeoutMs:r?.timeoutMs||t._options.timeoutMs||-1},r);if(!p.ok)return p;let m=p.value,h=await t._do(m,{context:f,errorCodes:["4XX","5XX"],retryConfig:f.retryConfig,retryCodes:f.retryCodes});if(!h.ok)return h;let b=h.value,[g]=await sse.match(sse.json(200,Aun.BatchJobsOut$inboundSchema),sse.fail("4XX"),sse.fail("5XX"))(b);return g.ok,g}});var YFt=v(lse=>{"use strict";Object.defineProperty(lse,"__esModule",{value:!0});lse.MistralJobs=void 0;var Run=qFt(),jun=VFt(),Nun=KFt(),Dun=JFt(),Lun=Vm(),use=cg(),S1e=class extends Lun.ClientSDK{async list(e,r){return(0,use.unwrapAsync)((0,Dun.batchJobsList)(this,e,r))}async create(e,r){return(0,use.unwrapAsync)((0,jun.batchJobsCreate)(this,e,r))}async get(e,r){return(0,use.unwrapAsync)((0,Nun.batchJobsGet)(this,e,r))}async cancel(e,r){return(0,use.unwrapAsync)((0,Run.batchJobsCancel)(this,e,r))}};lse.MistralJobs=S1e});var ZFt=v(cse=>{"use strict";Object.defineProperty(cse,"__esModule",{value:!0});cse.Batch=void 0;var Fun=Vm(),kun=YFt(),x1e=class extends Fun.ClientSDK{get jobs(){return this._jobs??(this._jobs=new kun.MistralJobs(this._options))}};cse.Batch=x1e});var ekt=v(iP=>{"use strict";var $un=iP&&iP.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),qun=iP&&iP.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),C1e=iP&&iP.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&$un(e,t,r);return qun(e,t),e};Object.defineProperty(iP,"__esModule",{value:!0});iP.chatComplete=Kun;var Uun=Xo(),a5=C1e(Qo()),zun=qe(),Hun=ve(),XFt=ei(),Vun=wo(),QFt=C1e(Rn()),Wun=C1e(Km());async function Kun(t,e,r){let n=(0,Hun.safeParse)(e,y=>QFt.ChatCompletionRequest$outboundSchema.parse(y),"Input validation failed");if(!n.ok)return n;let o=n.value,i=(0,Uun.encodeJSON)("body",o,{explode:!0}),a=(0,Vun.pathToFunc)("/v1/chat/completions")(),s=new Headers((0,zun.compactMap)({"Content-Type":"application/json",Accept:"application/json"})),u=await(0,XFt.extractSecurity)(t._options.apiKey),l=u==null?{}:{apiKey:u},c=(0,XFt.resolveGlobalSecurity)(l),d={operationID:"chat_completion_v1_chat_completions_post",oAuth2Scopes:[],resolvedSecurity:c,securitySource:t._options.apiKey,retryConfig:r?.retries||t._options.retryConfig||{strategy:"none"},retryCodes:r?.retryCodes||["429","500","502","503","504"]},f=t._createRequest(d,{security:c,method:"POST",baseURL:r?.serverURL,path:a,headers:s,body:i,timeoutMs:r?.timeoutMs||t._options.timeoutMs||-1},r);if(!f.ok)return f;let p=f.value,m=await t._do(p,{context:d,errorCodes:["422","4XX","5XX"],retryConfig:d.retryConfig,retryCodes:d.retryCodes});if(!m.ok)return m;let h=m.value,b={HttpMeta:{Response:h,Request:p}},[g]=await a5.match(a5.json(200,QFt.ChatCompletionResponse$inboundSchema),a5.jsonErr(422,Wun.HTTPValidationError$inboundSchema),a5.fail("4XX"),a5.fail("5XX"))(h,{extraFields:b});return g.ok,g}});var nkt=v(aP=>{"use strict";var Gun=aP&&aP.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Jun=aP&&aP.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),dse=aP&&aP.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&Gun(e,t,r);return Jun(e,t),e};Object.defineProperty(aP,"__esModule",{value:!0});aP.chatStream=nln;var Yun=dse(Te()),Zun=Xo(),Xun=G6(),s5=dse(Qo()),Qun=qe(),eln=ve(),tkt=ei(),tln=wo(),rkt=dse(Rn()),rln=dse(Km());async function nln(t,e,r){let n=(0,eln.safeParse)(e,y=>rkt.ChatCompletionStreamRequest$outboundSchema.parse(y),"Input validation failed");if(!n.ok)return n;let o=n.value,i=(0,Zun.encodeJSON)("body",o,{explode:!0}),a=(0,tln.pathToFunc)("/v1/chat/completions#stream")(),s=new Headers((0,Qun.compactMap)({"Content-Type":"application/json",Accept:"text/event-stream"})),u=await(0,tkt.extractSecurity)(t._options.apiKey),l=u==null?{}:{apiKey:u},c=(0,tkt.resolveGlobalSecurity)(l),d={operationID:"stream_chat",oAuth2Scopes:[],resolvedSecurity:c,securitySource:t._options.apiKey,retryConfig:r?.retries||t._options.retryConfig||{strategy:"none"},retryCodes:r?.retryCodes||["429","500","502","503","504"]},f=t._createRequest(d,{security:c,method:"POST",baseURL:r?.serverURL,path:a,headers:s,body:i,timeoutMs:r?.timeoutMs||t._options.timeoutMs||-1},r);if(!f.ok)return f;let p=f.value,m=await t._do(p,{context:d,errorCodes:["422","4XX","5XX"],retryConfig:d.retryConfig,retryCodes:d.retryCodes});if(!m.ok)return m;let h=m.value,b={HttpMeta:{Response:h,Request:p}},[g]=await s5.match(s5.sse(200,Yun.instanceof(ReadableStream).transform(y=>new Xun.EventStream({stream:y,decoder(w){return rkt.CompletionEvent$inboundSchema.parse(w)}})),{sseSentinel:"[DONE]"}),s5.jsonErr(422,rln.HTTPValidationError$inboundSchema),s5.fail("4XX"),s5.fail("5XX"))(h,{extraFields:b});return g.ok,g}});var fse=v(Ox=>{"use strict";Object.defineProperty(Ox,"__esModule",{value:!0});Ox.getDefaultOptions=Ox.defaultOptions=Ox.ignoreOverride=void 0;Ox.ignoreOverride=Symbol("Let zodToJsonSchema decide on which parser to use");Ox.defaultOptions={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,definitions:{},errorMessages:!1,markdownDescription:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref"};var oln=t=>typeof t=="string"?{...Ox.defaultOptions,name:t}:{...Ox.defaultOptions,...t};Ox.getDefaultOptions=oln});var O1e=v(pse=>{"use strict";Object.defineProperty(pse,"__esModule",{value:!0});pse.getRefs=void 0;var iln=fse(),aln=t=>{let e=(0,iln.getDefaultOptions)(t),r=e.name!==void 0?[...e.basePath,e.definitionPath,e.name]:e.basePath;return{...e,currentPath:r,propertyPath:void 0,seen:new Map(Object.entries(e.definitions).map(([n,o])=>[o._def,{def:o._def,path:[...e.basePath,e.definitionPath,n],jsonSchema:void 0}]))}};pse.getRefs=aln});var bI=v(Xq=>{"use strict";Object.defineProperty(Xq,"__esModule",{value:!0});Xq.setResponseValueAndErrors=Xq.addErrorMessage=void 0;function okt(t,e,r,n){n?.errorMessages&&r&&(t.errorMessage={...t.errorMessage,[e]:r})}Xq.addErrorMessage=okt;function sln(t,e,r,n,o){t[e]=r,okt(t,e,n,o)}Xq.setResponseValueAndErrors=sln});var P1e=v(mse=>{"use strict";Object.defineProperty(mse,"__esModule",{value:!0});mse.parseAnyDef=void 0;function uln(){return{}}mse.parseAnyDef=uln});var E1e=v(gse=>{"use strict";Object.defineProperty(gse,"__esModule",{value:!0});gse.parseArrayDef=void 0;var lln=Te(),hse=bI(),cln=ol();function dln(t,e){let r={type:"array"};return t.type?._def&&t.type?._def?.typeName!==lln.ZodFirstPartyTypeKind.ZodAny&&(r.items=(0,cln.parseDef)(t.type._def,{...e,currentPath:[...e.currentPath,"items"]})),t.minLength&&(0,hse.setResponseValueAndErrors)(r,"minItems",t.minLength.value,t.minLength.message,e),t.maxLength&&(0,hse.setResponseValueAndErrors)(r,"maxItems",t.maxLength.value,t.maxLength.message,e),t.exactLength&&((0,hse.setResponseValueAndErrors)(r,"minItems",t.exactLength.value,t.exactLength.message,e),(0,hse.setResponseValueAndErrors)(r,"maxItems",t.exactLength.value,t.exactLength.message,e)),r}gse.parseArrayDef=dln});var T1e=v(yse=>{"use strict";Object.defineProperty(yse,"__esModule",{value:!0});yse.parseBigintDef=void 0;var BN=bI();function fln(t,e){let r={type:"integer",format:"int64"};if(!t.checks)return r;for(let n of t.checks)switch(n.kind){case"min":e.target==="jsonSchema7"?n.inclusive?(0,BN.setResponseValueAndErrors)(r,"minimum",n.value,n.message,e):(0,BN.setResponseValueAndErrors)(r,"exclusiveMinimum",n.value,n.message,e):(n.inclusive||(r.exclusiveMinimum=!0),(0,BN.setResponseValueAndErrors)(r,"minimum",n.value,n.message,e));break;case"max":e.target==="jsonSchema7"?n.inclusive?(0,BN.setResponseValueAndErrors)(r,"maximum",n.value,n.message,e):(0,BN.setResponseValueAndErrors)(r,"exclusiveMaximum",n.value,n.message,e):(n.inclusive||(r.exclusiveMaximum=!0),(0,BN.setResponseValueAndErrors)(r,"maximum",n.value,n.message,e));break;case"multipleOf":(0,BN.setResponseValueAndErrors)(r,"multipleOf",n.value,n.message,e);break}return r}yse.parseBigintDef=fln});var A1e=v(bse=>{"use strict";Object.defineProperty(bse,"__esModule",{value:!0});bse.parseBooleanDef=void 0;function pln(){return{type:"boolean"}}bse.parseBooleanDef=pln});var vse=v(_se=>{"use strict";Object.defineProperty(_se,"__esModule",{value:!0});_se.parseBrandedDef=void 0;var mln=ol();function hln(t,e){return(0,mln.parseDef)(t.type._def,e)}_se.parseBrandedDef=hln});var I1e=v(wse=>{"use strict";Object.defineProperty(wse,"__esModule",{value:!0});wse.parseCatchDef=void 0;var gln=ol(),yln=(t,e)=>(0,gln.parseDef)(t.innerType._def,e);wse.parseCatchDef=yln});var M1e=v(Sse=>{"use strict";Object.defineProperty(Sse,"__esModule",{value:!0});Sse.parseDateDef=void 0;var ikt=bI();function akt(t,e,r){let n=r??e.dateStrategy;if(Array.isArray(n))return{anyOf:n.map((o,i)=>akt(t,e,o))};switch(n){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return bln(t,e)}}Sse.parseDateDef=akt;var bln=(t,e)=>{let r={type:"integer",format:"unix-time"};if(e.target==="openApi3")return r;for(let n of t.checks)switch(n.kind){case"min":(0,ikt.setResponseValueAndErrors)(r,"minimum",n.value,n.message,e);break;case"max":(0,ikt.setResponseValueAndErrors)(r,"maximum",n.value,n.message,e);break}return r}});var R1e=v(xse=>{"use strict";Object.defineProperty(xse,"__esModule",{value:!0});xse.parseDefaultDef=void 0;var _ln=ol();function vln(t,e){return{...(0,_ln.parseDef)(t.innerType._def,e),default:t.defaultValue()}}xse.parseDefaultDef=vln});var j1e=v(Cse=>{"use strict";Object.defineProperty(Cse,"__esModule",{value:!0});Cse.parseEffectsDef=void 0;var wln=ol();function Sln(t,e){return e.effectStrategy==="input"?(0,wln.parseDef)(t.schema._def,e):{}}Cse.parseEffectsDef=Sln});var N1e=v(Ose=>{"use strict";Object.defineProperty(Ose,"__esModule",{value:!0});Ose.parseEnumDef=void 0;function xln(t){return{type:"string",enum:Array.from(t.values)}}Ose.parseEnumDef=xln});var D1e=v(Pse=>{"use strict";Object.defineProperty(Pse,"__esModule",{value:!0});Pse.parseIntersectionDef=void 0;var skt=ol(),Cln=t=>"type"in t&&t.type==="string"?!1:"allOf"in t;function Oln(t,e){let r=[(0,skt.parseDef)(t.left._def,{...e,currentPath:[...e.currentPath,"allOf","0"]}),(0,skt.parseDef)(t.right._def,{...e,currentPath:[...e.currentPath,"allOf","1"]})].filter(i=>!!i),n=e.target==="jsonSchema2019-09"?{unevaluatedProperties:!1}:void 0,o=[];return r.forEach(i=>{if(Cln(i))o.push(...i.allOf),i.unevaluatedProperties===void 0&&(n=void 0);else{let a=i;if("additionalProperties"in i&&i.additionalProperties===!1){let{additionalProperties:s,...u}=i;a=u}else n=void 0;o.push(a)}}),o.length?{allOf:o,...n}:void 0}Pse.parseIntersectionDef=Oln});var L1e=v(Ese=>{"use strict";Object.defineProperty(Ese,"__esModule",{value:!0});Ese.parseLiteralDef=void 0;function Pln(t,e){let r=typeof t.value;return r!=="bigint"&&r!=="number"&&r!=="boolean"&&r!=="string"?{type:Array.isArray(t.value)?"array":"object"}:e.target==="openApi3"?{type:r==="bigint"?"integer":r,enum:[t.value]}:{type:r==="bigint"?"integer":r,const:t.value}}Ese.parseLiteralDef=Pln});var Tse=v(Wc=>{"use strict";Object.defineProperty(Wc,"__esModule",{value:!0});Wc.parseStringDef=Wc.zodPatterns=void 0;var qN=bI(),F1e;Wc.zodPatterns={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>(F1e===void 0&&(F1e=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),F1e),uuid:/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/,ipv4:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv4Cidr:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ipv6:/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,ipv6Cidr:/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,base64url:/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/,jwt:/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/};function Eln(t,e){let r={type:"string"};if(t.checks)for(let n of t.checks)switch(n.kind){case"min":(0,qN.setResponseValueAndErrors)(r,"minLength",typeof r.minLength=="number"?Math.max(r.minLength,n.value):n.value,n.message,e);break;case"max":(0,qN.setResponseValueAndErrors)(r,"maxLength",typeof r.maxLength=="number"?Math.min(r.maxLength,n.value):n.value,n.message,e);break;case"email":switch(e.emailStrategy){case"format:email":Jy(r,"email",n.message,e);break;case"format:idn-email":Jy(r,"idn-email",n.message,e);break;case"pattern:zod":Bf(r,Wc.zodPatterns.email,n.message,e);break}break;case"url":Jy(r,"uri",n.message,e);break;case"uuid":Jy(r,"uuid",n.message,e);break;case"regex":Bf(r,n.regex,n.message,e);break;case"cuid":Bf(r,Wc.zodPatterns.cuid,n.message,e);break;case"cuid2":Bf(r,Wc.zodPatterns.cuid2,n.message,e);break;case"startsWith":Bf(r,RegExp(`^${k1e(n.value,e)}`),n.message,e);break;case"endsWith":Bf(r,RegExp(`${k1e(n.value,e)}$`),n.message,e);break;case"datetime":Jy(r,"date-time",n.message,e);break;case"date":Jy(r,"date",n.message,e);break;case"time":Jy(r,"time",n.message,e);break;case"duration":Jy(r,"duration",n.message,e);break;case"length":(0,qN.setResponseValueAndErrors)(r,"minLength",typeof r.minLength=="number"?Math.max(r.minLength,n.value):n.value,n.message,e),(0,qN.setResponseValueAndErrors)(r,"maxLength",typeof r.maxLength=="number"?Math.min(r.maxLength,n.value):n.value,n.message,e);break;case"includes":{Bf(r,RegExp(k1e(n.value,e)),n.message,e);break}case"ip":{n.version!=="v6"&&Jy(r,"ipv4",n.message,e),n.version!=="v4"&&Jy(r,"ipv6",n.message,e);break}case"base64url":Bf(r,Wc.zodPatterns.base64url,n.message,e);break;case"jwt":Bf(r,Wc.zodPatterns.jwt,n.message,e);break;case"cidr":{n.version!=="v6"&&Bf(r,Wc.zodPatterns.ipv4Cidr,n.message,e),n.version!=="v4"&&Bf(r,Wc.zodPatterns.ipv6Cidr,n.message,e);break}case"emoji":Bf(r,Wc.zodPatterns.emoji(),n.message,e);break;case"ulid":{Bf(r,Wc.zodPatterns.ulid,n.message,e);break}case"base64":{switch(e.base64Strategy){case"format:binary":{Jy(r,"binary",n.message,e);break}case"contentEncoding:base64":{(0,qN.setResponseValueAndErrors)(r,"contentEncoding","base64",n.message,e);break}case"pattern:zod":{Bf(r,Wc.zodPatterns.base64,n.message,e);break}}break}case"nanoid":Bf(r,Wc.zodPatterns.nanoid,n.message,e);case"toLowerCase":case"toUpperCase":case"trim":break;default:}return r}Wc.parseStringDef=Eln;function k1e(t,e){return e.patternStrategy==="escape"?Aln(t):t}var Tln=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");function Aln(t){let e="";for(let r=0;r<t.length;r++)Tln.has(t[r])||(e+="\\"),e+=t[r];return e}function Jy(t,e,r,n){t.format||t.anyOf?.some(o=>o.format)?(t.anyOf||(t.anyOf=[]),t.format&&(t.anyOf.push({format:t.format,...t.errorMessage&&n.errorMessages&&{errorMessage:{format:t.errorMessage.format}}}),delete t.format,t.errorMessage&&(delete t.errorMessage.format,Object.keys(t.errorMessage).length===0&&delete t.errorMessage)),t.anyOf.push({format:e,...r&&n.errorMessages&&{errorMessage:{format:r}}})):(0,qN.setResponseValueAndErrors)(t,"format",e,r,n)}function Bf(t,e,r,n){t.pattern||t.allOf?.some(o=>o.pattern)?(t.allOf||(t.allOf=[]),t.pattern&&(t.allOf.push({pattern:t.pattern,...t.errorMessage&&n.errorMessages&&{errorMessage:{pattern:t.errorMessage.pattern}}}),delete t.pattern,t.errorMessage&&(delete t.errorMessage.pattern,Object.keys(t.errorMessage).length===0&&delete t.errorMessage)),t.allOf.push({pattern:ukt(e,n),...r&&n.errorMessages&&{errorMessage:{pattern:r}}})):(0,qN.setResponseValueAndErrors)(t,"pattern",ukt(e,n),r,n)}function ukt(t,e){if(!e.applyRegexFlags||!t.flags)return t.source;let r={i:t.flags.includes("i"),m:t.flags.includes("m"),s:t.flags.includes("s")},n=r.i?t.source.toLowerCase():t.source,o="",i=!1,a=!1,s=!1;for(let u=0;u<n.length;u++){if(i){o+=n[u],i=!1;continue}if(r.i){if(a){if(n[u].match(/[a-z]/)){s?(o+=n[u],o+=`${n[u-2]}-${n[u]}`.toUpperCase(),s=!1):n[u+1]==="-"&&n[u+2]?.match(/[a-z]/)?(o+=n[u],s=!0):o+=`${n[u]}${n[u].toUpperCase()}`;continue}}else if(n[u].match(/[a-z]/)){o+=`[${n[u]}${n[u].toUpperCase()}]`;continue}}if(r.m){if(n[u]==="^"){o+=`(^|(?<=[\r
]))`;continue}else if(n[u]==="$"){o+=`($|(?=[\r
]))`;continue}}if(r.s&&n[u]==="."){o+=a?`${n[u]}\r
`:`[${n[u]}\r
]`;continue}o+=n[u],n[u]==="\\"?i=!0:a&&n[u]==="]"?a=!1:!a&&n[u]==="["&&(a=!0)}try{new RegExp(o)}catch{return console.warn(`Could not convert regex pattern at ${e.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),t.source}return o}});var Ise=v(Ase=>{"use strict";Object.defineProperty(Ase,"__esModule",{value:!0});Ase.parseRecordDef=void 0;var u5=Te(),lkt=ol(),Iln=Tse(),Mln=vse();function Rln(t,e){if(e.target==="openAi"&&console.warn("Warning: OpenAI may not support records in schemas! Try an array of key-value pairs instead."),e.target==="openApi3"&&t.keyType?._def.typeName===u5.ZodFirstPartyTypeKind.ZodEnum)return{type:"object",required:t.keyType._def.values,properties:t.keyType._def.values.reduce((n,o)=>({...n,[o]:(0,lkt.parseDef)(t.valueType._def,{...e,currentPath:[...e.currentPath,"properties",o]})??{}}),{}),additionalProperties:!1};let r={type:"object",additionalProperties:(0,lkt.parseDef)(t.valueType._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]})??{}};if(e.target==="openApi3")return r;if(t.keyType?._def.typeName===u5.ZodFirstPartyTypeKind.ZodString&&t.keyType._def.checks?.length){let{type:n,...o}=(0,Iln.parseStringDef)(t.keyType._def,e);return{...r,propertyNames:o}}else{if(t.keyType?._def.typeName===u5.ZodFirstPartyTypeKind.ZodEnum)return{...r,propertyNames:{enum:t.keyType._def.values}};if(t.keyType?._def.typeName===u5.ZodFirstPartyTypeKind.ZodBranded&&t.keyType._def.type._def.typeName===u5.ZodFirstPartyTypeKind.ZodString&&t.keyType._def.type._def.checks?.length){let{type:n,...o}=(0,Mln.parseBrandedDef)(t.keyType._def,e);return{...r,propertyNames:o}}}return r}Ase.parseRecordDef=Rln});var $1e=v(Mse=>{"use strict";Object.defineProperty(Mse,"__esModule",{value:!0});Mse.parseMapDef=void 0;var ckt=ol(),jln=Ise();function Nln(t,e){if(e.mapStrategy==="record")return(0,jln.parseRecordDef)(t,e);let r=(0,ckt.parseDef)(t.keyType._def,{...e,currentPath:[...e.currentPath,"items","items","0"]})||{},n=(0,ckt.parseDef)(t.valueType._def,{...e,currentPath:[...e.currentPath,"items","items","1"]})||{};return{type:"array",maxItems:125,items:{type:"array",items:[r,n],minItems:2,maxItems:2}}}Mse.parseMapDef=Nln});var B1e=v(Rse=>{"use strict";Object.defineProperty(Rse,"__esModule",{value:!0});Rse.parseNativeEnumDef=void 0;function Dln(t){let e=t.values,n=Object.keys(t.values).filter(i=>typeof e[e[i]]!="number").map(i=>e[i]),o=Array.from(new Set(n.map(i=>typeof i)));return{type:o.length===1?o[0]==="string"?"string":"number":["string","number"],enum:n}}Rse.parseNativeEnumDef=Dln});var q1e=v(jse=>{"use strict";Object.defineProperty(jse,"__esModule",{value:!0});jse.parseNeverDef=void 0;function Lln(){return{not:{}}}jse.parseNeverDef=Lln});var U1e=v(Nse=>{"use strict";Object.defineProperty(Nse,"__esModule",{value:!0});Nse.parseNullDef=void 0;function Fln(t){return t.target==="openApi3"?{enum:["null"],nullable:!0}:{type:"null"}}Nse.parseNullDef=Fln});var Dse=v(_I=>{"use strict";Object.defineProperty(_I,"__esModule",{value:!0});_I.parseUnionDef=_I.primitiveMappings=void 0;var kln=ol();_I.primitiveMappings={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function $ln(t,e){if(e.target==="openApi3")return dkt(t,e);let r=t.options instanceof Map?Array.from(t.options.values()):t.options;if(r.every(n=>n._def.typeName in _I.primitiveMappings&&(!n._def.checks||!n._def.checks.length))){let n=r.reduce((o,i)=>{let a=_I.primitiveMappings[i._def.typeName];return a&&!o.includes(a)?[...o,a]:o},[]);return{type:n.length>1?n:n[0]}}else if(r.every(n=>n._def.typeName==="ZodLiteral"&&!n.description)){let n=r.reduce((o,i)=>{let a=typeof i._def.value;switch(a){case"string":case"number":case"boolean":return[...o,a];case"bigint":return[...o,"integer"];case"object":if(i._def.value===null)return[...o,"null"];case"symbol":case"undefined":case"function":default:return o}},[]);if(n.length===r.length){let o=n.filter((i,a,s)=>s.indexOf(i)===a);return{type:o.length>1?o:o[0],enum:r.reduce((i,a)=>i.includes(a._def.value)?i:[...i,a._def.value],[])}}}else if(r.every(n=>n._def.typeName==="ZodEnum"))return{type:"string",enum:r.reduce((n,o)=>[...n,...o._def.values.filter(i=>!n.includes(i))],[])};return dkt(t,e)}_I.parseUnionDef=$ln;var dkt=(t,e)=>{let r=(t.options instanceof Map?Array.from(t.options.values()):t.options).map((n,o)=>(0,kln.parseDef)(n._def,{...e,currentPath:[...e.currentPath,"anyOf",`${o}`]})).filter(n=>!!n&&(!e.strictUnions||typeof n=="object"&&Object.keys(n).length>0));return r.length?{anyOf:r}:void 0}});var z1e=v(Lse=>{"use strict";Object.defineProperty(Lse,"__esModule",{value:!0});Lse.parseNullableDef=void 0;var fkt=ol(),pkt=Dse();function Bln(t,e){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(t.innerType._def.typeName)&&(!t.innerType._def.checks||!t.innerType._def.checks.length))return e.target==="openApi3"?{type:pkt.primitiveMappings[t.innerType._def.typeName],nullable:!0}:{type:[pkt.primitiveMappings[t.innerType._def.typeName],"null"]};if(e.target==="openApi3"){let n=(0,fkt.parseDef)(t.innerType._def,{...e,currentPath:[...e.currentPath]});return n&&"$ref"in n?{allOf:[n],nullable:!0}:n&&{...n,nullable:!0}}let r=(0,fkt.parseDef)(t.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","0"]});return r&&{anyOf:[r,{type:"null"}]}}Lse.parseNullableDef=Bln});var H1e=v(Fse=>{"use strict";Object.defineProperty(Fse,"__esModule",{value:!0});Fse.parseNumberDef=void 0;var vI=bI();function qln(t,e){let r={type:"number"};if(!t.checks)return r;for(let n of t.checks)switch(n.kind){case"int":r.type="integer",(0,vI.addErrorMessage)(r,"type",n.message,e);break;case"min":e.target==="jsonSchema7"?n.inclusive?(0,vI.setResponseValueAndErrors)(r,"minimum",n.value,n.message,e):(0,vI.setResponseValueAndErrors)(r,"exclusiveMinimum",n.value,n.message,e):(n.inclusive||(r.exclusiveMinimum=!0),(0,vI.setResponseValueAndErrors)(r,"minimum",n.value,n.message,e));break;case"max":e.target==="jsonSchema7"?n.inclusive?(0,vI.setResponseValueAndErrors)(r,"maximum",n.value,n.message,e):(0,vI.setResponseValueAndErrors)(r,"exclusiveMaximum",n.value,n.message,e):(n.inclusive||(r.exclusiveMaximum=!0),(0,vI.setResponseValueAndErrors)(r,"maximum",n.value,n.message,e));break;case"multipleOf":(0,vI.setResponseValueAndErrors)(r,"multipleOf",n.value,n.message,e);break}return r}Fse.parseNumberDef=qln});var W1e=v(kse=>{"use strict";Object.defineProperty(kse,"__esModule",{value:!0});kse.parseObjectDef=void 0;var Uln=Te(),V1e=ol();function zln(t,e){return e.removeAdditionalStrategy==="strict"?t.catchall._def.typeName==="ZodNever"?t.unknownKeys!=="strict":(0,V1e.parseDef)(t.catchall._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]})??!0:t.catchall._def.typeName==="ZodNever"?t.unknownKeys==="passthrough":(0,V1e.parseDef)(t.catchall._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]})??!0}function Hln(t,e){let r=e.target==="openAi",n={type:"object",...Object.entries(t.shape()).reduce((o,[i,a])=>{if(a===void 0||a._def===void 0)return o;let s=a.isOptional();s&&r&&(a instanceof Uln.ZodOptional&&(a=a._def.innerType),a.isNullable()||(a=a.nullable()),s=!1);let u=(0,V1e.parseDef)(a._def,{...e,currentPath:[...e.currentPath,"properties",i],propertyPath:[...e.currentPath,"properties",i]});return u===void 0?o:{properties:{...o.properties,[i]:u},required:s?o.required:[...o.required,i]}},{properties:{},required:[]}),additionalProperties:zln(t,e)};return n.required.length||delete n.required,n}kse.parseObjectDef=Hln});var K1e=v($se=>{"use strict";Object.defineProperty($se,"__esModule",{value:!0});$se.parseOptionalDef=void 0;var mkt=ol(),Vln=(t,e)=>{if(e.currentPath.toString()===e.propertyPath?.toString())return(0,mkt.parseDef)(t.innerType._def,e);let r=(0,mkt.parseDef)(t.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","1"]});return r?{anyOf:[{not:{}},r]}:{}};$se.parseOptionalDef=Vln});var G1e=v(qse=>{"use strict";Object.defineProperty(qse,"__esModule",{value:!0});qse.parsePipelineDef=void 0;var Bse=ol(),Wln=(t,e)=>{if(e.pipeStrategy==="input")return(0,Bse.parseDef)(t.in._def,e);if(e.pipeStrategy==="output")return(0,Bse.parseDef)(t.out._def,e);let r=(0,Bse.parseDef)(t.in._def,{...e,currentPath:[...e.currentPath,"allOf","0"]}),n=(0,Bse.parseDef)(t.out._def,{...e,currentPath:[...e.currentPath,"allOf",r?"1":"0"]});return{allOf:[r,n].filter(o=>o!==void 0)}};qse.parsePipelineDef=Wln});var J1e=v(Use=>{"use strict";Object.defineProperty(Use,"__esModule",{value:!0});Use.parsePromiseDef=void 0;var Kln=ol();function Gln(t,e){return(0,Kln.parseDef)(t.type._def,e)}Use.parsePromiseDef=Gln});var Y1e=v(zse=>{"use strict";Object.defineProperty(zse,"__esModule",{value:!0});zse.parseSetDef=void 0;var hkt=bI(),Jln=ol();function Yln(t,e){let n={type:"array",uniqueItems:!0,items:(0,Jln.parseDef)(t.valueType._def,{...e,currentPath:[...e.currentPath,"items"]})};return t.minSize&&(0,hkt.setResponseValueAndErrors)(n,"minItems",t.minSize.value,t.minSize.message,e),t.maxSize&&(0,hkt.setResponseValueAndErrors)(n,"maxItems",t.maxSize.value,t.maxSize.message,e),n}zse.parseSetDef=Yln});var X1e=v(Hse=>{"use strict";Object.defineProperty(Hse,"__esModule",{value:!0});Hse.parseTupleDef=void 0;var Z1e=ol();function Zln(t,e){return t.rest?{type:"array",minItems:t.items.length,items:t.items.map((r,n)=>(0,Z1e.parseDef)(r._def,{...e,currentPath:[...e.currentPath,"items",`${n}`]})).reduce((r,n)=>n===void 0?r:[...r,n],[]),additionalItems:(0,Z1e.parseDef)(t.rest._def,{...e,currentPath:[...e.currentPath,"additionalItems"]})}:{type:"array",minItems:t.items.length,maxItems:t.items.length,items:t.items.map((r,n)=>(0,Z1e.parseDef)(r._def,{...e,currentPath:[...e.currentPath,"items",`${n}`]})).reduce((r,n)=>n===void 0?r:[...r,n],[])}}Hse.parseTupleDef=Zln});var Q1e=v(Vse=>{"use strict";Object.defineProperty(Vse,"__esModule",{value:!0});Vse.parseUndefinedDef=void 0;function Xln(){return{not:{}}}Vse.parseUndefinedDef=Xln});var eje=v(Wse=>{"use strict";Object.defineProperty(Wse,"__esModule",{value:!0});Wse.parseUnknownDef=void 0;function Qln(){return{}}Wse.parseUnknownDef=Qln});var tje=v(Kse=>{"use strict";Object.defineProperty(Kse,"__esModule",{value:!0});Kse.parseReadonlyDef=void 0;var ecn=ol(),tcn=(t,e)=>(0,ecn.parseDef)(t.innerType._def,e);Kse.parseReadonlyDef=tcn});var ol=v(Gse=>{"use strict";Object.defineProperty(Gse,"__esModule",{value:!0});Gse.parseDef=void 0;var jn=Te(),rcn=P1e(),ncn=E1e(),ocn=T1e(),icn=A1e(),acn=vse(),scn=I1e(),ucn=M1e(),lcn=R1e(),ccn=j1e(),dcn=N1e(),fcn=D1e(),pcn=L1e(),mcn=$1e(),hcn=B1e(),gcn=q1e(),ycn=U1e(),bcn=z1e(),_cn=H1e(),vcn=W1e(),wcn=K1e(),Scn=G1e(),xcn=J1e(),Ccn=Ise(),Ocn=Y1e(),Pcn=Tse(),Ecn=X1e(),Tcn=Q1e(),Acn=Dse(),Icn=eje(),Mcn=tje(),Rcn=fse();function gkt(t,e,r=!1){let n=e.seen.get(t);if(e.override){let a=e.override?.(t,e,n,r);if(a!==Rcn.ignoreOverride)return a}if(n&&!r){let a=jcn(n,e);if(a!==void 0)return a}let o={def:t,path:e.currentPath,jsonSchema:void 0};e.seen.set(t,o);let i=Dcn(t,t.typeName,e);return i&&Lcn(t,e,i),o.jsonSchema=i,i}Gse.parseDef=gkt;var jcn=(t,e)=>{switch(e.$refStrategy){case"root":return{$ref:t.path.join("/")};case"relative":return{$ref:Ncn(e.currentPath,t.path)};case"none":case"seen":return t.path.length<e.currentPath.length&&t.path.every((r,n)=>e.currentPath[n]===r)?(console.warn(`Recursive reference detected at ${e.currentPath.join("/")}! Defaulting to any`),{}):e.$refStrategy==="seen"?{}:void 0}},Ncn=(t,e)=>{let r=0;for(;r<t.length&&r<e.length&&t[r]===e[r];r++);return[(t.length-r).toString(),...e.slice(r)].join("/")},Dcn=(t,e,r)=>{switch(e){case jn.ZodFirstPartyTypeKind.ZodString:return(0,Pcn.parseStringDef)(t,r);case jn.ZodFirstPartyTypeKind.ZodNumber:return(0,_cn.parseNumberDef)(t,r);case jn.ZodFirstPartyTypeKind.ZodObject:return(0,vcn.parseObjectDef)(t,r);case jn.ZodFirstPartyTypeKind.ZodBigInt:return(0,ocn.parseBigintDef)(t,r);case jn.ZodFirstPartyTypeKind.ZodBoolean:return(0,icn.parseBooleanDef)();case jn.ZodFirstPartyTypeKind.ZodDate:return(0,ucn.parseDateDef)(t,r);case jn.ZodFirstPartyTypeKind.ZodUndefined:return(0,Tcn.parseUndefinedDef)();case jn.ZodFirstPartyTypeKind.ZodNull:return(0,ycn.parseNullDef)(r);case jn.ZodFirstPartyTypeKind.ZodArray:return(0,ncn.parseArrayDef)(t,r);case jn.ZodFirstPartyTypeKind.ZodUnion:case jn.ZodFirstPartyTypeKind.ZodDiscriminatedUnion:return(0,Acn.parseUnionDef)(t,r);case jn.ZodFirstPartyTypeKind.ZodIntersection:return(0,fcn.parseIntersectionDef)(t,r);case jn.ZodFirstPartyTypeKind.ZodTuple:return(0,Ecn.parseTupleDef)(t,r);case jn.ZodFirstPartyTypeKind.ZodRecord:return(0,Ccn.parseRecordDef)(t,r);case jn.ZodFirstPartyTypeKind.ZodLiteral:return(0,pcn.parseLiteralDef)(t,r);case jn.ZodFirstPartyTypeKind.ZodEnum:return(0,dcn.parseEnumDef)(t);case jn.ZodFirstPartyTypeKind.ZodNativeEnum:return(0,hcn.parseNativeEnumDef)(t);case jn.ZodFirstPartyTypeKind.ZodNullable:return(0,bcn.parseNullableDef)(t,r);case jn.ZodFirstPartyTypeKind.ZodOptional:return(0,wcn.parseOptionalDef)(t,r);case jn.ZodFirstPartyTypeKind.ZodMap:return(0,mcn.parseMapDef)(t,r);case jn.ZodFirstPartyTypeKind.ZodSet:return(0,Ocn.parseSetDef)(t,r);case jn.ZodFirstPartyTypeKind.ZodLazy:return gkt(t.getter()._def,r);case jn.ZodFirstPartyTypeKind.ZodPromise:return(0,xcn.parsePromiseDef)(t,r);case jn.ZodFirstPartyTypeKind.ZodNaN:case jn.ZodFirstPartyTypeKind.ZodNever:return(0,gcn.parseNeverDef)();case jn.ZodFirstPartyTypeKind.ZodEffects:return(0,ccn.parseEffectsDef)(t,r);case jn.ZodFirstPartyTypeKind.ZodAny:return(0,rcn.parseAnyDef)();case jn.ZodFirstPartyTypeKind.ZodUnknown:return(0,Icn.parseUnknownDef)();case jn.ZodFirstPartyTypeKind.ZodDefault:return(0,lcn.parseDefaultDef)(t,r);case jn.ZodFirstPartyTypeKind.ZodBranded:return(0,acn.parseBrandedDef)(t,r);case jn.ZodFirstPartyTypeKind.ZodReadonly:return(0,Mcn.parseReadonlyDef)(t,r);case jn.ZodFirstPartyTypeKind.ZodCatch:return(0,scn.parseCatchDef)(t,r);case jn.ZodFirstPartyTypeKind.ZodPipeline:return(0,Scn.parsePipelineDef)(t,r);case jn.ZodFirstPartyTypeKind.ZodFunction:case jn.ZodFirstPartyTypeKind.ZodVoid:case jn.ZodFirstPartyTypeKind.ZodSymbol:return;default:return(n=>{})(e)}},Lcn=(t,e,r)=>(t.description&&(r.description=t.description,e.markdownDescription&&(r.markdownDescription=t.description)),r)});var rje=v(Jse=>{"use strict";Object.defineProperty(Jse,"__esModule",{value:!0});Jse.zodToJsonSchema=void 0;var ykt=ol(),Fcn=O1e(),kcn=(t,e)=>{let r=(0,Fcn.getRefs)(e),n=typeof e=="object"&&e.definitions?Object.entries(e.definitions).reduce((u,[l,c])=>({...u,[l]:(0,ykt.parseDef)(c._def,{...r,currentPath:[...r.basePath,r.definitionPath,l]},!0)??{}}),{}):void 0,o=typeof e=="string"?e:e?.nameStrategy==="title"?void 0:e?.name,i=(0,ykt.parseDef)(t._def,o===void 0?r:{...r,currentPath:[...r.basePath,r.definitionPath,o]},!1)??{},a=typeof e=="object"&&e.name!==void 0&&e.nameStrategy==="title"?e.name:void 0;a!==void 0&&(i.title=a);let s=o===void 0?n?{...i,[r.definitionPath]:n}:i:{$ref:[...r.$refStrategy==="relative"?[]:r.basePath,r.definitionPath,o].join("/"),[r.definitionPath]:{...n,[o]:i}};return r.target==="jsonSchema7"?s.$schema="http://json-schema.org/draft-07/schema#":(r.target==="jsonSchema2019-09"||r.target==="openAi")&&(s.$schema="https://json-schema.org/draft/2019-09/schema#"),r.target==="openAi"&&("anyOf"in s||"oneOf"in s||"allOf"in s||"type"in s&&Array.isArray(s.type))&&console.warn("Warning: OpenAI may not support schemas with unions as roots! Try wrapping it in an object property."),s};Jse.zodToJsonSchema=kcn});var bkt=v(Xr=>{"use strict";var $cn=Xr&&Xr.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Un=Xr&&Xr.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&$cn(e,t,r)};Object.defineProperty(Xr,"__esModule",{value:!0});Un(fse(),Xr);Un(O1e(),Xr);Un(bI(),Xr);Un(ol(),Xr);Un(P1e(),Xr);Un(E1e(),Xr);Un(T1e(),Xr);Un(A1e(),Xr);Un(vse(),Xr);Un(I1e(),Xr);Un(M1e(),Xr);Un(R1e(),Xr);Un(j1e(),Xr);Un(N1e(),Xr);Un(D1e(),Xr);Un(L1e(),Xr);Un($1e(),Xr);Un(B1e(),Xr);Un(q1e(),Xr);Un(U1e(),Xr);Un(z1e(),Xr);Un(H1e(),Xr);Un(W1e(),Xr);Un(K1e(),Xr);Un(G1e(),Xr);Un(J1e(),Xr);Un(tje(),Xr);Un(Ise(),Xr);Un(Y1e(),Xr);Un(Tse(),Xr);Un(X1e(),Xr);Un(Q1e(),Xr);Un(Dse(),Xr);Un(eje(),Xr);Un(rje(),Xr);var Bcn=rje();Xr.default=Bcn.zodToJsonSchema});var vkt=v(l5=>{"use strict";Object.defineProperty(l5,"__esModule",{value:!0});l5.transformToChatCompletionRequest=Ucn;l5.convertToParsedChatCompletionResponse=zcn;l5.responseFormatFromZodObject=_kt;var qcn=bkt();function Ucn(t){let{responseFormat:e,...r}=t,n=_kt(e);return{...r,responseFormat:n}}function zcn(t,e){if(t.choices===void 0||t.choices.length===0)return{...t,choices:t.choices===void 0?void 0:[]};let r=[];for(let n of t.choices)n.message===null||typeof n.message>"u"?r.push({...n,message:void 0}):n.message.content!==null&&typeof n.message.content<"u"&&!Array.isArray(n.message.content)&&r.push({...n,message:{...n.message,parsed:e.safeParse(JSON.parse(n.message.content)).data}});return{...t,choices:r}}function _kt(t){return{type:"json_schema",jsonSchema:{name:"placeholderName",schemaDefinition:(0,qcn.zodToJsonSchema)(t),strict:!0}}}});var xkt=v(Zse=>{"use strict";Object.defineProperty(Zse,"__esModule",{value:!0});Zse.Chat=void 0;var wkt=ekt(),Skt=nkt(),Hcn=Vm(),Yse=cg(),nje=vkt(),oje=class extends Hcn.ClientSDK{async parse(e,r){let n=(0,nje.transformToChatCompletionRequest)(e),o=await(0,Yse.unwrapAsync)((0,wkt.chatComplete)(this,n,r));return(0,nje.convertToParsedChatCompletionResponse)(o,e.responseFormat)}async parseStream(e,r){let n=(0,nje.transformToChatCompletionRequest)(e);return(0,Yse.unwrapAsync)((0,Skt.chatStream)(this,n,r))}async complete(e,r){return(0,Yse.unwrapAsync)((0,wkt.chatComplete)(this,e,r))}async stream(e,r){return(0,Yse.unwrapAsync)((0,Skt.chatStream)(this,e,r))}};Zse.Chat=oje});var Pkt=v(sP=>{"use strict";var Vcn=sP&&sP.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Wcn=sP&&sP.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),ije=sP&&sP.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&Vcn(e,t,r);return Wcn(e,t),e};Object.defineProperty(sP,"__esModule",{value:!0});sP.classifiersModerate=Xcn;var Kcn=Xo(),c5=ije(Qo()),Gcn=qe(),Jcn=ve(),Ckt=ei(),Ycn=wo(),Okt=ije(Rn()),Zcn=ije(Km());async function Xcn(t,e,r){let n=(0,Jcn.safeParse)(e,y=>Okt.ClassificationRequest$outboundSchema.parse(y),"Input validation failed");if(!n.ok)return n;let o=n.value,i=(0,Kcn.encodeJSON)("body",o,{explode:!0}),a=(0,Ycn.pathToFunc)("/v1/moderations")(),s=new Headers((0,Gcn.compactMap)({"Content-Type":"application/json",Accept:"application/json"})),u=await(0,Ckt.extractSecurity)(t._options.apiKey),l=u==null?{}:{apiKey:u},c=(0,Ckt.resolveGlobalSecurity)(l),d={operationID:"moderations_v1_moderations_post",oAuth2Scopes:[],resolvedSecurity:c,securitySource:t._options.apiKey,retryConfig:r?.retries||t._options.retryConfig||{strategy:"none"},retryCodes:r?.retryCodes||["429","500","502","503","504"]},f=t._createRequest(d,{security:c,method:"POST",baseURL:r?.serverURL,path:a,headers:s,body:i,timeoutMs:r?.timeoutMs||t._options.timeoutMs||-1},r);if(!f.ok)return f;let p=f.value,m=await t._do(p,{context:d,errorCodes:["422","4XX","5XX"],retryConfig:d.retryConfig,retryCodes:d.retryCodes});if(!m.ok)return m;let h=m.value,b={HttpMeta:{Response:h,Request:p}},[g]=await c5.match(c5.json(200,Okt.ClassificationResponse$inboundSchema),c5.jsonErr(422,Zcn.HTTPValidationError$inboundSchema),c5.fail("4XX"),c5.fail("5XX"))(h,{extraFields:b});return g.ok,g}});var Akt=v(uP=>{"use strict";var Qcn=uP&&uP.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),edn=uP&&uP.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),aje=uP&&uP.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&Qcn(e,t,r);return edn(e,t),e};Object.defineProperty(uP,"__esModule",{value:!0});uP.classifiersModerateChat=adn;var tdn=Xo(),d5=aje(Qo()),rdn=qe(),ndn=ve(),Ekt=ei(),odn=wo(),Tkt=aje(Rn()),idn=aje(Km());async function adn(t,e,r){let n=(0,ndn.safeParse)(e,y=>Tkt.ChatClassificationRequest$outboundSchema.parse(y),"Input validation failed");if(!n.ok)return n;let o=n.value,i=(0,tdn.encodeJSON)("body",o,{explode:!0}),a=(0,odn.pathToFunc)("/v1/chat/moderations")(),s=new Headers((0,rdn.compactMap)({"Content-Type":"application/json",Accept:"application/json"})),u=await(0,Ekt.extractSecurity)(t._options.apiKey),l=u==null?{}:{apiKey:u},c=(0,Ekt.resolveGlobalSecurity)(l),d={operationID:"moderations_chat_v1_chat_moderations_post",oAuth2Scopes:[],resolvedSecurity:c,securitySource:t._options.apiKey,retryConfig:r?.retries||t._options.retryConfig||{strategy:"none"},retryCodes:r?.retryCodes||["429","500","502","503","504"]},f=t._createRequest(d,{security:c,method:"POST",baseURL:r?.serverURL,path:a,headers:s,body:i,timeoutMs:r?.timeoutMs||t._options.timeoutMs||-1},r);if(!f.ok)return f;let p=f.value,m=await t._do(p,{context:d,errorCodes:["422","4XX","5XX"],retryConfig:d.retryConfig,retryCodes:d.retryCodes});if(!m.ok)return m;let h=m.value,b={HttpMeta:{Response:h,Request:p}},[g]=await d5.match(d5.json(200,Tkt.ClassificationResponse$inboundSchema),d5.jsonErr(422,idn.HTTPValidationError$inboundSchema),d5.fail("4XX"),d5.fail("5XX"))(h,{extraFields:b});return g.ok,g}});var Mkt=v(Xse=>{"use strict";Object.defineProperty(Xse,"__esModule",{value:!0});Xse.Classifiers=void 0;var sdn=Pkt(),udn=Akt(),ldn=Vm(),Ikt=cg(),sje=class extends ldn.ClientSDK{async moderate(e,r){return(0,Ikt.unwrapAsync)((0,sdn.classifiersModerate)(this,e,r))}async moderateChat(e,r){return(0,Ikt.unwrapAsync)((0,udn.classifiersModerateChat)(this,e,r))}};Xse.Classifiers=sje});var Nkt=v(lP=>{"use strict";var cdn=lP&&lP.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),ddn=lP&&lP.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),uje=lP&&lP.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&cdn(e,t,r);return ddn(e,t),e};Object.defineProperty(lP,"__esModule",{value:!0});lP.embeddingsCreate=ydn;var fdn=Xo(),f5=uje(Qo()),pdn=qe(),mdn=ve(),Rkt=ei(),hdn=wo(),jkt=uje(Rn()),gdn=uje(Km());async function ydn(t,e,r){let n=(0,mdn.safeParse)(e,y=>jkt.EmbeddingRequest$outboundSchema.parse(y),"Input validation failed");if(!n.ok)return n;let o=n.value,i=(0,fdn.encodeJSON)("body",o,{explode:!0}),a=(0,hdn.pathToFunc)("/v1/embeddings")(),s=new Headers((0,pdn.compactMap)({"Content-Type":"application/json",Accept:"application/json"})),u=await(0,Rkt.extractSecurity)(t._options.apiKey),l=u==null?{}:{apiKey:u},c=(0,Rkt.resolveGlobalSecurity)(l),d={operationID:"embeddings_v1_embeddings_post",oAuth2Scopes:[],resolvedSecurity:c,securitySource:t._options.apiKey,retryConfig:r?.retries||t._options.retryConfig||{strategy:"none"},retryCodes:r?.retryCodes||["429","500","502","503","504"]},f=t._createRequest(d,{security:c,method:"POST",baseURL:r?.serverURL,path:a,headers:s,body:i,timeoutMs:r?.timeoutMs||t._options.timeoutMs||-1},r);if(!f.ok)return f;let p=f.value,m=await t._do(p,{context:d,errorCodes:["422","4XX","5XX"],retryConfig:d.retryConfig,retryCodes:d.retryCodes});if(!m.ok)return m;let h=m.value,b={HttpMeta:{Response:h,Request:p}},[g]=await f5.match(f5.json(200,jkt.EmbeddingResponse$inboundSchema),f5.jsonErr(422,gdn.HTTPValidationError$inboundSchema),f5.fail("4XX"),f5.fail("5XX"))(h,{extraFields:b});return g.ok,g}});var Dkt=v(Qse=>{"use strict";Object.defineProperty(Qse,"__esModule",{value:!0});Qse.Embeddings=void 0;var bdn=Nkt(),_dn=Vm(),vdn=cg(),lje=class extends _dn.ClientSDK{async create(e,r){return(0,vdn.unwrapAsync)((0,bdn.embeddingsCreate)(this,e,r))}};Qse.Embeddings=lje});var Fkt=v(cP=>{"use strict";var wdn=cP&&cP.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Sdn=cP&&cP.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),cje=cP&&cP.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&wdn(e,t,r);return Sdn(e,t),e};Object.defineProperty(cP,"__esModule",{value:!0});cP.filesDelete=Adn;var xdn=Xo(),eue=cje(Qo()),Cdn=qe(),Odn=ve(),Lkt=ei(),Pdn=wo(),Edn=cje(Rn()),Tdn=cje(nl());async function Adn(t,e,r){let n=(0,Odn.safeParse)(e,y=>Tdn.FilesApiRoutesDeleteFileRequest$outboundSchema.parse(y),"Input validation failed");if(!n.ok)return n;let o=n.value,i=null,a={file_id:(0,xdn.encodeSimple)("file_id",o.file_id,{explode:!1,charEncoding:"percent"})},s=(0,Pdn.pathToFunc)("/v1/files/{file_id}")(a),u=new Headers((0,Cdn.compactMap)({Accept:"application/json"})),l=await(0,Lkt.extractSecurity)(t._options.apiKey),c=l==null?{}:{apiKey:l},d=(0,Lkt.resolveGlobalSecurity)(c),f={operationID:"files_api_routes_delete_file",oAuth2Scopes:[],resolvedSecurity:d,securitySource:t._options.apiKey,retryConfig:r?.retries||t._options.retryConfig||{strategy:"none"},retryCodes:r?.retryCodes||["429","500","502","503","504"]},p=t._createRequest(f,{security:d,method:"DELETE",baseURL:r?.serverURL,path:s,headers:u,body:i,timeoutMs:r?.timeoutMs||t._options.timeoutMs||-1},r);if(!p.ok)return p;let m=p.value,h=await t._do(m,{context:f,errorCodes:["4XX","5XX"],retryConfig:f.retryConfig,retryCodes:f.retryCodes});if(!h.ok)return h;let b=h.value,[g]=await eue.match(eue.json(200,Edn.DeleteFileOut$inboundSchema),eue.fail("4XX"),eue.fail("5XX"))(b);return g.ok,g}});var $kt=v(dP=>{"use strict";var Idn=dP&&dP.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Mdn=dP&&dP.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),dje=dP&&dP.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&Idn(e,t,r);return Mdn(e,t),e};Object.defineProperty(dP,"__esModule",{value:!0});dP.filesDownload=kdn;var Rdn=dje(Te()),jdn=Xo(),tue=dje(Qo()),Ndn=qe(),Ddn=ve(),kkt=ei(),Ldn=wo(),Fdn=dje(nl());async function kdn(t,e,r){let n=(0,Ddn.safeParse)(e,y=>Fdn.FilesApiRoutesDownloadFileRequest$outboundSchema.parse(y),"Input validation failed");if(!n.ok)return n;let o=n.value,i=null,a={file_id:(0,jdn.encodeSimple)("file_id",o.file_id,{explode:!1,charEncoding:"percent"})},s=(0,Ldn.pathToFunc)("/v1/files/{file_id}/content")(a),u=new Headers((0,Ndn.compactMap)({Accept:"application/octet-stream"})),l=await(0,kkt.extractSecurity)(t._options.apiKey),c=l==null?{}:{apiKey:l},d=(0,kkt.resolveGlobalSecurity)(c),f={operationID:"files_api_routes_download_file",oAuth2Scopes:[],resolvedSecurity:d,securitySource:t._options.apiKey,retryConfig:r?.retries||t._options.retryConfig||{strategy:"none"},retryCodes:r?.retryCodes||["429","500","502","503","504"]},p=t._createRequest(f,{security:d,method:"GET",baseURL:r?.serverURL,path:s,headers:u,body:i,timeoutMs:r?.timeoutMs||t._options.timeoutMs||-1},r);if(!p.ok)return p;let m=p.value,h=await t._do(m,{context:f,errorCodes:["4XX","5XX"],retryConfig:f.retryConfig,retryCodes:f.retryCodes});if(!h.ok)return h;let b=h.value,[g]=await tue.match(tue.stream(200,Rdn.instanceof(ReadableStream)),tue.fail("4XX"),tue.fail("5XX"))(b);return g.ok,g}});var Ukt=v(fP=>{"use strict";var $dn=fP&&fP.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Bdn=fP&&fP.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),fje=fP&&fP.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&$dn(e,t,r);return Bdn(e,t),e};Object.defineProperty(fP,"__esModule",{value:!0});fP.filesGetSignedUrl=Wdn;var Bkt=Xo(),rue=fje(Qo()),qdn=qe(),Udn=ve(),qkt=ei(),zdn=wo(),Hdn=fje(Rn()),Vdn=fje(nl());async function Wdn(t,e,r){let n=(0,Udn.safeParse)(e,w=>Vdn.FilesApiRoutesGetSignedUrlRequest$outboundSchema.parse(w),"Input validation failed");if(!n.ok)return n;let o=n.value,i=null,a={file_id:(0,Bkt.encodeSimple)("file_id",o.file_id,{explode:!1,charEncoding:"percent"})},s=(0,zdn.pathToFunc)("/v1/files/{file_id}/url")(a),u=(0,Bkt.encodeFormQuery)({expiry:o.expiry}),l=new Headers((0,qdn.compactMap)({Accept:"application/json"})),c=await(0,qkt.extractSecurity)(t._options.apiKey),d=c==null?{}:{apiKey:c},f=(0,qkt.resolveGlobalSecurity)(d),p={operationID:"files_api_routes_get_signed_url",oAuth2Scopes:[],resolvedSecurity:f,securitySource:t._options.apiKey,retryConfig:r?.retries||t._options.retryConfig||{strategy:"none"},retryCodes:r?.retryCodes||["429","500","502","503","504"]},m=t._createRequest(p,{security:f,method:"GET",baseURL:r?.serverURL,path:s,headers:l,query:u,body:i,timeoutMs:r?.timeoutMs||t._options.timeoutMs||-1},r);if(!m.ok)return m;let h=m.value,b=await t._do(h,{context:p,errorCodes:["4XX","5XX"],retryConfig:p.retryConfig,retryCodes:p.retryCodes});if(!b.ok)return b;let g=b.value,[y]=await rue.match(rue.json(200,Hdn.FileSignedURL$inboundSchema),rue.fail("4XX"),rue.fail("5XX"))(g);return y.ok,y}});var Hkt=v(pP=>{"use strict";var Kdn=pP&&pP.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Gdn=pP&&pP.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),pje=pP&&pP.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&Kdn(e,t,r);return Gdn(e,t),e};Object.defineProperty(pP,"__esModule",{value:!0});pP.filesList=tfn;var Jdn=Xo(),nue=pje(Qo()),Ydn=qe(),Zdn=ve(),zkt=ei(),Xdn=wo(),Qdn=pje(Rn()),efn=pje(nl());async function tfn(t,e,r){let n=(0,Zdn.safeParse)(e,y=>efn.FilesApiRoutesListFilesRequest$outboundSchema.optional().parse(y),"Input validation failed");if(!n.ok)return n;let o=n.value,i=null,a=(0,Xdn.pathToFunc)("/v1/files")(),s=(0,Jdn.encodeFormQuery)({page:o?.page,page_size:o?.page_size,purpose:o?.purpose,sample_type:o?.sample_type,search:o?.search,source:o?.source}),u=new Headers((0,Ydn.compactMap)({Accept:"application/json"})),l=await(0,zkt.extractSecurity)(t._options.apiKey),c=l==null?{}:{apiKey:l},d=(0,zkt.resolveGlobalSecurity)(c),f={operationID:"files_api_routes_list_files",oAuth2Scopes:[],resolvedSecurity:d,securitySource:t._options.apiKey,retryConfig:r?.retries||t._options.retryConfig||{strategy:"none"},retryCodes:r?.retryCodes||["429","500","502","503","504"]},p=t._createRequest(f,{security:d,method:"GET",baseURL:r?.serverURL,path:a,headers:u,query:s,body:i,timeoutMs:r?.timeoutMs||t._options.timeoutMs||-1},r);if(!p.ok)return p;let m=p.value,h=await t._do(m,{context:f,errorCodes:["4XX","5XX"],retryConfig:f.retryConfig,retryCodes:f.retryCodes});if(!h.ok)return h;let b=h.value,[g]=await nue.match(nue.json(200,Qdn.ListFilesOut$inboundSchema),nue.fail("4XX"),nue.fail("5XX"))(b);return g.ok,g}});var Wkt=v(mP=>{"use strict";var rfn=mP&&mP.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),nfn=mP&&mP.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),mje=mP&&mP.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&rfn(e,t,r);return nfn(e,t),e};Object.defineProperty(mP,"__esModule",{value:!0});mP.filesRetrieve=cfn;var ofn=Xo(),oue=mje(Qo()),ifn=qe(),afn=ve(),Vkt=ei(),sfn=wo(),ufn=mje(Rn()),lfn=mje(nl());async function cfn(t,e,r){let n=(0,afn.safeParse)(e,y=>lfn.FilesApiRoutesRetrieveFileRequest$outboundSchema.parse(y),"Input validation failed");if(!n.ok)return n;let o=n.value,i=null,a={file_id:(0,ofn.encodeSimple)("file_id",o.file_id,{explode:!1,charEncoding:"percent"})},s=(0,sfn.pathToFunc)("/v1/files/{file_id}")(a),u=new Headers((0,ifn.compactMap)({Accept:"application/json"})),l=await(0,Vkt.extractSecurity)(t._options.apiKey),c=l==null?{}:{apiKey:l},d=(0,Vkt.resolveGlobalSecurity)(c),f={operationID:"files_api_routes_retrieve_file",oAuth2Scopes:[],resolvedSecurity:d,securitySource:t._options.apiKey,retryConfig:r?.retries||t._options.retryConfig||{strategy:"none"},retryCodes:r?.retryCodes||["429","500","502","503","504"]},p=t._createRequest(f,{security:d,method:"GET",baseURL:r?.serverURL,path:s,headers:u,body:i,timeoutMs:r?.timeoutMs||t._options.timeoutMs||-1},r);if(!p.ok)return p;let m=p.value,h=await t._do(m,{context:f,errorCodes:["4XX","5XX"],retryConfig:f.retryConfig,retryCodes:f.retryCodes});if(!h.ok)return h;let b=h.value,[g]=await oue.match(oue.json(200,ufn.RetrieveFileOut$inboundSchema),oue.fail("4XX"),oue.fail("5XX"))(b);return g.ok,g}});var Kkt=v(hje=>{"use strict";Object.defineProperty(hje,"__esModule",{value:!0});hje.isReadableStream=dfn;function dfn(t){if(typeof t!="object"||t===null)return!1;let e=t;return typeof e.getReader=="function"&&typeof e.cancel=="function"&&typeof e.tee=="function"}});var Jkt=v(hP=>{"use strict";var ffn=hP&&hP.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),pfn=hP&&hP.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),gje=hP&&hP.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&ffn(e,t,r);return pfn(e,t),e};Object.defineProperty(hP,"__esModule",{value:!0});hP.filesUpload=Sfn;var iue=Xo(),mfn=XMe(),aue=gje(Qo()),hfn=qe(),gfn=ve(),Gkt=ei(),yfn=wo(),bfn=gje(Rn()),_fn=gje(nl()),vfn=b1e(),wfn=Kkt();async function Sfn(t,e,r){let n=(0,gfn.safeParse)(e,g=>_fn.FilesApiRoutesUploadFileMultiPartBodyParams$outboundSchema.parse(g),"Input validation failed");if(!n.ok)return n;let o=n.value,i=new FormData;if((0,vfn.isBlobLike)(o.file))(0,iue.appendForm)(i,"file",o.file);else if((0,wfn.isReadableStream)(o.file.content)){let g=await(0,mfn.readableStreamToArrayBuffer)(o.file.content),y=new Blob([g],{type:"application/octet-stream"});(0,iue.appendForm)(i,"file",y)}else(0,iue.appendForm)(i,"file",new Blob([o.file.content],{type:"application/octet-stream"}),o.file.fileName);o.purpose!==void 0&&(0,iue.appendForm)(i,"purpose",o.purpose);let a=(0,yfn.pathToFunc)("/v1/files")(),s=new Headers((0,hfn.compactMap)({Accept:"application/json"})),u=await(0,Gkt.extractSecurity)(t._options.apiKey),l=u==null?{}:{apiKey:u},c=(0,Gkt.resolveGlobalSecurity)(l),d={operationID:"files_api_routes_upload_file",oAuth2Scopes:[],resolvedSecurity:c,securitySource:t._options.apiKey,retryConfig:r?.retries||t._options.retryConfig||{strategy:"none"},retryCodes:r?.retryCodes||["429","500","502","503","504"]},f=t._createRequest(d,{security:c,method:"POST",baseURL:r?.serverURL,path:a,headers:s,body:i,timeoutMs:r?.timeoutMs||t._options.timeoutMs||-1},r);if(!f.ok)return f;let p=f.value,m=await t._do(p,{context:d,errorCodes:["4XX","5XX"],retryConfig:d.retryConfig,retryCodes:d.retryCodes});if(!m.ok)return m;let h=m.value,[b]=await aue.match(aue.json(200,bfn.UploadFileOut$inboundSchema),aue.fail("4XX"),aue.fail("5XX"))(h);return b.ok,b}});var Ykt=v(sue=>{"use strict";Object.defineProperty(sue,"__esModule",{value:!0});sue.Files=void 0;var xfn=Fkt(),Cfn=$kt(),Ofn=Ukt(),Pfn=Hkt(),Efn=Wkt(),Tfn=Jkt(),Afn=Vm(),Qq=cg(),yje=class extends Afn.ClientSDK{async upload(e,r){return(0,Qq.unwrapAsync)((0,Tfn.filesUpload)(this,e,r))}async list(e,r){return(0,Qq.unwrapAsync)((0,Pfn.filesList)(this,e,r))}async retrieve(e,r){return(0,Qq.unwrapAsync)((0,Efn.filesRetrieve)(this,e,r))}async delete(e,r){return(0,Qq.unwrapAsync)((0,xfn.filesDelete)(this,e,r))}async download(e,r){return(0,Qq.unwrapAsync)((0,Cfn.filesDownload)(this,e,r))}async getSignedUrl(e,r){return(0,Qq.unwrapAsync)((0,Ofn.filesGetSignedUrl)(this,e,r))}};sue.Files=yje});var Qkt=v(gP=>{"use strict";var Ifn=gP&&gP.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Mfn=gP&&gP.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),bje=gP&&gP.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&Ifn(e,t,r);return Mfn(e,t),e};Object.defineProperty(gP,"__esModule",{value:!0});gP.fimComplete=Ffn;var Rfn=Xo(),p5=bje(Qo()),jfn=qe(),Nfn=ve(),Zkt=ei(),Dfn=wo(),Xkt=bje(Rn()),Lfn=bje(Km());async function Ffn(t,e,r){let n=(0,Nfn.safeParse)(e,y=>Xkt.FIMCompletionRequest$outboundSchema.parse(y),"Input validation failed");if(!n.ok)return n;let o=n.value,i=(0,Rfn.encodeJSON)("body",o,{explode:!0}),a=(0,Dfn.pathToFunc)("/v1/fim/completions")(),s=new Headers((0,jfn.compactMap)({"Content-Type":"application/json",Accept:"application/json"})),u=await(0,Zkt.extractSecurity)(t._options.apiKey),l=u==null?{}:{apiKey:u},c=(0,Zkt.resolveGlobalSecurity)(l),d={operationID:"fim_completion_v1_fim_completions_post",oAuth2Scopes:[],resolvedSecurity:c,securitySource:t._options.apiKey,retryConfig:r?.retries||t._options.retryConfig||{strategy:"none"},retryCodes:r?.retryCodes||["429","500","502","503","504"]},f=t._createRequest(d,{security:c,method:"POST",baseURL:r?.serverURL,path:a,headers:s,body:i,timeoutMs:r?.timeoutMs||t._options.timeoutMs||-1},r);if(!f.ok)return f;let p=f.value,m=await t._do(p,{context:d,errorCodes:["422","4XX","5XX"],retryConfig:d.retryConfig,retryCodes:d.retryCodes});if(!m.ok)return m;let h=m.value,b={HttpMeta:{Response:h,Request:p}},[g]=await p5.match(p5.json(200,Xkt.FIMCompletionResponse$inboundSchema),p5.jsonErr(422,Lfn.HTTPValidationError$inboundSchema),p5.fail("4XX"),p5.fail("5XX"))(h,{extraFields:b});return g.ok,g}});var r$t=v(yP=>{"use strict";var kfn=yP&&yP.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),$fn=yP&&yP.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),uue=yP&&yP.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&kfn(e,t,r);return $fn(e,t),e};Object.defineProperty(yP,"__esModule",{value:!0});yP.fimStream=Kfn;var Bfn=uue(Te()),qfn=Xo(),Ufn=G6(),m5=uue(Qo()),zfn=qe(),Hfn=ve(),e$t=ei(),Vfn=wo(),t$t=uue(Rn()),Wfn=uue(Km());async function Kfn(t,e,r){let n=(0,Hfn.safeParse)(e,y=>t$t.FIMCompletionStreamRequest$outboundSchema.parse(y),"Input validation failed");if(!n.ok)return n;let o=n.value,i=(0,qfn.encodeJSON)("body",o,{explode:!0}),a=(0,Vfn.pathToFunc)("/v1/fim/completions#stream")(),s=new Headers((0,zfn.compactMap)({"Content-Type":"application/json",Accept:"text/event-stream"})),u=await(0,e$t.extractSecurity)(t._options.apiKey),l=u==null?{}:{apiKey:u},c=(0,e$t.resolveGlobalSecurity)(l),d={operationID:"stream_fim",oAuth2Scopes:[],resolvedSecurity:c,securitySource:t._options.apiKey,retryConfig:r?.retries||t._options.retryConfig||{strategy:"none"},retryCodes:r?.retryCodes||["429","500","502","503","504"]},f=t._createRequest(d,{security:c,method:"POST",baseURL:r?.serverURL,path:a,headers:s,body:i,timeoutMs:r?.timeoutMs||t._options.timeoutMs||-1},r);if(!f.ok)return f;let p=f.value,m=await t._do(p,{context:d,errorCodes:["422","4XX","5XX"],retryConfig:d.retryConfig,retryCodes:d.retryCodes});if(!m.ok)return m;let h=m.value,b={HttpMeta:{Response:h,Request:p}},[g]=await m5.match(m5.sse(200,Bfn.instanceof(ReadableStream).transform(y=>new Ufn.EventStream({stream:y,decoder(w){return t$t.CompletionEvent$inboundSchema.parse(w)}})),{sseSentinel:"[DONE]"}),m5.jsonErr(422,Wfn.HTTPValidationError$inboundSchema),m5.fail("4XX"),m5.fail("5XX"))(h,{extraFields:b});return g.ok,g}});var o$t=v(lue=>{"use strict";Object.defineProperty(lue,"__esModule",{value:!0});lue.Fim=void 0;var Gfn=Qkt(),Jfn=r$t(),Yfn=Vm(),n$t=cg(),_je=class extends Yfn.ClientSDK{async complete(e,r){return(0,n$t.unwrapAsync)((0,Gfn.fimComplete)(this,e,r))}async stream(e,r){return(0,n$t.unwrapAsync)((0,Jfn.fimStream)(this,e,r))}};lue.Fim=_je});var a$t=v(bP=>{"use strict";var Zfn=bP&&bP.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Xfn=bP&&bP.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),vje=bP&&bP.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&Zfn(e,t,r);return Xfn(e,t),e};Object.defineProperty(bP,"__esModule",{value:!0});bP.fineTuningJobsCancel=ipn;var Qfn=Xo(),cue=vje(Qo()),epn=qe(),tpn=ve(),i$t=ei(),rpn=wo(),npn=vje(Rn()),opn=vje(nl());async function ipn(t,e,r){let n=(0,tpn.safeParse)(e,y=>opn.JobsApiRoutesFineTuningCancelFineTuningJobRequest$outboundSchema.parse(y),"Input validation failed");if(!n.ok)return n;let o=n.value,i=null,a={job_id:(0,Qfn.encodeSimple)("job_id",o.job_id,{explode:!1,charEncoding:"percent"})},s=(0,rpn.pathToFunc)("/v1/fine_tuning/jobs/{job_id}/cancel")(a),u=new Headers((0,epn.compactMap)({Accept:"application/json"})),l=await(0,i$t.extractSecurity)(t._options.apiKey),c=l==null?{}:{apiKey:l},d=(0,i$t.resolveGlobalSecurity)(c),f={operationID:"jobs_api_routes_fine_tuning_cancel_fine_tuning_job",oAuth2Scopes:[],resolvedSecurity:d,securitySource:t._options.apiKey,retryConfig:r?.retries||t._options.retryConfig||{strategy:"none"},retryCodes:r?.retryCodes||["429","500","502","503","504"]},p=t._createRequest(f,{security:d,method:"POST",baseURL:r?.serverURL,path:s,headers:u,body:i,timeoutMs:r?.timeoutMs||t._options.timeoutMs||-1},r);if(!p.ok)return p;let m=p.value,h=await t._do(m,{context:f,errorCodes:["4XX","5XX"],retryConfig:f.retryConfig,retryCodes:f.retryCodes});if(!h.ok)return h;let b=h.value,[g]=await cue.match(cue.json(200,npn.DetailedJobOut$inboundSchema),cue.fail("4XX"),cue.fail("5XX"))(b);return g.ok,g}});var u$t=v(_P=>{"use strict";var apn=_P&&_P.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),spn=_P&&_P.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),wje=_P&&_P.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&apn(e,t,r);return spn(e,t),e};Object.defineProperty(_P,"__esModule",{value:!0});_P.fineTuningJobsCreate=mpn;var upn=Xo(),due=wje(Qo()),lpn=qe(),cpn=ve(),s$t=ei(),dpn=wo(),fpn=wje(Rn()),ppn=wje(nl());async function mpn(t,e,r){let n=(0,cpn.safeParse)(e,g=>fpn.JobIn$outboundSchema.parse(g),"Input validation failed");if(!n.ok)return n;let o=n.value,i=(0,upn.encodeJSON)("body",o,{explode:!0}),a=(0,dpn.pathToFunc)("/v1/fine_tuning/jobs")(),s=new Headers((0,lpn.compactMap)({"Content-Type":"application/json",Accept:"application/json"})),u=await(0,s$t.extractSecurity)(t._options.apiKey),l=u==null?{}:{apiKey:u},c=(0,s$t.resolveGlobalSecurity)(l),d={operationID:"jobs_api_routes_fine_tuning_create_fine_tuning_job",oAuth2Scopes:[],resolvedSecurity:c,securitySource:t._options.apiKey,retryConfig:r?.retries||t._options.retryConfig||{strategy:"none"},retryCodes:r?.retryCodes||["429","500","502","503","504"]},f=t._createRequest(d,{security:c,method:"POST",baseURL:r?.serverURL,path:a,headers:s,body:i,timeoutMs:r?.timeoutMs||t._options.timeoutMs||-1},r);if(!f.ok)return f;let p=f.value,m=await t._do(p,{context:d,errorCodes:["4XX","5XX"],retryConfig:d.retryConfig,retryCodes:d.retryCodes});if(!m.ok)return m;let h=m.value,[b]=await due.match(due.json(200,ppn.JobsApiRoutesFineTuningCreateFineTuningJobResponse$inboundSchema),due.fail("4XX"),due.fail("5XX"))(h);return b.ok,b}});var c$t=v(vP=>{"use strict";var hpn=vP&&vP.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),gpn=vP&&vP.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Sje=vP&&vP.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&hpn(e,t,r);return gpn(e,t),e};Object.defineProperty(vP,"__esModule",{value:!0});vP.fineTuningJobsGet=xpn;var ypn=Xo(),fue=Sje(Qo()),bpn=qe(),_pn=ve(),l$t=ei(),vpn=wo(),wpn=Sje(Rn()),Spn=Sje(nl());async function xpn(t,e,r){let n=(0,_pn.safeParse)(e,y=>Spn.JobsApiRoutesFineTuningGetFineTuningJobRequest$outboundSchema.parse(y),"Input validation failed");if(!n.ok)return n;let o=n.value,i=null,a={job_id:(0,ypn.encodeSimple)("job_id",o.job_id,{explode:!1,charEncoding:"percent"})},s=(0,vpn.pathToFunc)("/v1/fine_tuning/jobs/{job_id}")(a),u=new Headers((0,bpn.compactMap)({Accept:"application/json"})),l=await(0,l$t.extractSecurity)(t._options.apiKey),c=l==null?{}:{apiKey:l},d=(0,l$t.resolveGlobalSecurity)(c),f={operationID:"jobs_api_routes_fine_tuning_get_fine_tuning_job",oAuth2Scopes:[],resolvedSecurity:d,securitySource:t._options.apiKey,retryConfig:r?.retries||t._options.retryConfig||{strategy:"none"},retryCodes:r?.retryCodes||["429","500","502","503","504"]},p=t._createRequest(f,{security:d,method:"GET",baseURL:r?.serverURL,path:s,headers:u,body:i,timeoutMs:r?.timeoutMs||t._options.timeoutMs||-1},r);if(!p.ok)return p;let m=p.value,h=await t._do(m,{context:f,errorCodes:["4XX","5XX"],retryConfig:f.retryConfig,retryCodes:f.retryCodes});if(!h.ok)return h;let b=h.value,[g]=await fue.match(fue.json(200,wpn.DetailedJobOut$inboundSchema),fue.fail("4XX"),fue.fail("5XX"))(b);return g.ok,g}});var f$t=v(wP=>{"use strict";var Cpn=wP&&wP.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Opn=wP&&wP.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),xje=wP&&wP.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&Cpn(e,t,r);return Opn(e,t),e};Object.defineProperty(wP,"__esModule",{value:!0});wP.fineTuningJobsList=Rpn;var Ppn=Xo(),pue=xje(Qo()),Epn=qe(),Tpn=ve(),d$t=ei(),Apn=wo(),Ipn=xje(Rn()),Mpn=xje(nl());async function Rpn(t,e,r){let n=(0,Tpn.safeParse)(e,y=>Mpn.JobsApiRoutesFineTuningGetFineTuningJobsRequest$outboundSchema.optional().parse(y),"Input validation failed");if(!n.ok)return n;let o=n.value,i=null,a=(0,Apn.pathToFunc)("/v1/fine_tuning/jobs")(),s=(0,Ppn.encodeFormQuery)({created_after:o?.created_after,created_by_me:o?.created_by_me,model:o?.model,page:o?.page,page_size:o?.page_size,status:o?.status,suffix:o?.suffix,wandb_name:o?.wandb_name,wandb_project:o?.wandb_project}),u=new Headers((0,Epn.compactMap)({Accept:"application/json"})),l=await(0,d$t.extractSecurity)(t._options.apiKey),c=l==null?{}:{apiKey:l},d=(0,d$t.resolveGlobalSecurity)(c),f={operationID:"jobs_api_routes_fine_tuning_get_fine_tuning_jobs",oAuth2Scopes:[],resolvedSecurity:d,securitySource:t._options.apiKey,retryConfig:r?.retries||t._options.retryConfig||{strategy:"none"},retryCodes:r?.retryCodes||["429","500","502","503","504"]},p=t._createRequest(f,{security:d,method:"GET",baseURL:r?.serverURL,path:a,headers:u,query:s,body:i,timeoutMs:r?.timeoutMs||t._options.timeoutMs||-1},r);if(!p.ok)return p;let m=p.value,h=await t._do(m,{context:f,errorCodes:["4XX","5XX"],retryConfig:f.retryConfig,retryCodes:f.retryCodes});if(!h.ok)return h;let b=h.value,[g]=await pue.match(pue.json(200,Ipn.JobsOut$inboundSchema),pue.fail("4XX"),pue.fail("5XX"))(b);return g.ok,g}});var m$t=v(SP=>{"use strict";var jpn=SP&&SP.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Npn=SP&&SP.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Cje=SP&&SP.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&jpn(e,t,r);return Npn(e,t),e};Object.defineProperty(SP,"__esModule",{value:!0});SP.fineTuningJobsStart=qpn;var Dpn=Xo(),mue=Cje(Qo()),Lpn=qe(),Fpn=ve(),p$t=ei(),kpn=wo(),$pn=Cje(Rn()),Bpn=Cje(nl());async function qpn(t,e,r){let n=(0,Fpn.safeParse)(e,y=>Bpn.JobsApiRoutesFineTuningStartFineTuningJobRequest$outboundSchema.parse(y),"Input validation failed");if(!n.ok)return n;let o=n.value,i=null,a={job_id:(0,Dpn.encodeSimple)("job_id",o.job_id,{explode:!1,charEncoding:"percent"})},s=(0,kpn.pathToFunc)("/v1/fine_tuning/jobs/{job_id}/start")(a),u=new Headers((0,Lpn.compactMap)({Accept:"application/json"})),l=await(0,p$t.extractSecurity)(t._options.apiKey),c=l==null?{}:{apiKey:l},d=(0,p$t.resolveGlobalSecurity)(c),f={operationID:"jobs_api_routes_fine_tuning_start_fine_tuning_job",oAuth2Scopes:[],resolvedSecurity:d,securitySource:t._options.apiKey,retryConfig:r?.retries||t._options.retryConfig||{strategy:"none"},retryCodes:r?.retryCodes||["429","500","502","503","504"]},p=t._createRequest(f,{security:d,method:"POST",baseURL:r?.serverURL,path:s,headers:u,body:i,timeoutMs:r?.timeoutMs||t._options.timeoutMs||-1},r);if(!p.ok)return p;let m=p.value,h=await t._do(m,{context:f,errorCodes:["4XX","5XX"],retryConfig:f.retryConfig,retryCodes:f.retryCodes});if(!h.ok)return h;let b=h.value,[g]=await mue.match(mue.json(200,$pn.DetailedJobOut$inboundSchema),mue.fail("4XX"),mue.fail("5XX"))(b);return g.ok,g}});var h$t=v(hue=>{"use strict";Object.defineProperty(hue,"__esModule",{value:!0});hue.Jobs=void 0;var Upn=a$t(),zpn=u$t(),Hpn=c$t(),Vpn=f$t(),Wpn=m$t(),Kpn=Vm(),h5=cg(),Oje=class extends Kpn.ClientSDK{async list(e,r){return(0,h5.unwrapAsync)((0,Vpn.fineTuningJobsList)(this,e,r))}async create(e,r){return(0,h5.unwrapAsync)((0,zpn.fineTuningJobsCreate)(this,e,r))}async get(e,r){return(0,h5.unwrapAsync)((0,Hpn.fineTuningJobsGet)(this,e,r))}async cancel(e,r){return(0,h5.unwrapAsync)((0,Upn.fineTuningJobsCancel)(this,e,r))}async start(e,r){return(0,h5.unwrapAsync)((0,Wpn.fineTuningJobsStart)(this,e,r))}};hue.Jobs=Oje});var g$t=v(gue=>{"use strict";Object.defineProperty(gue,"__esModule",{value:!0});gue.FineTuning=void 0;var Gpn=Vm(),Jpn=h$t(),Pje=class extends Gpn.ClientSDK{get jobs(){return this._jobs??(this._jobs=new Jpn.Jobs(this._options))}};gue.FineTuning=Pje});var b$t=v(xP=>{"use strict";var Ypn=xP&&xP.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Zpn=xP&&xP.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Eje=xP&&xP.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&Ypn(e,t,r);return Zpn(e,t),e};Object.defineProperty(xP,"__esModule",{value:!0});xP.modelsArchive=omn;var Xpn=Xo(),yue=Eje(Qo()),Qpn=qe(),emn=ve(),y$t=ei(),tmn=wo(),rmn=Eje(Rn()),nmn=Eje(nl());async function omn(t,e,r){let n=(0,emn.safeParse)(e,y=>nmn.JobsApiRoutesFineTuningArchiveFineTunedModelRequest$outboundSchema.parse(y),"Input validation failed");if(!n.ok)return n;let o=n.value,i=null,a={model_id:(0,Xpn.encodeSimple)("model_id",o.model_id,{explode:!1,charEncoding:"percent"})},s=(0,tmn.pathToFunc)("/v1/fine_tuning/models/{model_id}/archive")(a),u=new Headers((0,Qpn.compactMap)({Accept:"application/json"})),l=await(0,y$t.extractSecurity)(t._options.apiKey),c=l==null?{}:{apiKey:l},d=(0,y$t.resolveGlobalSecurity)(c),f={operationID:"jobs_api_routes_fine_tuning_archive_fine_tuned_model",oAuth2Scopes:[],resolvedSecurity:d,securitySource:t._options.apiKey,retryConfig:r?.retries||t._options.retryConfig||{strategy:"none"},retryCodes:r?.retryCodes||["429","500","502","503","504"]},p=t._createRequest(f,{security:d,method:"POST",baseURL:r?.serverURL,path:s,headers:u,body:i,timeoutMs:r?.timeoutMs||t._options.timeoutMs||-1},r);if(!p.ok)return p;let m=p.value,h=await t._do(m,{context:f,errorCodes:["4XX","5XX"],retryConfig:f.retryConfig,retryCodes:f.retryCodes});if(!h.ok)return h;let b=h.value,[g]=await yue.match(yue.json(200,rmn.ArchiveFTModelOut$inboundSchema),yue.fail("4XX"),yue.fail("5XX"))(b);return g.ok,g}});var v$t=v(CP=>{"use strict";var imn=CP&&CP.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),amn=CP&&CP.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),bue=CP&&CP.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&imn(e,t,r);return amn(e,t),e};Object.defineProperty(CP,"__esModule",{value:!0});CP.modelsDelete=mmn;var smn=Xo(),g5=bue(Qo()),umn=qe(),lmn=ve(),_$t=ei(),cmn=wo(),dmn=bue(Rn()),fmn=bue(Km()),pmn=bue(nl());async function mmn(t,e,r){let n=(0,lmn.safeParse)(e,w=>pmn.DeleteModelV1ModelsModelIdDeleteRequest$outboundSchema.parse(w),"Input validation failed");if(!n.ok)return n;let o=n.value,i=null,a={model_id:(0,smn.encodeSimple)("model_id",o.model_id,{explode:!1,charEncoding:"percent"})},s=(0,cmn.pathToFunc)("/v1/models/{model_id}")(a),u=new Headers((0,umn.compactMap)({Accept:"application/json"})),l=await(0,_$t.extractSecurity)(t._options.apiKey),c=l==null?{}:{apiKey:l},d=(0,_$t.resolveGlobalSecurity)(c),f={operationID:"delete_model_v1_models__model_id__delete",oAuth2Scopes:[],resolvedSecurity:d,securitySource:t._options.apiKey,retryConfig:r?.retries||t._options.retryConfig||{strategy:"none"},retryCodes:r?.retryCodes||["429","500","502","503","504"]},p=t._createRequest(f,{security:d,method:"DELETE",baseURL:r?.serverURL,path:s,headers:u,body:i,timeoutMs:r?.timeoutMs||t._options.timeoutMs||-1},r);if(!p.ok)return p;let m=p.value,h=await t._do(m,{context:f,errorCodes:["422","4XX","5XX"],retryConfig:f.retryConfig,retryCodes:f.retryCodes});if(!h.ok)return h;let b=h.value,g={HttpMeta:{Response:b,Request:m}},[y]=await g5.match(g5.json(200,dmn.DeleteModelOut$inboundSchema),g5.jsonErr(422,fmn.HTTPValidationError$inboundSchema),g5.fail("4XX"),g5.fail("5XX"))(b,{extraFields:g});return y.ok,y}});var S$t=v(OP=>{"use strict";var hmn=OP&&OP.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),gmn=OP&&OP.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Tje=OP&&OP.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&hmn(e,t,r);return gmn(e,t),e};Object.defineProperty(OP,"__esModule",{value:!0});OP.modelsList=wmn;var y5=Tje(Qo()),ymn=qe(),w$t=ei(),bmn=wo(),_mn=Tje(Rn()),vmn=Tje(Km());async function wmn(t,e){let r=(0,bmn.pathToFunc)("/v1/models")(),n=new Headers((0,ymn.compactMap)({Accept:"application/json"})),o=await(0,w$t.extractSecurity)(t._options.apiKey),i=o==null?{}:{apiKey:o},a=(0,w$t.resolveGlobalSecurity)(i),s={operationID:"list_models_v1_models_get",oAuth2Scopes:[],resolvedSecurity:a,securitySource:t._options.apiKey,retryConfig:e?.retries||t._options.retryConfig||{strategy:"none"},retryCodes:e?.retryCodes||["429","500","502","503","504"]},u=t._createRequest(s,{security:a,method:"GET",baseURL:e?.serverURL,path:r,headers:n,timeoutMs:e?.timeoutMs||t._options.timeoutMs||-1},e);if(!u.ok)return u;let l=u.value,c=await t._do(l,{context:s,errorCodes:["422","4XX","5XX"],retryConfig:s.retryConfig,retryCodes:s.retryCodes});if(!c.ok)return c;let d=c.value,f={HttpMeta:{Response:d,Request:l}},[p]=await y5.match(y5.json(200,_mn.ModelList$inboundSchema),y5.jsonErr(422,vmn.HTTPValidationError$inboundSchema),y5.fail("4XX"),y5.fail("5XX"))(d,{extraFields:f});return p.ok,p}});var O$t=v(PP=>{"use strict";var Smn=PP&&PP.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),xmn=PP&&PP.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Aje=PP&&PP.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&Smn(e,t,r);return xmn(e,t),e};Object.defineProperty(PP,"__esModule",{value:!0});PP.modelsRetrieve=Amn;var Cmn=Xo(),b5=Aje(Qo()),Omn=qe(),Pmn=ve(),x$t=ei(),Emn=wo(),Tmn=Aje(Km()),C$t=Aje(nl());async function Amn(t,e,r){let n=(0,Pmn.safeParse)(e,w=>C$t.RetrieveModelV1ModelsModelIdGetRequest$outboundSchema.parse(w),"Input validation failed");if(!n.ok)return n;let o=n.value,i=null,a={model_id:(0,Cmn.encodeSimple)("model_id",o.model_id,{explode:!1,charEncoding:"percent"})},s=(0,Emn.pathToFunc)("/v1/models/{model_id}")(a),u=new Headers((0,Omn.compactMap)({Accept:"application/json"})),l=await(0,x$t.extractSecurity)(t._options.apiKey),c=l==null?{}:{apiKey:l},d=(0,x$t.resolveGlobalSecurity)(c),f={operationID:"retrieve_model_v1_models__model_id__get",oAuth2Scopes:[],resolvedSecurity:d,securitySource:t._options.apiKey,retryConfig:r?.retries||t._options.retryConfig||{strategy:"none"},retryCodes:r?.retryCodes||["429","500","502","503","504"]},p=t._createRequest(f,{security:d,method:"GET",baseURL:r?.serverURL,path:s,headers:u,body:i,timeoutMs:r?.timeoutMs||t._options.timeoutMs||-1},r);if(!p.ok)return p;let m=p.value,h=await t._do(m,{context:f,errorCodes:["422","4XX","5XX"],retryConfig:f.retryConfig,retryCodes:f.retryCodes});if(!h.ok)return h;let b=h.value,g={HttpMeta:{Response:b,Request:m}},[y]=await b5.match(b5.json(200,C$t.RetrieveModelV1ModelsModelIdGetResponseRetrieveModelV1ModelsModelIdGet$inboundSchema),b5.jsonErr(422,Tmn.HTTPValidationError$inboundSchema),b5.fail("4XX"),b5.fail("5XX"))(b,{extraFields:g});return y.ok,y}});var E$t=v(EP=>{"use strict";var Imn=EP&&EP.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Mmn=EP&&EP.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Ije=EP&&EP.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&Imn(e,t,r);return Mmn(e,t),e};Object.defineProperty(EP,"__esModule",{value:!0});EP.modelsUnarchive=kmn;var Rmn=Xo(),_ue=Ije(Qo()),jmn=qe(),Nmn=ve(),P$t=ei(),Dmn=wo(),Lmn=Ije(Rn()),Fmn=Ije(nl());async function kmn(t,e,r){let n=(0,Nmn.safeParse)(e,y=>Fmn.JobsApiRoutesFineTuningUnarchiveFineTunedModelRequest$outboundSchema.parse(y),"Input validation failed");if(!n.ok)return n;let o=n.value,i=null,a={model_id:(0,Rmn.encodeSimple)("model_id",o.model_id,{explode:!1,charEncoding:"percent"})},s=(0,Dmn.pathToFunc)("/v1/fine_tuning/models/{model_id}/archive")(a),u=new Headers((0,jmn.compactMap)({Accept:"application/json"})),l=await(0,P$t.extractSecurity)(t._options.apiKey),c=l==null?{}:{apiKey:l},d=(0,P$t.resolveGlobalSecurity)(c),f={operationID:"jobs_api_routes_fine_tuning_unarchive_fine_tuned_model",oAuth2Scopes:[],resolvedSecurity:d,securitySource:t._options.apiKey,retryConfig:r?.retries||t._options.retryConfig||{strategy:"none"},retryCodes:r?.retryCodes||["429","500","502","503","504"]},p=t._createRequest(f,{security:d,method:"DELETE",baseURL:r?.serverURL,path:s,headers:u,body:i,timeoutMs:r?.timeoutMs||t._options.timeoutMs||-1},r);if(!p.ok)return p;let m=p.value,h=await t._do(m,{context:f,errorCodes:["4XX","5XX"],retryConfig:f.retryConfig,retryCodes:f.retryCodes});if(!h.ok)return h;let b=h.value,[g]=await _ue.match(_ue.json(200,Lmn.UnarchiveFTModelOut$inboundSchema),_ue.fail("4XX"),_ue.fail("5XX"))(b);return g.ok,g}});var I$t=v(TP=>{"use strict";var $mn=TP&&TP.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Bmn=TP&&TP.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Mje=TP&&TP.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&$mn(e,t,r);return Bmn(e,t),e};Object.defineProperty(TP,"__esModule",{value:!0});TP.modelsUpdate=Wmn;var T$t=Xo(),vue=Mje(Qo()),qmn=qe(),Umn=ve(),A$t=ei(),zmn=wo(),Hmn=Mje(Rn()),Vmn=Mje(nl());async function Wmn(t,e,r){let n=(0,Umn.safeParse)(e,y=>Vmn.JobsApiRoutesFineTuningUpdateFineTunedModelRequest$outboundSchema.parse(y),"Input validation failed");if(!n.ok)return n;let o=n.value,i=(0,T$t.encodeJSON)("body",o.UpdateFTModelIn,{explode:!0}),a={model_id:(0,T$t.encodeSimple)("model_id",o.model_id,{explode:!1,charEncoding:"percent"})},s=(0,zmn.pathToFunc)("/v1/fine_tuning/models/{model_id}")(a),u=new Headers((0,qmn.compactMap)({"Content-Type":"application/json",Accept:"application/json"})),l=await(0,A$t.extractSecurity)(t._options.apiKey),c=l==null?{}:{apiKey:l},d=(0,A$t.resolveGlobalSecurity)(c),f={operationID:"jobs_api_routes_fine_tuning_update_fine_tuned_model",oAuth2Scopes:[],resolvedSecurity:d,securitySource:t._options.apiKey,retryConfig:r?.retries||t._options.retryConfig||{strategy:"none"},retryCodes:r?.retryCodes||["429","500","502","503","504"]},p=t._createRequest(f,{security:d,method:"PATCH",baseURL:r?.serverURL,path:s,headers:u,body:i,timeoutMs:r?.timeoutMs||t._options.timeoutMs||-1},r);if(!p.ok)return p;let m=p.value,h=await t._do(m,{context:f,errorCodes:["4XX","5XX"],retryConfig:f.retryConfig,retryCodes:f.retryCodes});if(!h.ok)return h;let b=h.value,[g]=await vue.match(vue.json(200,Hmn.FTModelOut$inboundSchema),vue.fail("4XX"),vue.fail("5XX"))(b);return g.ok,g}});var M$t=v(wue=>{"use strict";Object.defineProperty(wue,"__esModule",{value:!0});wue.Models=void 0;var Kmn=b$t(),Gmn=v$t(),Jmn=S$t(),Ymn=O$t(),Zmn=E$t(),Xmn=I$t(),Qmn=Vm(),eU=cg(),Rje=class extends Qmn.ClientSDK{async list(e){return(0,eU.unwrapAsync)((0,Jmn.modelsList)(this,e))}async retrieve(e,r){return(0,eU.unwrapAsync)((0,Ymn.modelsRetrieve)(this,e,r))}async delete(e,r){return(0,eU.unwrapAsync)((0,Gmn.modelsDelete)(this,e,r))}async update(e,r){return(0,eU.unwrapAsync)((0,Xmn.modelsUpdate)(this,e,r))}async archive(e,r){return(0,eU.unwrapAsync)((0,Kmn.modelsArchive)(this,e,r))}async unarchive(e,r){return(0,eU.unwrapAsync)((0,Zmn.modelsUnarchive)(this,e,r))}};wue.Models=Rje});var R$t=v(Sue=>{"use strict";Object.defineProperty(Sue,"__esModule",{value:!0});Sue.Mistral=void 0;var ehn=Vm(),thn=SLt(),rhn=ZFt(),nhn=xkt(),ohn=Mkt(),ihn=Dkt(),ahn=Ykt(),shn=o$t(),uhn=g$t(),lhn=M$t(),jje=class extends ehn.ClientSDK{get models(){return this._models??(this._models=new lhn.Models(this._options))}get files(){return this._files??(this._files=new ahn.Files(this._options))}get fineTuning(){return this._fineTuning??(this._fineTuning=new uhn.FineTuning(this._options))}get batch(){return this._batch??(this._batch=new rhn.Batch(this._options))}get chat(){return this._chat??(this._chat=new nhn.Chat(this._options))}get fim(){return this._fim??(this._fim=new shn.Fim(this._options))}get agents(){return this._agents??(this._agents=new thn.Agents(this._options))}get embeddings(){return this._embeddings??(this._embeddings=new ihn.Embeddings(this._options))}get classifiers(){return this._classifiers??(this._classifiers=new ohn.Classifiers(this._options))}};Sue.Mistral=jje});var D$t=v(Vp=>{"use strict";var j$t=Vp&&Vp.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),chn=Vp&&Vp.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),N$t=Vp&&Vp.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&j$t(e,t,r)},dhn=Vp&&Vp.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&j$t(e,t,r);return chn(e,t),e};Object.defineProperty(Vp,"__esModule",{value:!0});Vp.files=void 0;N$t(bie(),Vp);Vp.files=dhn(XMe());N$t(R$t(),Vp)});var G$t=O(()=>{fE()});var J$t=O(()=>{$d();G$t();um();Rm()});var Y$t=O(()=>{Yg()});var Hje=O(()=>{Rm();yE();um();J$t();Y$t()});var Z$t={};Zf(Z$t,{AutocompleteCache:()=>E5});var E5,Vje=O(()=>{Ko();E5=class t{constructor(){this.cache=new Map,this.maxSize=200,this.ttlMs=10*60*1e3}static getInstance(){return t.instance||(t.instance=new t),t.instance}get(e){let r=this.cache.get(e);if(r){if(Date.now()-r.timestamp>this.ttlMs){this.cache.delete(e);return}return r.response}}set(e,r){if(this.cache.size>=this.maxSize){let n=this.cache.keys().next().value;this.cache.delete(n)}this.cache.set(e,{response:r,timestamp:Date.now()}),ie(`[AutocompleteCache] Cached response for key: ${e.slice(0,50)}...`)}clear(){this.cache.clear(),ie("[AutocompleteCache] Cleared autocomplete cache")}generateSentenceKey(e,r,n){let o={prefix:e.slice(-100),noteContext:r.slice(-200),relevantNotes:n.slice(0,100)};return`sentence:${JSON.stringify(o)}`}generateWordKey(e,r,n){let o={contextPrefix:e.slice(-50),contextSuffix:r.slice(0,50),words:n.slice(0,5)};return`word:${JSON.stringify(o)}`}getStats(){return{size:this.cache.size,maxSize:this.maxSize,ttlMs:this.ttlMs}}}});var M2t=v((wni,I2t)=>{"use strict";var V_n="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";I2t.exports=V_n});var D2t=v((Sni,N2t)=>{"use strict";var W_n=M2t();function R2t(){}function j2t(){}j2t.resetWarningCache=R2t;N2t.exports=function(){function t(n,o,i,a,s,u){if(u!==W_n){var l=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}t.isRequired=t;function e(){return t}var r={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:j2t,resetWarningCache:R2t};return r.PropTypes=r,r}});var F2t=v((Oni,L2t)=>{L2t.exports=D2t()();var xni,Cni});var z2t=v(IDe=>{"use strict";IDe.__esModule=!0;IDe.default=function(t,e){if(t&&e){var r=Array.isArray(e)?e:e.split(",");if(r.length===0)return!0;var n=t.name||"",o=(t.type||"").toLowerCase(),i=o.replace(/\/.*$/,"");return r.some(function(a){var s=a.trim().toLowerCase();return s.charAt(0)==="."?n.toLowerCase().endsWith(s):s.endsWith("/*")?i===s.replace(/\/.*$/,""):o===s})}return!0}});var $Pn={};Zf($Pn,{default:()=>_de});module.exports=Rl($Pn);kr();var Qme=F(mp()),z4e=require("obsidian"),mG=null;function E2(){return z4e.Platform.isDesktop&&mG||(mG=require("electron")?.remote?.safeStorage),mG}var ehe="enc_desk_",the="enc_web_",nhe="enc_",gG="dec_",_rr=new TextEncoder().encode("obsidian-copilot-v1"),hG={name:"AES-GCM",iv:new Uint8Array(12)};async function rhe(){return await crypto.subtle.importKey("raw",_rr,hG.name,!1,["encrypt","decrypt"])}async function H4e(t){if(!t.enableEncryption)return t;let e={...t},r=Object.keys(t).filter(n=>n.toLowerCase().includes("apikey")||n==="plusLicenseKey");for(let n of r){let o=t[n];e[n]=await Xme(o)}return Array.isArray(t.activeModels)&&(e.activeModels=await Promise.all(t.activeModels.map(async n=>({...n,apiKey:await Xme(n.apiKey||"")})))),Array.isArray(t.activeEmbeddingModels)&&(e.activeEmbeddingModels=await Promise.all(t.activeEmbeddingModels.map(async n=>({...n,apiKey:await Xme(n.apiKey||"")})))),e}async function Xme(t){if(!t||t.startsWith(nhe))return t;V4e(t)&&(t=t.replace(gG,""));try{if(E2()?.isEncryptionAvailable()){let o=E2().encryptString(t);return ehe+o.toString("base64")}let e=await rhe(),r=new TextEncoder().encode(t),n=await crypto.subtle.encrypt(hG,e,r);return the+wrr(n)}catch(e){return console.error("Encryption failed:",e),t}}async function Gn(t){if(!t||vrr(t))return t;if(V4e(t))return t.replace(gG,"");if(t.startsWith(ehe)){let r=t.replace(ehe,""),n=Qme.Buffer.from(r,"base64");return E2().decryptString(n)}if(t.startsWith(the)){let r=t.replace(the,""),n=await rhe(),o=U4e(r),i=await crypto.subtle.decrypt(hG,n,o);return new TextDecoder().decode(i)}let e=t.replace(nhe,"");try{if(E2()?.isEncryptionAvailable())try{let i=Qme.Buffer.from(e,"base64");return E2().decryptString(i)}catch{}let r=await rhe(),n=U4e(e),o=await crypto.subtle.decrypt(hG,r,n);return new TextDecoder().decode(o)}catch(r){return console.error("Decryption failed:",r),"Copilot failed to decrypt API keys!"}}function vrr(t){return!t.startsWith(nhe)&&!t.startsWith(gG)}function V4e(t){return t.startsWith(gG)}function wrr(t){let e=new Uint8Array(t),r="";for(let n=0;n<e.byteLength;n++)r+=String.fromCharCode(e[n]);return window.btoa(r)}function U4e(t){let e=window.atob(t),r=new Uint8Array(e.length);for(let n=0;n<e.length;n++)r[n]=e.charCodeAt(n);return r.buffer}Ko();xd();tr();_2();var W4e=hh(null),bG=hh(t=>{let e=t(W4e);return e!==null?e:t(nR).defaultModelKey},(t,e,r)=>{e(W4e,r)}),K4e=hh(null),_G=hh(t=>{let e=t(K4e);return e!==null?e:t(nR).defaultChainType},(t,e,r)=>{e(K4e,r)}),yG=hh(null),G4e=hh(!1),ohe=hh([]);function J4e(t){rs.set(bG,t)}function vG(){return rs.get(bG)}function Y4e(t){return rs.sub(bG,t)}function $L(){return b2(bG,{store:rs})}function Sh(){return rs.get(_G)}function dR(t){rs.set(_G,t)}function Z4e(t){return rs.sub(_G,t)}function Xg(){return b2(_G,{store:rs})}function fR(t){rs.set(yG,t)}function yc(){return rs.get(yG)}function BL(t){return rs.sub(yG,()=>{t(rs.get(yG))})}function CE(t){rs.set(G4e,t)}function X4e(){return b2(G4e,{store:rs})}function pR(){return Sh()==="project"}function ihe(t){rs.set(ohe,t)}function wG(){return rs.get(ohe)}function Q4e(t){let e=wG();ihe([...e,t])}function e3e(t){let e=wG();ihe(e.filter(r=>r.id!==t))}function t3e(){ihe([])}function r3e(){return b2(ohe,{store:rs})}xd();var Jb=F(X()),G8e=require("obsidian"),J8e=F(wc());var zJ=F(X());var gl=F(X(),1);var Cor=F(X(),1);function C8e(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function O8e(...t){return e=>{let r=!1,n=t.map(o=>{let i=C8e(o,e);return!r&&typeof i=="function"&&(r=!0),i});if(r)return()=>{for(let o=0;o<n.length;o++){let i=n[o];typeof i=="function"?i():C8e(t[o],null)}}}}var gF=F(ft(),1);function PC(t){let e=Mor(t),r=gl.forwardRef((n,o)=>{let{children:i,...a}=n,s=gl.Children.toArray(i),u=s.find(Ror);if(u){let l=u.props.children,c=s.map(d=>d===u?gl.Children.count(l)>1?gl.Children.only(null):gl.isValidElement(l)?l.props.children:null:d);return(0,gF.jsx)(e,{...a,ref:o,children:gl.isValidElement(l)?gl.cloneElement(l,void 0,c):null})}return(0,gF.jsx)(e,{...a,ref:o,children:i})});return r.displayName=`${t}.Slot`,r}var A8e=PC("Slot");function Mor(t){let e=gl.forwardRef((r,n)=>{let{children:o,...i}=r;if(gl.isValidElement(o)){let a=Nor(o),s=jor(i,o.props);return o.type!==gl.Fragment&&(s.ref=n?O8e(n,a):a),gl.cloneElement(o,s)}return gl.Children.count(o)>1?gl.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var I8e=Symbol("radix.slottable");function M8e(t){let e=({children:r})=>(0,gF.jsx)(gF.Fragment,{children:r});return e.displayName=`${t}.Slottable`,e.__radixId=I8e,e}function Ror(t){return gl.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===I8e}function jor(t,e){let r={...e};for(let n in e){let o=t[n],i=e[n];/^on[A-Z]/.test(n)?o&&i?r[n]=(...s)=>{let u=i(...s);return o(...s),u}:o&&(r[n]=o):n==="style"?r[n]={...o,...i}:n==="className"&&(r[n]=[o,i].filter(Boolean).join(" "))}return{...t,...r}}function Nor(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,r=e&&"isReactWarning"in e&&e.isReactWarning;return r?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,r=e&&"isReactWarning"in e&&e.isReactWarning,r?t.props.ref:t.props.ref||t.ref)}function R8e(t){var e,r,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t)){var o=t.length;for(e=0;e<o;e++)t[e]&&(r=R8e(t[e]))&&(n&&(n+=" "),n+=r)}else for(r in t)t[r]&&(n&&(n+=" "),n+=r);return n}function UJ(){for(var t,e,r=0,n="",o=arguments.length;r<o;r++)(t=arguments[r])&&(e=R8e(t))&&(n&&(n+=" "),n+=e);return n}var j8e=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,N8e=UJ,yF=(t,e)=>r=>{var n;if(e?.variants==null)return N8e(t,r?.class,r?.className);let{variants:o,defaultVariants:i}=e,a=Object.keys(o).map(l=>{let c=r?.[l],d=i?.[l];if(c===null)return null;let f=j8e(c)||j8e(d);return o[l][f]}),s=r&&Object.entries(r).reduce((l,c)=>{let[d,f]=c;return f===void 0||(l[d]=f),l},{}),u=e==null||(n=e.compoundVariants)===null||n===void 0?void 0:n.reduce((l,c)=>{let{class:d,className:f,...p}=c;return Object.entries(p).every(m=>{let[h,b]=m;return Array.isArray(b)?b.includes({...i,...s}[h]):{...i,...s}[h]===b})?[...l,d,f]:l},[]);return N8e(t,a,u,r?.class,r?.className)};var Sye="-",Dor=t=>{let e=For(t),{conflictingClassGroups:r,conflictingClassGroupModifiers:n}=t;return{getClassGroupId:a=>{let s=a.split(Sye);return s[0]===""&&s.length!==1&&s.shift(),$8e(s,e)||Lor(a)},getConflictingClassGroupIds:(a,s)=>{let u=r[a]||[];return s&&n[a]?[...u,...n[a]]:u}}},$8e=(t,e)=>{if(t.length===0)return e.classGroupId;let r=t[0],n=e.nextPart.get(r),o=n?$8e(t.slice(1),n):void 0;if(o)return o;if(e.validators.length===0)return;let i=t.join(Sye);return e.validators.find(({validator:a})=>a(i))?.classGroupId},D8e=/^\[(.+)\]$/,Lor=t=>{if(D8e.test(t)){let e=D8e.exec(t)[1],r=e?.substring(0,e.indexOf(":"));if(r)return"arbitrary.."+r}},For=t=>{let{theme:e,prefix:r}=t,n={nextPart:new Map,validators:[]};return $or(Object.entries(t.classGroups),r).forEach(([i,a])=>{wye(a,n,i,e)}),n},wye=(t,e,r,n)=>{t.forEach(o=>{if(typeof o=="string"){let i=o===""?e:L8e(e,o);i.classGroupId=r;return}if(typeof o=="function"){if(kor(o)){wye(o(n),e,r,n);return}e.validators.push({validator:o,classGroupId:r});return}Object.entries(o).forEach(([i,a])=>{wye(a,L8e(e,i),r,n)})})},L8e=(t,e)=>{let r=t;return e.split(Sye).forEach(n=>{r.nextPart.has(n)||r.nextPart.set(n,{nextPart:new Map,validators:[]}),r=r.nextPart.get(n)}),r},kor=t=>t.isThemeGetter,$or=(t,e)=>e?t.map(([r,n])=>{let o=n.map(i=>typeof i=="string"?e+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([a,s])=>[e+a,s])):i);return[r,o]}):t,Bor=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,r=new Map,n=new Map,o=(i,a)=>{r.set(i,a),e++,e>t&&(e=0,n=r,r=new Map)};return{get(i){let a=r.get(i);if(a!==void 0)return a;if((a=n.get(i))!==void 0)return o(i,a),a},set(i,a){r.has(i)?r.set(i,a):o(i,a)}}},B8e="!",qor=t=>{let{separator:e,experimentalParseClassName:r}=t,n=e.length===1,o=e[0],i=e.length,a=s=>{let u=[],l=0,c=0,d;for(let b=0;b<s.length;b++){let g=s[b];if(l===0){if(g===o&&(n||s.slice(b,b+i)===e)){u.push(s.slice(c,b)),c=b+i;continue}if(g==="/"){d=b;continue}}g==="["?l++:g==="]"&&l--}let f=u.length===0?s:s.substring(c),p=f.startsWith(B8e),m=p?f.substring(1):f,h=d&&d>c?d-c:void 0;return{modifiers:u,hasImportantModifier:p,baseClassName:m,maybePostfixModifierPosition:h}};return r?s=>r({className:s,parseClassName:a}):a},Uor=t=>{if(t.length<=1)return t;let e=[],r=[];return t.forEach(n=>{n[0]==="["?(e.push(...r.sort(),n),r=[]):r.push(n)}),e.push(...r.sort()),e},zor=t=>({cache:Bor(t.cacheSize),parseClassName:qor(t),...Dor(t)}),Hor=/\s+/,Vor=(t,e)=>{let{parseClassName:r,getClassGroupId:n,getConflictingClassGroupIds:o}=e,i=[],a=t.trim().split(Hor),s="";for(let u=a.length-1;u>=0;u-=1){let l=a[u],{modifiers:c,hasImportantModifier:d,baseClassName:f,maybePostfixModifierPosition:p}=r(l),m=!!p,h=n(m?f.substring(0,p):f);if(!h){if(!m){s=l+(s.length>0?" "+s:s);continue}if(h=n(f),!h){s=l+(s.length>0?" "+s:s);continue}m=!1}let b=Uor(c).join(":"),g=d?b+B8e:b,y=g+h;if(i.includes(y))continue;i.push(y);let w=o(h,m);for(let S=0;S<w.length;++S){let C=w[S];i.push(g+C)}s=l+(s.length>0?" "+s:s)}return s};function Wor(){let t=0,e,r,n="";for(;t<arguments.length;)(e=arguments[t++])&&(r=q8e(e))&&(n&&(n+=" "),n+=r);return n}var q8e=t=>{if(typeof t=="string")return t;let e,r="";for(let n=0;n<t.length;n++)t[n]&&(e=q8e(t[n]))&&(r&&(r+=" "),r+=e);return r};function F8e(t,...e){let r,n,o,i=a;function a(u){let l=e.reduce((c,d)=>d(c),t());return r=zor(l),n=r.cache.get,o=r.cache.set,i=s,s(u)}function s(u){let l=n(u);if(l)return l;let c=Vor(u,r);return o(u,c),c}return function(){return i(Wor.apply(null,arguments))}}var ta=t=>{let e=r=>r[t]||[];return e.isThemeGetter=!0,e},U8e=/^\[(?:([a-z-]+):)?(.+)\]$/i,Kor=/^\d+\/\d+$/,Gor=new Set(["px","full","screen"]),Jor=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Yor=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Zor=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,Xor=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Qor=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,EC=t=>bF(t)||Gor.has(t)||Kor.test(t),WE=t=>_F(t,"length",sir),bF=t=>!!t&&!Number.isNaN(Number(t)),vye=t=>_F(t,"number",bF),_4=t=>!!t&&Number.isInteger(Number(t)),eir=t=>t.endsWith("%")&&bF(t.slice(0,-1)),en=t=>U8e.test(t),KE=t=>Jor.test(t),tir=new Set(["length","size","percentage"]),rir=t=>_F(t,tir,z8e),nir=t=>_F(t,"position",z8e),oir=new Set(["image","url"]),iir=t=>_F(t,oir,lir),air=t=>_F(t,"",uir),v4=()=>!0,_F=(t,e,r)=>{let n=U8e.exec(t);return n?n[1]?typeof e=="string"?n[1]===e:e.has(n[1]):r(n[2]):!1},sir=t=>Yor.test(t)&&!Zor.test(t),z8e=()=>!1,uir=t=>Xor.test(t),lir=t=>Qor.test(t);var k8e=()=>{let t=ta("colors"),e=ta("spacing"),r=ta("blur"),n=ta("brightness"),o=ta("borderColor"),i=ta("borderRadius"),a=ta("borderSpacing"),s=ta("borderWidth"),u=ta("contrast"),l=ta("grayscale"),c=ta("hueRotate"),d=ta("invert"),f=ta("gap"),p=ta("gradientColorStops"),m=ta("gradientColorStopPositions"),h=ta("inset"),b=ta("margin"),g=ta("opacity"),y=ta("padding"),w=ta("saturate"),S=ta("scale"),C=ta("sepia"),P=ta("skew"),E=ta("space"),A=ta("translate"),I=()=>["auto","contain","none"],R=()=>["auto","hidden","clip","visible","scroll"],j=()=>["auto",en,e],N=()=>[en,e],$=()=>["",EC,WE],k=()=>["auto",bF,en],H=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],V=()=>["solid","dashed","dotted","double","none"],Q=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],G=()=>["start","end","center","between","around","evenly","stretch"],D=()=>["","0",en],B=()=>["auto","avoid","all","avoid-page","page","left","right","column"],q=()=>[bF,en];return{cacheSize:500,separator:":",theme:{colors:[v4],spacing:[EC,WE],blur:["none","",KE,en],brightness:q(),borderColor:[t],borderRadius:["none","","full",KE,en],borderSpacing:N(),borderWidth:$(),contrast:q(),grayscale:D(),hueRotate:q(),invert:D(),gap:N(),gradientColorStops:[t],gradientColorStopPositions:[eir,WE],inset:j(),margin:j(),opacity:q(),padding:N(),saturate:q(),scale:q(),sepia:D(),skew:q(),space:N(),translate:N()},classGroups:{aspect:[{aspect:["auto","square","video",en]}],container:["container"],columns:[{columns:[KE]}],"break-after":[{"break-after":B()}],"break-before":[{"break-before":B()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...H(),en]}],overflow:[{overflow:R()}],"overflow-x":[{"overflow-x":R()}],"overflow-y":[{"overflow-y":R()}],overscroll:[{overscroll:I()}],"overscroll-x":[{"overscroll-x":I()}],"overscroll-y":[{"overscroll-y":I()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[h]}],"inset-x":[{"inset-x":[h]}],"inset-y":[{"inset-y":[h]}],start:[{start:[h]}],end:[{end:[h]}],top:[{top:[h]}],right:[{right:[h]}],bottom:[{bottom:[h]}],left:[{left:[h]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",_4,en]}],basis:[{basis:j()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",en]}],grow:[{grow:D()}],shrink:[{shrink:D()}],order:[{order:["first","last","none",_4,en]}],"grid-cols":[{"grid-cols":[v4]}],"col-start-end":[{col:["auto",{span:["full",_4,en]},en]}],"col-start":[{"col-start":k()}],"col-end":[{"col-end":k()}],"grid-rows":[{"grid-rows":[v4]}],"row-start-end":[{row:["auto",{span:[_4,en]},en]}],"row-start":[{"row-start":k()}],"row-end":[{"row-end":k()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",en]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",en]}],gap:[{gap:[f]}],"gap-x":[{"gap-x":[f]}],"gap-y":[{"gap-y":[f]}],"justify-content":[{justify:["normal",...G()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...G(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...G(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[y]}],px:[{px:[y]}],py:[{py:[y]}],ps:[{ps:[y]}],pe:[{pe:[y]}],pt:[{pt:[y]}],pr:[{pr:[y]}],pb:[{pb:[y]}],pl:[{pl:[y]}],m:[{m:[b]}],mx:[{mx:[b]}],my:[{my:[b]}],ms:[{ms:[b]}],me:[{me:[b]}],mt:[{mt:[b]}],mr:[{mr:[b]}],mb:[{mb:[b]}],ml:[{ml:[b]}],"space-x":[{"space-x":[E]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[E]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",en,e]}],"min-w":[{"min-w":[en,e,"min","max","fit"]}],"max-w":[{"max-w":[en,e,"none","full","min","max","fit","prose",{screen:[KE]},KE]}],h:[{h:[en,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[en,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[en,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[en,e,"auto","min","max","fit"]}],"font-size":[{text:["base",KE,WE]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",vye]}],"font-family":[{font:[v4]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",en]}],"line-clamp":[{"line-clamp":["none",bF,vye]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",EC,en]}],"list-image":[{"list-image":["none",en]}],"list-style-type":[{list:["none","disc","decimal",en]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[g]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[g]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...V(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",EC,WE]}],"underline-offset":[{"underline-offset":["auto",EC,en]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:N()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",en]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",en]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[g]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...H(),nir]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",rir]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},iir]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[m]}],"gradient-via-pos":[{via:[m]}],"gradient-to-pos":[{to:[m]}],"gradient-from":[{from:[p]}],"gradient-via":[{via:[p]}],"gradient-to":[{to:[p]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[s]}],"border-w-x":[{"border-x":[s]}],"border-w-y":[{"border-y":[s]}],"border-w-s":[{"border-s":[s]}],"border-w-e":[{"border-e":[s]}],"border-w-t":[{"border-t":[s]}],"border-w-r":[{"border-r":[s]}],"border-w-b":[{"border-b":[s]}],"border-w-l":[{"border-l":[s]}],"border-opacity":[{"border-opacity":[g]}],"border-style":[{border:[...V(),"hidden"]}],"divide-x":[{"divide-x":[s]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[s]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[g]}],"divide-style":[{divide:V()}],"border-color":[{border:[o]}],"border-color-x":[{"border-x":[o]}],"border-color-y":[{"border-y":[o]}],"border-color-s":[{"border-s":[o]}],"border-color-e":[{"border-e":[o]}],"border-color-t":[{"border-t":[o]}],"border-color-r":[{"border-r":[o]}],"border-color-b":[{"border-b":[o]}],"border-color-l":[{"border-l":[o]}],"divide-color":[{divide:[o]}],"outline-style":[{outline:["",...V()]}],"outline-offset":[{"outline-offset":[EC,en]}],"outline-w":[{outline:[EC,WE]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:$()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[g]}],"ring-offset-w":[{"ring-offset":[EC,WE]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",KE,air]}],"shadow-color":[{shadow:[v4]}],opacity:[{opacity:[g]}],"mix-blend":[{"mix-blend":[...Q(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":Q()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[n]}],contrast:[{contrast:[u]}],"drop-shadow":[{"drop-shadow":["","none",KE,en]}],grayscale:[{grayscale:[l]}],"hue-rotate":[{"hue-rotate":[c]}],invert:[{invert:[d]}],saturate:[{saturate:[w]}],sepia:[{sepia:[C]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[u]}],"backdrop-grayscale":[{"backdrop-grayscale":[l]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[c]}],"backdrop-invert":[{"backdrop-invert":[d]}],"backdrop-opacity":[{"backdrop-opacity":[g]}],"backdrop-saturate":[{"backdrop-saturate":[w]}],"backdrop-sepia":[{"backdrop-sepia":[C]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[a]}],"border-spacing-x":[{"border-spacing-x":[a]}],"border-spacing-y":[{"border-spacing-y":[a]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",en]}],duration:[{duration:q()}],ease:[{ease:["linear","in","out","in-out",en]}],delay:[{delay:q()}],animate:[{animate:["none","spin","ping","pulse","bounce",en]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[S]}],"scale-x":[{"scale-x":[S]}],"scale-y":[{"scale-y":[S]}],rotate:[{rotate:[_4,en]}],"translate-x":[{"translate-x":[A]}],"translate-y":[{"translate-y":[A]}],"skew-x":[{"skew-x":[P]}],"skew-y":[{"skew-y":[P]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",en]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",en]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":N()}],"scroll-mx":[{"scroll-mx":N()}],"scroll-my":[{"scroll-my":N()}],"scroll-ms":[{"scroll-ms":N()}],"scroll-me":[{"scroll-me":N()}],"scroll-mt":[{"scroll-mt":N()}],"scroll-mr":[{"scroll-mr":N()}],"scroll-mb":[{"scroll-mb":N()}],"scroll-ml":[{"scroll-ml":N()}],"scroll-p":[{"scroll-p":N()}],"scroll-px":[{"scroll-px":N()}],"scroll-py":[{"scroll-py":N()}],"scroll-ps":[{"scroll-ps":N()}],"scroll-pe":[{"scroll-pe":N()}],"scroll-pt":[{"scroll-pt":N()}],"scroll-pr":[{"scroll-pr":N()}],"scroll-pb":[{"scroll-pb":N()}],"scroll-pl":[{"scroll-pl":N()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",en]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[EC,WE,vye]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},cir=(t,{cacheSize:e,prefix:r,separator:n,experimentalParseClassName:o,extend:i={},override:a={}})=>{w4(t,"cacheSize",e),w4(t,"prefix",r),w4(t,"separator",n),w4(t,"experimentalParseClassName",o);for(let s in a)dir(t[s],a[s]);for(let s in i)fir(t[s],i[s]);return t},w4=(t,e,r)=>{r!==void 0&&(t[e]=r)},dir=(t,e)=>{if(e)for(let r in e)w4(t,r,e[r])},fir=(t,e)=>{if(e)for(let r in e){let n=e[r];n!==void 0&&(t[r]=(t[r]||[]).concat(n))}},H8e=(t,...e)=>typeof t=="function"?F8e(k8e,t,...e):F8e(()=>cir(k8e(),t),...e);var pir=H8e({prefix:"tw-",extend:{classGroups:{"text-color":["text-muted","text-success","text-warning","text-error","text-accent"],"font-size":["text-smallest","text-smaller","text-small","text-ui-smaller","text-ui-small","text-ui-medium","text-ui-larger"]}}});function _e(...t){return pir(UJ(t))}var mir=yF("tw-inline-flex tw-items-center tw-justify-center tw-gap-1 tw-whitespace-nowrap tw-rounded-md tw-text-sm tw-font-medium tw-transition-colors focus-visible:tw-outline-none focus-visible:tw-ring-1 focus-visible:tw-ring-ring disabled:tw-pointer-events-none disabled:tw-opacity-50 [&_svg]:tw-shrink-0",{variants:{variant:{default:"mod-cta tw-bg-interactive-accent tw-text-on-accent tw-shadow hover:tw-bg-interactive-accent-hover",destructive:"clickable-icon tw-bg-modifier-error tw-text-on-accent hover:tw-bg-modifier-error hover:tw-text-on-accent",secondary:"tw-bg-secondary tw-text-normal tw-shadow-sm hover:tw-bg-interactive-hover",ghost:"clickable-icon tw-bg-transparent hover:tw-bg-interactive-accent hover:tw-text-on-accent",link:"tw-text-accent tw-underline-offset-4 hover:tw-underline",success:"clickable-icon tw-bg-modifier-success tw-text-on-accent hover:tw-bg-modifier-success hover:tw-text-on-accent",ghost2:"clickable-icon tw-bg-transparent tw-text-faint tw-outline-none hover:tw-bg-transparent hover:tw-bg-opacity-100 hover:tw-text-normal focus-visible:tw-text-normal focus-visible:tw-outline-none focus-visible:tw-ring-0"},size:{default:"tw-h-9 tw-px-4 tw-py-2",sm:"tw-h-6 tw-rounded-md tw-px-3 tw-text-xs",lg:"tw-h-10 tw-rounded-md tw-px-8",icon:"tw-size-7",fit:"tw-gap-1 tw-px-1 tw-text-xs"}},defaultVariants:{variant:"default",size:"default"}}),ge=zJ.forwardRef(({className:t,variant:e,size:r,asChild:n=!1,...o},i)=>zJ.createElement(n?A8e:"button",{className:_e(mir({variant:e,size:r,className:t})),ref:i,...o}));ge.displayName="Button";kr();var VJ=F(X());var V8e=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),HJ=(...t)=>t.filter((e,r,n)=>!!e&&e.trim()!==""&&n.indexOf(e)===r).join(" ").trim();var S4=F(X());var W8e={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};var K8e=(0,S4.forwardRef)(({color:t="currentColor",size:e=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:o="",children:i,iconNode:a,...s},u)=>(0,S4.createElement)("svg",{ref:u,...W8e,width:e,height:e,stroke:t,strokeWidth:n?Number(r)*24/Number(e):r,className:HJ("lucide",o),...s},[...a.map(([l,c])=>(0,S4.createElement)(l,c)),...Array.isArray(i)?i:[i]]));var Se=(t,e)=>{let r=(0,VJ.forwardRef)(({className:n,...o},i)=>(0,VJ.createElement)(K8e,{ref:i,iconNode:e,className:HJ(`lucide-${V8e(t)}`,n),...o}));return r.displayName=`${t}`,r};var TC=Se("ArrowBigUp",[["path",{d:"M9 18v-6H5l7-7 7 7h-4v6H9z",key:"1x06kx"}]]);var x4=Se("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);var AR=Se("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);var kl=Se("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);var ki=Se("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);var AC=Se("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);var sy=Se("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);var oi=Se("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);var hm=Se("CirclePlus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);var GE=Se("CircleStop",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["rect",{x:"9",y:"9",width:"6",height:"6",rx:"1",key:"1ssd4o"}]]);var JE=Se("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);var C4=Se("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);var O4=Se("Clipboard",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}]]);var P4=Se("Cog",[["path",{d:"M12 20a8 8 0 1 0 0-16 8 8 0 0 0 0 16Z",key:"sobvz5"}],["path",{d:"M12 14a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z",key:"11i496"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 22v-2",key:"1osdcq"}],["path",{d:"m17 20.66-1-1.73",key:"eq3orb"}],["path",{d:"M11 10.27 7 3.34",key:"16pf9h"}],["path",{d:"m20.66 17-1.73-1",key:"sg0v6f"}],["path",{d:"m3.34 7 1.73 1",key:"1ulond"}],["path",{d:"M14 12h8",key:"4f43i9"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"m20.66 7-1.73 1",key:"1ow05n"}],["path",{d:"m3.34 17 1.73-1",key:"nuk764"}],["path",{d:"m17 3.34-1 1.73",key:"2wel8s"}],["path",{d:"m11 13.73-4 6.93",key:"794ttg"}]]);var Hb=Se("Command",[["path",{d:"M15 6v12a3 3 0 1 0 3-3H6a3 3 0 1 0 3 3V6a3 3 0 1 0-3 3h12a3 3 0 1 0-3-3",key:"11bfej"}]]);var uy=Se("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);var gm=Se("CornerDownLeft",[["polyline",{points:"9 10 4 15 9 20",key:"r3jprv"}],["path",{d:"M20 4v7a4 4 0 0 1-4 4H4",key:"6o5b7l"}]]);var E4=Se("Cpu",[["rect",{width:"16",height:"16",x:"4",y:"4",rx:"2",key:"14l7u7"}],["rect",{width:"6",height:"6",x:"9",y:"9",rx:"1",key:"5aljv4"}],["path",{d:"M15 2v2",key:"13l42r"}],["path",{d:"M15 20v2",key:"15mkzm"}],["path",{d:"M2 15h2",key:"1gxd5l"}],["path",{d:"M2 9h2",key:"1bbxkp"}],["path",{d:"M20 15h2",key:"19e6y8"}],["path",{d:"M20 9h2",key:"19tzq7"}],["path",{d:"M9 2v2",key:"165o2o"}],["path",{d:"M9 20v2",key:"i2bqo8"}]]);var T4=Se("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);var A4=Se("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);var IC=Se("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);var YE=Se("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);var IR=Se("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);var I4=Se("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);var MC=Se("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);var M4=Se("FileAudio",[["path",{d:"M17.5 22h.5a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v3",key:"rslqgf"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M2 19a2 2 0 1 1 4 0v1a2 2 0 1 1-4 0v-4a6 6 0 0 1 12 0v4a2 2 0 1 1-4 0v-1a2 2 0 1 1 4 0",key:"9f7x3i"}]]);var R4=Se("FileImage",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["circle",{cx:"10",cy:"12",r:"2",key:"737tya"}],["path",{d:"m20 17-1.296-1.296a2.41 2.41 0 0 0-3.408 0L9 22",key:"wt3hpn"}]]);var j4=Se("FileInput",[["path",{d:"M4 22h14a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v4",key:"1pf5j1"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M2 15h10",key:"jfw4w8"}],["path",{d:"m9 18 3-3-3-3",key:"112psh"}]]);var N4=Se("FileOutput",[["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M4 7V4a2 2 0 0 1 2-2 2 2 0 0 0-2 2",key:"1vk7w2"}],["path",{d:"M4.063 20.999a2 2 0 0 0 2 1L18 22a2 2 0 0 0 2-2V7l-5-5H6",key:"1jink5"}],["path",{d:"m5 11-3 3",key:"1dgrs4"}],["path",{d:"m5 17-3-3h10",key:"1mvvaf"}]]);var ly=Se("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);var D4=Se("FileVideo",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m10 11 5 3-5 3v-6Z",key:"7ntvm4"}]]);var L4=Se("File",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]);var cy=Se("Folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);var MR=Se("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);var Vb=Se("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);var F4=Se("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);var k4=Se("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);var Wb=Se("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);var $4=Se("Key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]);var RR=Se("LibraryBig",[["rect",{width:"8",height:"18",x:"3",y:"3",rx:"1",key:"oynpb5"}],["path",{d:"M7 3v18",key:"bbkbws"}],["path",{d:"M20.4 18.9c.2.5-.1 1.1-.6 1.3l-1.9.7c-.5.2-1.1-.1-1.3-.6L11.1 5.1c-.2-.5.1-1.1.6-1.3l1.9-.7c.5-.2 1.1.1 1.3.6Z",key:"1qboyk"}]]);var RC=Se("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);var $l=Se("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);var B4=Se("MessageCirclePlus",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);var vF=Se("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);var Kb=Se("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]]);var jC=Se("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);var wF=Se("PencilLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}],["path",{d:"m15 5 3 3",key:"1w25hb"}]]);var SF=Se("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);var ym=Se("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);var q4=Se("RefreshCcw",[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]]);var Gb=Se("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);var U4=Se("RotateCw",[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]]);var jR=Se("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);var Ih=Se("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);var NC=Se("SquareArrowOutUpRight",[["path",{d:"M21 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h6",key:"y09zxi"}],["path",{d:"m21 3-9 9",key:"mpx6sq"}],["path",{d:"M15 3h6v6",key:"1q9fwt"}]]);var vp=Se("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);var NR=Se("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);var z4=Se("TextCursorInput",[["path",{d:"M5 4h1a3 3 0 0 1 3 3 3 3 0 0 1 3-3h1",key:"18xjzo"}],["path",{d:"M13 20h-1a3 3 0 0 1-3-3 3 3 0 0 1-3 3H5",key:"fj48gi"}],["path",{d:"M5 16H4a2 2 0 0 1-2-2v-4a2 2 0 0 1 2-2h1",key:"1n9rhb"}],["path",{d:"M13 8h7a2 2 0 0 1 2 2v4a2 2 0 0 1-2 2h-7",key:"13ksps"}],["path",{d:"M9 7v10",key:"1vc8ob"}]]);var bm=Se("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);var Ef=Se("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);var H4=Se("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);var DR=Se("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]);var $i=Se("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);tr();function hir({onCancel:t}){let e=ue(),r=xye(e.defaultModelKey)&&xye(e.embeddingModelKey);return Jb.default.createElement("div",{className:"tw-flex tw-flex-col tw-gap-4"},Jb.default.createElement("div",{className:"tw-flex tw-flex-col tw-gap-2"},Jb.default.createElement("div",null,"Your Copilot Plus license key is no longer valid. Please renew your subscription to continue using Copilot Plus."),r&&Jb.default.createElement("div",{className:"tw-text-sm tw-text-warning"},"The Copilot Plus exclusive models will stop working. You can switch to the default models in the Settings.")),Jb.default.createElement("div",{className:"tw-flex tw-w-full tw-justify-end tw-gap-2"},Jb.default.createElement(ge,{variant:"ghost",onClick:t},"Close"),Jb.default.createElement(ge,{variant:"default",onClick:()=>{LR(mC.EXPIRED_MODAL)}},"Renew Now ",Jb.default.createElement(IR,{className:"tw-size-4"}))))}var WJ=class extends G8e.Modal{constructor(e){super(e),this.setTitle("Thanks for being a Copilot Plus user \u{1F44B}")}onOpen(){let{contentEl:e}=this;this.root=(0,J8e.createRoot)(e);let r=()=>{this.close()};this.root.render(Jb.default.createElement(hir,{onCancel:r}))}onClose(){this.root.unmount()}};kr();var Mr=class t extends Error{constructor(e,r){super(e),this.code=r,Object.setPrototypeOf(this,t.prototype)}};kr();tr();wn();var fSt=F(pV(),1);mc();YM();Rm();vf();md();function $s(t){if(!t||typeof t!="object"||Array.isArray(t))return!1;let e=t;return e._def||Object.values(Vr.ZodFirstPartyTypeKind).includes(e.constructor?.name??"NOT_INCLUDED")?!0:typeof e.parse=="function"&&typeof e.parseAsync=="function"&&typeof e.safeParse=="function"&&typeof e.safeParseAsync=="function"}function FEe(t){return t!==void 0&&Array.isArray(t.lc_namespace)}function kEe(t){return t!==void 0&&vn.isRunnable(t)&&"lc_name"in t.constructor&&typeof t.constructor.lc_name=="function"&&t.constructor.lc_name()==="RunnableToolLike"}function $Ee(t){return!!t&&typeof t=="object"&&"name"in t&&"schema"in t&&($s(t.schema)||t.schema!=null&&typeof t.schema=="object"&&"type"in t.schema&&typeof t.schema.type=="string"&&["null","boolean","object","array","number","string"].includes(t.schema.type))}function Vl(t){return $Ee(t)||kEe(t)||FEe(t)}mc();r2();r2();function sSt(t){return $s(t)?ho(t):t}function hV(t){if(!t||typeof t!="object"||Object.keys(t).length===0||Array.isArray(t))return!1;if("type"in t)return typeof t.type=="string"?t.type==="string":Array.isArray(t.type)?t.type.every(e=>e==="string"):!1;if("enum"in t)return Array.isArray(t.enum)&&t.enum.length>0&&t.enum.every(e=>typeof e=="string");if("const"in t)return typeof t.const=="string";if("allOf"in t&&Array.isArray(t.allOf))return t.allOf.some(e=>hV(e));if("anyOf"in t&&Array.isArray(t.anyOf)||"oneOf"in t&&Array.isArray(t.oneOf)){let e="anyOf"in t?t.anyOf:t.oneOf;return e.length>0&&e.every(r=>hV(r))}if("not"in t)return!1;if("$ref"in t&&typeof t.$ref=="string"){let e=t.$ref,r=cC(t);return r[e]?hV(r[e]):!1}return!1}function nA(t,e){let r=typeof e=="number"?void 0:e;return{name:t.name,description:t.description,parameters:sSt(t.schema),...r?.strict!==void 0?{strict:r.strict}:{}}}function VS(t,e){let r=typeof e=="number"?void 0:e,n;return Vl(t)?n={type:"function",function:nA(t)}:n=t,r?.strict!==void 0&&(n.function.strict=r.strict),n}mc();YM();hL();mV();fE();vf();Pb();WK();Bz();function BEe(t){let e=[];for(let r of t){let n=r;if(Array.isArray(r.content))for(let o=0;o<r.content.length;o++){let i=r.content[o];(BUe(i)||qUe(i))&&n===r&&(n=new r.constructor({...n,content:[...r.content.slice(0,o),UUe(i),...r.content.slice(o+1)]}))}e.push(n)}return e}var Bs=class t extends A${constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","chat_models",this._llmType()]}),Object.defineProperty(this,"disableStreaming",{enumerable:!0,configurable:!0,writable:!0,value:!1})}_separateRunnableConfigFromCallOptionsCompat(e){let[r,n]=super._separateRunnableConfigFromCallOptions(e);return n.signal=r.signal,[r,n]}async invoke(e,r){let n=t._convertInputToPromptValue(e);return(await this.generatePrompt([n],r,r?.callbacks)).generations[0][0].message}async*_streamResponseChunks(e,r,n){throw new Error("Not implemented.")}async*_streamIterator(e,r){if(this._streamResponseChunks===t.prototype._streamResponseChunks||this.disableStreaming)yield this.invoke(e,r);else{let o=t._convertInputToPromptValue(e).toChatMessages(),[i,a]=this._separateRunnableConfigFromCallOptionsCompat(r),s={...i.metadata,...this.getLsParams(a)},u=await Ms.configure(i.callbacks,this.callbacks,i.tags,this.tags,s,this.metadata,{verbose:this.verbose}),l={options:a,invocation_params:this?.invocationParams(a),batch_size:1},c=await u?.handleChatModelStart(this.toJSON(),[BEe(o)],i.runId,void 0,l,void 0,void 0,i.runName),d,f;try{for await(let p of this._streamResponseChunks(o,a,c?.[0])){if(p.message.id==null){let m=c?.at(0)?.runId;m!=null&&p.message._updateId(`run-${m}`)}p.message.response_metadata={...p.generationInfo,...p.message.response_metadata},yield p.message,d?d=d.concat(p):d=p,Wfe(p.message)&&p.message.usage_metadata!==void 0&&(f={tokenUsage:{promptTokens:p.message.usage_metadata.input_tokens,completionTokens:p.message.usage_metadata.output_tokens,totalTokens:p.message.usage_metadata.total_tokens}})}}catch(p){throw await Promise.all((c??[]).map(m=>m?.handleLLMError(p))),p}await Promise.all((c??[]).map(p=>p?.handleLLMEnd({generations:[[d]],llmOutput:f})))}}getLsParams(e){let r=this.getName().startsWith("Chat")?this.getName().replace("Chat",""):this.getName();return{ls_model_type:"chat",ls_stop:e.stop,ls_provider:r}}async _generateUncached(e,r,n,o){let i=e.map(d=>d.map(Wg)),a;if(o!==void 0&&o.length===i.length)a=o;else{let d={...n.metadata,...this.getLsParams(r)},f=await Ms.configure(n.callbacks,this.callbacks,n.tags,this.tags,d,this.metadata,{verbose:this.verbose}),p={options:r,invocation_params:this?.invocationParams(r),batch_size:1};a=await f?.handleChatModelStart(this.toJSON(),i.map(BEe),n.runId,void 0,p,void 0,void 0,n.runName)}let s=[],u=[];if(!!a?.[0].handlers.find(kfe)&&!this.disableStreaming&&i.length===1&&this._streamResponseChunks!==t.prototype._streamResponseChunks)try{let d=await this._streamResponseChunks(i[0],r,a?.[0]),f,p;for await(let m of d){if(m.message.id==null){let h=a?.at(0)?.runId;h!=null&&m.message._updateId(`run-${h}`)}f===void 0?f=m:f=jl(f,m),Wfe(m.message)&&m.message.usage_metadata!==void 0&&(p={tokenUsage:{promptTokens:m.message.usage_metadata.input_tokens,completionTokens:m.message.usage_metadata.output_tokens,totalTokens:m.message.usage_metadata.total_tokens}})}if(f===void 0)throw new Error("Received empty response from chat model call.");s.push([f]),await a?.[0].handleLLMEnd({generations:s,llmOutput:p})}catch(d){throw await a?.[0].handleLLMError(d),d}else{let d=await Promise.allSettled(i.map((f,p)=>this._generate(f,{...r,promptIndex:p},a?.[p])));await Promise.all(d.map(async(f,p)=>{if(f.status==="fulfilled"){let m=f.value;for(let h of m.generations){if(h.message.id==null){let b=a?.at(0)?.runId;b!=null&&h.message._updateId(`run-${b}`)}h.message.response_metadata={...h.generationInfo,...h.message.response_metadata}}return m.generations.length===1&&(m.generations[0].message.response_metadata={...m.llmOutput,...m.generations[0].message.response_metadata}),s[p]=m.generations,u[p]=m.llmOutput,a?.[p]?.handleLLMEnd({generations:[m.generations],llmOutput:m.llmOutput})}else return await a?.[p]?.handleLLMError(f.reason),Promise.reject(f.reason)}))}let c={generations:s,llmOutput:u.length?this._combineLLMOutput?.(...u):void 0};return Object.defineProperty(c,Yz,{value:a?{runIds:a?.map(d=>d.runId)}:void 0,configurable:!0}),c}async _generateCached({messages:e,cache:r,llmStringKey:n,parsedOptions:o,handledOptions:i}){let a=e.map(b=>b.map(Wg)),s={...i.metadata,...this.getLsParams(o)},u=await Ms.configure(i.callbacks,this.callbacks,i.tags,this.tags,s,this.metadata,{verbose:this.verbose}),l={options:o,invocation_params:this?.invocationParams(o),batch_size:1},c=await u?.handleChatModelStart(this.toJSON(),a.map(BEe),i.runId,void 0,l,void 0,void 0,i.runName),d=[],p=(await Promise.allSettled(a.map(async(b,g)=>{let y=t._convertInputToPromptValue(b).toString(),w=await r.lookup(y,n);return w==null&&d.push(g),w}))).map((b,g)=>({result:b,runManager:c?.[g]})).filter(({result:b})=>b.status==="fulfilled"&&b.value!=null||b.status==="rejected"),m=[];await Promise.all(p.map(async({result:b,runManager:g},y)=>{if(b.status==="fulfilled"){let w=b.value;return m[y]=w.map(S=>("message"in S&&dh(S.message)&&bi(S.message)&&(S.message.usage_metadata={input_tokens:0,output_tokens:0,total_tokens:0}),S.generationInfo={...S.generationInfo,tokenUsage:{}},S)),w.length&&await g?.handleLLMNewToken(w[0].text),g?.handleLLMEnd({generations:[w]},void 0,void 0,void 0,{cached:!0})}else return await g?.handleLLMError(b.reason,void 0,void 0,void 0,{cached:!0}),Promise.reject(b.reason)}));let h={generations:m,missingPromptIndices:d,startedRunManagers:c};return Object.defineProperty(h,Yz,{value:c?{runIds:c?.map(b=>b.runId)}:void 0,configurable:!0}),h}async generate(e,r,n){let o;Array.isArray(r)?o={stop:r}:o=r;let i=e.map(m=>m.map(Wg)),[a,s]=this._separateRunnableConfigFromCallOptionsCompat(o);if(a.callbacks=a.callbacks??n,!this.cache)return this._generateUncached(i,s,a);let{cache:u}=this,l=this._getSerializedCacheKeyParametersForCall(s),{generations:c,missingPromptIndices:d,startedRunManagers:f}=await this._generateCached({messages:i,cache:u,llmStringKey:l,parsedOptions:s,handledOptions:a}),p={};if(d.length>0){let m=await this._generateUncached(d.map(h=>i[h]),s,a,f!==void 0?d.map(h=>f?.[h]):void 0);await Promise.all(m.generations.map(async(h,b)=>{let g=d[b];c[g]=h;let y=t._convertInputToPromptValue(i[g]).toString();return u.update(y,l,h)})),p=m.llmOutput??{}}return{generations:c,llmOutput:p}}invocationParams(e){return{}}_modelType(){return"base_chat_model"}serialize(){return{...this.invocationParams(),_type:this._llmType(),_model:this._modelType()}}async generatePrompt(e,r,n){let o=e.map(i=>i.toChatMessages());return this.generate(o,r,n)}async call(e,r,n){return(await this.generate([e.map(Wg)],r,n)).generations[0][0].message}async callPrompt(e,r,n){let o=e.toChatMessages();return this.call(o,r,n)}async predictMessages(e,r,n){return this.call(e,r,n)}async predict(e,r,n){let o=new ys(e),i=await this.call([o],r,n);if(typeof i.content!="string")throw new Error("Cannot use predict when output is not a string.");return i.content}withStructuredOutput(e,r){if(typeof this.bindTools!="function")throw new Error('Chat model must implement ".bindTools()" to use withStructuredOutput.');if(r?.strict)throw new Error('"strict" mode is not supported for this model by default.');let n=e,o=r?.name,i=n.description??"A function available to call.",a=r?.method,s=r?.includeRaw;if(a==="jsonMode")throw new Error('Base withStructuredOutput implementation only supports "functionCalling" as a method.');let u=o??"extract",l;$s(n)?l=[{type:"function",function:{name:u,description:i,parameters:ho(n)}}]:("name"in n&&(u=n.name),l=[{type:"function",function:{name:u,description:i,parameters:n}}]);let c=this.bindTools(l),d=_f.from(h=>{if(!h.tool_calls||h.tool_calls.length===0)throw new Error("No tool calls found in the response.");let b=h.tool_calls.find(g=>g.name===u);if(!b)throw new Error(`No tool call found with name ${u}.`);return b.args});if(!s)return c.pipe(d).withConfig({runName:"StructuredOutput"});let f=lo.assign({parsed:(h,b)=>d.invoke(h.raw,b)}),p=lo.assign({parsed:()=>null}),m=f.withFallbacks({fallbacks:[p]});return di.from([{raw:c},m]).withConfig({runName:"StructuredOutputRunnable"})}};$d();zM();var jc=[];for($te=0;$te<256;++$te)jc.push(($te+256).toString(16).slice(1));var $te;function uSt(t,e=0){return(jc[t[e+0]]+jc[t[e+1]]+jc[t[e+2]]+jc[t[e+3]]+"-"+jc[t[e+4]]+jc[t[e+5]]+"-"+jc[t[e+6]]+jc[t[e+7]]+"-"+jc[t[e+8]]+jc[t[e+9]]+"-"+jc[t[e+10]]+jc[t[e+11]]+jc[t[e+12]]+jc[t[e+13]]+jc[t[e+14]]+jc[t[e+15]]).toLowerCase()}var Bte,T2r=new Uint8Array(16);function qEe(){if(!Bte&&(Bte=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Bte))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Bte(T2r)}var A2r=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),UEe={randomUUID:A2r};function I2r(t,e,r){if(UEe.randomUUID&&!e&&!t)return UEe.randomUUID();t=t||{};var n=t.random||(t.rng||qEe)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){r=r||0;for(var o=0;o<16;++o)e[r+o]=n[o];return e}return uSt(n)}var zEe=I2r;function lSt(t){let e=[],r=[];typeof t=="string"?r=[{output:t}]:t instanceof Map||typeof t=="object"&&t!==null&&!Array.isArray(t)?r=[t]:Array.isArray(t)||(r=[{output:t}]);for(let n of r)!(n instanceof Map)&&(typeof n!="object"||n===null)&&(n={output:n}),e.push(n);return e}function qte(t,e){let r=i=>{switch(i){case"system":return"SYSTEM";case"human":return"USER";case"ai":return"CHATBOT";case"tool":return"TOOL";default:throw new Error(`Unknown message type: '${i}'. Accepted types: 'human', 'ai', 'system', 'tool'`)}},n=i=>{if(typeof i=="string")return i;throw new Error(`ChatCohere does not support non text message content. Received: ${JSON.stringify(i,null,2)}`)},o=i=>bi(i)&&i.tool_calls?i.tool_calls.map(a=>({name:a.name,parameters:a.args})):[];if(t._getType().toLowerCase()==="ai")return{role:r(t._getType()),message:n(t.content),toolCalls:o(t)};if(t._getType().toLowerCase()==="tool")return{role:r(t._getType()),message:n(t.content),toolResults:e};if(t._getType().toLowerCase()==="human"||t._getType().toLowerCase()==="system")return{role:r(t._getType()),message:n(t.content)};throw new Error("Got unknown message type. Supported types are AIMessage, ToolMessage, HumanMessage, and SystemMessage")}function R2r(t){return"name"in t&&"description"in t&&"parameterDefinitions"in t}function cSt(t){return t._getType()==="tool"}function dSt(t){let e="properties"in t?t.properties:{},r="required"in t?t.required:[],n={};return Object.keys(e).forEach(o=>{n[o]=e[o],r===void 0&&(r=[]),n[o].required=r.includes(o)}),n}function j2r(t){if(t){if(t.every(R2r))return t;if(t.every(Rc))return t.map(e=>({name:e.function.name,description:e.function.description??"",parameterDefinitions:dSt(e.function.parameters)}));if(t.every(Vl))return t.map(e=>{let r=ho(e.schema);return{name:e.name,description:e.description??"",parameterDefinitions:dSt(r)}});throw new Error("Can not pass in a mix of tool schema types to ChatCohere.")}else return}var Ute=class extends Bs{static lc_name(){return"ChatCohere"}constructor(e){super(e??{}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"model",{enumerable:!0,configurable:!0,writable:!0,value:"command-r-plus"}),Object.defineProperty(this,"temperature",{enumerable:!0,configurable:!0,writable:!0,value:.3}),Object.defineProperty(this,"streaming",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"streamUsage",{enumerable:!0,configurable:!0,writable:!0,value:!0});let r=e?.apiKey??ot("COHERE_API_KEY");if(!r)throw new Error("No API key provided for ChatCohere.");this.client=new fSt.CohereClient({token:r}),this.model=e?.model??this.model,this.temperature=e?.temperature??this.temperature,this.streaming=e?.streaming??this.streaming,this.streamUsage=e?.streamUsage??this.streamUsage}getLsParams(e){let r=this.invocationParams(e);return{ls_provider:"cohere",ls_model_name:this.model,ls_model_type:"chat",ls_temperature:this.temperature??void 0,ls_max_tokens:typeof r.maxTokens=="number"?r.maxTokens:void 0,ls_stop:Array.isArray(r.stopSequences)?r.stopSequences:void 0}}_llmType(){return"cohere"}invocationParams(e){if(e.tool_choice)throw new Error("'tool_choice' call option is not supported by ChatCohere.");let r={model:this.model,preamble:e.preamble,conversationId:e.conversationId,promptTruncation:e.promptTruncation,connectors:e.connectors,searchQueriesOnly:e.searchQueriesOnly,documents:e.documents,temperature:e.temperature??this.temperature,forceSingleStep:e.forceSingleStep,tools:e.tools};return Object.fromEntries(Object.entries(r).filter(([,n])=>n!==void 0))}bindTools(e,r){return this.bind({tools:j2r(e),...r})}_getChatRequest(e,r){let n=this.invocationParams(r),o=this._messagesToCohereToolResultsCurrChatTurn(e),i=[],a="",s=[];if(n.forceSingleStep){a="";for(let l=0;l<e.length-1;l+=1){let c=e[l];if(!(bi(c)&&c.tool_calls))if(c._getType().toLowerCase()==="tool"){if(s=s.concat(this._messageToCohereToolResults(e,l)),l===e.length-1||e[l+1]._getType().toLowerCase()!=="tool"){let d=qte(c,s);i.push(d),s=[]}}else i.push(qte(c,[]))}for(let l=e.length-1;l>=0;l-=1){let c=e[l];if(c._getType().toLowerCase()==="human"&&c.content){a=c.content.toString();break}}}else{for(let l=0;l<e.length-1;l+=1){let c=e[l];if(c._getType().toLowerCase()==="tool"){if(s=s.concat(this._messageToCohereToolResults(e,l)),l===e.length-1||e[l+1]._getType().toLowerCase()!=="tool"){let d=qte(c,s);i.push(d),s=[]}}else i.push(qte(c,[]))}a=o.length>0?"":e[e.length-1].content.toString()}return{message:a,chatHistory:i,toolResults:o.length>0?o:void 0,...n}}_getCurrChatTurnMessages(e){let r=[];for(let n=e.length-1;n>=0;n-=1){let o=e[n];if(r.push(o),o._getType().toLowerCase()==="human")break}return r.reverse()}_messagesToCohereToolResultsCurrChatTurn(e){let r=[],n=this._getCurrChatTurnMessages(e);for(let o of n)if(cSt(o)){let i=o,a=n.filter(s=>bi(s)&&s.tool_calls!==void 0);if(a.length>0){let s=a[a.length-1];s.tool_calls&&r.push(...s.tool_calls.filter(u=>u.id===i.tool_call_id).map(u=>({call:{name:u.name,parameters:u.args},outputs:lSt(i.content)})))}}return r}_messageToCohereToolResults(e,r){let n=[],o=e[r];if(!cSt(o))throw new Error("The message index does not correspond to an instance of ToolMessage");let a=e.slice(0,r).filter(s=>bi(s)&&s.tool_calls).slice(-1)[0];return a.tool_calls&&n.push(...a.tool_calls.filter(s=>s.id===o.tool_call_id).map(s=>({call:{name:s.name,parameters:s.args},outputs:lSt(o.content)}))),n}_formatCohereToolCalls(e=null){if(!e)return[];let r=[];for(let n of e)r.push({id:zEe().substring(0,32),function:{name:n.name,arguments:n.parameters},type:"function"});return r}_convertCohereToolCallToLangchain(e){return e.map(r=>({name:r.function.name,args:r.function.arguments,id:r.id,type:"tool_call"}))}async _generate(e,r,n){let o={},i=this._getChatRequest(e,r);if(this.streaming){let c=this._streamResponseChunks(e,r,n),d={};for await(let p of c){let m=p.generationInfo?.completion??0;d[m]===void 0?d[m]=p:d[m]=d[m].concat(p)}return{generations:Object.entries(d).sort(([p],[m])=>parseInt(p,10)-parseInt(m,10)).map(([p,m])=>m),llmOutput:{estimatedTokenUsage:o}}}let a=await this.caller.callWithOptions({signal:r.signal},async()=>{let c;try{c=await this.client.chat(i)}catch(d){throw d.status=d.status??d.statusCode,d}return c});if(a.meta?.tokens){let{inputTokens:c,outputTokens:d}=a.meta.tokens;d&&(o.completionTokens=(o.completionTokens??0)+d),c&&(o.promptTokens=(o.promptTokens??0)+c),o.totalTokens=(o.totalTokens??0)+(o.promptTokens??0)+(o.completionTokens??0)}let s={...a};delete s.text,a.toolCalls&&a.toolCalls.length>0&&(s.toolCalls=this._formatCohereToolCalls(a.toolCalls));let u=[];return"toolCalls"in s&&(u=this._convertCohereToolCallToLangchain(s.toolCalls)),{generations:[{text:a.text,message:new mn({content:a.text,additional_kwargs:s,tool_calls:u,usage_metadata:{input_tokens:o.promptTokens??0,output_tokens:o.completionTokens??0,total_tokens:o.totalTokens??0}}),generationInfo:s}],llmOutput:{estimatedTokenUsage:o}}}async*_streamResponseChunks(e,r,n){let o=this._getChatRequest(e,r),i=await this.caller.call(async()=>{let a;try{a=await this.client.chatStream(o)}catch(s){throw s.status=s.status??s.statusCode,s}return a});for await(let a of i)if(a.eventType==="text-generation")yield new Ln({text:a.text,message:new cr({content:a.text})}),await n?.handleLLMNewToken(a.text);else if(a.eventType!=="stream-end")yield new Ln({text:"",message:new cr({content:"",additional_kwargs:{...a}}),generationInfo:{...a}});else if(a.eventType==="stream-end"&&(this.streamUsage||r.streamUsage)){let s=a.response.meta?.tokens?.inputTokens??0,u=a.response.meta?.tokens?.outputTokens??0,l={...a.response};a.response.toolCalls&&a.response.toolCalls.length>0&&(l.toolCalls=this._formatCohereToolCalls(a.response.toolCalls));let c=[],d=l.toolCalls??[];d.length>0&&(c=d.map(f=>({name:f.function.name,args:f.function.arguments,id:f.id,index:f.index,type:"tool_call_chunk"}))),yield new Ln({text:"",message:new cr({content:"",additional_kwargs:{eventType:"stream-end"},tool_call_chunks:c,usage_metadata:{input_tokens:s,output_tokens:u,total_tokens:s+u}}),generationInfo:{eventType:"stream-end",...l}})}}_combineLLMOutput(...e){return e.reduce((r,n)=>{if(n&&n.estimatedTokenUsage){let o=r.estimatedTokenUsage?.completionTokens??0,i=r.estimatedTokenUsage?.promptTokens??0,a=r.estimatedTokenUsage?.totalTokens??0;o+=n.estimatedTokenUsage.completionTokens??0,i+=n.estimatedTokenUsage.promptTokens??0,a+=n.estimatedTokenUsage.totalTokens??0,r.estimatedTokenUsage={completionTokens:o,promptTokens:i,totalTokens:a}}return r},{estimatedTokenUsage:{completionTokens:0,promptTokens:0,totalTokens:0}})}get lc_secrets(){return{apiKey:"COHERE_API_KEY",api_key:"COHERE_API_KEY"}}get lc_aliases(){return{apiKey:"cohere_api_key",api_key:"cohere_api_key"}}};var N2r=F(pV(),1);YM();hL();fE();mV();Pb();Bz();var mSt=F(pV(),1);gL();var Nf=class{constructor(e){Object.defineProperty(this,"caller",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.caller=new im(e??{})}};var Df=(t,e)=>t.reduce((r,n,o)=>{let i=Math.floor(o/e),a=r[i]||[];return r[i]=a.concat([n]),r},[]);var zte=class extends Nf{constructor(e){let r={maxConcurrency:2,...e};super(r),Object.defineProperty(this,"model",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"batchSize",{enumerable:!0,configurable:!0,writable:!0,value:48}),Object.defineProperty(this,"embeddingTypes",{enumerable:!0,configurable:!0,writable:!0,value:["float"]}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0});let n=r?.apiKey||ot("COHERE_API_KEY");if(!n)throw new Error("Cohere API key not found");if(this.client=new mSt.CohereClient({token:n}),this.model=r?.model??this.model,!this.model)throw new Error("Model not specified for CohereEmbeddings instance. Please provide a model name from the options here: https://docs.cohere.com/reference/embed");this.batchSize=r?.batchSize??this.batchSize,this.embeddingTypes=r?.embeddingTypes??this.embeddingTypes}async embedDocuments(e){let r=Df(e,this.batchSize),n=r.map(a=>this.embeddingWithRetry({model:this.model,texts:a,inputType:"search_document",embeddingTypes:this.embeddingTypes})),o=await Promise.all(n),i=[];for(let a=0;a<o.length;a+=1){let s=r[a],{embeddings:u}=o[a];for(let l=0;l<s.length;l+=1)"float"in u&&u.float?i.push(u.float[l]):Array.isArray(u)&&i.push(u[l])}return i}async embedQuery(e){let{embeddings:r}=await this.embeddingWithRetry({model:this.model,texts:[e],inputType:"search_query",embeddingTypes:this.embeddingTypes});if("float"in r&&r.float)return r.float[0];if(Array.isArray(r))return r[0];throw new Error(`Invalid response from Cohere API. Received: ${JSON.stringify(r,null,2)}`)}async embed(e){let{embeddings:r}=await this.embeddingWithRetry(e);if("float"in r&&r.float)return r.float[0];if(Array.isArray(r))return r[0];throw new Error(`Invalid response from Cohere API. Received: ${JSON.stringify(r,null,2)}`)}async embeddingWithRetry(e){return this.caller.call(async()=>{let r;try{r=await this.client.embed(e)}catch(n){throw n.status=n.status??n.statusCode,n}return r})}get lc_secrets(){return{apiKey:"COHERE_API_KEY",api_key:"COHERE_API_KEY"}}get lc_aliases(){return{apiKey:"cohere_api_key",api_key:"cohere_api_key"}}};var D2r=F(pV(),1);var hSt;(function(t){t.STRING="string",t.NUMBER="number",t.INTEGER="integer",t.BOOLEAN="boolean",t.ARRAY="array",t.OBJECT="object"})(hSt||(hSt={}));var gSt;(function(t){t.LANGUAGE_UNSPECIFIED="language_unspecified",t.PYTHON="python"})(gSt||(gSt={}));var ySt;(function(t){t.OUTCOME_UNSPECIFIED="outcome_unspecified",t.OUTCOME_OK="outcome_ok",t.OUTCOME_FAILED="outcome_failed",t.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded"})(ySt||(ySt={}));var bSt=["user","model","function","system"],rj;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT"})(rj||(rj={}));var nj;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(nj||(nj={}));var _St;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(_St||(_St={}));var vSt;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER"})(vSt||(vSt={}));var gV;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER"})(gV||(gV={}));var wSt;(function(t){t.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",t.RETRIEVAL_QUERY="RETRIEVAL_QUERY",t.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",t.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",t.CLASSIFICATION="CLASSIFICATION",t.CLUSTERING="CLUSTERING"})(wSt||(wSt={}));var oj;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE"})(oj||(oj={}));var SSt;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(SSt||(SSt={}));var Bd=class extends Error{constructor(e){super(`[GoogleGenerativeAI Error]: ${e}`)}},oA=class extends Bd{constructor(e,r){super(e),this.response=r}},Vte=class extends Bd{constructor(e,r,n,o){super(e),this.status=r,this.statusText=n,this.errorDetails=o}},WS=class extends Bd{};var L2r="https://generativelanguage.googleapis.com",F2r="v1beta",k2r="0.21.0",$2r="genai-js",ij;(function(t){t.GENERATE_CONTENT="generateContent",t.STREAM_GENERATE_CONTENT="streamGenerateContent",t.COUNT_TOKENS="countTokens",t.EMBED_CONTENT="embedContent",t.BATCH_EMBED_CONTENTS="batchEmbedContents"})(ij||(ij={}));var HEe=class{constructor(e,r,n,o,i){this.model=e,this.task=r,this.apiKey=n,this.stream=o,this.requestOptions=i}toString(){var e,r;let n=((e=this.requestOptions)===null||e===void 0?void 0:e.apiVersion)||F2r,i=`${((r=this.requestOptions)===null||r===void 0?void 0:r.baseUrl)||L2r}/${n}/${this.model}:${this.task}`;return this.stream&&(i+="?alt=sse"),i}};function B2r(t){let e=[];return t?.apiClient&&e.push(t.apiClient),e.push(`${$2r}/${k2r}`),e.join(" ")}async function q2r(t){var e;let r=new Headers;r.append("Content-Type","application/json"),r.append("x-goog-api-client",B2r(t.requestOptions)),r.append("x-goog-api-key",t.apiKey);let n=(e=t.requestOptions)===null||e===void 0?void 0:e.customHeaders;if(n){if(!(n instanceof Headers))try{n=new Headers(n)}catch(o){throw new WS(`unable to convert customHeaders value ${JSON.stringify(n)} to Headers: ${o.message}`)}for(let[o,i]of n.entries()){if(o==="x-goog-api-key")throw new WS(`Cannot set reserved header name ${o}`);if(o==="x-goog-api-client")throw new WS(`Header name ${o} can only be set using the apiClient field`);r.append(o,i)}}return r}async function U2r(t,e,r,n,o,i){let a=new HEe(t,e,r,n,i);return{url:a.toString(),fetchOptions:Object.assign(Object.assign({},W2r(i)),{method:"POST",headers:await q2r(a),body:o})}}async function _V(t,e,r,n,o,i={},a=fetch){let{url:s,fetchOptions:u}=await U2r(t,e,r,n,o,i);return z2r(s,u,a)}async function z2r(t,e,r=fetch){let n;try{n=await r(t,e)}catch(o){H2r(o,t)}return n.ok||await V2r(n,t),n}function H2r(t,e){let r=t;throw t instanceof Vte||t instanceof WS||(r=new Bd(`Error fetching from ${e.toString()}: ${t.message}`),r.stack=t.stack),r}async function V2r(t,e){let r="",n;try{let o=await t.json();r=o.error.message,o.error.details&&(r+=` ${JSON.stringify(o.error.details)}`,n=o.error.details)}catch{}throw new Vte(`Error fetching from ${e.toString()}: [${t.status} ${t.statusText}] ${r}`,t.status,t.statusText,n)}function W2r(t){let e={};if(t?.signal!==void 0||t?.timeout>=0){let r=new AbortController;t?.timeout>=0&&setTimeout(()=>r.abort(),t.timeout),t?.signal&&t.signal.addEventListener("abort",()=>{r.abort()}),e.signal=r.signal}return e}function WEe(t){return t.text=()=>{if(t.candidates&&t.candidates.length>0){if(t.candidates.length>1&&console.warn(`This response had ${t.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),Hte(t.candidates[0]))throw new oA(`${iA(t)}`,t);return K2r(t)}else if(t.promptFeedback)throw new oA(`Text not available. ${iA(t)}`,t);return""},t.functionCall=()=>{if(t.candidates&&t.candidates.length>0){if(t.candidates.length>1&&console.warn(`This response had ${t.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),Hte(t.candidates[0]))throw new oA(`${iA(t)}`,t);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),xSt(t)[0]}else if(t.promptFeedback)throw new oA(`Function call not available. ${iA(t)}`,t)},t.functionCalls=()=>{if(t.candidates&&t.candidates.length>0){if(t.candidates.length>1&&console.warn(`This response had ${t.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),Hte(t.candidates[0]))throw new oA(`${iA(t)}`,t);return xSt(t)}else if(t.promptFeedback)throw new oA(`Function call not available. ${iA(t)}`,t)},t}function K2r(t){var e,r,n,o;let i=[];if(!((r=(e=t.candidates)===null||e===void 0?void 0:e[0].content)===null||r===void 0)&&r.parts)for(let a of(o=(n=t.candidates)===null||n===void 0?void 0:n[0].content)===null||o===void 0?void 0:o.parts)a.text&&i.push(a.text),a.executableCode&&i.push("\n```"+a.executableCode.language+`
`+a.executableCode.code+"\n```\n"),a.codeExecutionResult&&i.push("\n```\n"+a.codeExecutionResult.output+"\n```\n");return i.length>0?i.join(""):""}function xSt(t){var e,r,n,o;let i=[];if(!((r=(e=t.candidates)===null||e===void 0?void 0:e[0].content)===null||r===void 0)&&r.parts)for(let a of(o=(n=t.candidates)===null||n===void 0?void 0:n[0].content)===null||o===void 0?void 0:o.parts)a.functionCall&&i.push(a.functionCall);if(i.length>0)return i}var G2r=[gV.RECITATION,gV.SAFETY,gV.LANGUAGE];function Hte(t){return!!t.finishReason&&G2r.includes(t.finishReason)}function iA(t){var e,r,n;let o="";if((!t.candidates||t.candidates.length===0)&&t.promptFeedback)o+="Response was blocked",!((e=t.promptFeedback)===null||e===void 0)&&e.blockReason&&(o+=` due to ${t.promptFeedback.blockReason}`),!((r=t.promptFeedback)===null||r===void 0)&&r.blockReasonMessage&&(o+=`: ${t.promptFeedback.blockReasonMessage}`);else if(!((n=t.candidates)===null||n===void 0)&&n[0]){let i=t.candidates[0];Hte(i)&&(o+=`Candidate was blocked due to ${i.finishReason}`,i.finishMessage&&(o+=`: ${i.finishMessage}`))}return o}function yV(t){return this instanceof yV?(this.v=t,this):new yV(t)}function J2r(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),o,i=[];return o={},a("next"),a("throw"),a("return"),o[Symbol.asyncIterator]=function(){return this},o;function a(f){n[f]&&(o[f]=function(p){return new Promise(function(m,h){i.push([f,p,m,h])>1||s(f,p)})})}function s(f,p){try{u(n[f](p))}catch(m){d(i[0][3],m)}}function u(f){f.value instanceof yV?Promise.resolve(f.value.v).then(l,c):d(i[0][2],f)}function l(f){s("next",f)}function c(f){s("throw",f)}function d(f,p){f(p),i.shift(),i.length&&s(i[0][0],i[0][1])}}var CSt=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function Y2r(t){let e=t.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})),r=Q2r(e),[n,o]=r.tee();return{stream:X2r(n),response:Z2r(o)}}async function Z2r(t){let e=[],r=t.getReader();for(;;){let{done:n,value:o}=await r.read();if(n)return WEe(e4r(e));e.push(o)}}function X2r(t){return J2r(this,arguments,function*(){let r=t.getReader();for(;;){let{value:n,done:o}=yield yV(r.read());if(o)break;yield yield yV(WEe(n))}})}function Q2r(t){let e=t.getReader();return new ReadableStream({start(n){let o="";return i();function i(){return e.read().then(({value:a,done:s})=>{if(s){if(o.trim()){n.error(new Bd("Failed to parse stream"));return}n.close();return}o+=a;let u=o.match(CSt),l;for(;u;){try{l=JSON.parse(u[1])}catch{n.error(new Bd(`Error parsing JSON response: "${u[1]}"`));return}n.enqueue(l),o=o.substring(u[0].length),u=o.match(CSt)}return i()})}}})}function e4r(t){let e=t[t.length-1],r={promptFeedback:e?.promptFeedback};for(let n of t){if(n.candidates)for(let o of n.candidates){let i=o.index;if(r.candidates||(r.candidates=[]),r.candidates[i]||(r.candidates[i]={index:o.index}),r.candidates[i].citationMetadata=o.citationMetadata,r.candidates[i].groundingMetadata=o.groundingMetadata,r.candidates[i].finishReason=o.finishReason,r.candidates[i].finishMessage=o.finishMessage,r.candidates[i].safetyRatings=o.safetyRatings,o.content&&o.content.parts){r.candidates[i].content||(r.candidates[i].content={role:o.content.role||"user",parts:[]});let a={};for(let s of o.content.parts)s.text&&(a.text=s.text),s.functionCall&&(a.functionCall=s.functionCall),s.executableCode&&(a.executableCode=s.executableCode),s.codeExecutionResult&&(a.codeExecutionResult=s.codeExecutionResult),Object.keys(a).length===0&&(a.text=""),r.candidates[i].content.parts.push(a)}}n.usageMetadata&&(r.usageMetadata=n.usageMetadata)}return r}async function TSt(t,e,r,n){let o=await _V(e,ij.STREAM_GENERATE_CONTENT,t,!0,JSON.stringify(r),n);return Y2r(o)}async function ASt(t,e,r,n){let i=await(await _V(e,ij.GENERATE_CONTENT,t,!1,JSON.stringify(r),n)).json();return{response:WEe(i)}}function ISt(t){if(t!=null){if(typeof t=="string")return{role:"system",parts:[{text:t}]};if(t.text)return{role:"system",parts:[t]};if(t.parts)return t.role?t:{role:"system",parts:t.parts}}}function bV(t){let e=[];if(typeof t=="string")e=[{text:t}];else for(let r of t)typeof r=="string"?e.push({text:r}):e.push(r);return t4r(e)}function t4r(t){let e={role:"user",parts:[]},r={role:"function",parts:[]},n=!1,o=!1;for(let i of t)"functionResponse"in i?(r.parts.push(i),o=!0):(e.parts.push(i),n=!0);if(n&&o)throw new Bd("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!n&&!o)throw new Bd("No content is provided for sending chat message.");return n?e:r}function r4r(t,e){var r;let n={model:e?.model,generationConfig:e?.generationConfig,safetySettings:e?.safetySettings,tools:e?.tools,toolConfig:e?.toolConfig,systemInstruction:e?.systemInstruction,cachedContent:(r=e?.cachedContent)===null||r===void 0?void 0:r.name,contents:[]},o=t.generateContentRequest!=null;if(t.contents){if(o)throw new WS("CountTokensRequest must have one of contents or generateContentRequest, not both.");n.contents=t.contents}else if(o)n=Object.assign(Object.assign({},n),t.generateContentRequest);else{let i=bV(t);n.contents=[i]}return{generateContentRequest:n}}function OSt(t){let e;return t.contents?e=t:e={contents:[bV(t)]},t.systemInstruction&&(e.systemInstruction=ISt(t.systemInstruction)),e}function n4r(t){return typeof t=="string"||Array.isArray(t)?{content:bV(t)}:t}var PSt=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],o4r={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};function i4r(t){let e=!1;for(let r of t){let{role:n,parts:o}=r;if(!e&&n!=="user")throw new Bd(`First content should be with role 'user', got ${n}`);if(!bSt.includes(n))throw new Bd(`Each item should include role field. Got ${n} but valid roles are: ${JSON.stringify(bSt)}`);if(!Array.isArray(o))throw new Bd("Content should have 'parts' property with an array of Parts");if(o.length===0)throw new Bd("Each Content should have at least one part");let i={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(let s of o)for(let u of PSt)u in s&&(i[u]+=1);let a=o4r[n];for(let s of PSt)if(!a.includes(s)&&i[s]>0)throw new Bd(`Content with role '${n}' can't contain '${s}' part`);e=!0}}var ESt="SILENT_ERROR",VEe=class{constructor(e,r,n,o={}){this.model=r,this.params=n,this._requestOptions=o,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=e,n?.history&&(i4r(n.history),this._history=n.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(e,r={}){var n,o,i,a,s,u;await this._sendPromise;let l=bV(e),c={safetySettings:(n=this.params)===null||n===void 0?void 0:n.safetySettings,generationConfig:(o=this.params)===null||o===void 0?void 0:o.generationConfig,tools:(i=this.params)===null||i===void 0?void 0:i.tools,toolConfig:(a=this.params)===null||a===void 0?void 0:a.toolConfig,systemInstruction:(s=this.params)===null||s===void 0?void 0:s.systemInstruction,cachedContent:(u=this.params)===null||u===void 0?void 0:u.cachedContent,contents:[...this._history,l]},d=Object.assign(Object.assign({},this._requestOptions),r),f;return this._sendPromise=this._sendPromise.then(()=>ASt(this._apiKey,this.model,c,d)).then(p=>{var m;if(p.response.candidates&&p.response.candidates.length>0){this._history.push(l);let h=Object.assign({parts:[],role:"model"},(m=p.response.candidates)===null||m===void 0?void 0:m[0].content);this._history.push(h)}else{let h=iA(p.response);h&&console.warn(`sendMessage() was unsuccessful. ${h}. Inspect response object for details.`)}f=p}),await this._sendPromise,f}async sendMessageStream(e,r={}){var n,o,i,a,s,u;await this._sendPromise;let l=bV(e),c={safetySettings:(n=this.params)===null||n===void 0?void 0:n.safetySettings,generationConfig:(o=this.params)===null||o===void 0?void 0:o.generationConfig,tools:(i=this.params)===null||i===void 0?void 0:i.tools,toolConfig:(a=this.params)===null||a===void 0?void 0:a.toolConfig,systemInstruction:(s=this.params)===null||s===void 0?void 0:s.systemInstruction,cachedContent:(u=this.params)===null||u===void 0?void 0:u.cachedContent,contents:[...this._history,l]},d=Object.assign(Object.assign({},this._requestOptions),r),f=TSt(this._apiKey,this.model,c,d);return this._sendPromise=this._sendPromise.then(()=>f).catch(p=>{throw new Error(ESt)}).then(p=>p.response).then(p=>{if(p.candidates&&p.candidates.length>0){this._history.push(l);let m=Object.assign({},p.candidates[0].content);m.role||(m.role="model"),this._history.push(m)}else{let m=iA(p);m&&console.warn(`sendMessageStream() was unsuccessful. ${m}. Inspect response object for details.`)}}).catch(p=>{p.message!==ESt&&console.error(p)}),f}};async function a4r(t,e,r,n){return(await _V(e,ij.COUNT_TOKENS,t,!1,JSON.stringify(r),n)).json()}async function s4r(t,e,r,n){return(await _V(e,ij.EMBED_CONTENT,t,!1,JSON.stringify(r),n)).json()}async function u4r(t,e,r,n){let o=r.requests.map(a=>Object.assign(Object.assign({},a),{model:e}));return(await _V(e,ij.BATCH_EMBED_CONTENTS,t,!1,JSON.stringify({requests:o}),n)).json()}var Wte=class{constructor(e,r,n={}){this.apiKey=e,this._requestOptions=n,r.model.includes("/")?this.model=r.model:this.model=`models/${r.model}`,this.generationConfig=r.generationConfig||{},this.safetySettings=r.safetySettings||[],this.tools=r.tools,this.toolConfig=r.toolConfig,this.systemInstruction=ISt(r.systemInstruction),this.cachedContent=r.cachedContent}async generateContent(e,r={}){var n;let o=OSt(e),i=Object.assign(Object.assign({},this._requestOptions),r);return ASt(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(n=this.cachedContent)===null||n===void 0?void 0:n.name},o),i)}async generateContentStream(e,r={}){var n;let o=OSt(e),i=Object.assign(Object.assign({},this._requestOptions),r);return TSt(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(n=this.cachedContent)===null||n===void 0?void 0:n.name},o),i)}startChat(e){var r;return new VEe(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(r=this.cachedContent)===null||r===void 0?void 0:r.name},e),this._requestOptions)}async countTokens(e,r={}){let n=r4r(e,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),o=Object.assign(Object.assign({},this._requestOptions),r);return a4r(this.apiKey,this.model,n,o)}async embedContent(e,r={}){let n=n4r(e),o=Object.assign(Object.assign({},this._requestOptions),r);return s4r(this.apiKey,this.model,n,o)}async batchEmbedContents(e,r={}){let n=Object.assign(Object.assign({},this._requestOptions),r);return u4r(this.apiKey,this.model,e,n)}};var aj=class{constructor(e){this.apiKey=e}getGenerativeModel(e,r){if(!e.model)throw new Bd("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new Wte(this.apiKey,e,r)}getGenerativeModelFromCachedContent(e,r,n){if(!e.name)throw new WS("Cached content must contain a `name` field.");if(!e.model)throw new WS("Cached content must contain a `model` field.");let o=["model","systemInstruction"];for(let a of o)if(r?.[a]&&e[a]&&r?.[a]!==e[a]){if(a==="model"){let s=r.model.startsWith("models/")?r.model.replace("models/",""):r.model,u=e.model.startsWith("models/")?e.model.replace("models/",""):e.model;if(s===u)continue}throw new WS(`Different value for "${a}" specified in modelParams (${r[a]}) and cachedContent (${e[a]})`)}let i=Object.assign(Object.assign({},r),{model:e.model,tools:e.tools,toolConfig:e.toolConfig,systemInstruction:e.systemInstruction,cachedContent:e});return new Wte(this.apiKey,i,n)}};um();mc();function I$(t){if(typeof t=="object"&&t!==null){let e={...t};"additionalProperties"in e&&delete e.additionalProperties,"$schema"in e&&delete e.$schema;for(let r in e)r in e&&(Array.isArray(e[r])?e[r]=e[r].map(I$):typeof e[r]=="object"&&e[r]!==null&&(e[r]=I$(e[r])));return e}return t}function Kte(t){let e=I$(ho(t)),{$schema:r,...n}=e;return n}function MSt(t){let e=I$(t),{$schema:r,...n}=e;return n}$d();Rm();function l4r(t){let e=t._getType();return gs.isInstance(t)?t.role:e==="tool"?e:t.name??e}function c4r(t){switch(t){case"ai":case"model":return"model";case"system":return"system";case"human":return"user";case"tool":case"function":return"function";default:throw new Error(`Unknown / unsupported author: ${t}`)}}function d4r(t){if("mimeType"in t&&"data"in t)return{inlineData:{mimeType:t.mimeType,data:t.data}};throw new Error("Invalid media content")}function f4r(t,e){if(typeof t.content=="string"&&t.content!=="")return[{text:t.content}];let r=[],n=[],o=[];return"tool_calls"in t&&Array.isArray(t.tool_calls)&&t.tool_calls.length>0?r=t.tool_calls.map(i=>({functionCall:{name:i.name,args:i.args}})):t.getType()==="tool"&&t.name&&t.content?n=[{functionResponse:{name:t.name,response:t.content}}]:Array.isArray(t.content)&&(o=t.content.map(i=>{if(i.type==="text")return{text:i.text};if(i.type==="executableCode")return{executableCode:i.executableCode};if(i.type==="codeExecutionResult")return{codeExecutionResult:i.codeExecutionResult};if(i.type==="image_url"){if(!e)throw new Error("This model does not support images");let a;if(typeof i.image_url=="string")a=i.image_url;else if(typeof i.image_url=="object"&&"url"in i.image_url)a=i.image_url.url;else throw new Error("Please provide image as base64 encoded data URL");let[s,u]=a.split(",");if(!s.startsWith("data:"))throw new Error("Please provide image as base64 encoded data URL");let[l,c]=s.replace(/^data:/,"").split(";");if(c!=="base64")throw new Error("Please provide image as base64 encoded data URL");return{inlineData:{data:u,mimeType:l}}}else{if(i.type==="media")return d4r(i);if(i.type==="tool_use")return{functionCall:{name:i.name,args:i.input}}}throw new Error(`Unknown content type ${i.type}`)})),[...o,...r,...n]}function KEe(t,e,r=!1){return t.reduce((n,o,i)=>{if(!dh(o))throw new Error("Unsupported message input");let a=l4r(o);if(a==="system"&&i!==0)throw new Error("System message should be the first one");let s=c4r(a),u=n.content[n.content.length];if(!n.mergeWithPreviousContent&&u&&u.role===s)throw new Error("Google Generative AI requires alternate messages between authors");let l=f4r(o,e);if(n.mergeWithPreviousContent){let f=n.content[n.content.length-1];if(!f)throw new Error("There was a problem parsing your system message. Please try a prompt without one.");return f.parts.push(...l),{mergeWithPreviousContent:!1,content:n.content}}let c=s;(c==="function"||c==="system"&&!r)&&(c="user");let d={role:c,parts:l};return{mergeWithPreviousContent:a==="system"&&!r,content:[...n.content,d]}},{content:[],mergeWithPreviousContent:!1}).content}function RSt(t,e){if(!t.candidates||t.candidates.length===0||!t.candidates[0])return{generations:[],llmOutput:{filters:t.promptFeedback}};let r=t.functionCalls(),[n]=t.candidates,{content:o,...i}=n,a;o?.parts.length===1&&o.parts[0].text?a=o.parts[0].text:a=o.parts.map(l=>"text"in l?{type:"text",text:l.text}:"executableCode"in l?{type:"executableCode",executableCode:l.executableCode}:"codeExecutionResult"in l?{type:"codeExecutionResult",codeExecutionResult:l.codeExecutionResult}:l);let s="";return typeof a=="string"?s=a:"text"in a[0]&&(s=a[0].text),{generations:[{text:s,message:new mn({content:a,tool_calls:r?.map(l=>({...l,type:"tool_call"})),additional_kwargs:{...i},usage_metadata:e?.usageMetadata}),generationInfo:i}]}}function jSt(t,e){if(!t.candidates||t.candidates.length===0)return null;let r=t.functionCalls(),[n]=t.candidates,{content:o,...i}=n,a;o?.parts&&o.parts.every(l=>"text"in l)?a=o.parts.map(l=>l.text).join(""):o.parts&&(a=o.parts.map(l=>"text"in l?{type:"text",text:l.text}:"executableCode"in l?{type:"executableCode",executableCode:l.executableCode}:"codeExecutionResult"in l?{type:"codeExecutionResult",codeExecutionResult:l.codeExecutionResult}:l));let s="";a&&typeof a=="string"?s=a:a&&typeof a=="object"&&"text"in a[0]&&(s=a[0].text);let u=[];return r&&u.push(...r.map(l=>({...l,args:JSON.stringify(l.args),index:e.index,type:"tool_call_chunk"}))),new Ln({text:s,message:new cr({content:a||"",name:o?o.role:void 0,tool_call_chunks:u,additional_kwargs:{},usage_metadata:e.usageMetadata}),generationInfo:i})}function NSt(t){return t.every(e=>"functionDeclarations"in e&&Array.isArray(e.functionDeclarations))?t:[{functionDeclarations:t.map(e=>{if(Vl(e)){let r=Kte(e.schema);return{name:e.name,description:e.description,parameters:r}}return Rc(e)?{name:e.function.name,description:e.function.description??"A function available to call.",parameters:MSt(e.function.parameters)}:e})}]}Yg();var vV=class extends ZM{static lc_name(){return"GoogleGenerativeAIToolsOutputParser"}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","google_genai","output_parsers"]}),Object.defineProperty(this,"returnId",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"keyName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"returnSingle",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"zodSchema",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.keyName=e.keyName,this.returnSingle=e.returnSingle??this.returnSingle,this.zodSchema=e.zodSchema}async _validateResult(e){if(this.zodSchema===void 0)return e;let r=await this.zodSchema.safeParseAsync(e);if(r.success)return r.data;throw new am(`Failed to parse. Text: "${JSON.stringify(e,null,2)}". Error: ${JSON.stringify(r.error.errors)}`,JSON.stringify(e,null,2))}async parseResult(e){let r=e.flatMap(i=>{let{message:a}=i;return!("tool_calls"in a)||!Array.isArray(a.tool_calls)?[]:a.tool_calls});if(r[0]===void 0)throw new Error("No parseable tool calls provided to GoogleGenerativeAIToolsOutputParser.");let[n]=r;return await this._validateResult(n.args)}};Rm();function GEe(t,e){let r=p4r(t),n=h4r(r,e);return{tools:r,toolConfig:n}}function p4r(t){let e=[],r=[];return t.forEach(o=>{if(Vl(o)){let[i]=NSt([o]);i.functionDeclarations&&e.push(...i.functionDeclarations)}else if(Rc(o)){let{functionDeclarations:i}=m4r(o);if(i)e.push(...i);else throw new Error("Failed to convert OpenAI structured tool to GenerativeAI tool")}else r.push(o)}),r.find(o=>"functionDeclarations"in o)?r.map(o=>{if(e?.length>0&&"functionDeclarations"in o){let i={functionDeclarations:[...o.functionDeclarations||[],...e]};return e=[],i}return o}):[...r,...e.length>0?[{functionDeclarations:e}]:[]]}function m4r(t){return{functionDeclarations:[{name:t.function.name,description:t.function.description,parameters:I$(t.function.parameters)}]}}function h4r(t,e){if(!t.length||!e)return;let{toolChoice:r,allowedFunctionNames:n}=e,o={any:oj.ANY,auto:oj.AUTO,none:oj.NONE};if(r&&["any","auto","none"].includes(r))return{functionCallingConfig:{mode:o[r]??"MODE_UNSPECIFIED",allowedFunctionNames:n}};if(typeof r=="string"||n)return{functionCallingConfig:{mode:oj.ANY,allowedFunctionNames:[...n??[],...r&&typeof r=="string"?[r]:[]]}}}var Gte=class extends Bs{static lc_name(){return"ChatGoogleGenerativeAI"}get lc_secrets(){return{apiKey:"GOOGLE_API_KEY"}}get lc_aliases(){return{apiKey:"google_api_key"}}get _isMultimodalModel(){return this.model.includes("vision")||this.model.startsWith("gemini-1.5")||this.model.startsWith("gemini-2")}constructor(e){if(super(e??{}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","chat_models","google_genai"]}),Object.defineProperty(this,"modelName",{enumerable:!0,configurable:!0,writable:!0,value:"gemini-pro"}),Object.defineProperty(this,"model",{enumerable:!0,configurable:!0,writable:!0,value:"gemini-pro"}),Object.defineProperty(this,"temperature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"maxOutputTokens",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"topP",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"topK",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"stopSequences",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"safetySettings",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"apiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"streaming",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"streamUsage",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"convertSystemMessageToHumanContent",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.modelName=e?.model?.replace(/^models\//,"")??e?.modelName?.replace(/^models\//,"")??this.model,this.model=this.modelName,this.maxOutputTokens=e?.maxOutputTokens??this.maxOutputTokens,this.maxOutputTokens&&this.maxOutputTokens<0)throw new Error("`maxOutputTokens` must be a positive integer");if(this.temperature=e?.temperature??this.temperature,this.temperature&&(this.temperature<0||this.temperature>1))throw new Error("`temperature` must be in the range of [0.0,1.0]");if(this.topP=e?.topP??this.topP,this.topP&&this.topP<0)throw new Error("`topP` must be a positive integer");if(this.topP&&this.topP>1)throw new Error("`topP` must be below 1.");if(this.topK=e?.topK??this.topK,this.topK&&this.topK<0)throw new Error("`topK` must be a positive integer");if(this.stopSequences=e?.stopSequences??this.stopSequences,this.apiKey=e?.apiKey??ot("GOOGLE_API_KEY"),!this.apiKey)throw new Error("Please set an API key for Google GenerativeAI in the environment variable GOOGLE_API_KEY or in the `apiKey` field of the ChatGoogleGenerativeAI constructor");if(this.safetySettings=e?.safetySettings??this.safetySettings,this.safetySettings&&this.safetySettings.length>0&&new Set(this.safetySettings.map(n=>n.category)).size!==this.safetySettings.length)throw new Error("The categories in `safetySettings` array must be unique");this.streaming=e?.streaming??this.streaming,this.client=new aj(this.apiKey).getGenerativeModel({model:this.model,safetySettings:this.safetySettings,generationConfig:{candidateCount:1,stopSequences:this.stopSequences,maxOutputTokens:this.maxOutputTokens,temperature:this.temperature,topP:this.topP,topK:this.topK,...e?.json?{responseMimeType:"application/json"}:{}}},{apiVersion:e?.apiVersion,baseUrl:e?.baseUrl}),this.streamUsage=e?.streamUsage??this.streamUsage}useCachedContent(e,r,n){this.apiKey&&(this.client=new aj(this.apiKey).getGenerativeModelFromCachedContent(e,r,n))}get useSystemInstruction(){return typeof this.convertSystemMessageToHumanContent=="boolean"?!this.convertSystemMessageToHumanContent:this.computeUseSystemInstruction}get computeUseSystemInstruction(){return this.modelName==="gemini-1.0-pro-001"||this.modelName.startsWith("gemini-pro-vision")||this.modelName.startsWith("gemini-1.0-pro-vision")?!1:this.modelName!=="gemini-pro"}getLsParams(e){return{ls_provider:"google_genai",ls_model_name:this.model,ls_model_type:"chat",ls_temperature:this.client.generationConfig.temperature,ls_max_tokens:this.client.generationConfig.maxOutputTokens,ls_stop:e.stop}}_combineLLMOutput(){return[]}_llmType(){return"googlegenerativeai"}bindTools(e,r){return this.bind({tools:GEe(e)?.tools,...r})}invocationParams(e){let r=e?.tools?.length?GEe(e.tools,{toolChoice:e.tool_choice,allowedFunctionNames:e.allowedFunctionNames}):void 0;return{...r?.tools?{tools:r.tools}:{},...r?.toolConfig?{toolConfig:r.toolConfig}:{}}}async _generate(e,r,n){let o=KEe(e,this._isMultimodalModel,this.useSystemInstruction),i=o;if(o[0].role==="system"){let[c]=o;this.client.systemInstruction=c,i=o.slice(1)}let a=this.invocationParams(r);if(this.streaming){let c={},d=this._streamResponseChunks(e,r,n),f={};for await(let m of d){let h=m.generationInfo?.completion??0;f[h]===void 0?f[h]=m:f[h]=f[h].concat(m)}return{generations:Object.entries(f).sort(([m],[h])=>parseInt(m,10)-parseInt(h,10)).map(([m,h])=>h),llmOutput:{estimatedTokenUsage:c}}}let s=await this.completionWithRetry({...a,contents:i}),u;if("usageMetadata"in s.response){let c=s.response.usageMetadata;u={input_tokens:c.promptTokenCount??0,output_tokens:c.candidatesTokenCount??0,total_tokens:c.totalTokenCount??0}}let l=RSt(s.response,{usageMetadata:u});return await n?.handleLLMNewToken(l.generations[0].text??""),l}async*_streamResponseChunks(e,r,n){let o=KEe(e,this._isMultimodalModel,this.useSystemInstruction),i=o;if(o[0].role==="system"){let[d]=o;this.client.systemInstruction=d,i=o.slice(1)}let s={...this.invocationParams(r),contents:i},u=await this.caller.callWithOptions({signal:r?.signal},async()=>{let{stream:d}=await this.client.generateContentStream(s);return d}),l,c=0;for await(let d of u){if("usageMetadata"in d&&this.streamUsage!==!1&&r.streamUsage!==!1){let p=d.usageMetadata;if(!l)l={input_tokens:p.promptTokenCount,output_tokens:p.candidatesTokenCount,total_tokens:p.totalTokenCount};else{let m=p.candidatesTokenCount-l.output_tokens;l={input_tokens:0,output_tokens:m,total_tokens:m}}}let f=jSt(d,{usageMetadata:l,index:c});c+=1,f&&(yield f,await n?.handleLLMNewToken(f.text??""))}}async completionWithRetry(e,r){return this.caller.callWithOptions({signal:r?.signal},async()=>{try{return await this.client.generateContent(e)}catch(n){throw n.message?.includes("400 Bad Request")&&(n.status=400),n}})}withStructuredOutput(e,r){let n=e,o=r?.name,i=r?.method,a=r?.includeRaw;if(i==="jsonMode")throw new Error('ChatGoogleGenerativeAI only supports "functionCalling" as a method.');let s=o??"extract",u,l;if($s(n)){let m=Kte(n);l=[{functionDeclarations:[{name:s,description:m.description??"A function available to call.",parameters:m}]}],u=new vV({returnSingle:!0,keyName:s,zodSchema:n})}else{let m;typeof n.name=="string"&&typeof n.parameters=="object"&&n.parameters!=null?(m=n,s=n.name):m={name:s,description:n.description??"",parameters:n},l=[{functionDeclarations:[m]}],u=new vV({returnSingle:!0,keyName:s})}let c=this.bind({tools:l,tool_choice:s});if(!a)return c.pipe(u).withConfig({runName:"ChatGoogleGenerativeAIStructuredOutput"});let d=lo.assign({parsed:(m,h)=>u.invoke(m.raw,h)}),f=lo.assign({parsed:()=>null}),p=d.withFallbacks({fallbacks:[f]});return di.from([{raw:c},p]).withConfig({runName:"StructuredOutputRunnable"})}};var Jte=class extends Nf{constructor(e){if(super(e??{}),Object.defineProperty(this,"apiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"modelName",{enumerable:!0,configurable:!0,writable:!0,value:"embedding-001"}),Object.defineProperty(this,"model",{enumerable:!0,configurable:!0,writable:!0,value:"embedding-001"}),Object.defineProperty(this,"taskType",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"title",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"stripNewLines",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"maxBatchSize",{enumerable:!0,configurable:!0,writable:!0,value:100}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.modelName=e?.model?.replace(/^models\//,"")??e?.modelName?.replace(/^models\//,"")??this.modelName,this.model=this.modelName,this.taskType=e?.taskType??this.taskType,this.title=e?.title??this.title,this.title&&this.taskType!=="RETRIEVAL_DOCUMENT")throw new Error("title can only be sepcified with TaskType.RETRIEVAL_DOCUMENT");if(this.apiKey=e?.apiKey??ot("GOOGLE_API_KEY"),!this.apiKey)throw new Error("Please set an API key for Google GenerativeAI in the environmentb variable GOOGLE_API_KEY or in the `apiKey` field of the GoogleGenerativeAIEmbeddings constructor");this.client=new aj(this.apiKey).getGenerativeModel({model:this.model})}_convertToContent(e){return{content:{role:"user",parts:[{text:this.stripNewLines?e.replace(/\n/g," "):e}]},taskType:this.taskType,title:this.title}}async _embedQueryContent(e){let r=this._convertToContent(e);return(await this.client.embedContent(r)).embedding.values??[]}async _embedDocumentsContent(e){let r=Df(e,this.maxBatchSize),n=r.map(a=>({requests:a.map(s=>this._convertToContent(s))}));return(await Promise.allSettled(n.map(a=>this.client.batchEmbedContents(a)))).flatMap((a,s)=>a.status==="fulfilled"?a.value.embeddings.map(u=>u.values||[]):Array(r[s].length).fill([]))}embedQuery(e){return this.caller.call(this._embedQueryContent.bind(this),e)}embedDocuments(e){return this.caller.call(this._embedDocumentsContent.bind(this),e)}};var Nc=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof window<"u"&&window||{},Lf={searchParams:"URLSearchParams"in Nc,iterable:"Symbol"in Nc&&"iterator"in Symbol,blob:"FileReader"in Nc&&"Blob"in Nc&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in Nc,arrayBuffer:"ArrayBuffer"in Nc};function g4r(t){return t&&DataView.prototype.isPrototypeOf(t)}Lf.arrayBuffer&&(DSt=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],FSt=ArrayBuffer.isView||function(t){return t&&DSt.indexOf(Object.prototype.toString.call(t))>-1});var DSt,FSt;function M$(t){if(typeof t!="string"&&(t=String(t)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(t)||t==="")throw new TypeError('Invalid character in header field name: "'+t+'"');return t.toLowerCase()}function YEe(t){return typeof t!="string"&&(t=String(t)),t}function ZEe(t){var e={next:function(){var r=t.shift();return{done:r===void 0,value:r}}};return Lf.iterable&&(e[Symbol.iterator]=function(){return e}),e}function Sl(t){this.map={},t instanceof Sl?t.forEach(function(e,r){this.append(r,e)},this):Array.isArray(t)?t.forEach(function(e){if(e.length!=2)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+e.length);this.append(e[0],e[1])},this):t&&Object.getOwnPropertyNames(t).forEach(function(e){this.append(e,t[e])},this)}Sl.prototype.append=function(t,e){t=M$(t),e=YEe(e);var r=this.map[t];this.map[t]=r?r+", "+e:e};Sl.prototype.delete=function(t){delete this.map[M$(t)]};Sl.prototype.get=function(t){return t=M$(t),this.has(t)?this.map[t]:null};Sl.prototype.has=function(t){return this.map.hasOwnProperty(M$(t))};Sl.prototype.set=function(t,e){this.map[M$(t)]=YEe(e)};Sl.prototype.forEach=function(t,e){for(var r in this.map)this.map.hasOwnProperty(r)&&t.call(e,this.map[r],r,this)};Sl.prototype.keys=function(){var t=[];return this.forEach(function(e,r){t.push(r)}),ZEe(t)};Sl.prototype.values=function(){var t=[];return this.forEach(function(e){t.push(e)}),ZEe(t)};Sl.prototype.entries=function(){var t=[];return this.forEach(function(e,r){t.push([r,e])}),ZEe(t)};Lf.iterable&&(Sl.prototype[Symbol.iterator]=Sl.prototype.entries);function JEe(t){if(!t._noBody){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}}function kSt(t){return new Promise(function(e,r){t.onload=function(){e(t.result)},t.onerror=function(){r(t.error)}})}function y4r(t){var e=new FileReader,r=kSt(e);return e.readAsArrayBuffer(t),r}function b4r(t){var e=new FileReader,r=kSt(e),n=/charset=([A-Za-z0-9_-]+)/.exec(t.type),o=n?n[1]:"utf-8";return e.readAsText(t,o),r}function _4r(t){for(var e=new Uint8Array(t),r=new Array(e.length),n=0;n<e.length;n++)r[n]=String.fromCharCode(e[n]);return r.join("")}function LSt(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function $St(){return this.bodyUsed=!1,this._initBody=function(t){this.bodyUsed=this.bodyUsed,this._bodyInit=t,t?typeof t=="string"?this._bodyText=t:Lf.blob&&Blob.prototype.isPrototypeOf(t)?this._bodyBlob=t:Lf.formData&&FormData.prototype.isPrototypeOf(t)?this._bodyFormData=t:Lf.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)?this._bodyText=t.toString():Lf.arrayBuffer&&Lf.blob&&g4r(t)?(this._bodyArrayBuffer=LSt(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):Lf.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(t)||FSt(t))?this._bodyArrayBuffer=LSt(t):this._bodyText=t=Object.prototype.toString.call(t):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||(typeof t=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):Lf.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},Lf.blob&&(this.blob=function(){var t=JEe(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var t=JEe(this);return t||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else{if(Lf.blob)return this.blob().then(y4r);throw new Error("could not read as ArrayBuffer")}},this.text=function(){var t=JEe(this);if(t)return t;if(this._bodyBlob)return b4r(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(_4r(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},Lf.formData&&(this.formData=function(){return this.text().then(S4r)}),this.json=function(){return this.text().then(JSON.parse)},this}var v4r=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function w4r(t){var e=t.toUpperCase();return v4r.indexOf(e)>-1?e:t}function uj(t,e){if(!(this instanceof uj))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');e=e||{};var r=e.body;if(t instanceof uj){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new Sl(t.headers)),this.method=t.method,this.mode=t.mode,this.signal=t.signal,!r&&t._bodyInit!=null&&(r=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"same-origin",(e.headers||!this.headers)&&(this.headers=new Sl(e.headers)),this.method=w4r(e.method||this.method||"GET"),this.mode=e.mode||this.mode||null,this.signal=e.signal||this.signal||function(){if("AbortController"in Nc){var i=new AbortController;return i.signal}}(),this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&r)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(r),(this.method==="GET"||this.method==="HEAD")&&(e.cache==="no-store"||e.cache==="no-cache")){var n=/([?&])_=[^&]*/;if(n.test(this.url))this.url=this.url.replace(n,"$1_="+new Date().getTime());else{var o=/\?/;this.url+=(o.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}uj.prototype.clone=function(){return new uj(this,{body:this._bodyInit})};function S4r(t){var e=new FormData;return t.trim().split("&").forEach(function(r){if(r){var n=r.split("="),o=n.shift().replace(/\+/g," "),i=n.join("=").replace(/\+/g," ");e.append(decodeURIComponent(o),decodeURIComponent(i))}}),e}function x4r(t){var e=new Sl,r=t.replace(/\r?\n[\t ]+/g," ");return r.split("\r").map(function(n){return n.indexOf(`
`)===0?n.substr(1,n.length):n}).forEach(function(n){var o=n.split(":"),i=o.shift().trim();if(i){var a=o.join(":").trim();try{e.append(i,a)}catch(s){console.warn("Response "+s.message)}}}),e}$St.call(uj.prototype);function KS(t,e){if(!(this instanceof KS))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(e||(e={}),this.type="default",this.status=e.status===void 0?200:e.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=e.statusText===void 0?"":""+e.statusText,this.headers=new Sl(e.headers),this.url=e.url||"",this._initBody(t)}$St.call(KS.prototype);KS.prototype.clone=function(){return new KS(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new Sl(this.headers),url:this.url})};KS.error=function(){var t=new KS(null,{status:200,statusText:""});return t.ok=!1,t.status=0,t.type="error",t};var C4r=[301,302,303,307,308];KS.redirect=function(t,e){if(C4r.indexOf(e)===-1)throw new RangeError("Invalid status code");return new KS(null,{status:e,headers:{location:t}})};var sj=Nc.DOMException;try{new sj}catch{sj=function(e,r){this.message=e,this.name=r;var n=Error(e);this.stack=n.stack},sj.prototype=Object.create(Error.prototype),sj.prototype.constructor=sj}function BSt(t,e){return new Promise(function(r,n){var o=new uj(t,e);if(o.signal&&o.signal.aborted)return n(new sj("Aborted","AbortError"));var i=new XMLHttpRequest;function a(){i.abort()}i.onload=function(){var l={statusText:i.statusText,headers:x4r(i.getAllResponseHeaders()||"")};o.url.indexOf("file://")===0&&(i.status<200||i.status>599)?l.status=200:l.status=i.status,l.url="responseURL"in i?i.responseURL:l.headers.get("X-Request-URL");var c="response"in i?i.response:i.responseText;setTimeout(function(){r(new KS(c,l))},0)},i.onerror=function(){setTimeout(function(){n(new TypeError("Network request failed"))},0)},i.ontimeout=function(){setTimeout(function(){n(new TypeError("Network request timed out"))},0)},i.onabort=function(){setTimeout(function(){n(new sj("Aborted","AbortError"))},0)};function s(l){try{return l===""&&Nc.location.href?Nc.location.href:l}catch{return l}}if(i.open(o.method,s(o.url),!0),o.credentials==="include"?i.withCredentials=!0:o.credentials==="omit"&&(i.withCredentials=!1),"responseType"in i&&(Lf.blob?i.responseType="blob":Lf.arrayBuffer&&(i.responseType="arraybuffer")),e&&typeof e.headers=="object"&&!(e.headers instanceof Sl||Nc.Headers&&e.headers instanceof Nc.Headers)){var u=[];Object.getOwnPropertyNames(e.headers).forEach(function(l){u.push(M$(l)),i.setRequestHeader(l,YEe(e.headers[l]))}),o.headers.forEach(function(l,c){u.indexOf(c)===-1&&i.setRequestHeader(c,l)})}else o.headers.forEach(function(l,c){i.setRequestHeader(c,l)});o.signal&&(o.signal.addEventListener("abort",a),i.onreadystatechange=function(){i.readyState===4&&o.signal.removeEventListener("abort",a)}),i.send(typeof o._bodyInit>"u"?null:o._bodyInit)})}BSt.polyfill=!0;Nc.fetch||(Nc.fetch=BSt,Nc.Headers=Sl,Nc.Request=uj,Nc.Response=KS);var O4r="0.5.14",USt="11434",zSt=`http://127.0.0.1:${USt}`,P4r=Object.defineProperty,E4r=(t,e,r)=>e in t?P4r(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,XEe=(t,e,r)=>(E4r(t,typeof e!="symbol"?e+"":e,r),r),eTe=class t extends Error{constructor(e,r){super(e),this.error=e,this.status_code=r,this.name="ResponseError",Error.captureStackTrace&&Error.captureStackTrace(this,t)}},tTe=class{constructor(e,r,n){XEe(this,"abortController"),XEe(this,"itr"),XEe(this,"doneCallback"),this.abortController=e,this.itr=r,this.doneCallback=n}abort(){this.abortController.abort()}async*[Symbol.asyncIterator](){for await(let e of this.itr){if("error"in e)throw new Error(e.error);if(yield e,e.done||e.status==="success"){this.doneCallback();return}}throw new Error("Did not receive done or success response in stream.")}},rTe=async t=>{if(t.ok)return;let e=`Error ${t.status}: ${t.statusText}`,r=null;if(t.headers.get("content-type")?.includes("application/json"))try{r=await t.json(),e=r.error||e}catch{console.log("Failed to parse error response as JSON")}else try{console.log("Getting text from response"),e=await t.text()||e}catch{console.log("Failed to get text from error response")}throw new eTe(e,t.status)};function T4r(){if(typeof window<"u"&&window.navigator){let t=navigator;return"userAgentData"in t&&t.userAgentData?.platform?`${t.userAgentData.platform.toLowerCase()} Browser/${navigator.userAgent};`:navigator.platform?`${navigator.platform.toLowerCase()} Browser/${navigator.userAgent};`:`unknown Browser/${navigator.userAgent};`}else if(typeof process<"u")return`${process.arch} ${process.platform} Node.js/${process.version}`;return""}function A4r(t){if(t instanceof Headers){let e={};return t.forEach((r,n)=>{e[n]=r}),e}else return Array.isArray(t)?Object.fromEntries(t):t||{}}var nTe=async(t,e,r={})=>{let n={"Content-Type":"application/json",Accept:"application/json","User-Agent":`ollama-js/${O4r} (${T4r()})`};r.headers=A4r(r.headers);let o=Object.fromEntries(Object.entries(r.headers).filter(([i])=>!Object.keys(n).some(a=>a.toLowerCase()===i.toLowerCase())));return r.headers={...n,...o},t(e,r)},qSt=async(t,e,r)=>{let n=await nTe(t,e,{headers:r?.headers});return await rTe(n),n},R$=async(t,e,r,n)=>{let i=(s=>s!==null&&typeof s=="object"&&!Array.isArray(s))(r)?JSON.stringify(r):r,a=await nTe(t,e,{method:"POST",body:i,signal:n?.signal,headers:n?.headers});return await rTe(a),a},I4r=async(t,e,r,n)=>{let o=await nTe(t,e,{method:"DELETE",body:JSON.stringify(r),headers:n?.headers});return await rTe(o),o},M4r=async function*(t){let e=new TextDecoder("utf-8"),r="",n=t.getReader();for(;;){let{done:o,value:i}=await n.read();if(o)break;r+=e.decode(i);let a=r.split(`
`);r=a.pop()??"";for(let s of a)try{yield JSON.parse(s)}catch{console.warn("invalid json: ",s)}}for(let o of r.split(`
`).filter(i=>i!==""))try{yield JSON.parse(o)}catch{console.warn("invalid json: ",o)}},R4r=t=>{if(!t)return zSt;let e=t.includes("://");t.startsWith(":")&&(t=`http://127.0.0.1${t}`,e=!0),e||(t=`http://${t}`);let r=new URL(t),n=r.port;n||(e?n=r.protocol==="https:"?"443":"80":n=USt);let o=`${r.protocol}//${r.hostname}:${n}${r.pathname}`;return o.endsWith("/")&&(o=o.slice(0,-1)),o},j4r=Object.defineProperty,N4r=(t,e,r)=>e in t?j4r(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,QEe=(t,e,r)=>(N4r(t,typeof e!="symbol"?e+"":e,r),r),j$=class{constructor(e){QEe(this,"config"),QEe(this,"fetch"),QEe(this,"ongoingStreamedRequests",[]),this.config={host:"",headers:e?.headers},e?.proxy||(this.config.host=R4r(e?.host??zSt)),this.fetch=e?.fetch??fetch}abort(){for(let e of this.ongoingStreamedRequests)e.abort();this.ongoingStreamedRequests.length=0}async processStreamableRequest(e,r){r.stream=r.stream??!1;let n=`${this.config.host}/api/${e}`;if(r.stream){let i=new AbortController,a=await R$(this.fetch,n,r,{signal:i.signal,headers:this.config.headers});if(!a.body)throw new Error("Missing body");let s=M4r(a.body),u=new tTe(i,s,()=>{let l=this.ongoingStreamedRequests.indexOf(u);l>-1&&this.ongoingStreamedRequests.splice(l,1)});return this.ongoingStreamedRequests.push(u),u}return await(await R$(this.fetch,n,r,{headers:this.config.headers})).json()}async encodeImage(e){if(typeof e!="string"){let r=new Uint8Array(e),n="",o=r.byteLength;for(let i=0;i<o;i++)n+=String.fromCharCode(r[i]);return btoa(n)}return e}async generate(e){return e.images&&(e.images=await Promise.all(e.images.map(this.encodeImage.bind(this)))),this.processStreamableRequest("generate",e)}async chat(e){if(e.messages)for(let r of e.messages)r.images&&(r.images=await Promise.all(r.images.map(this.encodeImage.bind(this))));return this.processStreamableRequest("chat",e)}async create(e){return this.processStreamableRequest("create",{...e})}async pull(e){return this.processStreamableRequest("pull",{name:e.model,stream:e.stream,insecure:e.insecure})}async push(e){return this.processStreamableRequest("push",{name:e.model,stream:e.stream,insecure:e.insecure})}async delete(e){return await I4r(this.fetch,`${this.config.host}/api/delete`,{name:e.model},{headers:this.config.headers}),{status:"success"}}async copy(e){return await R$(this.fetch,`${this.config.host}/api/copy`,{...e},{headers:this.config.headers}),{status:"success"}}async list(){return await(await qSt(this.fetch,`${this.config.host}/api/tags`,{headers:this.config.headers})).json()}async show(e){return await(await R$(this.fetch,`${this.config.host}/api/show`,{...e},{headers:this.config.headers})).json()}async embed(e){return await(await R$(this.fetch,`${this.config.host}/api/embed`,{...e},{headers:this.config.headers})).json()}async embeddings(e){return await(await R$(this.fetch,`${this.config.host}/api/embeddings`,{...e},{headers:this.config.headers})).json()}async ps(){return await(await qSt(this.fetch,`${this.config.host}/api/ps`,{headers:this.config.headers})).json()}},mxo=new j$;$d();um();Pb();Yg();mc();var Dc=[];for(Yte=0;Yte<256;++Yte)Dc.push((Yte+256).toString(16).slice(1));var Yte;function HSt(t,e=0){return(Dc[t[e+0]]+Dc[t[e+1]]+Dc[t[e+2]]+Dc[t[e+3]]+"-"+Dc[t[e+4]]+Dc[t[e+5]]+"-"+Dc[t[e+6]]+Dc[t[e+7]]+"-"+Dc[t[e+8]]+Dc[t[e+9]]+"-"+Dc[t[e+10]]+Dc[t[e+11]]+Dc[t[e+12]]+Dc[t[e+13]]+Dc[t[e+14]]+Dc[t[e+15]]).toLowerCase()}var Zte,D4r=new Uint8Array(16);function oTe(){if(!Zte&&(Zte=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Zte))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Zte(D4r)}var L4r=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),iTe={randomUUID:L4r};function F4r(t,e,r){if(iTe.randomUUID&&!e&&!t)return iTe.randomUUID();t=t||{};var n=t.random||(t.rng||oTe)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){r=r||0;for(var o=0;o<16;++o)e[r+o]=n[o];return e}return HSt(n)}var aTe=F4r;function sTe(t,e){return new cr({content:t.content??"",tool_call_chunks:t.tool_calls?.map(r=>({name:r.function.name,args:JSON.stringify(r.function.arguments),type:"tool_call_chunk",index:0,id:aTe()})),response_metadata:e?.responseMetadata,usage_metadata:e?.usageMetadata})}function VSt(t){let e=t.match(/^data:.*?;base64,(.*)$/);return e?e[1]:""}function k4r(t){if(typeof t.content=="string")return[{role:"assistant",content:t.content}];let r=t.content.filter(o=>o.type==="text"&&typeof o.text=="string").map(o=>({role:"assistant",content:o.text})),n;if(t.content.find(o=>o.type==="tool_use")&&t.tool_calls?.length){let o=t.tool_calls?.map(i=>({id:i.id,type:"function",function:{name:i.name,arguments:i.args}}));o&&(n={role:"assistant",tool_calls:o,content:""})}else if(t.content.find(o=>o.type==="tool_use")&&!t.tool_calls?.length)throw new Error("'tool_use' content type is not supported without tool calls.");return[...r,...n?[n]:[]]}function $4r(t){return typeof t.content=="string"?[{role:"user",content:t.content}]:t.content.map(e=>{if(e.type==="text")return{role:"user",content:e.text};if(e.type==="image_url"){if(typeof e.image_url=="string")return{role:"user",content:"",images:[VSt(e.image_url)]};if(e.image_url.url&&typeof e.image_url.url=="string")return{role:"user",content:"",images:[VSt(e.image_url.url)]}}throw new Error(`Unsupported content type: ${e.type}`)})}function B4r(t){if(typeof t.content=="string")return[{role:"system",content:t.content}];if(t.content.every(e=>e.type==="text"&&typeof e.text=="string"))return t.content.map(e=>({role:"system",content:e.text}));throw new Error(`Unsupported content type(s): ${t.content.map(e=>e.type).join(", ")}`)}function q4r(t){if(typeof t.content!="string")throw new Error("Non string tool message content is not supported");return[{role:"tool",content:t.content}]}function WSt(t){return t.flatMap(e=>{if(["human","generic"].includes(e._getType()))return $4r(e);if(e._getType()==="ai")return k4r(e);if(e._getType()==="system")return B4r(e);if(e._getType()==="tool")return q4r(e);throw new Error(`Unsupported message type: ${e._getType()}`)})}var Xte=class extends Bs{static lc_name(){return"ChatOllama"}constructor(e){super(e??{}),Object.defineProperty(this,"model",{enumerable:!0,configurable:!0,writable:!0,value:"llama3"}),Object.defineProperty(this,"numa",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"numCtx",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"numBatch",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"numGpu",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"mainGpu",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"lowVram",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"f16Kv",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"logitsAll",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"vocabOnly",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"useMmap",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"useMlock",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"embeddingOnly",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"numThread",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"numKeep",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"seed",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"numPredict",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"topK",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"topP",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tfsZ",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"typicalP",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"repeatLastN",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"temperature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"repeatPenalty",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"presencePenalty",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"frequencyPenalty",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"mirostat",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"mirostatTau",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"mirostatEta",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"penalizeNewline",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"streaming",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"format",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"keepAlive",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"checkOrPullModel",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"baseUrl",{enumerable:!0,configurable:!0,writable:!0,value:"http://127.0.0.1:11434"}),this.client=new j$({host:e?.baseUrl,headers:e?.headers}),this.baseUrl=e?.baseUrl??this.baseUrl,this.model=e?.model??this.model,this.numa=e?.numa,this.numCtx=e?.numCtx,this.numBatch=e?.numBatch,this.numGpu=e?.numGpu,this.mainGpu=e?.mainGpu,this.lowVram=e?.lowVram,this.f16Kv=e?.f16Kv,this.logitsAll=e?.logitsAll,this.vocabOnly=e?.vocabOnly,this.useMmap=e?.useMmap,this.useMlock=e?.useMlock,this.embeddingOnly=e?.embeddingOnly,this.numThread=e?.numThread,this.numKeep=e?.numKeep,this.seed=e?.seed,this.numPredict=e?.numPredict,this.topK=e?.topK,this.topP=e?.topP,this.tfsZ=e?.tfsZ,this.typicalP=e?.typicalP,this.repeatLastN=e?.repeatLastN,this.temperature=e?.temperature,this.repeatPenalty=e?.repeatPenalty,this.presencePenalty=e?.presencePenalty,this.frequencyPenalty=e?.frequencyPenalty,this.mirostat=e?.mirostat,this.mirostatTau=e?.mirostatTau,this.mirostatEta=e?.mirostatEta,this.penalizeNewline=e?.penalizeNewline,this.streaming=e?.streaming,this.format=e?.format,this.keepAlive=e?.keepAlive,this.checkOrPullModel=e?.checkOrPullModel??this.checkOrPullModel}_llmType(){return"ollama"}async pull(e,r){let{stream:n,insecure:o,logProgress:i}={stream:!0,...r};if(n)for await(let a of await this.client.pull({model:e,insecure:o,stream:n}))i&&console.log(a);else{let a=await this.client.pull({model:e,insecure:o});i&&console.log(a)}}bindTools(e,r){return this.bind({tools:e.map(n=>VS(n)),...r})}getLsParams(e){let r=this.invocationParams(e);return{ls_provider:"ollama",ls_model_name:this.model,ls_model_type:"chat",ls_temperature:r.options?.temperature??void 0,ls_max_tokens:r.options?.num_predict??void 0,ls_stop:e.stop}}invocationParams(e){if(e?.tool_choice)throw new Error("Tool choice is not supported for ChatOllama.");return{model:this.model,format:e?.format??this.format,keep_alive:this.keepAlive,options:{numa:this.numa,num_ctx:this.numCtx,num_batch:this.numBatch,num_gpu:this.numGpu,main_gpu:this.mainGpu,low_vram:this.lowVram,f16_kv:this.f16Kv,logits_all:this.logitsAll,vocab_only:this.vocabOnly,use_mmap:this.useMmap,use_mlock:this.useMlock,embedding_only:this.embeddingOnly,num_thread:this.numThread,num_keep:this.numKeep,seed:this.seed,num_predict:this.numPredict,top_k:this.topK,top_p:this.topP,tfs_z:this.tfsZ,typical_p:this.typicalP,repeat_last_n:this.repeatLastN,temperature:this.temperature,repeat_penalty:this.repeatPenalty,presence_penalty:this.presencePenalty,frequency_penalty:this.frequencyPenalty,mirostat:this.mirostat,mirostat_tau:this.mirostatTau,mirostat_eta:this.mirostatEta,penalize_newline:this.penalizeNewline,stop:e?.stop},tools:e?.tools?.length?e.tools.map(r=>VS(r)):void 0}}async checkModelExistsOnMachine(e){let{models:r}=await this.client.list();return!!r.find(n=>n.name===e||n.name===`${e}:latest`)}async _generate(e,r,n){this.checkOrPullModel&&(await this.checkModelExistsOnMachine(this.model)||await this.pull(this.model,{logProgress:!0}));let o;for await(let a of this._streamResponseChunks(e,r,n))o?o=jl(o,a.message):o=a.message;let i=new mn({id:o?.id,content:o?.content??"",tool_calls:o?.tool_calls,response_metadata:o?.response_metadata,usage_metadata:o?.usage_metadata});return{generations:[{text:typeof i.content=="string"?i.content:"",message:i}]}}async*_streamResponseChunks(e,r,n){this.checkOrPullModel&&(await this.checkModelExistsOnMachine(this.model)||await this.pull(this.model,{logProgress:!0}));let o=this.invocationParams(r),i=WSt(e),a={input_tokens:0,output_tokens:0,total_tokens:0};if(o.tools&&o.tools.length>0){let l=await this.client.chat({...o,messages:i,stream:!1}),{message:c,...d}=l;return a.input_tokens+=d.prompt_eval_count??0,a.output_tokens+=d.eval_count??0,a.total_tokens=a.input_tokens+a.output_tokens,yield new Ln({text:c.content,message:sTe(c,{responseMetadata:d,usageMetadata:a})}),n?.handleLLMNewToken(c.content)}let s=await this.client.chat({...o,messages:i,stream:!0}),u;for await(let l of s){r.signal?.aborted&&this.client.abort();let{message:c,...d}=l;a.input_tokens+=d.prompt_eval_count??0,a.output_tokens+=d.eval_count??0,a.total_tokens=a.input_tokens+a.output_tokens,u=d,yield new Ln({text:c.content??"",message:sTe(c)}),await n?.handleLLMNewToken(c.content??"")}yield new Ln({text:"",message:new cr({content:"",response_metadata:u,usage_metadata:a})})}withStructuredOutput(e,r){if(r?.method===void 0||r?.method==="jsonSchema"){let n=$s(e),o=n?ho(e):e,i=this.bind({format:o}),a=n?hc.fromZodSchema(e):new gc;if(!r?.includeRaw)return i.pipe(a);let s=lo.assign({parsed:(c,d)=>a.invoke(c.raw,d)}),u=lo.assign({parsed:()=>null}),l=s.withFallbacks({fallbacks:[u]});return di.from([{raw:i},l])}else return super.withStructuredOutput(e,r)}};var Qte=class extends Nf{constructor(e){super({maxConcurrency:1,...e}),Object.defineProperty(this,"model",{enumerable:!0,configurable:!0,writable:!0,value:"mxbai-embed-large"}),Object.defineProperty(this,"baseUrl",{enumerable:!0,configurable:!0,writable:!0,value:"http://localhost:11434"}),Object.defineProperty(this,"keepAlive",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"requestOptions",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"truncate",{enumerable:!0,configurable:!0,writable:!0,value:!1}),this.client=new j$({host:e?.baseUrl,headers:e?.headers?new Headers(e.headers):void 0}),this.baseUrl=e?.baseUrl??this.baseUrl,this.model=e?.model??this.model,this.keepAlive=e?.keepAlive,this.truncate=e?.truncate??this.truncate,this.requestOptions=e?.requestOptions?this._convertOptions(e?.requestOptions):void 0}_convertOptions(e){let r={},n={embeddingOnly:"embedding_only",frequencyPenalty:"frequency_penalty",keepAlive:"keep_alive",logitsAll:"logits_all",lowVram:"low_vram",mainGpu:"main_gpu",mirostat:"mirostat",mirostatEta:"mirostat_eta",mirostatTau:"mirostat_tau",numBatch:"num_batch",numCtx:"num_ctx",numGpu:"num_gpu",numKeep:"num_keep",numPredict:"num_predict",numThread:"num_thread",penalizeNewline:"penalize_newline",presencePenalty:"presence_penalty",repeatLastN:"repeat_last_n",repeatPenalty:"repeat_penalty",temperature:"temperature",stop:"stop",tfsZ:"tfs_z",topK:"top_k",topP:"top_p",typicalP:"typical_p",useMlock:"use_mlock",useMmap:"use_mmap",vocabOnly:"vocab_only",f16Kv:"f16_kv",numa:"numa",seed:"seed"};for(let[o,i]of Object.entries(e)){let a=n[o];a?r[a]=i:r[o]=i}return r}async embedDocuments(e){return this.embeddingWithRetry(e)}async embedQuery(e){return(await this.embeddingWithRetry([e]))[0]}async embeddingWithRetry(e){return(await this.caller.call(()=>this.client.embed({model:this.model,input:e,keep_alive:this.keepAlive,options:this.requestOptions,truncate:this.truncate}))).embeddings}};$d();var ere="RFC3986",tre={RFC1738:t=>String(t).replace(/%20/g,"+"),RFC3986:t=>String(t)},KSt="RFC1738";var U4r=Array.isArray,GS=(()=>{let t=[];for(let e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t})();var uTe=1024,GSt=(t,e,r,n,o)=>{if(t.length===0)return t;let i=t;if(typeof t=="symbol"?i=Symbol.prototype.toString.call(t):typeof t!="string"&&(i=String(t)),r==="iso-8859-1")return escape(i).replace(/%u[0-9a-f]{4}/gi,function(s){return"%26%23"+parseInt(s.slice(2),16)+"%3B"});let a="";for(let s=0;s<i.length;s+=uTe){let u=i.length>=uTe?i.slice(s,s+uTe):i,l=[];for(let c=0;c<u.length;++c){let d=u.charCodeAt(c);if(d===45||d===46||d===95||d===126||d>=48&&d<=57||d>=65&&d<=90||d>=97&&d<=122||o===KSt&&(d===40||d===41)){l[l.length]=u.charAt(c);continue}if(d<128){l[l.length]=GS[d];continue}if(d<2048){l[l.length]=GS[192|d>>6]+GS[128|d&63];continue}if(d<55296||d>=57344){l[l.length]=GS[224|d>>12]+GS[128|d>>6&63]+GS[128|d&63];continue}c+=1,d=65536+((d&1023)<<10|u.charCodeAt(c)&1023),l[l.length]=GS[240|d>>18]+GS[128|d>>12&63]+GS[128|d>>6&63]+GS[128|d&63]}a+=l.join("")}return a};function JSt(t){return!t||typeof t!="object"?!1:!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))}function lTe(t,e){if(U4r(t)){let r=[];for(let n=0;n<t.length;n+=1)r.push(e(t[n]));return r}return e(t)}var z4r=Object.prototype.hasOwnProperty,YSt={brackets(t){return String(t)+"[]"},comma:"comma",indices(t,e){return String(t)+"["+e+"]"},repeat(t){return String(t)}},JS=Array.isArray,H4r=Array.prototype.push,ZSt=function(t,e){H4r.apply(t,JS(e)?e:[e])},V4r=Date.prototype.toISOString,xl={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:GSt,encodeValuesOnly:!1,format:ere,formatter:tre[ere],indices:!1,serializeDate(t){return V4r.call(t)},skipNulls:!1,strictNullHandling:!1};function W4r(t){return typeof t=="string"||typeof t=="number"||typeof t=="boolean"||typeof t=="symbol"||typeof t=="bigint"}var cTe={};function XSt(t,e,r,n,o,i,a,s,u,l,c,d,f,p,m,h,b,g){let y=t,w=g,S=0,C=!1;for(;(w=w.get(cTe))!==void 0&&!C;){let R=w.get(t);if(S+=1,typeof R<"u"){if(R===S)throw new RangeError("Cyclic object value");C=!0}typeof w.get(cTe)>"u"&&(S=0)}if(typeof l=="function"?y=l(e,y):y instanceof Date?y=f?.(y):r==="comma"&&JS(y)&&(y=lTe(y,function(R){return R instanceof Date?f?.(R):R})),y===null){if(i)return u&&!h?u(e,xl.encoder,b,"key",p):e;y=""}if(W4r(y)||JSt(y)){if(u){let R=h?e:u(e,xl.encoder,b,"key",p);return[m?.(R)+"="+m?.(u(y,xl.encoder,b,"value",p))]}return[m?.(e)+"="+m?.(String(y))]}let P=[];if(typeof y>"u")return P;let E;if(r==="comma"&&JS(y))h&&u&&(y=lTe(y,u)),E=[{value:y.length>0?y.join(",")||null:void 0}];else if(JS(l))E=l;else{let R=Object.keys(y);E=c?R.sort(c):R}let A=s?String(e).replace(/\./g,"%2E"):String(e),I=n&&JS(y)&&y.length===1?A+"[]":A;if(o&&JS(y)&&y.length===0)return I+"[]";for(let R=0;R<E.length;++R){let j=E[R],N=typeof j=="object"&&typeof j.value<"u"?j.value:y[j];if(a&&N===null)continue;let $=d&&s?j.replace(/\./g,"%2E"):j,k=JS(y)?typeof r=="function"?r(I,$):I:I+(d?"."+$:"["+$+"]");g.set(t,S);let H=new WeakMap;H.set(cTe,g),ZSt(P,XSt(N,k,r,n,o,i,a,s,r==="comma"&&h&&JS(y)?null:u,l,c,d,f,p,m,h,b,H))}return P}function K4r(t=xl){if(typeof t.allowEmptyArrays<"u"&&typeof t.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof t.encodeDotInKeys<"u"&&typeof t.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(t.encoder!==null&&typeof t.encoder<"u"&&typeof t.encoder!="function")throw new TypeError("Encoder has to be a function.");let e=t.charset||xl.charset;if(typeof t.charset<"u"&&t.charset!=="utf-8"&&t.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");let r=ere;if(typeof t.format<"u"){if(!z4r.call(tre,t.format))throw new TypeError("Unknown format option provided.");r=t.format}let n=tre[r],o=xl.filter;(typeof t.filter=="function"||JS(t.filter))&&(o=t.filter);let i;if(t.arrayFormat&&t.arrayFormat in YSt?i=t.arrayFormat:"indices"in t?i=t.indices?"indices":"repeat":i=xl.arrayFormat,"commaRoundTrip"in t&&typeof t.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");let a=typeof t.allowDots>"u"?t.encodeDotInKeys?!0:xl.allowDots:!!t.allowDots;return{addQueryPrefix:typeof t.addQueryPrefix=="boolean"?t.addQueryPrefix:xl.addQueryPrefix,allowDots:a,allowEmptyArrays:typeof t.allowEmptyArrays=="boolean"?!!t.allowEmptyArrays:xl.allowEmptyArrays,arrayFormat:i,charset:e,charsetSentinel:typeof t.charsetSentinel=="boolean"?t.charsetSentinel:xl.charsetSentinel,commaRoundTrip:!!t.commaRoundTrip,delimiter:typeof t.delimiter>"u"?xl.delimiter:t.delimiter,encode:typeof t.encode=="boolean"?t.encode:xl.encode,encodeDotInKeys:typeof t.encodeDotInKeys=="boolean"?t.encodeDotInKeys:xl.encodeDotInKeys,encoder:typeof t.encoder=="function"?t.encoder:xl.encoder,encodeValuesOnly:typeof t.encodeValuesOnly=="boolean"?t.encodeValuesOnly:xl.encodeValuesOnly,filter:o,format:r,formatter:n,serializeDate:typeof t.serializeDate=="function"?t.serializeDate:xl.serializeDate,skipNulls:typeof t.skipNulls=="boolean"?t.skipNulls:xl.skipNulls,sort:typeof t.sort=="function"?t.sort:null,strictNullHandling:typeof t.strictNullHandling=="boolean"?t.strictNullHandling:xl.strictNullHandling}}function dTe(t,e={}){let r=t,n=K4r(e),o,i;typeof n.filter=="function"?(i=n.filter,r=i("",r)):JS(n.filter)&&(i=n.filter,o=i);let a=[];if(typeof r!="object"||r===null)return"";let s=YSt[n.arrayFormat],u=s==="comma"&&n.commaRoundTrip;o||(o=Object.keys(r)),n.sort&&o.sort(n.sort);let l=new WeakMap;for(let f=0;f<o.length;++f){let p=o[f];n.skipNulls&&r[p]===null||ZSt(a,XSt(r[p],p,s,u,n.allowEmptyArrays,n.strictNullHandling,n.skipNulls,n.encodeDotInKeys,n.encode?n.encoder:null,n.filter,n.sort,n.allowDots,n.serializeDate,n.format,n.formatter,n.encodeValuesOnly,n.charset,l))}let c=a.join(n.delimiter),d=n.addQueryPrefix===!0?"?":"";return n.charsetSentinel&&(n.charset==="iso-8859-1"?d+="utf8=%26%2310003%3B&":d+="utf8=%E2%9C%93&"),c.length>0?d+c:""}var lj="4.95.1";var QSt=!1,cj,fTe,J4r,Y4r,Z4r,pTe,X4r,rre,mTe,hTe,gTe,nre,yTe;function ext(t,e={auto:!1}){if(QSt)throw new Error(`you must \`import 'openai/shims/${t.kind}'\` before importing anything else from openai`);if(cj)throw new Error(`can't \`import 'openai/shims/${t.kind}'\` after \`import 'openai/shims/${cj}'\``);QSt=e.auto,cj=t.kind,fTe=t.fetch,J4r=t.Request,Y4r=t.Response,Z4r=t.Headers,pTe=t.FormData,X4r=t.Blob,rre=t.File,mTe=t.ReadableStream,hTe=t.getMultipartRequestOptions,gTe=t.getDefaultAgent,nre=t.fileFromPath,yTe=t.isFsReadStream}var ore=class{constructor(e){this.body=e}get[Symbol.toStringTag](){return"MultipartBody"}};function txt({manuallyImported:t}={}){let e=t?"You may need to use polyfills":"Add one of these imports before your first `import \u2026 from 'openai'`:\n- `import 'openai/shims/node'` (if you're running on Node)\n- `import 'openai/shims/web'` (otherwise)\n",r,n,o,i;try{r=fetch,n=Request,o=Response,i=Headers}catch(a){throw new Error(`this environment is missing the following Web Fetch API type: ${a.message}. ${e}`)}return{kind:"web",fetch:r,Request:n,Response:o,Headers:i,FormData:typeof FormData<"u"?FormData:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'FormData' is undefined. ${e}`)}},Blob:typeof Blob<"u"?Blob:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'Blob' is undefined. ${e}`)}},File:typeof File<"u"?File:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'File' is undefined. ${e}`)}},ReadableStream:typeof ReadableStream<"u"?ReadableStream:class{constructor(){throw new Error(`streaming isn't supported in this environment yet as 'ReadableStream' is undefined. ${e}`)}},getMultipartRequestOptions:async(a,s)=>({...s,body:new ore(a)}),getDefaultAgent:a=>{},fileFromPath:()=>{throw new Error("The `fileFromPath` function is only supported in Node. See the README for more details: https://www.github.com/openai/openai-node#file-uploads")},isFsReadStream:a=>!1}}var bTe=()=>{cj||ext(txt(),{auto:!0})};bTe();var _t=class extends Error{},qs=class t extends _t{constructor(e,r,n,o){super(`${t.makeMessage(e,r,n)}`),this.status=e,this.headers=o,this.request_id=o?.["x-request-id"],this.error=r;let i=r;this.code=i?.code,this.param=i?.param,this.type=i?.type}static makeMessage(e,r,n){let o=r?.message?typeof r.message=="string"?r.message:JSON.stringify(r.message):r?JSON.stringify(r):n;return e&&o?`${e} ${o}`:e?`${e} status code (no body)`:o||"(no status code or body)"}static generate(e,r,n,o){if(!e||!o)return new gO({message:n,cause:ire(r)});let i=r?.error;return e===400?new N$(e,i,n,o):e===401?new D$(e,i,n,o):e===403?new L$(e,i,n,o):e===404?new F$(e,i,n,o):e===409?new k$(e,i,n,o):e===422?new $$(e,i,n,o):e===429?new B$(e,i,n,o):e>=500?new q$(e,i,n,o):new t(e,i,n,o)}},Ai=class extends qs{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}},gO=class extends qs{constructor({message:e,cause:r}){super(void 0,void 0,e||"Connection error.",void 0),r&&(this.cause=r)}},Ff=class extends gO{constructor({message:e}={}){super({message:e??"Request timed out."})}},N$=class extends qs{},D$=class extends qs{},L$=class extends qs{},F$=class extends qs{},k$=class extends qs{},$$=class extends qs{},B$=class extends qs{},q$=class extends qs{},U$=class extends _t{constructor(){super("Could not parse response content as the length limit was reached")}},z$=class extends _t{constructor(){super("Could not parse response content as the request was rejected by the content filter")}};var are=function(t,e,r,n,o){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!o:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?o.call(t,r):o?o.value=r:e.set(t,r),r},dj=function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},jm,fj=class{constructor(){jm.set(this,void 0),this.buffer=new Uint8Array,are(this,jm,null,"f")}decode(e){if(e==null)return[];let r=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?new TextEncoder().encode(e):e,n=new Uint8Array(this.buffer.length+r.length);n.set(this.buffer),n.set(r,this.buffer.length),this.buffer=n;let o=[],i;for(;(i=t3r(this.buffer,dj(this,jm,"f")))!=null;){if(i.carriage&&dj(this,jm,"f")==null){are(this,jm,i.index,"f");continue}if(dj(this,jm,"f")!=null&&(i.index!==dj(this,jm,"f")+1||i.carriage)){o.push(this.decodeText(this.buffer.slice(0,dj(this,jm,"f")-1))),this.buffer=this.buffer.slice(dj(this,jm,"f")),are(this,jm,null,"f");continue}let a=dj(this,jm,"f")!==null?i.preceding-1:i.preceding,s=this.decodeText(this.buffer.slice(0,a));o.push(s),this.buffer=this.buffer.slice(i.index),are(this,jm,null,"f")}return o}decodeText(e){if(e==null)return"";if(typeof e=="string")return e;if(typeof Buffer<"u"){if(e instanceof Buffer)return e.toString();if(e instanceof Uint8Array)return Buffer.from(e).toString();throw new _t(`Unexpected: received non-Uint8Array (${e.constructor.name}) stream chunk in an environment with a global "Buffer" defined, which this library assumes to be Node. Please report this error.`)}if(typeof TextDecoder<"u"){if(e instanceof Uint8Array||e instanceof ArrayBuffer)return this.textDecoder??(this.textDecoder=new TextDecoder("utf8")),this.textDecoder.decode(e);throw new _t(`Unexpected: received non-Uint8Array/ArrayBuffer (${e.constructor.name}) in a web platform. Please report this error.`)}throw new _t("Unexpected: neither Buffer nor TextDecoder are available as globals. Please report this error.")}flush(){return this.buffer.length?this.decode(`
`):[]}};jm=new WeakMap;fj.NEWLINE_CHARS=new Set([`
`,"\r"]);fj.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function t3r(t,e){for(let o=e??0;o<t.length;o++){if(t[o]===10)return{preceding:o,index:o+1,carriage:!1};if(t[o]===13)return{preceding:o,index:o+1,carriage:!0}}return null}function rxt(t){for(let n=0;n<t.length-1;n++){if(t[n]===10&&t[n+1]===10||t[n]===13&&t[n+1]===13)return n+2;if(t[n]===13&&t[n+1]===10&&n+3<t.length&&t[n+2]===13&&t[n+3]===10)return n+4}return-1}function _Te(t){if(t[Symbol.asyncIterator])return t;let e=t.getReader();return{async next(){try{let r=await e.read();return r?.done&&e.releaseLock(),r}catch(r){throw e.releaseLock(),r}},async return(){let r=e.cancel();return e.releaseLock(),await r,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}var YS=class t{constructor(e,r){this.iterator=e,this.controller=r}static fromSSEResponse(e,r){let n=!1;async function*o(){if(n)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");n=!0;let i=!1;try{for await(let a of r3r(e,r))if(!i){if(a.data.startsWith("[DONE]")){i=!0;continue}if(a.event===null||a.event.startsWith("response.")||a.event.startsWith("transcript.")){let s;try{s=JSON.parse(a.data)}catch(u){throw console.error("Could not parse message into JSON:",a.data),console.error("From chunk:",a.raw),u}if(s&&s.error)throw new qs(void 0,s.error,void 0,wTe(e.headers));yield s}else{let s;try{s=JSON.parse(a.data)}catch(u){throw console.error("Could not parse message into JSON:",a.data),console.error("From chunk:",a.raw),u}if(a.event=="error")throw new qs(void 0,s.error,s.message,void 0);yield{event:a.event,data:s}}}i=!0}catch(a){if(a instanceof Error&&a.name==="AbortError")return;throw a}finally{i||r.abort()}}return new t(o,r)}static fromReadableStream(e,r){let n=!1;async function*o(){let a=new fj,s=_Te(e);for await(let u of s)for(let l of a.decode(u))yield l;for(let u of a.flush())yield u}async function*i(){if(n)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");n=!0;let a=!1;try{for await(let s of o())a||s&&(yield JSON.parse(s));a=!0}catch(s){if(s instanceof Error&&s.name==="AbortError")return;throw s}finally{a||r.abort()}}return new t(i,r)}[Symbol.asyncIterator](){return this.iterator()}tee(){let e=[],r=[],n=this.iterator(),o=i=>({next:()=>{if(i.length===0){let a=n.next();e.push(a),r.push(a)}return i.shift()}});return[new t(()=>o(e),this.controller),new t(()=>o(r),this.controller)]}toReadableStream(){let e=this,r,n=new TextEncoder;return new mTe({async start(){r=e[Symbol.asyncIterator]()},async pull(o){try{let{value:i,done:a}=await r.next();if(a)return o.close();let s=n.encode(JSON.stringify(i)+`
`);o.enqueue(s)}catch(i){o.error(i)}},async cancel(){await r.return?.()}})}};async function*r3r(t,e){if(!t.body)throw e.abort(),new _t("Attempted to iterate over a response with no body");let r=new vTe,n=new fj,o=_Te(t.body);for await(let i of n3r(o))for(let a of n.decode(i)){let s=r.decode(a);s&&(yield s)}for(let i of n.flush()){let a=r.decode(i);a&&(yield a)}}async function*n3r(t){let e=new Uint8Array;for await(let r of t){if(r==null)continue;let n=r instanceof ArrayBuffer?new Uint8Array(r):typeof r=="string"?new TextEncoder().encode(r):r,o=new Uint8Array(e.length+n.length);o.set(e),o.set(n,e.length),e=o;let i;for(;(i=rxt(e))!==-1;)yield e.slice(0,i),e=e.slice(i)}e.length>0&&(yield e)}var vTe=class{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;let i={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],i}if(this.chunks.push(e),e.startsWith(":"))return null;let[r,n,o]=o3r(e,":");return o.startsWith(" ")&&(o=o.substring(1)),r==="event"?this.event=o:r==="data"&&this.data.push(o),null}};function o3r(t,e){let r=t.indexOf(e);return r!==-1?[t.substring(0,r),e,t.substring(r+e.length)]:[t,"",""]}var nxt=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function",oxt=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&wV(t),wV=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",i3r=t=>oxt(t)||nxt(t)||yTe(t);async function CTe(t,e,r){if(t=await t,oxt(t))return t;if(nxt(t)){let o=await t.blob();e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()??"unknown_file");let i=wV(o)?[await o.arrayBuffer()]:[o];return new rre(i,e,r)}let n=await a3r(t);if(e||(e=u3r(t)??"unknown_file"),!r?.type){let o=n[0]?.type;typeof o=="string"&&(r={...r,type:o})}return new rre(n,e,r)}async function a3r(t){let e=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)e.push(t);else if(wV(t))e.push(await t.arrayBuffer());else if(l3r(t))for await(let r of t)e.push(r);else throw new Error(`Unexpected data type: ${typeof t}; constructor: ${t?.constructor?.name}; props: ${s3r(t)}`);return e}function s3r(t){return`[${Object.getOwnPropertyNames(t).map(r=>`"${r}"`).join(", ")}]`}function u3r(t){return STe(t.name)||STe(t.filename)||STe(t.path)?.split(/[\\/]/).pop()}var STe=t=>{if(typeof t=="string")return t;if(typeof Buffer<"u"&&t instanceof Buffer)return String(t)},l3r=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function",OTe=t=>t&&typeof t=="object"&&t.body&&t[Symbol.toStringTag]==="MultipartBody";var Yh=async t=>{let e=await ixt(t.body);return hTe(e,t)},ixt=async t=>{let e=new pTe;return await Promise.all(Object.entries(t||{}).map(([r,n])=>xTe(e,r,n))),e};var xTe=async(t,e,r)=>{if(r!==void 0){if(r==null)throw new TypeError(`Received null for "${e}"; to pass null in FormData, you must use the string 'null'`);if(typeof r=="string"||typeof r=="number"||typeof r=="boolean")t.append(e,String(r));else if(i3r(r)){let n=await CTe(r);t.append(e,n)}else if(Array.isArray(r))await Promise.all(r.map(n=>xTe(t,e+"[]",n)));else if(typeof r=="object")await Promise.all(Object.entries(r).map(([n,o])=>xTe(t,`${e}[${n}]`,o)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${r} instead`)}};var d3r=function(t,e,r,n,o){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!o:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?o.call(t,r):o?o.value=r:e.set(t,r),r},f3r=function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},sre;bTe();async function dxt(t){let{response:e}=t;if(t.options.stream)return yO("response",e.status,e.url,e.headers,e.body),t.options.__streamClass?t.options.__streamClass.fromSSEResponse(e,t.controller):YS.fromSSEResponse(e,t.controller);if(e.status===204)return null;if(t.options.__binaryResponse)return e;let n=e.headers.get("content-type")?.split(";")[0]?.trim();if(n?.includes("application/json")||n?.endsWith("+json")){let a=await e.json();return yO("response",e.status,e.url,e.headers,a),fxt(a,e)}let i=await e.text();return yO("response",e.status,e.url,e.headers,i),i}function fxt(t,e){return!t||typeof t!="object"||Array.isArray(t)?t:Object.defineProperty(t,"_request_id",{value:e.headers.get("x-request-id"),enumerable:!1})}var lre=class t extends Promise{constructor(e,r=dxt){super(n=>{n(null)}),this.responsePromise=e,this.parseResponse=r}_thenUnwrap(e){return new t(this.responsePromise,async r=>fxt(e(await this.parseResponse(r),r),r.response))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){let[e,r]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:r,request_id:r.headers.get("x-request-id")}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(this.parseResponse)),this.parsedPromise}then(e,r){return this.parse().then(e,r)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}},cre=class{constructor({baseURL:e,maxRetries:r=2,timeout:n=6e5,httpAgent:o,fetch:i}){this.baseURL=e,this.maxRetries=PTe("maxRetries",r),this.timeout=PTe("timeout",n),this.httpAgent=o,this.fetch=i??fTe}authHeaders(e){return{}}defaultHeaders(e){return{Accept:"application/json","Content-Type":"application/json","User-Agent":this.getUserAgent(),...g3r(),...this.authHeaders(e)}}validateHeaders(e,r){}defaultIdempotencyKey(){return`stainless-node-retry-${v3r()}`}get(e,r){return this.methodRequest("get",e,r)}post(e,r){return this.methodRequest("post",e,r)}patch(e,r){return this.methodRequest("patch",e,r)}put(e,r){return this.methodRequest("put",e,r)}delete(e,r){return this.methodRequest("delete",e,r)}methodRequest(e,r,n){return this.request(Promise.resolve(n).then(async o=>{let i=o&&wV(o?.body)?new DataView(await o.body.arrayBuffer()):o?.body instanceof DataView?o.body:o?.body instanceof ArrayBuffer?new DataView(o.body):o&&ArrayBuffer.isView(o?.body)?new DataView(o.body.buffer):o?.body;return{method:e,path:r,...o,body:i}}))}getAPIList(e,r,n){return this.requestAPIList(r,{method:"get",path:e,...n})}calculateContentLength(e){if(typeof e=="string"){if(typeof Buffer<"u")return Buffer.byteLength(e,"utf8").toString();if(typeof TextEncoder<"u")return new TextEncoder().encode(e).length.toString()}else if(ArrayBuffer.isView(e))return e.byteLength.toString();return null}buildRequest(e,{retryCount:r=0}={}){let n={...e},{method:o,path:i,query:a,headers:s={}}=n,u=ArrayBuffer.isView(n.body)||n.__binaryRequest&&typeof n.body=="string"?n.body:OTe(n.body)?n.body.body:n.body?JSON.stringify(n.body,null,2):null,l=this.calculateContentLength(u),c=this.buildURL(i,a);"timeout"in n&&PTe("timeout",n.timeout),n.timeout=n.timeout??this.timeout;let d=n.httpAgent??this.httpAgent??gTe(c),f=n.timeout+1e3;typeof d?.options?.timeout=="number"&&f>(d.options.timeout??0)&&(d.options.timeout=f),this.idempotencyHeader&&o!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),s[this.idempotencyHeader]=e.idempotencyKey);let p=this.buildHeaders({options:n,headers:s,contentLength:l,retryCount:r});return{req:{method:o,...u&&{body:u},headers:p,...d&&{agent:d},signal:n.signal??null},url:c,timeout:n.timeout}}buildHeaders({options:e,headers:r,contentLength:n,retryCount:o}){let i={};n&&(i["content-length"]=n);let a=this.defaultHeaders(e);return lxt(i,a),lxt(i,r),OTe(e.body)&&cj!=="node"&&delete i["content-type"],ure(a,"x-stainless-retry-count")===void 0&&ure(r,"x-stainless-retry-count")===void 0&&(i["x-stainless-retry-count"]=String(o)),ure(a,"x-stainless-timeout")===void 0&&ure(r,"x-stainless-timeout")===void 0&&e.timeout&&(i["x-stainless-timeout"]=String(Math.trunc(e.timeout/1e3))),this.validateHeaders(i,r),i}async prepareOptions(e){}async prepareRequest(e,{url:r,options:n}){}parseHeaders(e){return e?Symbol.iterator in e?Object.fromEntries(Array.from(e).map(r=>[...r])):{...e}:{}}makeStatusError(e,r,n,o){return qs.generate(e,r,n,o)}request(e,r=null){return new lre(this.makeRequest(e,r))}async makeRequest(e,r){let n=await e,o=n.maxRetries??this.maxRetries;r==null&&(r=o),await this.prepareOptions(n);let{req:i,url:a,timeout:s}=this.buildRequest(n,{retryCount:o-r});if(await this.prepareRequest(i,{url:a,options:n}),yO("request",a,n,i.headers),n.signal?.aborted)throw new Ai;let u=new AbortController,l=await this.fetchWithTimeout(a,i,s,u).catch(ire);if(l instanceof Error){if(n.signal?.aborted)throw new Ai;if(r)return this.retryRequest(n,r);throw l.name==="AbortError"?new Ff:new gO({cause:l})}let c=wTe(l.headers);if(!l.ok){if(r&&this.shouldRetry(l)){let b=`retrying, ${r} attempts remaining`;return yO(`response (error; ${b})`,l.status,a,c),this.retryRequest(n,r,c)}let d=await l.text().catch(b=>ire(b).message),f=y3r(d),p=f?void 0:d;throw yO(`response (error; ${r?"(error; no more retries left)":"(error; not retryable)"})`,l.status,a,c,p),this.makeStatusError(l.status,f,p,c)}return{response:l,options:n,controller:u}}requestAPIList(e,r){let n=this.makeRequest(r,null);return new ETe(this,n,e)}buildURL(e,r){let n=_3r(e)?new URL(e):new URL(this.baseURL+(this.baseURL.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),o=this.defaultQuery();return pxt(o)||(r={...o,...r}),typeof r=="object"&&r&&!Array.isArray(r)&&(n.search=this.stringifyQuery(r)),n.toString()}stringifyQuery(e){return Object.entries(e).filter(([r,n])=>typeof n<"u").map(([r,n])=>{if(typeof n=="string"||typeof n=="number"||typeof n=="boolean")return`${encodeURIComponent(r)}=${encodeURIComponent(n)}`;if(n===null)return`${encodeURIComponent(r)}=`;throw new _t(`Cannot stringify type ${typeof n}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}async fetchWithTimeout(e,r,n,o){let{signal:i,...a}=r||{};i&&i.addEventListener("abort",()=>o.abort());let s=setTimeout(()=>o.abort(),n),u={signal:o.signal,...a};return u.method&&(u.method=u.method.toUpperCase()),this.fetch.call(void 0,e,u).finally(()=>{clearTimeout(s)})}shouldRetry(e){let r=e.headers.get("x-should-retry");return r==="true"?!0:r==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,r,n){let o,i=n?.["retry-after-ms"];if(i){let s=parseFloat(i);Number.isNaN(s)||(o=s)}let a=n?.["retry-after"];if(a&&!o){let s=parseFloat(a);Number.isNaN(s)?o=Date.parse(a)-Date.now():o=s*1e3}if(!(o&&0<=o&&o<60*1e3)){let s=e.maxRetries??this.maxRetries;o=this.calculateDefaultRetryTimeoutMillis(r,s)}return await bO(o),this.makeRequest(e,r-1)}calculateDefaultRetryTimeoutMillis(e,r){let i=r-e,a=Math.min(.5*Math.pow(2,i),8),s=1-Math.random()*.25;return a*s*1e3}getUserAgent(){return`${this.constructor.name}/JS ${lj}`}},SV=class{constructor(e,r,n,o){sre.set(this,void 0),d3r(this,sre,e,"f"),this.options=o,this.response=r,this.body=n}hasNextPage(){return this.getPaginatedItems().length?this.nextPageInfo()!=null:!1}async getNextPage(){let e=this.nextPageInfo();if(!e)throw new _t("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");let r={...this.options};if("params"in e&&typeof r.query=="object")r.query={...r.query,...e.params};else if("url"in e){let n=[...Object.entries(r.query||{}),...e.url.searchParams.entries()];for(let[o,i]of n)e.url.searchParams.set(o,i);r.query=void 0,r.path=e.url.toString()}return await f3r(this,sre,"f").requestAPIList(this.constructor,r)}async*iterPages(){let e=this;for(yield e;e.hasNextPage();)e=await e.getNextPage(),yield e}async*[(sre=new WeakMap,Symbol.asyncIterator)](){for await(let e of this.iterPages())for(let r of e.getPaginatedItems())yield r}},ETe=class extends lre{constructor(e,r,n){super(r,async o=>new n(e,o.response,await dxt(o),o.options))}async*[Symbol.asyncIterator](){let e=await this;for await(let r of e)yield r}},wTe=t=>new Proxy(Object.fromEntries(t.entries()),{get(e,r){let n=r.toString();return e[n.toLowerCase()]||e[n]}}),p3r={method:!0,path:!0,query:!0,body:!0,headers:!0,maxRetries:!0,stream:!0,timeout:!0,httpAgent:!0,signal:!0,idempotencyKey:!0,__metadata:!0,__binaryRequest:!0,__binaryResponse:!0,__streamClass:!0},Gr=t=>typeof t=="object"&&t!==null&&!pxt(t)&&Object.keys(t).every(e=>mxt(p3r,e)),m3r=()=>{if(typeof Deno<"u"&&Deno.build!=null)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":lj,"X-Stainless-OS":sxt(Deno.build.os),"X-Stainless-Arch":axt(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:Deno.version?.deno??"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":lj,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":process.version};if(Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":lj,"X-Stainless-OS":sxt(process.platform),"X-Stainless-Arch":axt(process.arch),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":process.version};let t=h3r();return t?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":lj,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${t.browser}`,"X-Stainless-Runtime-Version":t.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":lj,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function h3r(){if(typeof navigator>"u"||!navigator)return null;let t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(let{key:e,pattern:r}of t){let n=r.exec(navigator.userAgent);if(n){let o=n[1]||0,i=n[2]||0,a=n[3]||0;return{browser:e,version:`${o}.${i}.${a}`}}}return null}var axt=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",sxt=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown"),uxt,g3r=()=>uxt??(uxt=m3r()),y3r=t=>{try{return JSON.parse(t)}catch{return}},b3r=/^[a-z][a-z0-9+.-]*:/i,_3r=t=>b3r.test(t),bO=t=>new Promise(e=>setTimeout(e,t)),PTe=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new _t(`${t} must be an integer`);if(e<0)throw new _t(`${t} must be a positive integer`);return e},ire=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null)try{return new Error(JSON.stringify(t))}catch{}return new Error(t)};var aA=t=>{if(typeof process<"u")return process.env?.[t]?.trim()??void 0;if(typeof Deno<"u")return Deno.env?.get?.(t)?.trim()};function pxt(t){if(!t)return!0;for(let e in t)return!1;return!0}function mxt(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function lxt(t,e){for(let r in e){if(!mxt(e,r))continue;let n=r.toLowerCase();if(!n)continue;let o=e[r];o===null?delete t[n]:o!==void 0&&(t[n]=o)}}var cxt=new Set(["authorization","api-key"]);function yO(t,...e){if(typeof process<"u"&&process?.env?.DEBUG==="true"){let r=e.map(n=>{if(!n)return n;if(n.headers){let i={...n,headers:{...n.headers}};for(let a in n.headers)cxt.has(a.toLowerCase())&&(i.headers[a]="REDACTED");return i}let o=null;for(let i in n)cxt.has(i.toLowerCase())&&(o??(o={...n}),o[i]="REDACTED");return o??n});console.log(`OpenAI:DEBUG:${t}`,...r)}}var v3r=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{let e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)}),hxt=()=>typeof window<"u"&&typeof window.document<"u"&&typeof navigator<"u",w3r=t=>typeof t?.get=="function";var ure=(t,e)=>{let r=e.toLowerCase();if(w3r(t)){let n=e[0]?.toUpperCase()+e.substring(1).replace(/([^\w])(\w)/g,(o,i,a)=>i+a.toUpperCase());for(let o of[e,r,e.toUpperCase(),n]){let i=t.get(o);if(i)return i}}for(let[n,o]of Object.entries(t))if(n.toLowerCase()===r)return Array.isArray(o)?(o.length<=1||console.warn(`Received ${o.length} entries for the ${e} header, using the first entry.`),o[0]):o};var gxt=t=>{if(typeof Buffer<"u"){let e=Buffer.from(t,"base64");return Array.from(new Float32Array(e.buffer,e.byteOffset,e.length/Float32Array.BYTES_PER_ELEMENT))}else{let e=atob(t),r=e.length,n=new Uint8Array(r);for(let o=0;o<r;o++)n[o]=e.charCodeAt(o);return Array.from(new Float32Array(n.buffer))}};function H$(t){return t!=null&&typeof t=="object"&&!Array.isArray(t)}var ZS=class extends SV{constructor(e,r,n,o){super(e,r,n,o),this.data=n.data||[],this.object=n.object}getPaginatedItems(){return this.data??[]}nextPageParams(){return null}nextPageInfo(){return null}},Zn=class extends SV{constructor(e,r,n,o){super(e,r,n,o),this.data=n.data||[],this.has_more=n.has_more||!1}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageParams(){let e=this.nextPageInfo();if(!e)return null;if("params"in e)return e.params;let r=Object.fromEntries(e.url.searchParams);return Object.keys(r).length?r:null}nextPageInfo(){let e=this.getPaginatedItems();if(!e.length)return null;let r=e[e.length-1]?.id;return r?{params:{after:r}}:null}};var tt=class{constructor(e){this._client=e}};var V$=class extends tt{list(e,r={},n){return Gr(r)?this.list(e,{},r):this._client.getAPIList(`/chat/completions/${e}/messages`,dre,{query:r,...n})}};var uA=class extends tt{constructor(){super(...arguments),this.messages=new V$(this._client)}create(e,r){return this._client.post("/chat/completions",{body:e,...r,stream:e.stream??!1})}retrieve(e,r){return this._client.get(`/chat/completions/${e}`,r)}update(e,r,n){return this._client.post(`/chat/completions/${e}`,{body:r,...n})}list(e={},r){return Gr(e)?this.list({},e):this._client.getAPIList("/chat/completions",lA,{query:e,...r})}del(e,r){return this._client.delete(`/chat/completions/${e}`,r)}},lA=class extends Zn{},dre=class extends Zn{};uA.ChatCompletionsPage=lA;uA.Messages=V$;var _O=class extends tt{constructor(){super(...arguments),this.completions=new uA(this._client)}};_O.Completions=uA;_O.ChatCompletionsPage=lA;var W$=class extends tt{create(e,r){return this._client.post("/audio/speech",{body:e,...r,headers:{Accept:"application/octet-stream",...r?.headers},__binaryResponse:!0})}};var K$=class extends tt{create(e,r){return this._client.post("/audio/transcriptions",Yh({body:e,...r,stream:e.stream??!1,__metadata:{model:e.model}}))}};var G$=class extends tt{create(e,r){return this._client.post("/audio/translations",Yh({body:e,...r,__metadata:{model:e.model}}))}};var XS=class extends tt{constructor(){super(...arguments),this.transcriptions=new K$(this._client),this.translations=new G$(this._client),this.speech=new W$(this._client)}};XS.Transcriptions=K$;XS.Translations=G$;XS.Speech=W$;var cA=class extends tt{create(e,r){return this._client.post("/batches",{body:e,...r})}retrieve(e,r){return this._client.get(`/batches/${e}`,r)}list(e={},r){return Gr(e)?this.list({},e):this._client.getAPIList("/batches",pj,{query:e,...r})}cancel(e,r){return this._client.post(`/batches/${e}/cancel`,r)}},pj=class extends Zn{};cA.BatchesPage=pj;var mj=class extends tt{create(e,r){return this._client.post("/assistants",{body:e,...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}retrieve(e,r){return this._client.get(`/assistants/${e}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}update(e,r,n){return this._client.post(`/assistants/${e}`,{body:r,...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}list(e={},r){return Gr(e)?this.list({},e):this._client.getAPIList("/assistants",J$,{query:e,...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}del(e,r){return this._client.delete(`/assistants/${e}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}},J$=class extends Zn{};mj.AssistantsPage=J$;function TTe(t){return typeof t.parse=="function"}var dA=t=>t?.role==="assistant",ATe=t=>t?.role==="function",ITe=t=>t?.role==="tool";var Ey=function(t,e,r,n,o){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!o:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?o.call(t,r):o?o.value=r:e.set(t,r),r},Ua=function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},MTe,fre,pre,xV,CV,mre,OV,vO,PV,hre,gre,Y$,yxt,fA=class{constructor(){MTe.add(this),this.controller=new AbortController,fre.set(this,void 0),pre.set(this,()=>{}),xV.set(this,()=>{}),CV.set(this,void 0),mre.set(this,()=>{}),OV.set(this,()=>{}),vO.set(this,{}),PV.set(this,!1),hre.set(this,!1),gre.set(this,!1),Y$.set(this,!1),Ey(this,fre,new Promise((e,r)=>{Ey(this,pre,e,"f"),Ey(this,xV,r,"f")}),"f"),Ey(this,CV,new Promise((e,r)=>{Ey(this,mre,e,"f"),Ey(this,OV,r,"f")}),"f"),Ua(this,fre,"f").catch(()=>{}),Ua(this,CV,"f").catch(()=>{})}_run(e){setTimeout(()=>{e().then(()=>{this._emitFinal(),this._emit("end")},Ua(this,MTe,"m",yxt).bind(this))},0)}_connected(){this.ended||(Ua(this,pre,"f").call(this),this._emit("connect"))}get ended(){return Ua(this,PV,"f")}get errored(){return Ua(this,hre,"f")}get aborted(){return Ua(this,gre,"f")}abort(){this.controller.abort()}on(e,r){return(Ua(this,vO,"f")[e]||(Ua(this,vO,"f")[e]=[])).push({listener:r}),this}off(e,r){let n=Ua(this,vO,"f")[e];if(!n)return this;let o=n.findIndex(i=>i.listener===r);return o>=0&&n.splice(o,1),this}once(e,r){return(Ua(this,vO,"f")[e]||(Ua(this,vO,"f")[e]=[])).push({listener:r,once:!0}),this}emitted(e){return new Promise((r,n)=>{Ey(this,Y$,!0,"f"),e!=="error"&&this.once("error",n),this.once(e,r)})}async done(){Ey(this,Y$,!0,"f"),await Ua(this,CV,"f")}_emit(e,...r){if(Ua(this,PV,"f"))return;e==="end"&&(Ey(this,PV,!0,"f"),Ua(this,mre,"f").call(this));let n=Ua(this,vO,"f")[e];if(n&&(Ua(this,vO,"f")[e]=n.filter(o=>!o.once),n.forEach(({listener:o})=>o(...r))),e==="abort"){let o=r[0];!Ua(this,Y$,"f")&&!n?.length&&Promise.reject(o),Ua(this,xV,"f").call(this,o),Ua(this,OV,"f").call(this,o),this._emit("end");return}if(e==="error"){let o=r[0];!Ua(this,Y$,"f")&&!n?.length&&Promise.reject(o),Ua(this,xV,"f").call(this,o),Ua(this,OV,"f").call(this,o),this._emit("end")}}_emitFinal(){}};fre=new WeakMap,pre=new WeakMap,xV=new WeakMap,CV=new WeakMap,mre=new WeakMap,OV=new WeakMap,vO=new WeakMap,PV=new WeakMap,hre=new WeakMap,gre=new WeakMap,Y$=new WeakMap,MTe=new WeakSet,yxt=function(e){if(Ey(this,hre,!0,"f"),e instanceof Error&&e.name==="AbortError"&&(e=new Ai),e instanceof Ai)return Ey(this,gre,!0,"f"),this._emit("abort",e);if(e instanceof _t)return this._emit("error",e);if(e instanceof Error){let r=new _t(e.message);return r.cause=e,this._emit("error",r)}return this._emit("error",new _t(String(e)))};function bxt(t,e){let r={...t};return Object.defineProperties(r,{$brand:{value:"auto-parseable-response-format",enumerable:!1},$parseRaw:{value:e,enumerable:!1}}),r}function EV(t){return t?.$brand==="auto-parseable-response-format"}function _xt(t,{parser:e,callback:r}){let n={...t};return Object.defineProperties(n,{$brand:{value:"auto-parseable-tool",enumerable:!1},$parseRaw:{value:e,enumerable:!1},$callback:{value:r,enumerable:!1}}),n}function hj(t){return t?.$brand==="auto-parseable-tool"}function vxt(t,e){return!e||!RTe(e)?{...t,choices:t.choices.map(r=>({...r,message:{...r.message,parsed:null,...r.message.tool_calls?{tool_calls:r.message.tool_calls}:void 0}}))}:TV(t,e)}function TV(t,e){let r=t.choices.map(n=>{if(n.finish_reason==="length")throw new U$;if(n.finish_reason==="content_filter")throw new z$;return{...n,message:{...n.message,...n.message.tool_calls?{tool_calls:n.message.tool_calls?.map(o=>A3r(e,o))??void 0}:void 0,parsed:n.message.content&&!n.message.refusal?T3r(e,n.message.content):null}}});return{...t,choices:r}}function T3r(t,e){return t.response_format?.type!=="json_schema"?null:t.response_format?.type==="json_schema"?"$parseRaw"in t.response_format?t.response_format.$parseRaw(e):JSON.parse(e):null}function A3r(t,e){let r=t.tools?.find(n=>n.function?.name===e.function.name);return{...e,function:{...e.function,parsed_arguments:hj(r)?r.$parseRaw(e.function.arguments):r?.function.strict?JSON.parse(e.function.arguments):null}}}function wxt(t,e){if(!t)return!1;let r=t.tools?.find(n=>n.function?.name===e.function.name);return hj(r)||r?.function.strict||!1}function RTe(t){return EV(t.response_format)?!0:t.tools?.some(e=>hj(e)||e.type==="function"&&e.function.strict===!0)??!1}function Sxt(t){for(let e of t??[]){if(e.type!=="function")throw new _t(`Currently only \`function\` tool types support auto-parsing; Received \`${e.type}\``);if(e.function.strict!==!0)throw new _t(`The \`${e.function.name}\` tool is not marked with \`strict: true\`. Only strict function tools can be auto-parsed`)}}var Dp=function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},qd,jTe,yre,NTe,DTe,LTe,Cxt,FTe,xxt=10,Z$=class extends fA{constructor(){super(...arguments),qd.add(this),this._chatCompletions=[],this.messages=[]}_addChatCompletion(e){this._chatCompletions.push(e),this._emit("chatCompletion",e);let r=e.choices[0]?.message;return r&&this._addMessage(r),e}_addMessage(e,r=!0){if("content"in e||(e.content=null),this.messages.push(e),r){if(this._emit("message",e),(ATe(e)||ITe(e))&&e.content)this._emit("functionCallResult",e.content);else if(dA(e)&&e.function_call)this._emit("functionCall",e.function_call);else if(dA(e)&&e.tool_calls)for(let n of e.tool_calls)n.type==="function"&&this._emit("functionCall",n.function)}}async finalChatCompletion(){await this.done();let e=this._chatCompletions[this._chatCompletions.length-1];if(!e)throw new _t("stream ended without producing a ChatCompletion");return e}async finalContent(){return await this.done(),Dp(this,qd,"m",jTe).call(this)}async finalMessage(){return await this.done(),Dp(this,qd,"m",yre).call(this)}async finalFunctionCall(){return await this.done(),Dp(this,qd,"m",NTe).call(this)}async finalFunctionCallResult(){return await this.done(),Dp(this,qd,"m",DTe).call(this)}async totalUsage(){return await this.done(),Dp(this,qd,"m",LTe).call(this)}allChatCompletions(){return[...this._chatCompletions]}_emitFinal(){let e=this._chatCompletions[this._chatCompletions.length-1];e&&this._emit("finalChatCompletion",e);let r=Dp(this,qd,"m",yre).call(this);r&&this._emit("finalMessage",r);let n=Dp(this,qd,"m",jTe).call(this);n&&this._emit("finalContent",n);let o=Dp(this,qd,"m",NTe).call(this);o&&this._emit("finalFunctionCall",o);let i=Dp(this,qd,"m",DTe).call(this);i!=null&&this._emit("finalFunctionCallResult",i),this._chatCompletions.some(a=>a.usage)&&this._emit("totalUsage",Dp(this,qd,"m",LTe).call(this))}async _createChatCompletion(e,r,n){let o=n?.signal;o&&(o.aborted&&this.controller.abort(),o.addEventListener("abort",()=>this.controller.abort())),Dp(this,qd,"m",Cxt).call(this,r);let i=await e.chat.completions.create({...r,stream:!1},{...n,signal:this.controller.signal});return this._connected(),this._addChatCompletion(TV(i,r))}async _runChatCompletion(e,r,n){for(let o of r.messages)this._addMessage(o,!1);return await this._createChatCompletion(e,r,n)}async _runFunctions(e,r,n){let o="function",{function_call:i="auto",stream:a,...s}=r,u=typeof i!="string"&&i?.name,{maxChatCompletions:l=xxt}=n||{},c={};for(let f of r.functions)c[f.name||f.function.name]=f;let d=r.functions.map(f=>({name:f.name||f.function.name,parameters:f.parameters,description:f.description}));for(let f of r.messages)this._addMessage(f,!1);for(let f=0;f<l;++f){let m=(await this._createChatCompletion(e,{...s,function_call:i,functions:d,messages:[...this.messages]},n)).choices[0]?.message;if(!m)throw new _t("missing message in ChatCompletion response");if(!m.function_call)return;let{name:h,arguments:b}=m.function_call,g=c[h];if(g){if(u&&u!==h){let C=`Invalid function_call: ${JSON.stringify(h)}. ${JSON.stringify(u)} requested. Please try again`;this._addMessage({role:o,name:h,content:C});continue}}else{let C=`Invalid function_call: ${JSON.stringify(h)}. Available options are: ${d.map(P=>JSON.stringify(P.name)).join(", ")}. Please try again`;this._addMessage({role:o,name:h,content:C});continue}let y;try{y=TTe(g)?await g.parse(b):b}catch(C){this._addMessage({role:o,name:h,content:C instanceof Error?C.message:String(C)});continue}let w=await g.function(y,this),S=Dp(this,qd,"m",FTe).call(this,w);if(this._addMessage({role:o,name:h,content:S}),u)return}}async _runTools(e,r,n){let o="tool",{tool_choice:i="auto",stream:a,...s}=r,u=typeof i!="string"&&i?.function?.name,{maxChatCompletions:l=xxt}=n||{},c=r.tools.map(p=>{if(hj(p)){if(!p.$callback)throw new _t("Tool given to `.runTools()` that does not have an associated function");return{type:"function",function:{function:p.$callback,name:p.function.name,description:p.function.description||"",parameters:p.function.parameters,parse:p.$parseRaw,strict:!0}}}return p}),d={};for(let p of c)p.type==="function"&&(d[p.function.name||p.function.function.name]=p.function);let f="tools"in r?c.map(p=>p.type==="function"?{type:"function",function:{name:p.function.name||p.function.function.name,parameters:p.function.parameters,description:p.function.description,strict:p.function.strict}}:p):void 0;for(let p of r.messages)this._addMessage(p,!1);for(let p=0;p<l;++p){let h=(await this._createChatCompletion(e,{...s,tool_choice:i,tools:f,messages:[...this.messages]},n)).choices[0]?.message;if(!h)throw new _t("missing message in ChatCompletion response");if(!h.tool_calls?.length)return;for(let b of h.tool_calls){if(b.type!=="function")continue;let g=b.id,{name:y,arguments:w}=b.function,S=d[y];if(S){if(u&&u!==y){let A=`Invalid tool_call: ${JSON.stringify(y)}. ${JSON.stringify(u)} requested. Please try again`;this._addMessage({role:o,tool_call_id:g,content:A});continue}}else{let A=`Invalid tool_call: ${JSON.stringify(y)}. Available options are: ${Object.keys(d).map(I=>JSON.stringify(I)).join(", ")}. Please try again`;this._addMessage({role:o,tool_call_id:g,content:A});continue}let C;try{C=TTe(S)?await S.parse(w):w}catch(A){let I=A instanceof Error?A.message:String(A);this._addMessage({role:o,tool_call_id:g,content:I});continue}let P=await S.function(C,this),E=Dp(this,qd,"m",FTe).call(this,P);if(this._addMessage({role:o,tool_call_id:g,content:E}),u)return}}}};qd=new WeakSet,jTe=function(){return Dp(this,qd,"m",yre).call(this).content??null},yre=function(){let e=this.messages.length;for(;e-- >0;){let r=this.messages[e];if(dA(r)){let{function_call:n,...o}=r,i={...o,content:r.content??null,refusal:r.refusal??null};return n&&(i.function_call=n),i}}throw new _t("stream ended without producing a ChatCompletionMessage with role=assistant")},NTe=function(){for(let e=this.messages.length-1;e>=0;e--){let r=this.messages[e];if(dA(r)&&r?.function_call)return r.function_call;if(dA(r)&&r?.tool_calls?.length)return r.tool_calls.at(-1)?.function}},DTe=function(){for(let e=this.messages.length-1;e>=0;e--){let r=this.messages[e];if(ATe(r)&&r.content!=null||ITe(r)&&r.content!=null&&typeof r.content=="string"&&this.messages.some(n=>n.role==="assistant"&&n.tool_calls?.some(o=>o.type==="function"&&o.id===r.tool_call_id)))return r.content}},LTe=function(){let e={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(let{usage:r}of this._chatCompletions)r&&(e.completion_tokens+=r.completion_tokens,e.prompt_tokens+=r.prompt_tokens,e.total_tokens+=r.total_tokens);return e},Cxt=function(e){if(e.n!=null&&e.n>1)throw new _t("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},FTe=function(e){return typeof e=="string"?e:e===void 0?"undefined":JSON.stringify(e)};var AV=class t extends Z${static runFunctions(e,r,n){let o=new t,i={...n,headers:{...n?.headers,"X-Stainless-Helper-Method":"runFunctions"}};return o._run(()=>o._runFunctions(e,r,i)),o}static runTools(e,r,n){let o=new t,i={...n,headers:{...n?.headers,"X-Stainless-Helper-Method":"runTools"}};return o._run(()=>o._runTools(e,r,i)),o}_addMessage(e,r=!0){super._addMessage(e,r),dA(e)&&e.content&&this._emit("content",e.content)}};var Wl={STR:1,NUM:2,ARR:4,OBJ:8,NULL:16,BOOL:32,NAN:64,INFINITY:128,MINUS_INFINITY:256,INF:384,SPECIAL:496,ATOM:499,COLLECTION:12,ALL:511},kTe=class extends Error{},$Te=class extends Error{};function I3r(t,e=Wl.ALL){if(typeof t!="string")throw new TypeError(`expecting str, got ${typeof t}`);if(!t.trim())throw new Error(`${t} is empty`);return M3r(t.trim(),e)}var M3r=(t,e)=>{let r=t.length,n=0,o=f=>{throw new kTe(`${f} at position ${n}`)},i=f=>{throw new $Te(`${f} at position ${n}`)},a=()=>(d(),n>=r&&o("Unexpected end of input"),t[n]==='"'?s():t[n]==="{"?u():t[n]==="["?l():t.substring(n,n+4)==="null"||Wl.NULL&e&&r-n<4&&"null".startsWith(t.substring(n))?(n+=4,null):t.substring(n,n+4)==="true"||Wl.BOOL&e&&r-n<4&&"true".startsWith(t.substring(n))?(n+=4,!0):t.substring(n,n+5)==="false"||Wl.BOOL&e&&r-n<5&&"false".startsWith(t.substring(n))?(n+=5,!1):t.substring(n,n+8)==="Infinity"||Wl.INFINITY&e&&r-n<8&&"Infinity".startsWith(t.substring(n))?(n+=8,1/0):t.substring(n,n+9)==="-Infinity"||Wl.MINUS_INFINITY&e&&1<r-n&&r-n<9&&"-Infinity".startsWith(t.substring(n))?(n+=9,-1/0):t.substring(n,n+3)==="NaN"||Wl.NAN&e&&r-n<3&&"NaN".startsWith(t.substring(n))?(n+=3,NaN):c()),s=()=>{let f=n,p=!1;for(n++;n<r&&(t[n]!=='"'||p&&t[n-1]==="\\");)p=t[n]==="\\"?!p:!1,n++;if(t.charAt(n)=='"')try{return JSON.parse(t.substring(f,++n-Number(p)))}catch(m){i(String(m))}else if(Wl.STR&e)try{return JSON.parse(t.substring(f,n-Number(p))+'"')}catch{return JSON.parse(t.substring(f,t.lastIndexOf("\\"))+'"')}o("Unterminated string literal")},u=()=>{n++,d();let f={};try{for(;t[n]!=="}";){if(d(),n>=r&&Wl.OBJ&e)return f;let p=s();d(),n++;try{let m=a();Object.defineProperty(f,p,{value:m,writable:!0,enumerable:!0,configurable:!0})}catch(m){if(Wl.OBJ&e)return f;throw m}d(),t[n]===","&&n++}}catch{if(Wl.OBJ&e)return f;o("Expected '}' at end of object")}return n++,f},l=()=>{n++;let f=[];try{for(;t[n]!=="]";)f.push(a()),d(),t[n]===","&&n++}catch{if(Wl.ARR&e)return f;o("Expected ']' at end of array")}return n++,f},c=()=>{if(n===0){t==="-"&&Wl.NUM&e&&o("Not sure what '-' is");try{return JSON.parse(t)}catch(p){if(Wl.NUM&e)try{return t[t.length-1]==="."?JSON.parse(t.substring(0,t.lastIndexOf("."))):JSON.parse(t.substring(0,t.lastIndexOf("e")))}catch{}i(String(p))}}let f=n;for(t[n]==="-"&&n++;t[n]&&!",]}".includes(t[n]);)n++;n==r&&!(Wl.NUM&e)&&o("Unterminated number literal");try{return JSON.parse(t.substring(f,n))}catch{t.substring(f,n)==="-"&&Wl.NUM&e&&o("Not sure what '-' is");try{return JSON.parse(t.substring(f,t.lastIndexOf("e")))}catch(m){i(String(m))}}},d=()=>{for(;n<r&&` 
\r	`.includes(t[n]);)n++};return a()},BTe=t=>I3r(t,Wl.ALL^Wl.NUM);var X$=function(t,e,r,n,o){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!o:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?o.call(t,r):o?o.value=r:e.set(t,r),r},wi=function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},Cl,wO,Q$,pA,qTe,bre,UTe,zTe,HTe,_re,VTe,Oxt,eB=class t extends Z${constructor(e){super(),Cl.add(this),wO.set(this,void 0),Q$.set(this,void 0),pA.set(this,void 0),X$(this,wO,e,"f"),X$(this,Q$,[],"f")}get currentChatCompletionSnapshot(){return wi(this,pA,"f")}static fromReadableStream(e){let r=new t(null);return r._run(()=>r._fromReadableStream(e)),r}static createChatCompletion(e,r,n){let o=new t(r);return o._run(()=>o._runChatCompletion(e,{...r,stream:!0},{...n,headers:{...n?.headers,"X-Stainless-Helper-Method":"stream"}})),o}async _createChatCompletion(e,r,n){super._createChatCompletion;let o=n?.signal;o&&(o.aborted&&this.controller.abort(),o.addEventListener("abort",()=>this.controller.abort())),wi(this,Cl,"m",qTe).call(this);let i=await e.chat.completions.create({...r,stream:!0},{...n,signal:this.controller.signal});this._connected();for await(let a of i)wi(this,Cl,"m",UTe).call(this,a);if(i.controller.signal?.aborted)throw new Ai;return this._addChatCompletion(wi(this,Cl,"m",_re).call(this))}async _fromReadableStream(e,r){let n=r?.signal;n&&(n.aborted&&this.controller.abort(),n.addEventListener("abort",()=>this.controller.abort())),wi(this,Cl,"m",qTe).call(this),this._connected();let o=YS.fromReadableStream(e,this.controller),i;for await(let a of o)i&&i!==a.id&&this._addChatCompletion(wi(this,Cl,"m",_re).call(this)),wi(this,Cl,"m",UTe).call(this,a),i=a.id;if(o.controller.signal?.aborted)throw new Ai;return this._addChatCompletion(wi(this,Cl,"m",_re).call(this))}[(wO=new WeakMap,Q$=new WeakMap,pA=new WeakMap,Cl=new WeakSet,qTe=function(){this.ended||X$(this,pA,void 0,"f")},bre=function(r){let n=wi(this,Q$,"f")[r.index];return n||(n={content_done:!1,refusal_done:!1,logprobs_content_done:!1,logprobs_refusal_done:!1,done_tool_calls:new Set,current_tool_call_index:null},wi(this,Q$,"f")[r.index]=n,n)},UTe=function(r){if(this.ended)return;let n=wi(this,Cl,"m",Oxt).call(this,r);this._emit("chunk",r,n);for(let o of r.choices){let i=n.choices[o.index];o.delta.content!=null&&i.message?.role==="assistant"&&i.message?.content&&(this._emit("content",o.delta.content,i.message.content),this._emit("content.delta",{delta:o.delta.content,snapshot:i.message.content,parsed:i.message.parsed})),o.delta.refusal!=null&&i.message?.role==="assistant"&&i.message?.refusal&&this._emit("refusal.delta",{delta:o.delta.refusal,snapshot:i.message.refusal}),o.logprobs?.content!=null&&i.message?.role==="assistant"&&this._emit("logprobs.content.delta",{content:o.logprobs?.content,snapshot:i.logprobs?.content??[]}),o.logprobs?.refusal!=null&&i.message?.role==="assistant"&&this._emit("logprobs.refusal.delta",{refusal:o.logprobs?.refusal,snapshot:i.logprobs?.refusal??[]});let a=wi(this,Cl,"m",bre).call(this,i);i.finish_reason&&(wi(this,Cl,"m",HTe).call(this,i),a.current_tool_call_index!=null&&wi(this,Cl,"m",zTe).call(this,i,a.current_tool_call_index));for(let s of o.delta.tool_calls??[])a.current_tool_call_index!==s.index&&(wi(this,Cl,"m",HTe).call(this,i),a.current_tool_call_index!=null&&wi(this,Cl,"m",zTe).call(this,i,a.current_tool_call_index)),a.current_tool_call_index=s.index;for(let s of o.delta.tool_calls??[]){let u=i.message.tool_calls?.[s.index];u?.type&&(u?.type==="function"?this._emit("tool_calls.function.arguments.delta",{name:u.function?.name,index:s.index,arguments:u.function.arguments,parsed_arguments:u.function.parsed_arguments,arguments_delta:s.function?.arguments??""}):(u?.type,void 0))}}},zTe=function(r,n){if(wi(this,Cl,"m",bre).call(this,r).done_tool_calls.has(n))return;let i=r.message.tool_calls?.[n];if(!i)throw new Error("no tool call snapshot");if(!i.type)throw new Error("tool call snapshot missing `type`");if(i.type==="function"){let a=wi(this,wO,"f")?.tools?.find(s=>s.type==="function"&&s.function.name===i.function.name);this._emit("tool_calls.function.arguments.done",{name:i.function.name,index:n,arguments:i.function.arguments,parsed_arguments:hj(a)?a.$parseRaw(i.function.arguments):a?.function.strict?JSON.parse(i.function.arguments):null})}else i.type},HTe=function(r){let n=wi(this,Cl,"m",bre).call(this,r);if(r.message.content&&!n.content_done){n.content_done=!0;let o=wi(this,Cl,"m",VTe).call(this);this._emit("content.done",{content:r.message.content,parsed:o?o.$parseRaw(r.message.content):null})}r.message.refusal&&!n.refusal_done&&(n.refusal_done=!0,this._emit("refusal.done",{refusal:r.message.refusal})),r.logprobs?.content&&!n.logprobs_content_done&&(n.logprobs_content_done=!0,this._emit("logprobs.content.done",{content:r.logprobs.content})),r.logprobs?.refusal&&!n.logprobs_refusal_done&&(n.logprobs_refusal_done=!0,this._emit("logprobs.refusal.done",{refusal:r.logprobs.refusal}))},_re=function(){if(this.ended)throw new _t("stream has ended, this shouldn't happen");let r=wi(this,pA,"f");if(!r)throw new _t("request ended without sending any chunks");return X$(this,pA,void 0,"f"),X$(this,Q$,[],"f"),R3r(r,wi(this,wO,"f"))},VTe=function(){let r=wi(this,wO,"f")?.response_format;return EV(r)?r:null},Oxt=function(r){var n,o,i,a;let s=wi(this,pA,"f"),{choices:u,...l}=r;s?Object.assign(s,l):s=X$(this,pA,{...l,choices:[]},"f");for(let{delta:c,finish_reason:d,index:f,logprobs:p=null,...m}of r.choices){let h=s.choices[f];if(h||(h=s.choices[f]={finish_reason:d,index:f,message:{},logprobs:p,...m}),p)if(!h.logprobs)h.logprobs=Object.assign({},p);else{let{content:P,refusal:E,...A}=p;Object.assign(h.logprobs,A),P&&((n=h.logprobs).content??(n.content=[]),h.logprobs.content.push(...P)),E&&((o=h.logprobs).refusal??(o.refusal=[]),h.logprobs.refusal.push(...E))}if(d&&(h.finish_reason=d,wi(this,wO,"f")&&RTe(wi(this,wO,"f")))){if(d==="length")throw new U$;if(d==="content_filter")throw new z$}if(Object.assign(h,m),!c)continue;let{content:b,refusal:g,function_call:y,role:w,tool_calls:S,...C}=c;if(Object.assign(h.message,C),g&&(h.message.refusal=(h.message.refusal||"")+g),w&&(h.message.role=w),y&&(h.message.function_call?(y.name&&(h.message.function_call.name=y.name),y.arguments&&((i=h.message.function_call).arguments??(i.arguments=""),h.message.function_call.arguments+=y.arguments)):h.message.function_call=y),b&&(h.message.content=(h.message.content||"")+b,!h.message.refusal&&wi(this,Cl,"m",VTe).call(this)&&(h.message.parsed=BTe(h.message.content))),S){h.message.tool_calls||(h.message.tool_calls=[]);for(let{index:P,id:E,type:A,function:I,...R}of S){let j=(a=h.message.tool_calls)[P]??(a[P]={});Object.assign(j,R),E&&(j.id=E),A&&(j.type=A),I&&(j.function??(j.function={name:I.name??"",arguments:""})),I?.name&&(j.function.name=I.name),I?.arguments&&(j.function.arguments+=I.arguments,wxt(wi(this,wO,"f"),j)&&(j.function.parsed_arguments=BTe(j.function.arguments)))}}}return s},Symbol.asyncIterator)](){let e=[],r=[],n=!1;return this.on("chunk",o=>{let i=r.shift();i?i.resolve(o):e.push(o)}),this.on("end",()=>{n=!0;for(let o of r)o.resolve(void 0);r.length=0}),this.on("abort",o=>{n=!0;for(let i of r)i.reject(o);r.length=0}),this.on("error",o=>{n=!0;for(let i of r)i.reject(o);r.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:n?{value:void 0,done:!0}:new Promise((i,a)=>r.push({resolve:i,reject:a})).then(i=>i?{value:i,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new YS(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}};function R3r(t,e){let{id:r,choices:n,created:o,model:i,system_fingerprint:a,...s}=t,u={...s,id:r,choices:n.map(({message:l,finish_reason:c,index:d,logprobs:f,...p})=>{if(!c)throw new _t(`missing finish_reason for choice ${d}`);let{content:m=null,function_call:h,tool_calls:b,...g}=l,y=l.role;if(!y)throw new _t(`missing role for choice ${d}`);if(h){let{arguments:w,name:S}=h;if(w==null)throw new _t(`missing function_call.arguments for choice ${d}`);if(!S)throw new _t(`missing function_call.name for choice ${d}`);return{...p,message:{content:m,function_call:{arguments:w,name:S},role:y,refusal:l.refusal??null},finish_reason:c,index:d,logprobs:f}}return b?{...p,index:d,finish_reason:c,logprobs:f,message:{...g,role:y,content:m,refusal:l.refusal??null,tool_calls:b.map((w,S)=>{let{function:C,type:P,id:E,...A}=w,{arguments:I,name:R,...j}=C||{};if(E==null)throw new _t(`missing choices[${d}].tool_calls[${S}].id
${vre(t)}`);if(P==null)throw new _t(`missing choices[${d}].tool_calls[${S}].type
${vre(t)}`);if(R==null)throw new _t(`missing choices[${d}].tool_calls[${S}].function.name
${vre(t)}`);if(I==null)throw new _t(`missing choices[${d}].tool_calls[${S}].function.arguments
${vre(t)}`);return{...A,id:E,type:P,function:{...j,name:R,arguments:I}}})}}:{...p,message:{...g,content:m,role:y,refusal:l.refusal??null},finish_reason:c,index:d,logprobs:f}}),created:o,model:i,object:"chat.completion",...a?{system_fingerprint:a}:{}};return vxt(u,e)}function vre(t){return JSON.stringify(t)}var IV=class t extends eB{static fromReadableStream(e){let r=new t(null);return r._run(()=>r._fromReadableStream(e)),r}static runFunctions(e,r,n){let o=new t(null),i={...n,headers:{...n?.headers,"X-Stainless-Helper-Method":"runFunctions"}};return o._run(()=>o._runFunctions(e,r,i)),o}static runTools(e,r,n){let o=new t(r),i={...n,headers:{...n?.headers,"X-Stainless-Helper-Method":"runTools"}};return o._run(()=>o._runTools(e,r,i)),o}};var MV=class extends tt{parse(e,r){return Sxt(e.tools),this._client.chat.completions.create(e,{...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"beta.chat.completions.parse"}})._thenUnwrap(n=>TV(n,e))}runFunctions(e,r){return e.stream?IV.runFunctions(this._client,e,r):AV.runFunctions(this._client,e,r)}runTools(e,r){return e.stream?IV.runTools(this._client,e,r):AV.runTools(this._client,e,r)}stream(e,r){return eB.createChatCompletion(this._client,e,r)}};var tB=class extends tt{constructor(){super(...arguments),this.completions=new MV(this._client)}};(function(t){t.Completions=MV})(tB||(tB={}));var rB=class extends tt{create(e,r){return this._client.post("/realtime/sessions",{body:e,...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}};var nB=class extends tt{create(e,r){return this._client.post("/realtime/transcription_sessions",{body:e,...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}};var mA=class extends tt{constructor(){super(...arguments),this.sessions=new rB(this._client),this.transcriptionSessions=new nB(this._client)}};mA.Sessions=rB;mA.TranscriptionSessions=nB;var Wt=function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},Nm=function(t,e,r,n,o){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!o:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?o.call(t,r):o?o.value=r:e.set(t,r),r},Lc,WTe,QS,wre,Ty,yj,oB,gj,Cre,Dm,Sre,xre,NV,RV,jV,Pxt,Ext,Txt,Axt,Ixt,Mxt,Rxt,ex=class t extends fA{constructor(){super(...arguments),Lc.add(this),WTe.set(this,[]),QS.set(this,{}),wre.set(this,{}),Ty.set(this,void 0),yj.set(this,void 0),oB.set(this,void 0),gj.set(this,void 0),Cre.set(this,void 0),Dm.set(this,void 0),Sre.set(this,void 0),xre.set(this,void 0),NV.set(this,void 0)}[(WTe=new WeakMap,QS=new WeakMap,wre=new WeakMap,Ty=new WeakMap,yj=new WeakMap,oB=new WeakMap,gj=new WeakMap,Cre=new WeakMap,Dm=new WeakMap,Sre=new WeakMap,xre=new WeakMap,NV=new WeakMap,Lc=new WeakSet,Symbol.asyncIterator)](){let e=[],r=[],n=!1;return this.on("event",o=>{let i=r.shift();i?i.resolve(o):e.push(o)}),this.on("end",()=>{n=!0;for(let o of r)o.resolve(void 0);r.length=0}),this.on("abort",o=>{n=!0;for(let i of r)i.reject(o);r.length=0}),this.on("error",o=>{n=!0;for(let i of r)i.reject(o);r.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:n?{value:void 0,done:!0}:new Promise((i,a)=>r.push({resolve:i,reject:a})).then(i=>i?{value:i,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}static fromReadableStream(e){let r=new t;return r._run(()=>r._fromReadableStream(e)),r}async _fromReadableStream(e,r){let n=r?.signal;n&&(n.aborted&&this.controller.abort(),n.addEventListener("abort",()=>this.controller.abort())),this._connected();let o=YS.fromReadableStream(e,this.controller);for await(let i of o)Wt(this,Lc,"m",RV).call(this,i);if(o.controller.signal?.aborted)throw new Ai;return this._addRun(Wt(this,Lc,"m",jV).call(this))}toReadableStream(){return new YS(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}static createToolAssistantStream(e,r,n,o,i){let a=new t;return a._run(()=>a._runToolAssistantStream(e,r,n,o,{...i,headers:{...i?.headers,"X-Stainless-Helper-Method":"stream"}})),a}async _createToolAssistantStream(e,r,n,o,i){let a=i?.signal;a&&(a.aborted&&this.controller.abort(),a.addEventListener("abort",()=>this.controller.abort()));let s={...o,stream:!0},u=await e.submitToolOutputs(r,n,s,{...i,signal:this.controller.signal});this._connected();for await(let l of u)Wt(this,Lc,"m",RV).call(this,l);if(u.controller.signal?.aborted)throw new Ai;return this._addRun(Wt(this,Lc,"m",jV).call(this))}static createThreadAssistantStream(e,r,n){let o=new t;return o._run(()=>o._threadAssistantStream(e,r,{...n,headers:{...n?.headers,"X-Stainless-Helper-Method":"stream"}})),o}static createAssistantStream(e,r,n,o){let i=new t;return i._run(()=>i._runAssistantStream(e,r,n,{...o,headers:{...o?.headers,"X-Stainless-Helper-Method":"stream"}})),i}currentEvent(){return Wt(this,Sre,"f")}currentRun(){return Wt(this,xre,"f")}currentMessageSnapshot(){return Wt(this,Ty,"f")}currentRunStepSnapshot(){return Wt(this,NV,"f")}async finalRunSteps(){return await this.done(),Object.values(Wt(this,QS,"f"))}async finalMessages(){return await this.done(),Object.values(Wt(this,wre,"f"))}async finalRun(){if(await this.done(),!Wt(this,yj,"f"))throw Error("Final run was not received.");return Wt(this,yj,"f")}async _createThreadAssistantStream(e,r,n){let o=n?.signal;o&&(o.aborted&&this.controller.abort(),o.addEventListener("abort",()=>this.controller.abort()));let i={...r,stream:!0},a=await e.createAndRun(i,{...n,signal:this.controller.signal});this._connected();for await(let s of a)Wt(this,Lc,"m",RV).call(this,s);if(a.controller.signal?.aborted)throw new Ai;return this._addRun(Wt(this,Lc,"m",jV).call(this))}async _createAssistantStream(e,r,n,o){let i=o?.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort()));let a={...n,stream:!0},s=await e.create(r,a,{...o,signal:this.controller.signal});this._connected();for await(let u of s)Wt(this,Lc,"m",RV).call(this,u);if(s.controller.signal?.aborted)throw new Ai;return this._addRun(Wt(this,Lc,"m",jV).call(this))}static accumulateDelta(e,r){for(let[n,o]of Object.entries(r)){if(!e.hasOwnProperty(n)){e[n]=o;continue}let i=e[n];if(i==null){e[n]=o;continue}if(n==="index"||n==="type"){e[n]=o;continue}if(typeof i=="string"&&typeof o=="string")i+=o;else if(typeof i=="number"&&typeof o=="number")i+=o;else if(H$(i)&&H$(o))i=this.accumulateDelta(i,o);else if(Array.isArray(i)&&Array.isArray(o)){if(i.every(a=>typeof a=="string"||typeof a=="number")){i.push(...o);continue}for(let a of o){if(!H$(a))throw new Error(`Expected array delta entry to be an object but got: ${a}`);let s=a.index;if(s==null)throw console.error(a),new Error("Expected array delta entry to have an `index` property");if(typeof s!="number")throw new Error(`Expected array delta entry \`index\` property to be a number but got ${s}`);let u=i[s];u==null?i.push(a):i[s]=this.accumulateDelta(u,a)}continue}else throw Error(`Unhandled record type: ${n}, deltaValue: ${o}, accValue: ${i}`);e[n]=i}return e}_addRun(e){return e}async _threadAssistantStream(e,r,n){return await this._createThreadAssistantStream(r,e,n)}async _runAssistantStream(e,r,n,o){return await this._createAssistantStream(r,e,n,o)}async _runToolAssistantStream(e,r,n,o,i){return await this._createToolAssistantStream(n,e,r,o,i)}};RV=function(e){if(!this.ended)switch(Nm(this,Sre,e,"f"),Wt(this,Lc,"m",Txt).call(this,e),e.event){case"thread.created":break;case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":case"thread.run.requires_action":case"thread.run.completed":case"thread.run.incomplete":case"thread.run.failed":case"thread.run.cancelling":case"thread.run.cancelled":case"thread.run.expired":Wt(this,Lc,"m",Rxt).call(this,e);break;case"thread.run.step.created":case"thread.run.step.in_progress":case"thread.run.step.delta":case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":Wt(this,Lc,"m",Ext).call(this,e);break;case"thread.message.created":case"thread.message.in_progress":case"thread.message.delta":case"thread.message.completed":case"thread.message.incomplete":Wt(this,Lc,"m",Pxt).call(this,e);break;case"error":throw new Error("Encountered an error event in event processing - errors should be processed earlier");default:}},jV=function(){if(this.ended)throw new _t("stream has ended, this shouldn't happen");if(!Wt(this,yj,"f"))throw Error("Final run has not been received");return Wt(this,yj,"f")},Pxt=function(e){let[r,n]=Wt(this,Lc,"m",Ixt).call(this,e,Wt(this,Ty,"f"));Nm(this,Ty,r,"f"),Wt(this,wre,"f")[r.id]=r;for(let o of n){let i=r.content[o.index];i?.type=="text"&&this._emit("textCreated",i.text)}switch(e.event){case"thread.message.created":this._emit("messageCreated",e.data);break;case"thread.message.in_progress":break;case"thread.message.delta":if(this._emit("messageDelta",e.data.delta,r),e.data.delta.content)for(let o of e.data.delta.content){if(o.type=="text"&&o.text){let i=o.text,a=r.content[o.index];if(a&&a.type=="text")this._emit("textDelta",i,a.text);else throw Error("The snapshot associated with this text delta is not text or missing")}if(o.index!=Wt(this,oB,"f")){if(Wt(this,gj,"f"))switch(Wt(this,gj,"f").type){case"text":this._emit("textDone",Wt(this,gj,"f").text,Wt(this,Ty,"f"));break;case"image_file":this._emit("imageFileDone",Wt(this,gj,"f").image_file,Wt(this,Ty,"f"));break}Nm(this,oB,o.index,"f")}Nm(this,gj,r.content[o.index],"f")}break;case"thread.message.completed":case"thread.message.incomplete":if(Wt(this,oB,"f")!==void 0){let o=e.data.content[Wt(this,oB,"f")];if(o)switch(o.type){case"image_file":this._emit("imageFileDone",o.image_file,Wt(this,Ty,"f"));break;case"text":this._emit("textDone",o.text,Wt(this,Ty,"f"));break}}Wt(this,Ty,"f")&&this._emit("messageDone",e.data),Nm(this,Ty,void 0,"f")}},Ext=function(e){let r=Wt(this,Lc,"m",Axt).call(this,e);switch(Nm(this,NV,r,"f"),e.event){case"thread.run.step.created":this._emit("runStepCreated",e.data);break;case"thread.run.step.delta":let n=e.data.delta;if(n.step_details&&n.step_details.type=="tool_calls"&&n.step_details.tool_calls&&r.step_details.type=="tool_calls")for(let i of n.step_details.tool_calls)i.index==Wt(this,Cre,"f")?this._emit("toolCallDelta",i,r.step_details.tool_calls[i.index]):(Wt(this,Dm,"f")&&this._emit("toolCallDone",Wt(this,Dm,"f")),Nm(this,Cre,i.index,"f"),Nm(this,Dm,r.step_details.tool_calls[i.index],"f"),Wt(this,Dm,"f")&&this._emit("toolCallCreated",Wt(this,Dm,"f")));this._emit("runStepDelta",e.data.delta,r);break;case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":Nm(this,NV,void 0,"f"),e.data.step_details.type=="tool_calls"&&Wt(this,Dm,"f")&&(this._emit("toolCallDone",Wt(this,Dm,"f")),Nm(this,Dm,void 0,"f")),this._emit("runStepDone",e.data,r);break;case"thread.run.step.in_progress":break}},Txt=function(e){Wt(this,WTe,"f").push(e),this._emit("event",e)},Axt=function(e){switch(e.event){case"thread.run.step.created":return Wt(this,QS,"f")[e.data.id]=e.data,e.data;case"thread.run.step.delta":let r=Wt(this,QS,"f")[e.data.id];if(!r)throw Error("Received a RunStepDelta before creation of a snapshot");let n=e.data;if(n.delta){let o=ex.accumulateDelta(r,n.delta);Wt(this,QS,"f")[e.data.id]=o}return Wt(this,QS,"f")[e.data.id];case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":case"thread.run.step.in_progress":Wt(this,QS,"f")[e.data.id]=e.data;break}if(Wt(this,QS,"f")[e.data.id])return Wt(this,QS,"f")[e.data.id];throw new Error("No snapshot available")},Ixt=function(e,r){let n=[];switch(e.event){case"thread.message.created":return[e.data,n];case"thread.message.delta":if(!r)throw Error("Received a delta with no existing snapshot (there should be one from message creation)");let o=e.data;if(o.delta.content)for(let i of o.delta.content)if(i.index in r.content){let a=r.content[i.index];r.content[i.index]=Wt(this,Lc,"m",Mxt).call(this,i,a)}else r.content[i.index]=i,n.push(i);return[r,n];case"thread.message.in_progress":case"thread.message.completed":case"thread.message.incomplete":if(r)return[r,n];throw Error("Received thread message event with no existing snapshot")}throw Error("Tried to accumulate a non-message event")},Mxt=function(e,r){return ex.accumulateDelta(r,e)},Rxt=function(e){switch(Nm(this,xre,e.data,"f"),e.event){case"thread.run.created":break;case"thread.run.queued":break;case"thread.run.in_progress":break;case"thread.run.requires_action":case"thread.run.cancelled":case"thread.run.failed":case"thread.run.completed":case"thread.run.expired":Nm(this,yj,e.data,"f"),Wt(this,Dm,"f")&&(this._emit("toolCallDone",Wt(this,Dm,"f")),Nm(this,Dm,void 0,"f"));break;case"thread.run.cancelling":break}};var bj=class extends tt{create(e,r,n){return this._client.post(`/threads/${e}/messages`,{body:r,...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}retrieve(e,r,n){return this._client.get(`/threads/${e}/messages/${r}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}update(e,r,n,o){return this._client.post(`/threads/${e}/messages/${r}`,{body:n,...o,headers:{"OpenAI-Beta":"assistants=v2",...o?.headers}})}list(e,r={},n){return Gr(r)?this.list(e,{},r):this._client.getAPIList(`/threads/${e}/messages`,iB,{query:r,...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}del(e,r,n){return this._client.delete(`/threads/${e}/messages/${r}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}},iB=class extends Zn{};bj.MessagesPage=iB;var _j=class extends tt{retrieve(e,r,n,o={},i){return Gr(o)?this.retrieve(e,r,n,{},o):this._client.get(`/threads/${e}/runs/${r}/steps/${n}`,{query:o,...i,headers:{"OpenAI-Beta":"assistants=v2",...i?.headers}})}list(e,r,n={},o){return Gr(n)?this.list(e,r,{},n):this._client.getAPIList(`/threads/${e}/runs/${r}/steps`,aB,{query:n,...o,headers:{"OpenAI-Beta":"assistants=v2",...o?.headers}})}},aB=class extends Zn{};_j.RunStepsPage=aB;var SO=class extends tt{constructor(){super(...arguments),this.steps=new _j(this._client)}create(e,r,n){let{include:o,...i}=r;return this._client.post(`/threads/${e}/runs`,{query:{include:o},body:i,...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers},stream:r.stream??!1})}retrieve(e,r,n){return this._client.get(`/threads/${e}/runs/${r}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}update(e,r,n,o){return this._client.post(`/threads/${e}/runs/${r}`,{body:n,...o,headers:{"OpenAI-Beta":"assistants=v2",...o?.headers}})}list(e,r={},n){return Gr(r)?this.list(e,{},r):this._client.getAPIList(`/threads/${e}/runs`,sB,{query:r,...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}cancel(e,r,n){return this._client.post(`/threads/${e}/runs/${r}/cancel`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}async createAndPoll(e,r,n){let o=await this.create(e,r,n);return await this.poll(e,o.id,n)}createAndStream(e,r,n){return ex.createAssistantStream(e,this._client.beta.threads.runs,r,n)}async poll(e,r,n){let o={...n?.headers,"X-Stainless-Poll-Helper":"true"};for(n?.pollIntervalMs&&(o["X-Stainless-Custom-Poll-Interval"]=n.pollIntervalMs.toString());;){let{data:i,response:a}=await this.retrieve(e,r,{...n,headers:{...n?.headers,...o}}).withResponse();switch(i.status){case"queued":case"in_progress":case"cancelling":let s=5e3;if(n?.pollIntervalMs)s=n.pollIntervalMs;else{let u=a.headers.get("openai-poll-after-ms");if(u){let l=parseInt(u);isNaN(l)||(s=l)}}await bO(s);break;case"requires_action":case"incomplete":case"cancelled":case"completed":case"failed":case"expired":return i}}}stream(e,r,n){return ex.createAssistantStream(e,this._client.beta.threads.runs,r,n)}submitToolOutputs(e,r,n,o){return this._client.post(`/threads/${e}/runs/${r}/submit_tool_outputs`,{body:n,...o,headers:{"OpenAI-Beta":"assistants=v2",...o?.headers},stream:n.stream??!1})}async submitToolOutputsAndPoll(e,r,n,o){let i=await this.submitToolOutputs(e,r,n,o);return await this.poll(e,i.id,o)}submitToolOutputsStream(e,r,n,o){return ex.createToolAssistantStream(e,r,this._client.beta.threads.runs,n,o)}},sB=class extends Zn{};SO.RunsPage=sB;SO.Steps=_j;SO.RunStepsPage=aB;var tx=class extends tt{constructor(){super(...arguments),this.runs=new SO(this._client),this.messages=new bj(this._client)}create(e={},r){return Gr(e)?this.create({},e):this._client.post("/threads",{body:e,...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}retrieve(e,r){return this._client.get(`/threads/${e}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}update(e,r,n){return this._client.post(`/threads/${e}`,{body:r,...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}del(e,r){return this._client.delete(`/threads/${e}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}createAndRun(e,r){return this._client.post("/threads/runs",{body:e,...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers},stream:e.stream??!1})}async createAndRunPoll(e,r){let n=await this.createAndRun(e,r);return await this.runs.poll(n.thread_id,n.id,r)}createAndRunStream(e,r){return ex.createThreadAssistantStream(e,this._client.beta.threads,r)}};tx.Runs=SO;tx.RunsPage=sB;tx.Messages=bj;tx.MessagesPage=iB;var Ay=class extends tt{constructor(){super(...arguments),this.realtime=new mA(this._client),this.chat=new tB(this._client),this.assistants=new mj(this._client),this.threads=new tx(this._client)}};Ay.Realtime=mA;Ay.Assistants=mj;Ay.AssistantsPage=J$;Ay.Threads=tx;var vj=class extends tt{create(e,r){return this._client.post("/completions",{body:e,...r,stream:e.stream??!1})}};var wj=class extends tt{create(e,r){let n=!!e.encoding_format,o=n?e.encoding_format:"base64";n&&yO("Request","User defined encoding_format:",e.encoding_format);let i=this._client.post("/embeddings",{body:{...e,encoding_format:o},...r});return n?i:(yO("response","Decoding base64 embeddings to float32 array"),i._thenUnwrap(a=>(a&&a.data&&a.data.forEach(s=>{let u=s.embedding;s.embedding=gxt(u)}),a)))}};var Sj=class extends tt{retrieve(e,r,n,o){return this._client.get(`/evals/${e}/runs/${r}/output_items/${n}`,o)}list(e,r,n={},o){return Gr(n)?this.list(e,r,{},n):this._client.getAPIList(`/evals/${e}/runs/${r}/output_items`,uB,{query:n,...o})}},uB=class extends Zn{};Sj.OutputItemListResponsesPage=uB;var xO=class extends tt{constructor(){super(...arguments),this.outputItems=new Sj(this._client)}create(e,r,n){return this._client.post(`/evals/${e}/runs`,{body:r,...n})}retrieve(e,r,n){return this._client.get(`/evals/${e}/runs/${r}`,n)}list(e,r={},n){return Gr(r)?this.list(e,{},r):this._client.getAPIList(`/evals/${e}/runs`,lB,{query:r,...n})}del(e,r,n){return this._client.delete(`/evals/${e}/runs/${r}`,n)}cancel(e,r,n){return this._client.post(`/evals/${e}/runs/${r}`,n)}},lB=class extends Zn{};xO.RunListResponsesPage=lB;xO.OutputItems=Sj;xO.OutputItemListResponsesPage=uB;var rx=class extends tt{constructor(){super(...arguments),this.runs=new xO(this._client)}create(e,r){return this._client.post("/evals",{body:e,...r})}retrieve(e,r){return this._client.get(`/evals/${e}`,r)}update(e,r,n){return this._client.post(`/evals/${e}`,{body:r,...n})}list(e={},r){return Gr(e)?this.list({},e):this._client.getAPIList("/evals",xj,{query:e,...r})}del(e,r){return this._client.delete(`/evals/${e}`,r)}},xj=class extends Zn{};rx.EvalListResponsesPage=xj;rx.Runs=xO;rx.RunListResponsesPage=lB;var hA=class extends tt{create(e,r){return this._client.post("/files",Yh({body:e,...r}))}retrieve(e,r){return this._client.get(`/files/${e}`,r)}list(e={},r){return Gr(e)?this.list({},e):this._client.getAPIList("/files",Cj,{query:e,...r})}del(e,r){return this._client.delete(`/files/${e}`,r)}content(e,r){return this._client.get(`/files/${e}/content`,{...r,headers:{Accept:"application/binary",...r?.headers},__binaryResponse:!0})}retrieveContent(e,r){return this._client.get(`/files/${e}/content`,r)}async waitForProcessing(e,{pollInterval:r=5e3,maxWait:n=30*60*1e3}={}){let o=new Set(["processed","error","deleted"]),i=Date.now(),a=await this.retrieve(e);for(;!a.status||!o.has(a.status);)if(await bO(r),a=await this.retrieve(e),Date.now()-i>n)throw new Ff({message:`Giving up on waiting for file ${e} to finish processing after ${n} milliseconds.`});return a}},Cj=class extends Zn{};hA.FileObjectsPage=Cj;var Oj=class extends tt{create(e,r,n){return this._client.getAPIList(`/fine_tuning/checkpoints/${e}/permissions`,cB,{body:r,method:"post",...n})}retrieve(e,r={},n){return Gr(r)?this.retrieve(e,{},r):this._client.get(`/fine_tuning/checkpoints/${e}/permissions`,{query:r,...n})}del(e,r){return this._client.delete(`/fine_tuning/checkpoints/${e}/permissions`,r)}},cB=class extends ZS{};Oj.PermissionCreateResponsesPage=cB;var gA=class extends tt{constructor(){super(...arguments),this.permissions=new Oj(this._client)}};gA.Permissions=Oj;gA.PermissionCreateResponsesPage=cB;var Pj=class extends tt{list(e,r={},n){return Gr(r)?this.list(e,{},r):this._client.getAPIList(`/fine_tuning/jobs/${e}/checkpoints`,dB,{query:r,...n})}},dB=class extends Zn{};Pj.FineTuningJobCheckpointsPage=dB;var nx=class extends tt{constructor(){super(...arguments),this.checkpoints=new Pj(this._client)}create(e,r){return this._client.post("/fine_tuning/jobs",{body:e,...r})}retrieve(e,r){return this._client.get(`/fine_tuning/jobs/${e}`,r)}list(e={},r){return Gr(e)?this.list({},e):this._client.getAPIList("/fine_tuning/jobs",fB,{query:e,...r})}cancel(e,r){return this._client.post(`/fine_tuning/jobs/${e}/cancel`,r)}listEvents(e,r={},n){return Gr(r)?this.listEvents(e,{},r):this._client.getAPIList(`/fine_tuning/jobs/${e}/events`,pB,{query:r,...n})}},fB=class extends Zn{},pB=class extends Zn{};nx.FineTuningJobsPage=fB;nx.FineTuningJobEventsPage=pB;nx.Checkpoints=Pj;nx.FineTuningJobCheckpointsPage=dB;var Iy=class extends tt{constructor(){super(...arguments),this.jobs=new nx(this._client),this.checkpoints=new gA(this._client)}};Iy.Jobs=nx;Iy.FineTuningJobsPage=fB;Iy.FineTuningJobEventsPage=pB;Iy.Checkpoints=gA;var Ej=class extends tt{createVariation(e,r){return this._client.post("/images/variations",Yh({body:e,...r}))}edit(e,r){return this._client.post("/images/edits",Yh({body:e,...r}))}generate(e,r){return this._client.post("/images/generations",{body:e,...r})}};var yA=class extends tt{retrieve(e,r){return this._client.get(`/models/${e}`,r)}list(e){return this._client.getAPIList("/models",Tj,e)}del(e,r){return this._client.delete(`/models/${e}`,r)}},Tj=class extends ZS{};yA.ModelsPage=Tj;var Aj=class extends tt{create(e,r){return this._client.post("/moderations",{body:e,...r})}};function jxt(t,e){return!e||!J3r(e)?{...t,output_parsed:null,output:t.output.map(r=>r.type==="function_call"?{...r,parsed_arguments:null}:r.type==="message"?{...r,content:r.content.map(n=>({...n,parsed:null}))}:r)}:KTe(t,e)}function KTe(t,e){let r=t.output.map(o=>{if(o.type==="function_call")return{...o,parsed_arguments:X3r(e,o)};if(o.type==="message"){let i=o.content.map(a=>a.type==="output_text"?{...a,parsed:G3r(e,a.text)}:a);return{...o,content:i}}return o}),n=Object.assign({},t,{output:r});return Object.getOwnPropertyDescriptor(t,"output_text")||GTe(n),Object.defineProperty(n,"output_parsed",{enumerable:!0,get(){for(let o of n.output)if(o.type==="message"){for(let i of o.content)if(i.type==="output_text"&&i.parsed!==null)return i.parsed}return null}}),n}function G3r(t,e){return t.text?.format?.type!=="json_schema"?null:"$parseRaw"in t.text?.format?(t.text?.format).$parseRaw(e):JSON.parse(e)}function J3r(t){return!!EV(t.text?.format)}function Y3r(t){return t?.$brand==="auto-parseable-tool"}function Z3r(t,e){return t.find(r=>r.type==="function"&&r.name===e)}function X3r(t,e){let r=Z3r(t.tools??[],e.name);return{...e,...e,parsed_arguments:Y3r(r)?r.$parseRaw(e.arguments):r?.strict?JSON.parse(e.arguments):null}}function GTe(t){let e=[];for(let r of t.output)if(r.type==="message")for(let n of r.content)n.type==="output_text"&&e.push(n.text);t.output_text=e.join("")}var mB=class extends tt{list(e,r={},n){return Gr(r)?this.list(e,{},r):this._client.getAPIList(`/responses/${e}/input_items`,Ore,{query:r,...n})}};var hB=function(t,e,r,n,o){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!o:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?o.call(t,r):o?o.value=r:e.set(t,r),r},bA=function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},gB,Pre,_A,Ere,Nxt,Dxt,Lxt,Fxt,Tre=class t extends fA{constructor(e){super(),gB.add(this),Pre.set(this,void 0),_A.set(this,void 0),Ere.set(this,void 0),hB(this,Pre,e,"f")}static createResponse(e,r,n){let o=new t(r);return o._run(()=>o._createResponse(e,r,{...n,headers:{...n?.headers,"X-Stainless-Helper-Method":"stream"}})),o}async _createResponse(e,r,n){let o=n?.signal;o&&(o.aborted&&this.controller.abort(),o.addEventListener("abort",()=>this.controller.abort())),bA(this,gB,"m",Nxt).call(this);let i=await e.responses.create({...r,stream:!0},{...n,signal:this.controller.signal});this._connected();for await(let a of i)bA(this,gB,"m",Dxt).call(this,a);if(i.controller.signal?.aborted)throw new Ai;return bA(this,gB,"m",Lxt).call(this)}[(Pre=new WeakMap,_A=new WeakMap,Ere=new WeakMap,gB=new WeakSet,Nxt=function(){this.ended||hB(this,_A,void 0,"f")},Dxt=function(r){if(this.ended)return;let n=bA(this,gB,"m",Fxt).call(this,r);switch(this._emit("event",r),r.type){case"response.output_text.delta":{let o=n.output[r.output_index];if(!o)throw new _t(`missing output at index ${r.output_index}`);if(o.type==="message"){let i=o.content[r.content_index];if(!i)throw new _t(`missing content at index ${r.content_index}`);if(i.type!=="output_text")throw new _t(`expected content to be 'output_text', got ${i.type}`);this._emit("response.output_text.delta",{...r,snapshot:i.text})}break}case"response.function_call_arguments.delta":{let o=n.output[r.output_index];if(!o)throw new _t(`missing output at index ${r.output_index}`);o.type==="function_call"&&this._emit("response.function_call_arguments.delta",{...r,snapshot:o.arguments});break}default:this._emit(r.type,r);break}},Lxt=function(){if(this.ended)throw new _t("stream has ended, this shouldn't happen");let r=bA(this,_A,"f");if(!r)throw new _t("request ended without sending any events");hB(this,_A,void 0,"f");let n=eHr(r,bA(this,Pre,"f"));return hB(this,Ere,n,"f"),n},Fxt=function(r){let n=bA(this,_A,"f");if(!n){if(r.type!=="response.created")throw new _t(`When snapshot hasn't been set yet, expected 'response.created' event, got ${r.type}`);return n=hB(this,_A,r.response,"f"),n}switch(r.type){case"response.output_item.added":{n.output.push(r.item);break}case"response.content_part.added":{let o=n.output[r.output_index];if(!o)throw new _t(`missing output at index ${r.output_index}`);o.type==="message"&&o.content.push(r.part);break}case"response.output_text.delta":{let o=n.output[r.output_index];if(!o)throw new _t(`missing output at index ${r.output_index}`);if(o.type==="message"){let i=o.content[r.content_index];if(!i)throw new _t(`missing content at index ${r.content_index}`);if(i.type!=="output_text")throw new _t(`expected content to be 'output_text', got ${i.type}`);i.text+=r.delta}break}case"response.function_call_arguments.delta":{let o=n.output[r.output_index];if(!o)throw new _t(`missing output at index ${r.output_index}`);o.type==="function_call"&&(o.arguments+=r.delta);break}case"response.completed":{hB(this,_A,r.response,"f");break}}return n},Symbol.asyncIterator)](){let e=[],r=[],n=!1;return this.on("event",o=>{let i=r.shift();i?i.resolve(o):e.push(o)}),this.on("end",()=>{n=!0;for(let o of r)o.resolve(void 0);r.length=0}),this.on("abort",o=>{n=!0;for(let i of r)i.reject(o);r.length=0}),this.on("error",o=>{n=!0;for(let i of r)i.reject(o);r.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:n?{value:void 0,done:!0}:new Promise((i,a)=>r.push({resolve:i,reject:a})).then(i=>i?{value:i,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}async finalResponse(){await this.done();let e=bA(this,Ere,"f");if(!e)throw new _t("stream ended without producing a ChatCompletion");return e}};function eHr(t,e){return jxt(t,e)}var vA=class extends tt{constructor(){super(...arguments),this.inputItems=new mB(this._client)}create(e,r){return this._client.post("/responses",{body:e,...r,stream:e.stream??!1})._thenUnwrap(n=>("object"in n&&n.object==="response"&&GTe(n),n))}retrieve(e,r={},n){return Gr(r)?this.retrieve(e,{},r):this._client.get(`/responses/${e}`,{query:r,...n})}del(e,r){return this._client.delete(`/responses/${e}`,{...r,headers:{Accept:"*/*",...r?.headers}})}parse(e,r){return this._client.responses.create(e,r)._thenUnwrap(n=>KTe(n,e))}stream(e,r){return Tre.createResponse(this._client,e,r)}},Ore=class extends Zn{};vA.InputItems=mB;var yB=class extends tt{create(e,r,n){return this._client.post(`/uploads/${e}/parts`,Yh({body:r,...n}))}};var wA=class extends tt{constructor(){super(...arguments),this.parts=new yB(this._client)}create(e,r){return this._client.post("/uploads",{body:e,...r})}cancel(e,r){return this._client.post(`/uploads/${e}/cancel`,r)}complete(e,r,n){return this._client.post(`/uploads/${e}/complete`,{body:r,...n})}};wA.Parts=yB;var kxt=async t=>{let e=await Promise.allSettled(t),r=e.filter(o=>o.status==="rejected");if(r.length){for(let o of r)console.error(o.reason);throw new Error(`${r.length} promise(s) failed - see the above errors`)}let n=[];for(let o of e)o.status==="fulfilled"&&n.push(o.value);return n};var SA=class extends tt{create(e,r,n){return this._client.post(`/vector_stores/${e}/files`,{body:r,...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}retrieve(e,r,n){return this._client.get(`/vector_stores/${e}/files/${r}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}update(e,r,n,o){return this._client.post(`/vector_stores/${e}/files/${r}`,{body:n,...o,headers:{"OpenAI-Beta":"assistants=v2",...o?.headers}})}list(e,r={},n){return Gr(r)?this.list(e,{},r):this._client.getAPIList(`/vector_stores/${e}/files`,xA,{query:r,...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}del(e,r,n){return this._client.delete(`/vector_stores/${e}/files/${r}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}async createAndPoll(e,r,n){let o=await this.create(e,r,n);return await this.poll(e,o.id,n)}async poll(e,r,n){let o={...n?.headers,"X-Stainless-Poll-Helper":"true"};for(n?.pollIntervalMs&&(o["X-Stainless-Custom-Poll-Interval"]=n.pollIntervalMs.toString());;){let i=await this.retrieve(e,r,{...n,headers:o}).withResponse(),a=i.data;switch(a.status){case"in_progress":let s=5e3;if(n?.pollIntervalMs)s=n.pollIntervalMs;else{let u=i.response.headers.get("openai-poll-after-ms");if(u){let l=parseInt(u);isNaN(l)||(s=l)}}await bO(s);break;case"failed":case"completed":return a}}}async upload(e,r,n){let o=await this._client.files.create({file:r,purpose:"assistants"},n);return this.create(e,{file_id:o.id},n)}async uploadAndPoll(e,r,n){let o=await this.upload(e,r,n);return await this.poll(e,o.id,n)}content(e,r,n){return this._client.getAPIList(`/vector_stores/${e}/files/${r}/content`,bB,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}},xA=class extends Zn{},bB=class extends ZS{};SA.VectorStoreFilesPage=xA;SA.FileContentResponsesPage=bB;var _B=class extends tt{create(e,r,n){return this._client.post(`/vector_stores/${e}/file_batches`,{body:r,...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}retrieve(e,r,n){return this._client.get(`/vector_stores/${e}/file_batches/${r}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}cancel(e,r,n){return this._client.post(`/vector_stores/${e}/file_batches/${r}/cancel`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}async createAndPoll(e,r,n){let o=await this.create(e,r);return await this.poll(e,o.id,n)}listFiles(e,r,n={},o){return Gr(n)?this.listFiles(e,r,{},n):this._client.getAPIList(`/vector_stores/${e}/file_batches/${r}/files`,xA,{query:n,...o,headers:{"OpenAI-Beta":"assistants=v2",...o?.headers}})}async poll(e,r,n){let o={...n?.headers,"X-Stainless-Poll-Helper":"true"};for(n?.pollIntervalMs&&(o["X-Stainless-Custom-Poll-Interval"]=n.pollIntervalMs.toString());;){let{data:i,response:a}=await this.retrieve(e,r,{...n,headers:o}).withResponse();switch(i.status){case"in_progress":let s=5e3;if(n?.pollIntervalMs)s=n.pollIntervalMs;else{let u=a.headers.get("openai-poll-after-ms");if(u){let l=parseInt(u);isNaN(l)||(s=l)}}await bO(s);break;case"failed":case"cancelled":case"completed":return i}}}async uploadAndPoll(e,{files:r,fileIds:n=[]},o){if(r==null||r.length==0)throw new Error("No `files` provided to process. If you've already uploaded files you should use `.createAndPoll()` instead");let i=o?.maxConcurrency??5,a=Math.min(i,r.length),s=this._client,u=r.values(),l=[...n];async function c(f){for(let p of f){let m=await s.files.create({file:p,purpose:"assistants"},o);l.push(m.id)}}let d=Array(a).fill(u).map(c);return await kxt(d),await this.createAndPoll(e,{file_ids:l})}};var Lm=class extends tt{constructor(){super(...arguments),this.files=new SA(this._client),this.fileBatches=new _B(this._client)}create(e,r){return this._client.post("/vector_stores",{body:e,...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}retrieve(e,r){return this._client.get(`/vector_stores/${e}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}update(e,r,n){return this._client.post(`/vector_stores/${e}`,{body:r,...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}list(e={},r){return Gr(e)?this.list({},e):this._client.getAPIList("/vector_stores",Ij,{query:e,...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}del(e,r){return this._client.delete(`/vector_stores/${e}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}search(e,r,n){return this._client.getAPIList(`/vector_stores/${e}/search`,Mj,{body:r,method:"post",...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}},Ij=class extends Zn{},Mj=class extends ZS{};Lm.VectorStoresPage=Ij;Lm.VectorStoreSearchResponsesPage=Mj;Lm.Files=SA;Lm.VectorStoreFilesPage=xA;Lm.FileContentResponsesPage=bB;Lm.FileBatches=_B;var Bxt,Vt=class extends cre{constructor({baseURL:e=aA("OPENAI_BASE_URL"),apiKey:r=aA("OPENAI_API_KEY"),organization:n=aA("OPENAI_ORG_ID")??null,project:o=aA("OPENAI_PROJECT_ID")??null,...i}={}){if(r===void 0)throw new _t("The OPENAI_API_KEY environment variable is missing or empty; either provide it, or instantiate the OpenAI client with an apiKey option, like new OpenAI({ apiKey: 'My API Key' }).");let a={apiKey:r,organization:n,project:o,...i,baseURL:e||"https://api.openai.com/v1"};if(!a.dangerouslyAllowBrowser&&hxt())throw new _t(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new OpenAI({ apiKey, dangerouslyAllowBrowser: true });

https://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety
`);super({baseURL:a.baseURL,timeout:a.timeout??6e5,httpAgent:a.httpAgent,maxRetries:a.maxRetries,fetch:a.fetch}),this.completions=new vj(this),this.chat=new _O(this),this.embeddings=new wj(this),this.files=new hA(this),this.images=new Ej(this),this.audio=new XS(this),this.moderations=new Aj(this),this.models=new yA(this),this.fineTuning=new Iy(this),this.vectorStores=new Lm(this),this.beta=new Ay(this),this.batches=new cA(this),this.uploads=new wA(this),this.responses=new vA(this),this.evals=new rx(this),this._options=a,this.apiKey=r,this.organization=n,this.project=o}defaultQuery(){return this._options.defaultQuery}defaultHeaders(e){return{...super.defaultHeaders(e),"OpenAI-Organization":this.organization,"OpenAI-Project":this.project,...this._options.defaultHeaders}}authHeaders(e){return{Authorization:`Bearer ${this.apiKey}`}}stringifyQuery(e){return dTe(e,{arrayFormat:"brackets"})}};Bxt=Vt;Vt.OpenAI=Bxt;Vt.DEFAULT_TIMEOUT=6e5;Vt.OpenAIError=_t;Vt.APIError=qs;Vt.APIConnectionError=gO;Vt.APIConnectionTimeoutError=Ff;Vt.APIUserAbortError=Ai;Vt.NotFoundError=F$;Vt.ConflictError=k$;Vt.RateLimitError=B$;Vt.BadRequestError=N$;Vt.AuthenticationError=D$;Vt.InternalServerError=q$;Vt.PermissionDeniedError=L$;Vt.UnprocessableEntityError=$$;Vt.toFile=CTe;Vt.fileFromPath=nre;Vt.Completions=vj;Vt.Chat=_O;Vt.ChatCompletionsPage=lA;Vt.Embeddings=wj;Vt.Files=hA;Vt.FileObjectsPage=Cj;Vt.Images=Ej;Vt.Audio=XS;Vt.Moderations=Aj;Vt.Models=yA;Vt.ModelsPage=Tj;Vt.FineTuning=Iy;Vt.VectorStores=Lm;Vt.VectorStoresPage=Ij;Vt.VectorStoreSearchResponsesPage=Mj;Vt.Beta=Ay;Vt.Batches=cA;Vt.BatchesPage=pj;Vt.Uploads=wA;Vt.Responses=vA;Vt.Evals=rx;Vt.EvalListResponsesPage=xj;var Are=class extends Vt{constructor({baseURL:e=aA("OPENAI_BASE_URL"),apiKey:r=aA("AZURE_OPENAI_API_KEY"),apiVersion:n=aA("OPENAI_API_VERSION"),endpoint:o,deployment:i,azureADTokenProvider:a,dangerouslyAllowBrowser:s,...u}={}){if(!n)throw new _t("The OPENAI_API_VERSION environment variable is missing or empty; either provide it, or instantiate the AzureOpenAI client with an apiVersion option, like new AzureOpenAI({ apiVersion: 'My API Version' }).");if(typeof a=="function"&&(s=!0),!a&&!r)throw new _t("Missing credentials. Please pass one of `apiKey` and `azureADTokenProvider`, or set the `AZURE_OPENAI_API_KEY` environment variable.");if(a&&r)throw new _t("The `apiKey` and `azureADTokenProvider` arguments are mutually exclusive; only one can be passed at a time.");if(r??(r=$xt),u.defaultQuery={...u.defaultQuery,"api-version":n},e){if(o)throw new _t("baseURL and endpoint are mutually exclusive")}else{if(o||(o=process.env.AZURE_OPENAI_ENDPOINT),!o)throw new _t("Must provide one of the `baseURL` or `endpoint` arguments, or the `AZURE_OPENAI_ENDPOINT` environment variable");e=`${o}/openai`}super({apiKey:r,baseURL:e,...u,...s!==void 0?{dangerouslyAllowBrowser:s}:{}}),this.apiVersion="",this._azureADTokenProvider=a,this.apiVersion=n,this.deploymentName=i}buildRequest(e,r={}){if(iHr.has(e.path)&&e.method==="post"&&e.body!==void 0){if(!H$(e.body))throw new Error("Expected request body to be an object");let n=this.deploymentName||e.body.model||e.__metadata?.model;n!==void 0&&!this.baseURL.includes("/deployments")&&(e.path=`/deployments/${n}${e.path}`)}return super.buildRequest(e,r)}async _getAzureADToken(){if(typeof this._azureADTokenProvider=="function"){let e=await this._azureADTokenProvider();if(!e||typeof e!="string")throw new _t(`Expected 'azureADTokenProvider' argument to return a string but it returned ${e}`);return e}}authHeaders(e){return{}}async prepareOptions(e){if(e.headers?.["api-key"])return super.prepareOptions(e);let r=await this._getAzureADToken();if(e.headers??(e.headers={}),r)e.headers.Authorization=`Bearer ${r}`;else if(this.apiKey!==$xt)e.headers["api-key"]=this.apiKey;else throw new _t("Unable to handle auth");return super.prepareOptions(e)}},iHr=new Set(["/completions","/chat/completions","/embeddings","/audio/transcriptions","/audio/translations","/audio/speech","/images/generations"]),$xt="<Missing Key>";$d();Rm();um();Yg();bL();Xpe();hE();KM();function Lp(t,e){if(t.function===void 0)return;let r;if(e?.partial)try{r=cL(t.function.arguments??"{}")}catch{return}else try{r=JSON.parse(t.function.arguments)}catch(o){throw new am([`Function "${t.function.name}" arguments:`,"",t.function.arguments,"","are not valid JSON.",`Error: ${o.message}`].join(`
`))}let n={name:t.function.name,args:r,type:"tool_call"};return e?.returnId&&(n.id=t.id),n}function ox(t){if(t.id===void 0)throw new Error('All OpenAI tool calls must have an "id" field.');return{id:t.id,type:"function",function:{name:t.name,arguments:JSON.stringify(t.args)}}}function Fm(t,e){return{name:t.function?.name,args:t.function?.arguments,id:t.id,error:e,type:"invalid_tool_call"}}var JTe=class extends eR{static lc_name(){return"JsonOutputToolsParser"}constructor(e){super(e),Object.defineProperty(this,"returnId",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","output_parsers","openai_tools"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),this.returnId=e?.returnId??this.returnId}_diff(){throw new Error("Not supported.")}async parse(){throw new Error("Not implemented.")}async parseResult(e){return await this.parsePartialResult(e,!1)}async parsePartialResult(e,r=!0){let n=e[0].message,o;if(bi(n)&&n.tool_calls?.length?o=n.tool_calls.map(a=>{let{id:s,...u}=a;return this.returnId?{id:s,...u}:u}):n.additional_kwargs.tool_calls!==void 0&&(o=JSON.parse(JSON.stringify(n.additional_kwargs.tool_calls)).map(s=>Lp(s,{returnId:this.returnId,partial:r}))),!o)return[];let i=[];for(let a of o)if(a!==void 0){let s={type:a.name,args:a.args,id:a.id};i.push(s)}return i}},Fc=class extends JTe{static lc_name(){return"JsonOutputKeyToolsParser"}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","output_parsers","openai_tools"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"returnId",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"keyName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"returnSingle",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"zodSchema",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.keyName=e.keyName,this.returnSingle=e.returnSingle??this.returnSingle,this.zodSchema=e.zodSchema}async _validateResult(e){if(this.zodSchema===void 0)return e;let r=await this.zodSchema.safeParseAsync(e);if(r.success)return r.data;throw new am(`Failed to parse. Text: "${JSON.stringify(e,null,2)}". Error: ${JSON.stringify(r.error.errors)}`,JSON.stringify(e,null,2))}async parsePartialResult(e){let n=(await super.parsePartialResult(e)).filter(i=>i.type===this.keyName),o=n;if(n.length)return this.returnId||(o=n.map(i=>i.args)),this.returnSingle?o[0]:o}async parseResult(e){let n=(await super.parsePartialResult(e,!1)).filter(a=>a.type===this.keyName),o=n;return n.length?(this.returnId||(o=n.map(a=>a.args)),this.returnSingle?this._validateResult(o[0]):await Promise.all(o.map(a=>this._validateResult(a)))):void 0}};mc();var Uxt=Symbol("Let zodToJsonSchema decide on which parser to use"),qxt={name:void 0,$refStrategy:"root",effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",nullableStrategy:"from-target",removeAdditionalStrategy:"passthrough",definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,errorMessages:!1,markdownDescription:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref"},zxt=t=>typeof t=="string"?{...qxt,basePath:["#"],definitions:{},name:t}:{...qxt,basePath:["#"],definitions:{},...t};var DV=t=>"_def"in t?t._def:t;function Hxt(t){if(!t)return!0;for(let e in t)return!1;return!0}var Vxt=t=>{let e=zxt(t),r=e.name!==void 0?[...e.basePath,e.definitionPath,e.name]:e.basePath;return{...e,currentPath:r,propertyPath:void 0,seenRefs:new Set,seen:new Map(Object.entries(e.definitions).map(([n,o])=>[DV(o),{def:DV(o),path:[...e.basePath,e.definitionPath,n],jsonSchema:void 0}]))}};function YTe(t,e,r,n){n?.errorMessages&&r&&(t.errorMessage={...t.errorMessage,[e]:r})}function Bn(t,e,r,n,o){t[e]=r,YTe(t,e,n,o)}md();function Wxt(){return{}}md();function Kxt(t,e){let r={type:"array"};return t.type?._def?.typeName!==ce.ZodAny&&(r.items=fr(t.type._def,{...e,currentPath:[...e.currentPath,"items"]})),t.minLength&&Bn(r,"minItems",t.minLength.value,t.minLength.message,e),t.maxLength&&Bn(r,"maxItems",t.maxLength.value,t.maxLength.message,e),t.exactLength&&(Bn(r,"minItems",t.exactLength.value,t.exactLength.message,e),Bn(r,"maxItems",t.exactLength.value,t.exactLength.message,e)),r}function Gxt(t,e){let r={type:"integer",format:"int64"};if(!t.checks)return r;for(let n of t.checks)switch(n.kind){case"min":e.target==="jsonSchema7"?n.inclusive?Bn(r,"minimum",n.value,n.message,e):Bn(r,"exclusiveMinimum",n.value,n.message,e):(n.inclusive||(r.exclusiveMinimum=!0),Bn(r,"minimum",n.value,n.message,e));break;case"max":e.target==="jsonSchema7"?n.inclusive?Bn(r,"maximum",n.value,n.message,e):Bn(r,"exclusiveMaximum",n.value,n.message,e):(n.inclusive||(r.exclusiveMaximum=!0),Bn(r,"maximum",n.value,n.message,e));break;case"multipleOf":Bn(r,"multipleOf",n.value,n.message,e);break}return r}function Jxt(){return{type:"boolean"}}function Yxt(t,e){return fr(t.type._def,e)}var Zxt=(t,e)=>fr(t.innerType._def,e);function ZTe(t,e,r){let n=r??e.dateStrategy;if(Array.isArray(n))return{anyOf:n.map((o,i)=>ZTe(t,e,o))};switch(n){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return aHr(t,e)}}var aHr=(t,e)=>{let r={type:"integer",format:"unix-time"};if(e.target==="openApi3")return r;for(let n of t.checks)switch(n.kind){case"min":Bn(r,"minimum",n.value,n.message,e);break;case"max":Bn(r,"maximum",n.value,n.message,e);break}return r};function Xxt(t,e){return{...fr(t.innerType._def,e),default:t.defaultValue()}}function Qxt(t,e,r){return e.effectStrategy==="input"?fr(t.schema._def,e,r):{}}function eCt(t){return{type:"string",enum:[...t.values]}}var sHr=t=>"type"in t&&t.type==="string"?!1:"allOf"in t;function tCt(t,e){let r=[fr(t.left._def,{...e,currentPath:[...e.currentPath,"allOf","0"]}),fr(t.right._def,{...e,currentPath:[...e.currentPath,"allOf","1"]})].filter(i=>!!i),n=e.target==="jsonSchema2019-09"?{unevaluatedProperties:!1}:void 0,o=[];return r.forEach(i=>{if(sHr(i))o.push(...i.allOf),i.unevaluatedProperties===void 0&&(n=void 0);else{let a=i;if("additionalProperties"in i&&i.additionalProperties===!1){let{additionalProperties:s,...u}=i;a=u}else n=void 0;o.push(a)}}),o.length?{allOf:o,...n}:void 0}function rCt(t,e){let r=typeof t.value;return r!=="bigint"&&r!=="number"&&r!=="boolean"&&r!=="string"?{type:Array.isArray(t.value)?"array":"object"}:e.target==="openApi3"?{type:r==="bigint"?"integer":r,enum:[t.value]}:{type:r==="bigint"?"integer":r,const:t.value}}md();var XTe,Rj={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>(XTe===void 0&&(XTe=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),XTe),uuid:/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/,ipv4:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv6:/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/};function Ire(t,e){let r={type:"string"};function n(o){return e.patternStrategy==="escape"?uHr(o):o}if(t.checks)for(let o of t.checks)switch(o.kind){case"min":Bn(r,"minLength",typeof r.minLength=="number"?Math.max(r.minLength,o.value):o.value,o.message,e);break;case"max":Bn(r,"maxLength",typeof r.maxLength=="number"?Math.min(r.maxLength,o.value):o.value,o.message,e);break;case"email":switch(e.emailStrategy){case"format:email":My(r,"email",o.message,e);break;case"format:idn-email":My(r,"idn-email",o.message,e);break;case"pattern:zod":Ry(r,Rj.email,o.message,e);break}break;case"url":My(r,"uri",o.message,e);break;case"uuid":My(r,"uuid",o.message,e);break;case"regex":Ry(r,o.regex,o.message,e);break;case"cuid":Ry(r,Rj.cuid,o.message,e);break;case"cuid2":Ry(r,Rj.cuid2,o.message,e);break;case"startsWith":Ry(r,RegExp(`^${n(o.value)}`),o.message,e);break;case"endsWith":Ry(r,RegExp(`${n(o.value)}$`),o.message,e);break;case"datetime":My(r,"date-time",o.message,e);break;case"date":My(r,"date",o.message,e);break;case"time":My(r,"time",o.message,e);break;case"duration":My(r,"duration",o.message,e);break;case"length":Bn(r,"minLength",typeof r.minLength=="number"?Math.max(r.minLength,o.value):o.value,o.message,e),Bn(r,"maxLength",typeof r.maxLength=="number"?Math.min(r.maxLength,o.value):o.value,o.message,e);break;case"includes":{Ry(r,RegExp(n(o.value)),o.message,e);break}case"ip":{o.version!=="v6"&&My(r,"ipv4",o.message,e),o.version!=="v4"&&My(r,"ipv6",o.message,e);break}case"emoji":Ry(r,Rj.emoji,o.message,e);break;case"ulid":{Ry(r,Rj.ulid,o.message,e);break}case"base64":{switch(e.base64Strategy){case"format:binary":{My(r,"binary",o.message,e);break}case"contentEncoding:base64":{Bn(r,"contentEncoding","base64",o.message,e);break}case"pattern:zod":{Ry(r,Rj.base64,o.message,e);break}}break}case"nanoid":Ry(r,Rj.nanoid,o.message,e);case"toLowerCase":case"toUpperCase":case"trim":break;default:}return r}var uHr=t=>Array.from(t).map(e=>/[a-zA-Z0-9]/.test(e)?e:`\\${e}`).join(""),My=(t,e,r,n)=>{t.format||t.anyOf?.some(o=>o.format)?(t.anyOf||(t.anyOf=[]),t.format&&(t.anyOf.push({format:t.format,...t.errorMessage&&n.errorMessages&&{errorMessage:{format:t.errorMessage.format}}}),delete t.format,t.errorMessage&&(delete t.errorMessage.format,Object.keys(t.errorMessage).length===0&&delete t.errorMessage)),t.anyOf.push({format:e,...r&&n.errorMessages&&{errorMessage:{format:r}}})):Bn(t,"format",e,r,n)},Ry=(t,e,r,n)=>{t.pattern||t.allOf?.some(o=>o.pattern)?(t.allOf||(t.allOf=[]),t.pattern&&(t.allOf.push({pattern:t.pattern,...t.errorMessage&&n.errorMessages&&{errorMessage:{pattern:t.errorMessage.pattern}}}),delete t.pattern,t.errorMessage&&(delete t.errorMessage.pattern,Object.keys(t.errorMessage).length===0&&delete t.errorMessage)),t.allOf.push({pattern:nCt(e,n),...r&&n.errorMessages&&{errorMessage:{pattern:r}}})):Bn(t,"pattern",nCt(e,n),r,n)},nCt=(t,e)=>{let r=typeof t=="function"?t():t;if(!e.applyRegexFlags||!r.flags)return r.source;let n={i:r.flags.includes("i"),m:r.flags.includes("m"),s:r.flags.includes("s")},o=n.i?r.source.toLowerCase():r.source,i="",a=!1,s=!1,u=!1;for(let l=0;l<o.length;l++){if(a){i+=o[l],a=!1;continue}if(n.i){if(s){if(o[l].match(/[a-z]/)){u?(i+=o[l],i+=`${o[l-2]}-${o[l]}`.toUpperCase(),u=!1):o[l+1]==="-"&&o[l+2]?.match(/[a-z]/)?(i+=o[l],u=!0):i+=`${o[l]}${o[l].toUpperCase()}`;continue}}else if(o[l].match(/[a-z]/)){i+=`[${o[l]}${o[l].toUpperCase()}]`;continue}}if(n.m){if(o[l]==="^"){i+=`(^|(?<=[\r
]))`;continue}else if(o[l]==="$"){i+=`($|(?=[\r
]))`;continue}}if(n.s&&o[l]==="."){i+=s?`${o[l]}\r
`:`[${o[l]}\r
]`;continue}i+=o[l],o[l]==="\\"?a=!0:s&&o[l]==="]"?s=!1:!s&&o[l]==="["&&(s=!0)}try{let l=new RegExp(i)}catch{return console.warn(`Could not convert regex pattern at ${e.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),r.source}return i};function Mre(t,e){if(e.target==="openApi3"&&t.keyType?._def.typeName===ce.ZodEnum)return{type:"object",required:t.keyType._def.values,properties:t.keyType._def.values.reduce((n,o)=>({...n,[o]:fr(t.valueType._def,{...e,currentPath:[...e.currentPath,"properties",o]})??{}}),{}),additionalProperties:!1};let r={type:"object",additionalProperties:fr(t.valueType._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]})??{}};if(e.target==="openApi3")return r;if(t.keyType?._def.typeName===ce.ZodString&&t.keyType._def.checks?.length){let n=Object.entries(Ire(t.keyType._def,e)).reduce((o,[i,a])=>i==="type"?o:{...o,[i]:a},{});return{...r,propertyNames:n}}else if(t.keyType?._def.typeName===ce.ZodEnum)return{...r,propertyNames:{enum:t.keyType._def.values}};return r}function oCt(t,e){if(e.mapStrategy==="record")return Mre(t,e);let r=fr(t.keyType._def,{...e,currentPath:[...e.currentPath,"items","items","0"]})||{},n=fr(t.valueType._def,{...e,currentPath:[...e.currentPath,"items","items","1"]})||{};return{type:"array",maxItems:125,items:{type:"array",items:[r,n],minItems:2,maxItems:2}}}function iCt(t){let e=t.values,n=Object.keys(t.values).filter(i=>typeof e[e[i]]!="number").map(i=>e[i]),o=Array.from(new Set(n.map(i=>typeof i)));return{type:o.length===1?o[0]==="string"?"string":"number":["string","number"],enum:n}}function aCt(){return{not:{}}}function sCt(t){return t.target==="openApi3"?{enum:["null"],nullable:!0}:{type:"null"}}var LV={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function lCt(t,e){if(e.target==="openApi3")return uCt(t,e);let r=t.options instanceof Map?Array.from(t.options.values()):t.options;if(r.every(n=>n._def.typeName in LV&&(!n._def.checks||!n._def.checks.length))){let n=r.reduce((o,i)=>{let a=LV[i._def.typeName];return a&&!o.includes(a)?[...o,a]:o},[]);return{type:n.length>1?n:n[0]}}else if(r.every(n=>n._def.typeName==="ZodLiteral"&&!n.description)){let n=r.reduce((o,i)=>{let a=typeof i._def.value;switch(a){case"string":case"number":case"boolean":return[...o,a];case"bigint":return[...o,"integer"];case"object":if(i._def.value===null)return[...o,"null"];case"symbol":case"undefined":case"function":default:return o}},[]);if(n.length===r.length){let o=n.filter((i,a,s)=>s.indexOf(i)===a);return{type:o.length>1?o:o[0],enum:r.reduce((i,a)=>i.includes(a._def.value)?i:[...i,a._def.value],[])}}}else if(r.every(n=>n._def.typeName==="ZodEnum"))return{type:"string",enum:r.reduce((n,o)=>[...n,...o._def.values.filter(i=>!n.includes(i))],[])};return uCt(t,e)}var uCt=(t,e)=>{let r=(t.options instanceof Map?Array.from(t.options.values()):t.options).map((n,o)=>fr(n._def,{...e,currentPath:[...e.currentPath,"anyOf",`${o}`]})).filter(n=>!!n&&(!e.strictUnions||typeof n=="object"&&Object.keys(n).length>0));return r.length?{anyOf:r}:void 0};function cCt(t,e){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(t.innerType._def.typeName)&&(!t.innerType._def.checks||!t.innerType._def.checks.length))return e.target==="openApi3"||e.nullableStrategy==="property"?{type:LV[t.innerType._def.typeName],nullable:!0}:{type:[LV[t.innerType._def.typeName],"null"]};if(e.target==="openApi3"){let n=fr(t.innerType._def,{...e,currentPath:[...e.currentPath]});return n&&"$ref"in n?{allOf:[n],nullable:!0}:n&&{...n,nullable:!0}}let r=fr(t.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","0"]});return r&&{anyOf:[r,{type:"null"}]}}function dCt(t,e){let r={type:"number"};if(!t.checks)return r;for(let n of t.checks)switch(n.kind){case"int":r.type="integer",YTe(r,"type",n.message,e);break;case"min":e.target==="jsonSchema7"?n.inclusive?Bn(r,"minimum",n.value,n.message,e):Bn(r,"exclusiveMinimum",n.value,n.message,e):(n.inclusive||(r.exclusiveMinimum=!0),Bn(r,"minimum",n.value,n.message,e));break;case"max":e.target==="jsonSchema7"?n.inclusive?Bn(r,"maximum",n.value,n.message,e):Bn(r,"exclusiveMaximum",n.value,n.message,e):(n.inclusive||(r.exclusiveMaximum=!0),Bn(r,"maximum",n.value,n.message,e));break;case"multipleOf":Bn(r,"multipleOf",n.value,n.message,e);break}return r}function lHr(t,e){return e.removeAdditionalStrategy==="strict"?t.catchall._def.typeName==="ZodNever"?t.unknownKeys!=="strict":fr(t.catchall._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]})??!0:t.catchall._def.typeName==="ZodNever"?t.unknownKeys==="passthrough":fr(t.catchall._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]})??!0}function fCt(t,e){let r={type:"object",...Object.entries(t.shape()).reduce((n,[o,i])=>{if(i===void 0||i._def===void 0)return n;let a=[...e.currentPath,"properties",o],s=fr(i._def,{...e,currentPath:a,propertyPath:a});return s===void 0?n:(e.openaiStrictMode&&i.isOptional()&&!i.isNullable()&&console.warn(`Zod field at \`${a.join("/")}\` uses \`.optional()\` without \`.nullable()\` which is not supported by the API. See: https://platform.openai.com/docs/guides/structured-outputs?api-mode=responses#all-fields-must-be-required
This will become an error in a future version of the SDK.`),{properties:{...n.properties,[o]:s},required:i.isOptional()&&!e.openaiStrictMode?n.required:[...n.required,o]})},{properties:{},required:[]}),additionalProperties:lHr(t,e)};return r.required.length||delete r.required,r}var pCt=(t,e)=>{if(e.currentPath.toString()===e.propertyPath?.toString())return fr(t.innerType._def,e);let r=fr(t.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","1"]});return r?{anyOf:[{not:{}},r]}:{}};var mCt=(t,e)=>{if(e.pipeStrategy==="input")return fr(t.in._def,e);if(e.pipeStrategy==="output")return fr(t.out._def,e);let r=fr(t.in._def,{...e,currentPath:[...e.currentPath,"allOf","0"]}),n=fr(t.out._def,{...e,currentPath:[...e.currentPath,"allOf",r?"1":"0"]});return{allOf:[r,n].filter(o=>o!==void 0)}};function hCt(t,e){return fr(t.type._def,e)}function gCt(t,e){let n={type:"array",uniqueItems:!0,items:fr(t.valueType._def,{...e,currentPath:[...e.currentPath,"items"]})};return t.minSize&&Bn(n,"minItems",t.minSize.value,t.minSize.message,e),t.maxSize&&Bn(n,"maxItems",t.maxSize.value,t.maxSize.message,e),n}function yCt(t,e){return t.rest?{type:"array",minItems:t.items.length,items:t.items.map((r,n)=>fr(r._def,{...e,currentPath:[...e.currentPath,"items",`${n}`]})).reduce((r,n)=>n===void 0?r:[...r,n],[]),additionalItems:fr(t.rest._def,{...e,currentPath:[...e.currentPath,"additionalItems"]})}:{type:"array",minItems:t.items.length,maxItems:t.items.length,items:t.items.map((r,n)=>fr(r._def,{...e,currentPath:[...e.currentPath,"items",`${n}`]})).reduce((r,n)=>n===void 0?r:[...r,n],[])}}function bCt(){return{not:{}}}function _Ct(){return{}}var vCt=(t,e)=>fr(t.innerType._def,e);function fr(t,e,r=!1){let n=e.seen.get(t);if(e.override){let a=e.override?.(t,e,n,r);if(a!==Uxt)return a}if(n&&!r){let a=cHr(n,e);if(a!==void 0)return"$ref"in a&&e.seenRefs.add(a.$ref),a}let o={def:t,path:e.currentPath,jsonSchema:void 0};e.seen.set(t,o);let i=fHr(t,t.typeName,e,r);return i&&pHr(t,e,i),o.jsonSchema=i,i}var cHr=(t,e)=>{switch(e.$refStrategy){case"root":return{$ref:t.path.join("/")};case"extract-to-root":let r=t.path.slice(e.basePath.length+1).join("_");return r!==e.name&&e.nameStrategy==="duplicate-ref"&&(e.definitions[r]=t.def),{$ref:[...e.basePath,e.definitionPath,r].join("/")};case"relative":return{$ref:dHr(e.currentPath,t.path)};case"none":case"seen":return t.path.length<e.currentPath.length&&t.path.every((n,o)=>e.currentPath[o]===n)?(console.warn(`Recursive reference detected at ${e.currentPath.join("/")}! Defaulting to any`),{}):e.$refStrategy==="seen"?{}:void 0}},dHr=(t,e)=>{let r=0;for(;r<t.length&&r<e.length&&t[r]===e[r];r++);return[(t.length-r).toString(),...e.slice(r)].join("/")},fHr=(t,e,r,n)=>{switch(e){case ce.ZodString:return Ire(t,r);case ce.ZodNumber:return dCt(t,r);case ce.ZodObject:return fCt(t,r);case ce.ZodBigInt:return Gxt(t,r);case ce.ZodBoolean:return Jxt();case ce.ZodDate:return ZTe(t,r);case ce.ZodUndefined:return bCt();case ce.ZodNull:return sCt(r);case ce.ZodArray:return Kxt(t,r);case ce.ZodUnion:case ce.ZodDiscriminatedUnion:return lCt(t,r);case ce.ZodIntersection:return tCt(t,r);case ce.ZodTuple:return yCt(t,r);case ce.ZodRecord:return Mre(t,r);case ce.ZodLiteral:return rCt(t,r);case ce.ZodEnum:return eCt(t);case ce.ZodNativeEnum:return iCt(t);case ce.ZodNullable:return cCt(t,r);case ce.ZodOptional:return pCt(t,r);case ce.ZodMap:return oCt(t,r);case ce.ZodSet:return gCt(t,r);case ce.ZodLazy:return fr(t.getter()._def,r);case ce.ZodPromise:return hCt(t,r);case ce.ZodNaN:case ce.ZodNever:return aCt();case ce.ZodEffects:return Qxt(t,r,n);case ce.ZodAny:return Wxt();case ce.ZodUnknown:return _Ct();case ce.ZodDefault:return Xxt(t,r);case ce.ZodBranded:return Yxt(t,r);case ce.ZodReadonly:return vCt(t,r);case ce.ZodCatch:return Zxt(t,r);case ce.ZodPipeline:return mCt(t,r);case ce.ZodFunction:case ce.ZodVoid:case ce.ZodSymbol:return;default:return(o=>{})(e)}},pHr=(t,e,r)=>(t.description&&(r.description=t.description,e.markdownDescription&&(r.markdownDescription=t.description)),r);var wCt=(t,e)=>{let r=Vxt(e),n=typeof e=="string"?e:e?.nameStrategy==="title"?void 0:e?.name,o=fr(t._def,n===void 0?r:{...r,currentPath:[...r.basePath,r.definitionPath,n]},!1)??{},i=typeof e=="object"&&e.name!==void 0&&e.nameStrategy==="title"?e.name:void 0;i!==void 0&&(o.title=i);let a=(()=>{if(Hxt(r.definitions))return;let u={},l=new Set;for(let c=0;c<500;c++){let d=Object.entries(r.definitions).filter(([f])=>!l.has(f));if(d.length===0)break;for(let[f,p]of d)u[f]=fr(DV(p),{...r,currentPath:[...r.basePath,r.definitionPath,f]},!0)??{},l.add(f)}return u})(),s=n===void 0?a?{...o,[r.definitionPath]:a}:o:r.nameStrategy==="duplicate-ref"?{...o,...a||r.seenRefs.size?{[r.definitionPath]:{...a,...r.seenRefs.size?{[n]:o}:void 0}}:void 0}:{$ref:[...r.$refStrategy==="relative"?[]:r.basePath,r.definitionPath,n].join("/"),[r.definitionPath]:{...a,[n]:o}};return r.target==="jsonSchema7"?s.$schema="http://json-schema.org/draft-07/schema#":r.target==="jsonSchema2019-09"&&(s.$schema="https://json-schema.org/draft/2019-09/schema#"),s};function SCt(t,e){return wCt(t,{openaiStrictMode:!0,name:e.name,nameStrategy:"duplicate-ref",$refStrategy:"extract-to-root",nullableStrategy:"property"})}function vB(t,e,r){return bxt({type:"json_schema",json_schema:{...r,name:e,strict:!0,schema:SCt(t,{name:e})}},n=>t.parse(JSON.parse(n)))}function Rre(t){return _xt({type:"function",function:{name:t.name,parameters:SCt(t.parameters,{name:t.name}),strict:!0,...t.description?{description:t.description}:void 0}},{callback:t.function,parser:e=>t.parameters.parse(JSON.parse(e))})}function CO(t){let{azureOpenAIApiDeploymentName:e,azureOpenAIApiInstanceName:r,azureOpenAIApiKey:n,azureOpenAIBasePath:o,baseURL:i,azureADTokenProvider:a,azureOpenAIEndpoint:s}=t;if((n||a)&&o&&e)return`${o}/${e}`;if((n||a)&&s&&e)return`${s}/openai/deployments/${e}`;if(n||a){if(!r)throw new Error("azureOpenAIApiInstanceName is required when using azureOpenAIApiKey");if(!e)throw new Error("azureOpenAIApiDeploymentName is a required parameter when using azureOpenAIApiKey");return`https://${r}.openai.azure.com/openai/deployments/${e}`}return i}mc();function FV(t,e){return t.lc_error_code=e,t.message=`${t.message}

Troubleshooting URL: https://js.langchain.com/docs/troubleshooting/errors/${e}/
`,t}function OO(t){let e;return t.constructor.name===Ff.name?(e=new Error(t.message),e.name="TimeoutError"):t.constructor.name===Ai.name?(e=new Error(t.message),e.name="AbortError"):t.status===400&&t.message.includes("tool_calls")?e=FV(t,"INVALID_TOOL_RESULTS"):t.status===401?e=FV(t,"MODEL_AUTHENTICATION"):t.status===429?e=FV(t,"MODEL_RATE_LIMIT"):t.status===404?e=FV(t,"MODEL_NOT_FOUND"):e=t,e}function QTe(t){if(t)return t==="any"||t==="required"?"required":t==="auto"?"auto":t==="none"?"none":typeof t=="string"?{type:"function",function:{name:t}}:t}function mHr(t){return t.anyOf!==void 0&&Array.isArray(t.anyOf)}function xCt(t){let e=["namespace functions {",""];for(let r of t)r.description&&e.push(`// ${r.description}`),Object.keys(r.parameters.properties??{}).length>0?(e.push(`type ${r.name} = (_: {`),e.push(CCt(r.parameters,0)),e.push("}) => any;")):e.push(`type ${r.name} = () => any;`),e.push("");return e.push("} // namespace functions"),e.join(`
`)}function CCt(t,e){let r=[];for(let[n,o]of Object.entries(t.properties??{}))o.description&&e<2&&r.push(`// ${o.description}`),t.required?.includes(n)?r.push(`${n}: ${jre(o,e)},`):r.push(`${n}?: ${jre(o,e)},`);return r.map(n=>" ".repeat(e)+n).join(`
`)}function jre(t,e){if(mHr(t))return t.anyOf.map(r=>jre(r,e)).join(" | ");switch(t.type){case"string":return t.enum?t.enum.map(r=>`"${r}"`).join(" | "):"string";case"number":return t.enum?t.enum.map(r=>`${r}`).join(" | "):"number";case"integer":return t.enum?t.enum.map(r=>`${r}`).join(" | "):"number";case"boolean":return"boolean";case"null":return"null";case"object":return["{",CCt(t,e+2),"}"].join(`
`);case"array":return t.items?`${jre(t.items,e)}[]`:"any[]";default:return""}}function OCt(t,e){let r;return Vl(t)?r=VS(t):r=t,e?.strict!==void 0&&(r.function.strict=e.strict),r}function hHr(t){return t.role!=="system"&&t.role!=="developer"&&t.role!=="assistant"&&t.role!=="user"&&t.role!=="function"&&t.role!=="tool"&&console.warn(`Unknown message role: ${t.role}`),t.role}function rAe(t){let e=t._getType();switch(e){case"system":return"system";case"ai":return"assistant";case"human":return"user";case"function":return"function";case"tool":return"tool";case"generic":{if(!gs.isInstance(t))throw new Error("Invalid generic chat message");return hHr(t)}default:throw new Error(`Unknown message type: ${e}`)}}function tAe(t,e){return t.flatMap(r=>{let n=rAe(r);n==="system"&&nAe(e)&&(n="developer");let o={role:n,content:r.content};if(r.name!=null&&(o.name=r.name),r.additional_kwargs.function_call!=null&&(o.function_call=r.additional_kwargs.function_call,o.content=""),bi(r)&&r.tool_calls?.length?(o.tool_calls=r.tool_calls.map(ox),o.content=""):(r.additional_kwargs.tool_calls!=null&&(o.tool_calls=r.additional_kwargs.tool_calls),r.tool_call_id!=null&&(o.tool_call_id=r.tool_call_id)),r.additional_kwargs.audio&&typeof r.additional_kwargs.audio=="object"&&"id"in r.additional_kwargs.audio){let i={role:"assistant",audio:{id:r.additional_kwargs.audio.id}};return[o,i]}return o})}var wB="__openai_function_call_ids__";function PCt(t,e){return t.flatMap(r=>{let n=rAe(r);if(n==="system"&&nAe(e)&&(n="developer"),n==="function")throw new Error("Function messages are not supported in Responses API");if(n==="tool"){let i=r;return i.additional_kwargs?.type==="computer_call_output"?{type:"computer_call_output",output:(()=>{if(typeof i.content=="string")return{type:"computer_screenshot",image_url:i.content};if(Array.isArray(i.content)){let s=i.content.find(l=>l.type==="computer_screenshot");if(s)return s;let u=i.content.find(l=>l.type==="image_url");if(u)return{type:"computer_screenshot",image_url:typeof u.image_url=="string"?u.image_url:u.image_url.url}}throw new Error("Invalid computer call output")})(),call_id:i.tool_call_id}:{type:"function_call_output",call_id:i.tool_call_id,id:i.id,output:typeof i.content!="string"?JSON.stringify(i.content):i.content}}if(n==="assistant"){let i=[];r.additional_kwargs.reasoning!=null&&(c=>typeof c=="object"&&c!=null&&"type"in c&&c.type==="reasoning")(r.additional_kwargs.reasoning)&&i.push(r.additional_kwargs.reasoning);let{content:a}=r;r.additional_kwargs.refusal!=null&&(typeof a=="string"&&(a=[{type:"output_text",text:a,annotations:[]}]),a=[...a,{type:"refusal",refusal:r.additional_kwargs.refusal}]),i.push({type:"message",role:"assistant",content:typeof a=="string"?a:a.flatMap(l=>l.type==="text"?{type:"output_text",text:l.text,annotations:l.annotations??[]}:l.type==="output_text"||l.type==="refusal"?l:[])});let s=r.additional_kwargs[wB];bi(r)&&r.tool_calls?.length?i.push(...r.tool_calls.map(l=>({type:"function_call",name:l.name,arguments:JSON.stringify(l.args),call_id:l.id,id:s?.[l.id]}))):r.additional_kwargs.tool_calls!=null&&i.push(...r.additional_kwargs.tool_calls.map(l=>({type:"function_call",name:l.function.name,call_id:l.id,id:s?.[l.id],arguments:l.function.arguments})));let u=r.response_metadata.output?.length?r.response_metadata.output:r.additional_kwargs.tool_outputs;if(u!=null){let l=u,c=l?.filter(f=>f.type==="reasoning"),d=l?.filter(f=>f.type==="computer_call");c.length>0&&d.length>0&&i.push(...c),d.length>0&&i.push(...d)}return i}let o=typeof r.content=="string"?r.content:r.content.flatMap(i=>{if(i.type==="text")return{type:"input_text",text:i.text};if(i.type==="image_url"){let a=typeof i.image_url=="string"?i.image_url:i.image_url.url,s=typeof i.image_url=="string"?"auto":i.image_url.detail;return{type:"input_image",image_url:a,detail:s}}return i.type==="input_text"||i.type==="input_image"||i.type==="input_file"?i:[]});return n==="user"||n==="system"||n==="developer"?{type:"message",role:n,content:o}:(console.warn(`Unsupported role found when converting to OpenAI Responses API: ${n}`),[])})}function TCt(t){if(t.error){let a=new Error(t.error.message);throw a.name=t.error.code,a}let e=[],r=[],n=[],o={model:t.model,created_at:t.created_at,id:t.id,incomplete_details:t.incomplete_details,metadata:t.metadata,object:t.object,status:t.status,user:t.user,model_name:t.model},i={};for(let a of t.output)if(a.type==="message")e.push(...a.content.flatMap(s=>s.type==="output_text"?("parsed"in s&&s.parsed!=null&&(i.parsed=s.parsed),{type:"text",text:s.text,annotations:s.annotations}):s.type==="refusal"?(i.refusal=s.refusal,[]):s));else if(a.type==="function_call"){let s={function:{name:a.name,arguments:a.arguments},id:a.call_id};try{r.push(Lp(s,{returnId:!0}))}catch(u){let l;typeof u=="object"&&u!=null&&"message"in u&&typeof u.message=="string"&&(l=u.message),n.push(Fm(s,l))}i[wB]??(i[wB]={}),a.id&&(i[wB][a.call_id]=a.id)}else a.type==="reasoning"?i.reasoning=a:(i.tool_outputs??(i.tool_outputs=[]),i.tool_outputs.push(a));return new mn({id:t.id,content:e,tool_calls:r,invalid_tool_calls:n,usage_metadata:t.usage,additional_kwargs:i,response_metadata:o})}function gHr(t){let e=[],r={},n,o=[],i={},a={},s;if(t.type==="response.output_text.delta")e.push({type:"text",text:t.delta,index:t.content_index});else if(t.type==="response.output_text.annotation.added")e.push({type:"text",text:"",annotations:[t.annotation],index:t.content_index});else if(t.type==="response.output_item.added"&&t.item.type==="message")s=t.item.id;else if(t.type==="response.output_item.added"&&t.item.type==="function_call")o.push({type:"tool_call_chunk",name:t.item.name,args:t.item.arguments,id:t.item.id,index:t.output_index}),a[wB]={[t.item.call_id]:t.item.id};else if(t.type==="response.output_item.done"&&(t.item.type==="web_search_call"||t.item.type==="file_search_call"||t.item.type==="computer_call"))a.tool_outputs=[t.item];else if(t.type==="response.created")i.id=t.response.id,i.model_name=t.response.model,i.model=t.response.model;else if(t.type==="response.completed"){let u=TCt(t.response);n=t.response.usage,t.response.text?.format?.type==="json_schema"&&(a.parsed??(a.parsed=JSON.parse(u.text)));for(let[l,c]of Object.entries(t.response))l!=="id"&&(i[l]=c)}else if(t.type==="response.function_call_arguments.delta")o.push({type:"tool_call_chunk",args:t.delta,index:t.output_index});else if(t.type==="response.web_search_call.completed"||t.type==="response.file_search_call.completed")r={tool_outputs:{id:t.item_id,type:t.type.replace("response.","").replace(".completed",""),status:"completed"}};else if(t.type==="response.refusal.done")a.refusal=t.refusal;else return null;return new Ln({text:e.map(u=>u.text).join(""),message:new cr({id:s,content:e,tool_call_chunks:o,usage_metadata:n,additional_kwargs:a,response_metadata:i}),generationInfo:r})}function eAe(t){return"type"in t&&t.type!=="function"}function yHr(t){return t!=null&&typeof t=="object"&&"type"in t&&t.type!=="function"}function ECt(t,e){return Rc(t)?e?.strict!==void 0?{...t,function:{...t.function,strict:e.strict}}:t:OCt(t,e)}function nAe(t){return t?.startsWith("o1")||t?.startsWith("o3")||t?.startsWith("o4")}var ix=class extends Bs{static lc_name(){return"ChatOpenAI"}get callKeys(){return[...super.callKeys,"options","function_call","functions","tools","tool_choice","promptIndex","response_format","seed","reasoning_effort"]}get lc_secrets(){return{openAIApiKey:"OPENAI_API_KEY",apiKey:"OPENAI_API_KEY",organization:"OPENAI_ORGANIZATION"}}get lc_aliases(){return{modelName:"model",openAIApiKey:"openai_api_key",apiKey:"openai_api_key"}}get lc_serializable_keys(){return["configuration","logprobs","topLogprobs","prefixMessages","supportsStrictToolCalling","modalities","audio","reasoningEffort","temperature","maxTokens","topP","frequencyPenalty","presencePenalty","n","logitBias","user","streaming","streamUsage","modelName","model","modelKwargs","stop","stopSequences","timeout","openAIApiKey","apiKey","cache","maxConcurrency","maxRetries","verbose","callbacks","tags","metadata","disableStreaming"]}constructor(e){super(e??{}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"temperature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"topP",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"frequencyPenalty",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"presencePenalty",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"n",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"logitBias",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"modelName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"model",{enumerable:!0,configurable:!0,writable:!0,value:"gpt-3.5-turbo"}),Object.defineProperty(this,"modelKwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"stop",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"stopSequences",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"user",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"timeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"streaming",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"streamUsage",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"maxTokens",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"logprobs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"topLogprobs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"openAIApiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"apiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"organization",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"__includeRawResponse",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"clientConfig",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"supportsStrictToolCalling",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"audio",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"modalities",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reasoningEffort",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"useResponsesApi",{enumerable:!0,configurable:!0,writable:!0,value:!1}),this.openAIApiKey=e?.apiKey??e?.openAIApiKey??e?.configuration?.apiKey??ot("OPENAI_API_KEY"),this.apiKey=this.openAIApiKey,this.organization=e?.configuration?.organization??ot("OPENAI_ORGANIZATION"),this.model=e?.model??e?.modelName??this.model,this.modelName=this.model,this.modelKwargs=e?.modelKwargs??{},this.timeout=e?.timeout,this.temperature=e?.temperature??this.temperature,this.topP=e?.topP??this.topP,this.frequencyPenalty=e?.frequencyPenalty??this.frequencyPenalty,this.presencePenalty=e?.presencePenalty??this.presencePenalty,this.logprobs=e?.logprobs,this.topLogprobs=e?.topLogprobs,this.n=e?.n??this.n,this.logitBias=e?.logitBias,this.stop=e?.stopSequences??e?.stop,this.stopSequences=this.stop,this.user=e?.user,this.__includeRawResponse=e?.__includeRawResponse,this.audio=e?.audio,this.modalities=e?.modalities,this.reasoningEffort=e?.reasoningEffort,this.maxTokens=e?.maxCompletionTokens??e?.maxTokens,this.useResponsesApi=e?.useResponsesApi??this.useResponsesApi,this.disableStreaming=e?.disableStreaming??this.disableStreaming,this.model==="o1"&&(this.disableStreaming=!0),this.streaming=e?.streaming??!1,this.disableStreaming&&(this.streaming=!1),this.streamUsage=e?.streamUsage??this.streamUsage,this.disableStreaming&&(this.streamUsage=!1),this.clientConfig={apiKey:this.apiKey,organization:this.organization,dangerouslyAllowBrowser:!0,...e?.configuration},e?.supportsStrictToolCalling!==void 0&&(this.supportsStrictToolCalling=e.supportsStrictToolCalling)}getLsParams(e){let r=this.invocationParams(e);return{ls_provider:"openai",ls_model_name:this.model,ls_model_type:"chat",ls_temperature:r.temperature??void 0,ls_max_tokens:r.max_tokens??void 0,ls_stop:e.stop}}bindTools(e,r){let n;return r?.strict!==void 0?n=r.strict:this.supportsStrictToolCalling!==void 0&&(n=this.supportsStrictToolCalling),this.bind({tools:e.map(o=>eAe(o)?o:ECt(o,{strict:n})),...r})}createResponseFormat(e){return e&&e.type==="json_schema"&&e.json_schema.schema&&Nre(e.json_schema.schema)?vB(e.json_schema.schema,e.json_schema.name,{description:e.json_schema.description}):e}invocationParams(e,r){let n;if(e?.strict!==void 0?n=e.strict:this.supportsStrictToolCalling!==void 0&&(n=this.supportsStrictToolCalling),this._useResponseApi(e)){let s={model:this.model,temperature:this.temperature,top_p:this.topP,user:this.user,stream:this.streaming,previous_response_id:e?.previous_response_id,truncation:e?.truncation,include:e?.include,tools:e?.tools?.length?e.tools.map(l=>eAe(l)?l:Rc(l)?{type:"function",name:l.function.name,parameters:l.function.parameters,description:l.function.description,strict:n}:null).filter(l=>l!==null):void 0,tool_choice:yHr(e?.tool_choice)?e?.tool_choice:(()=>{let l=QTe(e?.tool_choice);if(typeof l=="object"&&"type"in l)return{type:"function",name:l.function.name}})(),text:(()=>{if(e?.text)return e.text;let l=this.createResponseFormat(e?.response_format);return l?.type==="json_schema"?l.json_schema.schema!=null?{format:{type:"json_schema",schema:l.json_schema.schema,description:l.json_schema.description,name:l.json_schema.name,strict:l.json_schema.strict}}:void 0:{format:l}})(),parallel_tool_calls:e?.parallel_tool_calls,max_output_tokens:this.maxTokens===-1?void 0:this.maxTokens,...this.modelKwargs},u=e?.reasoning_effort??this.reasoningEffort;return u!==void 0&&(s.reasoning={effort:u}),s}let o={};e?.stream_options!==void 0?o={stream_options:e.stream_options}:this.streamUsage&&(this.streaming||r?.streaming)&&(o={stream_options:{include_usage:!0}});let i={model:this.model,temperature:this.temperature,top_p:this.topP,frequency_penalty:this.frequencyPenalty,presence_penalty:this.presencePenalty,logprobs:this.logprobs,top_logprobs:this.topLogprobs,n:this.n,logit_bias:this.logitBias,stop:e?.stop??this.stopSequences,user:this.user,stream:this.streaming,functions:e?.functions,function_call:e?.function_call,tools:e?.tools?.length?e.tools.map(s=>ECt(s,{strict:n})):void 0,tool_choice:QTe(e?.tool_choice),response_format:this.createResponseFormat(e?.response_format),seed:e?.seed,...o,parallel_tool_calls:e?.parallel_tool_calls,...this.audio||e?.audio?{audio:this.audio||e?.audio}:{},...this.modalities||e?.modalities?{modalities:this.modalities||e?.modalities}:{},...this.modelKwargs};e?.prediction!==void 0&&(i.prediction=e.prediction);let a=e?.reasoning_effort??this.reasoningEffort;return a!==void 0&&(i.reasoning_effort=a),nAe(i.model)?i.max_completion_tokens=this.maxTokens===-1?void 0:this.maxTokens:i.max_tokens=this.maxTokens===-1?void 0:this.maxTokens,i}_convertOpenAIChatCompletionMessageToBaseMessage(e,r){let n=e.tool_calls;switch(e.role){case"assistant":{let o=[],i=[];for(let u of n??[])try{o.push(Lp(u,{returnId:!0}))}catch(l){i.push(Fm(u,l.message))}let a={function_call:e.function_call,tool_calls:n};this.__includeRawResponse!==void 0&&(a.__raw_response=r);let s={model_name:r.model,...r.system_fingerprint?{usage:{...r.usage},system_fingerprint:r.system_fingerprint}:{}};return e.audio&&(a.audio=e.audio),new mn({content:e.content||"",tool_calls:o,invalid_tool_calls:i,additional_kwargs:a,response_metadata:s,id:r.id})}default:return new gs(e.content||"",e.role??"unknown")}}_convertOpenAIDeltaToBaseMessageChunk(e,r,n){let o=e.role??n,i=e.content??"",a;e.function_call?a={function_call:e.function_call}:e.tool_calls?a={tool_calls:e.tool_calls}:a={},this.__includeRawResponse&&(a.__raw_response=r),e.audio&&(a.audio={...e.audio,index:r.choices[0].index});let s={usage:{...r.usage}};if(o==="user")return new gf({content:i,response_metadata:s});if(o==="assistant"){let u=[];if(Array.isArray(e.tool_calls))for(let l of e.tool_calls)u.push({name:l.function?.name,args:l.function?.arguments,id:l.id,index:l.index,type:"tool_call_chunk"});return new cr({content:i,tool_call_chunks:u,additional_kwargs:a,id:r.id,response_metadata:s})}else return o==="system"?new bd({content:i,response_metadata:s}):o==="developer"?new bd({content:i,response_metadata:s,additional_kwargs:{__openai_role__:"developer"}}):o==="function"?new nm({content:i,additional_kwargs:a,name:e.name,response_metadata:s}):o==="tool"?new ph({content:i,additional_kwargs:a,tool_call_id:e.tool_call_id,response_metadata:s}):new hf({content:i,role:o,response_metadata:s})}_identifyingParams(){return{model_name:this.model,...this.invocationParams(),...this.clientConfig}}async*_streamResponseChunks(e,r,n){if(this._useResponseApi(r)){let l=await this.responseApiWithRetry({...this.invocationParams(r,{streaming:!0}),input:PCt(e,this.model),stream:!0},r);for await(let c of l){let d=gHr(c);d!=null&&(yield d)}return}let o=tAe(e,this.model),i={...this.invocationParams(r,{streaming:!0}),messages:o,stream:!0},a,s=await this.completionWithRetry(i,r),u;for await(let l of s){let c=l?.choices?.[0];if(l.usage&&(u=l.usage),!c)continue;let{delta:d}=c;if(!d)continue;let f=this._convertOpenAIDeltaToBaseMessageChunk(d,l,a);a=d.role??a;let p={prompt:r.promptIndex??0,completion:c.index??0};if(typeof f.content!="string"){console.log("[WARNING]: Received non-string content from OpenAI. This is currently not supported.");continue}let m={...p};c.finish_reason!=null&&(m.finish_reason=c.finish_reason,m.system_fingerprint=l.system_fingerprint,m.model_name=l.model),this.logprobs&&(m.logprobs=c.logprobs);let h=new Ln({message:f,text:f.content,generationInfo:m});yield h,await n?.handleLLMNewToken(h.text??"",p,void 0,void 0,void 0,{chunk:h})}if(u){let l={...u.prompt_tokens_details?.audio_tokens!==null&&{audio:u.prompt_tokens_details?.audio_tokens},...u.prompt_tokens_details?.cached_tokens!==null&&{cache_read:u.prompt_tokens_details?.cached_tokens}},c={...u.completion_tokens_details?.audio_tokens!==null&&{audio:u.completion_tokens_details?.audio_tokens},...u.completion_tokens_details?.reasoning_tokens!==null&&{reasoning:u.completion_tokens_details?.reasoning_tokens}};yield new Ln({message:new cr({content:"",response_metadata:{usage:{...u}},usage_metadata:{input_tokens:u.prompt_tokens,output_tokens:u.completion_tokens,total_tokens:u.total_tokens,...Object.keys(l).length>0&&{input_token_details:l},...Object.keys(c).length>0&&{output_token_details:c}}}),text:""})}if(r.signal?.aborted)throw new Error("AbortError")}identifyingParams(){return this._identifyingParams()}async _responseApiGenerate(e,r,n){let o=this.invocationParams(r);if(o.stream){let s=this._streamResponseChunks(e,r,n),u;for await(let l of s)l.message.response_metadata={...l.generationInfo,...l.message.response_metadata},u=u?.concat(l)??l;return{generations:u?[u]:[],llmOutput:{estimatedTokenUsage:u?.message?.usage_metadata}}}let i=PCt(e,this.model),a=await this.responseApiWithRetry({input:i,...o},{signal:r?.signal,...r?.options});return{generations:[{text:a.output_text,message:TCt(a)}],llmOutput:{id:a.id,estimatedTokenUsage:a.usage?{promptTokens:a.usage.input_tokens,completionTokens:a.usage.output_tokens,totalTokens:a.usage.total_tokens}:void 0}}}_useResponseApi(e){let r=e?.tools?.some(eAe),n=e?.previous_response_id!=null||e?.text!=null||e?.truncation!=null||e?.include!=null;return this.useResponsesApi||r||n}async _generate(e,r,n){if(this._useResponseApi(r))return this._responseApiGenerate(e,r,n);let o={},i=this.invocationParams(r),a=tAe(e,this.model);if(i.stream){let s=this._streamResponseChunks(e,r,n),u={};for await(let m of s){m.message.response_metadata={...m.generationInfo,...m.message.response_metadata};let h=m.generationInfo?.completion??0;u[h]===void 0?u[h]=m:u[h]=u[h].concat(m)}let l=Object.entries(u).sort(([m],[h])=>parseInt(m,10)-parseInt(h,10)).map(([m,h])=>h),{functions:c,function_call:d}=this.invocationParams(r),f=await this.getEstimatedTokenCountFromPrompt(e,c,d),p=await this.getNumTokensFromGenerations(l);return o.input_tokens=f,o.output_tokens=p,o.total_tokens=f+p,{generations:l,llmOutput:{estimatedTokenUsage:{promptTokens:o.input_tokens,completionTokens:o.output_tokens,totalTokens:o.total_tokens}}}}else{let s;r.response_format&&r.response_format.type==="json_schema"?s=await this.betaParsedCompletionWithRetry({...i,stream:!1,messages:a},{signal:r?.signal,...r?.options}):s=await this.completionWithRetry({...i,stream:!1,messages:a},{signal:r?.signal,...r?.options});let{completion_tokens:u,prompt_tokens:l,total_tokens:c,prompt_tokens_details:d,completion_tokens_details:f}=s?.usage??{};u&&(o.output_tokens=(o.output_tokens??0)+u),l&&(o.input_tokens=(o.input_tokens??0)+l),c&&(o.total_tokens=(o.total_tokens??0)+c),(d?.audio_tokens!==null||d?.cached_tokens!==null)&&(o.input_token_details={...d?.audio_tokens!==null&&{audio:d?.audio_tokens},...d?.cached_tokens!==null&&{cache_read:d?.cached_tokens}}),(f?.audio_tokens!==null||f?.reasoning_tokens!==null)&&(o.output_token_details={...f?.audio_tokens!==null&&{audio:f?.audio_tokens},...f?.reasoning_tokens!==null&&{reasoning:f?.reasoning_tokens}});let p=[];for(let m of s?.choices??[]){let b={text:m.message?.content??"",message:this._convertOpenAIChatCompletionMessageToBaseMessage(m.message??{role:"assistant"},s)};b.generationInfo={...m.finish_reason?{finish_reason:m.finish_reason}:{},...m.logprobs?{logprobs:m.logprobs}:{}},bi(b.message)&&(b.message.usage_metadata=o),b.message=new mn(Object.fromEntries(Object.entries(b.message).filter(([g])=>!g.startsWith("lc_")))),p.push(b)}return{generations:p,llmOutput:{tokenUsage:{promptTokens:o.input_tokens,completionTokens:o.output_tokens,totalTokens:o.total_tokens}}}}}async getEstimatedTokenCountFromPrompt(e,r,n){let o=(await this.getNumTokensFromMessages(e)).totalCount;if(r&&n!=="auto"){let i=xCt(r);o+=await this.getNumTokens(i),o+=9}return r&&e.find(i=>i._getType()==="system")&&(o-=4),n==="none"?o+=1:typeof n=="object"&&(o+=await this.getNumTokens(n.name)+4),o}async getNumTokensFromGenerations(e){return(await Promise.all(e.map(async n=>n.message.additional_kwargs?.function_call?(await this.getNumTokensFromMessages([n.message])).countPerMessage[0]:await this.getNumTokens(n.message.content)))).reduce((n,o)=>n+o,0)}async getNumTokensFromMessages(e){let r=0,n=0,o=0;this.model==="gpt-3.5-turbo-0301"?(n=4,o=-1):(n=3,o=1);let i=await Promise.all(e.map(async a=>{let s=await this.getNumTokens(a.content),u=await this.getNumTokens(rAe(a)),l=a.name!==void 0?o+await this.getNumTokens(a.name):0,c=s+n+u+l,d=a;if(d._getType()==="function"&&(c-=2),d.additional_kwargs?.function_call&&(c+=3),d?.additional_kwargs.function_call?.name&&(c+=await this.getNumTokens(d.additional_kwargs.function_call?.name)),d.additional_kwargs.function_call?.arguments)try{c+=await this.getNumTokens(JSON.stringify(JSON.parse(d.additional_kwargs.function_call?.arguments)))}catch(f){console.error("Error parsing function arguments",f,JSON.stringify(d.additional_kwargs.function_call)),c+=await this.getNumTokens(d.additional_kwargs.function_call?.arguments)}return r+=c,c}));return r+=3,{totalCount:r,countPerMessage:i}}async completionWithRetry(e,r){let n=this._getClientOptions(r);return this.caller.call(async()=>{try{return await this.client.chat.completions.create(e,n)}catch(o){throw OO(o)}})}async responseApiWithRetry(e,r){return this.caller.call(async()=>{let n=this._getClientOptions(r);try{return e.text?.format?.type==="json_schema"&&!e.stream?await this.client.responses.parse(e,n):await this.client.responses.create(e,n)}catch(o){throw OO(o)}})}async betaParsedCompletionWithRetry(e,r){let n=this._getClientOptions(r);return this.caller.call(async()=>{try{return await this.client.beta.chat.completions.parse(e,n)}catch(o){throw OO(o)}})}_getClientOptions(e){if(!this.client){let n={baseURL:this.clientConfig.baseURL},o=CO(n),i={...this.clientConfig,baseURL:o,timeout:this.timeout,maxRetries:0};i.baseURL||delete i.baseURL,this.client=new Vt(i)}return{...this.clientConfig,...e}}_llmType(){return"openai"}_combineLLMOutput(...e){return e.reduce((r,n)=>(n&&n.tokenUsage&&(r.tokenUsage.completionTokens+=n.tokenUsage.completionTokens??0,r.tokenUsage.promptTokens+=n.tokenUsage.promptTokens??0,r.tokenUsage.totalTokens+=n.tokenUsage.totalTokens??0),r),{tokenUsage:{completionTokens:0,promptTokens:0,totalTokens:0}})}withStructuredOutput(e,r){let n,o,i,a;bHr(e)?(n=e.schema,o=e.name,i=e.method,a=e.includeRaw):(n=e,o=r?.name,i=r?.method,a=r?.includeRaw);let s,u;if(r?.strict!==void 0&&i==="jsonMode")throw new Error("Argument `strict` is only supported for `method` = 'function_calling'");if(!this.model.startsWith("gpt-3")&&!this.model.startsWith("gpt-4-")&&this.model!=="gpt-4"?i===void 0&&(i="jsonSchema"):i==="jsonSchema"&&console.warn(`[WARNING]: JSON Schema is not supported for model "${this.model}". Falling back to tool calling.`),i==="jsonMode")s=this.bind({response_format:{type:"json_object"}}),Nre(n)?u=hc.fromZodSchema(n):u=new gc;else if(i==="jsonSchema")if(s=this.bind({response_format:{type:"json_schema",json_schema:{name:o??"extract",description:n.description,schema:n,strict:r?.strict}}}),Nre(n)){let f=hc.fromZodSchema(n);u=_f.from(p=>"parsed"in p.additional_kwargs?p.additional_kwargs.parsed:f)}else u=new gc;else{let f=o??"extract";if(Nre(n)){let p=ho(n);s=this.bind({tools:[{type:"function",function:{name:f,description:p.description,parameters:p}}],tool_choice:{type:"function",function:{name:f}},...r?.strict!==void 0?{strict:r.strict}:{}}),u=new Fc({returnSingle:!0,keyName:f,zodSchema:n})}else{let p;typeof n.name=="string"&&typeof n.parameters=="object"&&n.parameters!=null?(p=n,f=n.name):(f=n.title??f,p={name:f,description:n.description??"",parameters:n}),s=this.bind({tools:[{type:"function",function:p}],tool_choice:{type:"function",function:{name:f}},...r?.strict!==void 0?{strict:r.strict}:{}}),u=new Fc({returnSingle:!0,keyName:f})}}if(!a)return s.pipe(u);let l=lo.assign({parsed:(f,p)=>u.invoke(f.raw,p)}),c=lo.assign({parsed:()=>null}),d=l.withFallbacks({fallbacks:[c]});return di.from([{raw:s},d])}};function Nre(t){return typeof t?.parse=="function"}function bHr(t){return t!==void 0&&typeof t.schema=="object"}Rm();$d();var PO=class extends Nf{constructor(e){let r={maxConcurrency:2,...e};super(r),Object.defineProperty(this,"model",{enumerable:!0,configurable:!0,writable:!0,value:"text-embedding-ada-002"}),Object.defineProperty(this,"modelName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"batchSize",{enumerable:!0,configurable:!0,writable:!0,value:512}),Object.defineProperty(this,"stripNewLines",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"dimensions",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"timeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"organization",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"clientConfig",{enumerable:!0,configurable:!0,writable:!0,value:void 0});let n=r?.apiKey??r?.openAIApiKey??ot("OPENAI_API_KEY");this.organization=r?.configuration?.organization??ot("OPENAI_ORGANIZATION"),this.model=r?.model??r?.modelName??this.model,this.modelName=this.model,this.batchSize=r?.batchSize??this.batchSize,this.stripNewLines=r?.stripNewLines??this.stripNewLines,this.timeout=r?.timeout,this.dimensions=r?.dimensions,this.clientConfig={apiKey:n,organization:this.organization,dangerouslyAllowBrowser:!0,...e?.configuration}}async embedDocuments(e){let r=Df(this.stripNewLines?e.map(a=>a.replace(/\n/g," ")):e,this.batchSize),n=r.map(a=>{let s={model:this.model,input:a};return this.dimensions&&(s.dimensions=this.dimensions),this.embeddingWithRetry(s)}),o=await Promise.all(n),i=[];for(let a=0;a<o.length;a+=1){let s=r[a],{data:u}=o[a];for(let l=0;l<s.length;l+=1)i.push(u[l].embedding)}return i}async embedQuery(e){let r={model:this.model,input:this.stripNewLines?e.replace(/\n/g," "):e};this.dimensions&&(r.dimensions=this.dimensions);let{data:n}=await this.embeddingWithRetry(r);return n[0].embedding}async embeddingWithRetry(e){if(!this.client){let n={baseURL:this.clientConfig.baseURL},o=CO(n),i={...this.clientConfig,baseURL:o,timeout:this.timeout,maxRetries:0};i.baseURL||delete i.baseURL,this.client=new Vt(i)}let r={};return this.caller.call(async()=>{try{return await this.client.embeddings.create(e,r)}catch(n){throw OO(n)}})}};var Dre=class extends PO{constructor(e){super(e),Object.defineProperty(this,"azureOpenAIApiVersion",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIApiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureADTokenProvider",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIApiInstanceName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIApiDeploymentName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIBasePath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.batchSize=e?.batchSize??1,this.azureOpenAIApiKey=e?.azureOpenAIApiKey??e?.apiKey??ot("AZURE_OPENAI_API_KEY"),this.azureOpenAIApiVersion=e?.azureOpenAIApiVersion??e?.openAIApiVersion??ot("AZURE_OPENAI_API_VERSION"),this.azureOpenAIBasePath=e?.azureOpenAIBasePath??ot("AZURE_OPENAI_BASE_PATH"),this.azureOpenAIApiInstanceName=e?.azureOpenAIApiInstanceName??ot("AZURE_OPENAI_API_INSTANCE_NAME"),this.azureOpenAIApiDeploymentName=(e?.azureOpenAIApiEmbeddingsDeploymentName||e?.azureOpenAIApiDeploymentName)??(ot("AZURE_OPENAI_API_EMBEDDINGS_DEPLOYMENT_NAME")||ot("AZURE_OPENAI_API_DEPLOYMENT_NAME")),this.azureADTokenProvider=e?.azureADTokenProvider}async embeddingWithRetry(e){if(!this.client){let n={azureOpenAIApiDeploymentName:this.azureOpenAIApiDeploymentName,azureOpenAIApiInstanceName:this.azureOpenAIApiInstanceName,azureOpenAIApiKey:this.azureOpenAIApiKey,azureOpenAIBasePath:this.azureOpenAIBasePath,azureADTokenProvider:this.azureADTokenProvider,baseURL:this.clientConfig.baseURL},o=CO(n),i={...this.clientConfig,baseURL:o,timeout:this.timeout,maxRetries:0};this.azureADTokenProvider||(i.apiKey=n.azureOpenAIApiKey),i.baseURL||delete i.baseURL,i.defaultHeaders={...i.defaultHeaders,"User-Agent":i.defaultHeaders?.["User-Agent"]?`${i.defaultHeaders["User-Agent"]}: langchainjs-azure-openai-v2`:"langchainjs-azure-openai-v2"},this.client=new Are({apiVersion:this.azureOpenAIApiVersion,azureADTokenProvider:this.azureADTokenProvider,deployment:this.azureOpenAIApiDeploymentName,...i})}let r={};return this.azureOpenAIApiKey&&(r.headers={"api-key":this.azureOpenAIApiKey,...r.headers},r.query={"api-version":this.azureOpenAIApiVersion,...r.query}),this.caller.call(async()=>{try{return await this.client.embeddings.create(e,r)}catch(n){throw OO(n)}})}};md();r2();fE();mV();Cb();dL();mL();_K();var Lre=class extends T${get lc_namespace(){return["langchain","tools"]}constructor(e){super(e??{}),Object.defineProperty(this,"returnDirect",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"verboseParsingErrors",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"responseFormat",{enumerable:!0,configurable:!0,writable:!0,value:"content"}),this.verboseParsingErrors=e?.verboseParsingErrors??this.verboseParsingErrors,this.responseFormat=e?.responseFormat??this.responseFormat}async invoke(e,r){let n,o=an(r);return uE(e)?(n=e.args,o={...o,toolCall:e}):n=e,this.call(n,o)}async call(e,r,n){let o=uE(e)?e.args:e,i;if($s(this.schema))try{i=await this.schema.parseAsync(o)}catch(m){let h="Received tool input did not match expected schema";throw this.verboseParsingErrors&&(h=`${h}
Details: ${m.message}`),new WM(h,JSON.stringify(e))}else{let m=Xi(o,this.schema);if(!m.valid){let h="Received tool input did not match expected schema";throw this.verboseParsingErrors&&(h=`${h}
Details: ${m.errors.map(b=>`${b.keywordLocation}: ${b.error}`).join(`
`)}`),new WM(h,JSON.stringify(e))}i=o}let a=JM(r),u=await Ms.configure(a.callbacks,this.callbacks,a.tags||n,this.tags,a.metadata,this.metadata,{verbose:this.verbose})?.handleToolStart(this.toJSON(),typeof e=="string"?e:JSON.stringify(e),a.runId,void 0,void 0,void 0,a.runName);delete a.runId;let l;try{l=await this._call(i,u,a)}catch(m){throw await u?.handleToolError(m),m}let c,d;if(this.responseFormat==="content_and_artifact")if(Array.isArray(l)&&l.length===2)[c,d]=l;else throw new Error(`Tool response format is "content_and_artifact" but the output was not a two-tuple.
Result: ${JSON.stringify(l)}`);else c=l;let f;uE(e)&&(f=e.id),!f&&$Ue(a)&&(f=a.toolCall.id);let p=_Hr({content:c,artifact:d,toolCallId:f,name:this.name});return await u?.handleToolEnd(p),p}},EO=class extends Lre{constructor(e){super(e),Object.defineProperty(this,"schema",{enumerable:!0,configurable:!0,writable:!0,value:Vr.object({input:Vr.string().optional()}).transform(r=>r.input)})}call(e,r){let n=typeof e=="string"||e==null?{input:e}:e;return super.call(n,r)}},oAe=class extends EO{static lc_name(){return"DynamicTool"}constructor(e){super(e),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"description",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"func",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=e.name,this.description=e.description,this.func=e.func,this.returnDirect=e.returnDirect??this.returnDirect}async call(e,r){let n=JM(r);return n.runName===void 0&&(n.runName=this.name),super.call(e,n)}async _call(e,r,n){return this.func(e,r,n)}},iAe=class extends Lre{static lc_name(){return"DynamicStructuredTool"}constructor(e){super(e),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"description",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"func",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"schema",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=e.name,this.description=e.description,this.func=e.func,this.returnDirect=e.returnDirect??this.returnDirect,this.schema=e.schema}async call(e,r,n){let o=JM(r);return o.runName===void 0&&(o.runName=this.name),super.call(e,o,n)}_call(e,r,n){return this.func(e,r,n)}};function km(t,e){let r=e.schema&&$s(e.schema)&&(!("shape"in e.schema)||!e.schema.shape),n=hV(e.schema);if(!e.schema||r||n)return new oAe({...e,description:e.description??e.schema?.description??`${e.name} tool`,func:async(a,s,u)=>new Promise((l,c)=>{let d=ts(u,{callbacks:s?.getChild()});_d.runWithConfig(om(d),async()=>{try{l(t(a,d))}catch(f){c(f)}})})});let o=e.schema,i=e.description??e.schema.description??`${e.name} tool`;return new iAe({...e,description:i,schema:o,func:async(a,s,u)=>new Promise((l,c)=>{let d=ts(u,{callbacks:s?.getChild()});_d.runWithConfig(om(d),async()=>{try{l(t(a,d))}catch(f){c(f)}})})})}function _Hr(t){let{content:e,artifact:r,toolCallId:n}=t;return n&&!KUe(e)?typeof e=="string"||Array.isArray(e)&&e.every(o=>typeof o=="object")?new oC({content:e,artifact:r,tool_call_id:n,name:t.name}):new oC({content:vHr(e),artifact:r,tool_call_id:n,name:t.name}):e}function vHr(t){try{return JSON.stringify(t,null,2)}catch{return`${t}`}}var aAe=class extends EO{static lc_name(){return"DallEAPIWrapper"}constructor(e){e?.responseFormat!==void 0&&["url","b64_json"].includes(e.responseFormat)&&(e.dallEResponseFormat=e.responseFormat,e.responseFormat="content"),super(e),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"dalle_api_wrapper"}),Object.defineProperty(this,"description",{enumerable:!0,configurable:!0,writable:!0,value:"A wrapper around OpenAI DALL-E API. Useful for when you need to generate images from a text description. Input should be an image description."}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"model",{enumerable:!0,configurable:!0,writable:!0,value:"dall-e-3"}),Object.defineProperty(this,"style",{enumerable:!0,configurable:!0,writable:!0,value:"vivid"}),Object.defineProperty(this,"quality",{enumerable:!0,configurable:!0,writable:!0,value:"standard"}),Object.defineProperty(this,"n",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:"1024x1024"}),Object.defineProperty(this,"dallEResponseFormat",{enumerable:!0,configurable:!0,writable:!0,value:"url"}),Object.defineProperty(this,"user",{enumerable:!0,configurable:!0,writable:!0,value:void 0});let r=e?.apiKey??e?.openAIApiKey??ot("OPENAI_API_KEY"),n=e?.organization??ot("OPENAI_ORGANIZATION"),o={apiKey:r,organization:n,dangerouslyAllowBrowser:!0,baseURL:e?.baseUrl};this.client=new Vt(o),this.model=e?.model??e?.modelName??this.model,this.style=e?.style??this.style,this.quality=e?.quality??this.quality,this.n=e?.n??this.n,this.size=e?.size??this.size,this.dallEResponseFormat=e?.dallEResponseFormat??this.dallEResponseFormat,this.user=e?.user}processMultipleGeneratedUrls(e){return this.dallEResponseFormat==="url"?e.flatMap(r=>r.data.flatMap(o=>o.url?{type:"image_url",image_url:o.url}:[]).filter(o=>o!==void 0&&o.type==="image_url"&&typeof o.image_url=="string"&&o.image_url!==void 0)):e.flatMap(r=>r.data.flatMap(o=>o.b64_json?{type:"image_url",image_url:{url:o.b64_json}}:[]).filter(o=>o!==void 0&&o.type==="image_url"&&typeof o.image_url=="object"&&"url"in o.image_url&&typeof o.image_url.url=="string"&&o.image_url.url!==void 0))}async _call(e){let r={model:this.model,prompt:e,n:1,size:this.size,response_format:this.dallEResponseFormat,style:this.style,quality:this.quality,user:this.user};if(this.n>1){let i=await Promise.all(Array.from({length:this.n}).map(()=>this.client.images.generate(r)));return this.processMultipleGeneratedUrls(i)}let n=await this.client.images.generate(r),o="";return this.dallEResponseFormat==="url"?[o]=n.data.map(i=>i.url).filter(i=>i!=="undefined"):[o]=n.data.map(i=>i.b64_json).filter(i=>i!=="undefined"),o}};Object.defineProperty(aAe,"toolName",{enumerable:!0,configurable:!0,writable:!0,value:"dalle_api_wrapper"});var $re=require("obsidian");var Fre=class extends Nf{constructor(e){let r={maxConcurrency:2,...e};super(r),Object.defineProperty(this,"model",{enumerable:!0,configurable:!0,writable:!0,value:"jina-clip-v2"}),Object.defineProperty(this,"batchSize",{enumerable:!0,configurable:!0,writable:!0,value:24}),Object.defineProperty(this,"baseUrl",{enumerable:!0,configurable:!0,writable:!0,value:"https://api.jina.ai/v1/embeddings"}),Object.defineProperty(this,"stripNewLines",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"dimensions",{enumerable:!0,configurable:!0,writable:!0,value:1024}),Object.defineProperty(this,"apiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"normalized",{enumerable:!0,configurable:!0,writable:!0,value:!0});let n=r?.apiKey||ot("JINA_API_KEY")||ot("JINA_AUTH_TOKEN");if(!n)throw new Error("Jina API key not found");this.apiKey=n,this.model=r?.model??this.model,this.dimensions=r?.dimensions??this.dimensions,this.batchSize=r?.batchSize??this.batchSize,this.stripNewLines=r?.stripNewLines??this.stripNewLines,this.normalized=r?.normalized??this.normalized}doStripNewLines(e){return this.stripNewLines?e.map(r=>typeof r=="string"?r.replace(/\n/g," "):r.text?{text:r.text.replace(/\n/g," ")}:r):e}async embedDocuments(e){let r=Df(this.doStripNewLines(e),this.batchSize),n=r.map(a=>{let s=this.getParams(a);return this.embeddingWithRetry(s)}),o=await Promise.all(n),i=[];for(let a=0;a<o.length;a+=1){let s=r[a],u=o[a]||[];for(let l=0;l<s.length;l+=1)i.push(u[l])}return i}async embedQuery(e){let r=this.getParams(this.doStripNewLines([e]),!0);return(await this.embeddingWithRetry(r)||[[]])[0]}getParams(e,r){return{model:this.model,input:e,dimensions:this.dimensions,task:r?"retrieval.query":"retrieval.passage",normalized:this.normalized}}async embeddingWithRetry(e){let n=await(await fetch(this.baseUrl,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.apiKey}`},body:JSON.stringify(e)})).json();if("detail"in n&&n.detail)throw new Error(`${n.detail}`);return n.data.map(({embedding:o})=>o)}};var kre=class extends Fre{constructor(e){super(e),e?.baseUrl&&(this.baseUrl=e.baseUrl)}};var wHr={"copilot-plus":PO,"copilot-plus-jina":kre,openai:PO,cohereai:zte,google:Jte,"azure openai":Dre,ollama:Qte,"lm-studio":PO,"3rd party (openai-format)":PO},Us=class t{constructor(){this.providerApiKeyMap={"copilot-plus":()=>ue().plusLicenseKey,"copilot-plus-jina":()=>ue().plusLicenseKey,openai:()=>ue().openAIApiKey,cohereai:()=>ue().cohereApiKey,google:()=>ue().googleApiKey,"azure openai":()=>ue().azureOpenAIApiKey,ollama:()=>"default-key","lm-studio":()=>"default-key","3rd party (openai-format)":()=>"default-key"};this.initialize(),ga(()=>this.initialize())}initialize(){let e=ue().activeEmbeddingModels;this.activeEmbeddingModels=e,this.buildModelMap(e)}static getInstance(){return t.instance||(t.instance=new t),t.instance}getProviderConstructor(e){let r=wHr[e.provider];if(!r)throw console.warn(`Unknown provider: ${e.provider} for model: ${e.name}`),new Error(`Unknown provider: ${e.provider} for model: ${e.name}`);return r}buildModelMap(e){t.modelMap={};let r=t.modelMap;e.forEach(n=>{if(n.enabled){if(!Object.values(vE).contains(n.provider)){console.warn(`Unknown provider: ${n.provider} for embedding model: ${n.name}`);return}let o=this.getProviderConstructor(n),i=n.apiKey||this.providerApiKeyMap[n.provider](),a=Fr(n);r[a]={hasApiKey:!!i,EmbeddingConstructor:o,vendor:n.provider}}})}static getModelName(e){let r=e;if("model"in r&&r.model)return r.model;if("modelName"in r&&r.modelName)return r.modelName;throw new Error(`Embeddings instance missing model or modelName properties: ${e}`)}getCustomModel(e){return this.activeEmbeddingModels.filter(r=>{let n=Fr(r);return e===n})[0]}async getEmbeddingsAPI(){let{embeddingModelKey:e}=ue();if(!t.modelMap.hasOwnProperty(e))throw new Mr(`No embedding model found for: ${e}`);let r=this.getCustomModel(e);if(r.plusExclusive&&!ue().isPlusUser)throw new $re.Notice("Plus-only model, please consider upgrading to Plus to access it."),new Mr("Plus-only model selected but user is not on Plus plan");if(r.believerExclusive){let a=await Ii.getInstance().validateLicenseKey();if(!a.plan||a.plan.toLowerCase()!=="believer")throw new $re.Notice("Believer-only model, please consider upgrading to Believer to access it."),new Mr("Believer-only model selected but user is not on Believer plan")}let n=t.modelMap[e];if(!n.hasApiKey)throw new Mr(`API key is not provided for the embedding model: ${e}`);let o=await this.getEmbeddingConfig(r);try{return t.embeddingModel=new n.EmbeddingConstructor(o),t.embeddingModel}catch(i){throw new Mr(`Error creating embedding model: ${e}. ${i.message}`)}}async getEmbeddingConfig(e){let r=ue(),n=e.name,o={maxRetries:3,maxConcurrency:3},a={"copilot-plus":{modelName:n,apiKey:await Gn(r.plusLicenseKey),timeout:1e4,batchSize:ue().embeddingBatchSize,configuration:{baseURL:wE,fetch:e.enableCors?js:void 0}},"copilot-plus-jina":{model:n,apiKey:await Gn(r.plusLicenseKey),timeout:1e4,batchSize:ue().embeddingBatchSize,dimensions:e.dimensions,baseUrl:wE+"/embeddings",configuration:{fetch:e.enableCors?js:void 0}},openai:{modelName:n,apiKey:await Gn(e.apiKey||r.openAIApiKey),timeout:1e4,batchSize:ue().embeddingBatchSize,configuration:{baseURL:e.baseUrl,fetch:e.enableCors?js:void 0}},cohereai:{model:n,apiKey:await Gn(e.apiKey||r.cohereApiKey)},google:{modelName:n,apiKey:await Gn(r.googleApiKey)},"azure openai":{modelName:n,azureOpenAIApiKey:await Gn(e.apiKey||r.azureOpenAIApiKey),azureOpenAIApiInstanceName:e.azureOpenAIApiInstanceName||r.azureOpenAIApiInstanceName,azureOpenAIApiDeploymentName:e.azureOpenAIApiEmbeddingDeploymentName||r.azureOpenAIApiEmbeddingDeploymentName,azureOpenAIApiVersion:e.azureOpenAIApiVersion||r.azureOpenAIApiVersion},ollama:{baseUrl:e.baseUrl||"http://localhost:11434",model:n,truncate:!0,headers:{Authorization:`Bearer ${await Gn(e.apiKey||"default-key")}`}},"lm-studio":{modelName:n,openAIApiKey:await Gn(e.apiKey||"default-key"),configuration:{baseURL:e.baseUrl||"http://localhost:1234/v1",fetch:e.enableCors?js:void 0}},"3rd party (openai-format)":{modelName:n,openAIApiKey:await Gn(e.apiKey||""),batchSize:ue().embeddingBatchSize,configuration:{baseURL:e.baseUrl,fetch:e.enableCors?js:void 0,dangerouslyAllowBrowser:!0}}}[e.provider]||{};return{...o,...a}}async ping(e){let r=async n=>{let o={...e,enableCors:n},i=await this.getEmbeddingConfig(o);await new(this.getProviderConstructor(o))(i).embedQuery("test")};try{return await r(!1),!0}catch(n){console.log("First ping attempt failed, trying with CORS...");try{return await r(!0),new $re.Notice("Connection successful, but requires CORS to be enabled. Please enable CORS for this model once you add it above."),!0}catch(o){let i=`
without CORS Error: `+Go(n)+`
with CORS Error: `+Go(o);throw new Error(i)}}}};tr();var JV=require("obsidian");Ko();tr();wn();var MCt={arabic:"ar",armenian:"am",bulgarian:"bg",danish:"dk",dutch:"nl",english:"en",finnish:"fi",french:"fr",german:"de",greek:"gr",hungarian:"hu",indian:"in",indonesian:"id",irish:"ie",italian:"it",lithuanian:"lt",nepali:"np",norwegian:"no",portuguese:"pt",romanian:"ro",russian:"ru",serbian:"rs",slovenian:"ru",spanish:"es",swedish:"se",tamil:"ta",turkish:"tr",ukrainian:"uk",sanskrit:"sk"},RCt={dutch:/[^A-Za-zàèéìòóù0-9_'-]+/gim,english:/[^A-Za-zàèéìòóù0-9_'-]+/gim,french:/[^a-z0-9äâàéèëêïîöôùüûœç-]+/gim,italian:/[^A-Za-zàèéìòóù0-9_'-]+/gim,norwegian:/[^a-z0-9_æøåÆØÅäÄöÖüÜ]+/gim,portuguese:/[^a-z0-9à-úÀ-Ú]/gim,russian:/[^a-z0-9а-яА-ЯёЁ]+/gim,spanish:/[^a-z0-9A-Zá-úÁ-ÚñÑüÜ]+/gim,swedish:/[^a-z0-9_åÅäÄöÖüÜ-]+/gim,german:/[^a-z0-9A-ZäöüÄÖÜß]+/gim,finnish:/[^a-z0-9äöÄÖ]+/gim,danish:/[^a-z0-9æøåÆØÅ]+/gim,hungarian:/[^a-z0-9áéíóöőúüűÁÉÍÓÖŐÚÜŰ]+/gim,romanian:/[^a-z0-9ăâîșțĂÂÎȘȚ]+/gim,serbian:/[^a-z0-9čćžšđČĆŽŠĐ]+/gim,turkish:/[^a-z0-9çÇğĞıİöÖşŞüÜ]+/gim,lithuanian:/[^a-z0-9ąčęėįšųūžĄČĘĖĮŠŲŪŽ]+/gim,arabic:/[^a-z0-9أ-ي]+/gim,nepali:/[^a-z0-9अ-ह]+/gim,irish:/[^a-z0-9áéíóúÁÉÍÓÚ]+/gim,indian:/[^a-z0-9अ-ह]+/gim,armenian:/[^a-z0-9ա-ֆ]+/gim,greek:/[^a-z0-9α-ωά-ώ]+/gim,indonesian:/[^a-z0-9]+/gim,ukrainian:/[^a-z0-9а-яА-ЯіїєІЇЄ]+/gim,slovenian:/[^a-z0-9čžšČŽŠ]+/gim,bulgarian:/[^a-z0-9а-яА-Я]+/gim,tamil:/[^a-z0-9அ-ஹ]+/gim,sanskrit:/[^a-z0-9A-Zāīūṛḷṃṁḥśṣṭḍṇṅñḻḹṝ]+/gim},kV=Object.keys(MCt);function jCt(t){return t!==void 0&&kV.includes(t)?MCt[t]:void 0}var SHr=Date.now().toString().slice(5),xHr=0;var NCt=BigInt(1e3),DCt=BigInt(1e6),LCt=BigInt(1e9);var sAe=65535;function Mi(t,e){if(e.length<sAe)Array.prototype.push.apply(t,e);else{let r=e.length;for(let n=0;n<r;n+=sAe)Array.prototype.push.apply(t,e.slice(n,n+sAe))}}function kCt(t,...e){return t.replace(/%(?:(?<position>\d+)\$)?(?<width>-?\d*\.?\d*)(?<type>[dfs])/g,function(...r){let n=r[r.length-1],{width:o,type:i,position:a}=n,s=a?e[Number.parseInt(a)-1]:e.shift(),u=o===""?0:Number.parseInt(o);switch(i){case"d":return s.toString().padStart(u,"0");case"f":{let l=s,[c,d]=o.split(".").map(f=>Number.parseFloat(f));return typeof d=="number"&&d>=0&&(l=l.toFixed(d)),typeof c=="number"&&c>=0?l.toString().padStart(u,"0"):l.toString()}case"s":return u<0?s.toString().padEnd(-u," "):s.toString().padStart(u," ");default:return s}})}function CHr(){return typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope}function OHr(){return typeof process<"u"&&process.release&&process.release.name==="node"}function FCt(){return BigInt(Math.floor(performance.now()*1e6))}function jj(t){return typeof t=="number"&&(t=BigInt(t)),t<NCt?`${t}ns`:t<DCt?`${t/NCt}\u03BCs`:t<LCt?`${t/DCt}ms`:`${t/LCt}s`}function jy(){return CHr()?FCt():OHr()||typeof process<"u"&&typeof process?.hrtime?.bigint=="function"?process.hrtime.bigint():typeof performance<"u"?FCt():BigInt(0)}function $V(){return`${SHr}-${xHr++}`}function SB(t,e){return Object.hasOwn===void 0?Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0:Object.hasOwn(t,e)?t[e]:void 0}function $Ct(t,e){return e[1]===t[1]?t[0]-e[0]:e[1]-t[1]}function xB(t){if(t.length===0)return[];if(t.length===1)return t[0];for(let r=1;r<t.length;r++)if(t[r].length<t[0].length){let n=t[0];t[0]=t[r],t[r]=n}let e=new Map;for(let r of t[0])e.set(r,1);for(let r=1;r<t.length;r++){let n=0;for(let o of t[r]){let i=e.get(o);i===r&&(e.set(o,i+1),n++)}if(n===0)return[]}return t[0].filter(r=>{let n=e.get(r);return n!==void 0&&e.set(r,0),n===t.length})}function Bre(t,e){let r={},n=e.length;for(let o=0;o<n;o++){let i=e[o],a=i.split("."),s=t,u=a.length;for(let l=0;l<u;l++)if(s=s[a[l]],typeof s=="object"){if(s!==null&&"lat"in s&&"lon"in s&&typeof s.lat=="number"&&typeof s.lon=="number"){s=r[i]=s;break}else if(!Array.isArray(s)&&s!==null&&l===u-1){s=void 0;break}}else if((s===null||typeof s!="object")&&l<u-1){s=void 0;break}typeof s<"u"&&(r[i]=s)}return r}function CB(t,e){return Bre(t,[e])[e]}var PHr={cm:.01,m:1,km:1e3,ft:.3048,yd:.9144,mi:1609.344};function uAe(t,e){let r=PHr[e];if(r===void 0)throw new Error(Bt("INVALID_DISTANCE_SUFFIX",t).message);return t*r}function qre(t,e){t.hits=t.hits.map(r=>({...r,document:{...r.document,...e.reduce((n,o)=>{let i=o.split("."),a=i.pop(),s=n;for(let u of i)s[u]=s[u]??{},s=s[u];return s[a]=null,n},r.document)}}))}function zs(t){return t?.constructor?.name==="AsyncFunction"}var EHr=kV.join(`
 - `),THr={NO_LANGUAGE_WITH_CUSTOM_TOKENIZER:"Do not pass the language option to create when using a custom tokenizer.",LANGUAGE_NOT_SUPPORTED:`Language "%s" is not supported.
Supported languages are:
 - ${EHr}`,INVALID_STEMMER_FUNCTION_TYPE:"config.stemmer property must be a function.",MISSING_STEMMER:'As of version 1.0.0 @orama/orama does not ship non English stemmers by default. To solve this, please explicitly import and specify the "%s" stemmer from the package @orama/stemmers. See https://docs.oramasearch.com/open-source/text-analysis/stemming for more information.',CUSTOM_STOP_WORDS_MUST_BE_FUNCTION_OR_ARRAY:"Custom stop words array must only contain strings.",UNSUPPORTED_COMPONENT:'Unsupported component "%s".',COMPONENT_MUST_BE_FUNCTION:'The component "%s" must be a function.',COMPONENT_MUST_BE_FUNCTION_OR_ARRAY_FUNCTIONS:'The component "%s" must be a function or an array of functions.',INVALID_SCHEMA_TYPE:'Unsupported schema type "%s" at "%s". Expected "string", "boolean" or "number" or array of them.',DOCUMENT_ID_MUST_BE_STRING:'Document id must be of type "string". Got "%s" instead.',DOCUMENT_ALREADY_EXISTS:'A document with id "%s" already exists.',DOCUMENT_DOES_NOT_EXIST:'A document with id "%s" does not exists.',MISSING_DOCUMENT_PROPERTY:'Missing searchable property "%s".',INVALID_DOCUMENT_PROPERTY:'Invalid document property "%s": expected "%s", got "%s"',UNKNOWN_INDEX:'Invalid property name "%s". Expected a wildcard string ("*") or array containing one of the following properties: %s',INVALID_BOOST_VALUE:"Boost value must be a number greater than, or less than 0.",INVALID_FILTER_OPERATION:"You can only use one operation per filter, you requested %d.",SCHEMA_VALIDATION_FAILURE:'Cannot insert document due schema validation failure on "%s" property.',INVALID_SORT_SCHEMA_TYPE:'Unsupported sort schema type "%s" at "%s". Expected "string" or "number".',CANNOT_SORT_BY_ARRAY:'Cannot configure sort for "%s" because it is an array (%s).',UNABLE_TO_SORT_ON_UNKNOWN_FIELD:'Unable to sort on unknown field "%s". Allowed fields: %s',SORT_DISABLED:"Sort is disabled. Please read the documentation at https://docs.oramasearch for more information.",UNKNOWN_GROUP_BY_PROPERTY:'Unknown groupBy property "%s".',INVALID_GROUP_BY_PROPERTY:'Invalid groupBy property "%s". Allowed types: "%s", but given "%s".',UNKNOWN_FILTER_PROPERTY:'Unknown filter property "%s".',INVALID_VECTOR_SIZE:'Vector size must be a number greater than 0. Got "%s" instead.',INVALID_VECTOR_VALUE:'Vector value must be a number greater than 0. Got "%s" instead.',INVALID_INPUT_VECTOR:`Property "%s" was declared as a %s-dimensional vector, but got a %s-dimensional vector instead.
Input vectors must be of the size declared in the schema, as calculating similarity between vectors of different sizes can lead to unexpected results.`,WRONG_SEARCH_PROPERTY_TYPE:'Property "%s" is not searchable. Only "string" properties are searchable.',FACET_NOT_SUPPORTED:`Facet doens't support the type "%s".`,INVALID_DISTANCE_SUFFIX:'Invalid distance suffix "%s". Valid suffixes are: cm, m, km, mi, yd, ft.',INVALID_SEARCH_MODE:'Invalid search mode "%s". Valid modes are: "fulltext", "vector", "hybrid".',MISSING_VECTOR_AND_SECURE_PROXY:"No vector was provided and no secure proxy was configured. Please provide a vector or configure an Orama Secure Proxy to perform hybrid search.",MISSING_TERM:'"term" is a required parameter when performing hybrid search. Please provide a search term.',INVALID_VECTOR_INPUT:'Invalid "vector" property. Expected an object with "value" and "property" properties, but got "%s" instead.',PLUGIN_CRASHED:"A plugin crashed during initialization. Please check the error message for more information:",PLUGIN_SECURE_PROXY_NOT_FOUND:`Could not find '@orama/secure-proxy-plugin' installed in your Orama instance.
Please install it before proceeding with creating an answer session.
Read more at https://docs.orama.com/open-source/plugins/plugin-secure-proxy
`,PLUGIN_SECURE_PROXY_MISSING_CHAT_MODEL:`Could not find a chat model defined in the secure proxy plugin configuration.
Please provide a chat model before proceeding with creating an answer session.
Read more at https://docs.orama.com/open-source/plugins/plugin-secure-proxy
`,ANSWER_SESSION_LAST_MESSAGE_IS_NOT_ASSISTANT:"The last message in the session is not an assistant message. Cannot regenerate non-assistant messages."};function Bt(t,...e){let r=new Error(kCt(THr[t]??`Unsupported Orama Error code: ${t}`,...e));return r.code=t,"captureStackTrace"in Error.prototype&&Error.captureStackTrace(r),r}function BCt(t){return{raw:Number(t),formatted:jj(t)}}function qCt(t){if(t.id){if(typeof t.id!="string")throw Bt("DOCUMENT_ID_MUST_BE_STRING",typeof t.id);return t.id}return $V()}function lAe(t,e){for(let[r,n]of Object.entries(e)){let o=t[r];if(!(typeof o>"u")&&!(n==="geopoint"&&typeof o=="object"&&typeof o.lon=="number"&&typeof o.lat=="number")&&!(n==="enum"&&(typeof o=="string"||typeof o=="number"))){if(n==="enum[]"&&Array.isArray(o)){let i=o.length;for(let a=0;a<i;a++)if(typeof o[a]!="string"&&typeof o[a]!="number")return r+"."+a;continue}if(TO(n)){let i=dAe(n);if(!Array.isArray(o)||o.length!==i)throw Bt("INVALID_INPUT_VECTOR",r,i,o.length);continue}if(OB(n)){if(!Array.isArray(o))return r;let i=cAe(n),a=o.length;for(let s=0;s<a;s++)if(typeof o[s]!==i)return r+"."+s;continue}if(typeof n=="object"){if(!o||typeof o!="object")return r;let i=lAe(o,n);if(i)return r+"."+i;continue}if(typeof o!==n)return r}}}var AHr={string:!1,number:!1,boolean:!1,enum:!1,geopoint:!1,"string[]":!0,"number[]":!0,"boolean[]":!0,"enum[]":!0},IHr={"string[]":"string","number[]":"number","boolean[]":"boolean","enum[]":"enum"};function UCt(t){return t==="geopoint"}function TO(t){return typeof t=="string"&&/^vector\[\d+\]$/.test(t)}function OB(t){return typeof t=="string"&&AHr[t]}function cAe(t){return IHr[t]}function dAe(t){let e=Number(t.slice(7,-1));switch(!0){case isNaN(e):throw Bt("INVALID_VECTOR_VALUE",t);case e<=0:throw Bt("INVALID_VECTOR_SIZE",t);default:return e}}function zCt(){return{idToInternalId:new Map,internalIdToId:[],save:MHr,load:RHr}}function MHr(t){return{internalIdToId:t.internalIdToId}}function RHr(t,e){let{internalIdToId:r}=e;t.internalDocumentIDStore.idToInternalId.clear(),t.internalDocumentIDStore.internalIdToId=[];let n=r.length;for(let o=0;o<n;o++){let i=r[o];t.internalDocumentIDStore.idToInternalId.set(i,o+1),t.internalDocumentIDStore.internalIdToId.push(i)}}function mi(t,e){if(typeof e=="string"){let r=t.idToInternalId.get(e);if(r)return r;let n=t.idToInternalId.size+1;return t.idToInternalId.set(e,n),t.internalIdToId.push(e),n}return e>t.internalIdToId.length?mi(t,e.toString()):e}function Zh(t,e){if(t.internalIdToId.length<e)throw new Error(`Invalid internalId ${e}`);return t.internalIdToId[e-1]}function NHr(t,e){return{sharedInternalDocumentStore:e,docs:{},count:0}}function DHr(t,e){let r=mi(t.sharedInternalDocumentStore,e);return t.docs[r]}function LHr(t,e){let r=e.length,n=Array.from({length:r});for(let o=0;o<r;o++){let i=mi(t.sharedInternalDocumentStore,e[o]);n[o]=t.docs[i]}return n}function FHr(t){return t.docs}function kHr(t,e,r){let n=mi(t.sharedInternalDocumentStore,e);return typeof t.docs[n]<"u"?!1:(t.docs[n]=r,t.count++,!0)}function $Hr(t,e){let r=mi(t.sharedInternalDocumentStore,e);return typeof t.docs[r]>"u"?!1:(delete t.docs[r],t.count--,!0)}function BHr(t){return t.count}function qHr(t,e){let r=e;return{docs:r.docs,count:r.count,sharedInternalDocumentStore:t}}function UHr(t){return{docs:t.docs,count:t.count}}function HCt(){return{create:NHr,get:DHr,getMultiple:LHr,getAll:FHr,store:kHr,remove:$Hr,count:BHr,load:qHr,save:UHr}}var VCt=["beforeInsert","afterInsert","beforeRemove","afterRemove","beforeUpdate","afterUpdate","beforeSearch","afterSearch","beforeInsertMultiple","afterInsertMultiple","beforeRemoveMultiple","afterRemoveMultiple","beforeUpdateMultiple","afterUpdateMultiple","beforeLoad","afterLoad","afterCreate"];function WCt(t,e){let r=[],n=t.plugins?.length;if(!n)return r;for(let o=0;o<n;o++)try{let i=t.plugins[o];typeof i[e]=="function"&&r.push(i[e])}catch(i){throw console.error("Caught error in getAllPluginsByHook:",i),Bt("PLUGIN_CRASHED")}return r}var KCt=["tokenizer","index","documentsStore","sorter"],fAe=["validateSchema","getDocumentIndexId","getDocumentProperties","formatElapsedTime"];function Ny(t,e,r,n){if(t.some(zs))return(async()=>{for(let i of t)await i(e,r,n)})();for(let i of t)i(e,r,n)}function Nj(t,e,r){if(t.some(zs))return(async()=>{for(let o of t)await o(e,r)})();for(let o of t)o(e,r)}function PB(t,e,r,n,o){if(t.some(zs))return(async()=>{for(let a of t)await a(e,r,n,o)})();for(let a of t)a(e,r,n,o)}function EB(t,e,r,n){if(t.some(zs))return(async()=>{for(let i of t)await i(e,r,n)})();for(let i of t)i(e,r,n)}function GCt(t,e){if(t.some(zs))return(async()=>{for(let n of t)await n(e)})();for(let n of t)n(e)}function pAe(t){let e=t.r;return t.r=e.l,e.l=t,t.h=Math.max(Xh(t.l),Xh(t.r))+1,e.h=Math.max(Xh(e.l),Xh(e.r))+1,e}function mAe(t){let e=t.l;return t.l=e.r,e.r=t,t.h=Math.max(Xh(t.l),Xh(t.r))+1,e.h=Math.max(Xh(e.l),Xh(e.r))+1,e}function YCt(t,e,r){let n=[];function o(i){i!==null&&(e<i.k&&o(i.l),i.k>=e&&i.k<=r&&Mi(n,i.v),r>i.k&&o(i.r))}return o(t.root),n}function hAe(t,e,r=!1){let n=[];if(t===null)return n;let o=[t.root];for(;o.length>0;){let i=o.pop();i&&(r&&i.k>=e&&Mi(n,i.v),!r&&i.k>e&&Mi(n,i.v),o.push(i.r),o.push(i.l))}return n}function gAe(t,e,r=!1){let n=[];if(t===null)return n;let o=[t.root];for(;o.length>0;){let i=o.pop();i&&(r&&i.k<=e&&Mi(n,i.v),!r&&i.k<e&&Mi(n,i.v),o.push(i.r),o.push(i.l))}return n}function ZCt(t,e){for(;t!==null;)if(e<t.k)t=t.l;else if(e>t.k)t=t.r;else return t;return null}function XCt(t,e){return{root:{k:t,v:e,l:null,r:null,h:0}}}var JCt=0;function QCt(t,e,r,n=500){function o(i,a,s){if(i===null)return JCt++,{k:a,v:s,l:null,r:null,h:0};if(a<i.k)i.l=o(i.l,a,s);else if(a>i.k)i.r=o(i.r,a,s);else return i.v.push(...s),i;return JCt%n===0?HHr(i,a):i}t.root=o(t.root,e,r)}function HHr(t,e){t.h=1+Math.max(Xh(t.l),Xh(t.r));let r=Xh(t.l)-Xh(t.r);return r>1&&e<t.l.k?mAe(t):r<-1&&e>t.r.k?pAe(t):r>1&&e>t.l.k?(t.l=pAe(t.l),mAe(t)):r<-1&&e<t.r.k?(t.r=mAe(t.r),pAe(t)):t}function Xh(t){return t!==null?t.h:-1}function eOt(t,e){let r=ZCt(t.root,e);return r===null?null:r.v}function VHr(t,e){if(t===null||t.root===null)return;let r=t.root,n=null;for(;r!=null&&r.k!==e;)n=r,e<r.k?r=r.l:r=r.r;if(r===null)return;(()=>{if(r.l===null&&r.r===null)n===null?t.root=null:n.l===r?n.l=null:n.r=null;else if(r.l!=null&&r.r!=null){let i=r.r,a=r;for(;i.l!=null;)a=i,i=i.l;r.k=i.k,a===r?a.r=i.r:a.l=i.r}else{let i=r.l!=null?r.l:r.r;n===null?t.root=i:n.l===r?n.l=i:n.r=i}})()}function tOt(t,e,r){let n=ZCt(t.root,r);if(n){if(n.v.length===1){VHr(t,r);return}n.v.splice(n.v.indexOf(e),1)}}function rOt(){return{numberToDocumentId:new Map}}function nOt(t,e,r){return t.numberToDocumentId.has(e)?(t.numberToDocumentId.get(e).push(r),t):(t.numberToDocumentId.set(e,[r]),t)}function oOt(t,e,r){t?.numberToDocumentId.set(r,t?.numberToDocumentId.get(r)?.filter(n=>n!==e)??[]),t?.numberToDocumentId.get(r)?.length===0&&t?.numberToDocumentId.delete(r)}function iOt(t,e){let r=Object.keys(e);if(r.length!==1)throw new Error("Invalid operation");let n=r[0];switch(n){case"eq":{let o=e[n];return t.numberToDocumentId.get(o)??[]}case"in":{let o=e[n],i=[];for(let a of o){let s=t.numberToDocumentId.get(a);s!=null&&Mi(i,s)}return i}case"nin":{let o=e[n],i=[],a=t.numberToDocumentId.keys();for(let s of a){if(o.includes(s))continue;let u=t.numberToDocumentId.get(s);u!=null&&Mi(i,u)}return i}}throw new Error("Invalid operation")}function aOt(t,e){let r=Object.keys(e);if(r.length!==1)throw new Error("Invalid operation");let n=r[0];switch(n){case"containsAll":{let i=e[n].map(a=>t.numberToDocumentId.get(a)??[]);return xB(i)}}throw new Error("Invalid operation")}function WHr(t,e,r){if(r<0)return-1;if(t===e)return 0;let n=t.length,o=e.length;if(n===0)return o<=r?o:-1;if(o===0)return n<=r?n:-1;if(t=t.toLowerCase(),e=e.toLowerCase(),e.startsWith(t)||t.startsWith(e))return 0;if(Math.abs(n-o)>r)return-1;let i=[];for(let a=0;a<=n;a++){i[a]=[a];for(let s=1;s<=o;s++)i[a][s]=a===0?s:0}for(let a=1;a<=n;a++){let s=1/0;for(let u=1;u<=o;u++)t[a-1]===e[u-1]?i[a][u]=i[a-1][u-1]:i[a][u]=Math.min(i[a-1][u]+1,i[a][u-1]+1,i[a-1][u-1]+1),s=Math.min(s,i[a][u]);if(s>r)return-1}return i[n][o]<=r?i[n][o]:-1}function yAe(t,e,r){let n=WHr(t,e,r);return{distance:n,isBounded:n>=0}}var bAe=class{constructor(e,r,n){dc(this,"k");dc(this,"s");dc(this,"c",{});dc(this,"d",[]);dc(this,"e");dc(this,"w","");this.k=e,this.s=r,this.e=n}toJSON(){return{w:this.w,s:this.s,c:this.c,d:this.d,e:this.e}}};function TB(t,e){t.w=e.w+t.s}function Ure(t,e){t.d.push(e)}function KHr(t,e){let r=t.d.indexOf(e);return r===-1?!1:(t.d.splice(r,1),!0)}function _Ae(t,e,r,n,o){if(t.e){let{w:i,d:a}=t;if(n&&i!==r)return{};if(SB(e,i)==null&&(o?Math.abs(r.length-i.length)<=o&&yAe(r,i,o).isBounded&&(e[i]=[]):e[i]=[]),SB(e,i)!=null&&a.length>0){let s=new Set(e[i]),u=a.length;for(let l=0;l<u;l++)s.add(a[l]);e[i]=Array.from(s)}}for(let i of Object.keys(t.c))_Ae(t.c[i],e,r,n,o);return e}function sOt(t,e){let r="",n=Math.min(t.length,e.length);for(let o=0;o<n;o++){if(t[o]!==e[o])return r;r+=t[o]}return r}function Dj(t=!1,e="",r=""){return new bAe(r,e,t)}function uOt(t,e,r){let n=e.length;for(let o=0;o<n;o++){let i=e[o],a=e.substring(o),s=t.c[i];if(s){let u=s.s,l=u.length,c=sOt(u,a),d=c.length;if(u===a){Ure(s,r),s.e=!0;return}let f=u[d];if(d<l&&d===a.length){let p=Dj(!0,a,i);p.c[f]=s;let m=p.c[f];m.s=u.substring(d),m.k=f,t.c[i]=p,TB(p,t),TB(m,p),Ure(p,r);return}if(d<l&&d<a.length){let p=Dj(!1,c,i);p.c[f]=s,t.c[i]=p;let m=p.c[f];m.s=u.substring(d),m.k=f;let h=a[d],b=Dj(!0,e.substring(o+d),h);Ure(b,r),p.c[h]=b,TB(p,t),TB(b,p),TB(m,p);return}o+=l-1,t=s}else{let u=Dj(!0,a,i);Ure(u,r),t.c[i]=u,TB(u,t);return}}}function BV(t,e,r,n,o,i){if(!(n<0)){if(t.w.startsWith(e)){_Ae(t,i,e,!1,0);return}if(t.e){let{w:a,d:s}=t;if(a&&(yAe(e,a,o).isBounded&&(i[a]=[]),SB(i,a)!=null&&s.length>0)){let u=new Set(i[a]),l=s.length;for(let c=0;c<l;c++)u.add(s[c]);i[a]=Array.from(u)}}if(!(r>=e.length)){e[r]in t.c&&BV(t.c[e[r]],e,r+1,n,o,i),BV(t,e,r+1,n-1,o,i);for(let a in t.c)BV(t.c[a],e,r,n-1,o,i);for(let a in t.c)a!==e[r]&&BV(t.c[a],e,r+1,n-1,o,i)}}}function vAe(t,{term:e,exact:r,tolerance:n}){if(n&&!r){let o={};return n=n||0,BV(t,e,0,n||0,n,o),o}else{let o=e.length;for(let a=0;a<o;a++){let s=e[a];if(s in t.c){let u=t.c[s],l=u.s,c=e.substring(a),f=sOt(l,c).length;if(f!==l.length&&f!==c.length){if(n)break;return{}}a+=u.s.length-1,t=u}else return{}}let i={};return _Ae(t,i,e,r,n),i}}function lOt(t,e,r,n=!0){if(!e)return!0;let o=e.length;for(let i=0;i<o;i++){let a=e[i];if(a in t.c){let s=t.c[a];i+=s.s.length-1,t=s,n&&t.w!==e||KHr(t,r)}else return!1}return!0}function cOt(){return{root:null}}function dOt(t,e,r){let n={point:e,docIDs:r};if(t.root==null){t.root=n;return}let o=t.root,i=0;for(;o!==null;){if(o.point.lon===e.lon&&o.point.lat===e.lat){let s=o.docIDs??[];o.docIDs=Array.from(new Set([...s,...r||[]]));return}if(i%2===0)if(e.lon<o.point.lon){if(o.left==null){o.left=n;return}o=o.left}else{if(o.right==null){o.right=n;return}o=o.right}else if(e.lat<o.point.lat){if(o.left==null){o.left=n;return}o=o.left}else{if(o.right==null){o.right=n;return}o=o.right}i++}}function fOt(t,e,r){let n=t.root,o=0,i=null,a=null;for(;n!==null;){if(n?.point.lon===e.lon&&n.point.lat===e.lat){let u=n.docIDs?.indexOf(r);if(u!==void 0&&u>-1){n.docIDs?.splice(u,1),(n.docIDs==null||n.docIDs.length===0)&&(i!=null?a==="left"?i.left=n.left!==null?n.left:n.right:a==="right"&&(i.right=n.right!==null?n.right:n.left):t.root=n.left!==null?n.left:n.right);return}}let s=o%2;i=n,s===0?e.lon<n.point.lon?(n=n?.left,a="left"):(n=n?.right,a="right"):e.lat<n.point.lat?(n=n?.left,a="left"):(n=n?.right,a="right"),o++}}function pOt(t,e,r,n=!0,o="asc",i=!1){let a=i?gOt:hOt,s=[{node:t,depth:0}],u=[];for(;s.length>0;){let{node:l,depth:c}=s.pop();if(l===null)continue;let d=a(e,l.point);(n?d<=r:d>r)&&u.push({point:l.point,docIDs:l.docIDs??[]}),l.left!=null&&s.push({node:l.left,depth:c+1}),l.right!=null&&s.push({node:l.right,depth:c+1})}return o&&u.sort((l,c)=>{let d=a(e,l.point),f=a(e,c.point);return o.toLowerCase()==="asc"?d-f:f-d}),u}function mOt(t,e,r=!0,n=null,o=!1){let i=[{node:t,depth:0}],a=[];for(;i.length>0;){let u=i.pop();if(u==null||u.node==null)continue;let{node:l,depth:c}=u,d=c+1;l.left!=null&&i.push({node:l.left,depth:d}),l.right!=null&&i.push({node:l.right,depth:d});let f=JHr(e,l.point);f&&r?a.push({point:l.point,docIDs:l.docIDs??[]}):!f&&!r&&a.push({point:l.point,docIDs:l.docIDs??[]})}let s=GHr(e);if(n){let u=o?gOt:hOt;a.sort((l,c)=>{let d=u(s,l.point),f=u(s,c.point);return n.toLowerCase()==="asc"?d-f:f-d})}return a}function GHr(t){let e=0,r=0,n=0,o=t.length;for(let a=0,s=o-1;a<o;s=a++){let u=t[a].lon,l=t[a].lat,c=t[s].lon,d=t[s].lat,f=u*d-c*l;e+=f,r+=(u+c)*f,n+=(l+d)*f}e/=2;let i=6*e;return r/=i,n/=i,{lon:r,lat:n}}function JHr(t,e){let r=!1,n=e.lon,o=e.lat,i=t.length;for(let a=0,s=i-1;a<i;s=a++){let u=t[a].lon,l=t[a].lat,c=t[s].lon,d=t[s].lat;l>o!=d>o&&n<(c-u)*(o-l)/(d-l)+u&&(r=!r)}return r}function hOt(t,e){let r=Math.PI/180,n=t.lat*r,o=e.lat*r,i=(e.lat-t.lat)*r,a=(e.lon-t.lon)*r,s=Math.sin(i/2)*Math.sin(i/2)+Math.cos(n)*Math.cos(o)*Math.sin(a/2)*Math.sin(a/2);return 6371e3*(2*Math.atan2(Math.sqrt(s),Math.sqrt(1-s)))}function gOt(t,e){let n=.0033528106647474805,o=(1-n)*6378137,i=Math.PI/180,a=t.lat*i,s=e.lat*i,u=(e.lon-t.lon)*i,l=Math.atan((1-n)*Math.tan(a)),c=Math.atan((1-n)*Math.tan(s)),d=Math.sin(l),f=Math.cos(l),p=Math.sin(c),m=Math.cos(c),h=u,b,g=1e3,y,w,S,C,P;do{let N=Math.sin(h),$=Math.cos(h);S=Math.sqrt(m*N*(m*N)+(f*p-d*m*$)*(f*p-d*m*$)),C=d*p+f*m*$,P=Math.atan2(S,C),y=f*m*N/S,w=1-y*y;let k=C-2*d*p/w,H=n/16*w*(4+n*(4-3*w));b=h,h=u+(1-H)*n*y*(P+H*S*(k+H*C*(-1+2*k*k)))}while(Math.abs(h-b)>1e-12&&--g>0);let E=w*(6378137*6378137-o*o)/(o*o),A=1+E/16384*(4096+E*(-768+E*(320-175*E))),I=E/1024*(256+E*(-128+E*(74-47*E))),R=I*S*(C-2*d*p/w+I/4*(C*(-1+2*S*S)-I/6*P*(-3+4*S*S)*(-3+4*P*P)));return o*A*(P-R)}function zre(t,e,r=0,n){if(e===0)throw Bt("INVALID_BOOST_VALUE");let o=new Map,i=t.length;for(let h=0;h<i;h++){let b=t[h],g=b.length;for(let y=0;y<g;y++){let[w,S]=b[y],C=S*e,P=o.get(w)?.[0];P!==void 0?o.set(w,[P*1.5+C,(o?.get(w)?.[1]||0)+1]):o.set(w,[C,1])}}let a=[];for(let h of o.entries())a.push([h[0],h[1][0]]);let s=a.sort((h,b)=>b[1]-h[1]);if(r===1)return s;let u=s.length,l=[];for(let h of o.entries())l.push([h[0],h[1][0],h[1][1]]);let c=l.sort((h,b)=>h[2]>b[2]?-1:h[2]<b[2]?1:h[1]>b[1]?-1:h[1]<b[1]?1:0),d;for(let h=0;h<u&&c[h][2]===n;h++)d=h;if(typeof d>"u"){if(r===0)return[];d=0}let f=c.length,p=new Array(f);for(let h=0;h<f;h++)p[h]=[c[h][0],c[h][1]];if(r===0)return p.slice(0,d+1);let m=d+Math.ceil(r*100*(u-d)/100);return p.slice(0,u+m)}function wAe(t,e,r,n,o,{k:i,b:a,d:s}){return Math.log(1+(r-e+.5)/(e+.5))*(s+t*(i+1))/(t+i*(1-a+a*n/o))}function SAe(t,e){let r=0;for(let n=0;n<e;n++)r+=t[n]*t[n];return Math.sqrt(r)}function Hre(t,e,r,n=.8){let o=SAe(t,r),i=[];for(let[a,[s,u]]of Object.entries(e)){let l=0;for(let d=0;d<r;d++)l+=t[d]*u[d];let c=l/(o*s);c>=n&&i.push([a,c])}return i.sort((a,s)=>s[1]-a[1])}function YHr(t,e,r,n,o){let i=mi(t.sharedInternalDocumentStore,r);t.avgFieldLength[e]=((t.avgFieldLength[e]??0)*(o-1)+n.length)/o,t.fieldLengths[e][i]=n.length,t.frequencies[e][i]={}}function ZHr(t,e,r,n,o){let i=0;for(let u of n)u===o&&i++;let a=mi(t.sharedInternalDocumentStore,r),s=i/n.length;t.frequencies[e][a][o]=s,o in t.tokenOccurrences[e]||(t.tokenOccurrences[e][o]=0),t.tokenOccurrences[e][o]=(t.tokenOccurrences[e][o]??0)+1}function XHr(t,e,r,n){let o=mi(t.sharedInternalDocumentStore,r);n>1?t.avgFieldLength[e]=(t.avgFieldLength[e]*n-t.fieldLengths[e][o])/(n-1):t.avgFieldLength[e]=void 0,t.fieldLengths[e][o]=void 0,t.frequencies[e][o]=void 0}function QHr(t,e,r){t.tokenOccurrences[e][r]--}function eVr(t,e,r,n,o){let i=Array.from(o),a=e.avgFieldLength[r],s=e.fieldLengths[r],u=e.tokenOccurrences[r],l=e.frequencies[r],c=typeof u[n]=="number"?u[n]??0:0,d=[],f=i.length;for(let p=0;p<f;p++){let m=mi(e.sharedInternalDocumentStore,i[p]),h=l?.[m]?.[n]??0,b=wAe(h,c,t.docsCount,s[m],a,t.params.relevance);d.push([m,b])}return d}function bOt(t,e,r,n,o=""){n||(n={sharedInternalDocumentStore:e,indexes:{},vectorIndexes:{},searchableProperties:[],searchablePropertiesWithTypes:{},frequencies:{},tokenOccurrences:{},avgFieldLength:{},fieldLengths:{}});for(let[i,a]of Object.entries(r)){let s=`${o}${o?".":""}${i}`;if(typeof a=="object"&&!Array.isArray(a)){bOt(t,e,a,n,s);continue}if(TO(a))n.searchableProperties.push(s),n.searchablePropertiesWithTypes[s]=a,n.vectorIndexes[s]={size:dAe(a),vectors:{}};else{let u=/\[/.test(a);switch(a){case"boolean":case"boolean[]":n.indexes[s]={type:"Bool",node:{true:[],false:[]},isArray:u};break;case"number":case"number[]":n.indexes[s]={type:"AVL",node:XCt(0,[]),isArray:u};break;case"string":case"string[]":n.indexes[s]={type:"Radix",node:Dj(),isArray:u},n.avgFieldLength[s]=0,n.frequencies[s]={},n.tokenOccurrences[s]={},n.fieldLengths[s]={};break;case"enum":case"enum[]":n.indexes[s]={type:"Flat",node:rOt(),isArray:u};break;case"geopoint":n.indexes[s]={type:"BKD",node:cOt(),isArray:u};break;default:throw Bt("INVALID_SCHEMA_TYPE",Array.isArray(a)?"array":a,s)}n.searchableProperties.push(s),n.searchablePropertiesWithTypes[s]=a}}return n}function tVr(t,e,r,n,o,i,a,s){return u=>{let l=mi(e.sharedInternalDocumentStore,n),{type:c,node:d}=e.indexes[r];switch(c){case"Bool":{d[u?"true":"false"].push(l);break}case"AVL":{let f=s?.avlRebalanceThreshold??1;QCt(d,u,[l],f);break}case"Radix":{let f=i.tokenize(u,o,r);t.insertDocumentScoreParameters(e,r,l,f,a);for(let p of f)t.insertTokenScoreParameters(e,r,l,f,p),uOt(d,p,l);break}case"Flat":{nOt(d,u,l);break}case"BKD":{dOt(d,u,[l]);break}}}}function rVr(t,e,r,n,o,i,a,s,u,l){if(TO(i))return nVr(e,r,o,n);let c=tVr(t,e,r,n,a,s,u,l);if(!OB(i))return c(o);let d=o,f=d.length;for(let p=0;p<f;p++)c(d[p])}function nVr(t,e,r,n){r instanceof Float32Array||(r=new Float32Array(r));let o=t.vectorIndexes[e].size,i=SAe(r,o);t.vectorIndexes[e].vectors[n]=[i,r]}function yOt(t,e,r,n,o,i,a,s,u){let l=mi(e.sharedInternalDocumentStore,n);if(TO(i))return delete e.vectorIndexes[r].vectors[n],!0;let{type:c,node:d}=e.indexes[r];switch(c){case"AVL":return tOt(d,l,o),!0;case"Bool":{let p=d[o?"true":"false"].indexOf(l);return d[o?"true":"false"].splice(p,1),!0}case"Radix":{let f=s.tokenize(o,a,r);t.removeDocumentScoreParameters(e,r,n,u);for(let p of f)t.removeTokenScoreParameters(e,r,p),lOt(d,p,l);return!0}case"Flat":return oOt(d,l,o),!0;case"BKD":return fOt(d,o,l),!1}}function oVr(t,e,r,n,o,i,a,s,u){if(!OB(i))return yOt(t,e,r,n,o,i,a,s,u);let l=cAe(i),c=o,d=c.length;for(let f=0;f<d;f++)yOt(t,e,r,n,c[f],l,a,s,u);return!0}function iVr(t,e,r,n){if(!(r in e.tokenOccurrences))return[];let{node:o,type:i}=e.indexes[r];if(i!=="Radix")throw Bt("WRONG_SEARCH_PROPERTY_TYPE",r);let{exact:a,tolerance:s}=t.params,u=vAe(o,{term:n,exact:a,tolerance:s}),l=new Set;for(let c in u)if(SB(u,c))for(let f of u[c])l.add(f);return t.index.calculateResultScores(t,e,r,n,Array.from(l))}function aVr(t,e,r){let n=Object.keys(r),o=n.reduce((i,a)=>({[a]:[],...i}),{});for(let i of n){let a=r[i];if(typeof e.indexes[i]>"u")throw Bt("UNKNOWN_FILTER_PROPERTY",i);let{node:s,type:u,isArray:l}=e.indexes[i];if(u==="Bool"){let f=s[a.toString()];Mi(o[i],f);continue}if(u==="BKD"){let d;if("radius"in a)d="radius";else if("polygon"in a)d="polygon";else throw new Error(`Invalid operation ${a}`);if(d==="radius"){let{value:f,coordinates:p,unit:m="m",inside:h=!0,highPrecision:b=!1}=a[d],g=uAe(f,m),y=pOt(s.root,p,g,h,void 0,b);Mi(o[i],y.flatMap(({docIDs:w})=>w))}else{let{coordinates:f,inside:p=!0,highPrecision:m=!1}=a[d],h=mOt(s.root,f,p,void 0,m);Mi(o[i],h.flatMap(({docIDs:b})=>b))}continue}if(u==="Radix"&&(typeof a=="string"||Array.isArray(a))){for(let d of[a].flat()){let f=t.tokenizer.tokenize(d,t.language,i);for(let p of f){let m=vAe(s,{term:p,exact:!0});Mi(o[i],Object.values(m).flat())}}continue}let c=Object.keys(a);if(c.length>1)throw Bt("INVALID_FILTER_OPERATION",c.length);if(u==="Flat"){let d=l?aOt:iOt;Mi(o[i],d(s,a));continue}if(u==="AVL"){let d=c[0],f=a[d],p=[];switch(d){case"gt":{p=hAe(s,f,!1);break}case"gte":{p=hAe(s,f,!0);break}case"lt":{p=gAe(s,f,!1);break}case"lte":{p=gAe(s,f,!0);break}case"eq":{p=eOt(s,f)??[];break}case"between":{let[m,h]=f;p=YCt(s,m,h);break}}Mi(o[i],p)}}return xB(Object.values(o))}function sVr(t){return t.searchableProperties}function uVr(t){return t.searchablePropertiesWithTypes}function _Ot(t){let e=Dj(t.e,t.s,t.k);e.d=t.d,e.w=t.w;for(let r of Object.keys(t.c))e.c[r]=_Ot(t.c[r]);return e}function lVr(t){return{numberToDocumentId:new Map(t)}}function cVr(t){return Array.from(t.numberToDocumentId.entries())}function dVr(t,e){let{indexes:r,vectorIndexes:n,searchableProperties:o,searchablePropertiesWithTypes:i,frequencies:a,tokenOccurrences:s,avgFieldLength:u,fieldLengths:l}=e,c={},d={};for(let f of Object.keys(r)){let{node:p,type:m,isArray:h}=r[f];switch(m){case"Radix":c[f]={type:"Radix",node:_Ot(p),isArray:h};break;case"Flat":c[f]={type:"Flat",node:lVr(p),isArray:h};break;default:c[f]=r[f]}}for(let f of Object.keys(n)){let p=n[f].vectors;for(let m in p)p[m]=[p[m][0],new Float32Array(p[m][1])];d[f]={size:n[f].size,vectors:p}}return{sharedInternalDocumentStore:t,indexes:c,vectorIndexes:d,searchableProperties:o,searchablePropertiesWithTypes:i,frequencies:a,tokenOccurrences:s,avgFieldLength:u,fieldLengths:l}}function fVr(t){let{indexes:e,vectorIndexes:r,searchableProperties:n,searchablePropertiesWithTypes:o,frequencies:i,tokenOccurrences:a,avgFieldLength:s,fieldLengths:u}=t,l={};for(let d of Object.keys(r)){let f=r[d].vectors;for(let p in f)f[p]=[f[p][0],Array.from(f[p][1])];l[d]={size:r[d].size,vectors:f}}let c={};for(let d of Object.keys(e)){let{type:f,node:p,isArray:m}=e[d];if(f!=="Flat"){c[d]=e[d];continue}c[d]={type:"Flat",node:cVr(p),isArray:m}}return{indexes:c,vectorIndexes:l,searchableProperties:n,searchablePropertiesWithTypes:o,frequencies:i,tokenOccurrences:a,avgFieldLength:s,fieldLengths:u}}function vOt(){return{create:bOt,insert:rVr,remove:oVr,insertDocumentScoreParameters:YHr,insertTokenScoreParameters:ZHr,removeDocumentScoreParameters:XHr,removeTokenScoreParameters:QHr,calculateResultScores:eVr,search:iVr,searchByWhereClause:aVr,getSearchableProperties:sVr,getSearchablePropertiesWithTypes:uVr,load:dVr,save:fVr}}function wOt(t,e,r,n,o){let i={language:t.tokenizer.language,sharedInternalDocumentStore:e,enabled:!0,isSorted:!0,sortableProperties:[],sortablePropertiesWithTypes:{},sorts:{}};for(let[a,s]of Object.entries(r)){let u=`${o}${o?".":""}${a}`;if(!n.includes(u)){if(typeof s=="object"&&!Array.isArray(s)){let l=wOt(t,e,s,n,u);Mi(i.sortableProperties,l.sortableProperties),i.sorts={...i.sorts,...l.sorts},i.sortablePropertiesWithTypes={...i.sortablePropertiesWithTypes,...l.sortablePropertiesWithTypes};continue}if(!TO(s))switch(s){case"boolean":case"number":case"string":i.sortableProperties.push(u),i.sortablePropertiesWithTypes[u]=s,i.sorts[u]={docs:new Map,orderedDocsToRemove:new Map,orderedDocs:[],type:s};break;case"geopoint":case"enum":continue;case"enum[]":case"boolean[]":case"number[]":case"string[]":continue;default:throw Bt("INVALID_SORT_SCHEMA_TYPE",Array.isArray(s)?"array":s,u)}}}return i}function mVr(t,e,r,n){return n?.enabled!==!1?wOt(t,e,r,(n||{}).unsortableProperties||[],""):{disabled:!0}}function hVr(t,e,r,n){if(!t.enabled)return;t.isSorted=!1;let o=mi(t.sharedInternalDocumentStore,r),i=t.sorts[e];i.orderedDocsToRemove.has(o)&&xAe(t,e),i.docs.set(o,i.orderedDocs.length),i.orderedDocs.push([o,n])}function SOt(t){if(t.isSorted||!t.enabled)return;let e=Object.keys(t.sorts);for(let r of e)_Vr(t,r);t.isSorted=!0}function gVr(t,e,r){return e[1].localeCompare(r[1],jCt(t))}function yVr(t,e){return t[1]-e[1]}function bVr(t,e){return e[1]?-1:1}function _Vr(t,e){let r=t.sorts[e],n;switch(r.type){case"string":n=gVr.bind(null,t.language);break;case"number":n=yVr.bind(null);break;case"boolean":n=bVr.bind(null);break}r.orderedDocs.sort(n);let o=r.orderedDocs.length;for(let i=0;i<o;i++){let a=r.orderedDocs[i][0];r.docs.set(a,i)}}function vVr(t){let e=Object.keys(t.sorts);for(let r of e)xAe(t,r)}function xAe(t,e){let r=t.sorts[e];r.orderedDocsToRemove.size&&(r.orderedDocs=r.orderedDocs.filter(n=>!r.orderedDocsToRemove.has(n[0])),r.orderedDocsToRemove.clear())}function wVr(t,e,r){if(!t.enabled)return;let n=t.sorts[e],o=mi(t.sharedInternalDocumentStore,r);n.docs.get(o)&&(n.docs.delete(o),n.orderedDocsToRemove.set(o,!0))}function SVr(t,e,r){if(!t.enabled)throw Bt("SORT_DISABLED");let n=r.property,o=r.order==="DESC",i=t.sorts[n];if(!i)throw Bt("UNABLE_TO_SORT_ON_UNKNOWN_FIELD",n,t.sortableProperties.join(", "));return xAe(t,n),SOt(t),e.sort((a,s)=>{let u=i.docs.get(mi(t.sharedInternalDocumentStore,a[0])),l=i.docs.get(mi(t.sharedInternalDocumentStore,s[0])),c=typeof u<"u",d=typeof l<"u";return!c&&!d?0:c?d?o?l-u:u-l:-1:1}),e}function xVr(t){return t.enabled?t.sortableProperties:[]}function CVr(t){return t.enabled?t.sortablePropertiesWithTypes:{}}function OVr(t,e){let r=e;if(!r.enabled)return{enabled:!1};let n=Object.keys(r.sorts).reduce((o,i)=>{let{docs:a,orderedDocs:s,type:u}=r.sorts[i];return o[i]={docs:new Map(Object.entries(a).map(([l,c])=>[+l,c])),orderedDocsToRemove:new Map,orderedDocs:s,type:u},o},{});return{sharedInternalDocumentStore:t,language:r.language,sortableProperties:r.sortableProperties,sortablePropertiesWithTypes:r.sortablePropertiesWithTypes,sorts:n,enabled:!0,isSorted:r.isSorted}}function PVr(t){if(!t.enabled)return{enabled:!1};vVr(t),SOt(t);let e=Object.keys(t.sorts).reduce((r,n)=>{let{docs:o,orderedDocs:i,type:a}=t.sorts[n];return r[n]={docs:Object.fromEntries(o.entries()),orderedDocs:i,type:a},r},{});return{language:t.language,sortableProperties:t.sortableProperties,sortablePropertiesWithTypes:t.sortablePropertiesWithTypes,sorts:e,enabled:t.enabled,isSorted:t.isSorted}}function xOt(){return{create:mVr,insert:hVr,remove:wVr,save:PVr,load:OVr,sortBy:SVr,getSortableProperties:xVr,getSortablePropertiesWithTypes:CVr}}var TVr=[65,65,65,65,65,65,65,67,69,69,69,69,73,73,73,73,69,78,79,79,79,79,79,null,79,85,85,85,85,89,80,115,97,97,97,97,97,97,97,99,101,101,101,101,105,105,105,105,101,110,111,111,111,111,111,null,111,117,117,117,117,121,112,121,65,97,65,97,65,97,67,99,67,99,67,99,67,99,68,100,68,100,69,101,69,101,69,101,69,101,69,101,71,103,71,103,71,103,71,103,72,104,72,104,73,105,73,105,73,105,73,105,73,105,73,105,74,106,75,107,107,76,108,76,108,76,108,76,108,76,108,78,110,78,110,78,110,110,78,110,79,111,79,111,79,111,79,111,82,114,82,114,82,114,83,115,83,115,83,115,83,115,84,116,84,116,84,116,85,117,85,117,85,117,85,117,85,117,85,117,87,119,89,121,89,90,122,90,122,90,122,115];function AVr(t){return t<192||t>383?t:TVr[t-192]||t}function COt(t){let e=[];for(let r=0;r<t.length;r++)e[r]=AVr(t.charCodeAt(r));return String.fromCharCode(...e)}var IVr={ational:"ate",tional:"tion",enci:"ence",anci:"ance",izer:"ize",bli:"ble",alli:"al",entli:"ent",eli:"e",ousli:"ous",ization:"ize",ation:"ate",ator:"ate",alism:"al",iveness:"ive",fulness:"ful",ousness:"ous",aliti:"al",iviti:"ive",biliti:"ble",logi:"log"},MVr={icate:"ic",ative:"",alize:"al",iciti:"ic",ical:"ic",ful:"",ness:""},RVr="[^aeiou]",Wre="[aeiouy]",ax=RVr+"[^aeiouy]*",qV=Wre+"[aeiou]*",CAe="^("+ax+")?"+qV+ax,jVr="^("+ax+")?"+qV+ax+"("+qV+")?$",Vre="^("+ax+")?"+qV+ax+qV+ax,OOt="^("+ax+")?"+Wre;function POt(t){let e,r,n,o,i,a;if(t.length<3)return t;let s=t.substring(0,1);if(s=="y"&&(t=s.toUpperCase()+t.substring(1)),n=/^(.+?)(ss|i)es$/,o=/^(.+?)([^s])s$/,n.test(t)?t=t.replace(n,"$1$2"):o.test(t)&&(t=t.replace(o,"$1$2")),n=/^(.+?)eed$/,o=/^(.+?)(ed|ing)$/,n.test(t)){let u=n.exec(t);n=new RegExp(CAe),n.test(u[1])&&(n=/.$/,t=t.replace(n,""))}else o.test(t)&&(e=o.exec(t)[1],o=new RegExp(OOt),o.test(e)&&(t=e,o=/(at|bl|iz)$/,i=new RegExp("([^aeiouylsz])\\1$"),a=new RegExp("^"+ax+Wre+"[^aeiouwxy]$"),o.test(t)?t=t+"e":i.test(t)?(n=/.$/,t=t.replace(n,"")):a.test(t)&&(t=t+"e")));if(n=/^(.+?)y$/,n.test(t)&&(e=n.exec(t)?.[1],n=new RegExp(OOt),e&&n.test(e)&&(t=e+"i")),n=/^(.+?)(ational|tional|enci|anci|izer|bli|alli|entli|eli|ousli|ization|ation|ator|alism|iveness|fulness|ousness|aliti|iviti|biliti|logi)$/,n.test(t)){let u=n.exec(t);e=u?.[1],r=u?.[2],n=new RegExp(CAe),e&&n.test(e)&&(t=e+IVr[r])}if(n=/^(.+?)(icate|ative|alize|iciti|ical|ful|ness)$/,n.test(t)){let u=n.exec(t);e=u?.[1],r=u?.[2],n=new RegExp(CAe),e&&n.test(e)&&(t=e+MVr[r])}if(n=/^(.+?)(al|ance|ence|er|ic|able|ible|ant|ement|ment|ent|ou|ism|ate|iti|ous|ive|ize)$/,o=/^(.+?)(s|t)(ion)$/,n.test(t))e=n.exec(t)?.[1],n=new RegExp(Vre),e&&n.test(e)&&(t=e);else if(o.test(t)){let u=o.exec(t);e=u?.[1]??""+u?.[2]??"",o=new RegExp(Vre),o.test(e)&&(t=e)}return n=/^(.+?)e$/,n.test(t)&&(e=n.exec(t)?.[1],n=new RegExp(Vre),o=new RegExp(jVr),i=new RegExp("^"+ax+Wre+"[^aeiouwxy]$"),e&&(n.test(e)||o.test(e)&&!i.test(e))&&(t=e)),n=/ll$/,o=new RegExp(Vre),n.test(t)&&o.test(t)&&(n=/.$/,t=t.replace(n,"")),s=="y"&&(t=s.toLowerCase()+t.substring(1)),t}function OAe(t,e){let r=`${this.language}:${t}:${e}`;return this.normalizationCache.has(r)?this.normalizationCache.get(r):this.stopWords?.includes(e)?(this.normalizationCache.set(r,""),""):(this.stemmer&&!this.stemmerSkipProperties.has(t)&&(e=this.stemmer(e)),e=COt(e),this.normalizationCache.set(r,e),e)}function NVr(t){for(;t[t.length-1]==="";)t.pop();for(;t[0]==="";)t.shift();return t}function EOt(t,e,r){if(e&&e!==this.language)throw Bt("LANGUAGE_NOT_SUPPORTED",e);if(typeof t!="string")return[t];let n;if(r&&this.tokenizeSkipProperties.has(r))n=[this.normalizeToken.bind(this,r??"")(t)];else{let i=RCt[this.language];n=t.toLowerCase().split(i).map(this.normalizeToken.bind(this,r??"")).filter(Boolean)}let o=NVr(n);return this.allowDuplicates?o:Array.from(new Set(o))}function PAe(t={}){if(!t.language)t.language="english";else if(!kV.includes(t.language))throw Bt("LANGUAGE_NOT_SUPPORTED",t.language);let e;if(t.stemming||t.stemmer&&!("stemming"in t))if(t.stemmer){if(typeof t.stemmer!="function")throw Bt("INVALID_STEMMER_FUNCTION_TYPE");e=t.stemmer}else if(t.language==="english")e=POt;else throw Bt("MISSING_STEMMER",t.language);let r;if(t.stopWords!==!1){if(r=[],Array.isArray(t.stopWords))r=t.stopWords;else if(typeof t.stopWords=="function")r=t.stopWords(r);else if(t.stopWords)throw Bt("CUSTOM_STOP_WORDS_MUST_BE_FUNCTION_OR_ARRAY");if(!Array.isArray(r))throw Bt("CUSTOM_STOP_WORDS_MUST_BE_FUNCTION_OR_ARRAY");for(let o of r)if(typeof o!="string")throw Bt("CUSTOM_STOP_WORDS_MUST_BE_FUNCTION_OR_ARRAY")}let n={tokenize:EOt,language:t.language,stemmer:e,stemmerSkipProperties:new Set(t.stemmerSkipProperties?[t.stemmerSkipProperties].flat():[]),tokenizeSkipProperties:new Set(t.tokenizeSkipProperties?[t.tokenizeSkipProperties].flat():[]),stopWords:r,allowDuplicates:!!t.allowDuplicates,normalizeToken:OAe,normalizationCache:new Map};return n.tokenize=EOt.bind(n),n.normalizeToken=OAe,n}function LVr(t){let e={formatElapsedTime:BCt,getDocumentIndexId:qCt,getDocumentProperties:Bre,validateSchema:lAe};for(let r of fAe){let n=r;if(t[n]){if(typeof t[n]!="function")throw Bt("COMPONENT_MUST_BE_FUNCTION",n)}else t[n]=e[n]}for(let r of Object.keys(t))if(!KCt.includes(r)&&!fAe.includes(r))throw Bt("UNSUPPORTED_COMPONENT",r)}function AB({schema:t,sort:e,language:r,components:n,id:o,plugins:i}){n||(n={}),o||(o=$V());let a=n.tokenizer,s=n.index,u=n.documentsStore,l=n.sorter;if(a?a.tokenize?a=a:a=PAe(a):a=PAe({language:r??"english"}),n.tokenizer&&r)throw Bt("NO_LANGUAGE_WITH_CUSTOM_TOKENIZER");let c=zCt();s||(s=vOt()),l||(l=xOt()),u||(u=HCt()),LVr(n);let{getDocumentProperties:d,getDocumentIndexId:f,validateSchema:p,formatElapsedTime:m}=n,h={data:{},caches:{},schema:t,tokenizer:a,index:s,sorter:l,documentsStore:u,internalDocumentIDStore:c,getDocumentProperties:d,getDocumentIndexId:f,validateSchema:p,beforeInsert:[],afterInsert:[],beforeRemove:[],afterRemove:[],beforeUpdate:[],afterUpdate:[],beforeSearch:[],afterSearch:[],beforeInsertMultiple:[],afterInsertMultiple:[],beforeRemoveMultiple:[],afterRemoveMultiple:[],afterUpdateMultiple:[],beforeUpdateMultiple:[],afterCreate:[],formatElapsedTime:m,id:o,plugins:i,version:FVr()};h.data={index:h.index.create(h,c,t),docs:h.documentsStore.create(h,c),sorting:h.sorter.create(h,c,t,e)};for(let g of VCt)h[g]=(h[g]??[]).concat(WCt(h,g));let b=h.afterCreate;return b&&GCt(b,h),h}function FVr(){return"{{VERSION}}"}var Kre="fulltext",EAe="hybrid",TAe="vector";var CA=Symbol("orama.insertions"),OA=Symbol("orama.removals");var TOt=globalThis.process?.emitWarning??function(e,r){console.warn(`[WARNING] [${r.code}] ${e}`)};function AAe(t){typeof t[CA]!="number"&&(queueMicrotask(()=>{t[CA]=void 0}),t[CA]=0),t[CA]>1e3?(TOt("Orama's insert operation is synchronous. Please avoid inserting a large number of document in a single operation in order not to block the main thread or, in alternative, please use insertMultiple.",{code:"ORAMA0001"}),t[CA]=-1):t[CA]>=0&&t[CA]++}function IAe(t){typeof t[OA]!="number"&&(queueMicrotask(()=>{t[OA]=void 0}),t[OA]=0),t[OA]>1e3?(TOt("Orama's remove operation is synchronous. Please avoid removing a large number of document in a single operation in order not to block the main thread, in alternative, please use updateMultiple.",{code:"ORAMA0002"}),t[OA]=-1):t[OA]>=0&&t[OA]++}function UV(t,e,r,n,o){let i=t.validateSchema(e,t.schema);if(i)throw Bt("SCHEMA_VALIDATION_FAILURE",i);return zs(t.index.beforeInsert)||zs(t.index.insert)||zs(t.index.afterInsert)?qVr(t,e,r,n,o):UVr(t,e,r,n,o)}var $Vr=new Set(["enum","enum[]"]),BVr=new Set(["string","number"]);async function qVr(t,e,r,n,o){let{index:i,docs:a}=t.data,s=t.getDocumentIndexId(e);if(typeof s!="string")throw Bt("DOCUMENT_ID_MUST_BE_STRING",typeof s);if(!t.documentsStore.store(a,s,e))throw Bt("DOCUMENT_ALREADY_EXISTS",s);let u=t.documentsStore.count(a);n||await Ny(t.beforeInsert,t,s,e);let l=t.index.getSearchableProperties(i),c=t.index.getSearchablePropertiesWithTypes(i),d=t.getDocumentProperties(e,l);for(let[f,p]of Object.entries(d)){if(typeof p>"u")continue;let m=typeof p,h=c[f];AOt(m,h,f,p)}return await zVr(t,s,l,d,u,r,e,o),n||await Ny(t.afterInsert,t,s,e),AAe(t),s}function UVr(t,e,r,n,o){let{index:i,docs:a}=t.data,s=t.getDocumentIndexId(e);if(typeof s!="string")throw Bt("DOCUMENT_ID_MUST_BE_STRING",typeof s);if(!t.documentsStore.store(a,s,e))throw Bt("DOCUMENT_ALREADY_EXISTS",s);let u=t.documentsStore.count(a);n||Ny(t.beforeInsert,t,s,e);let l=t.index.getSearchableProperties(i),c=t.index.getSearchablePropertiesWithTypes(i),d=t.getDocumentProperties(e,l);for(let[f,p]of Object.entries(d)){if(typeof p>"u")continue;let m=typeof p,h=c[f];AOt(m,h,f,p)}return HVr(t,s,l,d,u,r,e,o),n||Ny(t.afterInsert,t,s,e),AAe(t),s}function AOt(t,e,r,n){if(!(UCt(e)&&typeof n=="object"&&typeof n.lon=="number"&&typeof n.lat=="number")&&!(TO(e)&&Array.isArray(n))&&!(OB(e)&&Array.isArray(n))&&!($Vr.has(e)&&BVr.has(t))&&t!==e)throw Bt("INVALID_DOCUMENT_PROPERTY",r,e,t)}async function zVr(t,e,r,n,o,i,a,s){for(let c of r){let d=n[c];if(typeof d>"u")continue;let f=t.index.getSearchablePropertiesWithTypes(t.data.index)[c];await t.index.beforeInsert?.(t.data.index,c,e,d,f,i,t.tokenizer,o),await t.index.insert(t.index,t.data.index,c,e,d,f,i,t.tokenizer,o,s),await t.index.afterInsert?.(t.data.index,c,e,d,f,i,t.tokenizer,o)}let u=t.sorter.getSortableProperties(t.data.sorting),l=t.getDocumentProperties(a,u);for(let c of u){let d=l[c];if(typeof d>"u")continue;let f=t.sorter.getSortablePropertiesWithTypes(t.data.sorting)[c];t.sorter.insert(t.data.sorting,c,e,d,f,i)}}function HVr(t,e,r,n,o,i,a,s){for(let c of r){let d=n[c];if(typeof d>"u")continue;let f=t.index.getSearchablePropertiesWithTypes(t.data.index)[c];t.index.beforeInsert?.(t.data.index,c,e,d,f,i,t.tokenizer,o),t.index.insert(t.index,t.data.index,c,e,d,f,i,t.tokenizer,o,s),t.index.afterInsert?.(t.data.index,c,e,d,f,i,t.tokenizer,o)}let u=t.sorter.getSortableProperties(t.data.sorting),l=t.getDocumentProperties(a,u);for(let c of u){let d=l[c];if(typeof d>"u")continue;let f=t.sorter.getSortablePropertiesWithTypes(t.data.sorting)[c];t.sorter.insert(t.data.sorting,c,e,d,f,i)}}function Lj(t,e,r,n){return zs(t.index.beforeRemove)||zs(t.index.remove)||zs(t.index.afterRemove)?VVr(t,e,r,n):WVr(t,e,r,n)}async function VVr(t,e,r,n){let o=!0,{index:i,docs:a}=t.data,s=t.documentsStore.get(a,e);if(!s)return!1;let u=Zh(t.internalDocumentIDStore,mi(t.internalDocumentIDStore,e)),l=t.documentsStore.count(a);n||await Ny(t.beforeRemove,t,u);let c=t.index.getSearchableProperties(i),d=t.index.getSearchablePropertiesWithTypes(i),f=t.getDocumentProperties(s,c);for(let h of c){let b=f[h];if(typeof b>"u")continue;let g=d[h];await t.index.beforeRemove?.(t.data.index,h,u,b,g,r,t.tokenizer,l),await t.index.remove(t.index,t.data.index,h,e,b,g,r,t.tokenizer,l)||(o=!1),await t.index.afterRemove?.(t.data.index,h,u,b,g,r,t.tokenizer,l)}let p=await t.sorter.getSortableProperties(t.data.sorting),m=await t.getDocumentProperties(s,p);for(let h of p)typeof m[h]>"u"||t.sorter.remove(t.data.sorting,h,e);return n||await Ny(t.afterRemove,t,u),t.documentsStore.remove(t.data.docs,e),IAe(t),o}function WVr(t,e,r,n){let o=!0,{index:i,docs:a}=t.data,s=t.documentsStore.get(a,e);if(!s)return!1;let u=Zh(t.internalDocumentIDStore,mi(t.internalDocumentIDStore,e)),l=t.documentsStore.count(a);n||Ny(t.beforeRemove,t,u);let c=t.index.getSearchableProperties(i),d=t.index.getSearchablePropertiesWithTypes(i),f=t.getDocumentProperties(s,c);for(let h of c){let b=f[h];if(typeof b>"u")continue;let g=d[h];t.index.beforeRemove?.(t.data.index,h,u,b,g,r,t.tokenizer,l),t.index.remove(t.index,t.data.index,h,e,b,g,r,t.tokenizer,l)||(o=!1),t.index.afterRemove?.(t.data.index,h,u,b,g,r,t.tokenizer,l)}let p=t.sorter.getSortableProperties(t.data.sorting),m=t.getDocumentProperties(s,p);for(let h of p)typeof m[h]>"u"||t.sorter.remove(t.data.sorting,h,e);return n||Ny(t.afterRemove,t,u),t.documentsStore.remove(t.data.docs,e),IAe(t),o}function zV(t,e,r,n,o){return zs(t.index.beforeRemove)||zs(t.index.remove)||zs(t.index.afterRemove)||zs(t.beforeRemoveMultiple)||zs(t.afterRemoveMultiple)?KVr(t,e,r,n,o):GVr(t,e,r,n,o)}async function KVr(t,e,r,n,o){let i=0;r||(r=1e3);let a=o?[]:e.map(s=>Zh(t.internalDocumentIDStore,mi(t.internalDocumentIDStore,s)));return o||await Nj(t.beforeRemoveMultiple,t,a),await new Promise((s,u)=>{let l=0;async function c(){let d=e.slice(l*r,++l*r);if(!d.length)return s();for(let f of d)try{await Lj(t,f,n,o)&&i++}catch(p){u(p)}setTimeout(c,0)}setTimeout(c,0)}),o||await Nj(t.afterRemoveMultiple,t,a),i}function GVr(t,e,r,n,o){let i=0;r||(r=1e3);let a=o?[]:e.map(l=>Zh(t.internalDocumentIDStore,mi(t.internalDocumentIDStore,l)));o||Nj(t.beforeRemoveMultiple,t,a);let s=0;function u(){let l=e.slice(s*r,++s*r);if(l.length){for(let c of l)Lj(t,c,n,o)&&i++;setTimeout(u,0)}}return u(),o||Nj(t.afterRemoveMultiple,t,a),i}function JVr(t,e){return t[1]-e[1]}function YVr(t,e){return e[1]-t[1]}function ZVr(t="desc"){return t.toLowerCase()==="asc"?JVr:YVr}function IB(t,e,r){let n={},o=e.map(([l])=>l),i=t.documentsStore.getMultiple(t.data.docs,o),a=Object.keys(r),s=t.index.getSearchablePropertiesWithTypes(t.data.index);for(let l of a){let c;if(s[l]==="number"){let{ranges:d}=r[l],f=d.length,p=Array.from({length:f});for(let m=0;m<f;m++){let h=d[m];p[m]=[`${h.from}-${h.to}`,0]}c=Object.fromEntries(p)}n[l]={count:0,values:c??{}}}let u=i.length;for(let l=0;l<u;l++){let c=i[l];for(let d of a){let f=d.includes(".")?CB(c,d):c[d],p=s[d],m=n[d].values;switch(p){case"number":{let h=r[d].ranges;IOt(h,m)(f);break}case"number[]":{let h=new Set,b=r[d].ranges,g=IOt(b,m,h);for(let y of f)g(y);break}case"boolean":case"enum":case"string":{MOt(m,p)(f);break}case"boolean[]":case"enum[]":case"string[]":{let g=MOt(m,p==="boolean[]"?"boolean":"string",new Set);for(let y of f)g(y);break}default:throw Bt("FACET_NOT_SUPPORTED",p)}}}for(let l of a){let c=n[l];if(c.count=Object.keys(c.values).length,s[l]==="string"){let d=r[l],f=ZVr(d.sort);c.values=Object.fromEntries(Object.entries(c.values).sort(f).slice(d.offset??0,d.limit??10))}}return n}function IOt(t,e,r){return n=>{for(let o of t){let i=`${o.from}-${o.to}`;r?.has(i)||n>=o.from&&n<=o.to&&(e[i]===void 0?e[i]=1:(e[i]++,r?.add(i)))}}}function MOt(t,e,r){let n=e==="boolean"?"false":"";return o=>{let i=o?.toString()??n;r?.has(i)||(t[i]=(t[i]??0)+1,r?.add(i))}}function MB(t,e){let r=new Map,n=[];for(let o of t)r.set(o,!0);for(let o of e){let[i]=o;r.has(i)&&(n.push(o),r.delete(i))}return n}var XVr={reducer:(t,e,r,n)=>(e[n]=r,e),getInitialValue:t=>Array.from({length:t})},ROt=["string","number","boolean"];function RB(t,e,r){let n=r.properties,o=n.length,i=t.index.getSearchablePropertiesWithTypes(t.data.index);for(let g=0;g<o;g++){let y=n[g];if(typeof i[y]>"u")throw Bt("UNKNOWN_GROUP_BY_PROPERTY",y);if(!ROt.includes(i[y]))throw Bt("INVALID_GROUP_BY_PROPERTY",y,ROt.join(", "),i[y])}let a=e.map(([g])=>Zh(t.internalDocumentIDStore,g)),s=t.documentsStore.getMultiple(t.data.docs,a),u=s.length,l=r.maxResult||Number.MAX_SAFE_INTEGER,c=[],d={};for(let g=0;g<o;g++){let y=n[g],w={property:y,perValue:{}},S=new Set;for(let C=0;C<u;C++){let P=s[C],E=CB(P,y);if(typeof E>"u")continue;let A=typeof E!="boolean"?E:""+E,I=w.perValue[A]??{indexes:[],count:0};I.count>=l||(I.indexes.push(C),I.count++,w.perValue[A]=I,S.add(E))}c.push(Array.from(S)),d[y]=w}let f=jOt(c),p=f.length,m=[];for(let g=0;g<p;g++){let y=f[g],w=y.length,S={values:[],indexes:[]},C=[];for(let P=0;P<w;P++){let E=y[P],A=n[P];C.push(d[A].perValue[typeof E!="boolean"?E:""+E].indexes),S.values.push(E)}S.indexes=xB(C).sort((P,E)=>P-E),S.indexes.length!==0&&m.push(S)}let h=m.length,b=Array.from({length:h});for(let g=0;g<h;g++){let y=m[g],w=r.reduce||XVr,S=y.indexes.map(A=>({id:a[A],score:e[A][1],document:s[A]})),C=w.reducer.bind(null,y.values),P=w.getInitialValue(y.indexes.length),E=S.reduce(C,P);b[g]={values:y.values,result:E}}return b}function jOt(t,e=0){if(e+1===t.length)return t[e].map(i=>[i]);let r=t[e],n=jOt(t,e+1),o=[];for(let i of r)for(let a of n){let s=[i];Mi(s,a),o.push(s)}return o}function NOt(t,e,r){let n=jy(),o=t.beforeSearch?.length||t.afterSearch?.length;function i(){e.relevance=Object.assign(Gre,e.relevance??{});let s=Object.keys(t.data.index.vectorIndexes),u=e.facets&&Object.keys(e.facets).length>0,{limit:l=10,offset:c=0,term:d,properties:f,threshold:p=0,distinctOn:m,includeVectors:h=!1}=e,b=e.preflight===!0,{index:g,docs:y}=t.data,w=t.tokenizer.tokenize(d??"",r),S=t.caches.propertiesToSearch;if(!S){let N=t.index.getSearchablePropertiesWithTypes(g);S=t.index.getSearchableProperties(g),S=S.filter($=>N[$].startsWith("string")),t.caches.propertiesToSearch=S}if(f&&f!=="*"){for(let N of f)if(!S.includes(N))throw Bt("UNKNOWN_INDEX",N,S.join(", "));S=S.filter(N=>f.includes(N))}let C=Fj(t.tokenizer,t.index,t.documentsStore,r,e,S,w,t.documentsStore.count(y),n),P=Object.keys(e.where??{}).length>0,E=[];P&&(E=t.index.searchByWhereClause(C,g,e.where));let A=w.length;if(A||f?.length){let N=S.length;for(let $=0;$<N;$++){let k=S[$],H=C.indexMap[k];if(A!==0)for(let D=0;D<A;D++){let B=w[D],q=t.index.search(C,g,k,B);Mi(H[B],q)}else{H[""]=[];let D=t.index.search(C,g,k,"");Mi(H[""],D)}let V=Object.values(H);C.docsIntersection[k]=zre(V,e?.boost?.[k]??1,p,A);let Q=C.docsIntersection[k],G=Q.length;for(let D=0;D<G;D++){let[B,q]=Q[D],K=C.uniqueDocsIDs[B];K?C.uniqueDocsIDs[B]=K+q+.5:C.uniqueDocsIDs[B]=q}}}else w.length===0&&d?C.uniqueDocsIDs={}:C.uniqueDocsIDs=Object.fromEntries(Object.keys(t.documentsStore.getAll(t.data.docs)).map(N=>[N,0]));let I=Object.entries(C.uniqueDocsIDs).map(([N,$])=>[+N,$]);if(P&&(I=MB(E,I)),e.sortBy)if(typeof e.sortBy=="function"){let N=I.map(([H])=>H),k=t.documentsStore.getMultiple(t.data.docs,N).map((H,V)=>[I[V][0],I[V][1],H]);k.sort(e.sortBy),I=k.map(([H,V])=>[H,V])}else I=t.sorter.sortBy(t.data.sorting,I,e.sortBy).map(([N,$])=>[mi(t.internalDocumentIDStore,N),$]);else I=I.sort($Ct);let R;b||(R=m?DOt(t,I,c,l,m):Jre(t,I,c,l));let j={elapsed:{formatted:"",raw:0},hits:[],count:I.length};if(typeof R<"u"&&(j.hits=R.filter(Boolean),h||qre(j,s)),u){let N=IB(t,I,e.facets);j.facets=N}return e.groupBy&&(j.groups=RB(t,I,e.groupBy)),j.elapsed=t.formatElapsedTime(jy()-C.timeStart),j}async function a(){t.beforeSearch&&await EB(t.beforeSearch,t,e,r);let s=i();return t.afterSearch&&await PB(t.afterSearch,t,e,r,s),s}return o?a():i()}function MAe(t,e,r="english"){let n=jy(),o=t.beforeSearch?.length||t.afterSearch?.length;function i(){let{vector:s}=e;if(s&&(!("value"in s)||!("property"in s)))throw Bt("INVALID_VECTOR_INPUT",Object.keys(s).join(", "));let{limit:u=10,offset:l=0,includeVectors:c=!1}=e,d=t.data.index.vectorIndexes[s.property],f=d.size,p=d.vectors,m=e.facets&&Object.keys(e.facets).length>0,h=Object.keys(e.where??{}).length>0,{index:b,docs:g}=t.data;if(s?.value.length!==f)throw s?.property===void 0||s?.value.length===void 0?Bt("INVALID_INPUT_VECTOR","undefined",f,"undefined"):Bt("INVALID_INPUT_VECTOR",s.property,f,s.value.length);s instanceof Float32Array||(s.value=new Float32Array(s.value));let y=Hre(s.value,p,f,e.similarity).map(([N,$])=>[mi(t.internalDocumentIDStore,N),$]),w=t.caches.propertiesToSearch;if(!w){let N=t.index.getSearchablePropertiesWithTypes(b);w=t.index.getSearchableProperties(b),w=w.filter($=>N[$].startsWith("string")),t.caches.propertiesToSearch=w}let S=[],C=Fj(t.tokenizer,t.index,t.documentsStore,r,e,w,S,t.documentsStore.count(g),n),P=[];h&&(P=t.index.searchByWhereClause(C,b,e.where),y=MB(P,y));let E=[];m&&(E=IB(t,y,e.facets));let A=Array.from({length:u});for(let N=0;N<u;N++){let $=y[N+l];if(!$)break;let k=t.data.docs.docs[$[0]];if(k){c||(k[s.property]=null);let H={id:Zh(t.internalDocumentIDStore,$[0]),score:$[1],document:k};A[N]=H}}let I=[];e.groupBy&&(I=RB(t,y,e.groupBy));let j=jy()-n;return{count:y.length,hits:A.filter(Boolean),elapsed:{raw:Number(j),formatted:jj(j)},...E?{facets:E}:{},...I?{groups:I}:{}}}async function a(){t.beforeSearch&&await EB(t.beforeSearch,t,e,r);let s=i();return t.afterSearch&&await PB(t.afterSearch,t,e,r,s),s}return o?a():i()}function FOt(t,e,r){let n=jy(),o=t.beforeSearch?.length||t.afterSearch?.length;function i(){let{offset:s=0,limit:u=10,includeVectors:l=!1}=e,c=e.facets&&Object.keys(e.facets).length>0,d=QVr(t,e,r),f=e8r(t,e),{index:p,docs:m}=t.data,h=e.hybridWeights,b=r8r(d,f,e.term??"",h),g=t.tokenizer.tokenize(e.term??"",r),y=t.caches.propertiesToSearch;if(!y){let j=t.index.getSearchablePropertiesWithTypes(p);y=t.index.getSearchableProperties(p),y=y.filter(N=>j[N].startsWith("string")),t.caches.propertiesToSearch=y}if(e.properties&&e.properties!=="*"){for(let j of e.properties)if(!y.includes(j))throw Bt("UNKNOWN_INDEX",j,y.join(", "));y=y.filter(j=>e.properties.includes(j))}let w=Fj(t.tokenizer,t.index,t.documentsStore,r,e,y,g,t.documentsStore.count(m),n),S=Object.keys(e.where??{}).length>0,C=[];S&&(C=t.index.searchByWhereClause(w,p,e.where),b=MB(C,b));let P;c&&(P=IB(t,b,e.facets));let E;e.groupBy&&(E=RB(t,b,e.groupBy));let A=Jre(t,b,s,u).filter(Boolean),I=jy(),R={count:b.length,elapsed:{raw:Number(I-n),formatted:jj(I-n)},hits:A,...P?{facets:P}:{},...E?{groups:E}:{}};if(!l){let j=Object.keys(t.data.index.vectorIndexes);qre(R,j)}return R}async function a(){t.beforeSearch&&await EB(t.beforeSearch,t,e,r);let s=i();return t.afterSearch&&await PB(t.afterSearch,t,e,r,s),s}return o?a():i()}function QVr(t,e,r){let n=jy();e.relevance=Object.assign(Gre,e.relevance??{});let{term:o="",properties:i,threshold:a=0}=e,{index:s,docs:u}=t.data,l=t.tokenizer.tokenize(o,r),c=t.caches.propertiesToSearch;if(!c){let m=t.index.getSearchablePropertiesWithTypes(s);c=t.index.getSearchableProperties(s),c=c.filter(h=>m[h].startsWith("string")),t.caches.propertiesToSearch=c}if(i&&i!=="*"){let m=new Set(c),h=new Set(i);for(let b of i)if(!m.has(b))throw Bt("UNKNOWN_INDEX",b,c.join(", "));c=c.filter(b=>h.has(b))}let d=Fj(t.tokenizer,t.index,t.documentsStore,r,e,c,l,t.documentsStore.count(u),n),f=l.length;if(f||i&&i.length>0){let m=c.length;for(let h=0;h<m;h++){let b=c[h];if(f!==0)for(let C=0;C<f;C++){let P=l[C],E=t.index.search(d,s,b,P);Mi(d.indexMap[b][P],E)}else{let C=[];d.indexMap[b][""]=C;let P=t.index.search(d,s,b,"");Mi(C,P)}let g=d.indexMap[b],y=Object.values(g);d.docsIntersection[b]=zre(y,e?.boost?.[b]??1,a,f);let w=d.docsIntersection[b],S=w.length;for(let C=0;C<S;C++){let[P,E]=w[C],A=d.uniqueDocsIDs[P];d.uniqueDocsIDs[P]=A?A+E+.5:E}}}else l.length===0&&o?d.uniqueDocsIDs={}:d.uniqueDocsIDs=Object.fromEntries(Object.keys(t.documentsStore.getAll(t.data.docs)).map(m=>[m,0]));let p=Object.entries(d.uniqueDocsIDs).map(([m,h])=>[+m,h]).sort((m,h)=>h[1]-m[1]);return kOt(p)}function e8r(t,e){let r=e.vector,n=t.data.index.vectorIndexes[r?.property],o=n.size,i=n.vectors;if(r&&(!r.value||!r.property))throw Bt("INVALID_VECTOR_INPUT",Object.keys(r).join(", "));if(r.value.length!==o)throw Bt("INVALID_INPUT_VECTOR",r.property,o,r.value.length);r instanceof Float32Array||(r.value=new Float32Array(r.value));let a=Hre(r.value,i,o,e.similarity).map(([s,u])=>[mi(t.internalDocumentIDStore,s),u]);return kOt(a)}function RAe([,t]){return t}function kOt(t){let e=Math.max.apply(Math,t.map(RAe));return t.map(([r,n])=>[r,n/e])}function LOt(t,e){return t/e}function t8r(t,e){return(r,n)=>r*t+n*e}function r8r(t,e,r,n){let o=Math.max.apply(Math,t.map(RAe)),i=Math.max.apply(Math,e.map(RAe)),a=n&&n.text&&n.vector,{text:s,vector:u}=a?n:n8r(r),l=new Map,c=t.length,d=t8r(s,u);for(let p=0;p<c;p++){let[m,h]=t[p],b=LOt(h,o),g=d(b,0);l.set(m,g)}let f=e.length;for(let p=0;p<f;p++){let[m,h]=e[p],b=LOt(h,i),g=l.get(m)??0;l.set(m,g+d(0,b))}return[...l].sort((p,m)=>m[1]-p[1])}function n8r(t){return{text:.5,vector:.5}}var Gre={k:1.2,b:.75,d:.5};function Fj(t,e,r,n,o,i,a,s,u){let l={},c={};for(let d of i){let f={};for(let p of a)f[p]=[];l[d]=f,c[d]=[]}return{timeStart:u,tokenizer:t,index:e,documentsStore:r,language:n,params:o,docsCount:s,uniqueDocsIDs:{},indexMap:l,docsIntersection:c}}function kc(t,e,r){let n=e.mode??Kre;if(n===Kre)return NOt(t,e,r);if(n===TAe)return MAe(t,e);if(n===EAe)return FOt(t,e);throw Bt("INVALID_SEARCH_MODE",n)}function DOt(t,e,r,n,o){let i=t.data.docs,a=new Map,s=[],u=new Set,l=e.length,c=0;for(let d=0;d<l;d++){let f=e[d];if(typeof f>"u")continue;let[p,m]=f;if(u.has(p))continue;let h=t.documentsStore.get(i,p),b=CB(h,o);if(!(typeof b>"u"||a.has(b))&&(a.set(b,!0),c++,!(c<=r)&&(s.push({id:Zh(t.internalDocumentIDStore,p),score:m,document:h}),u.add(p),c>=r+n)))break}return s}function Jre(t,e,r,n){let o=t.data.docs,i=Array.from({length:n}),a=new Set;for(let s=r;s<n+r;s++){let u=e[s];if(typeof u>"u")break;let[l,c]=u;if(!a.has(l)){let d=t.documentsStore.get(o,l);i[s]={id:Zh(t.internalDocumentIDStore,l),score:c,document:d},a.add(l)}}return i}function Yre(t,e){t.internalDocumentIDStore.load(t,e.internalDocumentIDStore),t.data.index=t.index.load(t.internalDocumentIDStore,e.index),t.data.docs=t.documentsStore.load(t.internalDocumentIDStore,e.docs),t.data.sorting=t.sorter.load(t.internalDocumentIDStore,e.sorting),t.tokenizer.language=e.language}function jAe(t){return{internalDocumentIDStore:t.internalDocumentIDStore.save(t.internalDocumentIDStore),index:t.index.save(t.data.index),docs:t.documentsStore.save(t.data.docs),sorting:t.sorter.save(t.data.sorting),language:t.tokenizer.language}}var zNo=new Error("timeout while waiting for mutex to become available"),HNo=new Error("mutex already locked"),i8r=new Error("request for lock canceled"),a8r=function(t,e,r,n){function o(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function s(c){try{l(n.next(c))}catch(d){a(d)}}function u(c){try{l(n.throw(c))}catch(d){a(d)}}function l(c){c.done?i(c.value):o(c.value).then(s,u)}l((n=n.apply(t,e||[])).next())})},NAe=class{constructor(e,r=i8r){this._value=e,this._cancelError=r,this._queue=[],this._weightedWaiters=[]}acquire(e=1,r=0){if(e<=0)throw new Error(`invalid weight ${e}: must be positive`);return new Promise((n,o)=>{let i={resolve:n,reject:o,weight:e,priority:r},a=$Ot(this._queue,s=>r<=s.priority);a===-1&&e<=this._value?this._dispatchItem(i):this._queue.splice(a+1,0,i)})}runExclusive(e){return a8r(this,arguments,void 0,function*(r,n=1,o=0){let[i,a]=yield this.acquire(n,o);try{return yield r(i)}finally{a()}})}waitForUnlock(e=1,r=0){if(e<=0)throw new Error(`invalid weight ${e}: must be positive`);return this._couldLockImmediately(e,r)?Promise.resolve():new Promise(n=>{this._weightedWaiters[e-1]||(this._weightedWaiters[e-1]=[]),s8r(this._weightedWaiters[e-1],{resolve:n,priority:r})})}isLocked(){return this._value<=0}getValue(){return this._value}setValue(e){this._value=e,this._dispatchQueue()}release(e=1){if(e<=0)throw new Error(`invalid weight ${e}: must be positive`);this._value+=e,this._dispatchQueue()}cancel(){this._queue.forEach(e=>e.reject(this._cancelError)),this._queue=[]}_dispatchQueue(){for(this._drainUnlockWaiters();this._queue.length>0&&this._queue[0].weight<=this._value;)this._dispatchItem(this._queue.shift()),this._drainUnlockWaiters()}_dispatchItem(e){let r=this._value;this._value-=e.weight,e.resolve([r,this._newReleaser(e.weight)])}_newReleaser(e){let r=!1;return()=>{r||(r=!0,this.release(e))}}_drainUnlockWaiters(){if(this._queue.length===0)for(let e=this._value;e>0;e--){let r=this._weightedWaiters[e-1];r&&(r.forEach(n=>n.resolve()),this._weightedWaiters[e-1]=[])}else{let e=this._queue[0].priority;for(let r=this._value;r>0;r--){let n=this._weightedWaiters[r-1];if(!n)continue;let o=n.findIndex(i=>i.priority<=e);(o===-1?n:n.splice(0,o)).forEach(i=>i.resolve())}}}_couldLockImmediately(e,r){return(this._queue.length===0||this._queue[0].priority<r)&&e<=this._value}};function s8r(t,e){let r=$Ot(t,n=>e.priority<=n.priority);t.splice(r+1,0,e)}function $Ot(t,e){for(let r=t.length-1;r>=0;r--)if(e(t[r]))return r;return-1}var u8r=function(t,e,r,n){function o(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function s(c){try{l(n.next(c))}catch(d){a(d)}}function u(c){try{l(n.throw(c))}catch(d){a(d)}}function l(c){c.done?i(c.value):o(c.value).then(s,u)}l((n=n.apply(t,e||[])).next())})},Zre=class{constructor(e){this._semaphore=new NAe(1,e)}acquire(){return u8r(this,arguments,void 0,function*(e=0){let[,r]=yield this._semaphore.acquire(1,e);return r})}runExclusive(e,r=0){return this._semaphore.runExclusive(()=>e(),1,r)}isLocked(){return this._semaphore.isLocked()}waitForUnlock(e=0){return this._semaphore.waitForUnlock(1,e)}release(){this._semaphore.isLocked()&&this._semaphore.release()}cancel(){return this._semaphore.cancel()}};var XPt=F(jB()),sx=require("obsidian");tr();var FAe="copilot-index-chunk-",l8r=".json",Lne=class{constructor(e,r,n){this.app=e;this.baseDir=r;this.identifier=n}getChunkPath(e){return`${this.baseDir}/${FAe}${this.identifier}-${e}.json`}getMetadataPath(){return`${this.baseDir}/${FAe}${this.identifier}-metadata.json`}getLegacyPath(){return`${this.baseDir}/copilot-index-${this.identifier}${l8r}`}assignDocumentToPartition(e,r){let o=Array.from(e).reduce((i,a)=>(i<<5)-i+a.charCodeAt(0),0);return Math.abs(o)%r}distributeDocumentsToPartitions(e,r){let n=new Map,o={};for(let a=0;a<r;a++)n.set(a,[]);ue().debug&&console.log(`Total documents to distribute: ${e.length}`);for(let a of e){let s=this.assignDocumentToPartition(a.id,r),u=n.get(s);if(!u)throw new Error(`Invalid partition index: ${s}`);u.push(a),o[a.id]=s}let i=0;return n.forEach((a,s)=>{i+=a.length,ue().debug&&console.log(`Partition ${s+1}: ${a.length} documents`)}),ue().debug&&(console.log(`Total documents distributed: ${i}`),i!==e.length&&console.error(`Document count mismatch! Original: ${e.length}, Distributed: ${i}`)),n}async ensureDirectoryExists(e){let r=e.substring(0,e.lastIndexOf("/"));await this.app.vault.adapter.exists(r)||await this.app.vault.adapter.mkdir(r)}async saveDatabase(e){try{let r=await jAe(e),n=ue().numPartitions;if(n===1){let l=this.getLegacyPath();await this.ensureDirectoryExists(l),await this.app.vault.adapter.write(l,JSON.stringify({...r,schema:e.schema}));return}let o=r.docs?.docs,i=Array.isArray(o)?o:Object.values(o||{});if(ue().debug&&console.log(`Starting save with ${i.length??0} total documents`),!i||i.length===0){let l={numPartitions:n,vectorLength:e.schema.embedding.match(/\d+/)[0],schema:e.schema,lastModified:Date.now(),documentPartitions:{}},c=this.getMetadataPath();await this.ensureDirectoryExists(c),await this.app.vault.adapter.write(c,JSON.stringify(l)),ue().debug&&console.log("Saved empty database state");return}let a=this.distributeDocumentsToPartitions(i,n),s={numPartitions:n,vectorLength:e.schema.embedding.match(/\d+/)[0],schema:e.schema,lastModified:Date.now(),documentPartitions:Object.fromEntries(i.map(l=>[l.id,this.assignDocumentToPartition(l.id,n)]))};await this.saveMetadata(s);let u={...r,docs:{docs:{},count:0},index:{...r.index,vectorIndexes:void 0}};for(let[l,c]of a.entries()){let d={index:{vectorIndexes:{embedding:{size:r.index.vectorIndexes.embedding.size,vectors:Object.fromEntries(Object.entries(r.index.vectorIndexes.embedding.vectors).filter(([m])=>c.some(h=>h.id===m)))}}},docs:{docs:Object.fromEntries(c.map((m,h)=>[(h+1).toString(),m])),count:c.length}},f=l===0?{...u,docs:d.docs,index:{...u.index,vectorIndexes:d.index.vectorIndexes}}:d,p=this.getChunkPath(l);await this.ensureDirectoryExists(p),await this.app.vault.adapter.write(p,JSON.stringify(f)),ue().debug&&console.log(`Saved partition ${l+1}/${n}`)}ue().debug&&console.log("Saved all partitions")}catch(r){throw console.error("Error saving database:",r),new Mr(`Failed to save database: ${r.message}`)}}async loadDatabase(){try{let e=this.getLegacyPath();if(await this.app.vault.adapter.exists(e)){let u=JSON.parse(await this.app.vault.adapter.read(e));if(!u?.schema)throw new Mr("Invalid legacy database format");let l=await AB({schema:u.schema,components:{tokenizer:{stemmer:void 0,stopWords:void 0}}});return await Yre(l,u),l}let r=await this.loadMetadata(),n=await AB({schema:r.schema,components:{tokenizer:{stemmer:void 0,stopWords:void 0}}}),o=null,i=[];for(let u=0;u<r.numPartitions;u++){let l=this.getChunkPath(u);if(await this.app.vault.adapter.exists(l)){let c=JSON.parse(await this.app.vault.adapter.read(l));i.push(c),u===0&&(o=c)}}if(!o)throw new Mr("No data found in chunks");let a={},s=1;for(let u of o.internalDocumentIDStore.internalIdToId){let l=i.flatMap(c=>Object.values(c.docs.docs)).find(c=>c.id===u);l?(a[s.toString()]=l,s++):ue().debug&&console.warn(`Document ${u} not found in any chunk`)}return o.docs.docs=a,o.docs.count=Object.keys(a).length,o.index.vectorIndexes.embedding.vectors=Object.assign({},...i.map(u=>u.index?.vectorIndexes?.embedding?.vectors||{})),await Yre(n,o),n}catch(e){throw console.error("Error loading database:",e),new Mr(`Failed to load database: ${e.message}`)}}async clearStorage(){try{let e=this.getLegacyPath();await this.app.vault.adapter.exists(e)&&await this.app.vault.adapter.remove(e);let r=await this.app.vault.adapter.list(this.baseDir);for(let n of r.files)n.startsWith(`${this.baseDir}/${FAe}${this.identifier}`)&&await this.app.vault.adapter.remove(n)}catch(e){throw console.error("Error clearing storage:",e),new Mr(`Failed to clear storage: ${e.message}`)}}async exists(){let e=this.getLegacyPath();if(ue().numPartitions===1)return await this.app.vault.adapter.exists(e);let r=this.getMetadataPath();return await this.app.vault.adapter.exists(r)||await this.app.vault.adapter.exists(e)}async loadMetadata(){let e=this.getMetadataPath();if(!await this.app.vault.adapter.exists(e))throw new Mr("No existing database found");let r=JSON.parse(await this.app.vault.adapter.read(e));if(!r?.schema)throw new Mr("Invalid metadata file: missing schema");return r}async saveMetadata(e){let r=this.getMetadataPath();await this.ensureDirectoryExists(r),await this.app.vault.adapter.write(r,JSON.stringify(e))}};tr();wn();var kAe=require("obsidian");async function JPt(t){if(!t)throw new Mr("Embedding instance not found.");try{let r=await t.embedQuery("Sample text for embedding");if(!r||r.length===0)throw new Mr("Failed to get valid embedding vector length");return console.log(`Detected vector length: ${r.length} for model: ${Us.getModelName(t)}`),r.length}catch(e){throw console.error("Error getting vector length:",e),new Mr("Failed to determine embedding vector length. Please check your embedding model settings.")}}async function YPt(t){let e="",{inclusions:r,exclusions:n}=Ud(),o=t.vault.getMarkdownFiles().filter(i=>Hs(i,r,n));return await Promise.all(o.map(i=>t.vault.cachedRead(i))).then(i=>i.map(a=>e+=a+" ")),e}function Qh(t){let e=[];return e.push(...t.split(",").map(r=>decodeURIComponent(r.trim())).filter(r=>r.length>0)),e}function c8r(){return ue().qaExclusions?Qh(ue().qaExclusions):[]}function d8r(){return ue().qaInclusions?Qh(ue().qaInclusions):[]}function Ud(t){let e=t?.inclusions?Qh(t.inclusions):t?.isProject?[]:d8r(),r=t?.exclusions?Qh(t.exclusions):t?.isProject?[]:c8r();return{inclusions:e.length>0?VV(e):null,exclusions:r.length>0?VV(r):null}}function Hs(t,e,r){return!(r&&GPt(t.path,r)||e&&!GPt(t.path,e))}function VV(t){let e=[],r=[],n=[],o=[],i=/^#[^\s#]+$/,a=/^\*\.([a-zA-Z0-9.]+)$/,s=/^\[\[(.*?)\]\]$/;return t.forEach(u=>{i.test(u)?e.push(u):a.test(u)?r.push(u):s.test(u)?o.push(u):n.push(u)}),{tagPatterns:e,extensionPatterns:r,folderPatterns:n,notePatterns:o}}function WV({tagPatterns:t,extensionPatterns:e,folderPatterns:r,notePatterns:n}){return[...t??[],...e??[],...n??[],...r??[]].map(i=>encodeURIComponent(i)).join(",")}function f8r(t,e){if(e.length===0)return!1;let r=app.vault.getAbstractFileByPath(t);if(r instanceof kAe.TFile){let n=iR(r);if(e.some(o=>n.includes(IL(o))))return!0}return!1}function p8r(t,e){if(e.length===0)return!1;let r=t.toLowerCase();return e.some(n=>{let o=n.slice(1).toLowerCase();return r.endsWith(o)})}function m8r(t,e){if(e.length===0)return!1;let r=t.replace(/\\/g,"/");return e.some(n=>{let o=n.replace(/\\/g,"/").replace(/\/$/,"");return r.startsWith(o)&&(r.length===o.length||r[o.length]==="/")})}function h8r(t,e){if(e.length===0)return!1;let r=app.vault.getAbstractFileByPath(t);return!!(r instanceof kAe.TFile&&e.some(n=>n.slice(2,-2)===r.basename))}function GPt(t,e){if(!e)return!1;let{tagPatterns:r,extensionPatterns:n,folderPatterns:o,notePatterns:i}=e;return f8r(t,r??[])||p8r(t,n??[])||m8r(t,o??[])||h8r(t,i??[])}function Fne(t){let e=[];try{let r=t.vault.getConfig("userIgnoreFilters");r&&Array.isArray(r)&&r.forEach(n=>{typeof n=="string"&&e.push(n.endsWith("/")?n.slice(0,-1):n)})}catch(r){console.warn("Error getting userIgnoreFilters from Obsidian config",r)}return e}function kne(t){return`#${t}`}function KV(t){return`[[${t.basename}]]`}function ZPt(t){return`*.${t}`}var IO=class t{constructor(e){this.app=e;this.isInitialized=!1;this.isIndexLoaded=!1;this.hasUnsavedChanges=!1;this.filesWithoutEmbeddings=new Set;this.upsertMutex=new Zre;ga(async()=>{let r=ue();sx.Platform.isMobile&&r.disableIndexOnMobile?(this.isIndexLoaded=!1,this.oramaDb=void 0):sx.Platform.isMobile&&!r.disableIndexOnMobile&&!this.oramaDb&&await this.initializeDB(await Us.getInstance().getEmbeddingsAPI());let n=await this.getDbPath();this.dbPath&&n!==this.dbPath&&(ie("Path change detected, reinitializing database..."),this.dbPath=n,await this.initializeChunkedStorage(),await this.initializeDB(await Us.getInstance().getEmbeddingsAPI()),ie("Database reinitialized with new path:",n))})}async initializeChunkedStorage(){if(!this.app.vault.adapter)throw new Mr("Vault adapter not available. Please try again later.");let e=await this.getDbPath();this.chunkedStorage=new Lne(this.app,e,this.getVaultIdentifier()),this.isInitialized=!0}async initializeDB(e){try{if(this.isInitialized||(this.dbPath=await this.getDbPath(),await this.initializeChunkedStorage()),sx.Platform.isMobile&&ue().disableIndexOnMobile){this.isIndexLoaded=!1,this.oramaDb=void 0;return}if(!this.chunkedStorage)throw new Mr("Storage not initialized properly");try{if(await this.chunkedStorage.exists())return this.oramaDb=await this.chunkedStorage.loadDatabase(),ie("Loaded existing chunked Orama database from disk."),this.oramaDb}catch(n){fe("Failed to load existing database, creating new one:",n)}let r=await this.createNewDb(e);return this.oramaDb=r,r}catch(r){fe("Error initializing Orama database:",r),new sx.Notice("Failed to initialize Copilot database. Some features may be limited.");return}}async saveDB(){if(!(sx.Platform.isMobile&&ue().disableIndexOnMobile)){if(!this.oramaDb||!this.chunkedStorage)try{if(await this.initializeDB(await Us.getInstance().getEmbeddingsAPI()),!this.oramaDb||!this.chunkedStorage)throw new Mr("Orama database not found.")}catch(e){throw fe("Failed to initialize database during save:",e),new Mr("Failed to initialize and save database.")}try{await this.chunkedStorage.saveDatabase(this.oramaDb),this.hasUnsavedChanges=!1,ue().debug&&ie("Orama database saved successfully at:",this.dbPath)}catch(e){throw fe("Error saving Orama database:",e),e}}}async clearIndex(e){try{this.oramaDb||await this.initializeDB(e),await this.chunkedStorage?.clearStorage(),await new Promise(r=>setTimeout(r,100)),this.oramaDb=await this.createNewDb(e),await this.saveDB(),new sx.Notice("Local Copilot index cleared successfully."),ie("Local Copilot index cleared successfully, new instance created.")}catch(r){throw fe("Error clearing the local Copilot index:",r),new sx.Notice("An error occurred while clearing the local Copilot index."),r}}async removeDocs(e){if(!this.oramaDb)throw new Mr("Orama database not found.");try{let r=await kc(this.oramaDb,{term:e,properties:["path"]});r.hits.length>0&&(await zV(this.oramaDb,r.hits.map(n=>n.id),500),ue().debug&&ie(`Deleted document from local Copilot index: ${e}`)),this.markUnsavedChanges()}catch(r){fe("Error deleting document from local Copilotindex:",r)}}getDb(){return this.oramaDb||console.warn("Database not initialized. Some features may be limited."),this.oramaDb}async getIsIndexLoaded(){return this.isIndexLoaded}async waitForInitialization(){await this.initializationPromise}onunload(){this.hasUnsavedChanges&&this.saveDB()}getCurrentDbPath(){return this.dbPath}async getDbPath(){let e=this.app.vault.getRoot().path,r;if(ue().enableIndexSync)r=this.app.vault.configDir;else{let n=e==="/"?"":e;r=`${n===""||n.startsWith("/")?"":"/"}${n}/.copilot-index`,await this.app.vault.adapter.exists(r)||(await this.app.vault.adapter.mkdir(r),ie("Created directory:",r))}return r}getVaultIdentifier(){let e=this.app.vault.getName();return(0,XPt.MD5)(e).toString()}markUnsavedChanges(){this.hasUnsavedChanges=!0}async createNewDb(e){if(!e)throw new Mr("Embedding instance not found.");let r=await JPt(e);if(!r||r===0)throw new Mr("Invalid vector length detected. Please check if your embedding model is working.");let n=this.createDynamicSchema(r),o=await AB({schema:n,components:{tokenizer:{stemmer:void 0,stopWords:void 0}}});return ie(`Created new Orama database for ${this.dbPath}. Embedding model: ${Us.getModelName(e)} with vector length ${r}.`),this.isIndexLoaded=!0,o}static async getDocsByPath(e,r){if(!e)throw new Error("DB not initialized");return r?(await kc(e,{term:r,properties:["path"],exact:!0,includeVectors:!0})).hits:void 0}static async getDocsByEmbedding(e,r,n){return(await kc(e,{mode:"vector",vector:{value:r,property:"embedding"},limit:n.limit,similarity:n.similarity,includeVectors:!0})).hits}static async getLatestFileMtime(e){if(!e)throw new Error("DB not initialized");try{let r=await kc(e,{term:"",limit:1,sortBy:{property:"mtime",order:"DESC"}});return r.hits.length>0?r.hits[0].document.mtime:0}catch(r){return fe("Error getting latest file mtime from VectorDB:",r),0}}createDynamicSchema(e){return{id:"string",title:"string",path:"string",content:"string",embedding:`vector[${e}]`,embeddingModel:"string",created_at:"number",ctime:"number",mtime:"number",tags:"string[]",extension:"string"}}async upsert(e){if(!this.oramaDb)throw new Error("DB not initialized");let r=this.oramaDb;return await this.upsertMutex.runExclusive(async()=>{try{let n=this.chunkedStorage?.assignDocumentToPartition(e.id,ue().numPartitions),o=await kc(r,{term:e.id,properties:["id"],limit:1});o.hits.length>0&&await Lj(r,o.hits[0].id);try{return await UV(r,e),ie(`${o.hits.length>0?"Updated":"Inserted"} document ${e.id} in partition ${n}`),this.markUnsavedChanges(),e}catch(i){if(fe(`Failed to ${o.hits.length>0?"update":"insert"} document ${e.id}:`,i),o.hits.length>0)try{await UV(r,o.hits[0].document)}catch(a){fe("Failed to restore previous document version:",a)}return}}catch(n){fe(`Error upserting document ${e.id}:`,n);return}})}async getLatestFileMtime(){if(!this.oramaDb)throw new Error("DB not initialized");try{let e=await kc(this.oramaDb,{term:"",limit:1,sortBy:{property:"mtime",order:"DESC"}});return e.hits.length>0?e.hits[0].document.mtime:0}catch(e){return fe("Error getting latest file mtime from VectorDB:",e),0}}async checkAndHandleEmbeddingModelChange(e){if(!this.oramaDb){ie("Embedding model change detected. Orama database not found. Initializing new database...");try{return await this.initializeDB(e),!0}catch(o){throw fe("Failed to initialize database:",o),new Mr("Failed to initialize Orama database. Please check your embedding model settings.")}}let r=await kc(this.oramaDb,{term:"",limit:1}),n;if(r.hits.length>0){let o=r.hits[0];typeof o=="object"&&o!==null&&"document"in o&&(n=o.document.embeddingModel)}if(n){let o=Us.getModelName(e);if(!f4e(n,o))return new sx.Notice("New embedding model detected. Rebuilding Copilot index from scratch."),ie("Detected change in embedding model. Rebuilding Copilot index from scratch."),this.oramaDb=await this.createNewDb(e),await this.saveDB(),!0}else ie("No previous embedding model found in the database.");return!1}static async getAllDocuments(e){return(await kc(e,{term:"",limit:1e5,includeVectors:!0})).hits.map(n=>n.document)}async garbageCollect(){if(!this.oramaDb){ie("Orama database not found during garbage collection. Attempting to initialize...");try{let e=await Us.getInstance().getEmbeddingsAPI();if(!e)throw new Mr("No embedding model available.");if(await this.initializeDB(e),!this.oramaDb)throw new Mr("Failed to initialize database after attempt.")}catch(e){throw fe("Failed to initialize database during garbage collection:",e),new Mr("Failed to initialize database. Please check your embedding model settings.")}}try{let e=this.app.vault.getMarkdownFiles(),r=new Set(e.map(i=>i.path)),o=(await t.getAllDocuments(this.oramaDb)).filter(i=>!r.has(i.path));return o.length===0?0:(ie("Copilot index: Docs to remove during garbage collection:",Array.from(new Set(o.map(i=>i.path))).join(", ")),o.length===1?await Lj(this.oramaDb,o[0].id):await zV(this.oramaDb,o.map(i=>i.id),500),await this.saveDB(),o.length)}catch(e){throw fe("Error garbage collecting the Copilot index:",e),new Mr("Failed to garbage collect the Copilot index.")}}async getIndexedFiles(){if(!this.oramaDb)throw new Mr("Orama database not found.");try{let e=await t.getAllDocuments(this.oramaDb),r=new Set;return e.forEach(n=>{r.add(n.path)}),Array.from(r).sort()}catch(e){throw fe("Error getting indexed files:",e),new Mr("Failed to retrieve indexed files.")}}async isIndexEmpty(){if(!this.oramaDb)return!0;try{return(await kc(this.oramaDb,{term:"",limit:1})).hits.length===0}catch(e){throw fe("Error checking if database is empty:",e),new Mr("Failed to check if database is empty.")}}async hasIndex(e){if(!this.oramaDb)return!1;let r=await t.getDocsByPath(this.oramaDb,e);return r!==void 0&&r.length>0}async hasEmbeddings(e){if(!this.oramaDb)return!1;let r=await t.getDocsByPath(this.oramaDb,e);return!r||r.length===0?!1:r.every(n=>n?.document?.embedding&&Array.isArray(n.document.embedding)&&n.document.embedding.length>0)}async getDocsJsonByPaths(e){if(!this.oramaDb)throw new Mr("Orama database not found.");let r={};for(let n of e){let o=await t.getDocsByPath(this.oramaDb,n);o&&o.length>0&&(r[n]=o.map(i=>({id:i.document.id,title:i.document.title,path:i.document.path,content:i.document.content,metadata:i.document.metadata,embedding:i.document.embedding,embeddingModel:i.document.embeddingModel,tags:i.document.tags,extension:i.document.extension,nchars:i.document.nchars})))}return r}markFileMissingEmbeddings(e){this.filesWithoutEmbeddings.add(e)}clearFilesMissingEmbeddings(){this.filesWithoutEmbeddings.clear()}getFilesMissingEmbeddings(){return Array.from(this.filesWithoutEmbeddings)}isFileMissingEmbeddings(e){return this.filesWithoutEmbeddings.has(e)}async checkIndexIntegrity(){if(!this.oramaDb)throw new Mr("Orama database not found.");try{let e=await this.getIndexedFiles();for(let n of e)await this.hasEmbeddings(n)||this.markFileMissingEmbeddings(n);let r=this.getFilesMissingEmbeddings();r.length>0?ie("Files missing embeddings after integrity check:",r.join(", ")):ie("Index integrity check completed. All documents have embeddings.")}catch(e){throw fe("Error checking index integrity:",e),new Mr("Failed to check index integrity.")}}};xd();tr();var NB=require("obsidian");var g8r=5e3,$ne=class{constructor(e,r,n){this.app=e;this.indexOps=r;this.dbOps=n;this.debounceTimer=null;this.lastActiveFile=null;this.lastActiveFileMtime=null;this.handleActiveLeafChange=async e=>{if(NB.Platform.isMobile&&ue().disableIndexOnMobile||Sh()!=="copilot_plus")return;let n=this.lastActiveFile,o=this.lastActiveFileMtime,i=e?.view;if(this.lastActiveFile=i instanceof NB.MarkdownView?i.file:null,this.lastActiveFileMtime=this.lastActiveFile?.stat?.mtime??null,!(!n||n===this.lastActiveFile)&&!(!n?.stat?.mtime||o===null)&&n.extension==="md"){let{inclusions:a,exclusions:s}=Ud(),u=Hs(n,a,s),l=o!==null&&n.stat.mtime>o;u&&l&&this.debouncedReindexFile(n)}};this.debouncedReindexFile=e=>{this.debounceTimer!==null&&window.clearTimeout(this.debounceTimer),this.debounceTimer=window.setTimeout(()=>{ue().debug&&console.log("Copilot Plus: Triggering reindex for file ",e.path),this.indexOps.reindexFile(e),this.debounceTimer=null},g8r)};this.handleFileDelete=async e=>{e instanceof NB.TFile&&await this.dbOps.removeDocs(e.path)};this.initializeEventListeners()}initializeEventListeners(){ue().debug&&console.log("Copilot Plus: Initializing event listeners"),this.app.workspace.on("active-leaf-change",this.handleActiveLeafChange),this.app.vault.on("delete",this.handleFileDelete)}cleanup(){this.debounceTimer!==null&&window.clearTimeout(this.debounceTimer),this.app.workspace.off("active-leaf-change",this.handleActiveLeafChange),this.app.vault.off("delete",this.handleFileDelete)}unload(){this.debounceTimer!==null&&window.clearTimeout(this.debounceTimer),this.lastActiveFile=null,this.lastActiveFileMtime=null,this.app.workspace.off("active-leaf-change",this.handleActiveLeafChange),this.app.vault.off("delete",this.handleFileDelete)}};kr();Ko();var GV=class{constructor(e){this.lastRequestTime=0;this.requestsPerMin=e}setRequestsPerMin(e){this.requestsPerMin=e}getRequestsPerMin(){return this.requestsPerMin}async wait(){let r=Date.now()-this.lastRequestTime,n=Math.max(0,6e4/this.requestsPerMin-r);n>0&&await new Promise(o=>setTimeout(o,n)),this.lastRequestTime=Date.now()}};tr();wn();var eEt=F(jB());QPt();vf();var Bne=class extends vn{constructor(){super(...arguments),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","documents","transformers"]})}invoke(e,r){return this.transformDocuments(e)}};LEe();var $Ae=class extends Bne{constructor(e){if(super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","document_transformers","text_splitters"]}),Object.defineProperty(this,"chunkSize",{enumerable:!0,configurable:!0,writable:!0,value:1e3}),Object.defineProperty(this,"chunkOverlap",{enumerable:!0,configurable:!0,writable:!0,value:200}),Object.defineProperty(this,"keepSeparator",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lengthFunction",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.chunkSize=e?.chunkSize??this.chunkSize,this.chunkOverlap=e?.chunkOverlap??this.chunkOverlap,this.keepSeparator=e?.keepSeparator??this.keepSeparator,this.lengthFunction=e?.lengthFunction??(r=>r.length),this.chunkOverlap>=this.chunkSize)throw new Error("Cannot have chunkOverlap >= chunkSize")}async transformDocuments(e,r={}){return this.splitDocuments(e,r)}splitOnSeparator(e,r){let n;if(r)if(this.keepSeparator){let o=r.replace(/[/\-\\^$*+?.()|[\]{}]/g,"\\$&");n=e.split(new RegExp(`(?=${o})`))}else n=e.split(r);else n=e.split("");return n.filter(o=>o!=="")}async createDocuments(e,r=[],n={}){let o=r.length>0?r:[...Array(e.length)].map(()=>({})),{chunkHeader:i="",chunkOverlapHeader:a="(cont'd) ",appendChunkOverlapHeader:s=!1}=n,u=new Array;for(let l=0;l<e.length;l+=1){let c=e[l],d=1,f=null,p=-1;for(let m of await this.splitText(c)){let h=i,b=c.indexOf(m,p+1);if(f===null){let S=this.numberOfNewLines(c,0,b);d+=S}else{let S=p+await this.lengthFunction(f);if(S<b){let C=this.numberOfNewLines(c,S,b);d+=C}else if(S>b){let C=this.numberOfNewLines(c,b,S);d-=C}s&&(h+=a)}let g=this.numberOfNewLines(m),y=o[l].loc&&typeof o[l].loc=="object"?{...o[l].loc}:{};y.lines={from:d,to:d+g};let w={...o[l],loc:y};h+=m,u.push(new MO({pageContent:h,metadata:w})),d+=g,f=m,p=b}}return u}numberOfNewLines(e,r,n){return(e.slice(r,n).match(/\n/g)||[]).length}async splitDocuments(e,r={}){let n=e.filter(a=>a.pageContent!==void 0),o=n.map(a=>a.pageContent),i=n.map(a=>a.metadata);return this.createDocuments(o,i,r)}joinDocs(e,r){let n=e.join(r).trim();return n===""?null:n}async mergeSplits(e,r){let n=[],o=[],i=0;for(let s of e){let u=await this.lengthFunction(s);if(i+u+o.length*r.length>this.chunkSize&&(i>this.chunkSize&&console.warn(`Created a chunk of size ${i}, +
which is longer than the specified ${this.chunkSize}`),o.length>0)){let l=this.joinDocs(o,r);for(l!==null&&n.push(l);i>this.chunkOverlap||i+u+o.length*r.length>this.chunkSize&&i>0;)i-=await this.lengthFunction(o[0]),o.shift()}o.push(s),i+=u}let a=this.joinDocs(o,r);return a!==null&&n.push(a),n}};var qne=class t extends $Ae{static lc_name(){return"RecursiveCharacterTextSplitter"}constructor(e){super(e),Object.defineProperty(this,"separators",{enumerable:!0,configurable:!0,writable:!0,value:[`

`,`
`," ",""]}),this.separators=e?.separators??this.separators,this.keepSeparator=e?.keepSeparator??!0}async _splitText(e,r){let n=[],o=r[r.length-1],i;for(let l=0;l<r.length;l+=1){let c=r[l];if(c===""){o=c;break}if(e.includes(c)){o=c,i=r.slice(l+1);break}}let a=this.splitOnSeparator(e,o),s=[],u=this.keepSeparator?"":o;for(let l of a)if(await this.lengthFunction(l)<this.chunkSize)s.push(l);else{if(s.length){let c=await this.mergeSplits(s,u);n.push(...c),s=[]}if(!i)n.push(l);else{let c=await this._splitText(l,i);n.push(...c)}}if(s.length){let l=await this.mergeSplits(s,u);n.push(...l)}return n}async splitText(e){return this._splitText(e,this.separators)}static fromLanguage(e,r){return new t({...r,separators:t.getSeparatorsForLanguage(e)})}static getSeparatorsForLanguage(e){if(e==="cpp")return[`
class `,`
void `,`
int `,`
float `,`
double `,`
if `,`
for `,`
while `,`
switch `,`
case `,`

`,`
`," ",""];if(e==="go")return[`
func `,`
var `,`
const `,`
type `,`
if `,`
for `,`
switch `,`
case `,`

`,`
`," ",""];if(e==="java")return[`
class `,`
public `,`
protected `,`
private `,`
static `,`
if `,`
for `,`
while `,`
switch `,`
case `,`

`,`
`," ",""];if(e==="js")return[`
function `,`
const `,`
let `,`
var `,`
class `,`
if `,`
for `,`
while `,`
switch `,`
case `,`
default `,`

`,`
`," ",""];if(e==="php")return[`
function `,`
class `,`
if `,`
foreach `,`
while `,`
do `,`
switch `,`
case `,`

`,`
`," ",""];if(e==="proto")return[`
message `,`
service `,`
enum `,`
option `,`
import `,`
syntax `,`

`,`
`," ",""];if(e==="python")return[`
class `,`
def `,`
	def `,`

`,`
`," ",""];if(e==="rst")return[`
===
`,`
---
`,`
***
`,`
.. `,`

`,`
`," ",""];if(e==="ruby")return[`
def `,`
class `,`
if `,`
unless `,`
while `,`
for `,`
do `,`
begin `,`
rescue `,`

`,`
`," ",""];if(e==="rust")return[`
fn `,`
const `,`
let `,`
if `,`
while `,`
for `,`
loop `,`
match `,`
const `,`

`,`
`," ",""];if(e==="scala")return[`
class `,`
object `,`
def `,`
val `,`
var `,`
if `,`
for `,`
while `,`
match `,`
case `,`

`,`
`," ",""];if(e==="swift")return[`
func `,`
class `,`
struct `,`
enum `,`
if `,`
for `,`
while `,`
do `,`
switch `,`
case `,`

`,`
`," ",""];if(e==="markdown")return[`
## `,`
### `,`
#### `,`
##### `,`
###### `,"```\n\n",`

***

`,`

---

`,`

___

`,`

`,`
`," ",""];if(e==="latex")return[`
\\chapter{`,`
\\section{`,`
\\subsection{`,`
\\subsubsection{`,`
\\begin{enumerate}`,`
\\begin{itemize}`,`
\\begin{description}`,`
\\begin{list}`,`
\\begin{quote}`,`
\\begin{quotation}`,`
\\begin{verse}`,`
\\begin{verbatim}`,`
\\begin{align}`,"$$","$",`

`,`
`," ",""];if(e==="html")return["<body>","<div>","<p>","<br>","<li>","<h1>","<h2>","<h3>","<h4>","<h5>","<h6>","<span>","<table>","<tr>","<td>","<th>","<ul>","<ol>","<header>","<footer>","<nav>","<head>","<style>","<script>","<meta>","<title>"," ",""];if(e==="sol")return[`
pragma `,`
using `,`
contract `,`
interface `,`
library `,`
constructor `,`
type `,`
function `,`
event `,`
modifier `,`
error `,`
struct `,`
enum `,`
if `,`
for `,`
while `,`
do while `,`
assembly `,`

`,`
`," ",""];throw new Error(`Language ${e} is not supported.`)}};var ux=require("obsidian");var Une=class{constructor(e,r,n){this.app=e;this.dbOps=r;this.embeddingsManager=n;this.state={isIndexingPaused:!1,isIndexingCancelled:!1,indexedCount:0,totalFilesToIndex:0,processedFiles:new Set,currentIndexingNotice:null,indexNoticeMessage:null};let o=ue();this.rateLimiter=new GV(o.embeddingRequestsPerMin),this.embeddingBatchSize=o.embeddingBatchSize,this.checkpointInterval=8*this.embeddingBatchSize,ga(async()=>{let i=ue();this.rateLimiter=new GV(i.embeddingRequestsPerMin),this.embeddingBatchSize=i.embeddingBatchSize,this.checkpointInterval=8*this.embeddingBatchSize})}async indexVaultToVectorStore(e){let r=[];try{let n=await this.embeddingsManager.getEmbeddingsAPI();if(!n)return console.error("Embedding instance not found."),0;await this.dbOps.checkAndHandleEmbeddingModelChange(n)&&(e=!0),e?(await this.dbOps.clearIndex(n),this.dbOps.clearFilesMissingEmbeddings()):await this.dbOps.garbageCollect();let i=await this.getFilesToIndex(e);if(i.length===0)return new ux.Notice("Copilot vault index is up-to-date."),0;this.initializeIndexingState(i.length),this.createIndexingNotice(),this.dbOps.clearFilesMissingEmbeddings();let a=await this.prepareAllChunks(i);if(a.length===0)return new ux.Notice("No valid content to index."),0;for(let s=0;s<a.length&&!this.state.isIndexingCancelled;s+=this.embeddingBatchSize){await this.handlePause();let u=a.slice(s,s+this.embeddingBatchSize);try{await this.rateLimiter.wait();let l=await n.embedDocuments(u.map(f=>f.content));if(!l||l.length!==u.length)throw new Error(`Embedding model returned ${l?.length??0} embeddings for ${u.length} documents`);for(let f=0;f<u.length;f++){let p=u[f],m=l[f];if(!m||!Array.isArray(m)||m.length===0){fe(`Invalid embedding for document ${p.fileInfo.path}: ${m}`),this.dbOps.markFileMissingEmbeddings(p.fileInfo.path);continue}try{await this.dbOps.upsert({...p.fileInfo,id:this.getDocHash(p.content),content:p.content,embedding:m,created_at:Date.now(),nchars:p.content.length}),this.state.processedFiles.add(p.fileInfo.path)}catch(h){this.handleError(h,{filePath:p.fileInfo.path,errors:r}),this.dbOps.markFileMissingEmbeddings(p.fileInfo.path);continue}}this.state.indexedCount=this.state.processedFiles.size,this.updateIndexingNoticeMessage();let c=Math.floor((this.state.indexedCount-u.length)/this.checkpointInterval);Math.floor(this.state.indexedCount/this.checkpointInterval)>c&&(await this.dbOps.saveDB(),console.log("Copilot index checkpoint save completed."))}catch(l){if(this.handleError(l,{filePath:u?.[0]?.fileInfo?.path,errors:r,batch:u}),this.isRateLimitError(l))break}}return this.finalizeIndexing(r),setTimeout(()=>{this.dbOps.saveDB().then(()=>{ie("Copilot index final save completed."),this.dbOps.checkIndexIntegrity().catch(s=>{fe("Background integrity check failed:",s)})}).catch(s=>{fe("Background save failed:",s)})},100),this.state.indexedCount}catch(n){return this.handleError(n),0}}async prepareAllChunks(e){let r=await this.embeddingsManager.getEmbeddingsAPI();if(!r)return console.error("Embedding instance not found."),[];let n=Us.getModelName(r),o=qne.fromLanguage("markdown",{chunkSize:v4e}),i=[];for(let a of e){let s=await this.app.vault.cachedRead(a);if(!s?.trim())continue;let u=this.app.metadataCache.getFileCache(a),l={title:a.basename,path:a.path,embeddingModel:n,ctime:a.stat.ctime,mtime:a.stat.mtime,tags:u?.tags?.map(d=>d.tag)??[],extension:a.extension,metadata:{...u?.frontmatter??{},created:Nl(new Date(a.stat.ctime)).display,modified:Nl(new Date(a.stat.mtime)).display}};(await o.createDocuments([s],[],{chunkHeader:`

NOTE TITLE: [[${l.title}]]

METADATA:${JSON.stringify(l.metadata)}

NOTE BLOCK CONTENT:

`,appendChunkOverlapHeader:!0})).forEach(d=>{d.pageContent.trim()&&i.push({content:d.pageContent,fileInfo:l})})}return i}getDocHash(e){return(0,eEt.MD5)(e).toString()}async getFilesToIndex(e){let{inclusions:r,exclusions:n}=Ud(),o=this.app.vault.getMarkdownFiles();if(e)return o.filter(c=>Hs(c,r,n));let i=new Set(await this.dbOps.getIndexedFiles()),a=await this.dbOps.getLatestFileMtime(),s=new Set(this.dbOps.getFilesMissingEmbeddings()),u=new Set,l=new Set;for(let c of o){if(!Hs(c,r,n))continue;let d=await this.app.vault.cachedRead(c);if(!d||d.trim().length===0){l.add(c.path);continue}let f=i.has(c.path),p=s.has(c.path);(!f||p||c.stat.mtime>a)&&u.add(c)}return ie([`Files to index: ${u.size}`,`Previously indexed: ${i.size}`,`Empty files skipped: ${l.size}`,`Files missing embeddings: ${s.size}`].join(`
`)),Array.from(u)}initializeIndexingState(e){this.state={isIndexingPaused:!1,isIndexingCancelled:!1,indexedCount:0,totalFilesToIndex:e,processedFiles:new Set,currentIndexingNotice:null,indexNoticeMessage:null}}createIndexingNotice(){let e=document.createDocumentFragment(),r=e.createEl("div",{cls:"copilot-notice-container"});this.state.indexNoticeMessage=r.createEl("div",{cls:"copilot-notice-message"}),this.updateIndexingNoticeMessage();let n=r.createEl("div",{cls:"copilot-notice-buttons"}),o=n.createEl("button");o.textContent="Pause",o.addEventListener("click",a=>{a.stopPropagation(),a.preventDefault(),this.state.isIndexingPaused?(this.resumeIndexing(),o.textContent="Pause"):(this.pauseIndexing(),o.textContent="Resume")});let i=n.createEl("button");return i.textContent="Stop",i.style.marginLeft="8px",i.addEventListener("click",a=>{a.stopPropagation(),a.preventDefault(),this.cancelIndexing()}),e.appendChild(this.state.indexNoticeMessage),e.appendChild(n),this.state.currentIndexingNotice=new ux.Notice(e,0),this.state.currentIndexingNotice}async handlePause(){if(this.state.isIndexingPaused){for(;this.state.isIndexingPaused&&!this.state.isIndexingCancelled;)await new Promise(e=>setTimeout(e,100));if(!this.state.isIndexingCancelled){let e=await this.getFilesToIndex();if(e.length===0){console.log("No files to index after filter change, stopping indexing"),this.cancelIndexing(),new ux.Notice("No files to index with current filters");return}this.state.totalFilesToIndex=e.length,console.log("Total files to index:",this.state.totalFilesToIndex),console.log("Files to index:",e),this.updateIndexingNoticeMessage()}}}pauseIndexing(){this.state.isIndexingPaused=!0}resumeIndexing(){this.state.isIndexingPaused=!1}updateIndexingNoticeMessage(){if(this.state.indexNoticeMessage){let e=this.state.isIndexingPaused?" (Paused)":"",r=["Copilot is indexing your vault...",`${this.state.indexedCount}/${this.state.totalFilesToIndex} files processed${e}`],n=ue(),o=Qh(n.qaInclusions);o.length>0&&r.push(`Inclusions: ${o.join(", ")}`);let a=[...Fne(this.app),...Qh(n.qaExclusions)];a.length>0&&r.push(`Exclusions: ${a.join(", ")}`),this.state.indexNoticeMessage.textContent=r.join(`
`)}}isStringLengthError(e){if(!e)return!1;if(e instanceof RangeError&&e.message.toLowerCase().includes("string length"))return!0;let n=(e.message||e.toString()).toLowerCase();return n.includes("string length")||n.includes("rangeerror")}handleError(e,r){let n=r?.filePath;if(n?(r.batch?console.error("Batch processing error:",{error:e,batchSize:r.batch.length||0,firstChunk:r.batch[0]?{path:r.batch[0].fileInfo?.path,contentLength:r.batch[0].content?.length,hasFileInfo:!!r.batch[0].fileInfo}:"No chunks in batch",errorType:e?.constructor?.name,errorMessage:e?.message}):console.error(`Error indexing file ${n}:`,e),r.errors?.push(n)):console.error("Fatal error during indexing:",e),this.state.currentIndexingNotice&&this.state.currentIndexingNotice.hide(),this.isStringLengthError(e)){new ux.Notice("Vault is too large for 1 partition, please increase the number of partitions in your Copilot QA settings!",1e4);return}if(this.isRateLimitError(e))return;let o=n?`Error indexing file ${n}. Check console for details.`:"Fatal error during indexing. Check console for details.";new ux.Notice(o)}isRateLimitError(e){return e?.message?.includes?.("rate limit")||!1}finalizeIndexing(e){if(this.state.currentIndexingNotice&&this.state.currentIndexingNotice.hide(),this.state.isIndexingCancelled){new ux.Notice("Indexing cancelled");return}e.length>0?new ux.Notice(`Indexing completed with ${e.length} errors. Check console for details.`):new ux.Notice("Indexing completed successfully!")}async reindexFile(e){try{let r=await this.embeddingsManager.getEmbeddingsAPI();if(!r)return;if(await this.dbOps.removeDocs(e.path),await this.dbOps.checkAndHandleEmbeddingModelChange(r)){await this.indexVaultToVectorStore(!0);return}let o=await this.prepareAllChunks([e]);if(o.length===0)return;let i=await r.embedDocuments(o.map(a=>a.content));for(let a=0;a<o.length;a++){let s=o[a];await this.dbOps.upsert({...s.fileInfo,id:this.getDocHash(s.content),content:s.content,embedding:i[a],created_at:Date.now(),nchars:s.content.length})}this.dbOps.markUnsavedChanges(),ue().debug&&console.log(`Reindexed file: ${e.path}`)}catch(r){this.handleError(r,{filePath:e.path})}}async cancelIndexing(){console.log("Indexing cancelled by user"),this.state.isIndexingCancelled=!0,await new Promise(e=>setTimeout(e,100)),this.state.currentIndexingNotice&&this.state.currentIndexingNotice.hide()}};var qi=class t{constructor(){this.embeddingsManager=Us.getInstance(),this.dbOps=new IO(app),this.indexOps=new Une(app,this.dbOps,this.embeddingsManager),this.eventHandler=new $ne(app,this.indexOps,this.dbOps),this.initializationPromise=this.initialize(),this.setupSettingsSubscription()}static getInstance(){return t.instance||(t.instance=new t),t.instance}setupSettingsSubscription(){this.lastKnownSettings={...ue()};let e=async()=>{let r=ue(),n=this.lastKnownSettings;if(this.lastKnownSettings={...r},r.enableIndexSync!==n?.enableIndexSync){let o=await this.dbOps.getDbPath();this.dbOps.getCurrentDbPath()!==o&&await this.dbOps.initializeDB(await this.embeddingsManager.getEmbeddingsAPI())}};ga(()=>{this.initializationPromise=e()})}async initialize(){try{let e=3;for(;e>0;)try{await this.dbOps.initializeDB(await this.embeddingsManager.getEmbeddingsAPI());break}catch(r){if(r instanceof Mr&&r.message.includes("Vault adapter not available")&&(e--,e>0)){await new Promise(n=>setTimeout(n,100));continue}new JV.Notice("Failed to initialize vector store. Please make sure you have a valid API key for your embedding model and restart the plugin."),console.error("Failed to initialize vector store:",r);break}}catch(e){console.error("Failed to initialize vector store:",e)}}async waitForInitialization(){await this.initializationPromise}async indexVaultToVectorStore(e){return await this.waitForInitialization(),JV.Platform.isMobile&&ue().disableIndexOnMobile?(new JV.Notice("Indexing is disabled on mobile devices"),0):this.indexOps.indexVaultToVectorStore(e)}async clearIndex(){await this.waitForInitialization(),await this.dbOps.clearIndex(await this.embeddingsManager.getEmbeddingsAPI())}async garbageCollectVectorStore(){return await this.waitForInitialization(),this.dbOps.garbageCollect()}async getIndexedFiles(){return await this.waitForInitialization(),this.dbOps.getIndexedFiles()}async isIndexEmpty(){return await this.waitForInitialization(),this.dbOps.isIndexEmpty()}async hasIndex(e){return await this.waitForInitialization(),this.dbOps.hasIndex(e)}onunload(){this.eventHandler.cleanup(),this.dbOps.onunload()}async getDbOps(){return await this.waitForInitialization(),this.dbOps}async getDb(){await this.waitForInitialization();let e=this.dbOps.getDb();if(!e)throw new Error("Database is not loaded. Please restart the plugin.");return e}async reindexFile(e){await this.waitForInitialization(),await this.indexOps.reindexFile(e)}};tr();var BAe="copilot-plus-flash",y8r=BAe+"|"+"copilot-plus",qAe="copilot-plus-small",UAe=qAe+"|"+"copilot-plus";function xye(t){return t.split("|")[1]==="copilot-plus"}function DB(){return Tn().isPlusUser}async function zne(){return ue().plusLicenseKey?(await Ii.getInstance().validateLicenseKey()).isValid:(HAe(),!1)}function tEt(){let t=y8r,e=UAe,r=ue().embeddingModelKey;J4e(t),dR("copilot_plus"),_E({defaultModelKey:t,embeddingModelKey:e,defaultChainType:"copilot_plus"}),r!==e&&qi.getInstance().indexVaultToVectorStore()}function zAe(t){return`https://www.obsidiancopilot.com?utm_source=obsidian&utm_medium=${t}`}function LR(t){window.open(zAe(t),"_blank")}function rEt(){dt("isPlusUser",!0)}function HAe(){let t=ue().isPlusUser;dt("isPlusUser",!1),t&&new WJ(app).open()}tr();var nEt=F(mp()),oEt=require("obsidian"),Ii=class t{constructor(){this.pluginVersion="Unknown"}static getInstance(){return t.instance||(t.instance=new t),t.instance}checkLicenseKey(){if(!ue().plusLicenseKey)throw new oEt.Notice("Copilot Plus license key not found. Please enter your license key in the settings."),new Error("License key not initialized")}setPluginVersion(e){this.pluginVersion=e}async makeRequest(e,r,n="POST",o=!1,i=!1){i||this.checkLicenseKey(),r.user_id=ue().userId;let a=new URL(`${wE}${e}`);n==="GET"&&Object.entries(r).forEach(([l,c])=>{a.searchParams.append(l,c)});let s=await fetch(a.toString(),{method:n,headers:{"Content-Type":"application/json",...!o&&{Authorization:`Bearer ${await Gn(ue().plusLicenseKey)}`},"X-Client-Version":this.pluginVersion},...n==="POST"&&{body:JSON.stringify(r)}}),u=await s.json();if(!s.ok)try{let l=u.detail,c=new Error(l.reason);return c.name=l.error,{data:null,error:c}}catch{return{data:null,error:new Error("Unknown error")}}return ie(`==== ${e} request ====:`,u),{data:u}}async makeFormDataRequest(e,r,n=!1){n||this.checkLicenseKey(),r.append("user_id",ue().userId);let o=new URL(`${wE}${e}`);try{let i=await fetch(o.toString(),{method:"POST",headers:{Authorization:`Bearer ${await Gn(ue().plusLicenseKey)}`,"X-Client-Version":this.pluginVersion},body:r}),a=await i.json();if(!i.ok)try{let s=a.detail,u=new Error(s.reason);return u.name=s.error,{data:null,error:u}}catch{return{data:null,error:new Error(`HTTP error: ${i.status}`)}}return ie(`==== ${e} FormData request ====:`,a),{data:a}}catch(i){return{data:null,error:i instanceof Error?i:new Error(String(i))}}}async validateLicenseKey(){let{data:e,error:r}=await this.makeRequest("/license",{license_key:await Gn(ue().plusLicenseKey)},"POST",!0,!0);return r?r.message==="Invalid license key"?(HAe(),{isValid:!1}):{isValid:void 0}:(rEt(),{isValid:!0,plan:e?.plan})}async broca(e,r){let{data:n,error:o}=await this.makeRequest("/broca",{message:e,is_project_mode:r});if(o)throw o;if(!n)throw new Error("No data returned from broca");return n}async rerank(e,r){let{data:n,error:o}=await this.makeRequest("/rerank",{query:e,documents:r,model:"rerank-2"});if(o)throw o;if(!n)throw new Error("No data returned from rerank");return n}async url4llm(e){let{data:r,error:n}=await this.makeRequest("/url4llm",{url:e});if(n)throw n;if(!r)throw new Error("No data returned from url4llm");return r}async pdf4llm(e){let r=nEt.Buffer.from(e).toString("base64"),{data:n,error:o}=await this.makeRequest("/pdf4llm",{pdf:r});if(o)throw o;if(!n)throw new Error("No data returned from pdf4llm");return n}async docs4llm(e,r){let n=new FormData,o=this.getMimeTypeFromExtension(r),i=new Blob([e],{type:o}),a=`file.${r}`,s=new File([i],a,{type:o});n.append("files",s),n.append("file_type",r);let{data:u,error:l}=await this.makeFormDataRequest("/docs4llm",n);if(l)throw l;if(!u)throw new Error("No data returned from docs4llm");return u}getMimeTypeFromExtension(e){return{pdf:"application/pdf",doc:"application/msword",docx:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",ppt:"application/vnd.ms-powerpoint",pptx:"application/vnd.openxmlformats-officedocument.presentationml.presentation",epub:"application/epub+zip",txt:"text/plain",rtf:"application/rtf",jpg:"image/jpeg",jpeg:"image/jpeg",png:"image/png",gif:"image/gif",bmp:"image/bmp",svg:"image/svg+xml",tiff:"image/tiff",webp:"image/webp",html:"text/html",htm:"text/html",xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",xls:"application/vnd.ms-excel",csv:"text/csv",mp3:"audio/mpeg",mp4:"video/mp4",wav:"audio/wav",webm:"video/webm"}[e.toLowerCase()]||"application/octet-stream"}async webSearch(e){let{data:r,error:n}=await this.makeRequest("/websearch",{query:e});if(n)throw n;if(!r)throw new Error("No data returned from websearch");return r}async youtube4llm(e){let{data:r,error:n}=await this.makeRequest("/youtube4llm",{url:e});if(n)throw n;if(!r)throw new Error("No data returned from youtube4llm");return r}async autocomplete(e,r="",n=""){let{data:o,error:i}=await this.makeRequest("/autocomplete",{prompt:e,note_context:r,relevant_notes:n,max_tokens:64});if(i)throw i;if(!o)throw new Error("No data returned from autocomplete");return o}async wordcomplete(e,r="",n){let{data:o,error:i}=await this.makeRequest("/wordcomplete",{prefix:e,suffix:r,suggestions:n});if(i)throw i;if(!o)throw new Error("No data returned from wordcomplete");return o}};Ko();var iEt=F(jB()),LB=class t{constructor(e){this.memoryCache=new Map;this.cacheDir=e}static getInstance(e=".copilot/file-content-cache"){return t.instance||(t.instance=new t(e)),t.instance}async ensureCacheDir(){await app.vault.adapter.exists(this.cacheDir)||(ie("Creating file cache directory:",this.cacheDir),await app.vault.adapter.mkdir(this.cacheDir))}getCacheKey(e,r){let n=`${e.path}:${e.stat.size}:${e.stat.mtime}${r?`:${r}`:""}`;return(0,iEt.MD5)(n).toString()}getCachePath(e){return`${this.cacheDir}/${e}.md`}async get(e){try{let r=this.memoryCache.get(e);if(r)return ie("Memory cache hit for file:",e),r.content;let n=this.getCachePath(e);if(await app.vault.adapter.exists(n)){ie("File cache hit:",e);let o=await app.vault.adapter.read(n),i,a=o.trim();if(a.startsWith("{")&&a.endsWith("}")||a.startsWith("[")&&a.endsWith("]"))try{i=JSON.parse(o)}catch{i=o}else i=o;let s={content:i,timestamp:Date.now()};return this.memoryCache.set(e,s),s.content}return ie("Cache miss for file:",e),null}catch(r){return fe("Error reading from file cache:",r),null}}async set(e,r){try{await this.ensureCacheDir();let n=this.getCachePath(e),o=Date.now(),i={content:r,timestamp:o};this.memoryCache.set(e,i);let a;typeof r=="string"?a=r:a=JSON.stringify(r,null,2),await app.vault.adapter.write(n,a),ie("Cached file content:",e)}catch(n){fe("Error writing to file cache:",n)}}async remove(e){try{this.memoryCache.delete(e);let r=this.getCachePath(e);await app.vault.adapter.exists(r)&&(await app.vault.adapter.remove(r),ie("Removed file from cache:",e))}catch(r){fe("Error removing file from cache:",r)}}async clear(){try{if(this.memoryCache.clear(),await app.vault.adapter.exists(this.cacheDir)){let e=await app.vault.adapter.list(this.cacheDir);ie("Clearing file cache, removing files:",e.files.length);for(let r of e.files)await app.vault.adapter.remove(r)}}catch(e){fe("Error clearing file cache:",e)}}};Ko();tr();var lEt=F(jB()),Hne=require("obsidian"),cEt=F(KAe()),TA=class TA{constructor(){this.cacheDir=".copilot/project-context-cache";this.memoryCache=new Map;this.handleFileEvent=e=>{e instanceof Hne.TFile&&this.debouncedHandleFileChange(e)};this.handleFileChange=async e=>{try{if(e.extension!=="md")return;let n=ue().projectList||[];for(let o of n){let{inclusions:i,exclusions:a}=Ud({inclusions:o.contextSource.inclusions,exclusions:o.contextSource.exclusions,isProject:!0});Hs(e,i,a)&&(await this.invalidateMarkdownContext(o),ie(`Invalidated markdown context for project ${o.name} due to file change: ${e.path}`))}}catch(r){fe("Error handling file change for project context cache:",r)}};this.debouncedHandleFileChange=(0,cEt.default)(e=>{this.handleFileChange(e)},TA.DEBOUNCE_DELAY,{leading:!0,trailing:!0});this.vault=app.vault,this.fileCache=LB.getInstance(),this.initializeEventListeners()}static getInstance(){return TA.instance||(TA.instance=new TA),TA.instance}cleanup(){this.debouncedHandleFileChange.cancel(),this.vault.off("create",this.handleFileEvent),this.vault.off("modify",this.handleFileEvent),this.vault.off("delete",this.handleFileEvent),this.vault.off("rename",this.handleFileEvent)}initializeEventListeners(){this.vault.on("create",this.handleFileEvent),this.vault.on("modify",this.handleFileEvent),this.vault.on("delete",this.handleFileEvent),this.vault.on("rename",this.handleFileEvent)}async ensureCacheDir(){await this.vault.adapter.exists(this.cacheDir)||(ie("Creating project context cache directory:",this.cacheDir),await this.vault.adapter.mkdir(this.cacheDir))}getCacheKey(e){return(0,lEt.MD5)(e.id).toString()}getCachePath(e){return`${this.cacheDir}/${e}.json`}async get(e){try{let r=this.getCacheKey(e),n=this.memoryCache.get(r);if(n)return ie("Memory cache hit for project:",e.name),n;let o=this.getCachePath(r);if(await this.vault.adapter.exists(o)){ie("File cache hit for project:",e.name);let i=await this.vault.adapter.read(o),a=JSON.parse(i);return this.memoryCache.set(r,a),a}return ie("Cache miss for project:",e.name),null}catch(r){return fe("Error reading from project context cache:",r),null}}getSync(e){try{let r=this.getCacheKey(e),n=this.memoryCache.get(r);return n?(ie("Memory cache hit for project:",e.name),n):(ie("Memory cache miss for project:",e.name),null)}catch(r){return fe("Error reading from project context memory cache:",r),null}}async set(e,r){try{await this.ensureCacheDir();let n=this.getCacheKey(e),o=this.getCachePath(n);ie("Caching context for project:",e.name),this.memoryCache.set(n,r),await this.vault.adapter.write(o,JSON.stringify(r))}catch(n){fe("Error writing to project context cache:",n)}}createEmptyCache(){return{markdownContext:"",webContexts:{},youtubeContexts:{},fileContexts:{},timestamp:Date.now(),markdownNeedsReload:!1}}async clearAllCache(){try{let e=new Set;for(let r of Array.from(this.memoryCache.values()))if(r?.fileContexts)for(let n in r.fileContexts)r.fileContexts[n]?.cacheKey&&e.add(r.fileContexts[n].cacheKey);if(this.memoryCache.clear(),await this.vault.adapter.exists(this.cacheDir)){let r=await this.vault.adapter.list(this.cacheDir);ie("Clearing project context cache, removing files:",r.files.length),await Promise.all(r.files.map(n=>this.vault.adapter.remove(n)))}for(let r of e)await this.fileCache.remove(r);ie(`Cleared ${e.size} file content cache entries associated with projects`)}catch(e){fe("Error clearing project context cache:",e)}}async clearForProject(e){try{ie(`[clearForProject] Starting for project: ${e.name} (ID: ${e.id})`);let r=this.getCacheKey(e),n=await this.get(e),o=0;if(n?.fileContexts){let a=Object.keys(n.fileContexts);if(a.length>0){ie(`[clearForProject] Project ${e.name}: Found ${a.length} file contexts to remove from FileCache.`);for(let s in n.fileContexts){let u=n.fileContexts[s];u&&u.cacheKey?(await this.fileCache.remove(u.cacheKey),o++):gh(`[clearForProject] Project ${e.name}: Skipped removing FileCache entry for file ${s} due to missing cacheKey.`)}ie(`[clearForProject] Project ${e.name}: Attempted to clear ${o} entries from FileCache.`)}}else ie(`[clearForProject] Project ${e.name}: No fileContexts found in existing project cache to clear from FileCache.`);this.memoryCache.delete(r),ie(`[clearForProject] Project ${e.name}: Removed from ProjectContextCache memory.`);let i=this.getCachePath(r);await this.vault.adapter.exists(i)?(await this.vault.adapter.remove(i),ie(`[clearForProject] Project ${e.name}: Successfully removed main project cache file: ${i}`)):ie(`[clearForProject] Project ${e.name}: Main project cache file not found (already deleted or never existed): ${i}`),ie(`[clearForProject] Completed for project: ${e.name}`)}catch(r){fe(`[clearForProject] Error for project ${e.name} (ID: ${e.id}):`,r)}}async invalidateMarkdownContext(e,r=!1){let n=await this.get(e);n&&(n.markdownContext="",n.markdownNeedsReload=!0,r&&(n.webContexts={},n.youtubeContexts={},ie(`Flagged Web/YouTube contexts for full reload for project ${e.name}`)),await this.set(e,n),await this.cleanupProjectFileReferences(e),ie(`Invalidated markdown context for project ${e.name}`))}async updateMarkdownContext(e,r){let n=await this.get(e)||this.createEmptyCache();n.markdownContext=r,n.markdownNeedsReload=!1,await this.set(e,n),ie(`Updated markdown context for project ${e.name}`)}async clearMarkdownContext(e){let r=await this.get(e);r&&(r.markdownContext="",r.markdownNeedsReload=!0,await this.set(e,r))}async getFileContext(e,r){try{if(!r||typeof r!="string")return fe("Error getting file context: filePath is invalid.",{project:e.name,filePath:r}),null;let n=await this.get(e);if(!n||!n.fileContexts||!n.fileContexts[r])return null;let o=n.fileContexts[r];if(!o||!o.cacheKey||typeof o.cacheKey!="string"||o.cacheKey.trim()==="")return gh(`Missing, invalid, or empty cacheKey for filePath: ${r} in project ${e.name}. Entry will be treated as a cache miss.`,{project:e.name,filePath:r,fileContextEntry:o}),null;let{cacheKey:i}=o;return typeof i!="string"?(gh(`cacheKey is not a string for filePath: ${r} in project ${e.name}. Treating as cache miss.`,{project:e.name,filePath:r,cacheKey:i}),null):await this.fileCache.get(i)}catch(n){return fe(`Error getting file context for ${r} in project ${e.name}:`,n),null}}async setFileContext(e,r,n){try{let o=await this.get(e)||this.createEmptyCache();o.fileContexts||(o.fileContexts={});let i=this.vault.getAbstractFileByPath(r);if(!(i instanceof Hne.TFile))throw new Error(`File not found: ${r}`);let a=this.fileCache.getCacheKey(i,e.id);await this.fileCache.set(a,n),o.fileContexts[r]={timestamp:Date.now(),cacheKey:a},await this.set(e,o),ie(`Added/updated file context for ${r} in project ${e.name}`)}catch(o){fe(`Error setting file context for ${r}:`,o)}}async removeFileContext(e,r){try{let n=await this.get(e);if(n&&n.fileContexts[r]){let{cacheKey:o}=n.fileContexts[r];delete n.fileContexts[r],await this.set(e,n),await this.fileCache.remove(o),ie(`Removed file context for ${r} in project ${e.name}`)}}catch(n){fe(`Error removing file context for ${r}:`,n)}}async cleanupProjectFileReferences(e){try{let r=await this.get(e);if(!r||!r.fileContexts)return;let{inclusions:n,exclusions:o}=Ud({inclusions:e.contextSource.inclusions,exclusions:e.contextSource.exclusions,isProject:!0}),i=0,a={};for(let s in r.fileContexts){let u=this.vault.getAbstractFileByPath(s);!(u instanceof Hne.TFile)||!Hs(u,n,o)?i++:a[s]=r.fileContexts[s]}i>0&&(r.fileContexts=a,await this.set(e,r),ie(`Removed ${i} file references from project ${e.name} that no longer match inclusion patterns`))}catch(r){fe(`Error cleaning up project file references for ${e.name}:`,r)}}async updateProjectFilesFromPatterns(e,r){try{ie(`[updateProjectFilesFromPatterns] Starting for project: ${e.name}`),r.fileContexts||(r.fileContexts={});let{inclusions:n,exclusions:o}=Ud({inclusions:e.contextSource.inclusions,exclusions:e.contextSource.exclusions,isProject:!0}),i=this.vault.getFiles(),a=0;for(let s of i)if(Hs(s,n,o)){if(r.fileContexts[s.path])continue;let u=this.fileCache.getCacheKey(s,e.id);r.fileContexts[s.path]={timestamp:Date.now(),cacheKey:u},a++}a>0&&ie(`[updateProjectFilesFromPatterns] Project ${e.name}: Added ${a} new file references to context (in memory).`),ie(`[updateProjectFilesFromPatterns] Completed for project: ${e.name}. Total fileContexts in memory: ${Object.keys(r.fileContexts).length}`)}catch(n){fe(`[updateProjectFilesFromPatterns] Error for project ${e.name}:`,n)}return r}async removeWebUrl(e,r){let n=await this.get(e);n?.webContexts?.[r]&&(delete n.webContexts[r],await this.set(e,n),ie(`Removed web context for URL ${r} in project ${e.name}`))}async updateWebUrl(e,r,n){let o=await this.get(e)||this.createEmptyCache();o.webContexts||(o.webContexts={}),o.webContexts[r]=n,await this.set(e,o),ie(`Updated web context for URL ${r} in project ${e.name}`)}async removeYoutubeUrl(e,r){let n=await this.get(e);n?.youtubeContexts?.[r]&&(delete n.youtubeContexts[r],await this.set(e,n),ie(`Removed YouTube context for URL ${r} in project ${e.name}`))}async updateYoutubeUrl(e,r,n){let o=await this.get(e)||this.createEmptyCache();o.youtubeContexts||(o.youtubeContexts={}),o.youtubeContexts[r]=n,await this.set(e,o),ie(`Updated YouTube context for URL ${r} in project ${e.name}`)}};TA.DEBOUNCE_DELAY=5e3;var Dy=TA;xd();kr();wn();function dEt(t){let e=t.split(`
`),r=[],n="",o="",i="";for(let a of e)a.startsWith("**user**:")||a.startsWith("**ai**:")?(n&&o&&r.push({sender:n===_i?_i:Nb,message:o.trim(),isVisible:!0,timestamp:i?jme(i):null}),n=a.startsWith("**user**:")?_i:Nb,o=a.substring(a.indexOf(":")+1).trim(),i=""):a.startsWith("[Timestamp:")?i=a.substring(11,a.length-1).trim():o+=`
`+a;return n&&o&&r.push({sender:n===_i?_i:Nb,message:o.trim(),isVisible:!0,timestamp:i?jme(i):null}),r}async function kj(t,e){await e.clearChatMemory();for(let r=0;r<t.length-1;r++){let n=t[r];if(n.sender===_i){let o=t[r+1];o?.sender===Nb&&await e.getMemory().saveContext({input:n.message},{output:o.message})}}}kr();Ko();Ko();wn();var $j=require("obsidian"),lx=class{static async isImageUrl(e,r){try{let n,o=!1;try{let i=new URL(e),a=i.pathname,s=a.lastIndexOf("."),u=a.lastIndexOf("/");if(s>u&&s>-1&&(n=a.substring(s+1).toLowerCase()),n&&!this.IMAGE_EXTENSIONS.some(c=>c.toLowerCase()===`.${n}`))return fe(`Unsupported image format from URL path: .${n}. Supported formats: ${this.IMAGE_EXTENSIONS.join(", ")}`,e),!1;try{let c=(await js(e,{method:"HEAD",headers:{}})).headers.get("content-type");return c?.startsWith("image/")?!0:(console.warn(`HEAD request succeeded for ${e} but Content-Type (${c}) is not image/*.`),!1)}catch(l){console.warn(`HEAD request failed for URL: ${e}. Proceeding to heuristic check.`,l);let c=i.searchParams,f=[c.has("w")||c.has("width"),c.has("h")||c.has("height"),c.has("format"),c.has("fit"),c.has("quality"),i.pathname.includes("/image/"),i.pathname.includes("/images/"),i.pathname.includes("/img/"),c.has("auto"),c.has("crop")].filter(Boolean).length;return f>=2?(fe(`Identified as image based on URL heuristics (indicator count: ${f}): ${e}`),!0):!1}}catch{o=!0;let i=e.lastIndexOf(".");if(i>-1)n=e.substring(i+1).toLowerCase();else return!1}if(o)if(n&&this.IMAGE_EXTENSIONS.some(i=>i.toLowerCase()===`.${n}`)){let i=r.getAbstractFileByPath(e);return i instanceof $j.TFile?i.stat.size>this.MAX_IMAGE_SIZE?(fe(`Vault file too large: ${i.stat.size} bytes for path: ${e}`),!1):!0:(fe(`File with image extension not found in vault: ${e}.`),!1)}else return n&&fe(`Unsupported image format for potential vault path: .${n}. Supported formats: ${this.IMAGE_EXTENSIONS.join(", ")}`,e),!1;return fe(`Could not determine image status for URL/path: ${e}`),!1}catch(n){return fe(`Unexpected error in isImageUrl for "${e}":`,n),!1}}static async handleVaultImage(e,r){try{if(e.stat.size>this.MAX_IMAGE_SIZE)return fe(`Image too large: ${e.stat.size} bytes, skipping: ${e.path}`),null;let n=await r.readBinary(e),o=await this.getMimeType(n,e.extension);if(!o.startsWith("image/"))return fe(`Invalid MIME type: ${o}, skipping: ${e.path}`),null;let a=Buffer.from(n).toString("base64");return`data:${o};base64,${a}`}catch(n){return fe("Error processing vault image:",n),null}}static async handleWebImage(e){try{let r=await js(e,{method:"GET",headers:{}});if(!r.ok)return fe(`Failed to fetch image: ${r.statusText}, URL: ${e}`),null;let n=r.headers.get("content-type");if(!n?.startsWith("image/"))return fe(`Invalid content type: ${n}, URL: ${e}`),null;let o=await r.arrayBuffer();if(o.byteLength>this.MAX_IMAGE_SIZE)return fe(`Image too large: ${o.byteLength} bytes, URL: ${e}`),null;let a=Buffer.from(o).toString("base64");return`data:${n};base64,${a}`}catch(r){return fe("Error converting web image to base64:",r),null}}static async handleLocalImage(e,r){try{let n=decodeURIComponent(e.replace("app://","")),o=r.getAbstractFileByPath(n);if(!o||!(o instanceof $j.TFile))return fe(`Local image not found: ${n}`),null;if(o.stat.size>this.MAX_IMAGE_SIZE)return fe(`Image too large: ${o.stat.size} bytes, path: ${n}`),null;let i=await r.readBinary(o),a=await this.getMimeType(i,o.extension);if(!a.startsWith("image/"))return fe(`Invalid MIME type: ${a}, path: ${n}`),null;let u=Buffer.from(i).toString("base64");return`data:${a};base64,${u}`}catch(n){return fe("Error processing local image:",n),null}}static async imageToBase64(e,r){if(e.startsWith("data:"))return e;if(e.startsWith("attachment:")){let o=e.substring(11),i=r.getAbstractFileByPath(o);return i instanceof $j.TFile?await this.handleVaultImage(i,r):(console.warn(`Could not find attachment file in vault: ${o}`),null)}if(e.startsWith("app://"))return await this.handleLocalImage(e,r);let n=r.getAbstractFileByPath(e);return n instanceof $j.TFile?await this.handleVaultImage(n,r):await this.handleWebImage(e)}static async convertToBase64(e,r){let n=await this.imageToBase64(e,r);return n?{type:"image_url",image_url:{url:n}}:(fe(`Failed to convert image to base64: ${e}`),null)}static async getMimeType(e,r){let n=new Uint8Array(e.slice(0,4));if(n[0]===255&&n[1]===216)return"image/jpeg";if(n[0]===137&&n[1]===80)return"image/png";if(n[0]===71&&n[1]===73)return"image/gif";if(n[0]===82&&n[1]===73)return"image/webp";if(n[0]===66&&n[1]===77)return"image/bmp";if(n[0]===60&&n[1]===115)throw new Error("SVG files are not supported");let o=this.MIME_TYPES[r.toLowerCase()];if(!o){let i=`Unsupported image extension: ${r}`;throw fe(i),new Error(i)}return o}};lx.IMAGE_EXTENSIONS=[".jpg",".jpeg",".png",".gif",".webp",".bmp"],lx.MAX_IMAGE_SIZE=3*1024*1024,lx.MIME_TYPES={".jpg":"image/jpeg",".jpeg":"image/jpeg",".png":"image/png",".gif":"image/gif",".webp":"image/webp",".bmp":"image/bmp"};var Bj=class t{static async processUrlBatch(e,r,n){try{let i=(await Promise.all(e.map(s=>t.processSingleUrl(s,r,n)))).filter(s=>s!==null),a=r.map(s=>`Image read failed for: ${s}`);return{successfulImages:i,failureDescriptions:a}}catch(o){return fe("Error processing URL batch:",o),{successfulImages:[],failureDescriptions:e.map(i=>`Image read failed for: ${i}`)}}}static async processSingleUrl(e,r,n){try{if(!await lx.isImageUrl(e,n))return null;let o=await lx.convertToBase64(e,n);return o||(r.push(e),null)}catch(o){return fe(`Failed to process image: ${e}`,o),r.push(e),null}}static async processChatImageBatch(e,r,n){try{let o=e.filter(u=>u.type==="image_url"&&!!u.image_url?.url),a=(await Promise.all(o.map(u=>t.processChatSingleImage(u,r,n)))).filter(u=>u!==null),s=r.map(u=>`Image read failed for: ${u}`);return{successfulImages:a,failureDescriptions:s}}catch(o){fe("Error processing chat image batch:",o);let i=e.filter(a=>a.type==="image_url"&&!!a.image_url?.url).map(a=>a.image_url.url);return{successfulImages:[],failureDescriptions:i.map(a=>`Image read failed for: ${a}`)}}}static async processChatSingleImage(e,r,n){try{let o=await lx.convertToBase64(e.image_url.url,n);return o||(r.push(e.image_url.url),null)}catch(o){return fe(`Failed to process chat image: ${e.image_url.url}`,o),r.push(e.image_url.url),null}}static showFailedImagesNotice(e){e.length>0&&new $j.Notice(`Failed to process images:
${e.join(`
`)}`)}};wn();var FB=class t{constructor(){this.mentions=new Map,this.brevilabsClient=Ii.getInstance()}static getInstance(){return t.instance||(t.instance=new t),t.instance}extractAllUrls(e){let r=/https?:\/\/[^\s"'<>]+/g;return(e.match(r)||[]).map(n=>n.replace(/,+$/,"")).filter((n,o,i)=>i.indexOf(n)===o)}extractUrls(e){let r=/https?:\/\/[^\s"'<>]+/g;return(e.match(r)||[]).map(n=>n.replace(/,+$/,"")).filter((n,o,i)=>i.indexOf(n)===o).filter(n=>!g4e(n))}async processUrl(e){try{return await this.brevilabsClient.url4llm(e)}catch(r){return console.error(`Error processing URL ${e}:`,r),{response:e,elapsed_time_ms:0}}}async processUrls(e){let r=this.extractUrls(e),n="",o=[];if(r.length===0)return{urlContext:"",imageUrls:[]};let i=r.map(async s=>{if(await lx.isImageUrl(s,app.vault))return o.push(s),null;if(!this.mentions.has(s)){let u=await this.processUrl(s);this.mentions.set(s,{type:"url",original:s,processed:u.response})}return this.mentions.get(s)});return(await Promise.all(i)).forEach(s=>{s?.processed&&(n+=`

Content from ${s.original}:
${s.processed}`)}),{urlContext:n,imageUrls:o}}getMentions(){return this.mentions}clearMentions(){this.mentions.clear()}};tr();Ko();var fEt=F(jB()),Vne=class t{constructor(){this.cacheDir=".copilot/pdf-cache"}static getInstance(){return t.instance||(t.instance=new t),t.instance}async ensureCacheDir(){await app.vault.adapter.exists(this.cacheDir)||(ie("Creating PDF cache directory:",this.cacheDir),await app.vault.adapter.mkdir(this.cacheDir))}getCacheKey(e){let r=`${e.path}:${e.stat.size}:${e.stat.mtime}`,n=(0,fEt.MD5)(r).toString();return ie("Generated cache key for PDF:",{path:e.path,key:n}),n}getCachePath(e){return`${this.cacheDir}/${e}.json`}async get(e){try{let r=this.getCacheKey(e),n=this.getCachePath(r);if(await app.vault.adapter.exists(n)){ie("Cache hit for PDF:",e.path);let o=await app.vault.adapter.read(n);return JSON.parse(o)}return ie("Cache miss for PDF:",e.path),null}catch(r){return fe("Error reading from PDF cache:",r),null}}async set(e,r){try{await this.ensureCacheDir();let n=this.getCacheKey(e),o=this.getCachePath(n);ie("Caching PDF response for:",e.path),await app.vault.adapter.write(o,JSON.stringify(r))}catch(n){fe("Error writing to PDF cache:",n)}}async clear(){try{if(await app.vault.adapter.exists(this.cacheDir)){let e=await app.vault.adapter.list(this.cacheDir);ie("Clearing PDF cache, removing files:",e.files.length);for(let r of e.files)await app.vault.adapter.remove(r)}}catch(e){fe("Error clearing PDF cache:",e)}}};Ko();var pEt=require("obsidian");var Kne,mEt,Wne=class{constructor(e){this.vault=e;f$e(this,Kne)}async load(e){let r=await this.vault.read(e),{nodes:n=[],edges:o=[]}=JSON.parse(r),i=await Promise.all(n.map(async u=>{if(u.type==="file"&&u.file){let l=this.vault.getAbstractFileByPath(u.file),c=l instanceof pEt.TFile?await this.vault.cachedRead(l):"";return{...u,content:c}}return u.type==="text"?{...u,content:u.text??""}:{...u,content:""}})),a=[...o];p$e(this,Kne,mEt).call(this,i,a);let s=Object.fromEntries(i.map(u=>[u.id,u]));return{nodes:i,edges:a,byId:s}}buildPrompt(e){let r=new Map,n=e.nodes.filter(s=>s.type==="group");for(let s of n){let u=e.nodes.filter(l=>{if(l.id===s.id)return!1;let c=l.x+l.width/2,d=l.y+l.height/2;return c>=s.x&&d>=s.y&&c<=s.x+s.width&&d<=s.y+s.height});r.set(s.label||s.id,u)}let o=`This canvas contains the following elements:

`,i=s=>{switch(s.type){case"file":return`- File: ${s.file}
Content:
${s.content}
`;case"text":return`- Text: "${s.text}"
`;case"link":return`- Link: ${s.url}
`;default:return""}};n.forEach(s=>{let u=s.label||s.id,l=r.get(u)||[];o+=`Group "${u}" contains:
`,l.forEach(c=>{o+=i(c)}),o+=`
`});let a=e.nodes.filter(s=>s.type==="group"?!1:!Array.from(r.values()).flat().some(u=>u.id===s.id));return a.length>0&&(o+=`Elements outside of groups:
`,a.forEach(s=>{o+=i(s)})),o+=`
When describing this canvas, please:
`,o+=`- Use the actual titles/names of elements instead of their IDs
`,o+=`- Pay attention to the content and relationships between elements
`,o+=`- Describe files by their names, links by their URLs, and text nodes by their content
`,o}};Kne=new WeakSet,mEt=function(e,r){let n=e.filter(o=>o.type==="group");for(let o of n)for(let i of e){if(i.id===o.id)continue;let a=i.x+i.width/2,s=i.y+i.height/2;a>=o.x&&s>=o.y&&a<=o.x+o.width&&s<=o.y+o.height&&r.push({id:crypto.randomUUID(),fromNode:o.id,toNode:i.id,label:"contains"})}};var GAe=class{constructor(){this.supportedExtensions=["md"]}async parseFile(e,r){return await r.read(e)}},Gne=class{constructor(e){this.supportedExtensions=["pdf"];this.brevilabsClient=e,this.pdfCache=Vne.getInstance()}async parseFile(e,r){try{ie("Parsing PDF file:",e.path);let n=await this.pdfCache.get(e);if(n)return ie("Using cached PDF content for:",e.path),n.response;let o=await r.readBinary(e);ie("Calling pdf4llm API for:",e.path);let i=await this.brevilabsClient.pdf4llm(o);return await this.pdfCache.set(e,i),i.response}catch(n){return fe(`Error extracting content from PDF ${e.path}:`,n),`[Error: Could not extract content from PDF ${e.basename}]`}}async clearCache(){ie("Clearing PDF cache"),await this.pdfCache.clear()}},JAe=class{constructor(){this.supportedExtensions=["canvas"]}async parseFile(e,r){try{ie("Parsing Canvas file:",e.path);let n=new Wne(r),o=await n.load(e);return n.buildPrompt(o)}catch(n){return fe(`Error parsing Canvas file ${e.path}:`,n),`[Error: Could not parse Canvas file ${e.basename}]`}}},YAe=class{constructor(e,r=null){this.supportedExtensions=["pdf","602","abw","cgm","cwk","doc","docx","docm","dot","dotm","hwp","key","lwp","mw","mcw","pages","pbd","ppt","pptm","pptx","pot","potm","potx","rtf","sda","sdd","sdp","sdw","sgl","sti","sxi","sxw","stw","sxg","txt","uof","uop","uot","vor","wpd","wps","xml","zabw","epub","jpg","jpeg","png","gif","bmp","svg","tiff","webp","web","htm","html","xlsx","xls","xlsm","xlsb","xlw","csv","dif","sylk","slk","prn","numbers","et","ods","fods","uos1","uos2","dbf","wk1","wk2","wk3","wk4","wks","123","wq1","wq2","wb1","wb2","wb3","qpw","xlr","eth","tsv","mp3","mp4","mpeg","mpga","m4a","wav","webm"];this.brevilabsClient=e,this.projectContextCache=Dy.getInstance(),this.currentProject=r}async parseFile(e,r){try{if(ie(`[Docs4LLMParser] Project ${this.currentProject?.name}: Parsing ${e.extension} file: ${e.path}`),!this.currentProject)throw fe("[Docs4LLMParser] No project context for parsing file: ",e.path),new Error("No project context provided for file parsing");let n=await this.projectContextCache.getFileContext(this.currentProject,e.path);if(n)return ie(`[Docs4LLMParser] Project ${this.currentProject.name}: Using cached content for: ${e.path}`),n;ie(`[Docs4LLMParser] Project ${this.currentProject.name}: Cache miss for: ${e.path}. Proceeding to API call.`);let o=await r.readBinary(e);ie(`[Docs4LLMParser] Project ${this.currentProject.name}: Calling docs4llm API for: ${e.path}`);let i=await this.brevilabsClient.docs4llm(o,e.extension);if(!i||!i.response)throw new Error("Empty response from docs4llm API");let a="";if(typeof i.response=="string")a=i.response;else if(Array.isArray(i.response)){let s=[];for(let u of i.response)u.content&&(u.content.md?s.push(u.content.md):u.content.text&&s.push(u.content.text));a=s.join(`

`)}else typeof i.response=="object"?i.response.md?a=i.response.md:i.response.text?a=i.response.text:i.response.content?a=i.response.content:a=JSON.stringify(i.response,null,2):a=String(i.response);return await this.projectContextCache.setFileContext(this.currentProject,e.path,a),ie(`[Docs4LLMParser] Project ${this.currentProject.name}: Successfully processed and cached: ${e.path}`),a}catch(n){throw fe(`[Docs4LLMParser] Project ${this.currentProject?.name}: Error processing file ${e.path}:`,n),n}}async clearCache(){ie("Cache clearing is now handled at the project level")}},AA=class{constructor(e,r,n=!1,o=null){this.parsers=new Map;this.isProjectMode=n,this.currentProject=o,this.registerParser(new GAe),this.registerParser(new YAe(e,o)),n||this.registerParser(new Gne(e)),this.registerParser(new JAe)}registerParser(e){for(let r of e.supportedExtensions)this.parsers.set(r,e)}async parseFile(e,r){let n=this.parsers.get(e.extension);if(!n)throw new Error(`No parser found for file type: ${e.extension}`);return await n.parseFile(e,r)}supportsExtension(e){return this.parsers.has(e)}async clearPDFCache(){let e=this.parsers.get("pdf");e instanceof Gne&&await e.clearCache()}};wn();var P5=require("obsidian");xd();kr();wn();async function Jne(t,e){let r=`Given the following conversation and a follow up question,
    summarize the conversation as context and keep the follow up question unchanged, in its original language.
    If the follow up question is unrelated to its preceding messages, return this follow up question directly.
    If it is related, then combine the summary and the follow up question to construct a standalone question.
    Make sure to keep any [[]] wrapped note titles in the question unchanged.
    If there's nothing in the chat history, just return the follow up question.

    Chat History:
    {chat_history}
    Follow Up Input: {question}
    Standalone question:`,n=e.map(({role:o,content:i})=>`${o}: ${i}`).join(`
`);return await Zg(async()=>{let i=await Kl.instance.getCurrentChainManager().chatModelManager.getChatModel().bind({temperature:0}).invoke([{role:"user",content:r.replace("{chat_history}",n).replace("{question}",t)}]);return uR(i.content)})}kr();Ko();Ko();tr();wn();yE();fE();vf();Cb();var Yne=class extends vn{constructor(e){super(e),Object.defineProperty(this,"callbacks",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"verbose",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.callbacks=e?.callbacks,this.tags=e?.tags??[],this.metadata=e?.metadata??{},this.verbose=e?.verbose??!1}_getRelevantDocuments(e,r){throw new Error("Not implemented!")}async invoke(e,r){return this.getRelevantDocuments(e,an(r))}async getRelevantDocuments(e,r){let n=an(JM(r)),i=await(await Ms.configure(n.callbacks,this.callbacks,n.tags,this.tags,n.metadata,this.metadata,{verbose:this.verbose}))?.handleRetrieverStart(this.toJSON(),e,n.runId,void 0,void 0,void 0,n.runName);try{let a=await this._getRelevantDocuments(e,i);return await i?.handleRetrieverEnd(a),a}catch(a){throw await i?.handleRetrieverError(a),a}}};var cx=class extends Yne{constructor(r){super();this.options=r;this.lc_namespace=["hybrid_retriever"];this.queryRewritePrompt=cp.fromTemplate(`Please write a passage to answer the question. If you don't know the answer, just make up a passage. 
Question: {question}
Passage:`)}async getRelevantDocuments(r,n){return Zg(async()=>{let o=fC(r,app.vault),i=o.map(h=>h.basename),a=[...new Set([...this.options.salientTerms,...i])],s=await this.getExplicitChunks(o),u=r;n?.runName!=="no_hyde"&&(u=await this.rewriteQuery(r));let l=await this.getOramaChunks(u,a,this.options.textWeight),c=this.filterAndFormatChunks(l,s),d=c;if(c.length===0)return ue().debug&&console.log("No chunks found for query:",r),d;let f=c.reduce((h,b)=>{let g=b.metadata.score;return typeof g=="number"&&!isNaN(g)?Math.max(h,g):h},0),p=c.every(h=>typeof h.metadata.score!="number"||isNaN(h.metadata.score)),m=this.options.useRerankerThreshold&&(f<this.options.useRerankerThreshold||p);return m&&(d=(await Ii.getInstance().rerank(r,c.map(b=>b.pageContent.slice(0,3e3)))).response.data.map(b=>({...c[b.index],metadata:{...c[b.index].metadata,rerank_score:b.relevance_score}}))),ue().debug&&(console.log("*** HYBRID RETRIEVER DEBUG INFO: ***"),n?.runName!=="no_hyde"&&(console.log(`
Original Query: `,r),console.log("Rewritten Query: ",u)),console.log(`
Explicit Chunks: `,s),console.log("Orama Chunks: ",l),console.log("Combined Chunks: ",c),console.log("Max Orama Score: ",f),m?console.log("Reranked Chunks: ",d):console.log("No reranking applied.")),d})}async rewriteQuery(r){try{let n=await this.queryRewritePrompt.format({question:r}),o=await Zg(()=>Kl.instance.getCurrentChainManager().chatModelManager.getChatModel().bind({temperature:0}).invoke(n));return o&&"content"in o?uR(o.content):(console.warn("Unexpected rewrittenQuery format. Falling back to original query."),r)}catch(n){return console.error("Error in rewriteQuery:",n),r}}async getExplicitChunks(r){let n=[];for(let o of r){let i=await qi.getInstance().getDb(),a=await IO.getDocsByPath(i,o.path);if(a){let s=a.map(u=>new MO({pageContent:u.document.content,metadata:{...u.document.metadata,score:u.score,path:u.document.path,mtime:u.document.mtime,ctime:u.document.ctime,title:u.document.title,id:u.document.id,embeddingModel:u.document.embeddingModel,tags:u.document.tags,extension:u.document.extension,created_at:u.document.created_at,nchars:u.document.nchars}}));n.push(...s)}}return n}async getOramaChunks(r,n,o){let i;try{i=await this.convertQueryToVector(r)}catch(l){throw console.error("Error in convertQueryToVector, please ensure your embedding model is working and has an adequate context length:",l,`
Query:`,r),l}let a=await qi.getInstance().getDb(),s={similarity:this.options.minSimilarityScore,limit:this.options.maxK,includeVectors:!0};if(n.length>0){let l;o||(o=.5),l=1-o;let c=!0;for(let d of n)if(!d.startsWith("#")){c=!1;break}c&&(ue().debug&&console.log("Tag only query detected, setting textWeight to 1 and vectorWeight to 0."),o=1,l=0),s.mode="hybrid",s.term=n.join(" "),s.vector={value:i,property:"embedding"},s.hybridWeights={text:o,vector:l}}else s.mode="vector",s.vector={value:i,property:"embedding"};if(this.options.timeRange){let{startTime:l,endTime:c}=this.options.timeRange,d=this.generateDailyNoteDateRange(l,c);ie("==== Daily note date range: ====",d[0],d[d.length-1]);let f=fC(d.join(", "),app.vault),m=(await this.getExplicitChunks(f)).map(w=>({...w,metadata:{...w.metadata,includeInContext:!0}}));ie("==== Modified time range: ====",l,c),s.where={mtime:{between:[l,c]}};let b=(await kc(a,s)).hits.map(w=>new MO({pageContent:w.document.content,metadata:{...w.document.metadata,score:w.score,path:w.document.path,mtime:w.document.mtime,ctime:w.document.ctime,title:w.document.title,id:w.document.id,embeddingModel:w.document.embeddingModel,tags:w.document.tags,extension:w.document.extension,created_at:w.document.created_at,nchars:w.document.nchars}})),g=[...m,...b];return Array.from(new Set(g.map(w=>w.metadata.id))).map(w=>g.find(S=>S.metadata.id===w)).filter(w=>w!==void 0)}ue().debug&&console.log(`==== Orama Search Params: ====
`,s);let u=await kc(a,s);return!u||!u.hits?(console.warn("Search results or hits are undefined"),[]):u.hits.map(l=>!l||!l.document?(console.warn("Invalid hit or document in search results"),null):((typeof l.score!="number"||isNaN(l.score))&&console.warn("NaN/invalid score detected:",{score:l.score,path:l.document.path,title:l.document.title}),new MO({pageContent:l.document.content||"",metadata:{...l.document.metadata||{},score:l.score,path:l.document.path||"",mtime:l.document.mtime,ctime:l.document.ctime,title:l.document.title||"",id:l.document.id,embeddingModel:l.document.embeddingModel,tags:l.document.tags||[],extension:l.document.extension,created_at:l.document.created_at,nchars:l.document.nchars}}))).filter(l=>l!==null)}async convertQueryToVector(r){let o=await(await Us.getInstance().getEmbeddingsAPI()).embedQuery(r);if(o.length===0)throw new Error("Query embedding returned an empty vector");return o}generateDailyNoteDateRange(r,n){let o=[],i=new Date(r),a=new Date(n),s=new Date(i);for(;s<=a;)o.push(`[[${s.toLocaleDateString("en-CA")}]]`),s.setDate(s.getDate()+1);return o}filterAndFormatChunks(r,n){let o=this.options.minSimilarityScore,i=r.filter(u=>{let l=u.metadata.score;return typeof l!="number"||isNaN(l)?!0:l>=o}),a=new Set(n.map(u=>u.pageContent)),s=[...n];for(let u of i){let l=u.pageContent;a.has(l)||(a.add(l),s.push(u))}return s.map(u=>({...u,metadata:{...u.metadata,includeInContext:!0}}))}};tr();var ZAe=require("obsidian"),hEt=t=>{switch(t){case"@vault":return"Search through your vault for relevant information";case"@websearch":return"Search the web for information";case"@youtube":return"Get the transcript of a YouTube video. Example: @youtube <video_url>";case"@pomodoro":return"Start a pomodoro timer. Example: @pomodoro 25m";case"@composer":return"Edit existing notes or create new notes.";default:return""}},kB=class{static async callTool(e,r){try{if(!e)throw new Error("Tool is undefined");let n=await e.call(r);return n??(console.warn(`Tool ${e.name} returned null/undefined result`),null)}catch(n){return console.error("Error calling tool:",n),n instanceof Error?new ZAe.Notice(n.message):new ZAe.Notice("An error occurred while executing the tool. Check console for details."),null}}};wn();var TAt=require("obsidian");kr();tr();md();var XAe=km(async({timeRange:t,query:e,salientTerms:r})=>{if(await qi.getInstance().isIndexEmpty())throw new Mr(cG);let o=t!==void 0,i=ue().maxSourceChunks<kme?kme:ue().maxSourceChunks;ue().debug&&console.log("returnAll:",o);let u=(await new cx({minSimilarityScore:o?0:.1,maxK:o?1e3:i,salientTerms:r,timeRange:t?{startTime:t.startTime.epoch,endTime:t.endTime.epoch}:void 0,textWeight:w4e,returnAll:o,useRerankerThreshold:.5}).getRelevantDocuments(e)).map(l=>({title:l.metadata.title,content:l.pageContent,path:l.metadata.path,score:l.metadata.score,rerank_score:l.metadata.rerank_score,includeInContext:l.metadata.includeInContext}));return JSON.stringify(u)},{name:"localSearch",description:"Search for notes based on the time range and query",schema:Vr.object({timeRange:Vr.object({startTime:Vr.any(),endTime:Vr.any()}).optional(),query:Vr.string().describe("The search query"),salientTerms:Vr.array(Vr.string()).describe("List of salient terms extracted from the query")})}),gEt=km(async()=>{try{let t=await qi.getInstance().indexVaultToVectorStore();return`Please report whether the indexing was successful.
If success is true, just say it is successful. If 0 files is indexed, say there are no new files to index.`+JSON.stringify({success:!0,message:t===0?"No new files to index.":`Indexed ${t} files in the vault.`})}catch(t){return console.error("Error indexing vault:",t),JSON.stringify({success:!1,message:"An error occurred while indexing the vault."})}},{name:"indexVault",description:"Index the vault to the Copilot index"}),QAe=km(async({query:t,chatHistory:e})=>{try{let r=await Jne(t,e),n=await Ii.getInstance().webSearch(r),o=n.response.citations||[],i=o.length>0?`

Sources:
`+o.map((a,s)=>`[${s+1}] ${a}`).join(`
`):"";return`Here are the web search results. Please provide a response based on this information and include source citations listed at the end of your response under the heading '#### Sources' as a list of markdown links. For each URL, create a descriptive title based on the domain and path and return it in the markdown format '- [title](url)':

`+n.response.choices[0].message.content+i}catch(r){return console.error(`Error processing web search query ${t}:`,r),""}},{name:"webSearch",description:"Search the web for information",schema:Vr.object({query:Vr.string().describe("The search query"),chatHistory:Vr.array(Vr.object({role:Vr.enum(["user","assistant"]),content:Vr.string()})).describe("Previous conversation turns")})});var vEt=F(yEt(),1),YV=F(IA(),1);var Xn;(function(t){t[t.AM=0]="AM",t[t.PM=1]="PM"})(Xn||(Xn={}));var Vs;(function(t){t[t.SUNDAY=0]="SUNDAY",t[t.MONDAY=1]="MONDAY",t[t.TUESDAY=2]="TUESDAY",t[t.WEDNESDAY=3]="WEDNESDAY",t[t.THURSDAY=4]="THURSDAY",t[t.FRIDAY=5]="FRIDAY",t[t.SATURDAY=6]="SATURDAY"})(Vs||(Vs={}));var $m;(function(t){t[t.JANUARY=1]="JANUARY",t[t.FEBRUARY=2]="FEBRUARY",t[t.MARCH=3]="MARCH",t[t.APRIL=4]="APRIL",t[t.MAY=5]="MAY",t[t.JUNE=6]="JUNE",t[t.JULY=7]="JULY",t[t.AUGUST=8]="AUGUST",t[t.SEPTEMBER=9]="SEPTEMBER",t[t.OCTOBER=10]="OCTOBER",t[t.NOVEMBER=11]="NOVEMBER",t[t.DECEMBER=12]="DECEMBER"})($m||($m={}));function bEt(t,e){e=e.add(1,"day"),qj(t,e),$B(t,e)}function Ly(t,e){t.assign("day",e.date()),t.assign("month",e.month()+1),t.assign("year",e.year())}function Zne(t,e){t.assign("hour",e.hour()),t.assign("minute",e.minute()),t.assign("second",e.second()),t.assign("millisecond",e.millisecond()),t.get("hour")<12?t.assign("meridiem",Xn.AM):t.assign("meridiem",Xn.PM)}function qj(t,e){t.imply("day",e.date()),t.imply("month",e.month()+1),t.imply("year",e.year())}function $B(t,e){t.imply("hour",e.hour()),t.imply("minute",e.minute()),t.imply("second",e.second()),t.imply("millisecond",e.millisecond())}var oIe=F(IA(),1);var D8r={ACDT:630,ACST:570,ADT:-180,AEDT:660,AEST:600,AFT:270,AKDT:-480,AKST:-540,ALMT:360,AMST:-180,AMT:-240,ANAST:720,ANAT:720,AQTT:300,ART:-180,AST:-240,AWDT:540,AWST:480,AZOST:0,AZOT:-60,AZST:300,AZT:240,BNT:480,BOT:-240,BRST:-120,BRT:-180,BST:60,BTT:360,CAST:480,CAT:120,CCT:390,CDT:-300,CEST:120,CET:{timezoneOffsetDuringDst:2*60,timezoneOffsetNonDst:60,dstStart:t=>_Et(t,$m.MARCH,Vs.SUNDAY,2),dstEnd:t=>_Et(t,$m.OCTOBER,Vs.SUNDAY,3)},CHADT:825,CHAST:765,CKT:-600,CLST:-180,CLT:-240,COT:-300,CST:-360,CT:{timezoneOffsetDuringDst:-5*60,timezoneOffsetNonDst:-6*60,dstStart:t=>MA(t,$m.MARCH,Vs.SUNDAY,2,2),dstEnd:t=>MA(t,$m.NOVEMBER,Vs.SUNDAY,1,2)},CVT:-60,CXT:420,ChST:600,DAVT:420,EASST:-300,EAST:-360,EAT:180,ECT:-300,EDT:-240,EEST:180,EET:120,EGST:0,EGT:-60,EST:-300,ET:{timezoneOffsetDuringDst:-4*60,timezoneOffsetNonDst:-5*60,dstStart:t=>MA(t,$m.MARCH,Vs.SUNDAY,2,2),dstEnd:t=>MA(t,$m.NOVEMBER,Vs.SUNDAY,1,2)},FJST:780,FJT:720,FKST:-180,FKT:-240,FNT:-120,GALT:-360,GAMT:-540,GET:240,GFT:-180,GILT:720,GMT:0,GST:240,GYT:-240,HAA:-180,HAC:-300,HADT:-540,HAE:-240,HAP:-420,HAR:-360,HAST:-600,HAT:-90,HAY:-480,HKT:480,HLV:-210,HNA:-240,HNC:-360,HNE:-300,HNP:-480,HNR:-420,HNT:-150,HNY:-540,HOVT:420,ICT:420,IDT:180,IOT:360,IRDT:270,IRKST:540,IRKT:540,IRST:210,IST:330,JST:540,KGT:360,KRAST:480,KRAT:480,KST:540,KUYT:240,LHDT:660,LHST:630,LINT:840,MAGST:720,MAGT:720,MART:-510,MAWT:300,MDT:-360,MESZ:120,MEZ:60,MHT:720,MMT:390,MSD:240,MSK:180,MST:-420,MT:{timezoneOffsetDuringDst:-6*60,timezoneOffsetNonDst:-7*60,dstStart:t=>MA(t,$m.MARCH,Vs.SUNDAY,2,2),dstEnd:t=>MA(t,$m.NOVEMBER,Vs.SUNDAY,1,2)},MUT:240,MVT:300,MYT:480,NCT:660,NDT:-90,NFT:690,NOVST:420,NOVT:360,NPT:345,NST:-150,NUT:-660,NZDT:780,NZST:720,OMSST:420,OMST:420,PDT:-420,PET:-300,PETST:720,PETT:720,PGT:600,PHOT:780,PHT:480,PKT:300,PMDT:-120,PMST:-180,PONT:660,PST:-480,PT:{timezoneOffsetDuringDst:-7*60,timezoneOffsetNonDst:-8*60,dstStart:t=>MA(t,$m.MARCH,Vs.SUNDAY,2,2),dstEnd:t=>MA(t,$m.NOVEMBER,Vs.SUNDAY,1,2)},PWT:540,PYST:-180,PYT:-240,RET:240,SAMT:240,SAST:120,SBT:660,SCT:240,SGT:480,SRT:-180,SST:-660,TAHT:-600,TFT:300,TJT:300,TKT:780,TLT:540,TMT:300,TVT:720,ULAT:480,UTC:0,UYST:-120,UYT:-180,UZT:300,VET:-210,VLAST:660,VLAT:660,VUT:660,WAST:120,WAT:60,WEST:60,WESZ:60,WET:0,WEZ:0,WFT:720,WGST:-120,WGT:-180,WIB:420,WIT:540,WITA:480,WST:780,WT:0,YAKST:600,YAKT:600,YAPT:600,YEKST:360,YEKT:360};function MA(t,e,r,n,o=0){let i=0,a=0;for(;a<n;)i++,new Date(t,e-1,i).getDay()===r&&a++;return new Date(t,e-1,i,o)}function _Et(t,e,r,n=0){let o=r===0?7:r,i=new Date(t,e-1+1,1,12),a=i.getDay()===0?7:i.getDay(),s;return a===o?s=7:a<o?s=7+a-o:s=a-o,i.setDate(i.getDate()-s),new Date(t,e-1,i.getDate(),n)}function Xne(t,e,r={}){if(t==null)return null;if(typeof t=="number")return t;let n=r[t]??D8r[t];return n==null?null:typeof n=="number"?n:e==null?null:(0,oIe.default)(e).isAfter(n.dstStart(e.getFullYear()))&&!(0,oIe.default)(e).isAfter(n.dstEnd(e.getFullYear()))?n.timezoneOffsetDuringDst:n.timezoneOffsetNonDst}YV.default.extend(vEt.default);var RA=class{constructor(e){e=e??new Date,e instanceof Date?this.instant=e:(this.instant=e.instant??new Date,this.timezoneOffset=Xne(e.timezone,this.instant))}getDateWithAdjustedTimezone(){return new Date(this.instant.getTime()+this.getSystemTimezoneAdjustmentMinute(this.instant)*6e4)}getSystemTimezoneAdjustmentMinute(e,r){(!e||e.getTime()<0)&&(e=new Date);let n=-e.getTimezoneOffset(),o=r??this.timezoneOffset??n;return n-o}},Qn=class t{constructor(e,r){if(this._tags=new Set,this.reference=e,this.knownValues={},this.impliedValues={},r)for(let o in r)this.knownValues[o]=r[o];let n=(0,YV.default)(e.instant);this.imply("day",n.date()),this.imply("month",n.month()+1),this.imply("year",n.year()),this.imply("hour",12),this.imply("minute",0),this.imply("second",0),this.imply("millisecond",0)}get(e){return e in this.knownValues?this.knownValues[e]:e in this.impliedValues?this.impliedValues[e]:null}isCertain(e){return e in this.knownValues}getCertainComponents(){return Object.keys(this.knownValues)}imply(e,r){return e in this.knownValues?this:(this.impliedValues[e]=r,this)}assign(e,r){return this.knownValues[e]=r,delete this.impliedValues[e],this}delete(e){delete this.knownValues[e],delete this.impliedValues[e]}clone(){let e=new t(this.reference);e.knownValues={},e.impliedValues={};for(let r in this.knownValues)e.knownValues[r]=this.knownValues[r];for(let r in this.impliedValues)e.impliedValues[r]=this.impliedValues[r];return e}isOnlyDate(){return!this.isCertain("hour")&&!this.isCertain("minute")&&!this.isCertain("second")}isOnlyTime(){return!this.isCertain("weekday")&&!this.isCertain("day")&&!this.isCertain("month")&&!this.isCertain("year")}isOnlyWeekdayComponent(){return this.isCertain("weekday")&&!this.isCertain("day")&&!this.isCertain("month")}isDateWithUnknownYear(){return this.isCertain("month")&&!this.isCertain("year")}isValidDate(){let e=this.dateWithoutTimezoneAdjustment();return!(e.getFullYear()!==this.get("year")||e.getMonth()!==this.get("month")-1||e.getDate()!==this.get("day")||this.get("hour")!=null&&e.getHours()!=this.get("hour")||this.get("minute")!=null&&e.getMinutes()!=this.get("minute"))}toString(){return`[ParsingComponents {
            tags: ${JSON.stringify(Array.from(this._tags).sort())}, 
            knownValues: ${JSON.stringify(this.knownValues)}, 
            impliedValues: ${JSON.stringify(this.impliedValues)}}, 
            reference: ${JSON.stringify(this.reference)}]`}dayjs(){return(0,YV.default)(this.date())}date(){let e=this.dateWithoutTimezoneAdjustment(),r=this.reference.getSystemTimezoneAdjustmentMinute(e,this.get("timezoneOffset"));return new Date(e.getTime()+r*6e4)}addTag(e){return this._tags.add(e),this}addTags(e){for(let r of e)this._tags.add(r);return this}tags(){return new Set(this._tags)}dateWithoutTimezoneAdjustment(){let e=new Date(this.get("year"),this.get("month")-1,this.get("day"),this.get("hour"),this.get("minute"),this.get("second"),this.get("millisecond"));return e.setFullYear(this.get("year")),e}static createRelativeFromReference(e,r){let n=(0,YV.default)(e.instant);for(let i in r)n=n.add(r[i],i);let o=new t(e);return r.hour||r.minute||r.second?(Zne(o,n),Ly(o,n),e.timezoneOffset!==null&&o.assign("timezoneOffset",-e.instant.getTimezoneOffset())):($B(o,n),e.timezoneOffset!==null&&o.imply("timezoneOffset",-e.instant.getTimezoneOffset()),r.d?(o.assign("day",n.date()),o.assign("month",n.month()+1),o.assign("year",n.year())):r.week?(o.assign("day",n.date()),o.assign("month",n.month()+1),o.assign("year",n.year()),o.imply("weekday",n.day())):(o.imply("day",n.date()),r.month?(o.assign("month",n.month()+1),o.assign("year",n.year())):(o.imply("month",n.month()+1),r.year?o.assign("year",n.year()):o.imply("year",n.year())))),o}},RO=class t{constructor(e,r,n,o,i){this.reference=e,this.refDate=e.instant,this.index=r,this.text=n,this.start=o||new Qn(e),this.end=i}clone(){let e=new t(this.reference,this.index,this.text);return e.start=this.start?this.start.clone():null,e.end=this.end?this.end.clone():null,e}date(){return this.start.date()}tags(){let e=new Set(this.start.tags());if(this.end)for(let r of this.end.tags())e.add(r);return e}toString(){let e=Array.from(this.tags()).sort();return`[ParsingResult {index: ${this.index}, text: '${this.text}', tags: ${JSON.stringify(e)} ...}]`}};function iIe(t,e,r="\\s{0,5},?\\s{0,5}"){let n=e.replace(/\((?!\?)/g,"(?:");return`${t}${n}(?:${r}${n}){0,10}`}function L8r(t){let e;return t instanceof Array?e=[...t]:t instanceof Map?e=Array.from(t.keys()):e=Object.keys(t),e}function $c(t){return`(?:${L8r(t).sort((r,n)=>n.length-r.length).join("|").replace(/\./g,"\\.")})`}var wEt=F(IA(),1);function Qne(t){return t<100&&(t>50?t=t+1900:t=t+2e3),t}function jA(t,e,r){let n=(0,wEt.default)(t),o=n;o=o.month(r-1),o=o.date(e),o=o.year(n.year());let i=o.add(1,"y"),a=o.add(-1,"y");return Math.abs(i.diff(n))<Math.abs(o.diff(n))?o=i:Math.abs(a.diff(n))<Math.abs(o.diff(n))&&(o=a),o.year()}var uIe={sunday:0,sun:0,"sun.":0,monday:1,mon:1,"mon.":1,tuesday:2,tue:2,"tue.":2,wednesday:3,wed:3,"wed.":3,thursday:4,thurs:4,"thurs.":4,thur:4,"thur.":4,thu:4,"thu.":4,friday:5,fri:5,"fri.":5,saturday:6,sat:6,"sat.":6},lIe={january:1,february:2,march:3,april:4,may:5,june:6,july:7,august:8,september:9,october:10,november:11,december:12},eg={...lIe,jan:1,"jan.":1,feb:2,"feb.":2,mar:3,"mar.":3,apr:4,"apr.":4,jun:6,"jun.":6,jul:7,"jul.":7,aug:8,"aug.":8,sep:9,"sep.":9,sept:9,"sept.":9,oct:10,"oct.":10,nov:11,"nov.":11,dec:12,"dec.":12},aIe={one:1,two:2,three:3,four:4,five:5,six:6,seven:7,eight:8,nine:9,ten:10,eleven:11,twelve:12},sIe={first:1,second:2,third:3,fourth:4,fifth:5,sixth:6,seventh:7,eighth:8,ninth:9,tenth:10,eleventh:11,twelfth:12,thirteenth:13,fourteenth:14,fifteenth:15,sixteenth:16,seventeenth:17,eighteenth:18,nineteenth:19,twentieth:20,"twenty first":21,"twenty-first":21,"twenty second":22,"twenty-second":22,"twenty third":23,"twenty-third":23,"twenty fourth":24,"twenty-fourth":24,"twenty fifth":25,"twenty-fifth":25,"twenty sixth":26,"twenty-sixth":26,"twenty seventh":27,"twenty-seventh":27,"twenty eighth":28,"twenty-eighth":28,"twenty ninth":29,"twenty-ninth":29,thirtieth:30,"thirty first":31,"thirty-first":31},xEt={second:"second",seconds:"second",minute:"minute",minutes:"minute",hour:"hour",hours:"hour",day:"d",days:"d",week:"week",weeks:"week",month:"month",months:"month",quarter:"quarter",quarters:"quarter",year:"year",years:"year"},ZV={s:"second",sec:"second",second:"second",seconds:"second",m:"minute",min:"minute",mins:"minute",minute:"minute",minutes:"minute",h:"hour",hr:"hour",hrs:"hour",hour:"hour",hours:"hour",d:"d",day:"d",days:"d",w:"w",week:"week",weeks:"week",mo:"month",mon:"month",mos:"month",month:"month",months:"month",qtr:"quarter",quarter:"quarter",quarters:"quarter",y:"year",yr:"year",year:"year",years:"year",...xEt},CEt=`(?:${$c(aIe)}|[0-9]+|[0-9]+\\.[0-9]+|half(?:\\s{0,2}an?)?|an?\\b(?:\\s{0,2}few)?|few|several|the|a?\\s{0,2}couple\\s{0,2}(?:of)?)`;function F8r(t){let e=t.toLowerCase();return aIe[e]!==void 0?aIe[e]:e==="a"||e==="an"||e=="the"?1:e.match(/few/)?3:e.match(/half/)?.5:e.match(/couple/)?2:e.match(/several/)?7:parseFloat(e)}var BB=`(?:${$c(sIe)}|[0-9]{1,2}(?:st|nd|rd|th)?)`;function qB(t){let e=t.toLowerCase();return sIe[e]!==void 0?sIe[e]:(e=e.replace(/(?:st|nd|rd|th)$/i,""),parseInt(e))}var NA="(?:[1-9][0-9]{0,3}\\s{0,2}(?:BE|AD|BC|BCE|CE)|[1-2][0-9]{3}|[5-9][0-9]|2[0-5])";function DA(t){if(/BE/i.test(t))return t=t.replace(/BE/i,""),parseInt(t)-543;if(/BCE?/i.test(t))return t=t.replace(/BCE?/i,""),-parseInt(t);if(/(AD|CE)/i.test(t))return t=t.replace(/(AD|CE)/i,""),parseInt(t);let e=parseInt(t);return Qne(e)}var OEt=`(${CEt})\\s{0,3}(${$c(ZV)})`,SEt=new RegExp(OEt,"i"),k8r=`(${CEt})\\s{0,3}(${$c(xEt)})`,PEt="\\s{0,5},?(?:\\s*and)?\\s{0,5}",jO=iIe("(?:(?:about|around)\\s{0,3})?",OEt,PEt),LA=iIe("(?:(?:about|around)\\s{0,3})?",k8r,PEt);function tg(t){let e={},r=t,n=SEt.exec(r);for(;n;)$8r(e,n),r=r.substring(n[0].length).trim(),n=SEt.exec(r);return Object.keys(e).length==0?null:e}function $8r(t,e){if(e[0].match(/^[a-zA-Z]+$/))return;let r=F8r(e[1]),n=ZV[e[2].toLowerCase()];t[n]=r}var ai=class{constructor(){this.cachedInnerPattern=null,this.cachedPattern=null}innerPatternHasChange(e,r){return this.innerPattern(e)!==r}patternLeftBoundary(){return"(\\W|^)"}pattern(e){return this.cachedInnerPattern&&!this.innerPatternHasChange(e,this.cachedInnerPattern)?this.cachedPattern:(this.cachedInnerPattern=this.innerPattern(e),this.cachedPattern=new RegExp(`${this.patternLeftBoundary()}${this.cachedInnerPattern.source}`,this.cachedInnerPattern.flags),this.cachedPattern)}extract(e,r){let n=r[1]??"";r.index=r.index+n.length,r[0]=r[0].substring(n.length);for(let o=2;o<r.length;o++)r[o-1]=r[o];return this.innerExtract(e,r)}};var B8r=new RegExp(`(?:(?:within|in|for)\\s*)?(?:(?:about|around|roughly|approximately|just)\\s*(?:~\\s*)?)?(${jO})(?=\\W|$)`,"i"),q8r=new RegExp(`(?:within|in|for)\\s*(?:(?:about|around|roughly|approximately|just)\\s*(?:~\\s*)?)?(${jO})(?=\\W|$)`,"i"),U8r=new RegExp(`(?:within|in|for)\\s*(?:(?:about|around|roughly|approximately|just)\\s*(?:~\\s*)?)?(${LA})(?=\\W|$)`,"i"),XV=class extends ai{constructor(e){super(),this.strictMode=e}innerPattern(e){return this.strictMode?U8r:e.option.forwardDate?B8r:q8r}innerExtract(e,r){if(r[0].match(/^for\s*the\s*\w+/))return null;let n=tg(r[1]);return n?Qn.createRelativeFromReference(e.reference,n):null}};var z8r=new RegExp(`(?:on\\s{0,3})?(${BB})(?:\\s{0,3}(?:to|\\-|\\\u2013|until|through|till)?\\s{0,3}(${BB}))?(?:-|/|\\s{0,3}(?:of)?\\s{0,3})(${$c(eg)})(?:(?:-|/|,?\\s{0,3})(${NA}(?!\\w)))?(?=\\W|$)`,"i"),EEt=1,TEt=2,H8r=3,AEt=4,QV=class extends ai{innerPattern(){return z8r}innerExtract(e,r){let n=e.createParsingResult(r.index,r[0]),o=eg[r[H8r].toLowerCase()],i=qB(r[EEt]);if(i>31)return r.index=r.index+r[EEt].length,null;if(n.start.assign("month",o),n.start.assign("day",i),r[AEt]){let a=DA(r[AEt]);n.start.assign("year",a)}else{let a=jA(e.refDate,i,o);n.start.imply("year",a)}if(r[TEt]){let a=qB(r[TEt]);n.end=n.start.clone(),n.end.assign("day",a)}return n}};var V8r=new RegExp(`(${$c(eg)})(?:-|/|\\s*,?\\s*)(${BB})(?!\\s*(?:am|pm))\\s*(?:(?:to|\\-)\\s*(${BB})\\s*)?(?:(?:-|/|\\s*,\\s*|\\s+)(${NA}))?(?=\\W|$)(?!\\:\\d)`,"i"),W8r=1,IEt=2,cIe=3,dIe=4,e8=class extends ai{constructor(e){super(),this.shouldSkipYearLikeDate=e}innerPattern(){return V8r}innerExtract(e,r){let n=eg[r[W8r].toLowerCase()],o=qB(r[IEt]);if(o>31||this.shouldSkipYearLikeDate&&!r[cIe]&&!r[dIe]&&r[IEt].match(/^2[0-5]$/))return null;let i=e.createParsingComponents({day:o,month:n}).addTag("parser/ENMonthNameMiddleEndianParser");if(r[dIe]){let u=DA(r[dIe]);i.assign("year",u)}else{let u=jA(e.refDate,o,n);i.imply("year",u)}if(!r[cIe])return i;let a=qB(r[cIe]),s=e.createParsingResult(r.index,r[0]);return s.start=i,s.end=i.clone(),s.end.assign("day",a),s}};var K8r=new RegExp(`((?:in)\\s*)?(${$c(eg)})\\s*(?:[,-]?\\s*(${NA})?)?(?=[^\\s\\w]|\\s+[^0-9]|\\s+$|$)`,"i"),G8r=1,J8r=2,MEt=3,t8=class extends ai{innerPattern(){return K8r}innerExtract(e,r){let n=r[J8r].toLowerCase();if(r[0].length<=3&&!lIe[n])return null;let o=e.createParsingResult(r.index+(r[G8r]||"").length,r.index+r[0].length);o.start.imply("day",1),o.start.addTag("parser/ENMonthNameParser");let i=eg[n];if(o.start.assign("month",i),r[MEt]){let a=DA(r[MEt]);o.start.assign("year",a)}else{let a=jA(e.refDate,1,i);o.start.imply("year",a)}return o}};var Y8r=new RegExp(`([0-9]{4})[-\\.\\/\\s](?:(${$c(eg)})|([0-9]{1,2}))[-\\.\\/\\s]([0-9]{1,2})(?=\\W|$)`,"i"),Z8r=1,X8r=2,REt=3,Q8r=4,r8=class extends ai{constructor(e){super(),this.strictMonthDateOrder=e}innerPattern(){return Y8r}innerExtract(e,r){let n=parseInt(r[Z8r]),o=parseInt(r[Q8r]),i=r[REt]?parseInt(r[REt]):eg[r[X8r].toLowerCase()];if(i<1||i>12){if(this.strictMonthDateOrder)return null;o>=1&&o<=12&&([i,o]=[o,i])}return o<1||o>31?null:{day:o,month:i,year:n}}};var e6r=new RegExp("([0-9]|0[1-9]|1[012])/([0-9]{4})","i"),t6r=1,r6r=2,n8=class extends ai{innerPattern(){return e6r}innerExtract(e,r){let n=parseInt(r[r6r]),o=parseInt(r[t6r]);return e.createParsingComponents().imply("day",1).assign("month",o).assign("year",n)}};function n6r(t,e,r,n){return new RegExp(`${t}${e}(\\d{1,4})(?:(?:\\.|:|\uFF1A)(\\d{1,2})(?:(?::|\uFF1A)(\\d{2})(?:\\.(\\d{1,6}))?)?)?(?:\\s*(a\\.m\\.|p\\.m\\.|am?|pm?))?${r}`,n)}function o6r(t,e){return new RegExp(`^(${t})(\\d{1,4})(?:(?:\\.|\\:|\\\uFF1A)(\\d{1,2})(?:(?:\\.|\\:|\\\uFF1A)(\\d{1,2})(?:\\.(\\d{1,6}))?)?)?(?:\\s*(a\\.m\\.|p\\.m\\.|am?|pm?))?${e}`,"i")}var jEt=2,UB=3,eoe=4,toe=5,o8=6,roe=class{constructor(e=!1){this.cachedPrimaryPrefix=null,this.cachedPrimarySuffix=null,this.cachedPrimaryTimePattern=null,this.cachedFollowingPhase=null,this.cachedFollowingSuffix=null,this.cachedFollowingTimePatten=null,this.strictMode=e}patternFlags(){return"i"}primaryPatternLeftBoundary(){return"(^|\\s|T|\\b)"}primarySuffix(){return"(?!/)(?=\\W|$)"}followingSuffix(){return"(?!/)(?=\\W|$)"}pattern(e){return this.getPrimaryTimePatternThroughCache()}extract(e,r){let n=this.extractPrimaryTimeComponents(e,r);if(!n)return r[0].match(/^\d{4}/)?(r.index+=4,null):(r.index+=r[0].length,null);let o=r.index+r[1].length,i=r[0].substring(r[1].length),a=e.createParsingResult(o,i,n);r.index+=r[0].length;let s=e.text.substring(r.index),l=this.getFollowingTimePatternThroughCache().exec(s);return i.match(/^\d{3,4}/)&&l&&(l[0].match(/^\s*([+-])\s*\d{2,4}$/)||l[0].match(/^\s*([+-])\s*\d{2}\W\d{2}/))?null:!l||l[0].match(/^\s*([+-])\s*\d{3,4}$/)?this.checkAndReturnWithoutFollowingPattern(a):(a.end=this.extractFollowingTimeComponents(e,l,a),a.end&&(a.text+=l[0]),this.checkAndReturnWithFollowingPattern(a))}extractPrimaryTimeComponents(e,r,n=!1){let o=e.createParsingComponents(),i=0,a=null,s=parseInt(r[jEt]);if(s>100){if(this.strictMode||r[UB]!=null)return null;i=s%100,s=Math.floor(s/100)}if(s>24)return null;if(r[UB]!=null){if(r[UB].length==1&&!r[o8])return null;i=parseInt(r[UB])}if(i>=60)return null;if(s>12&&(a=Xn.PM),r[o8]!=null){if(s>12)return null;let u=r[o8][0].toLowerCase();u=="a"&&(a=Xn.AM,s==12&&(s=0)),u=="p"&&(a=Xn.PM,s!=12&&(s+=12))}if(o.assign("hour",s),o.assign("minute",i),a!==null?o.assign("meridiem",a):s<12?o.imply("meridiem",Xn.AM):o.imply("meridiem",Xn.PM),r[toe]!=null){let u=parseInt(r[toe].substring(0,3));if(u>=1e3)return null;o.assign("millisecond",u)}if(r[eoe]!=null){let u=parseInt(r[eoe]);if(u>=60)return null;o.assign("second",u)}return o}extractFollowingTimeComponents(e,r,n){let o=e.createParsingComponents();if(r[toe]!=null){let u=parseInt(r[toe].substring(0,3));if(u>=1e3)return null;o.assign("millisecond",u)}if(r[eoe]!=null){let u=parseInt(r[eoe]);if(u>=60)return null;o.assign("second",u)}let i=parseInt(r[jEt]),a=0,s=-1;if(r[UB]!=null?a=parseInt(r[UB]):i>100&&(a=i%100,i=Math.floor(i/100)),a>=60||i>24)return null;if(i>=12&&(s=Xn.PM),r[o8]!=null){if(i>12)return null;let u=r[o8][0].toLowerCase();u=="a"&&(s=Xn.AM,i==12&&(i=0,o.isCertain("day")||o.imply("day",o.get("day")+1))),u=="p"&&(s=Xn.PM,i!=12&&(i+=12)),n.start.isCertain("meridiem")||(s==Xn.AM?(n.start.imply("meridiem",Xn.AM),n.start.get("hour")==12&&n.start.assign("hour",0)):(n.start.imply("meridiem",Xn.PM),n.start.get("hour")!=12&&n.start.assign("hour",n.start.get("hour")+12)))}return o.assign("hour",i),o.assign("minute",a),s>=0?o.assign("meridiem",s):n.start.isCertain("meridiem")&&n.start.get("hour")>12?n.start.get("hour")-12>i?o.imply("meridiem",Xn.AM):i<=12&&(o.assign("hour",i+12),o.assign("meridiem",Xn.PM)):i>12?o.imply("meridiem",Xn.PM):i<=12&&o.imply("meridiem",Xn.AM),o.date().getTime()<n.start.date().getTime()&&o.imply("day",o.get("day")+1),o}checkAndReturnWithoutFollowingPattern(e){if(e.text.match(/^\d$/)||e.text.match(/^\d\d\d+$/)||e.text.match(/\d[apAP]$/))return null;let r=e.text.match(/[^\d:.](\d[\d.]+)$/);if(r){let n=r[1];if(this.strictMode||n.includes(".")&&!n.match(/\d(\.\d{2})+$/)||parseInt(n)>24)return null}return e}checkAndReturnWithFollowingPattern(e){if(e.text.match(/^\d+-\d+$/))return null;let r=e.text.match(/[^\d:.](\d[\d.]+)\s*-\s*(\d[\d.]+)$/);if(r){if(this.strictMode)return null;let n=r[1],o=r[2];if(o.includes(".")&&!o.match(/\d(\.\d{2})+$/))return null;let i=parseInt(o),a=parseInt(n);if(i>24||a>24)return null}return e}getPrimaryTimePatternThroughCache(){let e=this.primaryPrefix(),r=this.primarySuffix();return this.cachedPrimaryPrefix===e&&this.cachedPrimarySuffix===r?this.cachedPrimaryTimePattern:(this.cachedPrimaryTimePattern=n6r(this.primaryPatternLeftBoundary(),e,r,this.patternFlags()),this.cachedPrimaryPrefix=e,this.cachedPrimarySuffix=r,this.cachedPrimaryTimePattern)}getFollowingTimePatternThroughCache(){let e=this.followingPhase(),r=this.followingSuffix();return this.cachedFollowingPhase===e&&this.cachedFollowingSuffix===r?this.cachedFollowingTimePatten:(this.cachedFollowingTimePatten=o6r(e,r),this.cachedFollowingPhase=e,this.cachedFollowingSuffix=r,this.cachedFollowingTimePatten)}};var i8=class extends roe{constructor(e){super(e)}followingPhase(){return"\\s*(?:\\-|\\\u2013|\\~|\\\u301C|to|until|through|till|\\?)\\s*"}primaryPrefix(){return"(?:(?:at|from)\\s*)??"}primarySuffix(){return"(?:\\s*(?:o\\W*clock|at\\s*night|in\\s*the\\s*(?:morning|afternoon)))?(?!/)(?=\\W|$)"}extractPrimaryTimeComponents(e,r){let n=super.extractPrimaryTimeComponents(e,r);if(!n)return n;if(r[0].endsWith("night")){let o=n.get("hour");o>=6&&o<12?(n.assign("hour",n.get("hour")+12),n.assign("meridiem",Xn.PM)):o<6&&n.assign("meridiem",Xn.AM)}if(r[0].endsWith("afternoon")){n.assign("meridiem",Xn.PM);let o=n.get("hour");o>=0&&o<=6&&n.assign("hour",n.get("hour")+12)}return r[0].endsWith("morning")&&(n.assign("meridiem",Xn.AM),n.get("hour")<12&&n.assign("hour",n.get("hour"))),n.addTag("parser/ENTimeExpressionParser")}};function FA(t){let e={};for(let r in t)e[r]=-t[r];return e}function NEt(t,e){let r=t.clone(),n=t.dayjs();for(let o in e)n=n.add(e[o],o);return("day"in e||"d"in e||"week"in e||"month"in e||"year"in e)&&(r.imply("day",n.date()),r.imply("month",n.month()+1),r.imply("year",n.year())),("second"in e||"minute"in e||"hour"in e)&&(r.imply("second",n.second()),r.imply("minute",n.minute()),r.imply("hour",n.hour())),r}var i6r=new RegExp(`(${jO})\\s{0,5}(?:ago|before|earlier)(?=\\W|$)`,"i"),a6r=new RegExp(`(${LA})\\s{0,5}(?:ago|before|earlier)(?=\\W|$)`,"i"),a8=class extends ai{constructor(e){super(),this.strictMode=e}innerPattern(){return this.strictMode?a6r:i6r}innerExtract(e,r){let n=tg(r[1]);if(!n)return null;let o=FA(n);return Qn.createRelativeFromReference(e.reference,o)}};var s6r=new RegExp(`(${jO})\\s{0,5}(?:later|after|from now|henceforth|forward|out)(?=(?:\\W|$))`,"i"),u6r=new RegExp(`(${LA})\\s{0,5}(later|after|from now)(?=\\W|$)`,"i"),l6r=1,s8=class extends ai{constructor(e){super(),this.strictMode=e}innerPattern(){return this.strictMode?u6r:s6r}innerExtract(e,r){let n=tg(r[l6r]);return n?Qn.createRelativeFromReference(e.reference,n):null}};var noe=class{refine(e,r){return r.filter(n=>this.isValid(e,n))}},rg=class{refine(e,r){if(r.length<2)return r;let n=[],o=r[0],i=null;for(let a=1;a<r.length;a++){i=r[a];let s=e.text.substring(o.index+o.text.length,i.index);if(!this.shouldMergeResults(s,o,i,e))n.push(o),o=i;else{let u=o,l=i,c=this.mergeResults(s,u,l,e);e.debug(()=>{console.log(`${this.constructor.name} merged ${u} and ${l} into ${c}`)}),o=c}}return o!=null&&n.push(o),n}};var u8=class extends rg{shouldMergeResults(e,r,n){return!r.end&&!n.end&&e.match(this.patternBetween())!=null}mergeResults(e,r,n){if(!r.start.isOnlyWeekdayComponent()&&!n.start.isOnlyWeekdayComponent()&&(n.start.getCertainComponents().forEach(i=>{r.start.isCertain(i)||r.start.imply(i,n.start.get(i))}),r.start.getCertainComponents().forEach(i=>{n.start.isCertain(i)||n.start.imply(i,r.start.get(i))})),r.start.date().getTime()>n.start.date().getTime()){let i=r.start.dayjs(),a=n.start.dayjs();n.start.isOnlyWeekdayComponent()&&a.add(7,"days").isAfter(i)?(a=a.add(7,"days"),n.start.imply("day",a.date()),n.start.imply("month",a.month()+1),n.start.imply("year",a.year())):r.start.isOnlyWeekdayComponent()&&i.add(-7,"days").isBefore(a)?(i=i.add(-7,"days"),r.start.imply("day",i.date()),r.start.imply("month",i.month()+1),r.start.imply("year",i.year())):n.start.isDateWithUnknownYear()&&a.add(1,"years").isAfter(i)?(a=a.add(1,"years"),n.start.imply("year",a.year())):r.start.isDateWithUnknownYear()&&i.add(-1,"years").isBefore(a)?(i=i.add(-1,"years"),r.start.imply("year",i.year())):[n,r]=[r,n]}let o=r.clone();return o.start=r.start,o.end=n.start,o.index=Math.min(r.index,n.index),r.index<n.index?o.text=r.text+e+n.text:o.text=n.text+e+r.text,o}};var l8=class extends u8{patternBetween(){return/^\s*(to|-|–|until|through|till)\s*$/i}};function fIe(t,e){let r=t.clone(),n=t.start,o=e.start;if(r.start=DEt(n,o),t.end!=null||e.end!=null){let i=t.end==null?t.start:t.end,a=e.end==null?e.start:e.end,s=DEt(i,a);if(t.end==null&&s.date().getTime()<r.start.date().getTime()){let u=s.dayjs().add(1,"day");s.isCertain("day")?Ly(s,u):qj(s,u)}r.end=s}return r}function DEt(t,e){let r=t.clone();return e.isCertain("hour")?(r.assign("hour",e.get("hour")),r.assign("minute",e.get("minute")),e.isCertain("second")?(r.assign("second",e.get("second")),e.isCertain("millisecond")?r.assign("millisecond",e.get("millisecond")):r.imply("millisecond",e.get("millisecond"))):(r.imply("second",e.get("second")),r.imply("millisecond",e.get("millisecond")))):(r.imply("hour",e.get("hour")),r.imply("minute",e.get("minute")),r.imply("second",e.get("second")),r.imply("millisecond",e.get("millisecond"))),e.isCertain("timezoneOffset")&&r.assign("timezoneOffset",e.get("timezoneOffset")),e.isCertain("meridiem")?r.assign("meridiem",e.get("meridiem")):e.get("meridiem")!=null&&r.get("meridiem")==null&&r.imply("meridiem",e.get("meridiem")),r.get("meridiem")==Xn.PM&&r.get("hour")<12&&(e.isCertain("hour")?r.assign("hour",r.get("hour")+12):r.imply("hour",r.get("hour")+12)),r.addTags(t.tags()),r.addTags(e.tags()),r}var c8=class extends rg{shouldMergeResults(e,r,n){return(r.start.isOnlyDate()&&n.start.isOnlyTime()||n.start.isOnlyDate()&&r.start.isOnlyTime())&&e.match(this.patternBetween())!=null}mergeResults(e,r,n){let o=r.start.isOnlyDate()?fIe(r,n):fIe(n,r);return o.index=r.index,o.text=r.text+e+n.text,o}};var zB=class extends c8{patternBetween(){return new RegExp("^\\s*(T|at|after|before|on|of|,|-|\\.|\u2219|:)?\\s*$")}};var c6r=new RegExp("^\\s*,?\\s*\\(?([A-Z]{2,4})\\)?(?=\\W|$)","i"),d8=class{constructor(e){this.timezoneOverrides=e}refine(e,r){let n=e.option.timezones??{};return r.forEach(o=>{let i=e.text.substring(o.index+o.text.length),a=c6r.exec(i);if(!a)return;let s=a[1].toUpperCase(),u=o.start.date()??o.refDate??new Date,l={...this.timezoneOverrides,...n},c=Xne(s,u,l);if(c==null)return;e.debug(()=>{console.log(`Extracting timezone: '${s}' into: ${c} for: ${o.start}`)});let d=o.start.get("timezoneOffset");d!==null&&c!=d&&(o.start.isCertain("timezoneOffset")||s!=a[1])||o.start.isOnlyDate()&&s!=a[1]||(o.text+=a[0],o.start.isCertain("timezoneOffset")||o.start.assign("timezoneOffset",c),o.end!=null&&!o.end.isCertain("timezoneOffset")&&o.end.assign("timezoneOffset",c))}),r}};var d6r=new RegExp("^\\s*(?:\\(?(?:GMT|UTC)\\s?)?([+-])(\\d{1,2})(?::?(\\d{2}))?\\)?","i"),f6r=1,p6r=2,m6r=3,f8=class{refine(e,r){return r.forEach(function(n){if(n.start.isCertain("timezoneOffset"))return;let o=e.text.substring(n.index+n.text.length),i=d6r.exec(o);if(!i)return;e.debug(()=>{console.log(`Extracting timezone: '${i[0]}' into : ${n}`)});let a=parseInt(i[p6r]),s=parseInt(i[m6r]||"0"),u=a*60+s;u>14*60||(i[f6r]==="-"&&(u=-u),n.end!=null&&n.end.assign("timezoneOffset",u),n.start.assign("timezoneOffset",u),n.text+=i[0])}),r}};var kA=class{refine(e,r){if(r.length<2)return r;let n=[],o=r[0];for(let i=1;i<r.length;i++){let a=r[i];if(a.index>=o.index+o.text.length){n.push(o),o=a;continue}let s=null,u=null;a.text.length>o.text.length?(s=a,u=o):(s=o,u=a),e.debug(()=>{console.log(`${this.constructor.name} remove ${u} by ${s}`)}),o=s}return o!=null&&n.push(o),n}};var LEt=F(IA(),1);var p8=class{refine(e,r){return e.option.forwardDate&&r.forEach(n=>{let o=(0,LEt.default)(e.refDate);if(n.start.isOnlyTime()&&o.isAfter(n.start.dayjs())&&(o=o.add(1,"day"),qj(n.start,o),n.end&&n.end.isOnlyTime()&&(qj(n.end,o),n.start.dayjs().isAfter(n.end.dayjs())&&(o=o.add(1,"day"),qj(n.end,o))),e.debug(()=>{console.log(`${this.constructor.name} adjusted ${n} time result (${n.start})`)})),n.start.isOnlyWeekdayComponent()&&o.isAfter(n.start.dayjs())&&(o.day()>=n.start.get("weekday")?o=o.day(n.start.get("weekday")+7):o=o.day(n.start.get("weekday")),n.start.imply("day",o.date()),n.start.imply("month",o.month()+1),n.start.imply("year",o.year()),e.debug(()=>{console.log(`${this.constructor.name} adjusted ${n} weekday (${n.start})`)}),n.end&&n.end.isOnlyWeekdayComponent()&&(o.day()>n.end.get("weekday")?o=o.day(n.end.get("weekday")+7):o=o.day(n.end.get("weekday")),n.end.imply("day",o.date()),n.end.imply("month",o.month()+1),n.end.imply("year",o.year()),e.debug(()=>{console.log(`${this.constructor.name} adjusted ${n} weekday (${n.end})`)}))),n.start.isDateWithUnknownYear()&&o.isAfter(n.start.dayjs()))for(let i=0;i<3&&o.isAfter(n.start.dayjs());i++)n.start.imply("year",n.start.get("year")+1),e.debug(()=>{console.log(`${this.constructor.name} adjusted ${n} year (${n.start})`)}),n.end&&!n.end.isCertain("year")&&(n.end.imply("year",n.end.get("year")+1),e.debug(()=>{console.log(`${this.constructor.name} adjusted ${n} month (${n.start})`)}))}),r}};var m8=class extends noe{constructor(e){super(),this.strictMode=e}isValid(e,r){return r.text.replace(" ","").match(/^\d*(\.\d*)?$/)?(e.debug(()=>{console.log(`Removing unlikely result '${r.text}'`)}),!1):r.start.isValidDate()?r.end&&!r.end.isValidDate()?(e.debug(()=>{console.log(`Removing invalid result: ${r} (${r.end})`)}),!1):this.strictMode?this.isStrictModeValid(e,r):!0:(e.debug(()=>{console.log(`Removing invalid result: ${r} (${r.start})`)}),!1)}isStrictModeValid(e,r){return r.start.isOnlyWeekdayComponent()?(e.debug(()=>{console.log(`(Strict) Removing weekday only component: ${r} (${r.end})`)}),!1):r.start.isOnlyTime()&&(!r.start.isCertain("hour")||!r.start.isCertain("minute"))?(e.debug(()=>{console.log(`(Strict) Removing uncertain time component: ${r} (${r.end})`)}),!1):!0}};var h6r=new RegExp("([0-9]{4})\\-([0-9]{1,2})\\-([0-9]{1,2})(?:T([0-9]{1,2}):([0-9]{1,2})(?::([0-9]{1,2})(?:\\.(\\d{1,4}))?)?(Z|([+-]\\d{2}):?(\\d{2})?)?)?(?=\\W|$)","i"),g6r=1,y6r=2,b6r=3,FEt=4,_6r=5,kEt=6,$Et=7,v6r=8,BEt=9,qEt=10,h8=class extends ai{innerPattern(){return h6r}innerExtract(e,r){let n=e.createParsingComponents({year:parseInt(r[g6r]),month:parseInt(r[y6r]),day:parseInt(r[b6r])});if(r[FEt]!=null&&(n.assign("hour",parseInt(r[FEt])),n.assign("minute",parseInt(r[_6r])),r[kEt]!=null&&n.assign("second",parseInt(r[kEt])),r[$Et]!=null&&n.assign("millisecond",parseInt(r[$Et])),r[v6r]!=null)){let o=0;if(r[BEt]){let i=parseInt(r[BEt]),a=0;r[qEt]!=null&&(a=parseInt(r[qEt])),o=i*60,o<0?o-=a:o+=a}n.assign("timezoneOffset",o)}return n.addTag("parser/ISOFormatParser")}};var g8=class extends rg{mergeResults(e,r,n){let o=n.clone();return o.index=r.index,o.text=r.text+e+o.text,o.start.assign("weekday",r.start.get("weekday")),o.end&&o.end.assign("weekday",r.start.get("weekday")),o}shouldMergeResults(e,r,n){return r.start.isOnlyWeekdayComponent()&&!r.start.isCertain("hour")&&n.start.isCertain("day")&&e.match(/^,?\s*$/)!=null}};function UEt(t,e=!1){return t.parsers.unshift(new h8),t.refiners.unshift(new g8),t.refiners.unshift(new f8),t.refiners.unshift(new kA),t.refiners.push(new d8),t.refiners.push(new kA),t.refiners.push(new p8),t.refiners.push(new m8(e)),t}var tTt=F(IA(),1);var HB=F(IA(),1);function zEt(t){let e=(0,HB.default)(t.instant),r=new Qn(t,{});return Ly(r,e),Zne(r,e),t.timezoneOffset!==null&&r.assign("timezoneOffset",e.utcOffset()),r.addTag("casualReference/now"),r}function HEt(t){let e=(0,HB.default)(t.instant),r=new Qn(t,{});return Ly(r,e),$B(r,e),r.addTag("casualReference/today"),r}function VEt(t){return w6r(t,1).addTag("casualReference/yesterday")}function w6r(t,e){return KEt(t,-e)}function WEt(t){return KEt(t,1).addTag("casualReference/tomorrow")}function KEt(t,e){let r=(0,HB.default)(t.instant),n=new Qn(t,{});return r=r.add(e,"day"),Ly(n,r),$B(n,r),n}function GEt(t,e=22){let r=(0,HB.default)(t.instant),n=new Qn(t,{});return Ly(n,r),n.imply("hour",e),n.imply("meridiem",Xn.PM),n.addTag("casualReference/tonight"),n}function JEt(t,e=20){let r=new Qn(t,{});return r.imply("meridiem",Xn.PM),r.imply("hour",e),r.addTag("casualReference/evening"),r}function YEt(t){let e=new Qn(t,{}),r=(0,HB.default)(t.instant);return r.hour()>2&&bEt(e,r),e.assign("hour",0),e.imply("minute",0),e.imply("second",0),e.imply("millisecond",0),e.addTag("casualReference/midnight"),e}function ZEt(t,e=6){let r=new Qn(t,{});return r.imply("meridiem",Xn.AM),r.imply("hour",e),r.imply("minute",0),r.imply("second",0),r.imply("millisecond",0),r.addTag("casualReference/morning"),r}function XEt(t,e=15){let r=new Qn(t,{});return r.imply("meridiem",Xn.PM),r.imply("hour",e),r.imply("minute",0),r.imply("second",0),r.imply("millisecond",0),r.addTag("casualReference/afternoon"),r}function QEt(t){let e=new Qn(t,{});return e.imply("meridiem",Xn.AM),e.imply("hour",12),e.imply("minute",0),e.imply("second",0),e.imply("millisecond",0),e.addTag("casualReference/noon"),e}var S6r=/(now|today|tonight|tomorrow|tmr|tmrw|yesterday|last\s*night)(?=\W|$)/i,y8=class extends ai{innerPattern(e){return S6r}innerExtract(e,r){let n=(0,tTt.default)(e.refDate),o=r[0].toLowerCase(),i=e.createParsingComponents();switch(o){case"now":i=zEt(e.reference);break;case"today":i=HEt(e.reference);break;case"yesterday":i=VEt(e.reference);break;case"tomorrow":case"tmr":case"tmrw":i=WEt(e.reference);break;case"tonight":i=GEt(e.reference);break;default:o.match(/last\s*night/)&&(n.hour()>6&&(n=n.add(-1,"day")),Ly(i,n),i.imply("hour",0));break}return i.addTag("parser/ENCasualDateParser"),i}};var x6r=/(?:this)?\s{0,3}(morning|afternoon|evening|night|midnight|midday|noon)(?=\W|$)/i,b8=class extends ai{innerPattern(){return x6r}innerExtract(e,r){let n=null;switch(r[1].toLowerCase()){case"afternoon":n=XEt(e.reference);break;case"evening":case"night":n=JEt(e.reference);break;case"midnight":n=YEt(e.reference);break;case"morning":n=ZEt(e.reference);break;case"noon":case"midday":n=QEt(e.reference);break}return n&&n.addTag("parser/ENCasualTimeParser"),n}};function rTt(t,e,r){let n=t.getDateWithAdjustedTimezone(),o=C6r(n,e,r),i=new Qn(t);return i=NEt(i,{day:o}),i.assign("weekday",e),i}function C6r(t,e,r){let n=t.getDay();switch(r){case"this":return ooe(t,e);case"last":return nTt(t,e);case"next":return n==Vs.SUNDAY?e==Vs.SUNDAY?7:e:n==Vs.SATURDAY?e==Vs.SATURDAY?7:e==Vs.SUNDAY?8:1+e:e<n&&e!=Vs.SUNDAY?ooe(t,e):ooe(t,e)+7}return O6r(t,e)}function O6r(t,e){let r=nTt(t,e),n=ooe(t,e);return n<-r?n:r}function ooe(t,e){let r=t.getDay(),n=e-r;return n<0&&(n+=7),n}function nTt(t,e){let r=t.getDay(),n=e-r;return n>=0&&(n-=7),n}var P6r=new RegExp(`(?:(?:\\,|\\(|\\\uFF08)\\s*)?(?:on\\s*?)?(?:(this|last|past|next)\\s*)?(${$c(uIe)})(?:\\s*(?:\\,|\\)|\\\uFF09))?(?:\\s*(this|last|past|next)\\s*week)?(?=\\W|$)`,"i"),E6r=1,T6r=2,A6r=3,_8=class extends ai{innerPattern(){return P6r}innerExtract(e,r){let n=r[T6r].toLowerCase(),o=uIe[n],i=r[E6r],a=r[A6r],s=i||a;s=s||"",s=s.toLowerCase();let u=null;return s=="last"||s=="past"?u="last":s=="next"?u="next":s=="this"&&(u="this"),rTt(e.reference,o,u)}};var oTt=F(IA(),1);var I6r=new RegExp(`(this|last|past|next|after\\s*this)\\s*(${$c(ZV)})(?=\\s*)(?=\\W|$)`,"i"),M6r=1,R6r=2,v8=class extends ai{innerPattern(){return I6r}innerExtract(e,r){let n=r[M6r].toLowerCase(),o=r[R6r].toLowerCase(),i=ZV[o];if(n=="next"||n.startsWith("after")){let u={};return u[i]=1,Qn.createRelativeFromReference(e.reference,u)}if(n=="last"||n=="past"){let u={};return u[i]=-1,Qn.createRelativeFromReference(e.reference,u)}let a=e.createParsingComponents(),s=(0,oTt.default)(e.reference.instant);return o.match(/week/i)?(s=s.add(-s.get("d"),"d"),a.imply("day",s.date()),a.imply("month",s.month()+1),a.imply("year",s.year())):o.match(/month/i)?(s=s.add(-s.date()+1,"d"),a.imply("day",s.date()),a.assign("year",s.year()),a.assign("month",s.month()+1)):o.match(/year/i)&&(s=s.add(-s.date()+1,"d"),s=s.add(-s.month(),"month"),a.imply("day",s.date()),a.imply("month",s.month()+1),a.assign("year",s.year())),a}};var j6r=new RegExp("([^\\d]|^)([0-3]{0,1}[0-9]{1})[\\/\\.\\-]([0-3]{0,1}[0-9]{1})(?:[\\/\\.\\-]([0-9]{4}|[0-9]{2}))?(\\W|$)","i"),N6r=1,D6r=5,iTt=2,aTt=3,pIe=4,w8=class{constructor(e){this.groupNumberMonth=e?aTt:iTt,this.groupNumberDay=e?iTt:aTt}pattern(){return j6r}extract(e,r){let n=r.index+r[N6r].length,o=r.index+r[0].length-r[D6r].length;if(n>0&&e.text.substring(0,n).match("\\d/?$")||o<e.text.length&&e.text.substring(o).match("^/?\\d"))return;let i=e.text.substring(n,o);if(i.match(/^\d\.\d$/)||i.match(/^\d\.\d{1,2}\.\d{1,2}\s*$/)||!r[pIe]&&i.indexOf("/")<0)return;let a=e.createParsingResult(n,i),s=parseInt(r[this.groupNumberMonth]),u=parseInt(r[this.groupNumberDay]);if((s<1||s>12)&&s>12)if(u>=1&&u<=12&&s<=31)[u,s]=[s,u];else return null;if(u<1||u>31)return null;if(a.start.assign("day",u),a.start.assign("month",s),r[pIe]){let l=parseInt(r[pIe]),c=Qne(l);a.start.assign("year",c)}else{let l=jA(e.refDate,u,s);a.start.imply("year",l)}return a}};var L6r=new RegExp(`(this|last|past|next|after|\\+|-)\\s*(${jO})(?=\\W|$)`,"i"),F6r=new RegExp(`(this|last|past|next|after|\\+|-)\\s*(${LA})(?=\\W|$)`,"i"),S8=class extends ai{constructor(e=!0){super(),this.allowAbbreviations=e}innerPattern(){return this.allowAbbreviations?L6r:F6r}innerExtract(e,r){let n=r[1].toLowerCase(),o=tg(r[2]);if(!o)return null;switch(n){case"last":case"past":case"-":o=FA(o);break}return Qn.createRelativeFromReference(e.reference,o)}};function k6r(t){return t.text.match(/^[+-]/i)!=null}function sTt(t){return t.text.match(/^-/i)!=null}var x8=class extends rg{shouldMergeResults(e,r,n){return e.match(/^\s*$/i)?k6r(n)||sTt(n):!1}mergeResults(e,r,n,o){let i=tg(n.text);sTt(n)&&(i=FA(i));let a=Qn.createRelativeFromReference(new RA(r.start.date()),i);return new RO(r.reference,r.index,`${r.text}${e}${n.text}`,a)}};function uTt(t){return t.text.match(/\s+(before|from)$/i)!=null}function $6r(t){return t.text.match(/\s+(after|since)$/i)!=null}var C8=class extends rg{patternBetween(){return/^\s*$/i}shouldMergeResults(e,r,n){return!e.match(this.patternBetween())||!uTt(r)&&!$6r(r)?!1:!!n.start.get("day")&&!!n.start.get("month")&&!!n.start.get("year")}mergeResults(e,r,n){let o=tg(r.text);uTt(r)&&(o=FA(o));let i=Qn.createRelativeFromReference(new RA(n.start.date()),o);return new RO(n.reference,r.index,`${r.text}${e}${n.text}`,i)}};var B6r=new RegExp(`^\\s*(${NA})`,"i"),q6r=1,O8=class{refine(e,r){return r.forEach(function(n){if(!n.start.isDateWithUnknownYear())return;let o=e.text.substring(n.index+n.text.length),i=B6r.exec(o);if(!i)return;e.debug(()=>{console.log(`Extracting year: '${i[0]}' into : ${n}`)});let a=DA(i[q6r]);n.end!=null&&n.end.assign("year",a),n.start.assign("year",a),n.text+=i[0]}),r}};var Uj=class{createCasualConfiguration(e=!1){let r=this.createConfiguration(!1,e);return r.parsers.push(new y8),r.parsers.push(new b8),r.parsers.push(new t8),r.parsers.push(new v8),r.parsers.push(new S8),r}createConfiguration(e=!0,r=!1){let n=UEt({parsers:[new w8(r),new XV(e),new QV,new e8(r),new _8,new n8,new i8(e),new a8(e),new s8(e)],refiners:[new zB]},e);return n.parsers.unshift(new r8(e)),n.refiners.unshift(new C8),n.refiners.unshift(new x8),n.refiners.unshift(new kA),n.refiners.push(new zB),n.refiners.push(new O8),n.refiners.push(new l8),n}};var VB=class t{constructor(e){this.defaultConfig=new Uj,e=e||this.defaultConfig.createCasualConfiguration(),this.parsers=[...e.parsers],this.refiners=[...e.refiners]}clone(){return new t({parsers:[...this.parsers],refiners:[...this.refiners]})}parseDate(e,r,n){let o=this.parse(e,r,n);return o.length>0?o[0].start.date():null}parse(e,r,n){let o=new mIe(e,r,n),i=[];return this.parsers.forEach(a=>{let s=t.executeParser(o,a);i=i.concat(s)}),i.sort((a,s)=>a.index-s.index),this.refiners.forEach(function(a){i=a.refine(o,i)}),i}static executeParser(e,r){let n=[],o=r.pattern(e),i=e.text,a=e.text,s=o.exec(a);for(;s;){let u=s.index+i.length-a.length;s.index=u;let l=r.extract(e,s);if(!l){a=i.substring(s.index+1),s=o.exec(a);continue}let c=null;l instanceof RO?c=l:l instanceof Qn?(c=e.createParsingResult(s.index,s[0]),c.start=l):c=e.createParsingResult(s.index,s[0],l);let d=c.index,f=c.text;e.debug(()=>console.log(`${r.constructor.name} extracted (at index=${d}) '${f}'`)),n.push(c),a=i.substring(d+f.length),s=o.exec(a)}return n}},mIe=class{constructor(e,r,n){this.text=e,this.reference=new RA(r),this.option=n??{},this.refDate=this.reference.instant}createParsingComponents(e){return e instanceof Qn?e:new Qn(this.reference,e)}createParsingResult(e,r,n,o){let i=typeof r=="string"?r:this.text.substring(e,r),a=n?this.createParsingComponents(n):null,s=o?this.createParsingComponents(o):null;return new RO(this.reference,e,i,a,s)}debug(e){this.option.debug&&(this.option.debug instanceof Function?this.option.debug(e):this.option.debug.debug(e))}};var hIe=new Uj,lTt=new VB(hIe.createCasualConfiguration(!1)),U6r=new VB(hIe.createConfiguration(!0,!1)),qBo=new VB(hIe.createCasualConfiguration(!0));var H6r=lTt;function gIe(t,e,r){return H6r.parse(t,e,r)}var NO=class extends Error{},ioe=class extends NO{constructor(e){super(`Invalid DateTime: ${e.toMessage()}`)}},aoe=class extends NO{constructor(e){super(`Invalid Interval: ${e.toMessage()}`)}},soe=class extends NO{constructor(e){super(`Invalid Duration: ${e.toMessage()}`)}},Fy=class extends NO{},WB=class extends NO{constructor(e){super(`Invalid unit ${e}`)}},ls=class extends NO{},ky=class extends NO{constructor(){super("Zone is an abstract class")}};var lt="numeric",$y="short",Bm="long",$A={year:lt,month:lt,day:lt},P8={year:lt,month:$y,day:lt},yIe={year:lt,month:$y,day:lt,weekday:$y},E8={year:lt,month:Bm,day:lt},T8={year:lt,month:Bm,day:lt,weekday:Bm},A8={hour:lt,minute:lt},I8={hour:lt,minute:lt,second:lt},M8={hour:lt,minute:lt,second:lt,timeZoneName:$y},R8={hour:lt,minute:lt,second:lt,timeZoneName:Bm},j8={hour:lt,minute:lt,hourCycle:"h23"},N8={hour:lt,minute:lt,second:lt,hourCycle:"h23"},D8={hour:lt,minute:lt,second:lt,hourCycle:"h23",timeZoneName:$y},L8={hour:lt,minute:lt,second:lt,hourCycle:"h23",timeZoneName:Bm},F8={year:lt,month:lt,day:lt,hour:lt,minute:lt},k8={year:lt,month:lt,day:lt,hour:lt,minute:lt,second:lt},$8={year:lt,month:$y,day:lt,hour:lt,minute:lt},B8={year:lt,month:$y,day:lt,hour:lt,minute:lt,second:lt},bIe={year:lt,month:$y,day:lt,weekday:$y,hour:lt,minute:lt},q8={year:lt,month:Bm,day:lt,hour:lt,minute:lt,timeZoneName:$y},U8={year:lt,month:Bm,day:lt,hour:lt,minute:lt,second:lt,timeZoneName:$y},z8={year:lt,month:Bm,day:lt,weekday:Bm,hour:lt,minute:lt,timeZoneName:Bm},H8={year:lt,month:Bm,day:lt,weekday:Bm,hour:lt,minute:lt,second:lt,timeZoneName:Bm};var Fp=class{get type(){throw new ky}get name(){throw new ky}get ianaName(){return this.name}get isUniversal(){throw new ky}offsetName(e,r){throw new ky}formatOffset(e,r){throw new ky}offset(e){throw new ky}equals(e){throw new ky}get isValid(){throw new ky}};var _Ie=null,BA=class t extends Fp{static get instance(){return _Ie===null&&(_Ie=new t),_Ie}get type(){return"system"}get name(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(e,{format:r,locale:n}){return loe(e,r,n)}formatOffset(e,r){return qA(this.offset(e),r)}offset(e){return-new Date(e).getTimezoneOffset()}equals(e){return e.type==="system"}get isValid(){return!0}};var doe={};function W6r(t){return doe[t]||(doe[t]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:t,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"})),doe[t]}var K6r={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};function G6r(t,e){let r=t.format(e).replace(/\u200E/g,""),n=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(r),[,o,i,a,s,u,l,c]=n;return[a,o,i,s,u,l,c]}function J6r(t,e){let r=t.formatToParts(e),n=[];for(let o=0;o<r.length;o++){let{type:i,value:a}=r[o],s=K6r[i];i==="era"?n[s]=a:ir(s)||(n[s]=parseInt(a,10))}return n}var coe={},zd=class t extends Fp{static create(e){return coe[e]||(coe[e]=new t(e)),coe[e]}static resetCache(){coe={},doe={}}static isValidSpecifier(e){return this.isValidZone(e)}static isValidZone(e){if(!e)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:e}).format(),!0}catch{return!1}}constructor(e){super(),this.zoneName=e,this.valid=t.isValidZone(e)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(e,{format:r,locale:n}){return loe(e,r,n,this.name)}formatOffset(e,r){return qA(this.offset(e),r)}offset(e){let r=new Date(e);if(isNaN(r))return NaN;let n=W6r(this.name),[o,i,a,s,u,l,c]=n.formatToParts?J6r(n,r):G6r(n,r);s==="BC"&&(o=-Math.abs(o)+1);let f=KB({year:o,month:i,day:a,hour:u===24?0:u,minute:l,second:c,millisecond:0}),p=+r,m=p%1e3;return p-=m>=0?m:1e3+m,(f-p)/(60*1e3)}equals(e){return e.type==="iana"&&e.name===this.name}get isValid(){return this.valid}};var cTt={};function Y6r(t,e={}){let r=JSON.stringify([t,e]),n=cTt[r];return n||(n=new Intl.ListFormat(t,e),cTt[r]=n),n}var vIe={};function wIe(t,e={}){let r=JSON.stringify([t,e]),n=vIe[r];return n||(n=new Intl.DateTimeFormat(t,e),vIe[r]=n),n}var SIe={};function Z6r(t,e={}){let r=JSON.stringify([t,e]),n=SIe[r];return n||(n=new Intl.NumberFormat(t,e),SIe[r]=n),n}var xIe={};function X6r(t,e={}){let{base:r,...n}=e,o=JSON.stringify([t,n]),i=xIe[o];return i||(i=new Intl.RelativeTimeFormat(t,e),xIe[o]=i),i}var V8=null;function Q6r(){return V8||(V8=new Intl.DateTimeFormat().resolvedOptions().locale,V8)}var dTt={};function e5r(t){let e=dTt[t];if(!e){let r=new Intl.Locale(t);e="getWeekInfo"in r?r.getWeekInfo():r.weekInfo,dTt[t]=e}return e}function t5r(t){let e=t.indexOf("-x-");e!==-1&&(t=t.substring(0,e));let r=t.indexOf("-u-");if(r===-1)return[t];{let n,o;try{n=wIe(t).resolvedOptions(),o=t}catch{let u=t.substring(0,r);n=wIe(u).resolvedOptions(),o=u}let{numberingSystem:i,calendar:a}=n;return[o,i,a]}}function r5r(t,e,r){return(r||e)&&(t.includes("-u-")||(t+="-u"),r&&(t+=`-ca-${r}`),e&&(t+=`-nu-${e}`)),t}function n5r(t){let e=[];for(let r=1;r<=12;r++){let n=Jr.utc(2009,r,1);e.push(t(n))}return e}function o5r(t){let e=[];for(let r=1;r<=7;r++){let n=Jr.utc(2016,11,13+r);e.push(t(n))}return e}function foe(t,e,r,n){let o=t.listingMode();return o==="error"?null:o==="en"?r(e):n(e)}function i5r(t){return t.numberingSystem&&t.numberingSystem!=="latn"?!1:t.numberingSystem==="latn"||!t.locale||t.locale.startsWith("en")||new Intl.DateTimeFormat(t.intl).resolvedOptions().numberingSystem==="latn"}var CIe=class{constructor(e,r,n){this.padTo=n.padTo||0,this.floor=n.floor||!1;let{padTo:o,floor:i,...a}=n;if(!r||Object.keys(a).length>0){let s={useGrouping:!1,...n};n.padTo>0&&(s.minimumIntegerDigits=n.padTo),this.inf=Z6r(e,s)}}format(e){if(this.inf){let r=this.floor?Math.floor(e):e;return this.inf.format(r)}else{let r=this.floor?Math.floor(e):GB(e,3);return za(r,this.padTo)}}},OIe=class{constructor(e,r,n){this.opts=n,this.originalZone=void 0;let o;if(this.opts.timeZone)this.dt=e;else if(e.zone.type==="fixed"){let a=-1*(e.offset/60),s=a>=0?`Etc/GMT+${a}`:`Etc/GMT${a}`;e.offset!==0&&zd.create(s).valid?(o=s,this.dt=e):(o="UTC",this.dt=e.offset===0?e:e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone)}else e.zone.type==="system"?this.dt=e:e.zone.type==="iana"?(this.dt=e,o=e.zone.name):(o="UTC",this.dt=e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone);let i={...this.opts};i.timeZone=i.timeZone||o,this.dtf=wIe(r,i)}format(){return this.originalZone?this.formatToParts().map(({value:e})=>e).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){let e=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?e.map(r=>{if(r.type==="timeZoneName"){let n=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,format:this.opts.timeZoneName});return{...r,value:n}}else return r}):e}resolvedOptions(){return this.dtf.resolvedOptions()}},PIe=class{constructor(e,r,n){this.opts={style:"long",...n},!r&&poe()&&(this.rtf=X6r(e,n))}format(e,r){return this.rtf?this.rtf.format(e,r):fTt(r,e,this.opts.numeric,this.opts.style!=="long")}formatToParts(e,r){return this.rtf?this.rtf.formatToParts(e,r):[]}},a5r={firstDay:1,minimalDays:4,weekend:[6,7]},vo=class t{static fromOpts(e){return t.create(e.locale,e.numberingSystem,e.outputCalendar,e.weekSettings,e.defaultToEN)}static create(e,r,n,o,i=!1){let a=e||_o.defaultLocale,s=a||(i?"en-US":Q6r()),u=r||_o.defaultNumberingSystem,l=n||_o.defaultOutputCalendar,c=W8(o)||_o.defaultWeekSettings;return new t(s,u,l,c,a)}static resetCache(){V8=null,vIe={},SIe={},xIe={}}static fromObject({locale:e,numberingSystem:r,outputCalendar:n,weekSettings:o}={}){return t.create(e,r,n,o)}constructor(e,r,n,o,i){let[a,s,u]=t5r(e);this.locale=a,this.numberingSystem=r||s||null,this.outputCalendar=n||u||null,this.weekSettings=o,this.intl=r5r(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=i,this.fastNumbersCached=null}get fastNumbers(){return this.fastNumbersCached==null&&(this.fastNumbersCached=i5r(this)),this.fastNumbersCached}listingMode(){let e=this.isEnglish(),r=(this.numberingSystem===null||this.numberingSystem==="latn")&&(this.outputCalendar===null||this.outputCalendar==="gregory");return e&&r?"en":"intl"}clone(e){return!e||Object.getOwnPropertyNames(e).length===0?this:t.create(e.locale||this.specifiedLocale,e.numberingSystem||this.numberingSystem,e.outputCalendar||this.outputCalendar,W8(e.weekSettings)||this.weekSettings,e.defaultToEN||!1)}redefaultToEN(e={}){return this.clone({...e,defaultToEN:!0})}redefaultToSystem(e={}){return this.clone({...e,defaultToEN:!1})}months(e,r=!1){return foe(this,e,EIe,()=>{let n=r?{month:e,day:"numeric"}:{month:e},o=r?"format":"standalone";return this.monthsCache[o][e]||(this.monthsCache[o][e]=n5r(i=>this.extract(i,n,"month"))),this.monthsCache[o][e]})}weekdays(e,r=!1){return foe(this,e,TIe,()=>{let n=r?{weekday:e,year:"numeric",month:"long",day:"numeric"}:{weekday:e},o=r?"format":"standalone";return this.weekdaysCache[o][e]||(this.weekdaysCache[o][e]=o5r(i=>this.extract(i,n,"weekday"))),this.weekdaysCache[o][e]})}meridiems(){return foe(this,void 0,()=>AIe,()=>{if(!this.meridiemCache){let e={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[Jr.utc(2016,11,13,9),Jr.utc(2016,11,13,19)].map(r=>this.extract(r,e,"dayperiod"))}return this.meridiemCache})}eras(e){return foe(this,e,IIe,()=>{let r={era:e};return this.eraCache[e]||(this.eraCache[e]=[Jr.utc(-40,1,1),Jr.utc(2017,1,1)].map(n=>this.extract(n,r,"era"))),this.eraCache[e]})}extract(e,r,n){let o=this.dtFormatter(e,r),i=o.formatToParts(),a=i.find(s=>s.type.toLowerCase()===n);return a?a.value:null}numberFormatter(e={}){return new CIe(this.intl,e.forceSimple||this.fastNumbers,e)}dtFormatter(e,r={}){return new OIe(e,this.intl,r)}relFormatter(e={}){return new PIe(this.intl,this.isEnglish(),e)}listFormatter(e={}){return Y6r(this.intl,e)}isEnglish(){return this.locale==="en"||this.locale.toLowerCase()==="en-us"||new Intl.DateTimeFormat(this.intl).resolvedOptions().locale.startsWith("en-us")}getWeekSettings(){return this.weekSettings?this.weekSettings:moe()?e5r(this.locale):a5r}getStartOfWeek(){return this.getWeekSettings().firstDay}getMinDaysInFirstWeek(){return this.getWeekSettings().minimalDays}getWeekendDays(){return this.getWeekSettings().weekend}equals(e){return this.locale===e.locale&&this.numberingSystem===e.numberingSystem&&this.outputCalendar===e.outputCalendar}toString(){return`Locale(${this.locale}, ${this.numberingSystem}, ${this.outputCalendar})`}};var RIe=null,Gl=class t extends Fp{static get utcInstance(){return RIe===null&&(RIe=new t(0)),RIe}static instance(e){return e===0?t.utcInstance:new t(e)}static parseSpecifier(e){if(e){let r=e.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(r)return new t(zj(r[1],r[2]))}return null}constructor(e){super(),this.fixed=e}get type(){return"fixed"}get name(){return this.fixed===0?"UTC":`UTC${qA(this.fixed,"narrow")}`}get ianaName(){return this.fixed===0?"Etc/UTC":`Etc/GMT${qA(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(e,r){return qA(this.fixed,r)}get isUniversal(){return!0}offset(){return this.fixed}equals(e){return e.type==="fixed"&&e.fixed===this.fixed}get isValid(){return!0}};var JB=class extends Fp{constructor(e){super(),this.zoneName=e}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}};function By(t,e){let r;if(ir(t)||t===null)return e;if(t instanceof Fp)return t;if(pTt(t)){let n=t.toLowerCase();return n==="default"?e:n==="local"||n==="system"?BA.instance:n==="utc"||n==="gmt"?Gl.utcInstance:Gl.parseSpecifier(n)||zd.create(t)}else return qy(t)?Gl.instance(t):typeof t=="object"&&"offset"in t&&typeof t.offset=="function"?t:new JB(t)}var jIe={arab:"[\u0660-\u0669]",arabext:"[\u06F0-\u06F9]",bali:"[\u1B50-\u1B59]",beng:"[\u09E6-\u09EF]",deva:"[\u0966-\u096F]",fullwide:"[\uFF10-\uFF19]",gujr:"[\u0AE6-\u0AEF]",hanidec:"[\u3007|\u4E00|\u4E8C|\u4E09|\u56DB|\u4E94|\u516D|\u4E03|\u516B|\u4E5D]",khmr:"[\u17E0-\u17E9]",knda:"[\u0CE6-\u0CEF]",laoo:"[\u0ED0-\u0ED9]",limb:"[\u1946-\u194F]",mlym:"[\u0D66-\u0D6F]",mong:"[\u1810-\u1819]",mymr:"[\u1040-\u1049]",orya:"[\u0B66-\u0B6F]",tamldec:"[\u0BE6-\u0BEF]",telu:"[\u0C66-\u0C6F]",thai:"[\u0E50-\u0E59]",tibt:"[\u0F20-\u0F29]",latn:"\\d"},mTt={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},s5r=jIe.hanidec.replace(/[\[|\]]/g,"").split("");function hTt(t){let e=parseInt(t,10);if(isNaN(e)){e="";for(let r=0;r<t.length;r++){let n=t.charCodeAt(r);if(t[r].search(jIe.hanidec)!==-1)e+=s5r.indexOf(t[r]);else for(let o in mTt){let[i,a]=mTt[o];n>=i&&n<=a&&(e+=n-i)}}return parseInt(e,10)}else return e}var YB={};function gTt(){YB={}}function ng({numberingSystem:t},e=""){let r=t||"latn";return YB[r]||(YB[r]={}),YB[r][e]||(YB[r][e]=new RegExp(`${jIe[r]}${e}`)),YB[r][e]}var yTt=()=>Date.now(),bTt="system",_Tt=null,vTt=null,wTt=null,STt=60,xTt,CTt=null,_o=class{static get now(){return yTt}static set now(e){yTt=e}static set defaultZone(e){bTt=e}static get defaultZone(){return By(bTt,BA.instance)}static get defaultLocale(){return _Tt}static set defaultLocale(e){_Tt=e}static get defaultNumberingSystem(){return vTt}static set defaultNumberingSystem(e){vTt=e}static get defaultOutputCalendar(){return wTt}static set defaultOutputCalendar(e){wTt=e}static get defaultWeekSettings(){return CTt}static set defaultWeekSettings(e){CTt=W8(e)}static get twoDigitCutoffYear(){return STt}static set twoDigitCutoffYear(e){STt=e%100}static get throwOnInvalid(){return xTt}static set throwOnInvalid(e){xTt=e}static resetCaches(){vo.resetCache(),zd.resetCache(),Jr.resetCache(),gTt()}};var Jl=class{constructor(e,r){this.reason=e,this.explanation=r}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}};var OTt=[0,31,59,90,120,151,181,212,243,273,304,334],PTt=[0,31,60,91,121,152,182,213,244,274,305,335];function og(t,e){return new Jl("unit out of range",`you specified ${e} (of type ${typeof e}) as a ${t}, which is invalid`)}function hoe(t,e,r){let n=new Date(Date.UTC(t,e-1,r));t<100&&t>=0&&n.setUTCFullYear(n.getUTCFullYear()-1900);let o=n.getUTCDay();return o===0?7:o}function ETt(t,e,r){return r+(Vj(t)?PTt:OTt)[e-1]}function TTt(t,e){let r=Vj(t)?PTt:OTt,n=r.findIndex(i=>i<e),o=e-r[n];return{month:n+1,day:o}}function goe(t,e){return(t-e+7)%7+1}function K8(t,e=4,r=1){let{year:n,month:o,day:i}=t,a=ETt(n,o,i),s=goe(hoe(n,o,i),r),u=Math.floor((a-s+14-e)/7),l;return u<1?(l=n-1,u=Hj(l,e,r)):u>Hj(n,e,r)?(l=n+1,u=1):l=n,{weekYear:l,weekNumber:u,weekday:s,...J8(t)}}function NIe(t,e=4,r=1){let{weekYear:n,weekNumber:o,weekday:i}=t,a=goe(hoe(n,1,e),r),s=UA(n),u=o*7+i-a-7+e,l;u<1?(l=n-1,u+=UA(l)):u>s?(l=n+1,u-=UA(n)):l=n;let{month:c,day:d}=TTt(l,u);return{year:l,month:c,day:d,...J8(t)}}function yoe(t){let{year:e,month:r,day:n}=t,o=ETt(e,r,n);return{year:e,ordinal:o,...J8(t)}}function DIe(t){let{year:e,ordinal:r}=t,{month:n,day:o}=TTt(e,r);return{year:e,month:n,day:o,...J8(t)}}function LIe(t,e){if(!ir(t.localWeekday)||!ir(t.localWeekNumber)||!ir(t.localWeekYear)){if(!ir(t.weekday)||!ir(t.weekNumber)||!ir(t.weekYear))throw new Fy("Cannot mix locale-based week fields with ISO-based week fields");return ir(t.localWeekday)||(t.weekday=t.localWeekday),ir(t.localWeekNumber)||(t.weekNumber=t.localWeekNumber),ir(t.localWeekYear)||(t.weekYear=t.localWeekYear),delete t.localWeekday,delete t.localWeekNumber,delete t.localWeekYear,{minDaysInFirstWeek:e.getMinDaysInFirstWeek(),startOfWeek:e.getStartOfWeek()}}else return{minDaysInFirstWeek:4,startOfWeek:1}}function ATt(t,e=4,r=1){let n=G8(t.weekYear),o=qm(t.weekNumber,1,Hj(t.weekYear,e,r)),i=qm(t.weekday,1,7);return n?o?i?!1:og("weekday",t.weekday):og("week",t.weekNumber):og("weekYear",t.weekYear)}function ITt(t){let e=G8(t.year),r=qm(t.ordinal,1,UA(t.year));return e?r?!1:og("ordinal",t.ordinal):og("year",t.year)}function FIe(t){let e=G8(t.year),r=qm(t.month,1,12),n=qm(t.day,1,ZB(t.year,t.month));return e?r?n?!1:og("day",t.day):og("month",t.month):og("year",t.year)}function kIe(t){let{hour:e,minute:r,second:n,millisecond:o}=t,i=qm(e,0,23)||e===24&&r===0&&n===0&&o===0,a=qm(r,0,59),s=qm(n,0,59),u=qm(o,0,999);return i?a?s?u?!1:og("millisecond",o):og("second",n):og("minute",r):og("hour",e)}function ir(t){return typeof t>"u"}function qy(t){return typeof t=="number"}function G8(t){return typeof t=="number"&&t%1===0}function pTt(t){return typeof t=="string"}function RTt(t){return Object.prototype.toString.call(t)==="[object Date]"}function poe(){try{return typeof Intl<"u"&&!!Intl.RelativeTimeFormat}catch{return!1}}function moe(){try{return typeof Intl<"u"&&!!Intl.Locale&&("weekInfo"in Intl.Locale.prototype||"getWeekInfo"in Intl.Locale.prototype)}catch{return!1}}function jTt(t){return Array.isArray(t)?t:[t]}function $Ie(t,e,r){if(t.length!==0)return t.reduce((n,o)=>{let i=[e(o),o];return n&&r(n[0],i[0])===n[0]?n:i},null)[1]}function NTt(t,e){return e.reduce((r,n)=>(r[n]=t[n],r),{})}function zA(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function W8(t){if(t==null)return null;if(typeof t!="object")throw new ls("Week settings must be an object");if(!qm(t.firstDay,1,7)||!qm(t.minimalDays,1,7)||!Array.isArray(t.weekend)||t.weekend.some(e=>!qm(e,1,7)))throw new ls("Invalid week settings");return{firstDay:t.firstDay,minimalDays:t.minimalDays,weekend:Array.from(t.weekend)}}function qm(t,e,r){return G8(t)&&t>=e&&t<=r}function u5r(t,e){return t-e*Math.floor(t/e)}function za(t,e=2){let r=t<0,n;return r?n="-"+(""+-t).padStart(e,"0"):n=(""+t).padStart(e,"0"),n}function DO(t){if(!(ir(t)||t===null||t===""))return parseInt(t,10)}function HA(t){if(!(ir(t)||t===null||t===""))return parseFloat(t)}function Y8(t){if(!(ir(t)||t===null||t==="")){let e=parseFloat("0."+t)*1e3;return Math.floor(e)}}function GB(t,e,r=!1){let n=10**e;return(r?Math.trunc:Math.round)(t*n)/n}function Vj(t){return t%4===0&&(t%100!==0||t%400===0)}function UA(t){return Vj(t)?366:365}function ZB(t,e){let r=u5r(e-1,12)+1,n=t+(e-r)/12;return r===2?Vj(n)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][r-1]}function KB(t){let e=Date.UTC(t.year,t.month-1,t.day,t.hour,t.minute,t.second,t.millisecond);return t.year<100&&t.year>=0&&(e=new Date(e),e.setUTCFullYear(t.year,t.month-1,t.day)),+e}function MTt(t,e,r){return-goe(hoe(t,1,e),r)+e-1}function Hj(t,e=4,r=1){let n=MTt(t,e,r),o=MTt(t+1,e,r);return(UA(t)-n+o)/7}function Z8(t){return t>99?t:t>_o.twoDigitCutoffYear?1900+t:2e3+t}function loe(t,e,r,n=null){let o=new Date(t),i={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};n&&(i.timeZone=n);let a={timeZoneName:e,...i},s=new Intl.DateTimeFormat(r,a).formatToParts(o).find(u=>u.type.toLowerCase()==="timezonename");return s?s.value:null}function zj(t,e){let r=parseInt(t,10);Number.isNaN(r)&&(r=0);let n=parseInt(e,10)||0,o=r<0||Object.is(r,-0)?-n:n;return r*60+o}function BIe(t){let e=Number(t);if(typeof t=="boolean"||t===""||Number.isNaN(e))throw new ls(`Invalid unit value ${t}`);return e}function XB(t,e){let r={};for(let n in t)if(zA(t,n)){let o=t[n];if(o==null)continue;r[e(n)]=BIe(o)}return r}function qA(t,e){let r=Math.trunc(Math.abs(t/60)),n=Math.trunc(Math.abs(t%60)),o=t>=0?"+":"-";switch(e){case"short":return`${o}${za(r,2)}:${za(n,2)}`;case"narrow":return`${o}${r}${n>0?`:${n}`:""}`;case"techie":return`${o}${za(r,2)}${za(n,2)}`;default:throw new RangeError(`Value format ${e} is out of range for property format`)}}function J8(t){return NTt(t,["hour","minute","second","millisecond"])}var l5r=["January","February","March","April","May","June","July","August","September","October","November","December"],qIe=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],c5r=["J","F","M","A","M","J","J","A","S","O","N","D"];function EIe(t){switch(t){case"narrow":return[...c5r];case"short":return[...qIe];case"long":return[...l5r];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}var UIe=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],zIe=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],d5r=["M","T","W","T","F","S","S"];function TIe(t){switch(t){case"narrow":return[...d5r];case"short":return[...zIe];case"long":return[...UIe];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}var AIe=["AM","PM"],f5r=["Before Christ","Anno Domini"],p5r=["BC","AD"],m5r=["B","A"];function IIe(t){switch(t){case"narrow":return[...m5r];case"short":return[...p5r];case"long":return[...f5r];default:return null}}function DTt(t){return AIe[t.hour<12?0:1]}function LTt(t,e){return TIe(e)[t.weekday-1]}function FTt(t,e){return EIe(e)[t.month-1]}function kTt(t,e){return IIe(e)[t.year<0?0:1]}function fTt(t,e,r="always",n=!1){let o={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},i=["hours","minutes","seconds"].indexOf(t)===-1;if(r==="auto"&&i){let d=t==="days";switch(e){case 1:return d?"tomorrow":`next ${o[t][0]}`;case-1:return d?"yesterday":`last ${o[t][0]}`;case 0:return d?"today":`this ${o[t][0]}`;default:}}let a=Object.is(e,-0)||e<0,s=Math.abs(e),u=s===1,l=o[t],c=n?u?l[1]:l[2]||l[1]:u?o[t][0]:t;return a?`${s} ${c} ago`:`in ${s} ${c}`}function $Tt(t,e){let r="";for(let n of t)n.literal?r+=n.val:r+=e(n.val);return r}var h5r={D:$A,DD:P8,DDD:E8,DDDD:T8,t:A8,tt:I8,ttt:M8,tttt:R8,T:j8,TT:N8,TTT:D8,TTTT:L8,f:F8,ff:$8,fff:q8,ffff:z8,F:k8,FF:B8,FFF:U8,FFFF:H8},Yl=class t{static create(e,r={}){return new t(e,r)}static parseFormat(e){let r=null,n="",o=!1,i=[];for(let a=0;a<e.length;a++){let s=e.charAt(a);s==="'"?(n.length>0&&i.push({literal:o||/^\s+$/.test(n),val:n}),r=null,n="",o=!o):o||s===r?n+=s:(n.length>0&&i.push({literal:/^\s+$/.test(n),val:n}),n=s,r=s)}return n.length>0&&i.push({literal:o||/^\s+$/.test(n),val:n}),i}static macroTokenToFormatOpts(e){return h5r[e]}constructor(e,r){this.opts=r,this.loc=e,this.systemLoc=null}formatWithSystemDefault(e,r){return this.systemLoc===null&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(e,{...this.opts,...r}).format()}dtFormatter(e,r={}){return this.loc.dtFormatter(e,{...this.opts,...r})}formatDateTime(e,r){return this.dtFormatter(e,r).format()}formatDateTimeParts(e,r){return this.dtFormatter(e,r).formatToParts()}formatInterval(e,r){return this.dtFormatter(e.start,r).dtf.formatRange(e.start.toJSDate(),e.end.toJSDate())}resolvedOptions(e,r){return this.dtFormatter(e,r).resolvedOptions()}num(e,r=0){if(this.opts.forceSimple)return za(e,r);let n={...this.opts};return r>0&&(n.padTo=r),this.loc.numberFormatter(n).format(e)}formatDateTimeFromString(e,r){let n=this.loc.listingMode()==="en",o=this.loc.outputCalendar&&this.loc.outputCalendar!=="gregory",i=(p,m)=>this.loc.extract(e,p,m),a=p=>e.isOffsetFixed&&e.offset===0&&p.allowZ?"Z":e.isValid?e.zone.formatOffset(e.ts,p.format):"",s=()=>n?DTt(e):i({hour:"numeric",hourCycle:"h12"},"dayperiod"),u=(p,m)=>n?FTt(e,p):i(m?{month:p}:{month:p,day:"numeric"},"month"),l=(p,m)=>n?LTt(e,p):i(m?{weekday:p}:{weekday:p,month:"long",day:"numeric"},"weekday"),c=p=>{let m=t.macroTokenToFormatOpts(p);return m?this.formatWithSystemDefault(e,m):p},d=p=>n?kTt(e,p):i({era:p},"era"),f=p=>{switch(p){case"S":return this.num(e.millisecond);case"u":case"SSS":return this.num(e.millisecond,3);case"s":return this.num(e.second);case"ss":return this.num(e.second,2);case"uu":return this.num(Math.floor(e.millisecond/10),2);case"uuu":return this.num(Math.floor(e.millisecond/100));case"m":return this.num(e.minute);case"mm":return this.num(e.minute,2);case"h":return this.num(e.hour%12===0?12:e.hour%12);case"hh":return this.num(e.hour%12===0?12:e.hour%12,2);case"H":return this.num(e.hour);case"HH":return this.num(e.hour,2);case"Z":return a({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return a({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return a({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return e.zone.offsetName(e.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return e.zone.offsetName(e.ts,{format:"long",locale:this.loc.locale});case"z":return e.zoneName;case"a":return s();case"d":return o?i({day:"numeric"},"day"):this.num(e.day);case"dd":return o?i({day:"2-digit"},"day"):this.num(e.day,2);case"c":return this.num(e.weekday);case"ccc":return l("short",!0);case"cccc":return l("long",!0);case"ccccc":return l("narrow",!0);case"E":return this.num(e.weekday);case"EEE":return l("short",!1);case"EEEE":return l("long",!1);case"EEEEE":return l("narrow",!1);case"L":return o?i({month:"numeric",day:"numeric"},"month"):this.num(e.month);case"LL":return o?i({month:"2-digit",day:"numeric"},"month"):this.num(e.month,2);case"LLL":return u("short",!0);case"LLLL":return u("long",!0);case"LLLLL":return u("narrow",!0);case"M":return o?i({month:"numeric"},"month"):this.num(e.month);case"MM":return o?i({month:"2-digit"},"month"):this.num(e.month,2);case"MMM":return u("short",!1);case"MMMM":return u("long",!1);case"MMMMM":return u("narrow",!1);case"y":return o?i({year:"numeric"},"year"):this.num(e.year);case"yy":return o?i({year:"2-digit"},"year"):this.num(e.year.toString().slice(-2),2);case"yyyy":return o?i({year:"numeric"},"year"):this.num(e.year,4);case"yyyyyy":return o?i({year:"numeric"},"year"):this.num(e.year,6);case"G":return d("short");case"GG":return d("long");case"GGGGG":return d("narrow");case"kk":return this.num(e.weekYear.toString().slice(-2),2);case"kkkk":return this.num(e.weekYear,4);case"W":return this.num(e.weekNumber);case"WW":return this.num(e.weekNumber,2);case"n":return this.num(e.localWeekNumber);case"nn":return this.num(e.localWeekNumber,2);case"ii":return this.num(e.localWeekYear.toString().slice(-2),2);case"iiii":return this.num(e.localWeekYear,4);case"o":return this.num(e.ordinal);case"ooo":return this.num(e.ordinal,3);case"q":return this.num(e.quarter);case"qq":return this.num(e.quarter,2);case"X":return this.num(Math.floor(e.ts/1e3));case"x":return this.num(e.ts);default:return c(p)}};return $Tt(t.parseFormat(r),f)}formatDurationFromString(e,r){let n=u=>{switch(u[0]){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year";default:return null}},o=u=>l=>{let c=n(l);return c?this.num(u.get(c),l.length):l},i=t.parseFormat(r),a=i.reduce((u,{literal:l,val:c})=>l?u:u.concat(c),[]),s=e.shiftTo(...a.map(n).filter(u=>u));return $Tt(i,o(s))}};var qTt=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function eq(...t){let e=t.reduce((r,n)=>r+n.source,"");return RegExp(`^${e}$`)}function tq(...t){return e=>t.reduce(([r,n,o],i)=>{let[a,s,u]=i(e,o);return[{...r,...a},s||n,u]},[{},null,1]).slice(0,2)}function rq(t,...e){if(t==null)return[null,null];for(let[r,n]of e){let o=r.exec(t);if(o)return n(o)}return[null,null]}function UTt(...t){return(e,r)=>{let n={},o;for(o=0;o<t.length;o++)n[t[o]]=DO(e[r+o]);return[n,null,r+o]}}var zTt=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,g5r=`(?:${zTt.source}?(?:\\[(${qTt.source})\\])?)?`,HIe=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,HTt=RegExp(`${HIe.source}${g5r}`),VIe=RegExp(`(?:T${HTt.source})?`),y5r=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,b5r=/(\d{4})-?W(\d\d)(?:-?(\d))?/,_5r=/(\d{4})-?(\d{3})/,v5r=UTt("weekYear","weekNumber","weekDay"),w5r=UTt("year","ordinal"),S5r=/(\d{4})-(\d\d)-(\d\d)/,VTt=RegExp(`${HIe.source} ?(?:${zTt.source}|(${qTt.source}))?`),x5r=RegExp(`(?: ${VTt.source})?`);function QB(t,e,r){let n=t[e];return ir(n)?r:DO(n)}function C5r(t,e){return[{year:QB(t,e),month:QB(t,e+1,1),day:QB(t,e+2,1)},null,e+3]}function nq(t,e){return[{hours:QB(t,e,0),minutes:QB(t,e+1,0),seconds:QB(t,e+2,0),milliseconds:Y8(t[e+3])},null,e+4]}function X8(t,e){let r=!t[e]&&!t[e+1],n=zj(t[e+1],t[e+2]),o=r?null:Gl.instance(n);return[{},o,e+3]}function Q8(t,e){let r=t[e]?zd.create(t[e]):null;return[{},r,e+1]}var O5r=RegExp(`^T?${HIe.source}$`),P5r=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function E5r(t){let[e,r,n,o,i,a,s,u,l]=t,c=e[0]==="-",d=u&&u[0]==="-",f=(p,m=!1)=>p!==void 0&&(m||p&&c)?-p:p;return[{years:f(HA(r)),months:f(HA(n)),weeks:f(HA(o)),days:f(HA(i)),hours:f(HA(a)),minutes:f(HA(s)),seconds:f(HA(u),u==="-0"),milliseconds:f(Y8(l),d)}]}var T5r={GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function WIe(t,e,r,n,o,i,a){let s={year:e.length===2?Z8(DO(e)):DO(e),month:qIe.indexOf(r)+1,day:DO(n),hour:DO(o),minute:DO(i)};return a&&(s.second=DO(a)),t&&(s.weekday=t.length>3?UIe.indexOf(t)+1:zIe.indexOf(t)+1),s}var A5r=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function I5r(t){let[,e,r,n,o,i,a,s,u,l,c,d]=t,f=WIe(e,o,n,r,i,a,s),p;return u?p=T5r[u]:l?p=0:p=zj(c,d),[f,new Gl(p)]}function M5r(t){return t.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}var R5r=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,j5r=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,N5r=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function BTt(t){let[,e,r,n,o,i,a,s]=t;return[WIe(e,o,n,r,i,a,s),Gl.utcInstance]}function D5r(t){let[,e,r,n,o,i,a,s]=t;return[WIe(e,s,r,n,o,i,a),Gl.utcInstance]}var L5r=eq(y5r,VIe),F5r=eq(b5r,VIe),k5r=eq(_5r,VIe),$5r=eq(HTt),WTt=tq(C5r,nq,X8,Q8),B5r=tq(v5r,nq,X8,Q8),q5r=tq(w5r,nq,X8,Q8),U5r=tq(nq,X8,Q8);function KTt(t){return rq(t,[L5r,WTt],[F5r,B5r],[k5r,q5r],[$5r,U5r])}function GTt(t){return rq(M5r(t),[A5r,I5r])}function JTt(t){return rq(t,[R5r,BTt],[j5r,BTt],[N5r,D5r])}function YTt(t){return rq(t,[P5r,E5r])}var z5r=tq(nq);function ZTt(t){return rq(t,[O5r,z5r])}var H5r=eq(S5r,x5r),V5r=eq(VTt),W5r=tq(nq,X8,Q8);function XTt(t){return rq(t,[H5r,WTt],[V5r,W5r])}var QTt="Invalid Duration",tAt={weeks:{days:7,hours:7*24,minutes:7*24*60,seconds:7*24*60*60,milliseconds:7*24*60*60*1e3},days:{hours:24,minutes:24*60,seconds:24*60*60,milliseconds:24*60*60*1e3},hours:{minutes:60,seconds:60*60,milliseconds:60*60*1e3},minutes:{seconds:60,milliseconds:60*1e3},seconds:{milliseconds:1e3}},K5r={years:{quarters:4,months:12,weeks:52,days:365,hours:365*24,minutes:365*24*60,seconds:365*24*60*60,milliseconds:365*24*60*60*1e3},quarters:{months:3,weeks:13,days:91,hours:91*24,minutes:91*24*60,seconds:91*24*60*60,milliseconds:91*24*60*60*1e3},months:{weeks:4,days:30,hours:30*24,minutes:30*24*60,seconds:30*24*60*60,milliseconds:30*24*60*60*1e3},...tAt},ig=146097/400,oq=146097/4800,G5r={years:{quarters:4,months:12,weeks:ig/7,days:ig,hours:ig*24,minutes:ig*24*60,seconds:ig*24*60*60,milliseconds:ig*24*60*60*1e3},quarters:{months:3,weeks:ig/28,days:ig/4,hours:ig*24/4,minutes:ig*24*60/4,seconds:ig*24*60*60/4,milliseconds:ig*24*60*60*1e3/4},months:{weeks:oq/7,days:oq,hours:oq*24,minutes:oq*24*60,seconds:oq*24*60*60,milliseconds:oq*24*60*60*1e3},...tAt},Wj=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],J5r=Wj.slice(0).reverse();function VA(t,e,r=!1){let n={values:r?e.values:{...t.values,...e.values||{}},loc:t.loc.clone(e.loc),conversionAccuracy:e.conversionAccuracy||t.conversionAccuracy,matrix:e.matrix||t.matrix};return new Ha(n)}function rAt(t,e){let r=e.milliseconds??0;for(let n of J5r.slice(1))e[n]&&(r+=e[n]*t[n].milliseconds);return r}function eAt(t,e){let r=rAt(t,e)<0?-1:1;Wj.reduceRight((n,o)=>{if(ir(e[o]))return n;if(n){let i=e[n]*r,a=t[o][n],s=Math.floor(i/a);e[o]+=s*r,e[n]-=s*a*r}return o},null),Wj.reduce((n,o)=>{if(ir(e[o]))return n;if(n){let i=e[n]%1;e[n]-=i,e[o]+=i*t[n][o]}return o},null)}function Y5r(t){let e={};for(let[r,n]of Object.entries(t))n!==0&&(e[r]=n);return e}var Ha=class t{constructor(e){let r=e.conversionAccuracy==="longterm"||!1,n=r?G5r:K5r;e.matrix&&(n=e.matrix),this.values=e.values,this.loc=e.loc||vo.create(),this.conversionAccuracy=r?"longterm":"casual",this.invalid=e.invalid||null,this.matrix=n,this.isLuxonDuration=!0}static fromMillis(e,r){return t.fromObject({milliseconds:e},r)}static fromObject(e,r={}){if(e==null||typeof e!="object")throw new ls(`Duration.fromObject: argument expected to be an object, got ${e===null?"null":typeof e}`);return new t({values:XB(e,t.normalizeUnit),loc:vo.fromObject(r),conversionAccuracy:r.conversionAccuracy,matrix:r.matrix})}static fromDurationLike(e){if(qy(e))return t.fromMillis(e);if(t.isDuration(e))return e;if(typeof e=="object")return t.fromObject(e);throw new ls(`Unknown duration argument ${e} of type ${typeof e}`)}static fromISO(e,r){let[n]=YTt(e);return n?t.fromObject(n,r):t.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static fromISOTime(e,r){let[n]=ZTt(e);return n?t.fromObject(n,r):t.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static invalid(e,r=null){if(!e)throw new ls("need to specify a reason the Duration is invalid");let n=e instanceof Jl?e:new Jl(e,r);if(_o.throwOnInvalid)throw new soe(n);return new t({invalid:n})}static normalizeUnit(e){let r={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[e&&e.toLowerCase()];if(!r)throw new WB(e);return r}static isDuration(e){return e&&e.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(e,r={}){let n={...r,floor:r.round!==!1&&r.floor!==!1};return this.isValid?Yl.create(this.loc,n).formatDurationFromString(this,e):QTt}toHuman(e={}){if(!this.isValid)return QTt;let r=Wj.map(n=>{let o=this.values[n];return ir(o)?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...e,unit:n.slice(0,-1)}).format(o)}).filter(n=>n);return this.loc.listFormatter({type:"conjunction",style:e.listStyle||"narrow",...e}).format(r)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let e="P";return this.years!==0&&(e+=this.years+"Y"),(this.months!==0||this.quarters!==0)&&(e+=this.months+this.quarters*3+"M"),this.weeks!==0&&(e+=this.weeks+"W"),this.days!==0&&(e+=this.days+"D"),(this.hours!==0||this.minutes!==0||this.seconds!==0||this.milliseconds!==0)&&(e+="T"),this.hours!==0&&(e+=this.hours+"H"),this.minutes!==0&&(e+=this.minutes+"M"),(this.seconds!==0||this.milliseconds!==0)&&(e+=GB(this.seconds+this.milliseconds/1e3,3)+"S"),e==="P"&&(e+="T0S"),e}toISOTime(e={}){if(!this.isValid)return null;let r=this.toMillis();return r<0||r>=864e5?null:(e={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...e,includeOffset:!1},Jr.fromMillis(r,{zone:"UTC"}).toISOTime(e))}toJSON(){return this.toISO()}toString(){return this.toISO()}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Duration { values: ${JSON.stringify(this.values)} }`:`Duration { Invalid, reason: ${this.invalidReason} }`}toMillis(){return this.isValid?rAt(this.matrix,this.values):NaN}valueOf(){return this.toMillis()}plus(e){if(!this.isValid)return this;let r=t.fromDurationLike(e),n={};for(let o of Wj)(zA(r.values,o)||zA(this.values,o))&&(n[o]=r.get(o)+this.get(o));return VA(this,{values:n},!0)}minus(e){if(!this.isValid)return this;let r=t.fromDurationLike(e);return this.plus(r.negate())}mapUnits(e){if(!this.isValid)return this;let r={};for(let n of Object.keys(this.values))r[n]=BIe(e(this.values[n],n));return VA(this,{values:r},!0)}get(e){return this[t.normalizeUnit(e)]}set(e){if(!this.isValid)return this;let r={...this.values,...XB(e,t.normalizeUnit)};return VA(this,{values:r})}reconfigure({locale:e,numberingSystem:r,conversionAccuracy:n,matrix:o}={}){let a={loc:this.loc.clone({locale:e,numberingSystem:r}),matrix:o,conversionAccuracy:n};return VA(this,a)}as(e){return this.isValid?this.shiftTo(e).get(e):NaN}normalize(){if(!this.isValid)return this;let e=this.toObject();return eAt(this.matrix,e),VA(this,{values:e},!0)}rescale(){if(!this.isValid)return this;let e=Y5r(this.normalize().shiftToAll().toObject());return VA(this,{values:e},!0)}shiftTo(...e){if(!this.isValid)return this;if(e.length===0)return this;e=e.map(a=>t.normalizeUnit(a));let r={},n={},o=this.toObject(),i;for(let a of Wj)if(e.indexOf(a)>=0){i=a;let s=0;for(let l in n)s+=this.matrix[l][a]*n[l],n[l]=0;qy(o[a])&&(s+=o[a]);let u=Math.trunc(s);r[a]=u,n[a]=(s*1e3-u*1e3)/1e3}else qy(o[a])&&(n[a]=o[a]);for(let a in n)n[a]!==0&&(r[i]+=a===i?n[a]:n[a]/this.matrix[i][a]);return eAt(this.matrix,r),VA(this,{values:r},!0)}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;let e={};for(let r of Object.keys(this.values))e[r]=this.values[r]===0?0:-this.values[r];return VA(this,{values:e},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(e){if(!this.isValid||!e.isValid||!this.loc.equals(e.loc))return!1;function r(n,o){return n===void 0||n===0?o===void 0||o===0:n===o}for(let n of Wj)if(!r(this.values[n],e.values[n]))return!1;return!0}};var iq="Invalid Interval";function Z5r(t,e){return!t||!t.isValid?LO.invalid("missing or invalid start"):!e||!e.isValid?LO.invalid("missing or invalid end"):e<t?LO.invalid("end before start",`The end of an interval must be after its start, but you had start=${t.toISO()} and end=${e.toISO()}`):null}var LO=class t{constructor(e){this.s=e.start,this.e=e.end,this.invalid=e.invalid||null,this.isLuxonInterval=!0}static invalid(e,r=null){if(!e)throw new ls("need to specify a reason the Interval is invalid");let n=e instanceof Jl?e:new Jl(e,r);if(_o.throwOnInvalid)throw new aoe(n);return new t({invalid:n})}static fromDateTimes(e,r){let n=aq(e),o=aq(r),i=Z5r(n,o);return i??new t({start:n,end:o})}static after(e,r){let n=Ha.fromDurationLike(r),o=aq(e);return t.fromDateTimes(o,o.plus(n))}static before(e,r){let n=Ha.fromDurationLike(r),o=aq(e);return t.fromDateTimes(o.minus(n),o)}static fromISO(e,r){let[n,o]=(e||"").split("/",2);if(n&&o){let i,a;try{i=Jr.fromISO(n,r),a=i.isValid}catch{a=!1}let s,u;try{s=Jr.fromISO(o,r),u=s.isValid}catch{u=!1}if(a&&u)return t.fromDateTimes(i,s);if(a){let l=Ha.fromISO(o,r);if(l.isValid)return t.after(i,l)}else if(u){let l=Ha.fromISO(n,r);if(l.isValid)return t.before(s,l)}}return t.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static isInterval(e){return e&&e.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get isValid(){return this.invalidReason===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(e="milliseconds"){return this.isValid?this.toDuration(e).get(e):NaN}count(e="milliseconds",r){if(!this.isValid)return NaN;let n=this.start.startOf(e,r),o;return r?.useLocaleWeeks?o=this.end.reconfigure({locale:n.locale}):o=this.end,o=o.startOf(e,r),Math.floor(o.diff(n,e).get(e))+(o.valueOf()!==this.end.valueOf())}hasSame(e){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,e):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(e){return this.isValid?this.s>e:!1}isBefore(e){return this.isValid?this.e<=e:!1}contains(e){return this.isValid?this.s<=e&&this.e>e:!1}set({start:e,end:r}={}){return this.isValid?t.fromDateTimes(e||this.s,r||this.e):this}splitAt(...e){if(!this.isValid)return[];let r=e.map(aq).filter(a=>this.contains(a)).sort((a,s)=>a.toMillis()-s.toMillis()),n=[],{s:o}=this,i=0;for(;o<this.e;){let a=r[i]||this.e,s=+a>+this.e?this.e:a;n.push(t.fromDateTimes(o,s)),o=s,i+=1}return n}splitBy(e){let r=Ha.fromDurationLike(e);if(!this.isValid||!r.isValid||r.as("milliseconds")===0)return[];let{s:n}=this,o=1,i,a=[];for(;n<this.e;){let s=this.start.plus(r.mapUnits(u=>u*o));i=+s>+this.e?this.e:s,a.push(t.fromDateTimes(n,i)),n=i,o+=1}return a}divideEqually(e){return this.isValid?this.splitBy(this.length()/e).slice(0,e):[]}overlaps(e){return this.e>e.s&&this.s<e.e}abutsStart(e){return this.isValid?+this.e==+e.s:!1}abutsEnd(e){return this.isValid?+e.e==+this.s:!1}engulfs(e){return this.isValid?this.s<=e.s&&this.e>=e.e:!1}equals(e){return!this.isValid||!e.isValid?!1:this.s.equals(e.s)&&this.e.equals(e.e)}intersection(e){if(!this.isValid)return this;let r=this.s>e.s?this.s:e.s,n=this.e<e.e?this.e:e.e;return r>=n?null:t.fromDateTimes(r,n)}union(e){if(!this.isValid)return this;let r=this.s<e.s?this.s:e.s,n=this.e>e.e?this.e:e.e;return t.fromDateTimes(r,n)}static merge(e){let[r,n]=e.sort((o,i)=>o.s-i.s).reduce(([o,i],a)=>i?i.overlaps(a)||i.abutsStart(a)?[o,i.union(a)]:[o.concat([i]),a]:[o,a],[[],null]);return n&&r.push(n),r}static xor(e){let r=null,n=0,o=[],i=e.map(u=>[{time:u.s,type:"s"},{time:u.e,type:"e"}]),a=Array.prototype.concat(...i),s=a.sort((u,l)=>u.time-l.time);for(let u of s)n+=u.type==="s"?1:-1,n===1?r=u.time:(r&&+r!=+u.time&&o.push(t.fromDateTimes(r,u.time)),r=null);return t.merge(o)}difference(...e){return t.xor([this].concat(e)).map(r=>this.intersection(r)).filter(r=>r&&!r.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()} \u2013 ${this.e.toISO()})`:iq}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Interval { start: ${this.s.toISO()}, end: ${this.e.toISO()} }`:`Interval { Invalid, reason: ${this.invalidReason} }`}toLocaleString(e=$A,r={}){return this.isValid?Yl.create(this.s.loc.clone(r),e).formatInterval(this):iq}toISO(e){return this.isValid?`${this.s.toISO(e)}/${this.e.toISO(e)}`:iq}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:iq}toISOTime(e){return this.isValid?`${this.s.toISOTime(e)}/${this.e.toISOTime(e)}`:iq}toFormat(e,{separator:r=" \u2013 "}={}){return this.isValid?`${this.s.toFormat(e)}${r}${this.e.toFormat(e)}`:iq}toDuration(e,r){return this.isValid?this.e.diff(this.s,e,r):Ha.invalid(this.invalidReason)}mapEndpoints(e){return t.fromDateTimes(e(this.s),e(this.e))}};var FO=class{static hasDST(e=_o.defaultZone){let r=Jr.now().setZone(e).set({month:12});return!e.isUniversal&&r.offset!==r.set({month:6}).offset}static isValidIANAZone(e){return zd.isValidZone(e)}static normalizeZone(e){return By(e,_o.defaultZone)}static getStartOfWeek({locale:e=null,locObj:r=null}={}){return(r||vo.create(e)).getStartOfWeek()}static getMinimumDaysInFirstWeek({locale:e=null,locObj:r=null}={}){return(r||vo.create(e)).getMinDaysInFirstWeek()}static getWeekendWeekdays({locale:e=null,locObj:r=null}={}){return(r||vo.create(e)).getWeekendDays().slice()}static months(e="long",{locale:r=null,numberingSystem:n=null,locObj:o=null,outputCalendar:i="gregory"}={}){return(o||vo.create(r,n,i)).months(e)}static monthsFormat(e="long",{locale:r=null,numberingSystem:n=null,locObj:o=null,outputCalendar:i="gregory"}={}){return(o||vo.create(r,n,i)).months(e,!0)}static weekdays(e="long",{locale:r=null,numberingSystem:n=null,locObj:o=null}={}){return(o||vo.create(r,n,null)).weekdays(e)}static weekdaysFormat(e="long",{locale:r=null,numberingSystem:n=null,locObj:o=null}={}){return(o||vo.create(r,n,null)).weekdays(e,!0)}static meridiems({locale:e=null}={}){return vo.create(e).meridiems()}static eras(e="short",{locale:r=null}={}){return vo.create(r,null,"gregory").eras(e)}static features(){return{relative:poe(),localeWeek:moe()}}};function nAt(t,e){let r=o=>o.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),n=r(e)-r(t);return Math.floor(Ha.fromMillis(n).as("days"))}function X5r(t,e,r){let n=[["years",(u,l)=>l.year-u.year],["quarters",(u,l)=>l.quarter-u.quarter+(l.year-u.year)*4],["months",(u,l)=>l.month-u.month+(l.year-u.year)*12],["weeks",(u,l)=>{let c=nAt(u,l);return(c-c%7)/7}],["days",nAt]],o={},i=t,a,s;for(let[u,l]of n)r.indexOf(u)>=0&&(a=u,o[u]=l(t,e),s=i.plus(o),s>e?(o[u]--,t=i.plus(o),t>e&&(s=t,o[u]--,t=i.plus(o))):t=s);return[t,o,s,a]}function oAt(t,e,r,n){let[o,i,a,s]=X5r(t,e,r),u=e-o,l=r.filter(d=>["hours","minutes","seconds","milliseconds"].indexOf(d)>=0);l.length===0&&(a<e&&(a=o.plus({[s]:1})),a!==o&&(i[s]=(i[s]||0)+u/(a-o)));let c=Ha.fromObject(i,n);return l.length>0?Ha.fromMillis(u,n).shiftTo(...l).plus(c):c}var Q5r="missing Intl.DateTimeFormat.formatToParts support";function Zo(t,e=r=>r){return{regex:t,deser:([r])=>e(hTt(r))}}var eWr="\xA0",sAt=`[ ${eWr}]`,uAt=new RegExp(sAt,"g");function tWr(t){return t.replace(/\./g,"\\.?").replace(uAt,sAt)}function iAt(t){return t.replace(/\./g,"").replace(uAt," ").toLowerCase()}function Uy(t,e){return t===null?null:{regex:RegExp(t.map(tWr).join("|")),deser:([r])=>t.findIndex(n=>iAt(r)===iAt(n))+e}}function aAt(t,e){return{regex:t,deser:([,r,n])=>zj(r,n),groups:e}}function boe(t){return{regex:t,deser:([e])=>e}}function rWr(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function nWr(t,e){let r=ng(e),n=ng(e,"{2}"),o=ng(e,"{3}"),i=ng(e,"{4}"),a=ng(e,"{6}"),s=ng(e,"{1,2}"),u=ng(e,"{1,3}"),l=ng(e,"{1,6}"),c=ng(e,"{1,9}"),d=ng(e,"{2,4}"),f=ng(e,"{4,6}"),p=b=>({regex:RegExp(rWr(b.val)),deser:([g])=>g,literal:!0}),h=(b=>{if(t.literal)return p(b);switch(b.val){case"G":return Uy(e.eras("short"),0);case"GG":return Uy(e.eras("long"),0);case"y":return Zo(l);case"yy":return Zo(d,Z8);case"yyyy":return Zo(i);case"yyyyy":return Zo(f);case"yyyyyy":return Zo(a);case"M":return Zo(s);case"MM":return Zo(n);case"MMM":return Uy(e.months("short",!0),1);case"MMMM":return Uy(e.months("long",!0),1);case"L":return Zo(s);case"LL":return Zo(n);case"LLL":return Uy(e.months("short",!1),1);case"LLLL":return Uy(e.months("long",!1),1);case"d":return Zo(s);case"dd":return Zo(n);case"o":return Zo(u);case"ooo":return Zo(o);case"HH":return Zo(n);case"H":return Zo(s);case"hh":return Zo(n);case"h":return Zo(s);case"mm":return Zo(n);case"m":return Zo(s);case"q":return Zo(s);case"qq":return Zo(n);case"s":return Zo(s);case"ss":return Zo(n);case"S":return Zo(u);case"SSS":return Zo(o);case"u":return boe(c);case"uu":return boe(s);case"uuu":return Zo(r);case"a":return Uy(e.meridiems(),0);case"kkkk":return Zo(i);case"kk":return Zo(d,Z8);case"W":return Zo(s);case"WW":return Zo(n);case"E":case"c":return Zo(r);case"EEE":return Uy(e.weekdays("short",!1),1);case"EEEE":return Uy(e.weekdays("long",!1),1);case"ccc":return Uy(e.weekdays("short",!0),1);case"cccc":return Uy(e.weekdays("long",!0),1);case"Z":case"ZZ":return aAt(new RegExp(`([+-]${s.source})(?::(${n.source}))?`),2);case"ZZZ":return aAt(new RegExp(`([+-]${s.source})(${n.source})?`),2);case"z":return boe(/[a-z_+-/]{1,256}?/i);case" ":return boe(/[^\S\n\r]/);default:return p(b)}})(t)||{invalidReason:Q5r};return h.token=t,h}var oWr={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour12:{numeric:"h","2-digit":"hh"},hour24:{numeric:"H","2-digit":"HH"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};function iWr(t,e,r){let{type:n,value:o}=t;if(n==="literal"){let u=/^\s+$/.test(o);return{literal:!u,val:u?" ":o}}let i=e[n],a=n;n==="hour"&&(e.hour12!=null?a=e.hour12?"hour12":"hour24":e.hourCycle!=null?e.hourCycle==="h11"||e.hourCycle==="h12"?a="hour12":a="hour24":a=r.hour12?"hour12":"hour24");let s=oWr[a];if(typeof s=="object"&&(s=s[i]),s)return{literal:!1,val:s}}function aWr(t){return[`^${t.map(r=>r.regex).reduce((r,n)=>`${r}(${n.source})`,"")}$`,t]}function sWr(t,e,r){let n=t.match(e);if(n){let o={},i=1;for(let a in r)if(zA(r,a)){let s=r[a],u=s.groups?s.groups+1:1;!s.literal&&s.token&&(o[s.token.val[0]]=s.deser(n.slice(i,i+u))),i+=u}return[n,o]}else return[n,{}]}function uWr(t){let e=i=>{switch(i){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}},r=null,n;return ir(t.z)||(r=zd.create(t.z)),ir(t.Z)||(r||(r=new Gl(t.Z)),n=t.Z),ir(t.q)||(t.M=(t.q-1)*3+1),ir(t.h)||(t.h<12&&t.a===1?t.h+=12:t.h===12&&t.a===0&&(t.h=0)),t.G===0&&t.y&&(t.y=-t.y),ir(t.u)||(t.S=Y8(t.u)),[Object.keys(t).reduce((i,a)=>{let s=e(a);return s&&(i[s]=t[a]),i},{}),r,n]}var KIe=null;function lWr(){return KIe||(KIe=Jr.fromMillis(1555555555555)),KIe}function cWr(t,e){if(t.literal)return t;let r=Yl.macroTokenToFormatOpts(t.val),n=YIe(r,e);return n==null||n.includes(void 0)?t:n}function GIe(t,e){return Array.prototype.concat(...t.map(r=>cWr(r,e)))}var e6=class{constructor(e,r){if(this.locale=e,this.format=r,this.tokens=GIe(Yl.parseFormat(r),e),this.units=this.tokens.map(n=>nWr(n,e)),this.disqualifyingUnit=this.units.find(n=>n.invalidReason),!this.disqualifyingUnit){let[n,o]=aWr(this.units);this.regex=RegExp(n,"i"),this.handlers=o}}explainFromTokens(e){if(this.isValid){let[r,n]=sWr(e,this.regex,this.handlers),[o,i,a]=n?uWr(n):[null,null,void 0];if(zA(n,"a")&&zA(n,"H"))throw new Fy("Can't include meridiem when specifying 24-hour format");return{input:e,tokens:this.tokens,regex:this.regex,rawMatches:r,matches:n,result:o,zone:i,specificOffset:a}}else return{input:e,tokens:this.tokens,invalidReason:this.invalidReason}}get isValid(){return!this.disqualifyingUnit}get invalidReason(){return this.disqualifyingUnit?this.disqualifyingUnit.invalidReason:null}};function JIe(t,e,r){return new e6(t,r).explainFromTokens(e)}function lAt(t,e,r){let{result:n,zone:o,specificOffset:i,invalidReason:a}=JIe(t,e,r);return[n,o,i,a]}function YIe(t,e){if(!t)return null;let n=Yl.create(e,t).dtFormatter(lWr()),o=n.formatToParts(),i=n.resolvedOptions();return o.map(a=>iWr(a,t,i))}var ZIe="Invalid DateTime",cAt=864e13;function t6(t){return new Jl("unsupported zone",`the zone "${t.name}" is not supported`)}function XIe(t){return t.weekData===null&&(t.weekData=K8(t.c)),t.weekData}function QIe(t){return t.localWeekData===null&&(t.localWeekData=K8(t.c,t.loc.getMinDaysInFirstWeek(),t.loc.getStartOfWeek())),t.localWeekData}function Kj(t,e){let r={ts:t.ts,zone:t.zone,c:t.c,o:t.o,loc:t.loc,invalid:t.invalid};return new Jr({...r,...e,old:r})}function yAt(t,e,r){let n=t-e*60*1e3,o=r.offset(n);if(e===o)return[n,e];n-=(o-e)*60*1e3;let i=r.offset(n);return o===i?[n,o]:[t-Math.min(o,i)*60*1e3,Math.max(o,i)]}function _oe(t,e){t+=e*60*1e3;let r=new Date(t);return{year:r.getUTCFullYear(),month:r.getUTCMonth()+1,day:r.getUTCDate(),hour:r.getUTCHours(),minute:r.getUTCMinutes(),second:r.getUTCSeconds(),millisecond:r.getUTCMilliseconds()}}function woe(t,e,r){return yAt(KB(t),e,r)}function dAt(t,e){let r=t.o,n=t.c.year+Math.trunc(e.years),o=t.c.month+Math.trunc(e.months)+Math.trunc(e.quarters)*3,i={...t.c,year:n,month:o,day:Math.min(t.c.day,ZB(n,o))+Math.trunc(e.days)+Math.trunc(e.weeks)*7},a=Ha.fromObject({years:e.years-Math.trunc(e.years),quarters:e.quarters-Math.trunc(e.quarters),months:e.months-Math.trunc(e.months),weeks:e.weeks-Math.trunc(e.weeks),days:e.days-Math.trunc(e.days),hours:e.hours,minutes:e.minutes,seconds:e.seconds,milliseconds:e.milliseconds}).as("milliseconds"),s=KB(i),[u,l]=yAt(s,r,t.zone);return a!==0&&(u+=a,l=t.zone.offset(u)),{ts:u,o:l}}function sq(t,e,r,n,o,i){let{setZone:a,zone:s}=r;if(t&&Object.keys(t).length!==0||e){let u=e||s,l=Jr.fromObject(t,{...r,zone:u,specificOffset:i});return a?l:l.setZone(s)}else return Jr.invalid(new Jl("unparsable",`the input "${o}" can't be parsed as ${n}`))}function voe(t,e,r=!0){return t.isValid?Yl.create(vo.create("en-US"),{allowZ:r,forceSimple:!0}).formatDateTimeFromString(t,e):null}function eMe(t,e){let r=t.c.year>9999||t.c.year<0,n="";return r&&t.c.year>=0&&(n+="+"),n+=za(t.c.year,r?6:4),e?(n+="-",n+=za(t.c.month),n+="-",n+=za(t.c.day)):(n+=za(t.c.month),n+=za(t.c.day)),n}function fAt(t,e,r,n,o,i){let a=za(t.c.hour);return e?(a+=":",a+=za(t.c.minute),(t.c.millisecond!==0||t.c.second!==0||!r)&&(a+=":")):a+=za(t.c.minute),(t.c.millisecond!==0||t.c.second!==0||!r)&&(a+=za(t.c.second),(t.c.millisecond!==0||!n)&&(a+=".",a+=za(t.c.millisecond,3))),o&&(t.isOffsetFixed&&t.offset===0&&!i?a+="Z":t.o<0?(a+="-",a+=za(Math.trunc(-t.o/60)),a+=":",a+=za(Math.trunc(-t.o%60))):(a+="+",a+=za(Math.trunc(t.o/60)),a+=":",a+=za(Math.trunc(t.o%60)))),i&&(a+="["+t.zone.ianaName+"]"),a}var bAt={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},dWr={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},fWr={ordinal:1,hour:0,minute:0,second:0,millisecond:0},_At=["year","month","day","hour","minute","second","millisecond"],pWr=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],mWr=["year","ordinal","hour","minute","second","millisecond"];function hWr(t){let e={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[t.toLowerCase()];if(!e)throw new WB(t);return e}function pAt(t){switch(t.toLowerCase()){case"localweekday":case"localweekdays":return"localWeekday";case"localweeknumber":case"localweeknumbers":return"localWeekNumber";case"localweekyear":case"localweekyears":return"localWeekYear";default:return hWr(t)}}function gWr(t){return xoe[t]||(Soe===void 0&&(Soe=_o.now()),xoe[t]=t.offset(Soe)),xoe[t]}function mAt(t,e){let r=By(e.zone,_o.defaultZone);if(!r.isValid)return Jr.invalid(t6(r));let n=vo.fromObject(e),o,i;if(ir(t.year))o=_o.now();else{for(let u of _At)ir(t[u])&&(t[u]=bAt[u]);let a=FIe(t)||kIe(t);if(a)return Jr.invalid(a);let s=gWr(r);[o,i]=woe(t,s,r)}return new Jr({ts:o,zone:r,loc:n,o:i})}function hAt(t,e,r){let n=ir(r.round)?!0:r.round,o=(a,s)=>(a=GB(a,n||r.calendary?0:2,!0),e.loc.clone(r).relFormatter(r).format(a,s)),i=a=>r.calendary?e.hasSame(t,a)?0:e.startOf(a).diff(t.startOf(a),a).get(a):e.diff(t,a).get(a);if(r.unit)return o(i(r.unit),r.unit);for(let a of r.units){let s=i(a);if(Math.abs(s)>=1)return o(s,a)}return o(t>e?-0:0,r.units[r.units.length-1])}function gAt(t){let e={},r;return t.length>0&&typeof t[t.length-1]=="object"?(e=t[t.length-1],r=Array.from(t).slice(0,t.length-1)):r=Array.from(t),[e,r]}var Soe,xoe={},Jr=class t{constructor(e){let r=e.zone||_o.defaultZone,n=e.invalid||(Number.isNaN(e.ts)?new Jl("invalid input"):null)||(r.isValid?null:t6(r));this.ts=ir(e.ts)?_o.now():e.ts;let o=null,i=null;if(!n)if(e.old&&e.old.ts===this.ts&&e.old.zone.equals(r))[o,i]=[e.old.c,e.old.o];else{let s=qy(e.o)&&!e.old?e.o:r.offset(this.ts);o=_oe(this.ts,s),n=Number.isNaN(o.year)?new Jl("invalid input"):null,o=n?null:o,i=n?null:s}this._zone=r,this.loc=e.loc||vo.create(),this.invalid=n,this.weekData=null,this.localWeekData=null,this.c=o,this.o=i,this.isLuxonDateTime=!0}static now(){return new t({})}static local(){let[e,r]=gAt(arguments),[n,o,i,a,s,u,l]=r;return mAt({year:n,month:o,day:i,hour:a,minute:s,second:u,millisecond:l},e)}static utc(){let[e,r]=gAt(arguments),[n,o,i,a,s,u,l]=r;return e.zone=Gl.utcInstance,mAt({year:n,month:o,day:i,hour:a,minute:s,second:u,millisecond:l},e)}static fromJSDate(e,r={}){let n=RTt(e)?e.valueOf():NaN;if(Number.isNaN(n))return t.invalid("invalid input");let o=By(r.zone,_o.defaultZone);return o.isValid?new t({ts:n,zone:o,loc:vo.fromObject(r)}):t.invalid(t6(o))}static fromMillis(e,r={}){if(qy(e))return e<-cAt||e>cAt?t.invalid("Timestamp out of range"):new t({ts:e,zone:By(r.zone,_o.defaultZone),loc:vo.fromObject(r)});throw new ls(`fromMillis requires a numerical input, but received a ${typeof e} with value ${e}`)}static fromSeconds(e,r={}){if(qy(e))return new t({ts:e*1e3,zone:By(r.zone,_o.defaultZone),loc:vo.fromObject(r)});throw new ls("fromSeconds requires a numerical input")}static fromObject(e,r={}){e=e||{};let n=By(r.zone,_o.defaultZone);if(!n.isValid)return t.invalid(t6(n));let o=vo.fromObject(r),i=XB(e,pAt),{minDaysInFirstWeek:a,startOfWeek:s}=LIe(i,o),u=_o.now(),l=ir(r.specificOffset)?n.offset(u):r.specificOffset,c=!ir(i.ordinal),d=!ir(i.year),f=!ir(i.month)||!ir(i.day),p=d||f,m=i.weekYear||i.weekNumber;if((p||c)&&m)throw new Fy("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(f&&c)throw new Fy("Can't mix ordinal dates with month/day");let h=m||i.weekday&&!p,b,g,y=_oe(u,l);h?(b=pWr,g=dWr,y=K8(y,a,s)):c?(b=mWr,g=fWr,y=yoe(y)):(b=_At,g=bAt);let w=!1;for(let R of b){let j=i[R];ir(j)?w?i[R]=g[R]:i[R]=y[R]:w=!0}let S=h?ATt(i,a,s):c?ITt(i):FIe(i),C=S||kIe(i);if(C)return t.invalid(C);let P=h?NIe(i,a,s):c?DIe(i):i,[E,A]=woe(P,l,n),I=new t({ts:E,zone:n,o:A,loc:o});return i.weekday&&p&&e.weekday!==I.weekday?t.invalid("mismatched weekday",`you can't specify both a weekday of ${i.weekday} and a date of ${I.toISO()}`):I.isValid?I:t.invalid(I.invalid)}static fromISO(e,r={}){let[n,o]=KTt(e);return sq(n,o,r,"ISO 8601",e)}static fromRFC2822(e,r={}){let[n,o]=GTt(e);return sq(n,o,r,"RFC 2822",e)}static fromHTTP(e,r={}){let[n,o]=JTt(e);return sq(n,o,r,"HTTP",r)}static fromFormat(e,r,n={}){if(ir(e)||ir(r))throw new ls("fromFormat requires an input string and a format");let{locale:o=null,numberingSystem:i=null}=n,a=vo.fromOpts({locale:o,numberingSystem:i,defaultToEN:!0}),[s,u,l,c]=lAt(a,e,r);return c?t.invalid(c):sq(s,u,n,`format ${r}`,e,l)}static fromString(e,r,n={}){return t.fromFormat(e,r,n)}static fromSQL(e,r={}){let[n,o]=XTt(e);return sq(n,o,r,"SQL",e)}static invalid(e,r=null){if(!e)throw new ls("need to specify a reason the DateTime is invalid");let n=e instanceof Jl?e:new Jl(e,r);if(_o.throwOnInvalid)throw new ioe(n);return new t({invalid:n})}static isDateTime(e){return e&&e.isLuxonDateTime||!1}static parseFormatForOpts(e,r={}){let n=YIe(e,vo.fromObject(r));return n?n.map(o=>o?o.val:null).join(""):null}static expandFormat(e,r={}){return GIe(Yl.parseFormat(e),vo.fromObject(r)).map(o=>o.val).join("")}static resetCache(){Soe=void 0,xoe={}}get(e){return this[e]}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?XIe(this).weekYear:NaN}get weekNumber(){return this.isValid?XIe(this).weekNumber:NaN}get weekday(){return this.isValid?XIe(this).weekday:NaN}get isWeekend(){return this.isValid&&this.loc.getWeekendDays().includes(this.weekday)}get localWeekday(){return this.isValid?QIe(this).weekday:NaN}get localWeekNumber(){return this.isValid?QIe(this).weekNumber:NaN}get localWeekYear(){return this.isValid?QIe(this).weekYear:NaN}get ordinal(){return this.isValid?yoe(this.c).ordinal:NaN}get monthShort(){return this.isValid?FO.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?FO.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?FO.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?FO.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}getPossibleOffsets(){if(!this.isValid||this.isOffsetFixed)return[this];let e=864e5,r=6e4,n=KB(this.c),o=this.zone.offset(n-e),i=this.zone.offset(n+e),a=this.zone.offset(n-o*r),s=this.zone.offset(n-i*r);if(a===s)return[this];let u=n-a*r,l=n-s*r,c=_oe(u,a),d=_oe(l,s);return c.hour===d.hour&&c.minute===d.minute&&c.second===d.second&&c.millisecond===d.millisecond?[Kj(this,{ts:u}),Kj(this,{ts:l})]:[this]}get isInLeapYear(){return Vj(this.year)}get daysInMonth(){return ZB(this.year,this.month)}get daysInYear(){return this.isValid?UA(this.year):NaN}get weeksInWeekYear(){return this.isValid?Hj(this.weekYear):NaN}get weeksInLocalWeekYear(){return this.isValid?Hj(this.localWeekYear,this.loc.getMinDaysInFirstWeek(),this.loc.getStartOfWeek()):NaN}resolvedLocaleOptions(e={}){let{locale:r,numberingSystem:n,calendar:o}=Yl.create(this.loc.clone(e),e).resolvedOptions(this);return{locale:r,numberingSystem:n,outputCalendar:o}}toUTC(e=0,r={}){return this.setZone(Gl.instance(e),r)}toLocal(){return this.setZone(_o.defaultZone)}setZone(e,{keepLocalTime:r=!1,keepCalendarTime:n=!1}={}){if(e=By(e,_o.defaultZone),e.equals(this.zone))return this;if(e.isValid){let o=this.ts;if(r||n){let i=e.offset(this.ts),a=this.toObject();[o]=woe(a,i,e)}return Kj(this,{ts:o,zone:e})}else return t.invalid(t6(e))}reconfigure({locale:e,numberingSystem:r,outputCalendar:n}={}){let o=this.loc.clone({locale:e,numberingSystem:r,outputCalendar:n});return Kj(this,{loc:o})}setLocale(e){return this.reconfigure({locale:e})}set(e){if(!this.isValid)return this;let r=XB(e,pAt),{minDaysInFirstWeek:n,startOfWeek:o}=LIe(r,this.loc),i=!ir(r.weekYear)||!ir(r.weekNumber)||!ir(r.weekday),a=!ir(r.ordinal),s=!ir(r.year),u=!ir(r.month)||!ir(r.day),l=s||u,c=r.weekYear||r.weekNumber;if((l||a)&&c)throw new Fy("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(u&&a)throw new Fy("Can't mix ordinal dates with month/day");let d;i?d=NIe({...K8(this.c,n,o),...r},n,o):ir(r.ordinal)?(d={...this.toObject(),...r},ir(r.day)&&(d.day=Math.min(ZB(d.year,d.month),d.day))):d=DIe({...yoe(this.c),...r});let[f,p]=woe(d,this.o,this.zone);return Kj(this,{ts:f,o:p})}plus(e){if(!this.isValid)return this;let r=Ha.fromDurationLike(e);return Kj(this,dAt(this,r))}minus(e){if(!this.isValid)return this;let r=Ha.fromDurationLike(e).negate();return Kj(this,dAt(this,r))}startOf(e,{useLocaleWeeks:r=!1}={}){if(!this.isValid)return this;let n={},o=Ha.normalizeUnit(e);switch(o){case"years":n.month=1;case"quarters":case"months":n.day=1;case"weeks":case"days":n.hour=0;case"hours":n.minute=0;case"minutes":n.second=0;case"seconds":n.millisecond=0;break;case"milliseconds":break}if(o==="weeks")if(r){let i=this.loc.getStartOfWeek(),{weekday:a}=this;a<i&&(n.weekNumber=this.weekNumber-1),n.weekday=i}else n.weekday=1;if(o==="quarters"){let i=Math.ceil(this.month/3);n.month=(i-1)*3+1}return this.set(n)}endOf(e,r){return this.isValid?this.plus({[e]:1}).startOf(e,r).minus(1):this}toFormat(e,r={}){return this.isValid?Yl.create(this.loc.redefaultToEN(r)).formatDateTimeFromString(this,e):ZIe}toLocaleString(e=$A,r={}){return this.isValid?Yl.create(this.loc.clone(r),e).formatDateTime(this):ZIe}toLocaleParts(e={}){return this.isValid?Yl.create(this.loc.clone(e),e).formatDateTimeParts(this):[]}toISO({format:e="extended",suppressSeconds:r=!1,suppressMilliseconds:n=!1,includeOffset:o=!0,extendedZone:i=!1}={}){if(!this.isValid)return null;let a=e==="extended",s=eMe(this,a);return s+="T",s+=fAt(this,a,r,n,o,i),s}toISODate({format:e="extended"}={}){return this.isValid?eMe(this,e==="extended"):null}toISOWeekDate(){return voe(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:e=!1,suppressSeconds:r=!1,includeOffset:n=!0,includePrefix:o=!1,extendedZone:i=!1,format:a="extended"}={}){return this.isValid?(o?"T":"")+fAt(this,a==="extended",r,e,n,i):null}toRFC2822(){return voe(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return voe(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?eMe(this,!0):null}toSQLTime({includeOffset:e=!0,includeZone:r=!1,includeOffsetSpace:n=!0}={}){let o="HH:mm:ss.SSS";return(r||e)&&(n&&(o+=" "),r?o+="z":e&&(o+="ZZ")),voe(this,o,!0)}toSQL(e={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(e)}`:null}toString(){return this.isValid?this.toISO():ZIe}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`DateTime { ts: ${this.toISO()}, zone: ${this.zone.name}, locale: ${this.locale} }`:`DateTime { Invalid, reason: ${this.invalidReason} }`}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(e={}){if(!this.isValid)return{};let r={...this.c};return e.includeConfig&&(r.outputCalendar=this.outputCalendar,r.numberingSystem=this.loc.numberingSystem,r.locale=this.loc.locale),r}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(e,r="milliseconds",n={}){if(!this.isValid||!e.isValid)return Ha.invalid("created by diffing an invalid DateTime");let o={locale:this.locale,numberingSystem:this.numberingSystem,...n},i=jTt(r).map(Ha.normalizeUnit),a=e.valueOf()>this.valueOf(),s=a?this:e,u=a?e:this,l=oAt(s,u,i,o);return a?l.negate():l}diffNow(e="milliseconds",r={}){return this.diff(t.now(),e,r)}until(e){return this.isValid?LO.fromDateTimes(this,e):this}hasSame(e,r,n){if(!this.isValid)return!1;let o=e.valueOf(),i=this.setZone(e.zone,{keepLocalTime:!0});return i.startOf(r,n)<=o&&o<=i.endOf(r,n)}equals(e){return this.isValid&&e.isValid&&this.valueOf()===e.valueOf()&&this.zone.equals(e.zone)&&this.loc.equals(e.loc)}toRelative(e={}){if(!this.isValid)return null;let r=e.base||t.fromObject({},{zone:this.zone}),n=e.padding?this<r?-e.padding:e.padding:0,o=["years","months","days","hours","minutes","seconds"],i=e.unit;return Array.isArray(e.unit)&&(o=e.unit,i=void 0),hAt(r,this.plus(n),{...e,numeric:"always",units:o,unit:i})}toRelativeCalendar(e={}){return this.isValid?hAt(e.base||t.fromObject({},{zone:this.zone}),this,{...e,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...e){if(!e.every(t.isDateTime))throw new ls("min requires all arguments be DateTimes");return $Ie(e,r=>r.valueOf(),Math.min)}static max(...e){if(!e.every(t.isDateTime))throw new ls("max requires all arguments be DateTimes");return $Ie(e,r=>r.valueOf(),Math.max)}static fromFormatExplain(e,r,n={}){let{locale:o=null,numberingSystem:i=null}=n,a=vo.fromOpts({locale:o,numberingSystem:i,defaultToEN:!0});return JIe(a,e,r)}static fromStringExplain(e,r,n={}){return t.fromFormatExplain(e,r,n)}static buildFormatParser(e,r={}){let{locale:n=null,numberingSystem:o=null}=r,i=vo.fromOpts({locale:n,numberingSystem:o,defaultToEN:!0});return new e6(i,e)}static fromFormatParser(e,r,n={}){if(ir(e)||ir(r))throw new ls("fromFormatParser requires an input string and a format parser");let{locale:o=null,numberingSystem:i=null}=n,a=vo.fromOpts({locale:o,numberingSystem:i,defaultToEN:!0});if(!a.equals(r.locale))throw new ls(`fromFormatParser called with a locale of ${a}, but the format parser was created for ${r.locale}`);let{result:s,zone:u,specificOffset:l,invalidReason:c}=r.explainFromTokens(e);return c?t.invalid(c):sq(s,u,n,`format ${r.format}`,e,l)}static get DATE_SHORT(){return $A}static get DATE_MED(){return P8}static get DATE_MED_WITH_WEEKDAY(){return yIe}static get DATE_FULL(){return E8}static get DATE_HUGE(){return T8}static get TIME_SIMPLE(){return A8}static get TIME_WITH_SECONDS(){return I8}static get TIME_WITH_SHORT_OFFSET(){return M8}static get TIME_WITH_LONG_OFFSET(){return R8}static get TIME_24_SIMPLE(){return j8}static get TIME_24_WITH_SECONDS(){return N8}static get TIME_24_WITH_SHORT_OFFSET(){return D8}static get TIME_24_WITH_LONG_OFFSET(){return L8}static get DATETIME_SHORT(){return F8}static get DATETIME_SHORT_WITH_SECONDS(){return k8}static get DATETIME_MED(){return $8}static get DATETIME_MED_WITH_SECONDS(){return B8}static get DATETIME_MED_WITH_WEEKDAY(){return bIe}static get DATETIME_FULL(){return q8}static get DATETIME_FULL_WITH_SECONDS(){return U8}static get DATETIME_HUGE(){return z8}static get DATETIME_HUGE_WITH_SECONDS(){return H8}};function aq(t){if(Jr.isDateTime(t))return t;if(t&&t.valueOf&&qy(t.valueOf()))return Jr.fromJSDate(t);if(t&&typeof t=="object")return Jr.fromObject(t);throw new ls(`Unknown datetime argument: ${t}, of type ${typeof t}`)}var vAt=require("obsidian");md();async function yWr(){let t=new Date,e=t.getTimezoneOffset(),r=new Intl.DateTimeFormat("en",{timeZoneName:"short"}).formatToParts(t).find(n=>n.type==="timeZoneName")?.value||"Unknown";return{epoch:Math.floor(t.getTime()),isoString:t.toISOString(),userLocaleString:t.toLocaleString(),localDateString:t.toLocaleDateString("en-CA",{year:"numeric",month:"2-digit",day:"2-digit"}),timezoneOffset:-e,timezone:r}}var wAt=km(async()=>yWr(),{name:"getCurrentTime",description:"Get the current time in various formats, including timezone information",schema:Vr.object({})}),SAt={jan:1,january:1,feb:2,february:2,mar:3,march:3,apr:4,april:4,may:5,jun:6,june:6,jul:7,july:7,aug:8,august:8,sep:9,september:9,oct:10,october:10,nov:11,november:11,dec:12,december:12};function bWr(t,e){let r=t.match(/^(last|past|previous|prior)\s+(\d+)\s+(days?|weeks?|months?|years?)$/i);if(!r)return;let[,,n,o]=r,i=parseInt(n);if(i<=0)return;let a=o.replace(/s$/,""),s=e.startOf("day");return{start:s.minus({[a+"s"]:i}),end:s}}function _Wr(t,e){switch(t){case"yesterday":return{start:e.minus({days:1}).startOf("day"),end:e.minus({days:1}).endOf("day")};case"last week":return{start:e.minus({weeks:1}).startOf("week"),end:e.minus({weeks:1}).endOf("week")};case"this week":return{start:e.startOf("week"),end:e.endOf("week")};case"next week":return{start:e.plus({weeks:1}).startOf("week"),end:e.plus({weeks:1}).endOf("week")};case"last month":return{start:e.minus({months:1}).startOf("month"),end:e.minus({months:1}).endOf("month")};case"this month":return{start:e.startOf("month"),end:e.endOf("month")};case"next month":return{start:e.plus({months:1}).startOf("month"),end:e.plus({months:1}).endOf("month")};case"last year":return{start:e.minus({years:1}).startOf("year"),end:e.minus({years:1}).endOf("year")};case"this year":return{start:e.startOf("year"),end:e.endOf("year")};case"next year":return{start:e.plus({years:1}).startOf("year"),end:e.plus({years:1}).endOf("year")};case"last quarter":return{start:e.minus({quarters:1}).startOf("quarter"),end:e.minus({quarters:1}).endOf("quarter")};case"this quarter":return{start:e.startOf("quarter"),end:e.endOf("quarter")};case"next quarter":return{start:e.plus({quarters:1}).startOf("quarter"),end:e.plus({quarters:1}).endOf("quarter")}}}function vWr(t,e){let r=t.match(/(?:the\s+)?week\s+of\s+(.+)/i);if(!r)return;let n=r[1],o=gIe(n,e.toJSDate(),{forwardDate:!1});if(o.length===0)return;let i=Jr.fromJSDate(o[0].start.date()).startOf("week"),a=i.endOf("week");return i>e&&(i=i.minus({years:1}),a=a.minus({years:1})),{start:i,end:a}}function wWr(t,e){let r=t.match(/^(jan|january|feb|february|mar|march|apr|april|may|jun|june|jul|july|aug|august|sep|september|oct|october|nov|november|dec|december)$/i);if(!r)return;let n=SAt[r[1]],o=e.year;n>e.month&&o--;let i=Jr.fromObject({year:o,month:n,day:1}),a=i.endOf("month");return i>e&&(i=i.minus({years:1}),a=a.minus({years:1})),{start:i,end:a}}function SWr(t,e){let r=t.match(/^(?:(?:the\s+)?(?:year|yr)(?:\s+(?:of|in))?\s+)?(\d{4})$/i);if(!r)return;let n=parseInt(r[1]),o=Jr.fromObject({year:n,month:1,day:1}),i=Jr.fromObject({year:n,month:12,day:31});return o>e&&(o=o.minus({years:1}),i=i.minus({years:1})),{start:o,end:i}}function xWr(t,e){let r=t.match(/^(?:(?:q|Q)(\d{1})\s+(\d{4})|(\d{4})\s+(?:q|Q)(\d{1}))$/),n=t.match(/^(?:q|Q)(\d{1})$/),o,i;if(r)o=parseInt(r[1]||r[4]),i=parseInt(r[2]||r[3]);else if(n){o=parseInt(n[1]),i=e.year;let l=Math.floor((e.month-1)/3)+1;o>l&&i--}else return;if(o<1||o>4)return;let a=(o-1)*3+1,s=Jr.fromObject({year:i,month:a,day:1}).startOf("day"),u=s.plus({months:3}).minus({days:1}).endOf("day");return s>e&&(s=s.minus({years:1}),u=u.minus({years:1})),{start:s,end:u}}function CWr(t,e){let r=t.match(/^(jan|january|feb|february|mar|march|apr|april|may|jun|june|jul|july|aug|august|sep|september|oct|october|nov|november|dec|december)\s+(\d{4})$/i);if(!r)return;let n=SAt[r[1].toLowerCase()],o=parseInt(r[2]),i=Jr.fromObject({year:o,month:n,day:1}).startOf("day"),a=i.endOf("month");return i>e&&(i=i.minus({years:1}),a=a.minus({years:1})),{start:i,end:a}}function OWr(t){let e=Jr.now(),r=t.toLowerCase().replace("@vault","").trim(),n=bWr(r,e)||_Wr(r,e)||vWr(r,e)||wWr(r,e)||CWr(r,e)||xWr(r,e)||SWr(r,e);if(n)return{startTime:r6(n.start),endTime:r6(n.end)};let o=gIe(t,e.toJSDate(),{forwardDate:!1});if(o.length>0){let i=Jr.fromJSDate(o[0].start.date()).startOf("day"),a=o[0].end?Jr.fromJSDate(o[0].end.date()).endOf("day"):i.endOf("day");return i>e&&(i.minus({years:1}),a.minus({years:1})),{startTime:r6(i),endTime:r6(a)}}console.warn(`Unable to parse time expression: ${t}`)}function r6(t){let e=t.toJSDate(),r=e.getTimezoneOffset(),n=new Intl.DateTimeFormat("en",{timeZoneName:"short"}).formatToParts(e).find(o=>o.type==="timeZoneName")?.value||"Unknown";return{epoch:Math.floor(e.getTime()),isoString:e.toISOString(),userLocaleString:e.toLocaleString(),localDateString:e.toLocaleDateString("en-CA",{year:"numeric",month:"2-digit",day:"2-digit"}),timezoneOffset:-r,timezone:n}}var xAt=km(async({timeExpression:t})=>OWr(t),{name:"getTimeRangeMs",description:"Get a time range in milliseconds based on a natural language time expression",schema:Vr.object({timeExpression:Vr.string().describe("A natural language time expression (e.g., 'last week', 'from July 1 to July 15')")})});function PWr(t){let e=t.toString().length===10?t*1e3:t,r=Jr.fromMillis(e);return r6(r)}var CAt=km(async({epoch:t})=>PWr(t),{name:"getTimeInfoByEpoch",description:"Convert a Unix timestamp (in seconds or milliseconds) to detailed time information",schema:Vr.object({epoch:Vr.number().describe("Unix timestamp in seconds or milliseconds")})});function EWr(t){let e=t.match(/^(\d+)\s*(s|sec|seconds?|m|min|minutes?|h|hr|hours?)$/i);if(!e)throw new Error(`Invalid time interval format: ${t}`);let r=parseInt(e[1],10),n=e[2].toLowerCase();switch(n){case"s":case"sec":case"second":case"seconds":return r*1e3;case"m":case"min":case"minute":case"minutes":return r*60*1e3;case"h":case"hr":case"hour":case"hours":return r*60*60*1e3;default:throw new Error(`Unsupported time unit: ${n}`)}}async function TWr(t="25min"){let e=EWr(t);return new Promise(r=>{setTimeout(()=>{new vAt.Notice(`Pomodoro timer (${t}) completed! Take a break!`),r()},e)})}var tMe=km(async({interval:t="25min"})=>(TWr(t),`Pomodoro timer started. It will end in ${t}.`),{name:"startPomodoro",description:"Start a Pomodoro timer with a customizable interval",schema:Vr.object({interval:Vr.string().optional().describe("Time interval (e.g., '25min', '5s', '1h'). Default is 25min.")})});md();function AWr(t){return"children"in t&&"path"in t}function IWr(t){return"path"in t&&!("children"in t)}function MWr(t){let e=t.split(".");return e.length>1&&e.pop()?.toLowerCase()||""}function rMe(t,e=!0){let r=[],n={},o={},{inclusions:i,exclusions:a}=Ud();for(let u of t.children)if(IWr(u)){if(Hs(u,i,a)){e&&r.push(u.name);let l=MWr(u.name)||"unknown";l&&(n[l]=(n[l]||0)+1)}}else if(AWr(u)){let l=rMe(u,e);if(Object.keys(l).length>0&&(o[u.name]=l[u.name],l[u.name].extensionCounts))for(let[c,d]of Object.entries(l[u.name].extensionCounts))n[c]=(n[c]||0)+d}let s={};return Object.keys(n).length>0&&(s.extensionCounts=n),e&&r.length>0&&(s.files=r),Object.keys(o).length>0&&(s.subFolders=o),Object.keys(s).length===0?{}:t.name?{[t.name]:s}:{vault:s}}var OAt=t=>km(async()=>{let e=rMe(t,!0),r=`A JSON represents the file tree as a nested structure:
* The root object has a key "vault" which contains a FileTreeNode object.
* Each FileTreeNode has these properties:
  * files: An array of filenames in the current directory (if any files exist)
  * subFolders: An object mapping folder names to their FileTreeNode objects (if any subfolders exist)
  * extensionCounts: An object with counts of file extensions in this folder and all subfolders

`,n=JSON.stringify(e);if(n.length>5e5){let o=rMe(t,!1);return r+JSON.stringify(o)}return r+n},{name:"getFileTree",description:"Get the file tree as a nested structure of folders and files",schema:Vr.void()});md();var nMe=km(async({url:t})=>{try{let e=await Ii.getInstance().youtube4llm(t);return e.response.transcript?JSON.stringify({success:!0,transcript:e.response.transcript,elapsed_time_ms:e.elapsed_time_ms}):JSON.stringify({success:!1,message:"Transcript not available. Only English videos with the auto transcript option turned on are supported at the moment"})}catch(e){return console.error(`Error transcribing YouTube video ${t}:`,e),JSON.stringify({success:!1,message:"An error occurred while transcribing the YouTube video."})}},{name:"youtubeTranscription",description:"Get the transcript of a YouTube video",schema:Vr.object({url:Vr.string().describe("The YouTube video URL"),brevilabsClient:Vr.any().describe("The BrevilabsClient instance")})});wn();var n6=["@vault","@composer","@websearch","@youtube","@pomodoro"],Gj=class{static initTools(e){this.tools.length===0&&(this.tools=[wAt,CAt,xAt,XAe,gEt,tMe,QAe,nMe,OAt(e.getRoot())])}static async analyzeIntent(e){try{let r=await Ii.getInstance().broca(e,pR());if(!r?.response)throw new Error(r?.detail||"Broca API call failed");let n=r.response.tool_calls,o=r.response.salience_terms,i=[],a;for(let s of n){let u=this.tools.find(l=>l.name===s.tool);if(u){let l=s.args||{};if(u.name==="getTimeRangeMs"&&(a=await kB.callTool(u,l)),u.name=="getFileTree"&&pR())continue;i.push({tool:u,args:l})}}return await this.processAtCommands(e,i,{timeRange:a,salientTerms:o}),i}catch(r){throw console.error("Error in intent analysis:",r),r}}static async processAtCommands(e,r,n){let o=e.toLowerCase(),{timeRange:i,salientTerms:a}=n;if(o.includes("@vault")&&(a.length>0||i)){let s=this.removeAtCommands(e);r.push({tool:XAe,args:{timeRange:i||void 0,query:s,salientTerms:a}})}if(o.includes("@websearch")||o.includes("@web")){let s=this.removeAtCommands(e),l=await Kl.instance.getCurrentChainManager().memoryManager.getMemory().loadMemoryVariables({}),c=aR(l);r.push({tool:QAe,args:{query:s,chatHistory:c}})}if(o.includes("@pomodoro")){let s=e.match(/@pomodoro\s+(\S+)/i),u=s?s[1]:"25min";r.push({tool:tMe,args:{interval:u}})}if(o.includes("@youtube")){let s=v2(e);s&&r.push({tool:nMe,args:{url:s}})}}static removeAtCommands(e){return e.split(" ").filter(r=>!n6.includes(r.toLowerCase())).join(" ").trim()}};Gj.tools=[];var o6=class{constructor(e){this.updateCurrentAiMessage=e;this.hasOpenThinkBlock=!1;this.fullResponse=""}handleClaude37Chunk(e){let r="";for(let n of e)switch(n.type){case"text":r+=n.text;break;case"thinking":return this.hasOpenThinkBlock||(this.fullResponse+=`
<think>`,this.hasOpenThinkBlock=!0),this.fullResponse+=n.thinking,this.updateCurrentAiMessage(this.fullResponse),!0}return r&&(this.fullResponse+=r),!1}handleDeepseekChunk(e){return typeof e.content=="string"&&(this.fullResponse+=e.content),e.additional_kwargs?.reasoning_content?(this.hasOpenThinkBlock||(this.fullResponse+=`
<think>`,this.hasOpenThinkBlock=!0),this.fullResponse+=e.additional_kwargs.reasoning_content,!0):!1}processChunk(e){let r=!1;Array.isArray(e.content)?r=this.handleClaude37Chunk(e.content):r=this.handleDeepseekChunk(e),this.hasOpenThinkBlock&&!r&&(this.fullResponse+="</think>",this.hasOpenThinkBlock=!1),this.updateCurrentAiMessage(this.fullResponse)}close(){return this.hasOpenThinkBlock&&(this.fullResponse+="</think>",this.updateCurrentAiMessage(this.fullResponse)),this.fullResponse}},i6=class{constructor(e){this.chainManager=e}async handleResponse(e,r,n,o,i,a){return e&&!(n.signal.aborted&&n.signal.reason==="new-chat")?(await this.chainManager.memoryManager.getMemory().saveContext({input:r.message},{output:e}),o({message:e,sender:Nb,isVisible:!0,timestamp:Nl(new Date),sources:a}),i("")):n.signal.reason==="new-chat"&&i(""),ie(`==== Chat Memory ====
`,this.chainManager.memoryManager.getMemory().chatHistory.messages.map(s=>s.content)),ie(`==== Final AI Response ====
`,e),e}async handleError(e,r,n){let o=Go(e);fe("Error during LLM invocation:",o);let i=e?.response?.data?.error||o,a=i?.code||o,s="";if(e?.message?.includes("Invalid license key")?s="Invalid Copilot Plus license key. Please check your license key in settings.":a==="model_not_found"?s="You do not have access to this model or the model does not exist, please check with your API provider.":s=`${a}`,fe(i),r&&n){n("");let u=s.search("Troubleshooting URL");s=u!==-1?s.slice(0,u):s,o.search(/401|invalid|not valid/gi)!==-1&&(s=`Something went wrong. Please check if you have set your API key.
Path: Settings > copilot plugin > Basic Tab > Set Keys.
Or check model config
Error Details: `+s),r({message:s,isErrorMessage:!0,sender:Nb,isVisible:!0,timestamp:Nl(new Date)})}else new TAt.Notice(s),fe(i)}},Coe=class extends i6{async run(e,r,n,o,i){let a=new o6(n);try{let l=await this.chainManager.memoryManager.getMemory().loadMemoryVariables({}),c=aR(l),d=[],f=Ib(),p=this.chainManager.chatModelManager.getChatModel();f&&d.push({role:lG(p),content:f});for(let h of c)d.push({role:h.role,content:h.content});d.push({role:"user",content:e.message}),ie(`==== Final Request to AI ====
`,d);let m=await Zg(()=>this.chainManager.chatModelManager.getChatModel().stream(d,{signal:r.signal}));for await(let h of m){if(r.signal.aborted){ie("Stream iteration aborted",{reason:r.signal.reason});break}a.processChunk(h)}}catch(u){u.name==="AbortError"||r.signal.aborted?ie("Stream aborted by user",{reason:r.signal.reason}):await this.handleError(u,o,n)}let s=a.close();return r.signal.aborted&&r.signal.reason==="new-chat"?(n(""),""):this.handleResponse(s,e,r,o,n)}},Ooe=class extends i6{async run(e,r,n,o,i){let a=new o6(n);try{if(await this.chainManager.vectorStoreManager.isIndexEmpty())return this.handleResponse(cG,e,r,o,n);let c=await this.chainManager.memoryManager.getMemory().loadMemoryVariables({}),d=aR(c),f=e.message;d.length>0&&(f=e.message);let m=await new cx({minSimilarityScore:.01,maxK:ue().maxSourceChunks,salientTerms:[]}).getRelevantDocuments(f);this.chainManager.storeRetrieverDocuments(m);let h=m.map(P=>P.pageContent).join(`

`),b=[],g=Ib(),y=`

Answer the question with as detailed as possible based only on the following context:
`+h,w=g+y,S=this.chainManager.chatModelManager.getChatModel();w&&b.push({role:lG(S),content:w});for(let P of d)b.push({role:P.role,content:P.content});b.push({role:"user",content:e.message}),ie(`==== Final Request to AI ====
`,b);let C=await Zg(()=>this.chainManager.chatModelManager.getChatModel().stream(b,{signal:r.signal}));for await(let P of C){if(r.signal.aborted){ie("VaultQA stream iteration aborted",{reason:r.signal.reason});break}a.processChunk(P)}}catch(u){u.name==="AbortError"||r.signal.aborted?ie("VaultQA stream aborted by user",{reason:r.signal.reason}):await this.handleError(u,o,n)}let s=a.close();return r.signal.aborted&&r.signal.reason==="new-chat"?(n(""),""):(s=this.addSourcestoResponse(s),this.handleResponse(s,e,r,o,n))}addSourcestoResponse(e){let r=m4e(this.chainManager.getRetrievedDocuments());if(r.length>0){let n=r.map(o=>`- [[${o}]]`).join(`
`);e+=`

#### Sources:

`+n}return e}},a6=class extends i6{isYoutubeOnlyMessage(e){let r=e.trim(),n=r.includes("@youtube"),o=v2(r),i=r.split(/\s+/).filter(a=>a!=="@youtube"&&a.length>0);return n&&o!==null&&i.length===1}async processImageUrls(e){let r=[],n=await Bj.processUrlBatch(e,r,this.chainManager.app.vault);return Bj.showFailedImagesNotice(r),n}async processChatInputImages(e){let r=[],n=await Bj.processChatImageBatch(e,r,this.chainManager.app.vault);return Bj.showFailedImagesNotice(r),n}async extractEmbeddedImages(e){let r=/!\[\[(.*?\.(png|jpg|jpeg|gif|webp|bmp|svg))\]\]/g;return[...e.matchAll(r)].map(i=>i[1])}async buildMessageContent(e,r){let n=[],o=[],i=ue(),a=[],s=r.context?.urls;if(s&&s.length>0&&a.push({urls:s,type:"context"}),i.passMarkdownImages){let d=await this.extractEmbeddedImages(e);d.length>0&&a.push({urls:d,type:"embedded"})}for(let d of a){let f=await this.processImageUrls(d.urls);o.push(...f.successfulImages),n.push(...f.failureDescriptions)}let u=r.content;if(u&&u.length>0){let d=await this.processChatInputImages(u);o.push(...d.successfulImages),n.push(...d.failureDescriptions)}let l=e;n.length>0&&(l=`${e}

Note: 
${n.join(`
`)}
`);let c=[{type:"text",text:l}];return o.length>0&&c.push(...o),c}hasCapability(e,r){let n=e.modelName||e.model||"";return this.chainManager.chatModelManager.findModelByName(n)?.capabilities?.includes(r)??!1}isMultimodalModel(e){return this.hasCapability(e,"vision")}async streamMultimodalResponse(e,r,n,o){let a=await this.chainManager.memoryManager.getMemory().loadMemoryVariables({}),s=aR(a),u=[],l=await this.getSystemPrompt();s.length>0&&(l+=`

The following is the relevant conversation history. Use this context to maintain consistency in your responses:`);let c=this.chainManager.chatModelManager.getChatModel();l&&u.push({role:lG(c),content:`${l}
IMPORTANT: Maintain consistency with previous responses in the conversation. If you've provided information about a person or topic before, use that same information in follow-up questions.`});for(let g of s)u.push({role:g.role,content:g.content});let d=this.chainManager.chatModelManager.getChatModel(),p=this.isMultimodalModel(d)?await this.buildMessageContent(e,r):e;u.push({role:"user",content:p});let m=p instanceof Array?p[0].text:p;ie("Enhanced user message: ",m),ie(`==== Final Request to AI ====
`,u);let h=new o6(o),b=await Zg(()=>this.chainManager.chatModelManager.getChatModel().stream(u,{signal:n.signal}));for await(let g of b){if(n.signal.aborted){ie("CopilotPlus multimodal stream iteration aborted",{reason:n.signal.reason});break}h.processChunk(g)}return h.close()}async run(e,r,n,o,i){let{updateLoadingMessage:a}=i,s="",u=[],l="",c=d=>{l=d,n(d)};try{if(this.isYoutubeOnlyMessage(e.message)){let w=v2(e.message),S="Transcript not available. Only videos with the auto transcript option turned on are supported at the moment.";if(w)try{let C=await Ii.getInstance().youtube4llm(w);return C.response.transcript?this.handleResponse(C.response.transcript,e,r,o,n):this.handleResponse(S,e,r,o,n)}catch(C){return fe("Error processing YouTube video:",C),this.handleResponse(S,e,r,o,n)}}ie("==== Step 1: Analyzing intent ====");let d,f=e.originalMessage||e.message;try{d=await Gj.analyzeIntent(f)}catch(w){return this.handleResponse(l4e(w),e,r,o,n)}let p=e.message.split(" ").filter(w=>!n6.includes(w.toLowerCase())).join(" ").trim(),m=await this.executeToolCalls(d,a),h=m.find(w=>w.tool==="localSearch"&&w.output&&w.output.length>0),g=await this.chainManager.memoryManager.getMemory().loadMemoryVariables({}),y=aR(g);if(h){ie("==== Step 2: Processing local search results ====");let w=JSON.parse(h.output);ie("==== Step 3: Condensing Question ====");let S=await Jne(p,y);ie("Condensed standalone question: ",S),ie("==== Step 4: Preparing context ====");let C=this.getTimeExpression(d),P=this.prepareLocalSearchResult(w,C),E=m.filter(R=>R.tool==="getCurrentTime"),A=this.prepareEnhancedUserMessage(S,E);ie(P),ie("==== Step 5: Invoking QA Chain ====");let I=await this.chainManager.promptManager.getQAPrompt({question:A,context:P,systemMessage:""});s=await this.streamMultimodalResponse(I,e,r,c),u=this.getSources(w)}else{let w=this.prepareEnhancedUserMessage(p,m);ie("No local search results. Using standard LLM Chain."),s=await this.streamMultimodalResponse(w,e,r,c)}}catch(d){a?.(Db.DEFAULT),d.name==="AbortError"||r.signal.aborted?ie("CopilotPlus stream aborted by user",{reason:r.signal.reason}):await this.handleError(d,o,n)}return r.signal.aborted&&r.signal.reason==="new-chat"?(n(""),""):(r.signal.aborted&&l&&(s=l),this.handleResponse(s,e,r,o,n,u))}getSources(e){return!e||!Array.isArray(e)?(gh("No valid documents provided to getSources"),[]):this.sortUniqueDocsByScore(e)}sortUniqueDocsByScore(e){let r=new Map;for(let n of e){if(!n.title||!n?.score&&!n?.rerank_score){gh("Invalid document structure:",n);continue}let o=r.get(n.title),i=n&&"rerank_score"in n,a=i?n.rerank_score:n.score;(!o||a>(o.score??0))&&r.set(n.title,{title:n.title,score:a,isReranked:i})}return Array.from(r.values()).sort((n,o)=>(o.score??0)-(n.score??0))}async executeToolCalls(e,r){let n=[];for(let o of e){ie(`==== Step 2: Calling tool: ${o.tool.name} ====`),o.tool.name==="localSearch"?r?.(Db.READING_FILES):o.tool.name==="webSearch"?r?.(Db.SEARCHING_WEB):o.tool.name==="getFileTree"&&r?.(Db.READING_FILE_TREE);let i=await kB.callTool(o.tool,o.args);n.push({tool:o.tool.name,output:i})}return n}prepareEnhancedUserMessage(e,r){let n="";if(r.length>0){let o=r.filter(i=>i.output!=null);o.length>0&&(n=`

# Additional context:

`+o.map(i=>`<${i.tool}>
${typeof i.output!="string"?JSON.stringify(i.output):i.output}
</${i.tool}>`).join(`

`))}return`${e}${n}`}getTimeExpression(e){let r=e.find(n=>n.tool.name==="getTimeRangeMs");return r?r.args.timeExpression:""}prepareLocalSearchResult(e,r){let n=e.filter(s=>s.includeInContext),o=n.reduce((s,u)=>s+u.content.length,0),i=n;if(o>$me){let s=$me/o;ie("Truncating documents to fit context length. Truncation ratio:",s),i=n.map(u=>({...u,content:u.content.slice(0,Math.floor(u.content.length*s))}))}let a=i.map(s=>`Note in Vault: ${s.content}`).join(`

`);return r?`Local Search Result for ${r}:
${a}`:`Local Search Result:
${a}`}async getSystemPrompt(){return Ib()}},Poe=class extends a6{async getSystemPrompt(){let e=Ib(),r=yc();if(!r)return e;let n=await Kl.instance.getProjectContext(r.id);return e=`${e}

<project_system_prompt>
${r.systemPrompt}
</project_system_prompt>`,n&&(e=`${e}

 <project_context>
${n}
</project_context>`),e}};Ko();tr();wn();yE();var Aue=require("obsidian");kr();Ko();tr();wn();var Jj="0.39.0";var AAt=!1,Yj,oMe,RWr,jWr,NWr,IAt,DWr,Eoe,iMe,MAt,aMe,Toe,RAt;function jAt(t,e={auto:!1}){if(AAt)throw new Error(`you must \`import '@anthropic-ai/sdk/shims/${t.kind}'\` before importing anything else from @anthropic-ai/sdk`);if(Yj)throw new Error(`can't \`import '@anthropic-ai/sdk/shims/${t.kind}'\` after \`import '@anthropic-ai/sdk/shims/${Yj}'\``);AAt=e.auto,Yj=t.kind,oMe=t.fetch,RWr=t.Request,jWr=t.Response,NWr=t.Headers,IAt=t.FormData,DWr=t.Blob,Eoe=t.File,iMe=t.ReadableStream,MAt=t.getMultipartRequestOptions,aMe=t.getDefaultAgent,Toe=t.fileFromPath,RAt=t.isFsReadStream}var Aoe=class{constructor(e){this.body=e}get[Symbol.toStringTag](){return"MultipartBody"}};function NAt({manuallyImported:t}={}){let e=t?"You may need to use polyfills":"Add one of these imports before your first `import \u2026 from '@anthropic-ai/sdk'`:\n- `import '@anthropic-ai/sdk/shims/node'` (if you're running on Node)\n- `import '@anthropic-ai/sdk/shims/web'` (otherwise)\n",r,n,o,i;try{r=fetch,n=Request,o=Response,i=Headers}catch(a){throw new Error(`this environment is missing the following Web Fetch API type: ${a.message}. ${e}`)}return{kind:"web",fetch:r,Request:n,Response:o,Headers:i,FormData:typeof FormData<"u"?FormData:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'FormData' is undefined. ${e}`)}},Blob:typeof Blob<"u"?Blob:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'Blob' is undefined. ${e}`)}},File:typeof File<"u"?File:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'File' is undefined. ${e}`)}},ReadableStream:typeof ReadableStream<"u"?ReadableStream:class{constructor(){throw new Error(`streaming isn't supported in this environment yet as 'ReadableStream' is undefined. ${e}`)}},getMultipartRequestOptions:async(a,s)=>({...s,body:new Aoe(a)}),getDefaultAgent:a=>{},fileFromPath:()=>{throw new Error("The `fileFromPath` function is only supported in Node. See the README for more details: https://www.github.com/anthropics/anthropic-sdk-typescript#file-uploads")},isFsReadStream:a=>!1}}Yj||jAt(NAt(),{auto:!0});var Cr=class extends Error{},Zl=class t extends Cr{constructor(e,r,n,o){super(`${t.makeMessage(e,r,n)}`),this.status=e,this.headers=o,this.request_id=o?.["request-id"],this.error=r}static makeMessage(e,r,n){let o=r?.message?typeof r.message=="string"?r.message:JSON.stringify(r.message):r?JSON.stringify(r):n;return e&&o?`${e} ${o}`:e?`${e} status code (no body)`:o||"(no status code or body)"}static generate(e,r,n,o){if(!e||!o)return new WA({message:n,cause:Ioe(r)});let i=r;return e===400?new s6(e,i,n,o):e===401?new u6(e,i,n,o):e===403?new l6(e,i,n,o):e===404?new c6(e,i,n,o):e===409?new d6(e,i,n,o):e===422?new f6(e,i,n,o):e===429?new p6(e,i,n,o):e>=500?new m6(e,i,n,o):new t(e,i,n,o)}},Bc=class extends Zl{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}},WA=class extends Zl{constructor({message:e,cause:r}){super(void 0,void 0,e||"Connection error.",void 0),r&&(this.cause=r)}},uq=class extends WA{constructor({message:e}={}){super({message:e??"Request timed out."})}},s6=class extends Zl{},u6=class extends Zl{},l6=class extends Zl{},c6=class extends Zl{},d6=class extends Zl{},f6=class extends Zl{},p6=class extends Zl{},m6=class extends Zl{};var Moe=function(t,e,r,n,o){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!o:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?o.call(t,r):o?o.value=r:e.set(t,r),r},Zj=function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},Um,kO=class{constructor(){Um.set(this,void 0),this.buffer=new Uint8Array,Moe(this,Um,null,"f")}decode(e){if(e==null)return[];let r=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?new TextEncoder().encode(e):e,n=new Uint8Array(this.buffer.length+r.length);n.set(this.buffer),n.set(r,this.buffer.length),this.buffer=n;let o=[],i;for(;(i=kWr(this.buffer,Zj(this,Um,"f")))!=null;){if(i.carriage&&Zj(this,Um,"f")==null){Moe(this,Um,i.index,"f");continue}if(Zj(this,Um,"f")!=null&&(i.index!==Zj(this,Um,"f")+1||i.carriage)){o.push(this.decodeText(this.buffer.slice(0,Zj(this,Um,"f")-1))),this.buffer=this.buffer.slice(Zj(this,Um,"f")),Moe(this,Um,null,"f");continue}let a=Zj(this,Um,"f")!==null?i.preceding-1:i.preceding,s=this.decodeText(this.buffer.slice(0,a));o.push(s),this.buffer=this.buffer.slice(i.index),Moe(this,Um,null,"f")}return o}decodeText(e){if(e==null)return"";if(typeof e=="string")return e;if(typeof Buffer<"u"){if(e instanceof Buffer)return e.toString();if(e instanceof Uint8Array)return Buffer.from(e).toString();throw new Cr(`Unexpected: received non-Uint8Array (${e.constructor.name}) stream chunk in an environment with a global "Buffer" defined, which this library assumes to be Node. Please report this error.`)}if(typeof TextDecoder<"u"){if(e instanceof Uint8Array||e instanceof ArrayBuffer)return this.textDecoder??(this.textDecoder=new TextDecoder("utf8")),this.textDecoder.decode(e);throw new Cr(`Unexpected: received non-Uint8Array/ArrayBuffer (${e.constructor.name}) in a web platform. Please report this error.`)}throw new Cr("Unexpected: neither Buffer nor TextDecoder are available as globals. Please report this error.")}flush(){return this.buffer.length?this.decode(`
`):[]}};Um=new WeakMap;kO.NEWLINE_CHARS=new Set([`
`,"\r"]);kO.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function kWr(t,e){for(let o=e??0;o<t.length;o++){if(t[o]===10)return{preceding:o,index:o+1,carriage:!1};if(t[o]===13)return{preceding:o,index:o+1,carriage:!0}}return null}function DAt(t){for(let n=0;n<t.length-1;n++){if(t[n]===10&&t[n+1]===10||t[n]===13&&t[n+1]===13)return n+2;if(t[n]===13&&t[n+1]===10&&n+3<t.length&&t[n+2]===13&&t[n+3]===10)return n+4}return-1}function h6(t){if(t[Symbol.asyncIterator])return t;let e=t.getReader();return{async next(){try{let r=await e.read();return r?.done&&e.releaseLock(),r}catch(r){throw e.releaseLock(),r}},async return(){let r=e.cancel();return e.releaseLock(),await r,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}var dx=class t{constructor(e,r){this.iterator=e,this.controller=r}static fromSSEResponse(e,r){let n=!1;async function*o(){if(n)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");n=!0;let i=!1;try{for await(let a of $Wr(e,r)){if(a.event==="completion")try{yield JSON.parse(a.data)}catch(s){throw console.error("Could not parse message into JSON:",a.data),console.error("From chunk:",a.raw),s}if(a.event==="message_start"||a.event==="message_delta"||a.event==="message_stop"||a.event==="content_block_start"||a.event==="content_block_delta"||a.event==="content_block_stop")try{yield JSON.parse(a.data)}catch(s){throw console.error("Could not parse message into JSON:",a.data),console.error("From chunk:",a.raw),s}if(a.event!=="ping"&&a.event==="error")throw Zl.generate(void 0,`SSE Error: ${a.data}`,a.data,uMe(e.headers))}i=!0}catch(a){if(a instanceof Error&&a.name==="AbortError")return;throw a}finally{i||r.abort()}}return new t(o,r)}static fromReadableStream(e,r){let n=!1;async function*o(){let a=new kO,s=h6(e);for await(let u of s)for(let l of a.decode(u))yield l;for(let u of a.flush())yield u}async function*i(){if(n)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");n=!0;let a=!1;try{for await(let s of o())a||s&&(yield JSON.parse(s));a=!0}catch(s){if(s instanceof Error&&s.name==="AbortError")return;throw s}finally{a||r.abort()}}return new t(i,r)}[Symbol.asyncIterator](){return this.iterator()}tee(){let e=[],r=[],n=this.iterator(),o=i=>({next:()=>{if(i.length===0){let a=n.next();e.push(a),r.push(a)}return i.shift()}});return[new t(()=>o(e),this.controller),new t(()=>o(r),this.controller)]}toReadableStream(){let e=this,r,n=new TextEncoder;return new iMe({async start(){r=e[Symbol.asyncIterator]()},async pull(o){try{let{value:i,done:a}=await r.next();if(a)return o.close();let s=n.encode(JSON.stringify(i)+`
`);o.enqueue(s)}catch(i){o.error(i)}},async cancel(){await r.return?.()}})}};async function*$Wr(t,e){if(!t.body)throw e.abort(),new Cr("Attempted to iterate over a response with no body");let r=new sMe,n=new kO,o=h6(t.body);for await(let i of BWr(o))for(let a of n.decode(i)){let s=r.decode(a);s&&(yield s)}for(let i of n.flush()){let a=r.decode(i);a&&(yield a)}}async function*BWr(t){let e=new Uint8Array;for await(let r of t){if(r==null)continue;let n=r instanceof ArrayBuffer?new Uint8Array(r):typeof r=="string"?new TextEncoder().encode(r):r,o=new Uint8Array(e.length+n.length);o.set(e),o.set(n,e.length),e=o;let i;for(;(i=DAt(e))!==-1;)yield e.slice(0,i),e=e.slice(i)}e.length>0&&(yield e)}var sMe=class{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;let i={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],i}if(this.chunks.push(e),e.startsWith(":"))return null;let[r,n,o]=qWr(e,":");return o.startsWith(" ")&&(o=o.substring(1)),r==="event"?this.event=o:r==="data"&&this.data.push(o),null}};function qWr(t,e){let r=t.indexOf(e);return r!==-1?[t.substring(0,r),e,t.substring(r+e.length)]:[t,"",""]}var UWr=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function",zWr=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&g6(t),g6=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function";async function LAt(t,e,r){if(t=await t,zWr(t))return t;if(UWr(t)){let o=await t.blob();e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()??"unknown_file");let i=g6(o)?[await o.arrayBuffer()]:[o];return new Eoe(i,e,r)}let n=await HWr(t);if(e||(e=WWr(t)??"unknown_file"),!r?.type){let o=n[0]?.type;typeof o=="string"&&(r={...r,type:o})}return new Eoe(n,e,r)}async function HWr(t){let e=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)e.push(t);else if(g6(t))e.push(await t.arrayBuffer());else if(KWr(t))for await(let r of t)e.push(r);else throw new Error(`Unexpected data type: ${typeof t}; constructor: ${t?.constructor?.name}; props: ${VWr(t)}`);return e}function VWr(t){return`[${Object.getOwnPropertyNames(t).map(r=>`"${r}"`).join(", ")}]`}function WWr(t){return lMe(t.name)||lMe(t.filename)||lMe(t.path)?.split(/[\\/]/).pop()}var lMe=t=>{if(typeof t=="string")return t;if(typeof Buffer<"u"&&t instanceof Buffer)return String(t)},KWr=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function",cMe=t=>t&&typeof t=="object"&&t.body&&t[Symbol.toStringTag]==="MultipartBody";var JWr=function(t,e,r,n,o){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!o:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?o.call(t,r):o?o.value=r:e.set(t,r),r},YWr=function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},Roe;async function qAt(t){let{response:e}=t;if(t.options.stream)return lq("response",e.status,e.url,e.headers,e.body),t.options.__streamClass?t.options.__streamClass.fromSSEResponse(e,t.controller):dx.fromSSEResponse(e,t.controller);if(e.status===204)return null;if(t.options.__binaryResponse)return e;let r=e.headers.get("content-type");if(r?.includes("application/json")||r?.includes("application/vnd.api+json")){let i=await e.json();return lq("response",e.status,e.url,e.headers,i),UAt(i,e)}let o=await e.text();return lq("response",e.status,e.url,e.headers,o),o}function UAt(t,e){return!t||typeof t!="object"||Array.isArray(t)?t:Object.defineProperty(t,"_request_id",{value:e.headers.get("request-id"),enumerable:!1})}var Noe=class t extends Promise{constructor(e,r=qAt){super(n=>{n(null)}),this.responsePromise=e,this.parseResponse=r}_thenUnwrap(e){return new t(this.responsePromise,async r=>UAt(e(await this.parseResponse(r),r),r.response))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){let[e,r]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:r,request_id:r.headers.get("request-id")}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(this.parseResponse)),this.parsedPromise}then(e,r){return this.parse().then(e,r)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}},Doe=class{constructor({baseURL:e,maxRetries:r=2,timeout:n=6e5,httpAgent:o,fetch:i}){this.baseURL=e,this.maxRetries=dMe("maxRetries",r),this.timeout=dMe("timeout",n),this.httpAgent=o,this.fetch=i??oMe}authHeaders(e){return{}}defaultHeaders(e){return{Accept:"application/json","Content-Type":"application/json","User-Agent":this.getUserAgent(),...e9r(),...this.authHeaders(e)}}validateHeaders(e,r){}defaultIdempotencyKey(){return`stainless-node-retry-${i9r()}`}get(e,r){return this.methodRequest("get",e,r)}post(e,r){return this.methodRequest("post",e,r)}patch(e,r){return this.methodRequest("patch",e,r)}put(e,r){return this.methodRequest("put",e,r)}delete(e,r){return this.methodRequest("delete",e,r)}methodRequest(e,r,n){return this.request(Promise.resolve(n).then(async o=>{let i=o&&g6(o?.body)?new DataView(await o.body.arrayBuffer()):o?.body instanceof DataView?o.body:o?.body instanceof ArrayBuffer?new DataView(o.body):o&&ArrayBuffer.isView(o?.body)?new DataView(o.body.buffer):o?.body;return{method:e,path:r,...o,body:i}}))}getAPIList(e,r,n){return this.requestAPIList(r,{method:"get",path:e,...n})}calculateContentLength(e){if(typeof e=="string"){if(typeof Buffer<"u")return Buffer.byteLength(e,"utf8").toString();if(typeof TextEncoder<"u")return new TextEncoder().encode(e).length.toString()}else if(ArrayBuffer.isView(e))return e.byteLength.toString();return null}buildRequest(e,{retryCount:r=0}={}){e={...e};let{method:n,path:o,query:i,headers:a={}}=e,s=ArrayBuffer.isView(e.body)||e.__binaryRequest&&typeof e.body=="string"?e.body:cMe(e.body)?e.body.body:e.body?JSON.stringify(e.body,null,2):null,u=this.calculateContentLength(s),l=this.buildURL(o,i);"timeout"in e&&dMe("timeout",e.timeout),e.timeout=e.timeout??this.timeout;let c=e.httpAgent??this.httpAgent??aMe(l),d=e.timeout+1e3;typeof c?.options?.timeout=="number"&&d>(c.options.timeout??0)&&(c.options.timeout=d),this.idempotencyHeader&&n!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),a[this.idempotencyHeader]=e.idempotencyKey);let f=this.buildHeaders({options:e,headers:a,contentLength:u,retryCount:r});return{req:{method:n,...s&&{body:s},headers:f,...c&&{agent:c},signal:e.signal??null},url:l,timeout:e.timeout}}buildHeaders({options:e,headers:r,contentLength:n,retryCount:o}){let i={};n&&(i["content-length"]=n);let a=this.defaultHeaders(e);return BAt(i,a),BAt(i,r),cMe(e.body)&&Yj!=="node"&&delete i["content-type"],joe(a,"x-stainless-retry-count")===void 0&&joe(r,"x-stainless-retry-count")===void 0&&(i["x-stainless-retry-count"]=String(o)),joe(a,"x-stainless-timeout")===void 0&&joe(r,"x-stainless-timeout")===void 0&&e.timeout&&(i["x-stainless-timeout"]=String(e.timeout)),this.validateHeaders(i,r),i}_calculateNonstreamingTimeout(e){if(3600*e/128e3>600)throw new Cr("Streaming is strongly recommended for operations that may take longer than 10 minutes. See https://github.com/anthropics/anthropic-sdk-python#streaming-responses for more details");return 600*1e3}async prepareOptions(e){}async prepareRequest(e,{url:r,options:n}){}parseHeaders(e){return e?Symbol.iterator in e?Object.fromEntries(Array.from(e).map(r=>[...r])):{...e}:{}}makeStatusError(e,r,n,o){return Zl.generate(e,r,n,o)}request(e,r=null){return new Noe(this.makeRequest(e,r))}async makeRequest(e,r){let n=await e,o=n.maxRetries??this.maxRetries;r==null&&(r=o),await this.prepareOptions(n);let{req:i,url:a,timeout:s}=this.buildRequest(n,{retryCount:o-r});if(await this.prepareRequest(i,{url:a,options:n}),lq("request",a,n,i.headers),n.signal?.aborted)throw new Bc;let u=new AbortController,l=await this.fetchWithTimeout(a,i,s,u).catch(Ioe);if(l instanceof Error){if(n.signal?.aborted)throw new Bc;if(r)return this.retryRequest(n,r);throw l.name==="AbortError"?new uq:new WA({cause:l})}let c=uMe(l.headers);if(!l.ok){if(r&&this.shouldRetry(l)){let b=`retrying, ${r} attempts remaining`;return lq(`response (error; ${b})`,l.status,a,c),this.retryRequest(n,r,c)}let d=await l.text().catch(b=>Ioe(b).message),f=t9r(d),p=f?void 0:d;throw lq(`response (error; ${r?"(error; no more retries left)":"(error; not retryable)"})`,l.status,a,c,p),this.makeStatusError(l.status,f,p,c)}return{response:l,options:n,controller:u}}requestAPIList(e,r){let n=this.makeRequest(r,null);return new fMe(this,n,e)}buildURL(e,r){let n=n9r(e)?new URL(e):new URL(this.baseURL+(this.baseURL.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),o=this.defaultQuery();return y6(o)||(r={...o,...r}),typeof r=="object"&&r&&!Array.isArray(r)&&(n.search=this.stringifyQuery(r)),n.toString()}stringifyQuery(e){return Object.entries(e).filter(([r,n])=>typeof n<"u").map(([r,n])=>{if(typeof n=="string"||typeof n=="number"||typeof n=="boolean")return`${encodeURIComponent(r)}=${encodeURIComponent(n)}`;if(n===null)return`${encodeURIComponent(r)}=`;throw new Cr(`Cannot stringify type ${typeof n}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}async fetchWithTimeout(e,r,n,o){let{signal:i,...a}=r||{};i&&i.addEventListener("abort",()=>o.abort());let s=setTimeout(()=>o.abort(),n),u={signal:o.signal,...a};u.method&&(u.method=u.method.toUpperCase());let l=60*1e3,c=setTimeout(()=>{if(u&&u?.agent?.sockets)for(let d of Object.values(u?.agent?.sockets).flat())d?.setKeepAlive&&d.setKeepAlive(!0,l)},l);return this.fetch.call(void 0,e,u).finally(()=>{clearTimeout(s),clearTimeout(c)})}shouldRetry(e){let r=e.headers.get("x-should-retry");return r==="true"?!0:r==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,r,n){let o,i=n?.["retry-after-ms"];if(i){let s=parseFloat(i);Number.isNaN(s)||(o=s)}let a=n?.["retry-after"];if(a&&!o){let s=parseFloat(a);Number.isNaN(s)?o=Date.parse(a)-Date.now():o=s*1e3}if(!(o&&0<=o&&o<60*1e3)){let s=e.maxRetries??this.maxRetries;o=this.calculateDefaultRetryTimeoutMillis(r,s)}return await o9r(o),this.makeRequest(e,r-1)}calculateDefaultRetryTimeoutMillis(e,r){let i=r-e,a=Math.min(.5*Math.pow(2,i),8),s=1-Math.random()*.25;return a*s*1e3}getUserAgent(){return`${this.constructor.name}/JS ${Jj}`}},Loe=class{constructor(e,r,n,o){Roe.set(this,void 0),JWr(this,Roe,e,"f"),this.options=o,this.response=r,this.body=n}hasNextPage(){return this.getPaginatedItems().length?this.nextPageInfo()!=null:!1}async getNextPage(){let e=this.nextPageInfo();if(!e)throw new Cr("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");let r={...this.options};if("params"in e&&typeof r.query=="object")r.query={...r.query,...e.params};else if("url"in e){let n=[...Object.entries(r.query||{}),...e.url.searchParams.entries()];for(let[o,i]of n)e.url.searchParams.set(o,i);r.query=void 0,r.path=e.url.toString()}return await YWr(this,Roe,"f").requestAPIList(this.constructor,r)}async*iterPages(){let e=this;for(yield e;e.hasNextPage();)e=await e.getNextPage(),yield e}async*[(Roe=new WeakMap,Symbol.asyncIterator)](){for await(let e of this.iterPages())for(let r of e.getPaginatedItems())yield r}},fMe=class extends Noe{constructor(e,r,n){super(r,async o=>new n(e,o.response,await qAt(o),o.options))}async*[Symbol.asyncIterator](){let e=await this;for await(let r of e)yield r}},uMe=t=>new Proxy(Object.fromEntries(t.entries()),{get(e,r){let n=r.toString();return e[n.toLowerCase()]||e[n]}}),ZWr={method:!0,path:!0,query:!0,body:!0,headers:!0,maxRetries:!0,stream:!0,timeout:!0,httpAgent:!0,signal:!0,idempotencyKey:!0,__binaryRequest:!0,__binaryResponse:!0,__streamClass:!0},ag=t=>typeof t=="object"&&t!==null&&!y6(t)&&Object.keys(t).every(e=>zAt(ZWr,e)),XWr=()=>{if(typeof Deno<"u"&&Deno.build!=null)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Jj,"X-Stainless-OS":kAt(Deno.build.os),"X-Stainless-Arch":FAt(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:Deno.version?.deno??"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Jj,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":process.version};if(Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Jj,"X-Stainless-OS":kAt(process.platform),"X-Stainless-Arch":FAt(process.arch),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":process.version};let t=QWr();return t?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Jj,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${t.browser}`,"X-Stainless-Runtime-Version":t.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Jj,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function QWr(){if(typeof navigator>"u"||!navigator)return null;let t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(let{key:e,pattern:r}of t){let n=r.exec(navigator.userAgent);if(n){let o=n[1]||0,i=n[2]||0,a=n[3]||0;return{browser:e,version:`${o}.${i}.${a}`}}}return null}var FAt=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",kAt=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown"),$At,e9r=()=>$At??($At=XWr()),t9r=t=>{try{return JSON.parse(t)}catch{return}},r9r=/^[a-z][a-z0-9+.-]*:/i,n9r=t=>r9r.test(t),o9r=t=>new Promise(e=>setTimeout(e,t)),dMe=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new Cr(`${t} must be an integer`);if(e<0)throw new Cr(`${t} must be a positive integer`);return e},Ioe=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null)try{return new Error(JSON.stringify(t))}catch{}return new Error(String(t))};var Foe=t=>{if(typeof process<"u")return process.env?.[t]?.trim()??void 0;if(typeof Deno<"u")return Deno.env?.get?.(t)?.trim()};function y6(t){if(!t)return!0;for(let e in t)return!1;return!0}function zAt(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function BAt(t,e){for(let r in e){if(!zAt(e,r))continue;let n=r.toLowerCase();if(!n)continue;let o=e[r];o===null?delete t[n]:o!==void 0&&(t[n]=o)}}function lq(t,...e){typeof process<"u"&&process?.env?.DEBUG==="true"&&console.log(`Anthropic:DEBUG:${t}`,...e)}var i9r=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{let e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)}),HAt=()=>typeof window<"u"&&typeof window.document<"u"&&typeof navigator<"u",a9r=t=>typeof t?.get=="function";var joe=(t,e)=>{let r=e.toLowerCase();if(a9r(t)){let n=e[0]?.toUpperCase()+e.substring(1).replace(/([^\w])(\w)/g,(o,i,a)=>i+a.toUpperCase());for(let o of[e,r,e.toUpperCase(),n]){let i=t.get(o);if(i)return i}}for(let[n,o]of Object.entries(t))if(n.toLowerCase()===r)return Array.isArray(o)?(o.length<=1||console.warn(`Received ${o.length} entries for the ${e} header, using the first entry.`),o[0]):o};var fx=class extends Loe{constructor(e,r,n,o){super(e,r,n,o),this.data=n.data||[],this.has_more=n.has_more||!1,this.first_id=n.first_id||null,this.last_id=n.last_id||null}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageParams(){let e=this.nextPageInfo();if(!e)return null;if("params"in e)return e.params;let r=Object.fromEntries(e.url.searchParams);return Object.keys(r).length?r:null}nextPageInfo(){if(this.options.query?.before_id){let r=this.first_id;return r?{params:{before_id:r}}:null}let e=this.last_id;return e?{params:{after_id:e}}:null}};var Xl=class{constructor(e){this._client=e}};var Xj=class extends Xl{retrieve(e,r){return this._client.get(`/v1/models/${e}?beta=true`,r)}list(e={},r){return ag(e)?this.list({},e):this._client.getAPIList("/v1/models?beta=true",cq,{query:e,...r})}},cq=class extends fx{};Xj.BetaModelInfosPage=cq;var dq=class t{constructor(e,r){this.iterator=e,this.controller=r}async*decoder(){let e=new kO;for await(let r of this.iterator)for(let n of e.decode(r))yield JSON.parse(n);for(let r of e.flush())yield JSON.parse(r)}[Symbol.asyncIterator](){return this.decoder()}static fromResponse(e,r){if(!e.body)throw r.abort(),new Cr("Attempted to iterate over a response with no body");return new t(h6(e.body),r)}};var Qj=class extends Xl{create(e,r){let{betas:n,...o}=e;return this._client.post("/v1/messages/batches?beta=true",{body:o,...r,headers:{"anthropic-beta":[...n??[],"message-batches-2024-09-24"].toString(),...r?.headers}})}retrieve(e,r={},n){if(ag(r))return this.retrieve(e,{},r);let{betas:o}=r;return this._client.get(`/v1/messages/batches/${e}?beta=true`,{...n,headers:{"anthropic-beta":[...o??[],"message-batches-2024-09-24"].toString(),...n?.headers}})}list(e={},r){if(ag(e))return this.list({},e);let{betas:n,...o}=e;return this._client.getAPIList("/v1/messages/batches?beta=true",fq,{query:o,...r,headers:{"anthropic-beta":[...n??[],"message-batches-2024-09-24"].toString(),...r?.headers}})}delete(e,r={},n){if(ag(r))return this.delete(e,{},r);let{betas:o}=r;return this._client.delete(`/v1/messages/batches/${e}?beta=true`,{...n,headers:{"anthropic-beta":[...o??[],"message-batches-2024-09-24"].toString(),...n?.headers}})}cancel(e,r={},n){if(ag(r))return this.cancel(e,{},r);let{betas:o}=r;return this._client.post(`/v1/messages/batches/${e}/cancel?beta=true`,{...n,headers:{"anthropic-beta":[...o??[],"message-batches-2024-09-24"].toString(),...n?.headers}})}async results(e,r={},n){if(ag(r))return this.results(e,{},r);let o=await this.retrieve(e);if(!o.results_url)throw new Cr(`No batch \`results_url\`; Has it finished processing? ${o.processing_status} - ${o.id}`);let{betas:i}=r;return this._client.get(o.results_url,{...n,headers:{"anthropic-beta":[...i??[],"message-batches-2024-09-24"].toString(),Accept:"application/binary",...n?.headers},__binaryResponse:!0})._thenUnwrap((a,s)=>dq.fromResponse(s.response,s.controller))}},fq=class extends fx{};Qj.BetaMessageBatchesPage=fq;var c9r=t=>{let e=0,r=[];for(;e<t.length;){let n=t[e];if(n==="\\"){e++;continue}if(n==="{"){r.push({type:"brace",value:"{"}),e++;continue}if(n==="}"){r.push({type:"brace",value:"}"}),e++;continue}if(n==="["){r.push({type:"paren",value:"["}),e++;continue}if(n==="]"){r.push({type:"paren",value:"]"}),e++;continue}if(n===":"){r.push({type:"separator",value:":"}),e++;continue}if(n===","){r.push({type:"delimiter",value:","}),e++;continue}if(n==='"'){let s="",u=!1;for(n=t[++e];n!=='"';){if(e===t.length){u=!0;break}if(n==="\\"){if(e++,e===t.length){u=!0;break}s+=n+t[e],n=t[++e]}else s+=n,n=t[++e]}n=t[++e],u||r.push({type:"string",value:s});continue}if(n&&/\s/.test(n)){e++;continue}let i=/[0-9]/;if(n&&i.test(n)||n==="-"||n==="."){let s="";for(n==="-"&&(s+=n,n=t[++e]);n&&i.test(n)||n===".";)s+=n,n=t[++e];r.push({type:"number",value:s});continue}let a=/[a-z]/i;if(n&&a.test(n)){let s="";for(;n&&a.test(n)&&e!==t.length;)s+=n,n=t[++e];if(s=="true"||s=="false"||s==="null")r.push({type:"name",value:s});else{e++;continue}continue}e++}return r},pq=t=>{if(t.length===0)return t;let e=t[t.length-1];switch(e.type){case"separator":return t=t.slice(0,t.length-1),pq(t);break;case"number":let r=e.value[e.value.length-1];if(r==="."||r==="-")return t=t.slice(0,t.length-1),pq(t);case"string":let n=t[t.length-2];if(n?.type==="delimiter")return t=t.slice(0,t.length-1),pq(t);if(n?.type==="brace"&&n.value==="{")return t=t.slice(0,t.length-1),pq(t);break;case"delimiter":return t=t.slice(0,t.length-1),pq(t);break}return t},d9r=t=>{let e=[];return t.map(r=>{r.type==="brace"&&(r.value==="{"?e.push("}"):e.splice(e.lastIndexOf("}"),1)),r.type==="paren"&&(r.value==="["?e.push("]"):e.splice(e.lastIndexOf("]"),1))}),e.length>0&&e.reverse().map(r=>{r==="}"?t.push({type:"brace",value:"}"}):r==="]"&&t.push({type:"paren",value:"]"})}),t},f9r=t=>{let e="";return t.map(r=>{switch(r.type){case"string":e+='"'+r.value+'"';break;default:e+=r.value;break}}),e},koe=t=>JSON.parse(f9r(d9r(pq(c9r(t)))));var Hd=function(t,e,r,n,o){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!o:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?o.call(t,r):o?o.value=r:e.set(t,r),r},hn=function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},sg,KA,b6,$oe,_6,v6,Boe,w6,$O,S6,qoe,Uoe,mq,zoe,Hoe,pMe,VAt,mMe,hMe,gMe,yMe,WAt,KAt="__json_buf",Voe=class t{constructor(){sg.add(this),this.messages=[],this.receivedMessages=[],KA.set(this,void 0),this.controller=new AbortController,b6.set(this,void 0),$oe.set(this,()=>{}),_6.set(this,()=>{}),v6.set(this,void 0),Boe.set(this,()=>{}),w6.set(this,()=>{}),$O.set(this,{}),S6.set(this,!1),qoe.set(this,!1),Uoe.set(this,!1),mq.set(this,!1),zoe.set(this,void 0),Hoe.set(this,void 0),mMe.set(this,e=>{if(Hd(this,qoe,!0,"f"),e instanceof Error&&e.name==="AbortError"&&(e=new Bc),e instanceof Bc)return Hd(this,Uoe,!0,"f"),this._emit("abort",e);if(e instanceof Cr)return this._emit("error",e);if(e instanceof Error){let r=new Cr(e.message);return r.cause=e,this._emit("error",r)}return this._emit("error",new Cr(String(e)))}),Hd(this,b6,new Promise((e,r)=>{Hd(this,$oe,e,"f"),Hd(this,_6,r,"f")}),"f"),Hd(this,v6,new Promise((e,r)=>{Hd(this,Boe,e,"f"),Hd(this,w6,r,"f")}),"f"),hn(this,b6,"f").catch(()=>{}),hn(this,v6,"f").catch(()=>{})}get response(){return hn(this,zoe,"f")}get request_id(){return hn(this,Hoe,"f")}async withResponse(){let e=await hn(this,b6,"f");if(!e)throw new Error("Could not resolve a `Response` object");return{data:this,response:e,request_id:e.headers.get("request-id")}}static fromReadableStream(e){let r=new t;return r._run(()=>r._fromReadableStream(e)),r}static createMessage(e,r,n){let o=new t;for(let i of r.messages)o._addMessageParam(i);return o._run(()=>o._createMessage(e,{...r,stream:!0},{...n,headers:{...n?.headers,"X-Stainless-Helper-Method":"stream"}})),o}_run(e){e().then(()=>{this._emitFinal(),this._emit("end")},hn(this,mMe,"f"))}_addMessageParam(e){this.messages.push(e)}_addMessage(e,r=!0){this.receivedMessages.push(e),r&&this._emit("message",e)}async _createMessage(e,r,n){let o=n?.signal;o&&(o.aborted&&this.controller.abort(),o.addEventListener("abort",()=>this.controller.abort())),hn(this,sg,"m",hMe).call(this);let{response:i,data:a}=await e.create({...r,stream:!0},{...n,signal:this.controller.signal}).withResponse();this._connected(i);for await(let s of a)hn(this,sg,"m",gMe).call(this,s);if(a.controller.signal?.aborted)throw new Bc;hn(this,sg,"m",yMe).call(this)}_connected(e){this.ended||(Hd(this,zoe,e,"f"),Hd(this,Hoe,e?.headers.get("request-id"),"f"),hn(this,$oe,"f").call(this,e),this._emit("connect"))}get ended(){return hn(this,S6,"f")}get errored(){return hn(this,qoe,"f")}get aborted(){return hn(this,Uoe,"f")}abort(){this.controller.abort()}on(e,r){return(hn(this,$O,"f")[e]||(hn(this,$O,"f")[e]=[])).push({listener:r}),this}off(e,r){let n=hn(this,$O,"f")[e];if(!n)return this;let o=n.findIndex(i=>i.listener===r);return o>=0&&n.splice(o,1),this}once(e,r){return(hn(this,$O,"f")[e]||(hn(this,$O,"f")[e]=[])).push({listener:r,once:!0}),this}emitted(e){return new Promise((r,n)=>{Hd(this,mq,!0,"f"),e!=="error"&&this.once("error",n),this.once(e,r)})}async done(){Hd(this,mq,!0,"f"),await hn(this,v6,"f")}get currentMessage(){return hn(this,KA,"f")}async finalMessage(){return await this.done(),hn(this,sg,"m",pMe).call(this)}async finalText(){return await this.done(),hn(this,sg,"m",VAt).call(this)}_emit(e,...r){if(hn(this,S6,"f"))return;e==="end"&&(Hd(this,S6,!0,"f"),hn(this,Boe,"f").call(this));let n=hn(this,$O,"f")[e];if(n&&(hn(this,$O,"f")[e]=n.filter(o=>!o.once),n.forEach(({listener:o})=>o(...r))),e==="abort"){let o=r[0];!hn(this,mq,"f")&&!n?.length&&Promise.reject(o),hn(this,_6,"f").call(this,o),hn(this,w6,"f").call(this,o),this._emit("end");return}if(e==="error"){let o=r[0];!hn(this,mq,"f")&&!n?.length&&Promise.reject(o),hn(this,_6,"f").call(this,o),hn(this,w6,"f").call(this,o),this._emit("end")}}_emitFinal(){this.receivedMessages.at(-1)&&this._emit("finalMessage",hn(this,sg,"m",pMe).call(this))}async _fromReadableStream(e,r){let n=r?.signal;n&&(n.aborted&&this.controller.abort(),n.addEventListener("abort",()=>this.controller.abort())),hn(this,sg,"m",hMe).call(this),this._connected(null);let o=dx.fromReadableStream(e,this.controller);for await(let i of o)hn(this,sg,"m",gMe).call(this,i);if(o.controller.signal?.aborted)throw new Bc;hn(this,sg,"m",yMe).call(this)}[(KA=new WeakMap,b6=new WeakMap,$oe=new WeakMap,_6=new WeakMap,v6=new WeakMap,Boe=new WeakMap,w6=new WeakMap,$O=new WeakMap,S6=new WeakMap,qoe=new WeakMap,Uoe=new WeakMap,mq=new WeakMap,zoe=new WeakMap,Hoe=new WeakMap,mMe=new WeakMap,sg=new WeakSet,pMe=function(){if(this.receivedMessages.length===0)throw new Cr("stream ended without producing a Message with role=assistant");return this.receivedMessages.at(-1)},VAt=function(){if(this.receivedMessages.length===0)throw new Cr("stream ended without producing a Message with role=assistant");let r=this.receivedMessages.at(-1).content.filter(n=>n.type==="text").map(n=>n.text);if(r.length===0)throw new Cr("stream ended without producing a content block with type=text");return r.join(" ")},hMe=function(){this.ended||Hd(this,KA,void 0,"f")},gMe=function(r){if(this.ended)return;let n=hn(this,sg,"m",WAt).call(this,r);switch(this._emit("streamEvent",r,n),r.type){case"content_block_delta":{let o=n.content.at(-1);switch(r.delta.type){case"text_delta":{o.type==="text"&&this._emit("text",r.delta.text,o.text||"");break}case"citations_delta":{o.type==="text"&&this._emit("citation",r.delta.citation,o.citations??[]);break}case"input_json_delta":{o.type==="tool_use"&&o.input&&this._emit("inputJson",r.delta.partial_json,o.input);break}case"thinking_delta":{o.type==="thinking"&&this._emit("thinking",r.delta.thinking,o.thinking);break}case"signature_delta":{o.type==="thinking"&&this._emit("signature",o.signature);break}default:r.delta}break}case"message_stop":{this._addMessageParam(n),this._addMessage(n,!0);break}case"content_block_stop":{this._emit("contentBlock",n.content.at(-1));break}case"message_start":{Hd(this,KA,n,"f");break}case"content_block_start":case"message_delta":break}},yMe=function(){if(this.ended)throw new Cr("stream has ended, this shouldn't happen");let r=hn(this,KA,"f");if(!r)throw new Cr("request ended without sending any chunks");return Hd(this,KA,void 0,"f"),r},WAt=function(r){let n=hn(this,KA,"f");if(r.type==="message_start"){if(n)throw new Cr(`Unexpected event order, got ${r.type} before receiving "message_stop"`);return r.message}if(!n)throw new Cr(`Unexpected event order, got ${r.type} before "message_start"`);switch(r.type){case"message_stop":return n;case"message_delta":return n.stop_reason=r.delta.stop_reason,n.stop_sequence=r.delta.stop_sequence,n.usage.output_tokens=r.usage.output_tokens,n;case"content_block_start":return n.content.push(r.content_block),n;case"content_block_delta":{let o=n.content.at(r.index);switch(r.delta.type){case"text_delta":{o?.type==="text"&&(o.text+=r.delta.text);break}case"citations_delta":{o?.type==="text"&&(o.citations??(o.citations=[]),o.citations.push(r.delta.citation));break}case"input_json_delta":{if(o?.type==="tool_use"){let i=o[KAt]||"";i+=r.delta.partial_json,Object.defineProperty(o,KAt,{value:i,enumerable:!1,writable:!0}),i&&(o.input=koe(i))}break}case"thinking_delta":{o?.type==="thinking"&&(o.thinking+=r.delta.thinking);break}case"signature_delta":{o?.type==="thinking"&&(o.signature=r.delta.signature);break}default:r.delta}return n}case"content_block_stop":return n}},Symbol.asyncIterator)](){let e=[],r=[],n=!1;return this.on("streamEvent",o=>{let i=r.shift();i?i.resolve(o):e.push(o)}),this.on("end",()=>{n=!0;for(let o of r)o.resolve(void 0);r.length=0}),this.on("abort",o=>{n=!0;for(let i of r)i.reject(o);r.length=0}),this.on("error",o=>{n=!0;for(let i of r)i.reject(o);r.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:n?{value:void 0,done:!0}:new Promise((i,a)=>r.push({resolve:i,reject:a})).then(i=>i?{value:i,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new dx(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}};var GAt={"claude-1.3":"November 6th, 2024","claude-1.3-100k":"November 6th, 2024","claude-instant-1.1":"November 6th, 2024","claude-instant-1.1-100k":"November 6th, 2024","claude-instant-1.2":"November 6th, 2024","claude-3-sonnet-20240229":"July 21st, 2025","claude-2.1":"July 21st, 2025","claude-2.0":"July 21st, 2025"},GA=class extends Xl{constructor(){super(...arguments),this.batches=new Qj(this._client)}create(e,r){let{betas:n,...o}=e;return o.model in GAt&&console.warn(`The model '${o.model}' is deprecated and will reach end-of-life on ${GAt[o.model]}
Please migrate to a newer model. Visit https://docs.anthropic.com/en/docs/resources/model-deprecations for more information.`),this._client.post("/v1/messages?beta=true",{body:o,timeout:this._client._options.timeout??(o.stream?6e5:this._client._calculateNonstreamingTimeout(o.max_tokens)),...r,headers:{...n?.toString()!=null?{"anthropic-beta":n?.toString()}:void 0,...r?.headers},stream:e.stream??!1})}stream(e,r){return Voe.createMessage(this,e,r)}countTokens(e,r){let{betas:n,...o}=e;return this._client.post("/v1/messages/count_tokens?beta=true",{body:o,...r,headers:{"anthropic-beta":[...n??[],"token-counting-2024-11-01"].toString(),...r?.headers}})}};GA.Batches=Qj;GA.BetaMessageBatchesPage=fq;var px=class extends Xl{constructor(){super(...arguments),this.models=new Xj(this._client),this.messages=new GA(this._client)}};px.Models=Xj;px.BetaModelInfosPage=cq;px.Messages=GA;var eN=class extends Xl{create(e,r){return this._client.post("/v1/complete",{body:e,timeout:this._client._options.timeout??6e5,...r,stream:e.stream??!1})}};var tN=class extends Xl{create(e,r){return this._client.post("/v1/messages/batches",{body:e,...r})}retrieve(e,r){return this._client.get(`/v1/messages/batches/${e}`,r)}list(e={},r){return ag(e)?this.list({},e):this._client.getAPIList("/v1/messages/batches",hq,{query:e,...r})}delete(e,r){return this._client.delete(`/v1/messages/batches/${e}`,r)}cancel(e,r){return this._client.post(`/v1/messages/batches/${e}/cancel`,r)}async results(e,r){let n=await this.retrieve(e);if(!n.results_url)throw new Cr(`No batch \`results_url\`; Has it finished processing? ${n.processing_status} - ${n.id}`);return this._client.get(n.results_url,{...r,headers:{Accept:"application/binary",...r?.headers},__binaryResponse:!0})._thenUnwrap((o,i)=>dq.fromResponse(i.response,i.controller))}},hq=class extends fx{};tN.MessageBatchesPage=hq;var Vd=function(t,e,r,n,o){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!o:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?o.call(t,r):o?o.value=r:e.set(t,r),r},gn=function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},ug,JA,x6,Woe,C6,O6,Koe,P6,BO,E6,Goe,Joe,gq,Yoe,Zoe,bMe,JAt,_Me,vMe,wMe,SMe,YAt,ZAt="__json_buf",Xoe=class t{constructor(){ug.add(this),this.messages=[],this.receivedMessages=[],JA.set(this,void 0),this.controller=new AbortController,x6.set(this,void 0),Woe.set(this,()=>{}),C6.set(this,()=>{}),O6.set(this,void 0),Koe.set(this,()=>{}),P6.set(this,()=>{}),BO.set(this,{}),E6.set(this,!1),Goe.set(this,!1),Joe.set(this,!1),gq.set(this,!1),Yoe.set(this,void 0),Zoe.set(this,void 0),_Me.set(this,e=>{if(Vd(this,Goe,!0,"f"),e instanceof Error&&e.name==="AbortError"&&(e=new Bc),e instanceof Bc)return Vd(this,Joe,!0,"f"),this._emit("abort",e);if(e instanceof Cr)return this._emit("error",e);if(e instanceof Error){let r=new Cr(e.message);return r.cause=e,this._emit("error",r)}return this._emit("error",new Cr(String(e)))}),Vd(this,x6,new Promise((e,r)=>{Vd(this,Woe,e,"f"),Vd(this,C6,r,"f")}),"f"),Vd(this,O6,new Promise((e,r)=>{Vd(this,Koe,e,"f"),Vd(this,P6,r,"f")}),"f"),gn(this,x6,"f").catch(()=>{}),gn(this,O6,"f").catch(()=>{})}get response(){return gn(this,Yoe,"f")}get request_id(){return gn(this,Zoe,"f")}async withResponse(){let e=await gn(this,x6,"f");if(!e)throw new Error("Could not resolve a `Response` object");return{data:this,response:e,request_id:e.headers.get("request-id")}}static fromReadableStream(e){let r=new t;return r._run(()=>r._fromReadableStream(e)),r}static createMessage(e,r,n){let o=new t;for(let i of r.messages)o._addMessageParam(i);return o._run(()=>o._createMessage(e,{...r,stream:!0},{...n,headers:{...n?.headers,"X-Stainless-Helper-Method":"stream"}})),o}_run(e){e().then(()=>{this._emitFinal(),this._emit("end")},gn(this,_Me,"f"))}_addMessageParam(e){this.messages.push(e)}_addMessage(e,r=!0){this.receivedMessages.push(e),r&&this._emit("message",e)}async _createMessage(e,r,n){let o=n?.signal;o&&(o.aborted&&this.controller.abort(),o.addEventListener("abort",()=>this.controller.abort())),gn(this,ug,"m",vMe).call(this);let{response:i,data:a}=await e.create({...r,stream:!0},{...n,signal:this.controller.signal}).withResponse();this._connected(i);for await(let s of a)gn(this,ug,"m",wMe).call(this,s);if(a.controller.signal?.aborted)throw new Bc;gn(this,ug,"m",SMe).call(this)}_connected(e){this.ended||(Vd(this,Yoe,e,"f"),Vd(this,Zoe,e?.headers.get("request-id"),"f"),gn(this,Woe,"f").call(this,e),this._emit("connect"))}get ended(){return gn(this,E6,"f")}get errored(){return gn(this,Goe,"f")}get aborted(){return gn(this,Joe,"f")}abort(){this.controller.abort()}on(e,r){return(gn(this,BO,"f")[e]||(gn(this,BO,"f")[e]=[])).push({listener:r}),this}off(e,r){let n=gn(this,BO,"f")[e];if(!n)return this;let o=n.findIndex(i=>i.listener===r);return o>=0&&n.splice(o,1),this}once(e,r){return(gn(this,BO,"f")[e]||(gn(this,BO,"f")[e]=[])).push({listener:r,once:!0}),this}emitted(e){return new Promise((r,n)=>{Vd(this,gq,!0,"f"),e!=="error"&&this.once("error",n),this.once(e,r)})}async done(){Vd(this,gq,!0,"f"),await gn(this,O6,"f")}get currentMessage(){return gn(this,JA,"f")}async finalMessage(){return await this.done(),gn(this,ug,"m",bMe).call(this)}async finalText(){return await this.done(),gn(this,ug,"m",JAt).call(this)}_emit(e,...r){if(gn(this,E6,"f"))return;e==="end"&&(Vd(this,E6,!0,"f"),gn(this,Koe,"f").call(this));let n=gn(this,BO,"f")[e];if(n&&(gn(this,BO,"f")[e]=n.filter(o=>!o.once),n.forEach(({listener:o})=>o(...r))),e==="abort"){let o=r[0];!gn(this,gq,"f")&&!n?.length&&Promise.reject(o),gn(this,C6,"f").call(this,o),gn(this,P6,"f").call(this,o),this._emit("end");return}if(e==="error"){let o=r[0];!gn(this,gq,"f")&&!n?.length&&Promise.reject(o),gn(this,C6,"f").call(this,o),gn(this,P6,"f").call(this,o),this._emit("end")}}_emitFinal(){this.receivedMessages.at(-1)&&this._emit("finalMessage",gn(this,ug,"m",bMe).call(this))}async _fromReadableStream(e,r){let n=r?.signal;n&&(n.aborted&&this.controller.abort(),n.addEventListener("abort",()=>this.controller.abort())),gn(this,ug,"m",vMe).call(this),this._connected(null);let o=dx.fromReadableStream(e,this.controller);for await(let i of o)gn(this,ug,"m",wMe).call(this,i);if(o.controller.signal?.aborted)throw new Bc;gn(this,ug,"m",SMe).call(this)}[(JA=new WeakMap,x6=new WeakMap,Woe=new WeakMap,C6=new WeakMap,O6=new WeakMap,Koe=new WeakMap,P6=new WeakMap,BO=new WeakMap,E6=new WeakMap,Goe=new WeakMap,Joe=new WeakMap,gq=new WeakMap,Yoe=new WeakMap,Zoe=new WeakMap,_Me=new WeakMap,ug=new WeakSet,bMe=function(){if(this.receivedMessages.length===0)throw new Cr("stream ended without producing a Message with role=assistant");return this.receivedMessages.at(-1)},JAt=function(){if(this.receivedMessages.length===0)throw new Cr("stream ended without producing a Message with role=assistant");let r=this.receivedMessages.at(-1).content.filter(n=>n.type==="text").map(n=>n.text);if(r.length===0)throw new Cr("stream ended without producing a content block with type=text");return r.join(" ")},vMe=function(){this.ended||Vd(this,JA,void 0,"f")},wMe=function(r){if(this.ended)return;let n=gn(this,ug,"m",YAt).call(this,r);switch(this._emit("streamEvent",r,n),r.type){case"content_block_delta":{let o=n.content.at(-1);switch(r.delta.type){case"text_delta":{o.type==="text"&&this._emit("text",r.delta.text,o.text||"");break}case"citations_delta":{o.type==="text"&&this._emit("citation",r.delta.citation,o.citations??[]);break}case"input_json_delta":{o.type==="tool_use"&&o.input&&this._emit("inputJson",r.delta.partial_json,o.input);break}case"thinking_delta":{o.type==="thinking"&&this._emit("thinking",r.delta.thinking,o.thinking);break}case"signature_delta":{o.type==="thinking"&&this._emit("signature",o.signature);break}default:r.delta}break}case"message_stop":{this._addMessageParam(n),this._addMessage(n,!0);break}case"content_block_stop":{this._emit("contentBlock",n.content.at(-1));break}case"message_start":{Vd(this,JA,n,"f");break}case"content_block_start":case"message_delta":break}},SMe=function(){if(this.ended)throw new Cr("stream has ended, this shouldn't happen");let r=gn(this,JA,"f");if(!r)throw new Cr("request ended without sending any chunks");return Vd(this,JA,void 0,"f"),r},YAt=function(r){let n=gn(this,JA,"f");if(r.type==="message_start"){if(n)throw new Cr(`Unexpected event order, got ${r.type} before receiving "message_stop"`);return r.message}if(!n)throw new Cr(`Unexpected event order, got ${r.type} before "message_start"`);switch(r.type){case"message_stop":return n;case"message_delta":return n.stop_reason=r.delta.stop_reason,n.stop_sequence=r.delta.stop_sequence,n.usage.output_tokens=r.usage.output_tokens,n;case"content_block_start":return n.content.push(r.content_block),n;case"content_block_delta":{let o=n.content.at(r.index);switch(r.delta.type){case"text_delta":{o?.type==="text"&&(o.text+=r.delta.text);break}case"citations_delta":{o?.type==="text"&&(o.citations??(o.citations=[]),o.citations.push(r.delta.citation));break}case"input_json_delta":{if(o?.type==="tool_use"){let i=o[ZAt]||"";i+=r.delta.partial_json,Object.defineProperty(o,ZAt,{value:i,enumerable:!1,writable:!0}),i&&(o.input=koe(i))}break}case"thinking_delta":{o?.type==="thinking"&&(o.thinking+=r.delta.thinking);break}case"signature_delta":{o?.type==="thinking"&&(o.signature=r.delta.signature);break}default:r.delta}return n}case"content_block_stop":return n}},Symbol.asyncIterator)](){let e=[],r=[],n=!1;return this.on("streamEvent",o=>{let i=r.shift();i?i.resolve(o):e.push(o)}),this.on("end",()=>{n=!0;for(let o of r)o.resolve(void 0);r.length=0}),this.on("abort",o=>{n=!0;for(let i of r)i.reject(o);r.length=0}),this.on("error",o=>{n=!0;for(let i of r)i.reject(o);r.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:n?{value:void 0,done:!0}:new Promise((i,a)=>r.push({resolve:i,reject:a})).then(i=>i?{value:i,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new dx(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}};var qO=class extends Xl{constructor(){super(...arguments),this.batches=new tN(this._client)}create(e,r){return e.model in XAt&&console.warn(`The model '${e.model}' is deprecated and will reach end-of-life on ${XAt[e.model]}
Please migrate to a newer model. Visit https://docs.anthropic.com/en/docs/resources/model-deprecations for more information.`),this._client.post("/v1/messages",{body:e,timeout:this._client._options.timeout??(e.stream?6e5:this._client._calculateNonstreamingTimeout(e.max_tokens)),...r,stream:e.stream??!1})}stream(e,r){return Xoe.createMessage(this,e,r)}countTokens(e,r){return this._client.post("/v1/messages/count_tokens",{body:e,...r})}},XAt={"claude-1.3":"November 6th, 2024","claude-1.3-100k":"November 6th, 2024","claude-instant-1.1":"November 6th, 2024","claude-instant-1.1-100k":"November 6th, 2024","claude-instant-1.2":"November 6th, 2024","claude-3-sonnet-20240229":"July 21st, 2025","claude-2.1":"July 21st, 2025","claude-2.0":"July 21st, 2025"};qO.Batches=tN;qO.MessageBatchesPage=hq;var YA=class extends Xl{retrieve(e,r){return this._client.get(`/v1/models/${e}`,r)}list(e={},r){return ag(e)?this.list({},e):this._client.getAPIList("/v1/models",rN,{query:e,...r})}},rN=class extends fx{};YA.ModelInfosPage=rN;var QAt,si=class extends Doe{constructor({baseURL:e=Foe("ANTHROPIC_BASE_URL"),apiKey:r=Foe("ANTHROPIC_API_KEY")??null,authToken:n=Foe("ANTHROPIC_AUTH_TOKEN")??null,...o}={}){let i={apiKey:r,authToken:n,...o,baseURL:e||"https://api.anthropic.com"};if(!i.dangerouslyAllowBrowser&&HAt())throw new Cr(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new Anthropic({ apiKey, dangerouslyAllowBrowser: true });
`);super({baseURL:i.baseURL,timeout:i.timeout??6e5,httpAgent:i.httpAgent,maxRetries:i.maxRetries,fetch:i.fetch}),this.completions=new eN(this),this.messages=new qO(this),this.models=new YA(this),this.beta=new px(this),this._options=i,this.apiKey=r,this.authToken=n}defaultQuery(){return this._options.defaultQuery}defaultHeaders(e){return{...super.defaultHeaders(e),...this._options.dangerouslyAllowBrowser?{"anthropic-dangerous-direct-browser-access":"true"}:void 0,"anthropic-version":"2023-06-01",...this._options.defaultHeaders}}validateHeaders(e,r){if(!(this.apiKey&&e["x-api-key"])&&r["x-api-key"]!==null&&!(this.authToken&&e.authorization)&&r.authorization!==null)throw new Error('Could not resolve authentication method. Expected either apiKey or authToken to be set. Or for one of the "X-Api-Key" or "Authorization" headers to be explicitly omitted')}authHeaders(e){let r=this.apiKeyAuth(e),n=this.bearerAuth(e);return r!=null&&!y6(r)?r:n!=null&&!y6(n)?n:{}}apiKeyAuth(e){return this.apiKey==null?{}:{"X-Api-Key":this.apiKey}}bearerAuth(e){return this.authToken==null?{}:{Authorization:`Bearer ${this.authToken}`}}};QAt=si;si.Anthropic=QAt;si.HUMAN_PROMPT=`

Human:`;si.AI_PROMPT=`

Assistant:`;si.DEFAULT_TIMEOUT=6e5;si.AnthropicError=Cr;si.APIError=Zl;si.APIConnectionError=WA;si.APIConnectionTimeoutError=uq;si.APIUserAbortError=Bc;si.NotFoundError=c6;si.ConflictError=d6;si.RateLimitError=p6;si.BadRequestError=s6;si.AuthenticationError=u6;si.InternalServerError=m6;si.PermissionDeniedError=l6;si.UnprocessableEntityError=f6;si.toFile=LAt;si.fileFromPath=Toe;si.Completions=eN;si.Messages=qO;si.Models=YA;si.ModelInfosPage=rN;si.Beta=px;var{HUMAN_PROMPT:s4o,AI_PROMPT:u4o}=si;$d();Rm();mc();um();Yg();var T6=class extends ZM{static lc_name(){return"AnthropicToolsOutputParser"}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","anthropic","output_parsers"]}),Object.defineProperty(this,"returnId",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"keyName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"returnSingle",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"zodSchema",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.keyName=e.keyName,this.returnSingle=e.returnSingle??this.returnSingle,this.zodSchema=e.zodSchema}async _validateResult(e){let r=e;if(typeof e=="string")try{r=JSON.parse(e)}catch(o){throw new am(`Failed to parse. Text: "${JSON.stringify(e,null,2)}". Error: ${JSON.stringify(o.message)}`,e)}else r=e;if(this.zodSchema===void 0)return r;let n=await this.zodSchema.safeParseAsync(r);if(n.success)return n.data;throw new am(`Failed to parse. Text: "${JSON.stringify(e,null,2)}". Error: ${JSON.stringify(n.error.errors)}`,JSON.stringify(r,null,2))}async parseResult(e){let r=e.flatMap(i=>{let{message:a}=i;return Array.isArray(a.content)?xMe(a.content)[0]:[]});if(r[0]===void 0)throw new Error("No parseable tool calls provided to AnthropicToolsOutputParser.");let[n]=r;return await this._validateResult(n.args)}};function xMe(t){let e=[];for(let r of t)r.type==="tool_use"&&e.push({name:r.name,args:r.input,id:r.id,type:"tool_call"});return e}function eIt(t){if(t)return t==="any"?{type:"any"}:t==="auto"?{type:"auto"}:typeof t=="string"?{type:"tool",name:t}:t}function tIt(t){return t==null||typeof t!="object"||!("type"in t)||t.type!=="image"||!("source"in t)||typeof t.source!="object"||t.source==null||!("type"in t.source)?!1:t.source.type==="base64"?!(!("media_type"in t.source)||typeof t.source.media_type!="string"||!("data"in t.source)||typeof t.source.data!="string"):t.source.type==="url"?!(!("url"in t.source)||typeof t.source.url!="string"):!1}function rIt(t){let e=zfe({dataUrl:t});if(e)return{type:"base64",media_type:e.mime_type,data:e.data};let r;try{r=new URL(t)}catch{throw new Error([`Malformed image URL: ${JSON.stringify(t)}. Content blocks of type 'image_url' must be a valid http, https, or base64-encoded data URL.`,"Example: data:image/png;base64,/9j/4AAQSk...","Example: https://example.com/image.jpg"].join(`

`))}if(r.protocol==="http:"||r.protocol==="https:")return{type:"url",url:t};throw new Error([`Invalid image URL protocol: ${JSON.stringify(r.protocol)}. Anthropic only supports images as http, https, or base64-encoded data URLs on 'image_url' content blocks.`,"Example: data:image/png;base64,/9j/4AAQSk...","Example: https://example.com/image.jpg"].join(`

`))}function g9r(t){let e=[];for(let r of t)if(r._getType()==="tool")if(typeof r.content=="string"){let n=e[e.length-1];n?._getType()==="human"&&Array.isArray(n.content)&&"type"in n.content[0]&&n.content[0].type==="tool_result"?n.content.push({type:"tool_result",content:r.content,tool_use_id:r.tool_call_id}):e.push(new ys({content:[{type:"tool_result",content:r.content,tool_use_id:r.tool_call_id}]}))}else e.push(new ys({content:[{type:"tool_result",content:CMe(r.content),tool_use_id:r.tool_call_id}]}));else e.push(r);return e}function nIt(t){if(t.id===void 0)throw new Error('Anthropic requires all tool calls to have an "id".');return{type:"tool_use",id:t.id,name:t.name,input:t.args}}var y9r={providerName:"anthropic",fromStandardTextBlock(t){return{type:"text",text:t.text,..."citations"in(t.metadata??{})?{citations:t.metadata.citations}:{},..."cache_control"in(t.metadata??{})?{cache_control:t.metadata.cache_control}:{}}},fromStandardImageBlock(t){if(t.source_type==="url"){let e=zfe({dataUrl:t.url,asTypedArray:!1});return e?{type:"image",source:{type:"base64",data:e.data,media_type:e.mime_type},..."cache_control"in(t.metadata??{})?{cache_control:t.metadata.cache_control}:{}}:{type:"image",source:{type:"url",url:t.url,media_type:t.mime_type??""},..."cache_control"in(t.metadata??{})?{cache_control:t.metadata.cache_control}:{}}}else{if(t.source_type==="base64")return{type:"image",source:{type:"base64",data:t.data,media_type:t.mime_type??""},..."cache_control"in(t.metadata??{})?{cache_control:t.metadata.cache_control}:{}};throw new Error(`Unsupported image source type: ${t.source_type}`)}},fromStandardFileBlock(t){let e=(t.mime_type??"").split(";")[0];if(t.source_type==="url"){if(e==="application/pdf"||e==="")return{type:"document",source:{type:"url",url:t.url,media_type:t.mime_type??""},..."cache_control"in(t.metadata??{})?{cache_control:t.metadata.cache_control}:{},..."citations"in(t.metadata??{})?{citations:t.metadata.citations}:{},..."context"in(t.metadata??{})?{context:t.metadata.context}:{},..."title"in(t.metadata??{})?{title:t.metadata.title}:{}};throw new Error(`Unsupported file mime type for file url source: ${t.mime_type}`)}else if(t.source_type==="text"){if(e==="text/plain"||e==="")return{type:"document",source:{type:"text",data:t.text,media_type:t.mime_type??""},..."cache_control"in(t.metadata??{})?{cache_control:t.metadata.cache_control}:{},..."citations"in(t.metadata??{})?{citations:t.metadata.citations}:{},..."context"in(t.metadata??{})?{context:t.metadata.context}:{},..."title"in(t.metadata??{})?{title:t.metadata.title}:{}};throw new Error(`Unsupported file mime type for file text source: ${t.mime_type}`)}else if(t.source_type==="base64"){if(e==="application/pdf"||e==="")return{type:"document",source:{type:"base64",data:t.data,media_type:"application/pdf"},..."cache_control"in(t.metadata??{})?{cache_control:t.metadata.cache_control}:{},..."citations"in(t.metadata??{})?{citations:t.metadata.citations}:{},..."context"in(t.metadata??{})?{context:t.metadata.context}:{},..."title"in(t.metadata??{})?{title:t.metadata.title}:{}};if(["image/jpeg","image/png","image/gif","image/webp"].includes(e))return{type:"document",source:{type:"content",content:[{type:"image",source:{type:"base64",data:t.data,media_type:e}}]},..."cache_control"in(t.metadata??{})?{cache_control:t.metadata.cache_control}:{},..."citations"in(t.metadata??{})?{citations:t.metadata.citations}:{},..."context"in(t.metadata??{})?{context:t.metadata.context}:{},..."title"in(t.metadata??{})?{title:t.metadata.title}:{}};throw new Error(`Unsupported file mime type for file base64 source: ${t.mime_type}`)}else throw new Error(`Unsupported file source type: ${t.source_type}`)}};function CMe(t){let e=["tool_use","tool_result","input_json_delta"],r=["text","text_delta"];return typeof t=="string"?t:t.map(o=>{if(lE(o))return zUe(o,y9r);let i="cache_control"in o?o.cache_control:void 0;if(o.type==="image_url"){let a;return typeof o.image_url=="string"?a=rIt(o.image_url):a=rIt(o.image_url.url),{type:"image",source:a,...i?{cache_control:i}:{}}}else{if(tIt(o))return o;if(o.type==="document")return{...o,...i?{cache_control:i}:{}};if(o.type==="thinking")return{type:"thinking",thinking:o.thinking,signature:o.signature,...i?{cache_control:i}:{}};if(o.type==="redacted_thinking")return{type:"redacted_thinking",data:o.data,...i?{cache_control:i}:{}};if(r.find(a=>a===o.type)&&"text"in o)return{type:"text",text:o.text,...i?{cache_control:i}:{}};if(e.find(a=>a===o.type)){let a={...o};if("index"in a&&delete a.index,a.type==="input_json_delta"&&(a.type="tool_use"),"input"in a&&typeof a.input=="string")try{a.input=JSON.parse(a.input)}catch{a.input={}}return{...a,...i?{cache_control:i}:{}}}else throw new Error("Unsupported message content format")}})}function Qoe(t){let e=g9r(t),r;e.length>0&&e[0]._getType()==="system"&&(r=t[0].content);let o=(r!==void 0?e.slice(1):e).map(i=>{let a;if(i._getType()==="human")a="user";else if(i._getType()==="ai")a="assistant";else if(i._getType()==="tool")a="user";else throw i._getType()==="system"?new Error("System messages are only permitted as the first passed message."):new Error(`Message type "${i._getType()}" is not supported.`);if(bi(i)&&i.tool_calls?.length){if(typeof i.content=="string")return i.content===""?{role:a,content:i.tool_calls.map(nIt)}:{role:a,content:[{type:"text",text:i.content},...i.tool_calls.map(nIt)]};{let{content:s}=i;return!i.tool_calls.every(l=>s.find(c=>(c.type==="tool_use"||c.type==="input_json_delta")&&c.id===l.id))&&console.warn('The "tool_calls" field on a message is only respected if content is a string.'),{role:a,content:CMe(i.content)}}}else return{role:a,content:CMe(i.content)}});return{messages:b9r(o),system:r}}function b9r(t){if(!t||t.length<=1)return t;let e=[],r=t[0],n=i=>typeof i=="string"?[{type:"text",text:i}]:i,o=i=>i.role!=="user"||typeof i.content=="string"?!1:Array.isArray(i.content)&&i.content.every(a=>a.type==="tool_result");for(let i=1;i<t.length;i+=1){let a=t[i];o(r)&&o(a)?r={...r,content:[...n(r.content),...n(a.content)]}:(e.push(r),r=a)}return e.push(r),e}function oIt(t,e){if(t.type==="message_start"){let{content:r,usage:n,...o}=t.message,i={};for(let[c,d]of Object.entries(o))d!=null&&(i[c]=d);let{input_tokens:a,output_tokens:s,...u}=n??{},l={input_tokens:a,output_tokens:s,total_tokens:a+s,input_token_details:{cache_creation:u.cache_creation_input_tokens,cache_read:u.cache_read_input_tokens}};return{chunk:new cr({content:e.coerceContentToString?"":[],additional_kwargs:i,usage_metadata:e.streamUsage?l:void 0,response_metadata:{usage:{...u}},id:t.message.id})}}else if(t.type==="message_delta"){let r={input_tokens:0,output_tokens:t.usage.output_tokens,total_tokens:t.usage.output_tokens,input_token_details:{cache_creation:t.usage.cache_creation_input_tokens,cache_read:t.usage.cache_read_input_tokens}};return{chunk:new cr({content:e.coerceContentToString?"":[],additional_kwargs:{...t.delta},usage_metadata:e.streamUsage?r:void 0})}}else if(t.type==="content_block_start"&&["tool_use","document"].includes(t.content_block.type)){let r=t.content_block,n;return r.type==="tool_use"?n=[{id:r.id,index:t.index,name:r.name,args:""}]:n=[],{chunk:new cr({content:e.coerceContentToString?"":[{index:t.index,...t.content_block,input:""}],additional_kwargs:{},tool_call_chunks:n})}}else if(t.type==="content_block_delta"&&["text_delta","citations_delta","thinking_delta","signature_delta"].includes(t.delta.type)){if(e.coerceContentToString&&"text"in t.delta)return{chunk:new cr({content:t.delta.text})};{let r=t.delta;return"citation"in r&&(r.citations=[r.citation],delete r.citation),r.type==="thinking_delta"||r.type==="signature_delta"?{chunk:new cr({content:[{index:t.index,...r,type:"thinking"}]})}:{chunk:new cr({content:[{index:t.index,...r,type:"text"}]})}}}else{if(t.type==="content_block_delta"&&t.delta.type==="input_json_delta")return{chunk:new cr({content:e.coerceContentToString?"":[{index:t.index,input:t.delta.partial_json,type:t.delta.type}],additional_kwargs:{},tool_call_chunks:[{index:t.index,args:t.delta.partial_json}]})};if(t.type==="content_block_start"&&t.content_block.type==="text"){let r=t.content_block?.text;if(r!==void 0)return{chunk:new cr({content:e.coerceContentToString?r:[{index:t.index,...t.content_block}],additional_kwargs:{}})}}else{if(t.type==="content_block_start"&&t.content_block.type==="redacted_thinking")return{chunk:new cr({content:e.coerceContentToString?"":[{index:t.index,...t.content_block}]})};if(t.type==="content_block_start"&&t.content_block.type==="thinking"){let r=t.content_block.thinking;return{chunk:new cr({content:e.coerceContentToString?r:[{index:t.index,...t.content_block}]})}}}}return null}function iIt(t,e){let r=e.usage,n=r!=null?{input_tokens:r.input_tokens??0,output_tokens:r.output_tokens??0,total_tokens:(r.input_tokens??0)+(r.output_tokens??0),input_token_details:{cache_creation:r.cache_creation_input_tokens,cache_read:r.cache_read_input_tokens}}:void 0;if(t.length===1&&t[0].type==="text")return[{text:t[0].text,message:new mn({content:t[0].text,additional_kwargs:e,usage_metadata:n,response_metadata:e,id:e.id})}];{let o=xMe(t);return[{text:"",message:new mn({content:t,additional_kwargs:e,tool_calls:o,usage_metadata:n,response_metadata:e,id:e.id})}]}}function eie(t,e){return t.lc_error_code=e,t.message=`${t.message}

Troubleshooting URL: https://js.langchain.com/docs/troubleshooting/errors/${e}/
`,t}function OMe(t){let e;return t.status===400&&t.message.includes("tool")?e=eie(t,"INVALID_TOOL_RESULTS"):t.status===401?e=eie(t,"MODEL_AUTHENTICATION"):t.status===404?e=eie(t,"MODEL_NOT_FOUND"):t.status===429?e=eie(t,"MODEL_RATE_LIMIT"):e=t,e}function _9r(t){return!!(t.tools&&t.tools.length>0)}function v9r(t){for(let e of t.messages??[])if(typeof e.content!="string"){for(let r of e.content??[])if(typeof r=="object"&&r!=null&&r.type==="document"&&typeof r.citations=="object"&&r.citations.enabled)return!0}return!1}function w9r(t){return!!(t.thinking&&t.thinking.type==="enabled")}function S9r(t){return"input_schema"in t}function x9r(t){if(typeof t.content=="string")return t.content;if(Array.isArray(t.content)&&t.content.length>=1&&"input"in t.content[0])return typeof t.content[0].input=="string"?t.content[0].input:JSON.stringify(t.content[0].input);if(Array.isArray(t.content)&&t.content.length>=1&&"text"in t.content[0])return t.content[0].text}var PMe=class extends Bs{static lc_name(){return"ChatAnthropic"}get lc_secrets(){return{anthropicApiKey:"ANTHROPIC_API_KEY",apiKey:"ANTHROPIC_API_KEY"}}get lc_aliases(){return{modelName:"model"}}constructor(e){if(super(e??{}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"anthropicApiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"apiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"apiUrl",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"temperature",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"topK",{enumerable:!0,configurable:!0,writable:!0,value:-1}),Object.defineProperty(this,"topP",{enumerable:!0,configurable:!0,writable:!0,value:-1}),Object.defineProperty(this,"maxTokens",{enumerable:!0,configurable:!0,writable:!0,value:2048}),Object.defineProperty(this,"modelName",{enumerable:!0,configurable:!0,writable:!0,value:"claude-2.1"}),Object.defineProperty(this,"model",{enumerable:!0,configurable:!0,writable:!0,value:"claude-2.1"}),Object.defineProperty(this,"invocationKwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"stopSequences",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"streaming",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"clientOptions",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"thinking",{enumerable:!0,configurable:!0,writable:!0,value:{type:"disabled"}}),Object.defineProperty(this,"batchClient",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"streamingClient",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"streamUsage",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"createClient",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.anthropicApiKey=e?.apiKey??e?.anthropicApiKey??ot("ANTHROPIC_API_KEY"),!this.anthropicApiKey&&!e?.createClient)throw new Error("Anthropic API key not found");this.clientOptions=e?.clientOptions??{},this.apiKey=this.anthropicApiKey,this.apiUrl=e?.anthropicApiUrl,this.modelName=e?.model??e?.modelName??this.model,this.model=this.modelName,this.invocationKwargs=e?.invocationKwargs??{},this.temperature=e?.temperature??this.temperature,this.topK=e?.topK??this.topK,this.topP=e?.topP??this.topP,this.maxTokens=e?.maxTokensToSample??e?.maxTokens??this.maxTokens,this.stopSequences=e?.stopSequences??this.stopSequences,this.streaming=e?.streaming??!1,this.streamUsage=e?.streamUsage??this.streamUsage,this.thinking=e?.thinking??this.thinking,this.createClient=e?.createClient??(r=>new si(r))}getLsParams(e){let r=this.invocationParams(e);return{ls_provider:"anthropic",ls_model_name:this.model,ls_model_type:"chat",ls_temperature:r.temperature??void 0,ls_max_tokens:r.max_tokens??void 0,ls_stop:e.stop}}formatStructuredToolToAnthropic(e){if(!(!e||!e.length))return e.map(r=>{if(S9r(r))return r;if(Rc(r))return{name:r.function.name,description:r.function.description,input_schema:r.function.parameters};if(Vl(r))return{name:r.name,description:r.description,input_schema:$s(r.schema)?ho(r.schema):r.schema};throw new Error(`Unknown tool type passed to ChatAnthropic: ${JSON.stringify(r,null,2)}`)})}bindTools(e,r){return this.bind({tools:this.formatStructuredToolToAnthropic(e),...r})}invocationParams(e){let r=eIt(e?.tool_choice);if(this.thinking.type==="enabled"){if(this.topK!==-1)throw new Error("topK is not supported when thinking is enabled");if(this.topP!==-1)throw new Error("topP is not supported when thinking is enabled");if(this.temperature!==1)throw new Error("temperature is not supported when thinking is enabled");return{model:this.model,stop_sequences:e?.stop??this.stopSequences,stream:this.streaming,max_tokens:this.maxTokens,tools:this.formatStructuredToolToAnthropic(e?.tools),tool_choice:r,thinking:this.thinking,...this.invocationKwargs}}return{model:this.model,temperature:this.temperature,top_k:this.topK,top_p:this.topP,stop_sequences:e?.stop??this.stopSequences,stream:this.streaming,max_tokens:this.maxTokens,tools:this.formatStructuredToolToAnthropic(e?.tools),tool_choice:r,thinking:this.thinking,...this.invocationKwargs}}_identifyingParams(){return{model_name:this.model,...this.invocationParams()}}identifyingParams(){return{model_name:this.model,...this.invocationParams()}}async*_streamResponseChunks(e,r,n){let o=this.invocationParams(r),i=Qoe(e),a={...o,...i,stream:!0},s=!_9r(a)&&!v9r(a)&&!w9r(a),u=await this.createStreamWithRetry(a,{headers:r.headers});for await(let l of u){if(r.signal?.aborted)throw u.controller.abort(),new Error("AbortError: User aborted the request.");let c=this.streamUsage??r.streamUsage,d=oIt(l,{streamUsage:c,coerceContentToString:s});if(!d)continue;let{chunk:f}=d,p=x9r(f),m=new Ln({message:new cr({content:f.content,additional_kwargs:f.additional_kwargs,tool_call_chunks:f.tool_call_chunks,usage_metadata:c?f.usage_metadata:void 0,response_metadata:f.response_metadata,id:f.id}),text:p??""});yield m,await n?.handleLLMNewToken(p??"",void 0,void 0,void 0,void 0,{chunk:m})}}async _generateNonStreaming(e,r,n){let o=await this.completionWithRetry({...r,stream:!1,...Qoe(e)},n),{content:i,...a}=o,s=iIt(i,a),{role:u,type:l,...c}=a;return{generations:s,llmOutput:c}}async _generate(e,r,n){if(this.stopSequences&&r.stop)throw new Error('"stopSequence" parameter found in input and default params');let o=this.invocationParams(r);if(o.stream){let i,a=this._streamResponseChunks(e,r,n);for await(let s of a)i===void 0?i=s:i=i.concat(s);if(i===void 0)throw new Error("No chunks returned from Anthropic API.");return{generations:[{text:i.text,message:i.message}]}}else return this._generateNonStreaming(e,o,{signal:r.signal,headers:r.headers})}async createStreamWithRetry(e,r){if(!this.streamingClient){let o=this.apiUrl?{baseURL:this.apiUrl}:void 0;this.streamingClient=this.createClient({dangerouslyAllowBrowser:!0,...this.clientOptions,...o,apiKey:this.apiKey,maxRetries:0})}let n=async()=>{try{return await this.streamingClient.messages.create({...e,...this.invocationKwargs,stream:!0},r)}catch(o){throw OMe(o)}};return this.caller.call(n)}async completionWithRetry(e,r){if(!this.batchClient){let o=this.apiUrl?{baseURL:this.apiUrl}:void 0;this.batchClient=this.createClient({dangerouslyAllowBrowser:!0,...this.clientOptions,...o,apiKey:this.apiKey,maxRetries:0})}let n=async()=>{try{return await this.batchClient.messages.create({...e,...this.invocationKwargs},r)}catch(o){throw OMe(o)}};return this.caller.callWithOptions({signal:r.signal??void 0},n)}_llmType(){return"anthropic"}withStructuredOutput(e,r){let n=e,o=r?.name,i=r?.method,a=r?.includeRaw;if(i==="jsonMode")throw new Error('Anthropic only supports "functionCalling" as a method.');let s=o??"extract",u,l;if($s(n)){let m=ho(n);l=[{name:s,description:m.description??"A function available to call.",input_schema:m}],u=new T6({returnSingle:!0,keyName:s,zodSchema:n})}else{let m;typeof n.name=="string"&&typeof n.description=="string"&&typeof n.input_schema=="object"&&n.input_schema!=null?(m=n,s=n.name):m={name:s,description:n.description??"",input_schema:n},l=[m],u=new T6({returnSingle:!0,keyName:s})}let c;if(this.thinking?.type==="enabled"){let m="Anthropic structured output relies on forced tool calling, which is not supported when `thinking` is enabled. This method will raise OutputParserException if tool calls are not generated. Consider disabling `thinking` or adjust your prompt to ensure the tool is called.";console.warn(m),c=this.bind({tools:l});let h=b=>{if(!b.tool_calls||b.tool_calls.length===0)throw new Error(m);return b};c=c.pipe(h)}else c=this.bind({tools:l,tool_choice:{type:"tool",name:s}});if(!a)return c.pipe(u).withConfig({runName:"ChatAnthropicStructuredOutput"});let d=lo.assign({parsed:(m,h)=>u.invoke(m.raw,h)}),f=lo.assign({parsed:()=>null}),p=d.withFallbacks({fallbacks:[f]});return di.from([{raw:c},p]).withConfig({runName:"StructuredOutputRunnable"})}},tie=class extends PMe{};$d();Rm();um();Yg();mc();function nN(t){let{azureOpenAIApiDeploymentName:e,azureOpenAIApiInstanceName:r,azureOpenAIApiKey:n,azureOpenAIBasePath:o,baseURL:i,azureADTokenProvider:a,azureOpenAIEndpoint:s}=t;if((n||a)&&o&&e)return`${o}/${e}`;if((n||a)&&s&&e)return`${s}/openai/deployments/${e}`;if(n||a){if(!r)throw new Error("azureOpenAIApiInstanceName is required when using azureOpenAIApiKey");if(!e)throw new Error("azureOpenAIApiDeploymentName is a required parameter when using azureOpenAIApiKey");return`https://${r}.openai.azure.com/openai/deployments/${e}`}return i}mc();function A6(t,e){return t.lc_error_code=e,t.message=`${t.message}

Troubleshooting URL: https://js.langchain.com/docs/troubleshooting/errors/${e}/
`,t}function oN(t){let e;return t.constructor.name===Ff.name?(e=new Error(t.message),e.name="TimeoutError"):t.constructor.name===Ai.name?(e=new Error(t.message),e.name="AbortError"):t.status===400&&t.message.includes("tool_calls")?e=A6(t,"INVALID_TOOL_RESULTS"):t.status===401?e=A6(t,"MODEL_AUTHENTICATION"):t.status===429?e=A6(t,"MODEL_RATE_LIMIT"):t.status===404?e=A6(t,"MODEL_NOT_FOUND"):e=t,e}function EMe(t){if(t)return t==="any"||t==="required"?"required":t==="auto"?"auto":t==="none"?"none":typeof t=="string"?{type:"function",function:{name:t}}:t}function C9r(t){return t.anyOf!==void 0&&Array.isArray(t.anyOf)}function aIt(t){let e=["namespace functions {",""];for(let r of t)r.description&&e.push(`// ${r.description}`),Object.keys(r.parameters.properties??{}).length>0?(e.push(`type ${r.name} = (_: {`),e.push(sIt(r.parameters,0)),e.push("}) => any;")):e.push(`type ${r.name} = () => any;`),e.push("");return e.push("} // namespace functions"),e.join(`
`)}function sIt(t,e){let r=[];for(let[n,o]of Object.entries(t.properties??{}))o.description&&e<2&&r.push(`// ${o.description}`),t.required?.includes(n)?r.push(`${n}: ${rie(o,e)},`):r.push(`${n}?: ${rie(o,e)},`);return r.map(n=>" ".repeat(e)+n).join(`
`)}function rie(t,e){if(C9r(t))return t.anyOf.map(r=>rie(r,e)).join(" | ");switch(t.type){case"string":return t.enum?t.enum.map(r=>`"${r}"`).join(" | "):"string";case"number":return t.enum?t.enum.map(r=>`${r}`).join(" | "):"number";case"integer":return t.enum?t.enum.map(r=>`${r}`).join(" | "):"number";case"boolean":return"boolean";case"null":return"null";case"object":return["{",sIt(t,e+2),"}"].join(`
`);case"array":return t.items?`${rie(t.items,e)}[]`:"any[]";default:return""}}function uIt(t,e){let r;if(Vl(t)){let n=Rre({name:t.name,parameters:t.schema,description:t.description});n.function.parameters?r={type:n.type,function:{name:n.function.name,description:n.function.description,parameters:n.function.parameters,...e?.strict!==void 0?{strict:e.strict}:{}}}:r={type:"function",function:nA(t,e)}}else r=t;return e?.strict!==void 0&&(r.function.strict=e.strict),r}function O9r(t){return t.role!=="system"&&t.role!=="developer"&&t.role!=="assistant"&&t.role!=="user"&&t.role!=="function"&&t.role!=="tool"&&console.warn(`Unknown message role: ${t.role}`),t.role}function IMe(t){let e=t._getType();switch(e){case"system":return"system";case"ai":return"assistant";case"human":return"user";case"function":return"function";case"tool":return"tool";case"generic":{if(!gs.isInstance(t))throw new Error("Invalid generic chat message");return O9r(t)}default:throw new Error(`Unknown message type: ${e}`)}}function AMe(t,e){return t.flatMap(r=>{let n=IMe(r);n==="system"&&MMe(e)&&(n="developer");let o={role:n,content:r.content};if(r.name!=null&&(o.name=r.name),r.additional_kwargs.function_call!=null&&(o.function_call=r.additional_kwargs.function_call,o.content=""),bi(r)&&r.tool_calls?.length?(o.tool_calls=r.tool_calls.map(ox),o.content=""):(r.additional_kwargs.tool_calls!=null&&(o.tool_calls=r.additional_kwargs.tool_calls),r.tool_call_id!=null&&(o.tool_call_id=r.tool_call_id)),r.additional_kwargs.audio&&typeof r.additional_kwargs.audio=="object"&&"id"in r.additional_kwargs.audio){let i={role:"assistant",audio:{id:r.additional_kwargs.audio.id}};return[o,i]}return o})}var yq="__openai_function_call_ids__";function lIt(t,e){return t.flatMap(r=>{let n=IMe(r);if(n==="system"&&MMe(e)&&(n="developer"),n==="function")throw new Error("Function messages are not supported in Responses API");if(n==="tool"){let o=r;return o.additional_kwargs?.type==="computer_call_output"?{type:"computer_call_output",output:(()=>{if(typeof o.content=="string")return{type:"computer_screenshot",image_url:o.content};if(Array.isArray(o.content)){let a=o.content.find(u=>u.type==="computer_screenshot");if(a)return a;let s=o.content.find(u=>u.type==="image_url");if(s)return{type:"computer_screenshot",image_url:typeof s.image_url=="string"?s.image_url:s.image_url.url}}throw new Error("Invalid computer call output")})(),call_id:o.tool_call_id}:{type:"function_call_output",call_id:o.tool_call_id,id:o.id,output:typeof o.content!="string"?JSON.stringify(o.content):o.content}}if(n==="assistant"){let o=[];r.additional_kwargs.reasoning!=null&&(u=>typeof u=="object"&&u!=null&&"type"in u&&u.type==="reasoning")(r.additional_kwargs.reasoning)&&o.push(r.additional_kwargs.reasoning);let{content:i}=r;r.additional_kwargs.refusal!=null&&(typeof i=="string"&&(i=[{type:"output_text",text:i,annotations:[]}]),i=[...i,{type:"refusal",refusal:r.additional_kwargs.refusal}]),o.push({type:"message",role:"assistant",content:typeof i=="string"?i:i.flatMap(s=>s.type==="text"?{type:"output_text",text:s.text,annotations:s.annotations??[]}:s.type==="output_text"||s.type==="refusal"?s:[])});let a=r.additional_kwargs[yq];if(bi(r)&&r.tool_calls?.length?o.push(...r.tool_calls.map(s=>({type:"function_call",name:s.name,arguments:JSON.stringify(s.args),call_id:s.id,id:a?.[s.id]}))):r.additional_kwargs.tool_calls!=null&&o.push(...r.additional_kwargs.tool_calls.map(s=>({type:"function_call",name:s.function.name,call_id:s.id,id:a?.[s.id],arguments:s.function.arguments}))),r.additional_kwargs.tool_outputs!=null){let u=r.additional_kwargs.tool_outputs?.filter(l=>l.type==="computer_call");u.length>0&&o.push(...u)}return o}return n==="user"?{type:"message",role:"user",content:typeof r.content=="string"?r.content:r.content.flatMap(o=>{if(o.type==="text")return{type:"input_text",text:o.text};if(o.type==="image_url"){let i=typeof o.image_url=="string"?o.image_url:o.image_url.url,a=typeof o.image_url=="string"?"auto":o.image_url.detail;return{type:"input_image",image_url:i,detail:a}}return o.type==="input_text"||o.type==="input_image"||o.type==="input_file"?o:[]})}:[]})}function dIt(t){if(t.error){let a=new Error(t.error.message);throw a.name=t.error.code,a}let e=[],r=[],n=[],o={model:t.model,created_at:t.created_at,id:t.id,incomplete_details:t.incomplete_details,metadata:t.metadata,object:t.object,status:t.status,user:t.user,model_name:t.model},i={};for(let a of t.output)if(a.type==="message")e.push(...a.content.flatMap(s=>s.type==="output_text"?("parsed"in s&&s.parsed!=null&&(i.parsed=s.parsed),{type:"text",text:s.text,annotations:s.annotations}):s.type==="refusal"?(i.refusal=s.refusal,[]):s));else if(a.type==="function_call"){let s={function:{name:a.name,arguments:a.arguments},id:a.call_id};try{r.push(Lp(s,{returnId:!0}))}catch(u){let l;typeof u=="object"&&u!=null&&"message"in u&&typeof u.message=="string"&&(l=u.message),n.push(Fm(s,l))}i[yq]??(i[yq]={}),i[yq][a.call_id]=a.id}else a.type==="reasoning"?i.reasoning=a:(i.tool_outputs??(i.tool_outputs=[]),i.tool_outputs.push(a));return new mn({id:t.id,content:e,tool_calls:r,invalid_tool_calls:n,usage_metadata:t.usage,additional_kwargs:i,response_metadata:o})}function P9r(t){let e=[],r={},n,o=[],i={},a={},s;if(t.type==="response.output_text.delta")e.push({type:"text",text:t.delta,index:t.content_index});else if(t.type==="response.output_text.annotation.added")e.push({type:"text",text:"",annotations:[t.annotation],index:t.content_index});else if(t.type==="response.output_item.added"&&t.item.type==="message")s=t.item.id;else if(t.type==="response.output_item.added"&&t.item.type==="function_call")o.push({type:"tool_call_chunk",name:t.item.name,args:t.item.arguments,id:t.item.id,index:t.output_index}),a[yq]={[t.item.call_id]:t.item.id};else if(t.type==="response.output_item.done"&&(t.item.type==="web_search_call"||t.item.type==="file_search_call"||t.item.type==="computer_call"))a.tool_outputs=[t.item];else if(t.type==="response.created")i.id=t.response.id,i.model_name=t.response.model,i.model=t.response.model;else if(t.type==="response.completed"){let u=dIt(t.response);n=t.response.usage,t.response.text?.format?.type==="json_schema"&&(a.parsed??(a.parsed=JSON.parse(u.text)));for(let[l,c]of Object.entries(t.response))l!=="id"&&(i[l]=c)}else if(t.type==="response.function_call_arguments.delta")o.push({type:"tool_call_chunk",args:t.delta,index:t.output_index});else if(t.type==="response.web_search_call.completed"||t.type==="response.file_search_call.completed")r={tool_outputs:{id:t.item_id,type:t.type.replace("response.","").replace(".completed",""),status:"completed"}};else if(t.type==="response.refusal.done")a.refusal=t.refusal;else return null;return new Ln({text:e.map(u=>u.text).join(""),message:new cr({id:s,content:e,tool_call_chunks:o,usage_metadata:n,additional_kwargs:a,response_metadata:i}),generationInfo:r})}function TMe(t){return"type"in t&&t.type!=="function"}function E9r(t){return t!=null&&typeof t=="object"&&"type"in t&&t.type!=="function"}function cIt(t,e){return Rc(t)?e?.strict!==void 0?{...t,function:{...t.function,strict:e.strict}}:t:uIt(t,e)}function MMe(t){return t?.startsWith("o1")||t?.startsWith("o3")}var I6=class extends Bs{static lc_name(){return"ChatOpenAI"}get callKeys(){return[...super.callKeys,"options","function_call","functions","tools","tool_choice","promptIndex","response_format","seed","reasoning_effort"]}get lc_secrets(){return{openAIApiKey:"OPENAI_API_KEY",apiKey:"OPENAI_API_KEY",organization:"OPENAI_ORGANIZATION"}}get lc_aliases(){return{modelName:"model",openAIApiKey:"openai_api_key",apiKey:"openai_api_key"}}get lc_serializable_keys(){return["configuration","logprobs","topLogprobs","prefixMessages","supportsStrictToolCalling","modalities","audio","reasoningEffort","temperature","maxTokens","topP","frequencyPenalty","presencePenalty","n","logitBias","user","streaming","streamUsage","modelName","model","modelKwargs","stop","stopSequences","timeout","openAIApiKey","apiKey","cache","maxConcurrency","maxRetries","verbose","callbacks","tags","metadata","disableStreaming"]}constructor(e){super(e??{}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"temperature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"topP",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"frequencyPenalty",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"presencePenalty",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"n",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"logitBias",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"modelName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"model",{enumerable:!0,configurable:!0,writable:!0,value:"gpt-3.5-turbo"}),Object.defineProperty(this,"modelKwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"stop",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"stopSequences",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"user",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"timeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"streaming",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"streamUsage",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"maxTokens",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"logprobs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"topLogprobs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"openAIApiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"apiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"organization",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"__includeRawResponse",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"clientConfig",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"supportsStrictToolCalling",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"audio",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"modalities",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reasoningEffort",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"useResponsesApi",{enumerable:!0,configurable:!0,writable:!0,value:!1}),this.openAIApiKey=e?.apiKey??e?.openAIApiKey??e?.configuration?.apiKey??ot("OPENAI_API_KEY"),this.apiKey=this.openAIApiKey,this.organization=e?.configuration?.organization??ot("OPENAI_ORGANIZATION"),this.model=e?.model??e?.modelName??this.model,this.modelName=this.model,this.modelKwargs=e?.modelKwargs??{},this.timeout=e?.timeout,this.temperature=e?.temperature??this.temperature,this.topP=e?.topP??this.topP,this.frequencyPenalty=e?.frequencyPenalty??this.frequencyPenalty,this.presencePenalty=e?.presencePenalty??this.presencePenalty,this.logprobs=e?.logprobs,this.topLogprobs=e?.topLogprobs,this.n=e?.n??this.n,this.logitBias=e?.logitBias,this.stop=e?.stopSequences??e?.stop,this.stopSequences=this.stop,this.user=e?.user,this.__includeRawResponse=e?.__includeRawResponse,this.audio=e?.audio,this.modalities=e?.modalities,this.reasoningEffort=e?.reasoningEffort,this.maxTokens=e?.maxCompletionTokens??e?.maxTokens,this.useResponsesApi=e?.useResponsesApi??this.useResponsesApi,this.model==="o1"&&(this.disableStreaming=!0),this.streaming=e?.streaming??!1,this.streamUsage=e?.streamUsage??this.streamUsage,this.clientConfig={apiKey:this.apiKey,organization:this.organization,dangerouslyAllowBrowser:!0,...e?.configuration},e?.supportsStrictToolCalling!==void 0&&(this.supportsStrictToolCalling=e.supportsStrictToolCalling)}getLsParams(e){let r=this.invocationParams(e);return{ls_provider:"openai",ls_model_name:this.model,ls_model_type:"chat",ls_temperature:r.temperature??void 0,ls_max_tokens:r.max_tokens??void 0,ls_stop:e.stop}}bindTools(e,r){let n;return r?.strict!==void 0?n=r.strict:this.supportsStrictToolCalling!==void 0&&(n=this.supportsStrictToolCalling),this.bind({tools:e.map(o=>TMe(o)?o:cIt(o,{strict:n})),...r})}createResponseFormat(e){return e&&e.type==="json_schema"&&e.json_schema.schema&&nie(e.json_schema.schema)?vB(e.json_schema.schema,e.json_schema.name,{description:e.json_schema.description}):e}invocationParams(e,r){let n;if(e?.strict!==void 0?n=e.strict:this.supportsStrictToolCalling!==void 0&&(n=this.supportsStrictToolCalling),this._useResponseApi(e)){let s={model:this.model,temperature:this.temperature,top_p:this.topP,user:this.user,stream:this.streaming,previous_response_id:e?.previous_response_id,truncation:e?.truncation,include:e?.include,tools:e?.tools?.length?e.tools.map(l=>TMe(l)?l:Rc(l)?{type:"function",name:l.function.name,parameters:l.function.parameters,description:l.function.description,strict:n}:null).filter(l=>l!==null):void 0,tool_choice:E9r(e?.tool_choice)?e?.tool_choice:(()=>{let l=EMe(e?.tool_choice);if(typeof l=="object"&&"type"in l)return{type:"function",name:l.function.name}})(),text:(()=>{if(e?.text)return e.text;let l=this.createResponseFormat(e?.response_format);return l?.type==="json_schema"?l.json_schema.schema!=null?{format:{type:"json_schema",schema:l.json_schema.schema,description:l.json_schema.description,name:l.json_schema.name,strict:l.json_schema.strict}}:void 0:{format:l}})(),parallel_tool_calls:e?.parallel_tool_calls,max_output_tokens:this.maxTokens===-1?void 0:this.maxTokens,...this.modelKwargs},u=e?.reasoning_effort??this.reasoningEffort;return u!==void 0&&(s.reasoning={effort:u}),s}let o={};e?.stream_options!==void 0?o={stream_options:e.stream_options}:this.streamUsage&&(this.streaming||r?.streaming)&&(o={stream_options:{include_usage:!0}});let i={model:this.model,temperature:this.temperature,top_p:this.topP,frequency_penalty:this.frequencyPenalty,presence_penalty:this.presencePenalty,logprobs:this.logprobs,top_logprobs:this.topLogprobs,n:this.n,logit_bias:this.logitBias,stop:e?.stop??this.stopSequences,user:this.user,stream:this.streaming,functions:e?.functions,function_call:e?.function_call,tools:e?.tools?.length?e.tools.map(s=>cIt(s,{strict:n})):void 0,tool_choice:EMe(e?.tool_choice),response_format:this.createResponseFormat(e?.response_format),seed:e?.seed,...o,parallel_tool_calls:e?.parallel_tool_calls,...this.audio||e?.audio?{audio:this.audio||e?.audio}:{},...this.modalities||e?.modalities?{modalities:this.modalities||e?.modalities}:{},...this.modelKwargs};e?.prediction!==void 0&&(i.prediction=e.prediction);let a=e?.reasoning_effort??this.reasoningEffort;return a!==void 0&&(i.reasoning_effort=a),MMe(i.model)?i.max_completion_tokens=this.maxTokens===-1?void 0:this.maxTokens:i.max_tokens=this.maxTokens===-1?void 0:this.maxTokens,i}_convertOpenAIChatCompletionMessageToBaseMessage(e,r){let n=e.tool_calls;switch(e.role){case"assistant":{let o=[],i=[];for(let u of n??[])try{o.push(Lp(u,{returnId:!0}))}catch(l){i.push(Fm(u,l.message))}let a={function_call:e.function_call,tool_calls:n};this.__includeRawResponse!==void 0&&(a.__raw_response=r);let s={model_name:r.model,...r.system_fingerprint?{usage:{...r.usage},system_fingerprint:r.system_fingerprint}:{}};return e.audio&&(a.audio=e.audio),new mn({content:e.content||"",tool_calls:o,invalid_tool_calls:i,additional_kwargs:a,response_metadata:s,id:r.id})}default:return new gs(e.content||"",e.role??"unknown")}}_convertOpenAIDeltaToBaseMessageChunk(e,r,n){let o=e.role??n,i=e.content??"",a;e.function_call?a={function_call:e.function_call}:e.tool_calls?a={tool_calls:e.tool_calls}:a={},this.__includeRawResponse&&(a.__raw_response=r),e.audio&&(a.audio={...e.audio,index:r.choices[0].index});let s={usage:{...r.usage}};if(o==="user")return new gf({content:i,response_metadata:s});if(o==="assistant"){let u=[];if(Array.isArray(e.tool_calls))for(let l of e.tool_calls)u.push({name:l.function?.name,args:l.function?.arguments,id:l.id,index:l.index,type:"tool_call_chunk"});return new cr({content:i,tool_call_chunks:u,additional_kwargs:a,id:r.id,response_metadata:s})}else return o==="system"?new bd({content:i,response_metadata:s}):o==="developer"?new bd({content:i,response_metadata:s,additional_kwargs:{__openai_role__:"developer"}}):o==="function"?new nm({content:i,additional_kwargs:a,name:e.name,response_metadata:s}):o==="tool"?new ph({content:i,additional_kwargs:a,tool_call_id:e.tool_call_id,response_metadata:s}):new hf({content:i,role:o,response_metadata:s})}_identifyingParams(){return{model_name:this.model,...this.invocationParams(),...this.clientConfig}}async*_streamResponseChunks(e,r,n){if(this._useResponseApi(r)){let l=await this.responseApiWithRetry({...this.invocationParams(r,{streaming:!0}),input:lIt(e,this.model),stream:!0},r);for await(let c of l){let d=P9r(c);d!=null&&(yield d)}return}let o=AMe(e,this.model),i={...this.invocationParams(r,{streaming:!0}),messages:o,stream:!0},a,s=await this.completionWithRetry(i,r),u;for await(let l of s){let c=l?.choices?.[0];if(l.usage&&(u=l.usage),!c)continue;let{delta:d}=c;if(!d)continue;let f=this._convertOpenAIDeltaToBaseMessageChunk(d,l,a);a=d.role??a;let p={prompt:r.promptIndex??0,completion:c.index??0};if(typeof f.content!="string"){console.log("[WARNING]: Received non-string content from OpenAI. This is currently not supported.");continue}let m={...p};c.finish_reason!=null&&(m.finish_reason=c.finish_reason,m.system_fingerprint=l.system_fingerprint,m.model_name=l.model),this.logprobs&&(m.logprobs=c.logprobs);let h=new Ln({message:f,text:f.content,generationInfo:m});yield h,await n?.handleLLMNewToken(h.text??"",p,void 0,void 0,void 0,{chunk:h})}if(u){let l={...u.prompt_tokens_details?.audio_tokens!==null&&{audio:u.prompt_tokens_details?.audio_tokens},...u.prompt_tokens_details?.cached_tokens!==null&&{cache_read:u.prompt_tokens_details?.cached_tokens}},c={...u.completion_tokens_details?.audio_tokens!==null&&{audio:u.completion_tokens_details?.audio_tokens},...u.completion_tokens_details?.reasoning_tokens!==null&&{reasoning:u.completion_tokens_details?.reasoning_tokens}};yield new Ln({message:new cr({content:"",response_metadata:{usage:{...u}},usage_metadata:{input_tokens:u.prompt_tokens,output_tokens:u.completion_tokens,total_tokens:u.total_tokens,...Object.keys(l).length>0&&{input_token_details:l},...Object.keys(c).length>0&&{output_token_details:c}}}),text:""})}if(r.signal?.aborted)throw new Error("AbortError")}identifyingParams(){return this._identifyingParams()}async _responseApiGenerate(e,r,n){let o=this.invocationParams(r);if(o.stream){let s=this._streamResponseChunks(e,r,n),u;for await(let l of s)l.message.response_metadata={...l.generationInfo,...l.message.response_metadata},u=u?.concat(l)??l;return{generations:u?[u]:[],llmOutput:{estimatedTokenUsage:u?.message?.usage_metadata}}}let i=lIt(e,this.model),a=await this.responseApiWithRetry({input:i,...o},{signal:r?.signal,...r?.options});return{generations:[{text:a.output_text,message:dIt(a)}],llmOutput:{id:a.id,estimatedTokenUsage:a.usage?{promptTokens:a.usage.input_tokens,completionTokens:a.usage.output_tokens,totalTokens:a.usage.total_tokens}:void 0}}}_useResponseApi(e){let r=e?.tools?.some(TMe),n=e?.previous_response_id!=null||e?.text!=null||e?.truncation!=null||e?.include!=null;return this.useResponsesApi||r||n}async _generate(e,r,n){if(this._useResponseApi(r))return this._responseApiGenerate(e,r,n);let o={},i=this.invocationParams(r),a=AMe(e,this.model);if(i.stream){let s=this._streamResponseChunks(e,r,n),u={};for await(let m of s){m.message.response_metadata={...m.generationInfo,...m.message.response_metadata};let h=m.generationInfo?.completion??0;u[h]===void 0?u[h]=m:u[h]=u[h].concat(m)}let l=Object.entries(u).sort(([m],[h])=>parseInt(m,10)-parseInt(h,10)).map(([m,h])=>h),{functions:c,function_call:d}=this.invocationParams(r),f=await this.getEstimatedTokenCountFromPrompt(e,c,d),p=await this.getNumTokensFromGenerations(l);return o.input_tokens=f,o.output_tokens=p,o.total_tokens=f+p,{generations:l,llmOutput:{estimatedTokenUsage:{promptTokens:o.input_tokens,completionTokens:o.output_tokens,totalTokens:o.total_tokens}}}}else{let s;r.response_format&&r.response_format.type==="json_schema"?s=await this.betaParsedCompletionWithRetry({...i,stream:!1,messages:a},{signal:r?.signal,...r?.options}):s=await this.completionWithRetry({...i,stream:!1,messages:a},{signal:r?.signal,...r?.options});let{completion_tokens:u,prompt_tokens:l,total_tokens:c,prompt_tokens_details:d,completion_tokens_details:f}=s?.usage??{};u&&(o.output_tokens=(o.output_tokens??0)+u),l&&(o.input_tokens=(o.input_tokens??0)+l),c&&(o.total_tokens=(o.total_tokens??0)+c),(d?.audio_tokens!==null||d?.cached_tokens!==null)&&(o.input_token_details={...d?.audio_tokens!==null&&{audio:d?.audio_tokens},...d?.cached_tokens!==null&&{cache_read:d?.cached_tokens}}),(f?.audio_tokens!==null||f?.reasoning_tokens!==null)&&(o.output_token_details={...f?.audio_tokens!==null&&{audio:f?.audio_tokens},...f?.reasoning_tokens!==null&&{reasoning:f?.reasoning_tokens}});let p=[];for(let m of s?.choices??[]){let b={text:m.message?.content??"",message:this._convertOpenAIChatCompletionMessageToBaseMessage(m.message??{role:"assistant"},s)};b.generationInfo={...m.finish_reason?{finish_reason:m.finish_reason}:{},...m.logprobs?{logprobs:m.logprobs}:{}},bi(b.message)&&(b.message.usage_metadata=o),b.message=new mn(Object.fromEntries(Object.entries(b.message).filter(([g])=>!g.startsWith("lc_")))),p.push(b)}return{generations:p,llmOutput:{tokenUsage:{promptTokens:o.input_tokens,completionTokens:o.output_tokens,totalTokens:o.total_tokens}}}}}async getEstimatedTokenCountFromPrompt(e,r,n){let o=(await this.getNumTokensFromMessages(e)).totalCount;if(r&&n!=="auto"){let i=aIt(r);o+=await this.getNumTokens(i),o+=9}return r&&e.find(i=>i._getType()==="system")&&(o-=4),n==="none"?o+=1:typeof n=="object"&&(o+=await this.getNumTokens(n.name)+4),o}async getNumTokensFromGenerations(e){return(await Promise.all(e.map(async n=>n.message.additional_kwargs?.function_call?(await this.getNumTokensFromMessages([n.message])).countPerMessage[0]:await this.getNumTokens(n.message.content)))).reduce((n,o)=>n+o,0)}async getNumTokensFromMessages(e){let r=0,n=0,o=0;this.model==="gpt-3.5-turbo-0301"?(n=4,o=-1):(n=3,o=1);let i=await Promise.all(e.map(async a=>{let s=await this.getNumTokens(a.content),u=await this.getNumTokens(IMe(a)),l=a.name!==void 0?o+await this.getNumTokens(a.name):0,c=s+n+u+l,d=a;if(d._getType()==="function"&&(c-=2),d.additional_kwargs?.function_call&&(c+=3),d?.additional_kwargs.function_call?.name&&(c+=await this.getNumTokens(d.additional_kwargs.function_call?.name)),d.additional_kwargs.function_call?.arguments)try{c+=await this.getNumTokens(JSON.stringify(JSON.parse(d.additional_kwargs.function_call?.arguments)))}catch(f){console.error("Error parsing function arguments",f,JSON.stringify(d.additional_kwargs.function_call)),c+=await this.getNumTokens(d.additional_kwargs.function_call?.arguments)}return r+=c,c}));return r+=3,{totalCount:r,countPerMessage:i}}async completionWithRetry(e,r){let n=this._getClientOptions(r);return this.caller.call(async()=>{try{return await this.client.chat.completions.create(e,n)}catch(o){throw oN(o)}})}async responseApiWithRetry(e,r){return this.caller.call(async()=>{let n=this._getClientOptions(r);try{return e.text?.format?.type==="json_schema"&&!e.stream?await this.client.responses.parse(e,n):await this.client.responses.create(e,n)}catch(o){throw oN(o)}})}async betaParsedCompletionWithRetry(e,r){let n=this._getClientOptions(r);return this.caller.call(async()=>{try{return await this.client.beta.chat.completions.parse(e,n)}catch(o){throw oN(o)}})}_getClientOptions(e){if(!this.client){let n={baseURL:this.clientConfig.baseURL},o=nN(n),i={...this.clientConfig,baseURL:o,timeout:this.timeout,maxRetries:0};i.baseURL||delete i.baseURL,this.client=new Vt(i)}return{...this.clientConfig,...e}}_llmType(){return"openai"}_combineLLMOutput(...e){return e.reduce((r,n)=>(n&&n.tokenUsage&&(r.tokenUsage.completionTokens+=n.tokenUsage.completionTokens??0,r.tokenUsage.promptTokens+=n.tokenUsage.promptTokens??0,r.tokenUsage.totalTokens+=n.tokenUsage.totalTokens??0),r),{tokenUsage:{completionTokens:0,promptTokens:0,totalTokens:0}})}withStructuredOutput(e,r){let n,o,i,a;T9r(e)?(n=e.schema,o=e.name,i=e.method,a=e.includeRaw):(n=e,o=r?.name,i=r?.method,a=r?.includeRaw);let s,u;if(r?.strict!==void 0&&i==="jsonMode")throw new Error("Argument `strict` is only supported for `method` = 'function_calling'");if(!this.model.startsWith("gpt-3")&&!this.model.startsWith("gpt-4-")&&this.model!=="gpt-4"?i===void 0&&(i="jsonSchema"):i==="jsonSchema"&&console.warn(`[WARNING]: JSON Schema is not supported for model "${this.model}". Falling back to tool calling.`),i==="jsonMode")s=this.bind({response_format:{type:"json_object"}}),nie(n)?u=hc.fromZodSchema(n):u=new gc;else if(i==="jsonSchema")if(s=this.bind({response_format:{type:"json_schema",json_schema:{name:o??"extract",description:n.description,schema:n,strict:r?.strict}}}),nie(n)){let f=hc.fromZodSchema(n);u=_f.from(p=>"parsed"in p.additional_kwargs?p.additional_kwargs.parsed:f)}else u=new gc;else{let f=o??"extract";if(nie(n)){let p=ho(n);s=this.bind({tools:[{type:"function",function:{name:f,description:p.description,parameters:p}}],tool_choice:{type:"function",function:{name:f}},...r?.strict!==void 0?{strict:r.strict}:{}}),u=new Fc({returnSingle:!0,keyName:f,zodSchema:n})}else{let p;typeof n.name=="string"&&typeof n.parameters=="object"&&n.parameters!=null?(p=n,f=n.name):(f=n.title??f,p={name:f,description:n.description??"",parameters:n}),s=this.bind({tools:[{type:"function",function:p}],tool_choice:{type:"function",function:{name:f}},...r?.strict!==void 0?{strict:r.strict}:{}}),u=new Fc({returnSingle:!0,keyName:f})}}if(!a)return s.pipe(u);let l=lo.assign({parsed:(f,p)=>u.invoke(f.raw,p)}),c=lo.assign({parsed:()=>null}),d=l.withFallbacks({fallbacks:[c]});return di.from([{raw:s},d])}};function nie(t){return typeof t?.parse=="function"}function T9r(t){return t!==void 0&&typeof t.schema=="object"}Rm();$d();var RMe=class extends EO{static lc_name(){return"DallEAPIWrapper"}constructor(e){e?.responseFormat!==void 0&&["url","b64_json"].includes(e.responseFormat)&&(e.dallEResponseFormat=e.responseFormat,e.responseFormat="content"),super(e),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"dalle_api_wrapper"}),Object.defineProperty(this,"description",{enumerable:!0,configurable:!0,writable:!0,value:"A wrapper around OpenAI DALL-E API. Useful for when you need to generate images from a text description. Input should be an image description."}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"model",{enumerable:!0,configurable:!0,writable:!0,value:"dall-e-3"}),Object.defineProperty(this,"style",{enumerable:!0,configurable:!0,writable:!0,value:"vivid"}),Object.defineProperty(this,"quality",{enumerable:!0,configurable:!0,writable:!0,value:"standard"}),Object.defineProperty(this,"n",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:"1024x1024"}),Object.defineProperty(this,"dallEResponseFormat",{enumerable:!0,configurable:!0,writable:!0,value:"url"}),Object.defineProperty(this,"user",{enumerable:!0,configurable:!0,writable:!0,value:void 0});let r=e?.apiKey??e?.openAIApiKey??ot("OPENAI_API_KEY"),n=e?.organization??ot("OPENAI_ORGANIZATION"),o={apiKey:r,organization:n,dangerouslyAllowBrowser:!0,baseUrl:e?.baseUrl};this.client=new Vt(o),this.model=e?.model??e?.modelName??this.model,this.style=e?.style??this.style,this.quality=e?.quality??this.quality,this.n=e?.n??this.n,this.size=e?.size??this.size,this.dallEResponseFormat=e?.dallEResponseFormat??this.dallEResponseFormat,this.user=e?.user}processMultipleGeneratedUrls(e){return this.dallEResponseFormat==="url"?e.flatMap(r=>r.data.flatMap(o=>o.url?{type:"image_url",image_url:o.url}:[]).filter(o=>o!==void 0&&o.type==="image_url"&&typeof o.image_url=="string"&&o.image_url!==void 0)):e.flatMap(r=>r.data.flatMap(o=>o.b64_json?{type:"image_url",image_url:{url:o.b64_json}}:[]).filter(o=>o!==void 0&&o.type==="image_url"&&typeof o.image_url=="object"&&"url"in o.image_url&&typeof o.image_url.url=="string"&&o.image_url.url!==void 0))}async _call(e){let r={model:this.model,prompt:e,n:1,size:this.size,response_format:this.dallEResponseFormat,style:this.style,quality:this.quality,user:this.user};if(this.n>1){let i=await Promise.all(Array.from({length:this.n}).map(()=>this.client.images.generate(r)));return this.processMultipleGeneratedUrls(i)}let n=await this.client.images.generate(r),o="";return this.dallEResponseFormat==="url"?[o]=n.data.map(i=>i.url).filter(i=>i!=="undefined"):[o]=n.data.map(i=>i.b64_json).filter(i=>i!=="undefined"),o}};Object.defineProperty(RMe,"toolName",{enumerable:!0,configurable:!0,writable:!0,value:"dalle_api_wrapper"});var oie=class extends I6{static lc_name(){return"ChatDeepSeek"}_llmType(){return"deepseek"}get lc_secrets(){return{apiKey:"DEEPSEEK_API_KEY"}}constructor(e){let r=e?.apiKey||ot("DEEPSEEK_API_KEY");if(!r)throw new Error('Deepseek API key not found. Please set the DEEPSEEK_API_KEY environment variable or pass the key into "apiKey" field.');super({...e,apiKey:r,configuration:{baseURL:"https://api.deepseek.com",...e?.configuration}}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","chat_models","deepseek"]})}_convertOpenAIDeltaToBaseMessageChunk(e,r,n){let o=super._convertOpenAIDeltaToBaseMessageChunk(e,r,n);return o.additional_kwargs.reasoning_content=e.reasoning_content,o}_convertOpenAIChatCompletionMessageToBaseMessage(e,r){let n=super._convertOpenAIChatCompletionMessageToBaseMessage(e,r);return n.additional_kwargs.reasoning_content=e.reasoning_content,n}withStructuredOutput(e,r){let n={...r};return n?.method===void 0&&(n.method="functionCalling"),super.withStructuredOutput(e,n)}};mc();$d();var iN="0.5.0";var fIt=!1,aN,jMe,A9r,I9r,M9r,NMe,R9r,iie,DMe,LMe,FMe,aie,kMe;function pIt(t,e={auto:!1}){if(fIt)throw new Error(`you must \`import 'groq-sdk/shims/${t.kind}'\` before importing anything else from groq-sdk`);if(aN)throw new Error(`can't \`import 'groq-sdk/shims/${t.kind}'\` after \`import 'groq-sdk/shims/${aN}'\``);fIt=e.auto,aN=t.kind,jMe=t.fetch,A9r=t.Request,I9r=t.Response,M9r=t.Headers,NMe=t.FormData,R9r=t.Blob,iie=t.File,DMe=t.ReadableStream,LMe=t.getMultipartRequestOptions,FMe=t.getDefaultAgent,aie=t.fileFromPath,kMe=t.isFsReadStream}var sie=class{constructor(e){this.body=e}get[Symbol.toStringTag](){return"MultipartBody"}};function mIt({manuallyImported:t}={}){let e=t?"You may need to use polyfills":"Add one of these imports before your first `import \u2026 from 'groq-sdk'`:\n- `import 'groq-sdk/shims/node'` (if you're running on Node)\n- `import 'groq-sdk/shims/web'` (otherwise)\n",r,n,o,i;try{r=fetch,n=Request,o=Response,i=Headers}catch(a){throw new Error(`this environment is missing the following Web Fetch API type: ${a.message}. ${e}`)}return{kind:"web",fetch:r,Request:n,Response:o,Headers:i,FormData:typeof FormData<"u"?FormData:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'FormData' is undefined. ${e}`)}},Blob:typeof Blob<"u"?Blob:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'Blob' is undefined. ${e}`)}},File:typeof File<"u"?File:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'File' is undefined. ${e}`)}},ReadableStream:typeof ReadableStream<"u"?ReadableStream:class{constructor(){throw new Error(`streaming isn't supported in this environment yet as 'ReadableStream' is undefined. ${e}`)}},getMultipartRequestOptions:async(a,s)=>({...s,body:new sie(a)}),getDefaultAgent:a=>{},fileFromPath:()=>{throw new Error("The `fileFromPath` function is only supported in Node. See the README for more details: https://www.github.com/groq/groq-typescript#file-uploads")},isFsReadStream:a=>!1}}aN||pIt(mIt(),{auto:!0});var $Me={};Zf($Me,{APIConnectionError:()=>UO,APIConnectionTimeoutError:()=>sN,APIError:()=>Pl,APIUserAbortError:()=>ZA,AuthenticationError:()=>_q,BadRequestError:()=>bq,ConflictError:()=>Sq,GroqError:()=>Ql,InternalServerError:()=>Oq,NotFoundError:()=>wq,PermissionDeniedError:()=>vq,RateLimitError:()=>Cq,UnprocessableEntityError:()=>xq});var Ql=class extends Error{},Pl=class t extends Ql{constructor(e,r,n,o){super(`${t.makeMessage(e,r,n)}`),this.status=e,this.headers=o,this.error=r}static makeMessage(e,r,n){let o=r?.message?typeof r.message=="string"?r.message:JSON.stringify(r.message):r?JSON.stringify(r):n;return e&&o?`${e} ${o}`:e?`${e} status code (no body)`:o||"(no status code or body)"}static generate(e,r,n,o){if(!e)return new UO({cause:uie(r)});let i=r;return e===400?new bq(e,i,n,o):e===401?new _q(e,i,n,o):e===403?new vq(e,i,n,o):e===404?new wq(e,i,n,o):e===409?new Sq(e,i,n,o):e===422?new xq(e,i,n,o):e===429?new Cq(e,i,n,o):e>=500?new Oq(e,i,n,o):new t(e,i,n,o)}},ZA=class extends Pl{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0),this.status=void 0}},UO=class extends Pl{constructor({message:e,cause:r}){super(void 0,void 0,e||"Connection error.",void 0),this.status=void 0,r&&(this.cause=r)}},sN=class extends UO{constructor({message:e}={}){super({message:e??"Request timed out."})}},bq=class extends Pl{constructor(){super(...arguments),this.status=400}},_q=class extends Pl{constructor(){super(...arguments),this.status=401}},vq=class extends Pl{constructor(){super(...arguments),this.status=403}},wq=class extends Pl{constructor(){super(...arguments),this.status=404}},Sq=class extends Pl{constructor(){super(...arguments),this.status=409}},xq=class extends Pl{constructor(){super(...arguments),this.status=422}},Cq=class extends Pl{constructor(){super(...arguments),this.status=429}},Oq=class extends Pl{};var lie=class t{constructor(e,r){this.iterator=e,this.controller=r}static fromSSEResponse(e,r){let n=!1,o=new BMe;async function*i(){if(!e.body)throw r.abort(),new Ql("Attempted to iterate over a response with no body");let s=new Pq,u=hIt(e.body);for await(let l of u)for(let c of s.decode(l)){let d=o.decode(c);d&&(yield d)}for(let l of s.flush()){let c=o.decode(l);c&&(yield c)}}async function*a(){if(n)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");n=!0;let s=!1;try{for await(let u of i())if(!s){if(u.data.startsWith("[DONE]")){s=!0;continue}if(u.event===null){let l;try{l=JSON.parse(u.data)}catch(c){throw console.error("Could not parse message into JSON:",u.data),console.error("From chunk:",u.raw),c}if(l&&l.error)throw new Pl(void 0,l.error,void 0,void 0);yield l}}s=!0}catch(u){if(u instanceof Error&&u.name==="AbortError")return;throw u}finally{s||r.abort()}}return new t(a,r)}static fromReadableStream(e,r){let n=!1;async function*o(){let a=new Pq,s=hIt(e);for await(let u of s)for(let l of a.decode(u))yield l;for(let u of a.flush())yield u}async function*i(){if(n)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");n=!0;let a=!1;try{for await(let s of o())a||s&&(yield JSON.parse(s));a=!0}catch(s){if(s instanceof Error&&s.name==="AbortError")return;throw s}finally{a||r.abort()}}return new t(i,r)}[Symbol.asyncIterator](){return this.iterator()}tee(){let e=[],r=[],n=this.iterator(),o=i=>({next:()=>{if(i.length===0){let a=n.next();e.push(a),r.push(a)}return i.shift()}});return[new t(()=>o(e),this.controller),new t(()=>o(r),this.controller)]}toReadableStream(){let e=this,r,n=new TextEncoder;return new DMe({async start(){r=e[Symbol.asyncIterator]()},async pull(o){try{let{value:i,done:a}=await r.next();if(a)return o.close();let s=n.encode(JSON.stringify(i)+`
`);o.enqueue(s)}catch(i){o.error(i)}},async cancel(){await r.return?.()}})}},BMe=class{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;let i={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],i}if(this.chunks.push(e),e.startsWith(":"))return null;let[r,n,o]=N9r(e,":");return o.startsWith(" ")&&(o=o.substring(1)),r==="event"?this.event=o:r==="data"&&this.data.push(o),null}},Pq=class t{constructor(){this.buffer=[],this.trailingCR=!1}decode(e){let r=this.decodeText(e);if(this.trailingCR&&(r="\r"+r,this.trailingCR=!1),r.endsWith("\r")&&(this.trailingCR=!0,r=r.slice(0,-1)),!r)return[];let n=t.NEWLINE_CHARS.has(r[r.length-1]||""),o=r.split(t.NEWLINE_REGEXP);return o.length===1&&!n?(this.buffer.push(o[0]),[]):(this.buffer.length>0&&(o=[this.buffer.join("")+o[0],...o.slice(1)],this.buffer=[]),n||(this.buffer=[o.pop()||""]),o)}decodeText(e){if(e==null)return"";if(typeof e=="string")return e;if(typeof Buffer<"u"){if(e instanceof Buffer)return e.toString();if(e instanceof Uint8Array)return Buffer.from(e).toString();throw new Ql(`Unexpected: received non-Uint8Array (${e.constructor.name}) stream chunk in an environment with a global "Buffer" defined, which this library assumes to be Node. Please report this error.`)}if(typeof TextDecoder<"u"){if(e instanceof Uint8Array||e instanceof ArrayBuffer)return this.textDecoder??(this.textDecoder=new TextDecoder("utf8")),this.textDecoder.decode(e);throw new Ql(`Unexpected: received non-Uint8Array/ArrayBuffer (${e.constructor.name}) in a web platform. Please report this error.`)}throw new Ql("Unexpected: neither Buffer nor TextDecoder are available as globals. Please report this error.")}flush(){if(!this.buffer.length&&!this.trailingCR)return[];let e=[this.buffer.join("")];return this.buffer=[],this.trailingCR=!1,e}};Pq.NEWLINE_CHARS=new Set([`
`,"\r","\v","\f","","","","\x85","\u2028","\u2029"]);Pq.NEWLINE_REGEXP=/\r\n|[\n\r\x0b\x0c\x1c\x1d\x1e\x85\u2028\u2029]/g;function N9r(t,e){let r=t.indexOf(e);return r!==-1?[t.substring(0,r),e,t.substring(r+e.length)]:[t,"",""]}function hIt(t){if(t[Symbol.asyncIterator])return t;let e=t.getReader();return{async next(){try{let r=await e.read();return r?.done&&e.releaseLock(),r}catch(r){throw e.releaseLock(),r}},async return(){let r=e.cancel();return e.releaseLock(),await r,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}var gIt=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function",yIt=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&cie(t),cie=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",D9r=t=>yIt(t)||gIt(t)||kMe(t);async function zMe(t,e,r){if(t=await t,r??(r=yIt(t)?{lastModified:t.lastModified,type:t.type}:{}),gIt(t)){let o=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()??"unknown_file"),new iie([o],e,r)}let n=await L9r(t);if(e||(e=k9r(t)??"unknown_file"),!r.type){let o=n[0]?.type;typeof o=="string"&&(r={...r,type:o})}return new iie(n,e,r)}async function L9r(t){let e=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)e.push(t);else if(cie(t))e.push(await t.arrayBuffer());else if($9r(t))for await(let r of t)e.push(r);else throw new Error(`Unexpected data type: ${typeof t}; constructor: ${t?.constructor?.name}; props: ${F9r(t)}`);return e}function F9r(t){return`[${Object.getOwnPropertyNames(t).map(r=>`"${r}"`).join(", ")}]`}function k9r(t){return qMe(t.name)||qMe(t.filename)||qMe(t.path)?.split(/[\\/]/).pop()}var qMe=t=>{if(typeof t=="string")return t;if(typeof Buffer<"u"&&t instanceof Buffer)return String(t)},$9r=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function",HMe=t=>t&&typeof t=="object"&&t.body&&t[Symbol.toStringTag]==="MultipartBody";var M6=async t=>{let e=await bIt(t.body);return LMe(e,t)},bIt=async t=>{let e=new NMe;return await Promise.all(Object.entries(t||{}).map(([r,n])=>UMe(e,r,n))),e};var UMe=async(t,e,r)=>{if(r!==void 0){if(r==null)throw new TypeError(`Received null for "${e}"; to pass null in FormData, you must use the string 'null'`);if(typeof r=="string"||typeof r=="number"||typeof r=="boolean")t.append(e,String(r));else if(D9r(r)){let n=await zMe(r);t.append(e,n)}else if(Array.isArray(r))await Promise.all(r.map(n=>UMe(t,e+"[]",n)));else if(typeof r=="object")await Promise.all(Object.entries(r).map(([n,o])=>UMe(t,`${e}[${n}]`,o)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${r} instead`)}};var q9r=function(t,e,r,n,o){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!o:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?o.call(t,r):o?o.value=r:e.set(t,r),r},U9r=function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},die;async function CIt(t){let{response:e}=t;if(t.options.stream)return Eq("response",e.status,e.url,e.headers,e.body),t.options.__streamClass?t.options.__streamClass.fromSSEResponse(e,t.controller):lie.fromSSEResponse(e,t.controller);if(e.status===204)return null;if(t.options.__binaryResponse)return e;let r=e.headers.get("content-type");if(r?.includes("application/json")||r?.includes("application/vnd.api+json")){let i=await e.json();return Eq("response",e.status,e.url,e.headers,i),i}let o=await e.text();return Eq("response",e.status,e.url,e.headers,o),o}var fie=class t extends Promise{constructor(e,r=CIt){super(n=>{n(null)}),this.responsePromise=e,this.parseResponse=r}_thenUnwrap(e){return new t(this.responsePromise,async r=>e(await this.parseResponse(r)))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){let[e,r]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:r}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(this.parseResponse)),this.parsedPromise}then(e,r){return this.parse().then(e,r)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}},pie=class{constructor({baseURL:e,maxRetries:r=2,timeout:n=6e4,httpAgent:o,fetch:i}){this.baseURL=e,this.maxRetries=VMe("maxRetries",r),this.timeout=VMe("timeout",n),this.httpAgent=o,this.fetch=i??jMe}authHeaders(e){return{}}defaultHeaders(e){return{Accept:"application/json","Content-Type":"application/json","User-Agent":this.getUserAgent(),...W9r(),...this.authHeaders(e)}}validateHeaders(e,r){}defaultIdempotencyKey(){return`stainless-node-retry-${Q9r()}`}get(e,r){return this.methodRequest("get",e,r)}post(e,r){return this.methodRequest("post",e,r)}patch(e,r){return this.methodRequest("patch",e,r)}put(e,r){return this.methodRequest("put",e,r)}delete(e,r){return this.methodRequest("delete",e,r)}methodRequest(e,r,n){return this.request(Promise.resolve(n).then(async o=>{let i=o&&cie(o?.body)?new DataView(await o.body.arrayBuffer()):o?.body instanceof DataView?o.body:o?.body instanceof ArrayBuffer?new DataView(o.body):o&&ArrayBuffer.isView(o?.body)?new DataView(o.body.buffer):o?.body;return{method:e,path:r,...o,body:i}}))}getAPIList(e,r,n){return this.requestAPIList(r,{method:"get",path:e,...n})}calculateContentLength(e){if(typeof e=="string"){if(typeof Buffer<"u")return Buffer.byteLength(e,"utf8").toString();if(typeof TextEncoder<"u")return new TextEncoder().encode(e).length.toString()}else if(ArrayBuffer.isView(e))return e.byteLength.toString();return null}buildRequest(e){let{method:r,path:n,query:o,headers:i={}}=e,a=ArrayBuffer.isView(e.body)||e.__binaryRequest&&typeof e.body=="string"?e.body:HMe(e.body)?e.body.body:e.body?JSON.stringify(e.body,null,2):null,s=this.calculateContentLength(a),u=this.buildURL(n,o);"timeout"in e&&VMe("timeout",e.timeout);let l=e.timeout??this.timeout,c=e.httpAgent??this.httpAgent??FMe(u),d=l+1e3;typeof c?.options?.timeout=="number"&&d>(c.options.timeout??0)&&(c.options.timeout=d),this.idempotencyHeader&&r!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),i[this.idempotencyHeader]=e.idempotencyKey);let f=this.buildHeaders({options:e,headers:i,contentLength:s});return{req:{method:r,...a&&{body:a},headers:f,...c&&{agent:c},signal:e.signal??null},url:u,timeout:l}}buildHeaders({options:e,headers:r,contentLength:n}){let o={};n&&(o["content-length"]=n);let i=this.defaultHeaders(e);return xIt(o,i),xIt(o,r),HMe(e.body)&&aN!=="node"&&delete o["content-type"],this.validateHeaders(o,r),o}async prepareOptions(e){}async prepareRequest(e,{url:r,options:n}){}parseHeaders(e){return e?Symbol.iterator in e?Object.fromEntries(Array.from(e).map(r=>[...r])):{...e}:{}}makeStatusError(e,r,n,o){return Pl.generate(e,r,n,o)}request(e,r=null){return new fie(this.makeRequest(e,r))}async makeRequest(e,r){let n=await e;r==null&&(r=n.maxRetries??this.maxRetries),await this.prepareOptions(n);let{req:o,url:i,timeout:a}=this.buildRequest(n);if(await this.prepareRequest(o,{url:i,options:n}),Eq("request",i,n,o.headers),n.signal?.aborted)throw new ZA;let s=new AbortController,u=await this.fetchWithTimeout(i,o,a,s).catch(uie);if(u instanceof Error){if(n.signal?.aborted)throw new ZA;if(r)return this.retryRequest(n,r);throw u.name==="AbortError"?new sN:new UO({cause:u})}let l=z9r(u.headers);if(!u.ok){if(r&&this.shouldRetry(u)){let h=`retrying, ${r} attempts remaining`;return Eq(`response (error; ${h})`,u.status,i,l),this.retryRequest(n,r,l)}let c=await u.text().catch(h=>uie(h).message),d=K9r(c),f=d?void 0:c;throw Eq(`response (error; ${r?"(error; no more retries left)":"(error; not retryable)"})`,u.status,i,l,f),this.makeStatusError(u.status,d,f,l)}return{response:u,options:n,controller:s}}requestAPIList(e,r){let n=this.makeRequest(r,null);return new WMe(this,n,e)}buildURL(e,r){let n=J9r(e)?new URL(e):new URL(this.baseURL+(this.baseURL.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),o=this.defaultQuery();return Z9r(o)||(r={...o,...r}),typeof r=="object"&&r&&!Array.isArray(r)&&(n.search=this.stringifyQuery(r)),n.toString()}stringifyQuery(e){return Object.entries(e).filter(([r,n])=>typeof n<"u").map(([r,n])=>{if(typeof n=="string"||typeof n=="number"||typeof n=="boolean")return`${encodeURIComponent(r)}=${encodeURIComponent(n)}`;if(n===null)return`${encodeURIComponent(r)}=`;throw new Ql(`Cannot stringify type ${typeof n}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}async fetchWithTimeout(e,r,n,o){let{signal:i,...a}=r||{};i&&i.addEventListener("abort",()=>o.abort());let s=setTimeout(()=>o.abort(),n);return this.getRequestClient().fetch.call(void 0,e,{signal:o.signal,...a}).finally(()=>{clearTimeout(s)})}getRequestClient(){return{fetch:this.fetch}}shouldRetry(e){let r=e.headers.get("x-should-retry");return r==="true"?!0:r==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,r,n){let o,i=n?.["retry-after-ms"];if(i){let s=parseFloat(i);Number.isNaN(s)||(o=s)}let a=n?.["retry-after"];if(a&&!o){let s=parseFloat(a);Number.isNaN(s)?o=Date.parse(a)-Date.now():o=s*1e3}if(!(o&&0<=o&&o<60*1e3)){let s=e.maxRetries??this.maxRetries;o=this.calculateDefaultRetryTimeoutMillis(r,s)}return await Y9r(o),this.makeRequest(e,r-1)}calculateDefaultRetryTimeoutMillis(e,r){let i=r-e,a=Math.min(.5*Math.pow(2,i),8),s=1-Math.random()*.25;return a*s*1e3}getUserAgent(){return`${this.constructor.name}/JS ${iN}`}},_It=class{constructor(e,r,n,o){die.set(this,void 0),q9r(this,die,e,"f"),this.options=o,this.response=r,this.body=n}hasNextPage(){return this.getPaginatedItems().length?this.nextPageInfo()!=null:!1}async getNextPage(){let e=this.nextPageInfo();if(!e)throw new Ql("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");let r={...this.options};if("params"in e&&typeof r.query=="object")r.query={...r.query,...e.params};else if("url"in e){let n=[...Object.entries(r.query||{}),...e.url.searchParams.entries()];for(let[o,i]of n)e.url.searchParams.set(o,i);r.query=void 0,r.path=e.url.toString()}return await U9r(this,die,"f").requestAPIList(this.constructor,r)}async*iterPages(){let e=this;for(yield e;e.hasNextPage();)e=await e.getNextPage(),yield e}async*[(die=new WeakMap,Symbol.asyncIterator)](){for await(let e of this.iterPages())for(let r of e.getPaginatedItems())yield r}},WMe=class extends fie{constructor(e,r,n){super(r,async o=>new n(e,o.response,await CIt(o),o.options))}async*[Symbol.asyncIterator](){let e=await this;for await(let r of e)yield r}},z9r=t=>new Proxy(Object.fromEntries(t.entries()),{get(e,r){let n=r.toString();return e[n.toLowerCase()]||e[n]}});var H9r=()=>{if(typeof Deno<"u"&&Deno.build!=null)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":iN,"X-Stainless-OS":wIt(Deno.build.os),"X-Stainless-Arch":vIt(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:Deno.version?.deno??"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":iN,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":process.version};if(Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":iN,"X-Stainless-OS":wIt(process.platform),"X-Stainless-Arch":vIt(process.arch),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":process.version};let t=V9r();return t?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":iN,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${t.browser}`,"X-Stainless-Runtime-Version":t.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":iN,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function V9r(){if(typeof navigator>"u"||!navigator)return null;let t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(let{key:e,pattern:r}of t){let n=r.exec(navigator.userAgent);if(n){let o=n[1]||0,i=n[2]||0,a=n[3]||0;return{browser:e,version:`${o}.${i}.${a}`}}}return null}var vIt=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",wIt=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown"),SIt,W9r=()=>SIt??(SIt=H9r()),K9r=t=>{try{return JSON.parse(t)}catch{return}},G9r=new RegExp("^(?:[a-z]+:)?//","i"),J9r=t=>G9r.test(t),Y9r=t=>new Promise(e=>setTimeout(e,t)),VMe=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new Ql(`${t} must be an integer`);if(e<0)throw new Ql(`${t} must be a positive integer`);return e},uie=t=>t instanceof Error?t:new Error(t);var KMe=t=>{if(typeof process<"u")return process.env?.[t]?.trim()??void 0;if(typeof Deno<"u")return Deno.env?.get?.(t)?.trim()};function Z9r(t){if(!t)return!0;for(let e in t)return!1;return!0}function X9r(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function xIt(t,e){for(let r in e){if(!X9r(e,r))continue;let n=r.toLowerCase();if(!n)continue;let o=e[r];o===null?delete t[n]:o!==void 0&&(t[n]=o)}}function Eq(t,...e){typeof process<"u"&&process?.env?.DEBUG==="true"&&console.log(`Groq:DEBUG:${t}`,...e)}var Q9r=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{let e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)}),OIt=()=>typeof window<"u"&&typeof window.document<"u"&&typeof navigator<"u";var ec=class{constructor(e){this._client=e}};var uN=class extends ec{create(e,r){return this._client.post("/openai/v1/audio/transcriptions",M6({body:e,...r}))}};uN||(uN={});var lN=class extends ec{create(e,r){return this._client.post("/openai/v1/audio/translations",M6({body:e,...r}))}};lN||(lN={});var XA=class extends ec{constructor(){super(...arguments),this.transcriptions=new uN(this._client),this.translations=new lN(this._client)}};(function(t){t.Transcriptions=uN,t.Translations=lN})(XA||(XA={}));var cN=class extends ec{create(e,r){return this._client.post("/openai/v1/chat/completions",{body:e,...r,stream:e.stream??!1})}};cN||(cN={});var QA=class extends ec{constructor(){super(...arguments),this.completions=new cN(this._client)}};(function(t){t.Completions=cN})(QA||(QA={}));var eI=class extends ec{};eI||(eI={});var tI=class extends ec{create(e,r){return this._client.post("/openai/v1/embeddings",{body:e,...r})}};tI||(tI={});var rI=class extends ec{retrieve(e,r){return this._client.get(`/openai/v1/models/${e}`,r)}list(e){return this._client.get("/openai/v1/models",e)}delete(e,r){return this._client.delete(`/openai/v1/models/${e}`,r)}};rI||(rI={});var PIt,cs=class extends pie{constructor({baseURL:e=KMe("GROQ_BASE_URL"),apiKey:r=KMe("GROQ_API_KEY"),...n}={}){if(r===void 0)throw new Ql("The GROQ_API_KEY environment variable is missing or empty; either provide it, or instantiate the Groq client with an apiKey option, like new Groq({ apiKey: 'My API Key' }).");let o={apiKey:r,...n,baseURL:e||"https://api.groq.com"};if(!o.dangerouslyAllowBrowser&&OIt())throw new Ql(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new Groq({ apiKey, dangerouslyAllowBrowser: true })`);super({baseURL:o.baseURL,timeout:o.timeout??6e4,httpAgent:o.httpAgent,maxRetries:o.maxRetries,fetch:o.fetch}),this.completions=new eI(this),this.chat=new QA(this),this.embeddings=new tI(this),this.audio=new XA(this),this.models=new rI(this),this._options=o,this.apiKey=r}defaultQuery(){return this._options.defaultQuery}defaultHeaders(e){return{...super.defaultHeaders(e),...this._options.defaultHeaders}}authHeaders(e){return{Authorization:`Bearer ${this.apiKey}`}}};PIt=cs;cs.Groq=PIt;cs.GroqError=Ql;cs.APIError=Pl;cs.APIConnectionError=UO;cs.APIConnectionTimeoutError=sN;cs.APIUserAbortError=ZA;cs.NotFoundError=wq;cs.ConflictError=Sq;cs.RateLimitError=Cq;cs.BadRequestError=bq;cs.AuthenticationError=_q;cs.InternalServerError=Oq;cs.PermissionDeniedError=vq;cs.UnprocessableEntityError=xq;cs.toFile=zMe;cs.fileFromPath=aie;var{GroqError:gVo,APIError:yVo,APIConnectionError:bVo,APIConnectionTimeoutError:_Vo,APIUserAbortError:vVo,NotFoundError:wVo,ConflictError:SVo,RateLimitError:xVo,BadRequestError:CVo,AuthenticationError:OVo,InternalServerError:PVo,PermissionDeniedError:EVo,UnprocessableEntityError:TVo}=$Me;(function(t){t.Completions=eI,t.Chat=QA,t.Embeddings=tI,t.Audio=XA,t.Models=rI})(cs||(cs={}));var EIt=cs;um();Yg();function iKr(t){let e=t._getType();switch(e){case"system":return"system";case"ai":return"assistant";case"human":return"user";case"function":return"function";case"tool":return"tool";default:throw new Error(`Unknown message type: ${e}`)}}function TIt(t){return t.map(e=>{if(typeof e.content!="string")throw new Error("Non string message content not supported");let r={role:iKr(e),content:e.content,name:e.name,function_call:e.additional_kwargs.function_call,tool_calls:e.additional_kwargs.tool_calls,tool_call_id:e.tool_call_id};return bi(e)&&e.tool_calls?.length?r.tool_calls=e.tool_calls.map(ox):(e.additional_kwargs.tool_calls!=null&&(r.tool_calls=e.additional_kwargs.tool_calls),e.tool_call_id!=null&&(r.tool_call_id=e.tool_call_id)),r})}function aKr(t,e){let r=t.tool_calls;switch(t.role){case"assistant":{let n=[],o=[];for(let i of r??[])try{n.push(Lp(i,{returnId:!0}))}catch(a){o.push(Fm(i,a.message))}return new mn({content:t.content||"",additional_kwargs:{tool_calls:r},tool_calls:n,invalid_tool_calls:o,usage_metadata:e})}default:return new gs(t.content||"",t.role??"unknown")}}function sKr(t,e){if(t?.length)return t.map(r=>({id:r.id,name:r.function?.name,args:r.function?.arguments,type:"tool_call_chunk",index:e}))}function uKr(t,e,r){let{role:n}=t,o=t.content??"",i;t.function_call?i={function_call:t.function_call}:t.tool_calls?i={tool_calls:t.tool_calls}:i={};let a,s;if(r?.usage&&(a={input_tokens:r.usage.prompt_tokens,output_tokens:r.usage.completion_tokens,total_tokens:r.usage.total_tokens},s=r.id),n==="user")return{message:new gf({content:o})};if(n==="assistant"){let u=sKr(t.tool_calls,e);return{message:new cr({content:o,additional_kwargs:i,tool_call_chunks:u?u.map(l=>({type:l.type,args:l.args,index:l.index})):void 0,usage_metadata:a,id:s}),toolCallData:u?u.map(l=>({id:l.id??"",name:l.name??"",index:l.index??e,type:"tool_call_chunk"})):void 0}}else return n==="system"?{message:new bd({content:o})}:{message:new hf({content:o,role:n})}}var mie=class extends Bs{static lc_name(){return"ChatGroq"}_llmType(){return"groq"}get lc_secrets(){return{apiKey:"GROQ_API_KEY"}}constructor(e){super(e??{}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","chat_models","groq"]}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"modelName",{enumerable:!0,configurable:!0,writable:!0,value:"mixtral-8x7b-32768"}),Object.defineProperty(this,"model",{enumerable:!0,configurable:!0,writable:!0,value:"mixtral-8x7b-32768"}),Object.defineProperty(this,"temperature",{enumerable:!0,configurable:!0,writable:!0,value:.7}),Object.defineProperty(this,"stop",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"stopSequences",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"maxTokens",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"streaming",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"apiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0});let r=e?.apiKey||ot("GROQ_API_KEY");if(!r)throw new Error('Groq API key not found. Please set the GROQ_API_KEY environment variable or provide the key into "apiKey"');this.client=new EIt({apiKey:r,dangerouslyAllowBrowser:!0}),this.apiKey=r,this.temperature=e?.temperature??this.temperature,this.modelName=e?.model??e?.modelName??this.model,this.model=this.modelName,this.streaming=e?.streaming??this.streaming,this.stop=e?.stopSequences??(typeof e?.stop=="string"?[e.stop]:e?.stop)??[],this.stopSequences=this.stop,this.maxTokens=e?.maxTokens}getLsParams(e){let r=this.invocationParams(e);return{ls_provider:"groq",ls_model_name:this.model,ls_model_type:"chat",ls_temperature:r.temperature??this.temperature,ls_max_tokens:r.max_tokens??this.maxTokens,ls_stop:e.stop}}async completionWithRetry(e,r){return this.caller.call(async()=>this.client.chat.completions.create(e,r))}invocationParams(e){let r=super.invocationParams(e);return e.tool_choice!==void 0&&(r.tool_choice=e.tool_choice),e.tools!==void 0&&(r.tools=e.tools),e.response_format!==void 0&&(r.response_format=e.response_format),{...r,stop:e.stop??this.stopSequences,model:this.model,temperature:this.temperature,max_tokens:this.maxTokens}}bindTools(e,r){return this.bind({tools:e.map(n=>VS(n)),...r})}async*_streamResponseChunks(e,r,n){let o=this.invocationParams(r),i=TIt(e),a=await this.completionWithRetry({...o,messages:i,stream:!0},{signal:r?.signal,headers:r?.headers}),s="",u=[],l;for await(let c of a){l=c;let d=c?.choices[0];if(!d)continue;d.delta?.role&&(s=d.delta.role);let{message:f,toolCallData:p}=uKr({...d.delta,role:s},d.index,c.x_groq);if(p){let h=p.filter(b=>u.every(g=>g.id!==b.id));u.push(...h),yield new Ln({message:new cr({content:"",tool_call_chunks:h}),text:""})}let m=new Ln({message:f,text:d.delta.content??"",generationInfo:{finishReason:d.finish_reason}});yield m,n?.handleLLMNewToken(m.text??"")}if(l&&("choices"in l&&delete l.choices,yield new Ln({message:new cr({content:"",response_metadata:l}),text:""})),r.signal?.aborted)throw new Error("AbortError")}async _generate(e,r,n){if(this.streaming){let o={},i=this._streamResponseChunks(e,r,n),a={};for await(let u of i){let l=u.generationInfo?.completion??0;a[l]===void 0?a[l]=u:a[l]=a[l].concat(u)}return{generations:Object.entries(a).sort(([u],[l])=>parseInt(u,10)-parseInt(l,10)).map(([u,l])=>l),llmOutput:{estimatedTokenUsage:o}}}else return this._generateNonStreaming(e,r,n)}async _generateNonStreaming(e,r,n){let o={},i=this.invocationParams(r),a=TIt(e),s=await this.completionWithRetry({...i,stream:!1,messages:a},{signal:r?.signal,headers:r?.headers});if("usage"in s&&s.usage){let{completion_tokens:l,prompt_tokens:c,total_tokens:d}=s.usage;l&&(o.completionTokens=(o.completionTokens??0)+l),c&&(o.promptTokens=(o.promptTokens??0)+c),d&&(o.totalTokens=(o.totalTokens??0)+d)}let u=[];if("choices"in s&&s.choices)for(let l of s.choices){let c=l.message?.content??"",d;o.totalTokens!==void 0&&(d={input_tokens:o.promptTokens??0,output_tokens:o.completionTokens??0,total_tokens:o.totalTokens});let f={text:c,message:aKr(l.message??{role:"assistant"},d)};f.generationInfo={...l.finish_reason?{finish_reason:l.finish_reason}:{},...l.logprobs?{logprobs:l.logprobs}:{}},u.push(f)}return{generations:u,llmOutput:{tokenUsage:o}}}withStructuredOutput(e,r){let n=e,o=r?.name,i=r?.method,a=r?.includeRaw,s=o??"extract",u,l;if(i==="jsonMode")l=this.bind({response_format:{type:"json_object"}}),$s(n)?u=hc.fromZodSchema(n):u=new gc;else if($s(n)){let p=ho(n);l=this.bind({tools:[{type:"function",function:{name:s,description:p.description,parameters:p}}],tool_choice:{type:"function",function:{name:s}}}),u=new Fc({returnSingle:!0,keyName:s,zodSchema:n})}else{let p;typeof n.name=="string"&&typeof n.parameters=="object"&&n.parameters!=null?(p=n,s=n.name):(s=n.title??s,p={name:s,description:n.description??"",parameters:n}),l=this.bind({tools:[{type:"function",function:p}],tool_choice:{type:"function",function:{name:s}}}),u=new Fc({returnSingle:!0,keyName:s})}if(!a)return l.pipe(u).withConfig({runName:"ChatGroqStructuredOutput"});let c=lo.assign({parsed:(p,m)=>u.invoke(p.raw,m)}),d=lo.assign({parsed:()=>null}),f=c.withFallbacks({fallbacks:[d]});return di.from([{raw:l},f]).withConfig({runName:"ChatGroqStructuredOutput"})}};var qc=[];for(hie=0;hie<256;++hie)qc.push((hie+256).toString(16).slice(1));var hie;function AIt(t,e=0){return(qc[t[e+0]]+qc[t[e+1]]+qc[t[e+2]]+qc[t[e+3]]+"-"+qc[t[e+4]]+qc[t[e+5]]+"-"+qc[t[e+6]]+qc[t[e+7]]+"-"+qc[t[e+8]]+qc[t[e+9]]+"-"+qc[t[e+10]]+qc[t[e+11]]+qc[t[e+12]]+qc[t[e+13]]+qc[t[e+14]]+qc[t[e+15]]).toLowerCase()}var gie,lKr=new Uint8Array(16);function GMe(){if(!gie&&(gie=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!gie))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return gie(lKr)}var cKr=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),JMe={randomUUID:cKr};function dKr(t,e,r){if(JMe.randomUUID&&!e&&!t)return JMe.randomUUID();t=t||{};var n=t.random||(t.rng||GMe)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){r=r||0;for(var o=0;o<16;++o)e[r+o]=n[o];return e}return AIt(n)}var yie=dKr;var $$t=F(D$t(),1),B$t=F(U6(),1);$d();gL();Yg();um();mc();var fhn=/^[a-zA-Z0-9]{9}$/;function phn(t){return fhn.test(t)}function mhn(t){let e=t,r="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";if(e===0)return r[0];let n=[],o=r.length;for(;e;)n.push(r[e%o]),e=Math.floor(e/o);return n.reverse().join("")}function hhn(t){let e=0;for(let r=0;r<t.length;r+=1){let n=t.charCodeAt(r);e=(e<<5)-e+n,e&=e}return Math.abs(e)}function Nje(t){if(phn(t))return t;{let e=hhn(t),r=mhn(e);return r.length>=9?r.slice(0,9):r.padStart(9,"0")}}function Dje(t){return t?typeof t=="string"?t:t.map(e=>{if(e.type==="image_url"){if(typeof e.imageUrl!="string"&&e.imageUrl?.detail){let{detail:r}=e.imageUrl;if(r!=="high"&&r!=="auto"&&r!=="low")return{type:e.type,image_url:{url:e.imageUrl.url}}}return{type:e.type,image_url:e.imageUrl}}return e}):""}function L$t(t){let e=o=>{switch(o){case"human":return"user";case"ai":return"assistant";case"system":return"system";case"tool":return"tool";case"function":return"assistant";default:throw new Error(`Unknown message type: ${o}`)}},r=(o,i)=>{let a=(s,u)=>{if(s.type==="image_url"&&(u==="user"||u==="assistant"))return{type:s.type,imageUrl:s?.image_url};if(s.type==="text")return{type:s.type,text:s?.text};throw new Error(`ChatMistralAI only supports messages of "image_url" for roles "user" and "assistant", and "text" for all others.

Received: ${JSON.stringify(o,null,2)}`)};if(typeof o=="string")return o;if(Array.isArray(o)){let s=e(i),u=[];return o.forEach(l=>{if(l.type==="text"||l.type==="image_url")u.push(a(l,s));else throw new Error('Mistral only supports types "text" or "image_url" for complex message types.')}),u}throw new Error(`Message content must be a string or an array.

Received: ${JSON.stringify(o,null,2)}`)},n=o=>{if(bi(o)&&o.tool_calls?.length)return o.tool_calls.map(i=>({...i,id:Nje(i.id??"")})).map(ox)};return t.map(o=>{let i=n(o),a=r(o.content,o.getType());return"tool_call_id"in o&&typeof o.tool_call_id=="string"?{role:e(o.getType()),content:a,name:o.name,toolCallId:Nje(o.tool_call_id)}:bi(o)?i===void 0?{role:e(o.getType()),content:a}:{role:e(o.getType()),toolCalls:i}:{role:e(o.getType()),content:a}})}function ghn(t,e){let{message:r}=t;if(r===void 0)throw new Error("No message found in response");let n=[];"toolCalls"in r&&Array.isArray(r.toolCalls)&&(n=r.toolCalls);let o=Dje(r.content);switch(r.role){case"assistant":{let i=[],a=[];for(let s of n)try{let u=Lp(s,{returnId:!0});i.push({...u,id:u.id??yie().replace(/-/g,"")})}catch(u){a.push(Fm(s,u.message))}return new mn({content:o,tool_calls:i,invalid_tool_calls:a,additional_kwargs:{},usage_metadata:e?{input_tokens:e.promptTokens,output_tokens:e.completionTokens,total_tokens:e.totalTokens}:void 0})}default:return new ys({content:o})}}function yhn(t,e){if(!t.content&&!t.toolCalls)return e?new cr({content:"",usage_metadata:e?{input_tokens:e.promptTokens,output_tokens:e.completionTokens,total_tokens:e.totalTokens}:void 0}):null;let r=t.toolCalls?.length?t.toolCalls?.map((s,u)=>({...s,index:u,id:s.id??yie().replace(/-/g,""),type:"function"})):void 0,n="assistant";t.role&&(n=t.role);let o=Dje(t.content),i,a=[];if(r!==void 0)for(let s of r){let u=s.function?.arguments,l=u===void 0||typeof u=="string"?u:JSON.stringify(u);a.push({name:s.function?.name,args:l,id:s.id,index:s.index,type:"tool_call_chunk"})}else i={};return n==="user"?new gf({content:o}):n==="assistant"?new cr({content:o,tool_call_chunks:a,additional_kwargs:i,usage_metadata:e?{input_tokens:e.promptTokens,output_tokens:e.completionTokens,total_tokens:e.totalTokens}:void 0}):n==="tool"?new ph({content:o,additional_kwargs:i,tool_call_id:r?.[0].id??""}):n==="function"?new nm({content:o,additional_kwargs:i}):new hf({content:o,role:n})}function F$t(t){return t.map(e=>{if("function"in e)return e;let r=e.description??`Tool: ${e.name}`;return{type:"function",function:{name:e.name,description:r,parameters:ho(e.schema)}}})}var xue=class extends Bs{static lc_name(){return"ChatMistralAI"}constructor(e){super(e??{}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","chat_models","mistralai"]}),Object.defineProperty(this,"model",{enumerable:!0,configurable:!0,writable:!0,value:"mistral-small-latest"}),Object.defineProperty(this,"apiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"endpoint",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"serverURL",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"temperature",{enumerable:!0,configurable:!0,writable:!0,value:.7}),Object.defineProperty(this,"streaming",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"topP",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"maxTokens",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"safeMode",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"safePrompt",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"randomSeed",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"seed",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"maxRetries",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"streamUsage",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"beforeRequestHooks",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"requestErrorHooks",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"responseHooks",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"httpClient",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"presencePenalty",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"frequencyPenalty",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"numCompletions",{enumerable:!0,configurable:!0,writable:!0,value:void 0});let r=e?.apiKey??ot("MISTRAL_API_KEY");if(!r)throw new Error("API key MISTRAL_API_KEY is missing for MistralAI, but it is required.");this.apiKey=r,this.streaming=e?.streaming??this.streaming,this.serverURL=e?.serverURL??this.serverURL,this.temperature=e?.temperature??this.temperature,this.topP=e?.topP??this.topP,this.maxTokens=e?.maxTokens??this.maxTokens,this.safePrompt=e?.safePrompt??this.safePrompt,this.randomSeed=e?.seed??e?.randomSeed??this.seed,this.seed=this.randomSeed,this.maxRetries=e?.maxRetries,this.httpClient=e?.httpClient,this.model=e?.model??e?.modelName??this.model,this.streamUsage=e?.streamUsage??this.streamUsage,this.beforeRequestHooks=e?.beforeRequestHooks??this.beforeRequestHooks,this.requestErrorHooks=e?.requestErrorHooks??this.requestErrorHooks,this.responseHooks=e?.responseHooks??this.responseHooks,this.presencePenalty=e?.presencePenalty??this.presencePenalty,this.frequencyPenalty=e?.frequencyPenalty??this.frequencyPenalty,this.numCompletions=e?.numCompletions??this.numCompletions,this.addAllHooksToHttpClient()}get lc_secrets(){return{apiKey:"MISTRAL_API_KEY"}}get lc_aliases(){return{apiKey:"mistral_api_key"}}getLsParams(e){let r=this.invocationParams(e);return{ls_provider:"mistral",ls_model_name:this.model,ls_model_type:"chat",ls_temperature:r.temperature??void 0,ls_max_tokens:r.maxTokens??void 0}}_llmType(){return"mistral_ai"}invocationParams(e){let{response_format:r,tools:n,tool_choice:o}=e??{},i=n?.length?F$t(n):void 0;return{model:this.model,tools:i,temperature:this.temperature,maxTokens:this.maxTokens,topP:this.topP,randomSeed:this.seed,safePrompt:this.safePrompt,toolChoice:o,responseFormat:r,presencePenalty:this.presencePenalty,frequencyPenalty:this.frequencyPenalty,n:this.numCompletions}}bindTools(e,r){return this.bind({tools:F$t(e),...r})}async completionWithRetry(e,r){let n=new im({maxRetries:this.maxRetries}),o=new $$t.Mistral({apiKey:this.apiKey,serverURL:this.serverURL,...this.httpClient?{httpClient:this.httpClient}:{}});return n.call(async()=>{try{let i;return r?i=await o.chat.stream(e):i=await o.chat.complete(e),i}catch(i){throw(i.message?.includes("status: 400")||i.message?.toLowerCase().includes("status 400")||i.message?.includes("validation failed"))&&(i.status=400),i}})}async _generate(e,r,n){let o={},i=this.invocationParams(r),a=L$t(e),s={...i,messages:a},u=r.signal??!!r.timeout;if(this.streaming||u){let m=this._streamResponseChunks(e,r,n),h={};for await(let g of m){let y=g.generationInfo?.completion??0;h[y]===void 0?h[y]=g:h[y]=h[y].concat(g)}return{generations:Object.entries(h).sort(([g],[y])=>parseInt(g,10)-parseInt(y,10)).map(([g,y])=>y),llmOutput:{estimatedTokenUsage:o}}}let l=await this.completionWithRetry(s,!1),{completionTokens:c,promptTokens:d,totalTokens:f}=l?.usage??{};c&&(o.completionTokens=(o.completionTokens??0)+c),d&&(o.promptTokens=(o.promptTokens??0)+d),f&&(o.totalTokens=(o.totalTokens??0)+f);let p=[];for(let m of l?.choices??[]){if("delta"in m)throw new Error("Delta not supported in non-streaming mode.");if(!("message"in m))throw new Error("No message found in the choice.");let h=m.message?.content??"";Array.isArray(h)&&(h=h[0].type==="text"?h[0].text:"");let b={text:h,message:ghn(m,l?.usage)};m.finishReason&&(b.generationInfo={finishReason:m.finishReason}),p.push(b)}return{generations:p,llmOutput:{tokenUsage:o}}}async*_streamResponseChunks(e,r,n){let o=L$t(e),a={...this.invocationParams(r),messages:o},s=await this.completionWithRetry(a,!0);for await(let{data:u}of s){if(r.signal?.aborted)throw new Error("AbortError");let l=u?.choices[0];if(!l||!("delta"in l))continue;let{delta:c}=l;if(!c)continue;let d={prompt:0,completion:l.index??0},f=this.streamUsage||r.streamUsage,p=yhn(c,f?u.usage:null);if(p===null)continue;let m=c.content??"";Array.isArray(m)&&(m=m[0].type==="text"?m[0].text:"");let h=new Ln({message:p,text:m,generationInfo:d});yield h,n?.handleLLMNewToken(h.text??"",d,void 0,void 0,void 0,{chunk:h})}}addAllHooksToHttpClient(){try{if(this.removeAllHooksFromHttpClient(),[this.beforeRequestHooks,this.requestErrorHooks,this.responseHooks].some(r=>r&&r.length>0)&&!this.httpClient&&(this.httpClient=new B$t.HTTPClient),this.beforeRequestHooks)for(let r of this.beforeRequestHooks)this.httpClient?.addHook("beforeRequest",r);if(this.requestErrorHooks)for(let r of this.requestErrorHooks)this.httpClient?.addHook("requestError",r);if(this.responseHooks)for(let r of this.responseHooks)this.httpClient?.addHook("response",r)}catch{throw new Error("Error in adding all hooks")}}removeAllHooksFromHttpClient(){try{if(this.beforeRequestHooks)for(let e of this.beforeRequestHooks)this.httpClient?.removeHook("beforeRequest",e);if(this.requestErrorHooks)for(let e of this.requestErrorHooks)this.httpClient?.removeHook("requestError",e);if(this.responseHooks)for(let e of this.responseHooks)this.httpClient?.removeHook("response",e)}catch{throw new Error("Error in removing hooks")}}removeHookFromHttpClient(e){try{this.httpClient?.removeHook("beforeRequest",e),this.httpClient?.removeHook("requestError",e),this.httpClient?.removeHook("response",e)}catch{throw new Error("Error in removing hook")}}_combineLLMOutput(){return[]}withStructuredOutput(e,r){let n=e,o=r?.name,i=r?.method,a=r?.includeRaw,s,u;if(i==="jsonMode")s=this.bind({response_format:{type:"json_object"}}),k$t(n)?u=hc.fromZodSchema(n):u=new gc;else{let f=o??"extract";if(k$t(n)){let p=ho(n);s=this.bind({tools:[{type:"function",function:{name:f,description:p.description,parameters:p}}],tool_choice:"any"}),u=new Fc({returnSingle:!0,keyName:f,zodSchema:n})}else{let p;typeof n.name=="string"&&typeof n.parameters=="object"&&n.parameters!=null?(p=n,f=n.name):p={name:f,description:n.description??"",parameters:n},s=this.bind({tools:[{type:"function",function:p}],tool_choice:"any"}),u=new Fc({returnSingle:!0,keyName:f})}}if(!a)return s.pipe(u);let l=lo.assign({parsed:(f,p)=>u.invoke(f.raw,p)}),c=lo.assign({parsed:()=>null}),d=l.withFallbacks({fallbacks:[c]});return di.from([{raw:s},d])}};function k$t(t){return typeof t?.parse=="function"}$d();$d();Rm();um();Yg();mc();function UN(t){let{azureOpenAIApiDeploymentName:e,azureOpenAIApiInstanceName:r,azureOpenAIApiKey:n,azureOpenAIBasePath:o,baseURL:i,azureADTokenProvider:a,azureOpenAIEndpoint:s}=t;if((n||a)&&o&&e)return`${o}/${e}`;if((n||a)&&s&&e)return`${s}/openai/deployments/${e}`;if(n||a){if(!r)throw new Error("azureOpenAIApiInstanceName is required when using azureOpenAIApiKey");if(!e)throw new Error("azureOpenAIApiDeploymentName is a required parameter when using azureOpenAIApiKey");return`https://${r}.openai.azure.com/openai/deployments/${e}`}return i}mc();function _5(t,e){return t.lc_error_code=e,t.message=`${t.message}

Troubleshooting URL: https://js.langchain.com/docs/troubleshooting/errors/${e}/
`,t}function zN(t){let e;return t.constructor.name===Ff.name?(e=new Error(t.message),e.name="TimeoutError"):t.constructor.name===Ai.name?(e=new Error(t.message),e.name="AbortError"):t.status===400&&t.message.includes("tool_calls")?e=_5(t,"INVALID_TOOL_RESULTS"):t.status===401?e=_5(t,"MODEL_AUTHENTICATION"):t.status===429?e=_5(t,"MODEL_RATE_LIMIT"):t.status===404?e=_5(t,"MODEL_NOT_FOUND"):e=t,e}function Lje(t){if(t)return t==="any"||t==="required"?"required":t==="auto"?"auto":t==="none"?"none":typeof t=="string"?{type:"function",function:{name:t}}:t}function bhn(t){return t.anyOf!==void 0&&Array.isArray(t.anyOf)}function q$t(t){let e=["namespace functions {",""];for(let r of t)r.description&&e.push(`// ${r.description}`),Object.keys(r.parameters.properties??{}).length>0?(e.push(`type ${r.name} = (_: {`),e.push(U$t(r.parameters,0)),e.push("}) => any;")):e.push(`type ${r.name} = () => any;`),e.push("");return e.push("} // namespace functions"),e.join(`
`)}function U$t(t,e){let r=[];for(let[n,o]of Object.entries(t.properties??{}))o.description&&e<2&&r.push(`// ${o.description}`),t.required?.includes(n)?r.push(`${n}: ${Cue(o,e)},`):r.push(`${n}?: ${Cue(o,e)},`);return r.map(n=>" ".repeat(e)+n).join(`
`)}function Cue(t,e){if(bhn(t))return t.anyOf.map(r=>Cue(r,e)).join(" | ");switch(t.type){case"string":return t.enum?t.enum.map(r=>`"${r}"`).join(" | "):"string";case"number":return t.enum?t.enum.map(r=>`${r}`).join(" | "):"number";case"integer":return t.enum?t.enum.map(r=>`${r}`).join(" | "):"number";case"boolean":return"boolean";case"null":return"null";case"object":return["{",U$t(t,e+2),"}"].join(`
`);case"array":return t.items?`${Cue(t.items,e)}[]`:"any[]";default:return""}}function z$t(t,e){let r;if(Vl(t)){let n=Rre({name:t.name,parameters:t.schema,description:t.description});n.function.parameters?r={type:n.type,function:{name:n.function.name,description:n.function.description,parameters:n.function.parameters,...e?.strict!==void 0?{strict:e.strict}:{}}}:r={type:"function",function:nA(t,e)}}else r=t;return e?.strict!==void 0&&(r.function.strict=e.strict),r}function _hn(t){return t.role!=="system"&&t.role!=="developer"&&t.role!=="assistant"&&t.role!=="user"&&t.role!=="function"&&t.role!=="tool"&&console.warn(`Unknown message role: ${t.role}`),t.role}function $je(t){let e=t._getType();switch(e){case"system":return"system";case"ai":return"assistant";case"human":return"user";case"function":return"function";case"tool":return"tool";case"generic":{if(!gs.isInstance(t))throw new Error("Invalid generic chat message");return _hn(t)}default:throw new Error(`Unknown message type: ${e}`)}}function kje(t,e){return t.flatMap(r=>{let n=$je(r);n==="system"&&Bje(e)&&(n="developer");let o={role:n,content:r.content};if(r.name!=null&&(o.name=r.name),r.additional_kwargs.function_call!=null&&(o.function_call=r.additional_kwargs.function_call,o.content=""),bi(r)&&r.tool_calls?.length?(o.tool_calls=r.tool_calls.map(ox),o.content=""):(r.additional_kwargs.tool_calls!=null&&(o.tool_calls=r.additional_kwargs.tool_calls),r.tool_call_id!=null&&(o.tool_call_id=r.tool_call_id)),r.additional_kwargs.audio&&typeof r.additional_kwargs.audio=="object"&&"id"in r.additional_kwargs.audio){let i={role:"assistant",audio:{id:r.additional_kwargs.audio.id}};return[o,i]}return o})}var tU="__openai_function_call_ids__";function H$t(t,e){return t.flatMap(r=>{let n=$je(r);if(n==="system"&&Bje(e)&&(n="developer"),n==="function")throw new Error("Function messages are not supported in Responses API");if(n==="tool"){let o=r;return o.additional_kwargs?.type==="computer_call_output"?{type:"computer_call_output",output:(()=>{if(typeof o.content=="string")return{type:"computer_screenshot",image_url:o.content};if(Array.isArray(o.content)){let a=o.content.find(u=>u.type==="computer_screenshot");if(a)return a;let s=o.content.find(u=>u.type==="image_url");if(s)return{type:"computer_screenshot",image_url:typeof s.image_url=="string"?s.image_url:s.image_url.url}}throw new Error("Invalid computer call output")})(),call_id:o.tool_call_id}:{type:"function_call_output",call_id:o.tool_call_id,id:o.id,output:typeof o.content!="string"?JSON.stringify(o.content):o.content}}if(n==="assistant"){let o=[];r.additional_kwargs.reasoning!=null&&(u=>typeof u=="object"&&u!=null&&"type"in u&&u.type==="reasoning")(r.additional_kwargs.reasoning)&&o.push(r.additional_kwargs.reasoning);let{content:i}=r;r.additional_kwargs.refusal!=null&&(typeof i=="string"&&(i=[{type:"output_text",text:i,annotations:[]}]),i=[...i,{type:"refusal",refusal:r.additional_kwargs.refusal}]),o.push({type:"message",role:"assistant",content:typeof i=="string"?i:i.flatMap(s=>s.type==="text"?{type:"output_text",text:s.text,annotations:s.annotations??[]}:s.type==="output_text"||s.type==="refusal"?s:[])});let a=r.additional_kwargs[tU];if(bi(r)&&r.tool_calls?.length?o.push(...r.tool_calls.map(s=>({type:"function_call",name:s.name,arguments:JSON.stringify(s.args),call_id:s.id,id:a?.[s.id]}))):r.additional_kwargs.tool_calls!=null&&o.push(...r.additional_kwargs.tool_calls.map(s=>({type:"function_call",name:s.function.name,call_id:s.id,id:a?.[s.id],arguments:s.function.arguments}))),r.additional_kwargs.tool_outputs!=null){let u=r.additional_kwargs.tool_outputs?.filter(l=>l.type==="computer_call");u.length>0&&o.push(...u)}return o}return n==="user"?{type:"message",role:"user",content:typeof r.content=="string"?r.content:r.content.flatMap(o=>{if(o.type==="text")return{type:"input_text",text:o.text};if(o.type==="image_url"){let i=typeof o.image_url=="string"?o.image_url:o.image_url.url,a=typeof o.image_url=="string"?"auto":o.image_url.detail;return{type:"input_image",image_url:i,detail:a}}return o.type==="input_text"||o.type==="input_image"||o.type==="input_file"?o:[]})}:[]})}function W$t(t){if(t.error){let a=new Error(t.error.message);throw a.name=t.error.code,a}let e=[],r=[],n=[],o={model:t.model,created_at:t.created_at,id:t.id,incomplete_details:t.incomplete_details,metadata:t.metadata,object:t.object,status:t.status,user:t.user,model_name:t.model},i={};for(let a of t.output)if(a.type==="message")e.push(...a.content.flatMap(s=>s.type==="output_text"?("parsed"in s&&s.parsed!=null&&(i.parsed=s.parsed),{type:"text",text:s.text,annotations:s.annotations}):s.type==="refusal"?(i.refusal=s.refusal,[]):s));else if(a.type==="function_call"){let s={function:{name:a.name,arguments:a.arguments},id:a.call_id};try{r.push(Lp(s,{returnId:!0}))}catch(u){let l;typeof u=="object"&&u!=null&&"message"in u&&typeof u.message=="string"&&(l=u.message),n.push(Fm(s,l))}i[tU]??(i[tU]={}),i[tU][a.call_id]=a.id}else a.type==="reasoning"?i.reasoning=a:(i.tool_outputs??(i.tool_outputs=[]),i.tool_outputs.push(a));return new mn({id:t.id,content:e,tool_calls:r,invalid_tool_calls:n,usage_metadata:t.usage,additional_kwargs:i,response_metadata:o})}function vhn(t){let e=[],r={},n,o=[],i={},a={},s;if(t.type==="response.output_text.delta")e.push({type:"text",text:t.delta,index:t.content_index});else if(t.type==="response.output_text.annotation.added")e.push({type:"text",text:"",annotations:[t.annotation],index:t.content_index});else if(t.type==="response.output_item.added"&&t.item.type==="message")s=t.item.id;else if(t.type==="response.output_item.added"&&t.item.type==="function_call")o.push({type:"tool_call_chunk",name:t.item.name,args:t.item.arguments,id:t.item.id,index:t.output_index}),a[tU]={[t.item.call_id]:t.item.id};else if(t.type==="response.output_item.done"&&(t.item.type==="web_search_call"||t.item.type==="file_search_call"||t.item.type==="computer_call"))a.tool_outputs=[t.item];else if(t.type==="response.created")i.id=t.response.id,i.model_name=t.response.model,i.model=t.response.model;else if(t.type==="response.completed"){let u=W$t(t.response);n=t.response.usage,t.response.text?.format?.type==="json_schema"&&(a.parsed??(a.parsed=JSON.parse(u.text)));for(let[l,c]of Object.entries(t.response))l!=="id"&&(i[l]=c)}else if(t.type==="response.function_call_arguments.delta")o.push({type:"tool_call_chunk",args:t.delta,index:t.output_index});else if(t.type==="response.web_search_call.completed"||t.type==="response.file_search_call.completed")r={tool_outputs:{id:t.item_id,type:t.type.replace("response.","").replace(".completed",""),status:"completed"}};else if(t.type==="response.refusal.done")a.refusal=t.refusal;else return null;return new Ln({text:e.map(u=>u.text).join(""),message:new cr({id:s,content:e,tool_call_chunks:o,usage_metadata:n,additional_kwargs:a,response_metadata:i}),generationInfo:r})}function Fje(t){return"type"in t&&t.type!=="function"}function whn(t){return t!=null&&typeof t=="object"&&"type"in t&&t.type!=="function"}function V$t(t,e){return Rc(t)?e?.strict!==void 0?{...t,function:{...t.function,strict:e.strict}}:t:z$t(t,e)}function Bje(t){return t?.startsWith("o1")||t?.startsWith("o3")}var v5=class extends Bs{static lc_name(){return"ChatOpenAI"}get callKeys(){return[...super.callKeys,"options","function_call","functions","tools","tool_choice","promptIndex","response_format","seed","reasoning_effort"]}get lc_secrets(){return{openAIApiKey:"OPENAI_API_KEY",apiKey:"OPENAI_API_KEY",organization:"OPENAI_ORGANIZATION"}}get lc_aliases(){return{modelName:"model",openAIApiKey:"openai_api_key",apiKey:"openai_api_key"}}get lc_serializable_keys(){return["configuration","logprobs","topLogprobs","prefixMessages","supportsStrictToolCalling","modalities","audio","reasoningEffort","temperature","maxTokens","topP","frequencyPenalty","presencePenalty","n","logitBias","user","streaming","streamUsage","modelName","model","modelKwargs","stop","stopSequences","timeout","openAIApiKey","apiKey","cache","maxConcurrency","maxRetries","verbose","callbacks","tags","metadata","disableStreaming"]}constructor(e){super(e??{}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"temperature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"topP",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"frequencyPenalty",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"presencePenalty",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"n",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"logitBias",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"modelName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"model",{enumerable:!0,configurable:!0,writable:!0,value:"gpt-3.5-turbo"}),Object.defineProperty(this,"modelKwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"stop",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"stopSequences",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"user",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"timeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"streaming",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"streamUsage",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"maxTokens",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"logprobs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"topLogprobs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"openAIApiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"apiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"organization",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"__includeRawResponse",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"clientConfig",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"supportsStrictToolCalling",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"audio",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"modalities",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reasoningEffort",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"useResponsesApi",{enumerable:!0,configurable:!0,writable:!0,value:!1}),this.openAIApiKey=e?.apiKey??e?.openAIApiKey??e?.configuration?.apiKey??ot("OPENAI_API_KEY"),this.apiKey=this.openAIApiKey,this.organization=e?.configuration?.organization??ot("OPENAI_ORGANIZATION"),this.model=e?.model??e?.modelName??this.model,this.modelName=this.model,this.modelKwargs=e?.modelKwargs??{},this.timeout=e?.timeout,this.temperature=e?.temperature??this.temperature,this.topP=e?.topP??this.topP,this.frequencyPenalty=e?.frequencyPenalty??this.frequencyPenalty,this.presencePenalty=e?.presencePenalty??this.presencePenalty,this.logprobs=e?.logprobs,this.topLogprobs=e?.topLogprobs,this.n=e?.n??this.n,this.logitBias=e?.logitBias,this.stop=e?.stopSequences??e?.stop,this.stopSequences=this.stop,this.user=e?.user,this.__includeRawResponse=e?.__includeRawResponse,this.audio=e?.audio,this.modalities=e?.modalities,this.reasoningEffort=e?.reasoningEffort,this.maxTokens=e?.maxCompletionTokens??e?.maxTokens,this.useResponsesApi=e?.useResponsesApi??this.useResponsesApi,this.model==="o1"&&(this.disableStreaming=!0),this.streaming=e?.streaming??!1,this.streamUsage=e?.streamUsage??this.streamUsage,this.clientConfig={apiKey:this.apiKey,organization:this.organization,dangerouslyAllowBrowser:!0,...e?.configuration},e?.supportsStrictToolCalling!==void 0&&(this.supportsStrictToolCalling=e.supportsStrictToolCalling)}getLsParams(e){let r=this.invocationParams(e);return{ls_provider:"openai",ls_model_name:this.model,ls_model_type:"chat",ls_temperature:r.temperature??void 0,ls_max_tokens:r.max_tokens??void 0,ls_stop:e.stop}}bindTools(e,r){let n;return r?.strict!==void 0?n=r.strict:this.supportsStrictToolCalling!==void 0&&(n=this.supportsStrictToolCalling),this.bind({tools:e.map(o=>Fje(o)?o:V$t(o,{strict:n})),...r})}createResponseFormat(e){return e&&e.type==="json_schema"&&e.json_schema.schema&&Oue(e.json_schema.schema)?vB(e.json_schema.schema,e.json_schema.name,{description:e.json_schema.description}):e}invocationParams(e,r){let n;if(e?.strict!==void 0?n=e.strict:this.supportsStrictToolCalling!==void 0&&(n=this.supportsStrictToolCalling),this._useResponseApi(e)){let s={model:this.model,temperature:this.temperature,top_p:this.topP,user:this.user,stream:this.streaming,previous_response_id:e?.previous_response_id,truncation:e?.truncation,include:e?.include,tools:e?.tools?.length?e.tools.map(l=>Fje(l)?l:Rc(l)?{type:"function",name:l.function.name,parameters:l.function.parameters,description:l.function.description,strict:n}:null).filter(l=>l!==null):void 0,tool_choice:whn(e?.tool_choice)?e?.tool_choice:(()=>{let l=Lje(e?.tool_choice);if(typeof l=="object"&&"type"in l)return{type:"function",name:l.function.name}})(),text:(()=>{if(e?.text)return e.text;let l=this.createResponseFormat(e?.response_format);return l?.type==="json_schema"?l.json_schema.schema!=null?{format:{type:"json_schema",schema:l.json_schema.schema,description:l.json_schema.description,name:l.json_schema.name,strict:l.json_schema.strict}}:void 0:{format:l}})(),parallel_tool_calls:e?.parallel_tool_calls,max_output_tokens:this.maxTokens===-1?void 0:this.maxTokens,...this.modelKwargs},u=e?.reasoning_effort??this.reasoningEffort;return u!==void 0&&(s.reasoning={effort:u}),s}let o={};e?.stream_options!==void 0?o={stream_options:e.stream_options}:this.streamUsage&&(this.streaming||r?.streaming)&&(o={stream_options:{include_usage:!0}});let i={model:this.model,temperature:this.temperature,top_p:this.topP,frequency_penalty:this.frequencyPenalty,presence_penalty:this.presencePenalty,logprobs:this.logprobs,top_logprobs:this.topLogprobs,n:this.n,logit_bias:this.logitBias,stop:e?.stop??this.stopSequences,user:this.user,stream:this.streaming,functions:e?.functions,function_call:e?.function_call,tools:e?.tools?.length?e.tools.map(s=>V$t(s,{strict:n})):void 0,tool_choice:Lje(e?.tool_choice),response_format:this.createResponseFormat(e?.response_format),seed:e?.seed,...o,parallel_tool_calls:e?.parallel_tool_calls,...this.audio||e?.audio?{audio:this.audio||e?.audio}:{},...this.modalities||e?.modalities?{modalities:this.modalities||e?.modalities}:{},...this.modelKwargs};e?.prediction!==void 0&&(i.prediction=e.prediction);let a=e?.reasoning_effort??this.reasoningEffort;return a!==void 0&&(i.reasoning_effort=a),Bje(i.model)?i.max_completion_tokens=this.maxTokens===-1?void 0:this.maxTokens:i.max_tokens=this.maxTokens===-1?void 0:this.maxTokens,i}_convertOpenAIChatCompletionMessageToBaseMessage(e,r){let n=e.tool_calls;switch(e.role){case"assistant":{let o=[],i=[];for(let u of n??[])try{o.push(Lp(u,{returnId:!0}))}catch(l){i.push(Fm(u,l.message))}let a={function_call:e.function_call,tool_calls:n};this.__includeRawResponse!==void 0&&(a.__raw_response=r);let s={model_name:r.model,...r.system_fingerprint?{usage:{...r.usage},system_fingerprint:r.system_fingerprint}:{}};return e.audio&&(a.audio=e.audio),new mn({content:e.content||"",tool_calls:o,invalid_tool_calls:i,additional_kwargs:a,response_metadata:s,id:r.id})}default:return new gs(e.content||"",e.role??"unknown")}}_convertOpenAIDeltaToBaseMessageChunk(e,r,n){let o=e.role??n,i=e.content??"",a;e.function_call?a={function_call:e.function_call}:e.tool_calls?a={tool_calls:e.tool_calls}:a={},this.__includeRawResponse&&(a.__raw_response=r),e.audio&&(a.audio={...e.audio,index:r.choices[0].index});let s={usage:{...r.usage}};if(o==="user")return new gf({content:i,response_metadata:s});if(o==="assistant"){let u=[];if(Array.isArray(e.tool_calls))for(let l of e.tool_calls)u.push({name:l.function?.name,args:l.function?.arguments,id:l.id,index:l.index,type:"tool_call_chunk"});return new cr({content:i,tool_call_chunks:u,additional_kwargs:a,id:r.id,response_metadata:s})}else return o==="system"?new bd({content:i,response_metadata:s}):o==="developer"?new bd({content:i,response_metadata:s,additional_kwargs:{__openai_role__:"developer"}}):o==="function"?new nm({content:i,additional_kwargs:a,name:e.name,response_metadata:s}):o==="tool"?new ph({content:i,additional_kwargs:a,tool_call_id:e.tool_call_id,response_metadata:s}):new hf({content:i,role:o,response_metadata:s})}_identifyingParams(){return{model_name:this.model,...this.invocationParams(),...this.clientConfig}}async*_streamResponseChunks(e,r,n){if(this._useResponseApi(r)){let l=await this.responseApiWithRetry({...this.invocationParams(r,{streaming:!0}),input:H$t(e,this.model),stream:!0},r);for await(let c of l){let d=vhn(c);d!=null&&(yield d)}return}let o=kje(e,this.model),i={...this.invocationParams(r,{streaming:!0}),messages:o,stream:!0},a,s=await this.completionWithRetry(i,r),u;for await(let l of s){let c=l?.choices?.[0];if(l.usage&&(u=l.usage),!c)continue;let{delta:d}=c;if(!d)continue;let f=this._convertOpenAIDeltaToBaseMessageChunk(d,l,a);a=d.role??a;let p={prompt:r.promptIndex??0,completion:c.index??0};if(typeof f.content!="string"){console.log("[WARNING]: Received non-string content from OpenAI. This is currently not supported.");continue}let m={...p};c.finish_reason!=null&&(m.finish_reason=c.finish_reason,m.system_fingerprint=l.system_fingerprint,m.model_name=l.model),this.logprobs&&(m.logprobs=c.logprobs);let h=new Ln({message:f,text:f.content,generationInfo:m});yield h,await n?.handleLLMNewToken(h.text??"",p,void 0,void 0,void 0,{chunk:h})}if(u){let l={...u.prompt_tokens_details?.audio_tokens!==null&&{audio:u.prompt_tokens_details?.audio_tokens},...u.prompt_tokens_details?.cached_tokens!==null&&{cache_read:u.prompt_tokens_details?.cached_tokens}},c={...u.completion_tokens_details?.audio_tokens!==null&&{audio:u.completion_tokens_details?.audio_tokens},...u.completion_tokens_details?.reasoning_tokens!==null&&{reasoning:u.completion_tokens_details?.reasoning_tokens}};yield new Ln({message:new cr({content:"",response_metadata:{usage:{...u}},usage_metadata:{input_tokens:u.prompt_tokens,output_tokens:u.completion_tokens,total_tokens:u.total_tokens,...Object.keys(l).length>0&&{input_token_details:l},...Object.keys(c).length>0&&{output_token_details:c}}}),text:""})}if(r.signal?.aborted)throw new Error("AbortError")}identifyingParams(){return this._identifyingParams()}async _responseApiGenerate(e,r,n){let o=this.invocationParams(r);if(o.stream){let s=this._streamResponseChunks(e,r,n),u;for await(let l of s)l.message.response_metadata={...l.generationInfo,...l.message.response_metadata},u=u?.concat(l)??l;return{generations:u?[u]:[],llmOutput:{estimatedTokenUsage:u?.message?.usage_metadata}}}let i=H$t(e,this.model),a=await this.responseApiWithRetry({input:i,...o},{signal:r?.signal,...r?.options});return{generations:[{text:a.output_text,message:W$t(a)}],llmOutput:{id:a.id,estimatedTokenUsage:a.usage?{promptTokens:a.usage.input_tokens,completionTokens:a.usage.output_tokens,totalTokens:a.usage.total_tokens}:void 0}}}_useResponseApi(e){let r=e?.tools?.some(Fje),n=e?.previous_response_id!=null||e?.text!=null||e?.truncation!=null||e?.include!=null;return this.useResponsesApi||r||n}async _generate(e,r,n){if(this._useResponseApi(r))return this._responseApiGenerate(e,r,n);let o={},i=this.invocationParams(r),a=kje(e,this.model);if(i.stream){let s=this._streamResponseChunks(e,r,n),u={};for await(let m of s){m.message.response_metadata={...m.generationInfo,...m.message.response_metadata};let h=m.generationInfo?.completion??0;u[h]===void 0?u[h]=m:u[h]=u[h].concat(m)}let l=Object.entries(u).sort(([m],[h])=>parseInt(m,10)-parseInt(h,10)).map(([m,h])=>h),{functions:c,function_call:d}=this.invocationParams(r),f=await this.getEstimatedTokenCountFromPrompt(e,c,d),p=await this.getNumTokensFromGenerations(l);return o.input_tokens=f,o.output_tokens=p,o.total_tokens=f+p,{generations:l,llmOutput:{estimatedTokenUsage:{promptTokens:o.input_tokens,completionTokens:o.output_tokens,totalTokens:o.total_tokens}}}}else{let s;r.response_format&&r.response_format.type==="json_schema"?s=await this.betaParsedCompletionWithRetry({...i,stream:!1,messages:a},{signal:r?.signal,...r?.options}):s=await this.completionWithRetry({...i,stream:!1,messages:a},{signal:r?.signal,...r?.options});let{completion_tokens:u,prompt_tokens:l,total_tokens:c,prompt_tokens_details:d,completion_tokens_details:f}=s?.usage??{};u&&(o.output_tokens=(o.output_tokens??0)+u),l&&(o.input_tokens=(o.input_tokens??0)+l),c&&(o.total_tokens=(o.total_tokens??0)+c),(d?.audio_tokens!==null||d?.cached_tokens!==null)&&(o.input_token_details={...d?.audio_tokens!==null&&{audio:d?.audio_tokens},...d?.cached_tokens!==null&&{cache_read:d?.cached_tokens}}),(f?.audio_tokens!==null||f?.reasoning_tokens!==null)&&(o.output_token_details={...f?.audio_tokens!==null&&{audio:f?.audio_tokens},...f?.reasoning_tokens!==null&&{reasoning:f?.reasoning_tokens}});let p=[];for(let m of s?.choices??[]){let b={text:m.message?.content??"",message:this._convertOpenAIChatCompletionMessageToBaseMessage(m.message??{role:"assistant"},s)};b.generationInfo={...m.finish_reason?{finish_reason:m.finish_reason}:{},...m.logprobs?{logprobs:m.logprobs}:{}},bi(b.message)&&(b.message.usage_metadata=o),b.message=new mn(Object.fromEntries(Object.entries(b.message).filter(([g])=>!g.startsWith("lc_")))),p.push(b)}return{generations:p,llmOutput:{tokenUsage:{promptTokens:o.input_tokens,completionTokens:o.output_tokens,totalTokens:o.total_tokens}}}}}async getEstimatedTokenCountFromPrompt(e,r,n){let o=(await this.getNumTokensFromMessages(e)).totalCount;if(r&&n!=="auto"){let i=q$t(r);o+=await this.getNumTokens(i),o+=9}return r&&e.find(i=>i._getType()==="system")&&(o-=4),n==="none"?o+=1:typeof n=="object"&&(o+=await this.getNumTokens(n.name)+4),o}async getNumTokensFromGenerations(e){return(await Promise.all(e.map(async n=>n.message.additional_kwargs?.function_call?(await this.getNumTokensFromMessages([n.message])).countPerMessage[0]:await this.getNumTokens(n.message.content)))).reduce((n,o)=>n+o,0)}async getNumTokensFromMessages(e){let r=0,n=0,o=0;this.model==="gpt-3.5-turbo-0301"?(n=4,o=-1):(n=3,o=1);let i=await Promise.all(e.map(async a=>{let s=await this.getNumTokens(a.content),u=await this.getNumTokens($je(a)),l=a.name!==void 0?o+await this.getNumTokens(a.name):0,c=s+n+u+l,d=a;if(d._getType()==="function"&&(c-=2),d.additional_kwargs?.function_call&&(c+=3),d?.additional_kwargs.function_call?.name&&(c+=await this.getNumTokens(d.additional_kwargs.function_call?.name)),d.additional_kwargs.function_call?.arguments)try{c+=await this.getNumTokens(JSON.stringify(JSON.parse(d.additional_kwargs.function_call?.arguments)))}catch(f){console.error("Error parsing function arguments",f,JSON.stringify(d.additional_kwargs.function_call)),c+=await this.getNumTokens(d.additional_kwargs.function_call?.arguments)}return r+=c,c}));return r+=3,{totalCount:r,countPerMessage:i}}async completionWithRetry(e,r){let n=this._getClientOptions(r);return this.caller.call(async()=>{try{return await this.client.chat.completions.create(e,n)}catch(o){throw zN(o)}})}async responseApiWithRetry(e,r){return this.caller.call(async()=>{let n=this._getClientOptions(r);try{return e.text?.format?.type==="json_schema"&&!e.stream?await this.client.responses.parse(e,n):await this.client.responses.create(e,n)}catch(o){throw zN(o)}})}async betaParsedCompletionWithRetry(e,r){let n=this._getClientOptions(r);return this.caller.call(async()=>{try{return await this.client.beta.chat.completions.parse(e,n)}catch(o){throw zN(o)}})}_getClientOptions(e){if(!this.client){let n={baseURL:this.clientConfig.baseURL},o=UN(n),i={...this.clientConfig,baseURL:o,timeout:this.timeout,maxRetries:0};i.baseURL||delete i.baseURL,this.client=new Vt(i)}return{...this.clientConfig,...e}}_llmType(){return"openai"}_combineLLMOutput(...e){return e.reduce((r,n)=>(n&&n.tokenUsage&&(r.tokenUsage.completionTokens+=n.tokenUsage.completionTokens??0,r.tokenUsage.promptTokens+=n.tokenUsage.promptTokens??0,r.tokenUsage.totalTokens+=n.tokenUsage.totalTokens??0),r),{tokenUsage:{completionTokens:0,promptTokens:0,totalTokens:0}})}withStructuredOutput(e,r){let n,o,i,a;Shn(e)?(n=e.schema,o=e.name,i=e.method,a=e.includeRaw):(n=e,o=r?.name,i=r?.method,a=r?.includeRaw);let s,u;if(r?.strict!==void 0&&i==="jsonMode")throw new Error("Argument `strict` is only supported for `method` = 'function_calling'");if(!this.model.startsWith("gpt-3")&&!this.model.startsWith("gpt-4-")&&this.model!=="gpt-4"?i===void 0&&(i="jsonSchema"):i==="jsonSchema"&&console.warn(`[WARNING]: JSON Schema is not supported for model "${this.model}". Falling back to tool calling.`),i==="jsonMode")s=this.bind({response_format:{type:"json_object"}}),Oue(n)?u=hc.fromZodSchema(n):u=new gc;else if(i==="jsonSchema")if(s=this.bind({response_format:{type:"json_schema",json_schema:{name:o??"extract",description:n.description,schema:n,strict:r?.strict}}}),Oue(n)){let f=hc.fromZodSchema(n);u=_f.from(p=>"parsed"in p.additional_kwargs?p.additional_kwargs.parsed:f)}else u=new gc;else{let f=o??"extract";if(Oue(n)){let p=ho(n);s=this.bind({tools:[{type:"function",function:{name:f,description:p.description,parameters:p}}],tool_choice:{type:"function",function:{name:f}},...r?.strict!==void 0?{strict:r.strict}:{}}),u=new Fc({returnSingle:!0,keyName:f,zodSchema:n})}else{let p;typeof n.name=="string"&&typeof n.parameters=="object"&&n.parameters!=null?(p=n,f=n.name):(f=n.title??f,p={name:f,description:n.description??"",parameters:n}),s=this.bind({tools:[{type:"function",function:p}],tool_choice:{type:"function",function:{name:f}},...r?.strict!==void 0?{strict:r.strict}:{}}),u=new Fc({returnSingle:!0,keyName:f})}}if(!a)return s.pipe(u);let l=lo.assign({parsed:(f,p)=>u.invoke(f.raw,p)}),c=lo.assign({parsed:()=>null}),d=l.withFallbacks({fallbacks:[c]});return di.from([{raw:s},d])}};function Oue(t){return typeof t?.parse=="function"}function Shn(t){return t!==void 0&&typeof t.schema=="object"}Rm();$d();var qje=class extends EO{static lc_name(){return"DallEAPIWrapper"}constructor(e){e?.responseFormat!==void 0&&["url","b64_json"].includes(e.responseFormat)&&(e.dallEResponseFormat=e.responseFormat,e.responseFormat="content"),super(e),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"dalle_api_wrapper"}),Object.defineProperty(this,"description",{enumerable:!0,configurable:!0,writable:!0,value:"A wrapper around OpenAI DALL-E API. Useful for when you need to generate images from a text description. Input should be an image description."}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"model",{enumerable:!0,configurable:!0,writable:!0,value:"dall-e-3"}),Object.defineProperty(this,"style",{enumerable:!0,configurable:!0,writable:!0,value:"vivid"}),Object.defineProperty(this,"quality",{enumerable:!0,configurable:!0,writable:!0,value:"standard"}),Object.defineProperty(this,"n",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:"1024x1024"}),Object.defineProperty(this,"dallEResponseFormat",{enumerable:!0,configurable:!0,writable:!0,value:"url"}),Object.defineProperty(this,"user",{enumerable:!0,configurable:!0,writable:!0,value:void 0});let r=e?.apiKey??e?.openAIApiKey??ot("OPENAI_API_KEY"),n=e?.organization??ot("OPENAI_ORGANIZATION"),o={apiKey:r,organization:n,dangerouslyAllowBrowser:!0,baseUrl:e?.baseUrl};this.client=new Vt(o),this.model=e?.model??e?.modelName??this.model,this.style=e?.style??this.style,this.quality=e?.quality??this.quality,this.n=e?.n??this.n,this.size=e?.size??this.size,this.dallEResponseFormat=e?.dallEResponseFormat??this.dallEResponseFormat,this.user=e?.user}processMultipleGeneratedUrls(e){return this.dallEResponseFormat==="url"?e.flatMap(r=>r.data.flatMap(o=>o.url?{type:"image_url",image_url:o.url}:[]).filter(o=>o!==void 0&&o.type==="image_url"&&typeof o.image_url=="string"&&o.image_url!==void 0)):e.flatMap(r=>r.data.flatMap(o=>o.b64_json?{type:"image_url",image_url:{url:o.b64_json}}:[]).filter(o=>o!==void 0&&o.type==="image_url"&&typeof o.image_url=="object"&&"url"in o.image_url&&typeof o.image_url.url=="string"&&o.image_url.url!==void 0))}async _call(e){let r={model:this.model,prompt:e,n:1,size:this.size,response_format:this.dallEResponseFormat,style:this.style,quality:this.quality,user:this.user};if(this.n>1){let i=await Promise.all(Array.from({length:this.n}).map(()=>this.client.images.generate(r)));return this.processMultipleGeneratedUrls(i)}let n=await this.client.images.generate(r),o="";return this.dallEResponseFormat==="url"?[o]=n.data.map(i=>i.url).filter(i=>i!=="undefined"):[o]=n.data.map(i=>i.b64_json).filter(i=>i!=="undefined"),o}};Object.defineProperty(qje,"toolName",{enumerable:!0,configurable:!0,writable:!0,value:"dalle_api_wrapper"});var Pue=class extends v5{static lc_name(){return"ChatXAI"}_llmType(){return"xai"}get lc_secrets(){return{apiKey:"XAI_API_KEY"}}constructor(e){let r=e?.apiKey||ot("XAI_API_KEY");if(!r)throw new Error('xAI API key not found. Please set the XAI_API_KEY environment variable or provide the key into "apiKey" field.');super({...e,model:e?.model||"grok-beta",apiKey:r,configuration:{baseURL:"https://api.x.ai/v1"}}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","chat_models","xai"]})}toJSON(){let e=super.toJSON();return"kwargs"in e&&typeof e.kwargs=="object"&&e.kwargs!=null&&(delete e.kwargs.openai_api_key,delete e.kwargs.configuration),e}getLsParams(e){let r=super.getLsParams(e);return r.ls_provider="xai",r}async completionWithRetry(e,r){delete e.frequency_penalty,delete e.presence_penalty,delete e.logit_bias,delete e.functions;let n=e.messages.map(i=>i.content?i:{...i,content:""}),o={...e,messages:n};return o.stream===!0?super.completionWithRetry(o,r):super.completionWithRetry(o,r)}_convertOpenAIDeltaToBaseMessageChunk(e,r,n){let o=super._convertOpenAIDeltaToBaseMessageChunk(e,r,n);return r.choices[0]?.finish_reason?o.usage_metadata=o.response_metadata.usage:(delete o.response_metadata.usage,delete o.usage_metadata),o}_convertOpenAIChatCompletionMessageToBaseMessage(e,r){let n=super._convertOpenAIChatCompletionMessageToBaseMessage(e,r);return n.additional_kwargs.reasoning_content=e.reasoning_content,n}withStructuredOutput(e,r){let n={...r};return n?.method===void 0&&(n.method="functionCalling"),super.withStructuredOutput(e,n)}};var Eue=require("obsidian"),xhn={openai:ix,"azure openai":ix,anthropic:tie,cohereai:Ute,google:Gte,xai:Pue,openrouterai:ix,ollama:Xte,"lm-studio":ix,groq:mie,"3rd party (openai-format)":ix,"copilot-plus":ix,mistralai:xue,deepseek:oie},HN=class t{constructor(){this.providerApiKeyMap={openai:()=>ue().openAIApiKey,google:()=>ue().googleApiKey,"azure openai":()=>ue().azureOpenAIApiKey,anthropic:()=>ue().anthropicApiKey,cohereai:()=>ue().cohereApiKey,openrouterai:()=>ue().openRouterAiApiKey,groq:()=>ue().groqApiKey,xai:()=>ue().xaiApiKey,ollama:()=>"default-key","lm-studio":()=>"default-key","3rd party (openai-format)":()=>"default-key","copilot-plus":()=>ue().plusLicenseKey,mistralai:()=>ue().mistralApiKey,deepseek:()=>ue().deepseekApiKey};this.buildModelMap(),ga(()=>{this.buildModelMap(),this.validateCurrentModel()})}static getInstance(){return t.instance||(t.instance=new t),t.instance}async getModelConfig(e){let r=ue(),n=e.name,o=sR(n),i=n.startsWith("claude-3-7-sonnet")||n.startsWith("claude-sonnet-4"),a={modelName:n,streaming:e.stream??!0,maxRetries:3,maxConcurrency:3,enableCors:e.enableCors};i||(a.temperature=e.temperature??r.temperature);let u={openai:{modelName:n,openAIApiKey:await Gn(e.apiKey||r.openAIApiKey),configuration:{baseURL:e.baseUrl,fetch:e.enableCors?js:void 0,organization:await Gn(e.openAIOrgId||r.openAIOrgId)},...this.handleOpenAIExtraArgs(o,e.maxTokens??r.maxTokens,e.temperature??r.temperature)},anthropic:{anthropicApiKey:await Gn(e.apiKey||r.anthropicApiKey),model:n,anthropicApiUrl:e.baseUrl,clientOptions:{defaultHeaders:{"anthropic-dangerous-direct-browser-access":"true"},fetch:e.enableCors?js:void 0},...i&&{thinking:{type:"enabled",budget_tokens:1024}}},"azure openai":{modelName:e.azureOpenAIApiDeploymentName||r.azureOpenAIApiDeploymentName,openAIApiKey:await Gn(e.apiKey||r.azureOpenAIApiKey),configuration:{baseURL:e.baseUrl||`https://${e.azureOpenAIApiInstanceName||r.azureOpenAIApiInstanceName}.openai.azure.com/openai/deployments/${e.azureOpenAIApiDeploymentName||r.azureOpenAIApiDeploymentName}`,defaultQuery:{"api-version":e.azureOpenAIApiVersion||r.azureOpenAIApiVersion},defaultHeaders:{"Content-Type":"application/json","api-key":await Gn(e.apiKey||r.azureOpenAIApiKey)},fetch:e.enableCors?js:void 0},...this.handleOpenAIExtraArgs(o,e.maxTokens??r.maxTokens,e.temperature??r.temperature)},cohereai:{apiKey:await Gn(e.apiKey||r.cohereApiKey),model:n},google:{apiKey:await Gn(e.apiKey||r.googleApiKey),modelName:n,safetySettings:[{category:rj.HARM_CATEGORY_SEXUALLY_EXPLICIT,threshold:nj.BLOCK_NONE},{category:rj.HARM_CATEGORY_HATE_SPEECH,threshold:nj.BLOCK_NONE},{category:rj.HARM_CATEGORY_DANGEROUS_CONTENT,threshold:nj.BLOCK_NONE},{category:rj.HARM_CATEGORY_HARASSMENT,threshold:nj.BLOCK_NONE}],baseUrl:e.baseUrl},xai:{apiKey:await Gn(e.apiKey||r.xaiApiKey),model:n},openrouterai:{modelName:n,openAIApiKey:await Gn(e.apiKey||r.openRouterAiApiKey),configuration:{baseURL:e.baseUrl||"https://openrouter.ai/api/v1",fetch:e.enableCors?js:void 0,defaultHeaders:{"HTTP-Referer":"https://obsidiancopilot.com","X-Title":"Obsidian Copilot"}}},groq:{apiKey:await Gn(e.apiKey||r.groqApiKey),modelName:n},ollama:{model:n,baseUrl:e.baseUrl||"http://localhost:11434",headers:new Headers({Authorization:`Bearer ${await Gn(e.apiKey||"default-key")}`})},"lm-studio":{modelName:n,openAIApiKey:e.apiKey||"default-key",configuration:{baseURL:e.baseUrl||"http://localhost:1234/v1",fetch:e.enableCors?js:void 0}},"3rd party (openai-format)":{modelName:n,openAIApiKey:await Gn(e.apiKey||r.openAIApiKey),configuration:{baseURL:e.baseUrl,fetch:e.enableCors?js:void 0,defaultHeaders:{"dangerously-allow-browser":"true"}},...this.handleOpenAIExtraArgs(o,e.maxTokens??r.maxTokens,e.temperature??r.temperature)},"copilot-plus":{modelName:n,openAIApiKey:await Gn(r.plusLicenseKey),configuration:{baseURL:wE,fetch:e.enableCors?js:void 0}},mistralai:{model:n,apiKey:await Gn(e.apiKey||r.mistralApiKey),serverURL:e.baseUrl},deepseek:{modelName:n,apiKey:await Gn(e.apiKey||r.deepseekApiKey),configuration:{baseURL:e.baseUrl||jL.deepseek.host,fetch:e.enableCors?js:void 0}}}[e.provider]||{},l=this.getProviderSpecificParams(e.provider,e),c=i?{maxTokens:e.maxTokens??r.maxTokens}:this.handleOpenAIExtraArgs(o,e.maxTokens??r.maxTokens,e.temperature??r.temperature),d={...a,...u,...l,...c};return i&&delete d.temperature,d}handleOpenAIExtraArgs(e,r,n){return e?{maxCompletionTokens:r,temperature:n===void 0?void 0:1}:{maxTokens:r,temperature:n}}getProviderSpecificParams(e,r){let n={};return r.topP!==void 0&&["openai","azure openai","anthropic","google","openrouterai","ollama","lm-studio","3rd party (openai-format)","mistralai","deepseek"].includes(e)&&(n.topP=r.topP),r.frequencyPenalty!==void 0&&["openai","azure openai","openrouterai","ollama","lm-studio","3rd party (openai-format)","mistralai","deepseek"].includes(e)&&(n.frequencyPenalty=r.frequencyPenalty),n}buildModelMap(){let e=ue().activeModels;t.modelMap={};let r=t.modelMap;(e??Mb).forEach(o=>{if(o.enabled){if(!Object.values(pC).contains(o.provider)){console.warn(`Unknown provider: ${o.provider} for model: ${o.name}`);return}let i=this.getProviderConstructor(o),a=this.providerApiKeyMap[o.provider],s=o.apiKey||a(),u=Fr(o);r[u]={hasApiKey:!!(o.apiKey||s),AIConstructor:i,vendor:o.provider}}})}getProviderConstructor(e){let r=xhn[e.provider];if(!r)throw console.warn(`Unknown provider: ${e.provider} for model: ${e.name}`),new Error(`Unknown provider: ${e.provider} for model: ${e.name}`);return r}getChatModel(){if(!t.chatModel)throw new Error("No valid chat model available. Please check your API key settings.");return t.chatModel}async setChatModel(e){let r=Fr(e);try{let n=await this.createModelInstance(e);t.chatModel=n}catch(n){fe(n),new Eue.Notice(`Error creating model: ${r}`)}}async createModelInstance(e){let r=Fr(e),n=t.modelMap[r];if(!n)throw new Error(`No model found for: ${r}`);if(!n.hasApiKey){let a=`API key is not provided for the model: ${r}.`;throw new Eue.Notice(a),new Error(a)}let o=await this.getModelConfig(e);return new n.AIConstructor({...o})}validateChatModel(e){return e!=null}estimateTokens(e){return e?Math.ceil(e.length/4):0}async countTokens(e){try{return await Zg(async()=>t.chatModel?.getNumTokens(e)??0)}catch(r){if(r instanceof Error&&r.message.includes("Unknown model"))return ie("Using estimated token count due to tokenizer error"),this.estimateTokens(e);throw r}}validateCurrentModel(){if(!t.chatModel)return;let e=vG();if(!e)return;t.modelMap[e]?.hasApiKey||(t.chatModel=null,console.log("Failed to reinitialize model due to missing API key"))}async ping(e){let r=async n=>{let o={...e,enableCors:n},i=await this.getModelConfig(o),{streaming:a,maxTokens:s,maxCompletionTokens:u,...l}=i,c=sR(o.name),d=this.handleOpenAIExtraArgs(c,30,i.temperature);await new(this.getProviderConstructor(o))({...l,...d}).invoke([{role:"user",content:"hello"}],{timeout:8e3})};try{return await r(!1),!0}catch(n){console.log("First ping attempt failed, trying with CORS...");try{return await r(!0),new Eue.Notice("Connection successful, but requires CORS to be enabled. Please enable CORS for this model once you add it above."),!0}catch(o){let i=`
without CORS Error: `+Go(n)+`
with CORS Error: `+Go(o);throw new Error(i)}}}findModelByName(e){return ue().activeModels.find(n=>n.name===e)}};tr();var rU=class{},K$t=(t,e)=>{if(e!==void 0)return t[e];let r=Object.keys(t);if(r.length===1)return t[r[0]]},Tue=(t,e)=>{let r=K$t(t,e);if(!r){let n=Object.keys(t);throw new Error(`input values have ${n.length} keys, you must specify an input key or pass only 1 key as input`)}return r},Uje=(t,e)=>{let r=K$t(t,e);if(!r&&r!==""){let n=Object.keys(t);throw new Error(`output values have ${n.length} keys, you must specify an output key or pass only 1 key as output`)}return r};UM();YM();var zje=class extends np{addUserMessage(e){return this.addMessage(new ys(e))}addAIChatMessage(e){return this.addMessage(new mn(e))}addAIMessage(e){return this.addMessage(new mn(e))}async addMessages(e){for(let r of e)await this.addMessage(r)}clear(){throw new Error("Not implemented.")}},nU=class extends zje{constructor(e){super(...arguments),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","stores","message","in_memory"]}),Object.defineProperty(this,"messages",{enumerable:!0,configurable:!0,writable:!0,value:[]}),this.messages=e??[]}async getMessages(){return this.messages}async addMessage(e){this.messages.push(e)}async clear(){this.messages=[]}};var Yy=class extends rU{constructor(e){super(),Object.defineProperty(this,"chatHistory",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"returnMessages",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"inputKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"outputKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.chatHistory=e?.chatHistory??new nU,this.returnMessages=e?.returnMessages??this.returnMessages,this.inputKey=e?.inputKey??this.inputKey,this.outputKey=e?.outputKey??this.outputKey}async saveContext(e,r){await this.chatHistory.addUserMessage(Tue(e,this.inputKey)),await this.chatHistory.addAIChatMessage(Uje(r,this.outputKey))}async clear(){await this.chatHistory.clear()}};var w5=class extends Yy{constructor(e){super({chatHistory:e?.chatHistory,returnMessages:e?.returnMessages??!1,inputKey:e?.inputKey,outputKey:e?.outputKey}),Object.defineProperty(this,"humanPrefix",{enumerable:!0,configurable:!0,writable:!0,value:"Human"}),Object.defineProperty(this,"aiPrefix",{enumerable:!0,configurable:!0,writable:!0,value:"AI"}),Object.defineProperty(this,"memoryKey",{enumerable:!0,configurable:!0,writable:!0,value:"history"}),this.humanPrefix=e?.humanPrefix??this.humanPrefix,this.aiPrefix=e?.aiPrefix??this.aiPrefix,this.memoryKey=e?.memoryKey??this.memoryKey}get memoryKeys(){return[this.memoryKey]}async loadMemoryVariables(e){let r=await this.chatHistory.getMessages();return this.returnMessages?{[this.memoryKey]:r}:{[this.memoryKey]:yf(r,this.humanPrefix,this.aiPrefix)}}};Hje();yE();var S5=class extends Yy{constructor(e){super({returnMessages:e?.returnMessages??!1,chatHistory:e?.chatHistory,inputKey:e?.inputKey,outputKey:e?.outputKey}),Object.defineProperty(this,"humanPrefix",{enumerable:!0,configurable:!0,writable:!0,value:"Human"}),Object.defineProperty(this,"aiPrefix",{enumerable:!0,configurable:!0,writable:!0,value:"AI"}),Object.defineProperty(this,"memoryKey",{enumerable:!0,configurable:!0,writable:!0,value:"history"}),Object.defineProperty(this,"k",{enumerable:!0,configurable:!0,writable:!0,value:5}),this.humanPrefix=e?.humanPrefix??this.humanPrefix,this.aiPrefix=e?.aiPrefix??this.aiPrefix,this.memoryKey=e?.memoryKey??this.memoryKey,this.k=e?.k??this.k}get memoryKeys(){return[this.memoryKey]}async loadMemoryVariables(e){let r=await this.chatHistory.getMessages();return this.returnMessages?{[this.memoryKey]:r.slice(-this.k*2)}:{[this.memoryKey]:yf(r.slice(-this.k*2),this.humanPrefix,this.aiPrefix)}}};mme();UM();Hje();var x5=class t{constructor(){this.initMemory(),ga(()=>{let e=this.memory?.chatHistory;this.initMemory(e)})}static getInstance(){return t.instance||(t.instance=new t),t.instance}initMemory(e){let r=ue().contextTurns;this.memory=new S5({k:r*2,memoryKey:"history",inputKey:"input",returnMessages:!0,chatHistory:e}),this.debug&&console.log("Memory initialized with context turns:",r)}getMemory(){return this.memory}async clearChatMemory(){this.debug&&console.log("Clearing chat memory"),await this.memory.clear()}async loadMemoryVariables(){let e=await this.memory.loadMemoryVariables({});return this.debug&&console.log("Loaded memory variables:",e),e}async saveContext(e,r){this.debug&&console.log("Saving to memory - Input:",e,"Output:",r),await this.memory.saveContext(e,r)}};tr();yE();var C5=class t{constructor(){this.initChatPrompt(),this.initQAPrompt(),ga(()=>{this.initChatPrompt(),this.initQAPrompt()}),BL(()=>{this.initChatPrompt(),this.initQAPrompt()})}static getInstance(){return t.instance||(t.instance=new t),t.instance}initChatPrompt(){let e=Ib(),r=yc();r&&pR()&&(e=r.systemPrompt);let n=this.escapeTemplateString(e);this.chatPrompt=cp.fromMessages([gE.fromTemplate(n),new Tb("history"),Ab.fromTemplate("{input}")])}initQAPrompt(){let e=`{system_message}

Answer the question with as detailed as possible based only on the following context:
{context}

Question: {question}
`;this.qaPrompt=cp.fromMessages([gE.fromTemplate(e)])}escapeTemplateString(e){return e.replace(/\{/g,"{{").replace(/\}/g,"}}")}getChatPrompt(){return this.chatPrompt}async getQAPrompt({question:e,context:r,systemMessage:n}){return await this.qaPrompt.format({question:e,context:r,system_message:n})}};var O5=class{constructor(e,r){this.retrievedDocuments=[];this.chatMessages=[];this.chatMessages=[],this.app=e,this.vectorStoreManager=r,this.memoryManager=x5.getInstance(),this.chatModelManager=HN.getInstance(),this.promptManager=C5.getInstance(),this.initialize(),ga(async()=>{await this.createChainWithNewModel()})}getRetrievedDocuments(){return this.retrievedDocuments}async initialize(){await this.createChainWithNewModel()}getChain(){return this.chain}getRetrievalChain(){return this.retrievalChain}validateChainType(e){if(e==null)throw new Error("No chain type set")}validateChatModel(){if(!this.chatModelManager.validateChatModel(this.chatModelManager.getChatModel())){let e="Chat model is not initialized properly, check your API key in Copilot setting and make sure you have API access.";throw new Aue.Notice(e),new Error(e)}}validateChainInitialization(){(!this.chain||!d4e(this.chain))&&(console.error("Chain is not initialized properly, re-initializing chain: ",Sh()),this.createChainWithNewModel({},!1))}storeRetrieverDocuments(e){this.retrievedDocuments=e}async createChainWithNewModel(e={},r=!0){let n=Sh(),o=yc();if(n==="project"&&!o)return;let i=n==="project"?o?.projectModelKey:vG();if(!i)throw new Aue.Notice("No model key found"),new Error("No model key found");try{if(r){let a=aG(i,ue().activeModels);if(a||(console.error("Resetting default model. No model configuration found for: ",i),a=Mb[0],i=a.name+"|"+a.provider),n==="project"&&!a.projectEnabled){let u=ue().activeModels.find(l=>l.enabled&&l.projectEnabled);if(u)a=u,i=u.name+"|"+u.provider,new Aue.Notice(`Model ${a.name} is not available in project mode. Switching to ${u.name}.`);else throw new Error("No project-enabled models available. Please enable a model for project mode in settings.")}let s={...a,...o?.modelConfigs};await this.chatModelManager.setChatModel(s)}this.setChain(n,e),ie(`Setting model to ${i}`)}catch(a){fe(`createChainWithNewModel failed: ${a}`),ie(`modelKey: ${i}`)}}async setChain(e,r={}){if(!this.chatModelManager.validateChatModel(this.chatModelManager.getChatModel())){console.error("setChain failed: No chat model set.");return}this.validateChainType(e);let n=this.chatModelManager.getChatModel(),o=this.memoryManager.getMemory(),i=this.promptManager.getChatPrompt();switch(e){case"llm_chain":{this.chain=x2.createNewLLMChain({llm:n,memory:o,prompt:r.prompt||i,abortController:r.abortController}),dR("llm_chain");break}case"vault_qa":{await this.initializeQAChain(r);let a=new cx({minSimilarityScore:.01,maxK:ue().maxSourceChunks,salientTerms:[]});this.retrievalChain=x2.createConversationalRetrievalChain({llm:n,retriever:a,systemMessage:Ib()},this.storeRetrieverDocuments.bind(this),ue().debug),dR("vault_qa"),ue().debug&&(console.log("New Vault QA chain with hybrid retriever created for entire vault"),console.log("Set chain:","vault_qa"));break}case"copilot_plus":{await this.initializeQAChain(r),this.chain=x2.createNewLLMChain({llm:n,memory:o,prompt:r.prompt||i,abortController:r.abortController}),dR("copilot_plus");break}case"project":{await this.initializeQAChain(r),this.chain=x2.createNewLLMChain({llm:n,memory:o,prompt:r.prompt||i,abortController:r.abortController}),dR("project");break}default:this.validateChainType(e);break}}getChainRunner(){let e=Sh();switch(e){case"llm_chain":return new Coe(this);case"vault_qa":return new Ooe(this);case"copilot_plus":return new a6(this);case"project":return new Poe(this);default:throw new Error(`Unsupported chain type: ${e}`)}}async initializeQAChain(e){e.refreshIndex&&await this.vectorStoreManager.indexVaultToVectorStore()}async runChain(e,r,n,o,i={}){let{debug:a=!1,ignoreSystemMessage:s=!1}=i;a&&console.log(`==== Step 0: Initial user message ====
`,e),this.validateChatModel(),this.validateChainInitialization();let u=this.chatModelManager.getChatModel();if(s||sR(u)){let c=cp.fromMessages([new Tb("history"),Ab.fromTemplate("{input}")]);sR(u)&&(c=cp.fromMessages([[_i,Ib()||""],c])),this.createChainWithNewModel({prompt:c},!1)}return await this.getChainRunner().run(e,r,n,o,i)}async updateMemoryWithLoadedMessages(e){await this.memoryManager.clearChatMemory();for(let r=0;r<e.length;r+=2){let n=e[r],o=e[r+1];n&&o&&n.sender===_i&&await this.memoryManager.getMemory().saveContext({input:n.message},{output:o.message})}}clearHistory(){this.chatMessages=[]}getChatMessages(){return this.chatMessages}setChatMessages(e){this.chatMessages=[...e]}addChatMessage(e){this.chatMessages.push(e)}};var Kl=class t{constructor(e,r,n){this.defaultProjectKey="defaultProjectKey";this.app=e,this.plugin=n,this.currentProjectId=null,this.chainMangerInstance=new O5(e,r),this.projectContextCache=Dy.getInstance(),this.chatMessageCache=new Map,this.fileParserManager=new AA(Ii.getInstance(),this.app.vault,!0,null),Y4e(async()=>{await this.getCurrentChainManager().createChainWithNewModel()}),Z4e(async()=>{pR()||await this.getCurrentChainManager().createChainWithNewModel({refreshIndex:ue().indexVaultToVectorStore==="ON MODE SWITCH"&&(Sh()==="vault_qa"||Sh()==="copilot_plus")})}),BL(async o=>{await this.switchProject(o)}),this.setupProjectListChangeMonitor()}setupProjectListChangeMonitor(){ga(async(e,r)=>{if(!e||!r)return;let n=e.projectList||[],o=r.projectList||[];for(let i of o){let a=n.find(s=>s.id===i.id);a&&JSON.stringify(a)!==JSON.stringify(i)&&(await this.compareAndUpdateCache(a,i),this.currentProjectId===i.id&&await Promise.all([this.loadProjectContext(i),this.getCurrentChainManager().createChainWithNewModel()]))}})}static getInstance(e,r,n){return t.instance||(t.instance=new t(e,r,n)),t.instance}getCurrentChainManager(){return this.chainMangerInstance}async switchProject(e){try{if(CE(!0),ie("Project loading started..."),!e){await this.saveCurrentProjectMessage(),this.currentProjectId=null,await this.loadNextProjectMessage(),this.refreshChatView();return}let r=e.id;if(this.currentProjectId===r)return;await this.saveCurrentProjectMessage(),this.currentProjectId=r,await this.loadNextProjectMessage(),await this.getCurrentChainManager().createChainWithNewModel(),this.fileParserManager=new AA(Ii.getInstance(),this.app.vault,!0,e),await this.loadProjectContext(e),this.refreshChatView(),ie(`Switched to project: ${e.name}`)}catch(r){throw fe(`Failed to switch project: ${r}`),r}finally{CE(!1)}}async saveCurrentProjectMessage(){this.chatMessageCache.set(this.currentProjectId?this.currentProjectId:this.defaultProjectKey,this.getCurrentChainManager().getChatMessages()),await this.plugin.autosaveCurrentChat()}async loadNextProjectMessage(){let e=this.getCurrentChainManager(),r=this.chatMessageCache.get(this.currentProjectId?this.currentProjectId:this.defaultProjectKey)??[];e.setChatMessages(r),await kj(r,e.memoryManager)}async loadProjectContext(e){try{if(!e.contextSource)return gh(`[loadProjectContext] Project ${e.name}: No contextSource. Aborting.`),null;ie(`[loadProjectContext] Starting for project: ${e.name}`);let r=await this.projectContextCache.get(e),n=r||{markdownContext:"",webContexts:{},youtubeContexts:{},fileContexts:{},timestamp:Date.now(),markdownNeedsReload:!0};r?ie(`[loadProjectContext] Project ${e.name}: Existing cache found. MarkdownNeedsReload: ${n.markdownNeedsReload}`):ie(`[loadProjectContext] Project ${e.name}: No existing cache found, building fresh context.`);let[o]=await Promise.all([this.processMarkdownFiles(e,n),this.processWebUrls(e,n),this.processYoutubeUrls(e,n)]);if(o.fileContexts){let i=Object.keys(o.fileContexts).length;if(ie(`[loadProjectContext] Project ${e.name}: Checking ${i} fileContexts for non-markdown processing.`),i>0){this.fileParserManager=new AA(Ii.getInstance(),this.app.vault,!0,e);let a=0;for(let s in o.fileContexts){let u=this.app.vault.getAbstractFileByPath(s);if(u instanceof P5.TFile&&u.extension!=="md"&&this.fileParserManager.supportsExtension(u.extension))try{await this.projectContextCache.getFileContext(e,s)||(ie(`[loadProjectContext] Project ${e.name}: Parsing/caching new/updated file: ${s}`),await this.fileParserManager.parseFile(u,this.app.vault),a++)}catch(l){fe(`[loadProjectContext] Project ${e.name}: Error parsing file ${s}:`,l)}}a>0&&ie(`[loadProjectContext] Project ${e.name}: Processed and cached ${a} non-markdown files.`)}}return o.timestamp=Date.now(),await this.projectContextCache.set(e,o),ie(`[loadProjectContext] Completed for project: ${e.name}.`),o}catch(r){throw fe(`[loadProjectContext] Failed for project ${e.name}:`,r),r}}async compareAndUpdateCache(e,r){try{if(!await this.projectContextCache.get(e))return!0;let o=e.contextSource?.inclusions||"",i=r.contextSource?.inclusions||"",a=e.contextSource?.exclusions||"",s=r.contextSource?.exclusions||"";(o!==i||a!==s)&&(await this.projectContextCache.invalidateMarkdownContext(r),ie(`Markdown configuration changed for project ${r.name}, marking for reload`));let u=e.contextSource?.webUrls||"",l=r.contextSource?.webUrls||"";if(u!==l){let f=u.split(`
`).filter(m=>m.trim()),p=l.split(`
`).filter(m=>m.trim());for(let m of f)p.includes(m)||await this.projectContextCache.removeWebUrl(r,m)}let c=e.contextSource?.youtubeUrls||"",d=r.contextSource?.youtubeUrls||"";if(c!==d){let f=c.split(`
`).filter(m=>m.trim()),p=d.split(`
`).filter(m=>m.trim());for(let m of f)p.includes(m)||await this.projectContextCache.removeYoutubeUrl(r,m)}}catch(n){fe(`Error comparing project configurations: ${n}`)}}refreshChatView(){let e=this.app.workspace.getLeavesOfType(_s)[0]?.view;e&&e.updateView()}async getProjectContext(e){let r=ue().projectList.find(o=>o.id===e);if(!r)return gh(`[getProjectContext] Project not found for ID: ${e}`),null;ie(`[getProjectContext] Getting context for project: ${r.name} (ID: ${e})`);let n=this.projectContextCache.getSync(r);if(!n||n.markdownNeedsReload){n?ie(`[getProjectContext] Project ${r.name}: Markdown needs reload. Triggering full load.`):ie(`[getProjectContext] Project ${r.name}: Memory cache miss. Triggering full load.`);let o=await this.loadProjectContext(r);if(!o)return fe(`[getProjectContext] Project ${r.name}: loadProjectContext returned null.`),null;n=o}else ie(`[getProjectContext] Project ${r.name}: Memory cache hit and markdown OK. Using existing context.`);return this.formatProjectContextWithFiles(n,r)}async formatProjectContextWithFiles(e,r){let n=[];if(e.markdownContext&&n.push(`## Markdown Files
${e.markdownContext}`),Object.keys(e.webContexts).length>0&&n.push(`## Web Content
${Object.values(e.webContexts).join(`

`)}`),Object.keys(e.youtubeContexts).length>0&&n.push(`## YouTube Content
${Object.values(e.youtubeContexts).join(`

`)}`),Object.keys(e.fileContexts).length>0){let o=Object.entries(e.fileContexts).filter(([i])=>i.split(".").pop()?.toLowerCase()!=="md");if(o.length>0){let i=o.map(async([s,u])=>{let l=s.split("/"),c=l[l.length-1],d=c.split(".").pop()||"",f=await this.projectContextCache.getFileContext(r,s)||"[Content not available]";return`[[${c}]]
path: ${s}
type: ${d}
modified: ${new Date(u.timestamp).toISOString()}

${f}`}),a=await Promise.all(i);a.length>0&&n.push(`## Other Files
${a.join(`

`)}`)}}return`
# Project Context
The following information is the relevant context for this project. Use this information to inform your responses when appropriate:

<ProjectContext>
${n.join(`

`)}
</ProjectContext>
`}formatProjectContext(e){let r=[];if(e.markdownContext&&r.push(`## Markdown Files
${e.markdownContext}`),Object.keys(e.webContexts).length>0&&r.push(`## Web Content
${Object.values(e.webContexts).join(`

`)}`),Object.keys(e.youtubeContexts).length>0&&r.push(`## YouTube Content
${Object.values(e.youtubeContexts).join(`

`)}`),Object.keys(e.fileContexts).length>0){let n="";for(let[o,i]of Object.entries(e.fileContexts)){let a=o.split("/"),s=a[a.length-1],u=s.split(".").pop()||"";n+=`[[${s}]]
path: ${o}
type: ${u}
modified: ${new Date(i.timestamp).toISOString()}

`}n&&r.push(`## Other Files
${n}`)}return`
# Project Context
The following information is the relevant context for this project. Use this information to inform your responses when appropriate:

<ProjectContext>
${r.join(`

`)}
</ProjectContext>
`}async processMarkdownFiles(e,r){ie(`[processMarkdownFiles] Starting for project: ${e.name}`);let n=Object.keys(r.fileContexts||{}).length;if(e.contextSource?.inclusions||e.contextSource?.exclusions){r=await this.projectContextCache.updateProjectFilesFromPatterns(e,r);let o=Object.keys(r.fileContexts||{}).length;if(o>n&&ie(`[processMarkdownFiles] Project ${e.name}: Added ${o-n} new file references via updateProjectFilesFromPatterns.`),r.markdownNeedsReload||!r.markdownContext||!r.markdownContext.trim()){ie(`[processMarkdownFiles] Project ${e.name}: Processing markdown content.`);let i=await this.processFileContext(e.contextSource.inclusions,e.contextSource.exclusions,e);r.markdownContext=i,r.markdownNeedsReload=!1,ie(`[processMarkdownFiles] Project ${e.name}: Markdown content updated.`)}else ie(`[processMarkdownFiles] Project ${e.name}: Markdown content already up-to-date.`)}return ie(`[processMarkdownFiles] Completed for project: ${e.name}. Total fileContexts: ${Object.keys(r.fileContexts||{}).length}`),r}async processFileContext(e,r,n){if(!e&&!r||!n)return"";let{inclusions:o,exclusions:i}=Ud({inclusions:e,exclusions:r,isProject:!0}),a=this.app.vault.getFiles().filter(u=>u.extension==="md"&&Hs(u,o,i));ie(`Found ${a.length} markdown files to process for project context`);let s=await Promise.all(a.map(async u=>{let l="",c="";try{let d=await this.app.vault.adapter.stat(u.path);c=`[[${u.basename}]]
path: ${u.path}
type: ${u.extension}
created: ${d?new Date(d.ctime).toISOString():"unknown"}
modified: ${d?new Date(d.mtime).toISOString():"unknown"}`,l=await this.app.vault.read(u),ie(`Completed processing markdown file: ${u.path}`)}catch(d){fe(`Error processing file ${u.path}: ${d}`),l=`[Error: ${Go(d)}]`}return`${c}

${l}`}));return ie("All markdown files processed for project context"),s.join(`

`)}async processWebUrls(e,r){ie(`[processWebUrls] Starting for project: ${e.name}`);let n=e.contextSource?.webUrls?.trim()||"";if(!n)return Object.keys(r.webContexts).length>0&&(ie(`[processWebUrls] Project ${e.name}: Clearing all Web contexts as none are configured.`),r.webContexts={}),r;let o=n.split(`
`).filter(c=>c.trim());ie(`[processWebUrls] Project ${e.name}: Found ${o.length} URLs in config.`);let i=Object.keys(r.webContexts),a=o.filter(c=>!r.webContexts[c]);a.length>0&&ie(`[processWebUrls] Project ${e.name}: Fetching content for ${a.length} new/updated Web URLs.`);let s=i.filter(c=>!o.includes(c));if(s.length>0){ie(`[processWebUrls] Project ${e.name}: Removing ${s.length} obsolete Web URL contexts.`);for(let c of s)delete r.webContexts[c]}let u=a.map(async c=>{let d=await this.processWebUrlsContext(c);return d&&ie(`[processWebUrls] Project ${e.name}: Successfully fetched content for URL: ${c.substring(0,50)}...`),{url:c,context:d}});return(await Promise.all(u)).forEach(c=>{c&&c.context?r.webContexts[c.url]=c.context:c&&!c.context&&gh(`[processWebUrls] Project ${e.name}: Fetched empty content for Web URL: ${c.url}`)}),ie(`[processWebUrls] Completed for project: ${e.name}. Total Web contexts: ${Object.keys(r.webContexts).length}`),r}async processYoutubeUrls(e,r){ie(`[processYoutubeUrls] Starting for project: ${e.name}`);let n=e.contextSource?.youtubeUrls?.trim()||"";if(!n)return Object.keys(r.youtubeContexts).length>0&&(ie(`[processYoutubeUrls] Project ${e.name}: Clearing all YouTube contexts as none are configured.`),r.youtubeContexts={}),r;let o=n.split(`
`).filter(c=>c.trim());ie(`[processYoutubeUrls] Project ${e.name}: Found ${o.length} YouTube URLs in config.`);let i=Object.keys(r.youtubeContexts),a=o.filter(c=>!r.youtubeContexts[c]);a.length>0&&ie(`[processYoutubeUrls] Project ${e.name}: Fetching transcripts for ${a.length} new/updated YouTube URLs.`);let s=i.filter(c=>!o.includes(c));if(s.length>0){ie(`[processYoutubeUrls] Project ${e.name}: Removing ${s.length} obsolete YouTube URL contexts.`);for(let c of s)delete r.youtubeContexts[c]}let u=a.map(async c=>{let d=await this.processYoutubeUrlsContext(c);return d&&ie(`[processYoutubeUrls] Project ${e.name}: Successfully fetched transcript for YouTube URL: ${c.substring(0,50)}...`),{url:c,context:d}});return(await Promise.all(u)).forEach(c=>{c&&c.context?r.youtubeContexts[c.url]=c.context:c&&!c.context&&gh(`[processYoutubeUrls] Project ${e.name}: Fetched empty transcript for YouTube URL: ${c.url}`)}),ie(`[processYoutubeUrls] Completed for project: ${e.name}. Total YouTube contexts: ${Object.keys(r.youtubeContexts).length}`),r}async processWebUrlsContext(e){if(!e?.trim())return"";try{let r=FB.getInstance(),{urlContext:n}=await r.processUrls(e);return n||""}catch(r){return fe(`Failed to process web URLs: ${r}`),new P5.Notice(`Failed to process web URLs: ${Go(r)}`),""}}async processYoutubeUrlsContext(e){if(!e?.trim())return"";let n=e.split(`
`).filter(i=>i.trim()).map(async i=>{try{let a=await Ii.getInstance().youtube4llm(i);return a.response.transcript?`

YouTube transcript from ${i}:
${a.response.transcript}`:""}catch(a){return fe(`Failed to process YouTube URL ${i}: ${a}`),new P5.Notice(`Failed to process YouTube URL ${i}: ${Go(a)}`),""}});return(await Promise.all(n)).join("")}onunload(){this.projectContextCache.cleanup()}};kr();Ko();tr();Vje();kr();Ko();tr();var Og=require("@codemirror/view"),AP=require("@codemirror/state");function X$t(t,e,r=void 0){let n={force:()=>{}},o=null;async function*i(...a){o&&clearTimeout(o);let s=null;try{await new Promise(u=>{s=o=setTimeout(()=>u(),e),n.force=()=>{o&&clearTimeout(o),u()}})}catch{if(r!==void 0)throw r}for await(let u of t(...a)){if(s!==o)break;yield u}}return{debounced:i,force:()=>n.force()}}var Ehn=Object.defineProperty,Thn=(t,e,r)=>e in t?Ehn(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,oU=(t,e,r)=>(Thn(t,typeof e!="symbol"?e+"":e,r),r),Iue=AP.StateField.define({create(){return{suggestion:null}},update(t,e){let r=e.effects.find(n=>n.is(Yje));return e.state.doc&&r&&(r.value.doc==null||e.state.doc==r.value.doc)?{suggestion:r.value.suggestion}:{suggestion:null}}}),Yje=AP.StateEffect.define();function Ahn(t,e){let r=t.state.selection.main.head,n=[],o=Og.Decoration.widget({widget:new Wje(e),side:1});return n.push(o.range(r)),Og.Decoration.set(n)}var Wje=class extends Og.WidgetType{constructor(e){super(),oU(this,"suggestion"),this.suggestion=e}toDOM(){let e=document.createElement("span");return e.style.opacity="0.4",e.className="cm-inline-suggestion",e.textContent=this.suggestion,e}},Kje=t=>{let e=0;return Og.ViewPlugin.fromClass(class{async update(r){let n=r.state.doc;if(!r.docChanged)return;let o=++e;for await(let i of t(r.state)){if(o!=e)return;r.view.dispatch({effects:Yje.of({suggestion:i,doc:n})})}}})},Gje=class{constructor(){oU(this,"decorations"),this.decorations=Og.Decoration.none}update(e){var r;let n=(r=e.state.field(Iue))==null?void 0:r.suggestion;if(!n){this.decorations=Og.Decoration.none;return}this.decorations=Ahn(e.view,n.display_suggestion)}},Q$t=Og.ViewPlugin.fromClass(Gje,{decorations:t=>t.decorations}),Jje=class{constructor(e,r){oU(this,"suggestFn"),oU(this,"keymap"),oU(this,"completionId"),oU(this,"run",n=>{var o,i;let a=(o=n.state.field(Iue))==null?void 0:o.suggestion;return a?(n.dispatch({...Ihn(n.state,a.complete_suggestion,n.state.selection.main.head,n.state.selection.main.head)}),(i=a.accept_hook)==null||i.call(a),(async()=>{if(this.suggestFn==null)return;let s=++this.completionId;for await(let u of this.suggestFn(n.state)){if(s!=this.completionId)return;n.dispatch({effects:Yje.of({suggestion:{complete_suggestion:u.complete_suggestion,display_suggestion:u.display_suggestion,accept_hook:u.accept_hook},doc:null})})}})(),!0):!1}),this.suggestFn=e,this.keymap=AP.Prec.highest(Og.keymap.of([{key:r,run:n=>this.run(n)}])),this.completionId=0}};function Ihn(t,e,r,n){return{...t.changeByRange(o=>{if(o==t.selection.main)return{changes:{from:r,to:n,insert:e},range:AP.EditorSelection.cursor(r+e.length)};let i=n-r;return!o.empty||i&&t.sliceDoc(o.from-i,o.from)!=t.sliceDoc(r,n)?{range:o}:{changes:{from:o.from-i,to:o.from,insert:e},range:AP.EditorSelection.cursor(o.from-i+e.length)}}),userEvent:"input.complete"}}function eBt(t){return typeof t=="string"?{complete_suggestion:t,display_suggestion:t}:t}function Mhn(t){return async function*(e){let r=await t(e);if(typeof r=="string"||"complete_suggestion"in r){yield eBt(r);return}for await(let n of r)yield eBt(n)}}function Mue(t){let{delay:e=500,accept_shortcut:r="Tab"}=t,n=Mhn(t.fetchFn),{debounced:o,force:i}=X$t(n,e);return{extension:r?[Iue,Kje(o),Q$t,new Jje(t.continue_suggesting?n:null,r).keymap]:[Iue,Kje(o),Q$t],force_fetch:i}}var tNe=require("obsidian");var Zje=class{process(e){let{prefix:r,suffix:n}=e,{completion:o}=e;return o=this.removeWordOverlapPrefix(r,o),o=this.removeWordOverlapSuffix(o,n),o=this.removeCharacterOverlapPrefix(r,o),o=this.removeCharacterOverlapSuffix(o,n),o.startsWith(" ")&&this.endsWithMarker(r)&&(o=o.trimStart()),o}removeWordOverlapPrefix(e,r){let n=r.trimStart(),o=this.getPotentialPrefixSegments(e);for(let i of o)if(n.startsWith(i))return n.substring(i.length);return r}removeWordOverlapSuffix(e,r){let n=r.trimStart(),o=this.getPotentialCompletionSegments(e);for(let i of o)if(n.startsWith(i)&&e.endsWith(i))return e.substring(0,e.length-i.length);return e}removeCharacterOverlapPrefix(e,r){let n=e.length-1,o=0,i=0;for(;o<r.length&&n>=0&&r[o]===e[n]&&this.isWhiteSpaceOrCommonMarker(r[o]);)i++,n--,o++;return i>0?r.substring(i):r}removeCharacterOverlapSuffix(e,r){let n=0,o=e.length-1,i=0;for(;n<r.length&&o>=0&&e[o]===r[n]&&this.isWhiteSpaceOrCommonMarker(e[o]);)i++,n++,o--;return i>0?e.substring(0,e.length-i):e}getPotentialPrefixSegments(e){let r=[],n=this.startLocationOfEachWordOrMarker(e);for(let o=n.length-1;o>=0;o--)r.push(e.substring(n[o]));return e.length>0&&(r.length===0||r[r.length-1]!==e)&&r.push(e),e.length>1&&(r.length===0||r[r.length-1]!==e.slice(-1))&&r.push(e.slice(-1)),e.length>2&&(r.length===0||r[r.length-1]!==e.slice(-2))&&r.push(e.slice(-2)),[...new Set(r)].sort((o,i)=>i.length-o.length)}getPotentialCompletionSegments(e){let r=[],n=this.startLocationOfEachWordOrMarker(e);for(let o=0;o<n.length;o++)for(let i=o;i<n.length;i++){let a=i+1<n.length?n[i+1]:e.length;r.push(e.substring(n[o],a))}return e.length>0&&(r.length===0||r[r.length-1]!==e)&&r.push(e),[...new Set(r)].sort((o,i)=>i.length-o.length)}startLocationOfEachWordOrMarker(e){let r=[];if(e.length===0)return r;this.isWhiteSpaceChar(e[0])||r.push(0);for(let n=1;n<e.length;n++){let o=this.isWhiteSpaceChar(e[n-1]),i=this.isWhiteSpaceChar(e[n]),a=this.isCommonMarker(e[n-1]),s=this.isCommonMarker(e[n]);o&&!i||a&&!s&&!i?r.push(n):(!a&&s||o&&s)&&(r.includes(n)||r.push(n))}return r}isWhiteSpaceChar(e){return e!==void 0&&/\s/.test(e)}isCommonMarker(e){return e!==void 0&&/[-*>#$]/.test(e)}isWhiteSpaceOrCommonMarker(e){return this.isWhiteSpaceChar(e)||this.isCommonMarker(e)}endsWithMarker(e){if(e.length===0)return!1;if(this.isCommonMarker(e[e.length-1]))return!0;let r=e.length>=2?e.slice(-2):"",n=e.length>=3?e.slice(-3):"";return!!(r==="##"||r.match(/^#{1,6} $/)||r==="--"||n==="-->"||e.includes("## Heading"))}},Xje=class{process(e){let{prefix:r,suffix:n,completion:o,context:i}=e,a=o;return r.endsWith(" ")&&a.startsWith(" ")&&(a=a.trimStart()),n.startsWith(" ")&&a.endsWith(" ")&&(a=a.trimEnd()),(i==="UnorderedList"||i==="NumberedList"||i==="TaskList")&&r.endsWith(`
`)&&a.startsWith(`
`)&&(a=a.substring(1)),a}},Qje=class{process(e){let{completion:r,context:n}=e;if(n==="CodeBlock"){let o=r;return o=o.replace(/```[a-zA-Z]*[ \t]*\n?/g,""),o=o.replace(/\n?```[ \t]*\n?/g,""),o.endsWith(`
`)&&(o=o.slice(0,-1)),o}return r}},Rue=class{constructor(){this.processors=[];this.processors.push(new Qje),this.processors.push(new Zje),this.processors.push(new Xje)}process(e,r,n,o){let a={prefix:e,suffix:r,completion:n,context:o};for(let s of this.processors)a.completion=s.process(a);return a.completion}};C2();var tBt=require("obsidian");function rBt(t,e=20){let r=app.metadataCache.getFileCache(t),n=[];if(r?.links)for(let o of r.links){let i=app.metadataCache.getFirstLinkpathDest(o.link,t.path);if(i&&(n.push(i),n.length>=e))break}if(r?.embeds&&n.length<e)for(let o of r.embeds){let i=app.metadataCache.getFirstLinkpathDest(o.link,t.path);if(i&&(n.push(i),n.length>=e))break}return[...new Set(n)]}function nBt(t,e=20){let r=[],n=app.metadataCache.getBacklinksForFile(t);if(n?.data)for(let[o]of n.data){let i=app.vault.getAbstractFileByPath(o);if(i instanceof tBt.TFile&&(r.push(i),r.length>=e))break}return r}tr();var eNe=require("obsidian"),Rhn=.4,jhn=20,oBt=.7,jue=.3;async function Nhn(t,e){let r=ue().debug,n=await IO.getDocsByPath(e,t);if(!n)return r&&console.log("No hits found for note:",t),[];let o=[];for(let i of n){if(!i?.document?.embedding){r&&console.log("No embedding found for note:",t);continue}o.push(i.document.embedding)}return o}function Dhn(t){if(t.length===0)return[];let e=t[0].length,r=Array(e).fill(0);return t.forEach(n=>{n.forEach((o,i)=>{r[i]+=o/e})}),r}function Lhn(t,e){let r=new Map;for(let n of t){let o=r.get(n.document.path);o?n.score>o&&r.set(n.document.path,n.score):r.set(n.document.path,n.score)}return r.delete(e),r}async function Fhn({db:t,filePath:e}){let r=ue().debug,n=await Nhn(e,t),o=Dhn(n);if(o.length===0)return r&&console.log("No embeddings found for note:",e),new Map;let i=await IO.getDocsByEmbedding(t,o,{limit:jhn,similarity:Rhn});return Lhn(i,e)}function khn(t){let e=new Map,n=rBt(t).map(a=>a.path);for(let a of n)e.set(a,{links:!0,backlinks:!1});let i=nBt(t).map(a=>a.path);for(let a of i)e.has(a)?e.set(a,{links:!0,backlinks:!0}):e.set(a,{links:!1,backlinks:!0});return e}function $hn(t,e){let r=new Map,n=oBt+jue;for(let[o,i]of t)r.set(o,i*oBt/n);for(let[o,i]of e){let a=0;i.links&&i.backlinks?a=jue:(i.links||i.backlinks)&&(a=jue*.8),r.set(o,(r.get(o)??0)+a)}return r}async function Due({db:t,filePath:e}){let r=app.vault.getAbstractFileByPath(e);if(!(r instanceof eNe.TFile))return[];let n=await Fhn({db:t,filePath:e}),o=khn(r),i=$hn(n,o);return Array.from(i.entries()).sort((s,u)=>{let l=s[0],c=u[0],d=Nue(n.get(l)??0),f=Nue(n.get(c)??0);return d!==f?f-d:u[1]-s[1]}).map(([s,u])=>{let l=app.vault.getAbstractFileByPath(s);return l instanceof eNe.TFile?{document:{path:s,title:l.basename},metadata:{score:u,similarityScore:n.get(s),hasOutgoingLinks:o.get(s)?.links??!1,hasBacklinks:o.get(s)?.backlinks??!1}}:null}).filter(s=>s!==null)}function Nue(t){return t>.7?3:t>.55?2:1}var iBt=require("obsidian"),Bhn={cjk:[[19968,40959],[13312,19903],[131072,173791],[173824,177983],[177984,178207],[178208,183983]],japanese:[[12352,12447],[12448,12543]],korean:[[44032,55215],[4352,4607]],other:[[3584,3711],[1536,1791],[2304,2431],[2432,2559],[2688,2815],[2944,3071]]};function qhn(t,e){let r=t.codePointAt(0);return r?e.some(([n,o])=>r>=n&&r<=o):!1}function aBt(t){let e=t.replace(/[\p{Emoji}\p{Symbol}\p{Punctuation}]/gu,"");if(!e)return!1;for(let r of e)if(Object.values(Bhn).some(n=>qhn(r,n)))return!0;return!1}function sBt(t,e){let r="",n="",o=Math.max(0,e.line-5);for(let u=o;u<e.line;u++)r+=t.getLine(u)+`
`;let i=t.getLine(e.line);r+=i.slice(0,e.ch),(e.ch===0||e.ch===i.length&&i.trim()==="")&&(r+=`
`);let a=Math.max(0,e.line-50);for(let u=a;u<e.line;u++)n+=t.getLine(u)+`
`;n+=i.slice(0,e.ch)+"{{CURSOR}}"+i.slice(e.ch)+`
`;let s=Math.min(t.lineCount()-1,e.line+50);for(let u=e.line+1;u<=s;u++)n+=t.getLine(u)+`
`;return{prefix:r,noteContext:n}}var wI=class wI{constructor(){this.currentNotePath=null;this.cachedNotes=null;this.cachedNoteTitles=[]}static getInstance(){return wI.instance||(wI.instance=new wI),wI.instance}getRelevantNoteTitles(){return this.cachedNoteTitles}async getRelevantNotes(e){if(!e)return this.currentNotePath=null,this.cachedNotes=null,this.cachedNoteTitles=[],"";if(this.currentNotePath===e.path&&this.cachedNotes!==null)return this.cachedNotes;let r=await qi.getInstance().getDb(),o=(await Due({db:r,filePath:e.path})).slice(0,wI.MAX_RELEVANT_NOTES);this.cachedNoteTitles=o.map(a=>a.document.title);let i=await Promise.all(o.map(async a=>{let s=app.vault.getAbstractFileByPath(a.document.path);if(!(s instanceof iBt.TFile))return"";let u=await app.vault.cachedRead(s);if(!u)return"";let l=u.length>3e3?u.slice(0,3e3)+"...":u;return`[[${a.document.title}]]:

${l}`}));return this.currentNotePath=e.path,this.cachedNotes=i.join(`

`),this.cachedNotes}clearCache(){this.currentNotePath=null,this.cachedNotes=null,this.cachedNoteTitles=[]}};wI.MAX_RELEVANT_NOTES=3;var Lue=wI;var VN=class{constructor(){this.MIN_WORD_LENGTH=4;this.STOP_WORDS=new Set(["a","ain","all","am","an","and","any","are","as","at","be","but","by","can","d","did","do","don","few","for","had","has","he","her","him","his","how","i","if","in","is","isn","it","its","ll","m","ma","me","my","no","nor","not","now","o","of","off","on","or","our","out","own","re","s","she","so","t","the","to","too","up","ve","was","we","who","why","won","y","you"])}extractWords(e){return(this.preprocessText(e).match(/\b[a-zA-Z]+(?:'[a-zA-Z]+)?\b/g)||[]).filter(o=>this.isValidWord(o))}isWordCharacter(e){return/[a-zA-Z']/.test(e)}isValidWord(e){return!(e.length<this.MIN_WORD_LENGTH||!/^[a-zA-Z]+(?:'[a-zA-Z]+)?$/.test(e)||this.STOP_WORDS.has(e.toLowerCase())||e===e.toUpperCase()&&e.length>4)}getLanguage(){return"en"}preprocessText(e){return e.replace(/```[\s\S]*?```/g," ").replace(/`[^`]+`/g," ").replace(/\[\[([^\]]+)\]\]/g,"$1").replace(/\[([^\]]+)\]\([^)]+\)/g,"$1").replace(/<[^>]+>/g," ").replace(/^#+\s+/gm,"").replace(/[*_]{1,2}([^*_]+)[*_]{1,2}/g,"$1").replace(/^\s*[-*+]\s+/gm,"").replace(/^\s*\d+\.\s+/gm,"").replace(/\s+/g," ").trim()}};var T5=class{constructor(e=5e4){this.wordCount=0;this.root=this.createNode(),this.maxSize=e}createNode(){return{children:new Map,isEndOfWord:!1,wordEntry:void 0}}addWord(e,r){if(!e||e.length<4||this.wordCount>=this.maxSize&&!this.hasWord(e))return;let n=this.root;for(let o of e)n.children.has(o)||n.children.set(o,this.createNode()),n=n.children.get(o);n.isEndOfWord?n.wordEntry&&(n.wordEntry.frequency++,n.wordEntry.lastSeen=Date.now(),r&&!n.wordEntry.contexts.includes(r)&&(n.wordEntry.contexts.push(r),n.wordEntry.contexts.length>10&&(n.wordEntry.contexts=n.wordEntry.contexts.slice(-10)))):(n.isEndOfWord=!0,n.wordEntry={word:e,frequency:1,contexts:r?[r]:[],lastSeen:Date.now()},this.wordCount++)}hasWord(e){let r=this.findNode(e);return r!==null&&r.isEndOfWord}getWordEntry(e){let r=this.findNode(e);return r&&r.isEndOfWord&&r.wordEntry?r.wordEntry:null}findNode(e){let r=this.root;for(let n of e){if(!r.children.has(n))return null;r=r.children.get(n)}return r}getSuggestions(e,r=10){if(!e)return[];let n=[],o=this.generatePrefixVariants(e);for(let a of o){let s=this.findNode(a);if(s&&(this.collectWords(s,a,n,r,e),n.length>=r))break}let i=this.deduplicateSuggestions(n);return i.sort((a,s)=>s.score-a.score),i.slice(0,r)}generatePrefixVariants(e){let r=new Set;return r.add(e),r.add(e.toLowerCase()),e.length>0&&r.add(e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()),r.add(e.toUpperCase()),Array.from(r)}deduplicateSuggestions(e){let r=new Map;for(let n of e){let o=n.word,i=r.get(o);(!i||n.score>i.score)&&r.set(o,n)}return Array.from(r.values())}collectWords(e,r,n,o,i){if(!(n.length>=o)){if(e.isEndOfWord&&e.wordEntry){let a=this.calculateScore(e.wordEntry)+this.getCaseMatchBonus(r,i);n.push({word:r,score:a,source:"vault"})}for(let[a,s]of e.children)this.collectWords(s,r+a,n,o,i)}}getCaseMatchBonus(e,r){if(e.length<r.length)return 0;let n=e.substring(0,r.length);return n===r?2:this.hasSameCasePattern(n,r)?1.5:1}hasSameCasePattern(e,r){if(e.length<r.length)return!1;for(let n=0;n<r.length;n++){let o=e[n],i=r[n],a=o===o.toUpperCase(),s=i===i.toUpperCase();if(a!==s)return!1}return!0}calculateScore(e){let r=Math.log(e.frequency+1)*10,n=Math.max(0,(Date.now()-e.lastSeen)/(1e3*60*60*24)),o=Math.max(0,10-n);return r+o}getStats(){let e=0,r=0,n=(o,i=0)=>{e++,r=Math.max(r,i);for(let a of o.children.values())n(a,i+1)};return n(this.root),{wordCount:this.wordCount,nodeCount:e,maxDepth:r}}clear(){this.root=this.createNode(),this.wordCount=0}getAllWords(){let e=[],r=n=>{n.isEndOfWord&&n.wordEntry&&e.push(n.wordEntry);for(let o of n.children.values())r(o)};return r(this.root),e}addWords(e,r){for(let n of e)this.addWord(n,r)}pruneByFrequency(e=2){let r=0,n=o=>{let i=[];for(let[a,s]of o.children)n(s)&&i.push(a);for(let a of i)o.children.delete(a);return o.isEndOfWord&&o.wordEntry&&o.wordEntry.frequency<e&&(o.isEndOfWord=!1,o.wordEntry=void 0,this.wordCount--,r++),o.children.size===0&&!o.isEndOfWord};return n(this.root),r}};Ko();var uBt=require("obsidian");var A5=class{constructor(e,r,n,o){this.isScanning=!1;this.vault=e,this.settings=r,this.performance=n,this.tokenizer=o||new VN}async scanVault(e){let r=Date.now(),n=[],o=new Map;try{let i=this.vault.getMarkdownFiles(),a=0;for(let l of i)try{e&&e({currentFile:l.path,processedFiles:a,totalFiles:i.length,foundWords:o.size});try{let d=await this.vault.adapter.stat(l.path);if(d&&d.size>this.performance.maxFileSize){n.push(`Skipped large file: ${l.path}`);continue}}catch{}let c=await this.vault.read(l);await this.processFile(l.path,c,o),a++,a%this.performance.batchSize===0&&await new Promise(d=>setTimeout(d,1))}catch(c){let d=`Error processing file ${l.path}: ${c}`;fe(d),n.push(d)}(this.settings.includeFileNames||this.settings.includeFolderNames)&&this.processFileAndFolderNames(o);let s=Date.now()-r;return{wordCount:o.size,fileCount:a,errors:n,scanTimeMs:s,wordMap:o}}catch(i){throw fe("[Word Completion] Vault scan failed:",i),i}}async scanFile(e){if(e.stat.size>this.performance.maxFileSize)return[];if(e.extension!=="md")return[];try{let r=await this.vault.read(e);return this.extractWordsFromText(r)}catch(r){return fe(`[Word Completion] Error reading file ${e.path}:`,r),[]}}extractWordsFromText(e){return!e||e.trim().length===0?[]:this.tokenizer.extractWords(e).filter(n=>{if(n.length<this.settings.minWordLength)return!1;for(let o of this.settings.excludePatterns)try{if(new RegExp(o,"i").test(n))return!1}catch(i){fe(`[Word Completion] Invalid exclude pattern: ${o}`,i)}return!0})}extractPathWords(){let e=new Set,r=n=>{let o=n.split("/").filter(Boolean);for(let i of o)i.replace(/\.[^.]+$/,"").split(/[^a-zA-Z]+/).filter(u=>u.length>=this.settings.minWordLength).filter(u=>this.tokenizer.isValidWord(u)).forEach(u=>e.add(u.toLowerCase()))};if(this.settings.includeFileNames&&this.vault.getMarkdownFiles().forEach(n=>{r(n.path)}),this.settings.includeFolderNames){let n=o=>{r(o.path),o.children.forEach(i=>{i instanceof uBt.TFolder&&n(i)})};n(this.vault.getRoot())}return Array.from(e)}getFilesToScan(){return this.vault.getMarkdownFiles().filter(e=>!(e.stat.size>this.performance.maxFileSize))}isScanningScanVault(){return this.isScanning}getEstimatedScanTime(){let r=this.getFilesToScan().reduce((o,i)=>o+i.stat.size,0);return Math.max(1,r/(1024*1024))*1e3}setTokenizer(e){this.tokenizer=e}updateSettings(e){this.settings=e}updatePerformance(e){this.performance=e}async processFile(e,r,n){let o=this.extractWordsFromText(r);for(let i of o){n.has(i)||n.set(i,{frequency:0,contexts:new Set});let a=n.get(i);a.frequency++,a.contexts.add(e)}}processFileAndFolderNames(e){let r=this.extractPathWords();for(let n of r)e.has(n)||e.set(n,{frequency:0,contexts:new Set}),e.get(n).frequency++,e.get(n).contexts.add("filename")}};Ko();var Zy=class Zy{constructor(e){this.isInitialized=!1;this.lastScanTime=0;this.vault=e,this.settings={...Zy.DEFAULT_SETTINGS},this.performance={...Zy.DEFAULT_PERFORMANCE},this.tokenizer=new VN,this.trie=new T5(this.performance.maxTrieSize),this.scanner=new A5(this.vault,this.settings,this.performance,this.tokenizer)}static getInstance(e){return Zy.instance||(Zy.instance=new Zy(e)),Zy.instance}async initialize(e){if(this.isInitialized)return{wordCount:this.trie.getStats().wordCount,fileCount:0,errors:[],scanTimeMs:0};try{await new Promise(o=>setTimeout(o,100)),this.vault.getAllLoadedFiles().length===0&&await new Promise(o=>setTimeout(o,500));let n=await this.scanner.scanVault(e);return await this.populateTrieFromScanResult(n),this.isInitialized=!0,this.lastScanTime=Date.now(),n}catch(r){throw fe("[Word Completion] Initialization failed:",r),r}}getSuggestions(e){if(!this.isInitialized||!this.settings.enabled)return[];if(!e||e.length<this.settings.minPrefixLength)return[];if(!this.tokenizer.isWordCharacter(e[e.length-1]))return[];try{let r=this.settings.caseSensitive?e:e.toLowerCase();return this.trie.getSuggestions(r,this.settings.maxSuggestions).filter(i=>i.word.toLowerCase()!==e.toLowerCase())}catch(r){return fe("[Word Completion] Error getting suggestions:",r),[]}}shouldTriggerCompletion(e,r){if(!this.isInitialized||!this.settings.enabled)return!1;let n=e.substring(0,r),o=this.getCurrentWord(n);if(!o||o.length<this.settings.minPrefixLength)return!1;if(r>0){let s=e[r-1];if(/\s/.test(s))return!1}return this.getSuggestions(o).length>0}getCurrentWord(e){let r=e.length;for(let n=e.length-1;n>=0;n--){let o=e[n];if(!this.tokenizer.isWordCharacter(o)){r=n+1;break}n===0&&(r=0)}return e.substring(r).trim()}addWord(e,r){if(!(!this.isInitialized||!e||e.length<this.settings.minWordLength)&&this.tokenizer.isValidWord(e)){let n=this.settings.caseSensitive?e:e.toLowerCase();this.trie.addWord(n,r)}}getStats(){return{isInitialized:this.isInitialized,trieStats:this.trie.getStats(),lastScanTime:this.lastScanTime,settings:{...this.settings}}}updateSettings(e){this.settings={...this.settings,...e},this.scanner.updateSettings(this.settings)}updatePerformance(e){this.performance={...this.performance,...e},this.scanner.updatePerformance(this.performance)}reset(){this.trie.clear(),this.isInitialized=!1,this.lastScanTime=0}async rescan(e){return this.reset(),await this.initialize(e)}needsRescan(){return!1}getTokenizer(){return this.tokenizer}setTokenizer(e){this.tokenizer=e,this.scanner.setTokenizer(e)}async populateTrieFromScanResult(e){let r=e.wordMap;if(r)for(let[n,o]of r){let i=this.settings.caseSensitive?n:n.toLowerCase();for(let a=0;a<o.frequency;a++)this.trie.addWord(i,Array.from(o.contexts)[0]||"vault")}}destroy(){this.reset(),Zy.instance=null}};Zy.DEFAULT_SETTINGS={enabled:!0,minPrefixLength:2,maxSuggestions:20,includeVaultWords:!0,includeFileNames:!0,includeFolderNames:!0,caseSensitive:!1,minWordLength:4,excludePatterns:[]},Zy.DEFAULT_PERFORMANCE={maxTrieSize:5e4,maxFileSize:1024*1024,batchSize:100};var WN=Zy;Ko();var Uhn=require("obsidian");var Fue=class t{constructor(e){this.options=e;this.isActive=!1;this.activeRequests=new Map;this.lastRequestTime=0;this.minRequestInterval=100;this.lastCursorPosition=null;this.cacheEnabled=!0;this.handleSettingsChange=(e,r)=>{if(e.autocompleteAcceptKey!==r.autocompleteAcceptKey){let n=this.validateAcceptKey(r.autocompleteAcceptKey);this.acceptKey=n,this.setupGlobalKeyHandler()}e.enableWordCompletion!==r.enableWordCompletion&&(r.enableWordCompletion&&this.initializeWordCompletion(),this.recreateExtension())};this.cache=E5.getInstance(),this.client=Ii.getInstance(),this.postProcessor=new Rue,this.wordCompletionManager=WN.getInstance(app.vault);let r=ue().autocompleteAcceptKey||_h.KEYBIND;this.acceptKey=this.validateAcceptKey(r),this.recreateExtension(),this.setupGlobalKeyHandler(),this.unsubscribeFromSettings=ga(this.handleSettingsChange),this.initializeWordCompletion()}validateAcceptKey(e){return["Tab","Space","ArrowRight"].includes(e)?e:"Tab"}async initializeWordCompletion(){if(ue().enableWordCompletion)try{await this.wordCompletionManager.initialize()}catch(r){fe("[Copilot Autocomplete] Failed to initialize word completion:",r)}}recreateExtension(){let{extension:e,force_fetch:r}=Mue({fetchFn:()=>this.handleUnifiedCompletion(),delay:this.options.delay,continue_suggesting:!1,accept_shortcut:null});this.extension=e,this.forceFetch=r,this.updateActiveEditors()}setupGlobalKeyHandler(){this.globalKeyListener&&document.removeEventListener("keydown",this.globalKeyListener,!0),this.globalKeyListener=e=>{if(!this.isActive)return;let r={Tab:["Tab"],Space:[" ","Space"],ArrowRight:["ArrowRight","Right"]},n=app.workspace.getActiveViewOfType(tNe.MarkdownView);if(!n?.editor)return;let o=n.editor.cm;if(!o)return;let i=this.hasActiveCompletion(o),a;for(let[s,u]of Object.entries(r))if(u.includes(e.key)){a=s;break}if(a===this.acceptKey&&i){let u=o.dom.querySelector(".cm-inline-suggestion")?.textContent||"";if(u){e.preventDefault(),e.stopPropagation();let l=o.state.selection.main.head,c=a==="Space"?" ":"";o.dispatch({changes:[{from:l,to:l,insert:u+c}],selection:{anchor:l+u.length+c.length}}),this.forceFetch();return}}if(e.key==="Tab"&&this.acceptKey!=="Tab"&&i){e.preventDefault(),e.stopPropagation();let s=o.state.selection.main.head;o.dispatch({changes:[{from:s,to:s,insert:"	"}],selection:{anchor:s+1}})}},document.addEventListener("keydown",this.globalKeyListener,!0)}updateActiveEditors(){let e=app.workspace.getLeavesOfType("markdown");for(let r of e){let n=r.view;if(!n?.editor)continue;let o=n.editor.cm;if(o)try{o.dispatch({})}catch(i){fe(`[Copilot Autocomplete] Error updating editor: ${i}`)}}}hasActiveCompletion(e){let r=[".cm-inline-suggestion",".cm-ghost-text"];for(let n of r)if(Array.from(e.dom.querySelectorAll(n)).length>0)return!0;return!1}static getInstance(e){return t.instance||(t.instance=new t(e)),t.instance}setActive(e){this.isActive=e}getExtension(){return this.extension}destroy(){this.globalKeyListener&&document.removeEventListener("keydown",this.globalKeyListener,!0),this.unsubscribeFromSettings&&this.unsubscribeFromSettings(),this.wordCompletionManager&&this.wordCompletionManager.destroy(),this.activeRequests.clear(),this.cache.clear()}shouldContinueSuggesting(e,r){if(e.endsWith("[[")||/\[\[[^\]]*$/.test(e)||r&&!r.startsWith(`
`))return!1;let o=e.split(`
`),i=o[o.length-1];if(/^#{1,6}(\s*)$/.test(i))return!1;let a=e.trim().split(/\s+/).filter(u=>u.replace(/[\p{Emoji}\p{Symbol}\p{Punctuation}]/gu,"").length>0),s=a[a.length-1]||"";return aBt(s)?!0:e.endsWith(" ")}async*handleUnifiedCompletion(){if(!this.isActive)return;let e=app.workspace.getActiveViewOfType(tNe.MarkdownView);if(!e)return;await new Promise(c=>setTimeout(c,10));let r=e.editor,n=r.getCursor(),{prefix:o,noteContext:i}=sBt(r,n),a=r.getLine(n.line).substring(n.ch)||"";if(this.lastCursorPosition){let c=Math.abs(n.line-this.lastCursorPosition.line),d=Math.abs(n.ch-this.lastCursorPosition.ch);(c>0||d>5)&&this.clearActiveRequests()}this.lastCursorPosition={line:n.line,ch:n.ch};let s=Date.now();if(s-this.lastRequestTime<this.minRequestInterval)return;let u=ue();if(this.shouldUseWordCompletion(o,u)){let c=this.getCurrentWordFromPrefix(o);if(!c||c.length<2)return;let d=`word:${c}:${o.slice(-50)}`;if(this.activeRequests.has(d))return;let f=this.wordCompletionManager.getSuggestions(c);if(f.length===0)return;let p=f.some(b=>b.word===c),m=f.some(b=>b.word.length-c.length>=2);if(p&&!m)return;let h=p?f.filter(b=>b.word!==c):f;if(h.length===0)return;try{let b=h.map(E=>E.word),g=o.slice(-1e3),y=a.slice(0,500),w,S,C;if(this.cacheEnabled&&(S=this.cache.generateWordKey(g,y,b),C=this.cache.get(S)),C)w=C;else{let E=this.client.wordcomplete(g,y,b);this.activeRequests.set(d,E),this.lastRequestTime=s,w=await E,this.cacheEnabled&&S&&this.cache.set(S,w),this.activeRequests.delete(d)}let P=w.response.selected_word;if(P&&P!==c){let E=this.generateCaseMatchedCompletion(P,c);E&&(yield{display_suggestion:E,complete_suggestion:E})}}catch(b){this.activeRequests.delete(d),fe("[Copilot Autocomplete] Error with LLM word selection, falling back to trie:",b);let g=h[0],y=this.generateCaseMatchedCompletion(g.word,c);y&&(yield{display_suggestion:y,complete_suggestion:y})}}else{if(!u.enableAutocomplete||!this.shouldContinueSuggesting(o,a))return;let c=o.slice(-this.options.maxContextLength);if(c.length<this.options.minTriggerLength)return;let d=`sentence:${c.slice(-100)}`;if(this.activeRequests.has(d))return;try{let f=u.allowAdditionalContext,p="";f&&(p=await Lue.getInstance().getRelevantNotes(e.file));let m=e.file?.basename||"",h=m?`[[${m}]]:

${c}`:c,b,g,y;if(this.cacheEnabled&&(g=this.cache.generateSentenceKey(h,i,p),y=this.cache.get(g)),y)b=y;else{let C=this.client.autocomplete(h,i,p);this.activeRequests.set(d,C),this.lastRequestTime=s,b=await C,this.cacheEnabled&&g&&this.cache.set(g,b),this.activeRequests.delete(d)}let w=b.response.completion,S=this.detectContext(o);w=this.postProcessor.process(c,a,w,S),yield{display_suggestion:w,complete_suggestion:w}}catch(f){this.activeRequests.delete(d),fe("[Copilot Autocomplete] Error fetching autocomplete suggestions:",f)}}}shouldUseWordCompletion(e,r){if(!r.enableWordCompletion||e.endsWith("[[")||/\[\[[^\]]*$/.test(e))return!1;let o=e.trim(),i=o[o.length-1];if(i&&/[a-zA-Z']/.test(i)){let a=this.getCurrentWordFromPrefix(e);if(a&&a.length>=2){let s=this.wordCompletionManager.getSuggestions(a);if(s.length===0)return!1;let u=s.some(c=>c.word===a),l=s.some(c=>c.word.length-a.length>=2);return!(u&&!l)}}return!1}getCurrentWordFromPrefix(e){let r=e.length;for(let o=e.length-1;o>=0;o--){let i=e[o];if(!/[a-zA-Z']/.test(i)){r=o+1;break}o===0&&(r=0)}let n=e.substring(r);return n.length>=2?n:null}generateCaseMatchedCompletion(e,r){if(e.length<=r.length)return"";let n=e.substring(r.length),o=r===r.toUpperCase(),i=r===r.toLowerCase(),a=r.length>0&&r[0]===r[0].toUpperCase()&&r.slice(1)===r.slice(1).toLowerCase();return o?n.toUpperCase():i||a?n.toLowerCase():n}detectContext(e){let r=e.split(`
`).pop()||"";if(/^\s*[-*+]\s/.test(r))return"UnorderedList";if(/^\s*\d+\.\s/.test(r))return"NumberedList";if(/^\s*[-*+]\s\[[ x]\]\s/.test(r))return"TaskList";if(e.includes("```")&&(e.split("```").length-1)%2===1)return"CodeBlock"}triggerCompletion(){this.isActive&&(this.clearActiveRequests(),this.forceFetch())}clearActiveRequests(){this.activeRequests.size>0&&this.activeRequests.clear()}getWordCompletionManager(){return this.wordCompletionManager}setCacheEnabled(e){this.cacheEnabled=e,e||this.cache.clear()}getCacheEnabled(){return this.cacheEnabled}};var kue=class t{constructor(e){this.plugin=e;let r=ue();this.cmIntegration=Fue.getInstance({delay:_h.DELAY_MS,minTriggerLength:_h.MIN_TRIGGER_LENGTH,maxContextLength:_h.MAX_CONTEXT_LENGTH}),this.unsubscribeSettings=ga((o,i)=>{let a=o.enableAutocomplete||o.enableWordCompletion,s=i.enableAutocomplete||i.enableWordCompletion;a!==s&&this.cmIntegration.setActive(s)});let n=r.enableAutocomplete||r.enableWordCompletion;this.cmIntegration.setActive(n),this.registerExtension()}static getInstance(e){return t.instance||(t.instance=new t(e)),t.instance}registerExtension(){try{this.plugin.registerEditorExtension([this.cmIntegration.getExtension()])}catch(e){fe("[Copilot Autocomplete] Failed to register CodeMirror extension:",e)}}destroy(){this.unsubscribeSettings(),this.cmIntegration.setActive(!1),this.cmIntegration.destroy()}};xd();var lBt=require("obsidian"),$ue=class extends lBt.Modal{constructor(r,n){super(r);this.placeholderText="Please enter your custom ad-hoc prompt here, press enter to send.";this.onSubmit=n}onOpen(){let{contentEl:r}=this,n=createFragment(i=>{i.createEl("strong",{text:"- {} represents the selected text (not required). "}),i.createEl("br"),i.createEl("strong",{text:"- {[[Note Title]]} represents a note. "}),i.createEl("br"),i.createEl("strong",{text:"- {activeNote} represents the active note. "}),i.createEl("br"),i.createEl("strong",{text:"- {FolderPath} represents a folder of notes. "}),i.createEl("br"),i.createEl("strong",{text:"- {#tag1, #tag2} represents ALL notes with ANY of the specified tags in their property (an OR operation). "}),i.createEl("br"),i.createEl("br"),i.appendText("Tip: turn on debug mode to show the processed prompt in the chat window."),i.createEl("br"),i.createEl("br")});r.appendChild(n);let o=r.createEl("textarea",{attr:{placeholder:this.placeholderText}});o.style.width="100%",o.style.height="100px",o.style.padding="10px",o.style.resize="vertical",o.addEventListener("input",i=>{this.result=i.target.value}),o.addEventListener("keydown",i=>{i.key==="Enter"&&!i.shiftKey&&(i.preventDefault(),this.close(),this.onSubmit(this.result))})}onClose(){let{contentEl:r}=this;r.empty()}};var SI=require("obsidian"),Bue=class extends SI.Modal{constructor(e,r){super(e),this.plugin=r}onOpen(){let{contentEl:e}=this;e.empty(),e.createEl("h2",{text:"Debug: Search OramaDB"});let r=e.createEl("p");r.innerHTML='Enter a JSON search params object. Example:<br><pre>{<br>  "term": "#tag",<br>  "mode": "hybrid",<br>  "limit": 10,<br>  "includeVectors": true<br>}</pre>',this.searchInput=e.createEl("textarea",{attr:{placeholder:"Enter search params JSON...",rows:"10",style:"width: 100%; min-height: 200px; margin: 10px 0; padding: 10px; font-family: monospace;"}}),e.createEl("div",{cls:"search-button-container"}).createEl("button",{text:"Search",cls:"mod-cta"}).addEventListener("click",async()=>{try{let i=JSON.parse(this.searchInput.value);i.vector?.value&&!Array.isArray(i.vector.value)&&(i.vector.value=Object.values(i.vector.value));let a=await this.plugin.vectorStoreManager.getDb();if(!a){new SI.Notice("Database not found");return}let s=await kc(a,i),u=["## Search Parameters","```json",JSON.stringify(i,null,2),"```","","## Results",`Total hits: ${s.hits.length}`,"","### Hits","```json",JSON.stringify(s.hits,null,2),"```"].join(`
`),l="OramaDB-Debug-Search.md",c=this.app.vault.getAbstractFileByPath(l);c instanceof SI.TFile?await this.app.vault.modify(c,u):await this.app.vault.create(l,u);let d=this.app.vault.getAbstractFileByPath(l);d instanceof SI.TFile&&(await this.app.workspace.getLeaf().openFile(d),this.close())}catch(i){console.error("Error in debug search:",i),new SI.Notice("Error executing search. Check console for details.")}})}onClose(){let{contentEl:e}=this;e.empty()}};wn();var I5=require("obsidian"),que=class extends I5.Modal{constructor(e,r){super(e),this.plugin=r}onOpen(){let{contentEl:e}=this;e.empty(),e.createEl("h2",{text:"Inspect Copilot Index by Note Paths"}),this.searchInput=e.createEl("textarea",{attr:{placeholder:`Enter note paths as markdown list:
- [[Note 1]]
- [[Note 2]]`,rows:"10",style:"width: 100%; min-height: 200px; margin: 10px 0; padding: 10px; font-family: monospace;"}}),e.createEl("div",{cls:"search-button-container"}).createEl("button",{text:"Show Index Data",cls:"mod-cta"}).addEventListener("click",async()=>{let o=this.searchInput.value,i=fC(o,this.app.vault).map(a=>a.path);if(i.length===0){new I5.Notice("No valid note paths found. Use format: - [[Note Name]]");return}try{let s=await(await this.plugin.vectorStoreManager.getDbOps()).getDocsJsonByPaths(i),u="CopilotDB-Search-Results.md",l=["## Searched Paths",...i.map(f=>`- [[${f}]]`),"","## Index Data","```json",JSON.stringify(s,null,2),"```"].join(`
`),c=this.app.vault.getAbstractFileByPath(u);c?await this.app.vault.modify(c,l):await this.app.vault.create(u,l);let d=this.app.vault.getAbstractFileByPath(u);d&&await this.app.workspace.getLeaf().openFile(d),this.close()}catch(a){console.error("Error searching DB:",a),new I5.Notice("Error searching database. Check console for details.")}})}onClose(){let{contentEl:e}=this;e.empty()}};var M5=require("obsidian"),Uue=class extends M5.Modal{constructor(r,n){super(r);this.filePaths="";this.onSubmit=n}onOpen(){let{contentEl:r}=this;r.createEl("h2",{text:"Remove Files from Copilot Index"});let n=r.createDiv({cls:"remove-files-container"});new M5.Setting(n).setName("File paths").setDesc("Paste the markdown list of file paths to remove from the index. You can get the list by running the command `List all indexed files`.").setClass("remove-files-setting").addTextArea(o=>o.setPlaceholder(`- [[path/to/file1.md]]
- [[path/to/file2.md]]`).setValue(this.filePaths).onChange(i=>{this.filePaths=i})),new M5.Setting(n).addButton(o=>o.setButtonText("Remove").setCta().onClick(()=>{let i=this.filePaths.split(`
`).map(a=>{let s=a.match(/\[\[(.*?)\]\]/);return s?s[1].trim():""}).filter(a=>a.length>0);this.onSubmit(i),this.close()})),r.createEl("style",{text:`
        .remove-files-container {
          width: 100%;
          margin-top: 12px;
        }
        .remove-files-setting {
          display: block;
        }
        .remove-files-setting .setting-item-control {
          padding: 0;
        }
        .remove-files-setting textarea {
          width: 100%;
          height: 300px;
          margin-top: 12px;
        }
        .remove-files-setting textarea::placeholder {
          opacity: 0.5;
        }
      `})}onClose(){let{contentEl:r}=this;r.empty()}};tr();var Hi=require("obsidian");wz();kr();function Yd(t,e,r){t.addCommand({id:e,name:Bme[e],callback:r})}function cBt(t,e,r){t.addCommand({id:e,name:Bme[e],editorCallback:r})}function rNe(t,e,r){cBt(t,$r.COUNT_WORD_AND_TOKENS_SELECTION,async n=>{let o=await n.getSelection(),i=o.split(" ").length,a=await t.projectManager.getCurrentChainManager().chatModelManager.countTokens(o);new Hi.Notice(`Selected text contains ${i} words and ${a} tokens.`)}),Yd(t,$r.COUNT_TOTAL_VAULT_TOKENS,async()=>{try{let n=await YPt(t.app),o=await t.projectManager.getCurrentChainManager().chatModelManager.countTokens(n);new Hi.Notice(`Total tokens in your vault: ${o}`)}catch(n){console.error("Error counting tokens: ",n),new Hi.Notice("An error occurred while counting tokens.")}}),Yd(t,$r.TOGGLE_COPILOT_CHAT_WINDOW,()=>{t.toggleView()}),Yd(t,$r.OPEN_COPILOT_CHAT_WINDOW,()=>{t.activateView()}),Yd(t,$r.NEW_CHAT,()=>{t.newChat()}),Yd(t,$r.APPLY_ADHOC_PROMPT,async()=>{new $ue(t.app,async o=>{try{t.processCustomPrompt($r.APPLY_ADHOC_PROMPT,o)}catch(i){console.error(i),new Hi.Notice("An error occurred.")}}).open()}),Yd(t,$r.CLEAR_LOCAL_COPILOT_INDEX,async()=>{await t.vectorStoreManager.clearIndex()}),Yd(t,$r.GARBAGE_COLLECT_COPILOT_INDEX,async()=>{try{let n=await t.vectorStoreManager.garbageCollectVectorStore();new Hi.Notice(`${n} documents removed from Copilot index.`)}catch(n){console.error("Error garbage collecting the Copilot index:",n),new Hi.Notice("An error occurred while garbage collecting the Copilot index.")}}),Yd(t,$r.INDEX_VAULT_TO_COPILOT_INDEX,async()=>{try{let n=await t.vectorStoreManager.indexVaultToVectorStore();new Hi.Notice(`${n} vault files indexed to Copilot index.`)}catch(n){console.error("Error indexing vault to Copilot index:",n),new Hi.Notice("An error occurred while indexing vault to Copilot index.")}}),Yd(t,$r.FORCE_REINDEX_VAULT_TO_COPILOT_INDEX,async()=>{try{let n=await t.vectorStoreManager.indexVaultToVectorStore(!0);new Hi.Notice(`${n} vault files re-indexed to Copilot index.`)}catch(n){console.error("Error re-indexing vault to Copilot index:",n),new Hi.Notice("An error occurred while re-indexing vault to Copilot index.")}}),Yd(t,$r.LOAD_COPILOT_CHAT_CONVERSATION,()=>{t.loadCopilotChatHistory()}),Yd(t,$r.LIST_INDEXED_FILES,async()=>{try{let n=await t.vectorStoreManager.getIndexedFiles(),o=new Set(n),i=t.app.vault.getMarkdownFiles(),a=new Set,s=new Set,u=new Set,l=await t.vectorStoreManager.getDbOps();for(let h of i){let b=await t.app.vault.cachedRead(h);!b||b.trim().length===0?a.add(h.path):o.has(h.path)?await l.hasEmbeddings(h.path)||u.add(h.path):s.add(h.path)}if(n.length===0&&a.size===0&&s.size===0){new Hi.Notice("No files found to list.");return}let c=["# Copilot Files Status",`- Indexed files: ${n.length}`,`	- Files missing embeddings: ${u.size}`,`- Unindexed files: ${s.size}`,`- Empty files: ${a.size}`,"","## Indexed Files",...n.map(h=>{let b=u.has(h);return`- [[${h}]]${b?" *(embedding missing)*":""}`}),"","## Unindexed Files",...s.size>0?Array.from(s).sort().map(h=>`- [[${h}]]`):["No unindexed files found."],"","## Empty Files",...a.size>0?Array.from(a).sort().map(h=>`- [[${h}]]`):["No empty files found."]].join(`
`),f=`${`Copilot-Indexed-Files-${new Date().toLocaleDateString().replace(/\//g,"-")}.md`}`,p=t.app.vault.getAbstractFileByPath(f);p instanceof Hi.TFile?await t.app.vault.modify(p,c):await t.app.vault.create(f,c);let m=t.app.vault.getAbstractFileByPath(f);m instanceof Hi.TFile&&(await t.app.workspace.getLeaf().openFile(m),new Hi.Notice(`Listed ${n.length} indexed files`))}catch(n){console.error("Error listing indexed files:",n),new Hi.Notice("Failed to list indexed files.")}}),r.debug&&(Yd(t,$r.INSPECT_COPILOT_INDEX_BY_NOTE_PATHS,()=>{new que(t.app,t).open()}),Yd(t,$r.SEARCH_ORAMA_DB,()=>{new Bue(t.app,t).open()}),Yd(t,$r.REMOVE_FILES_FROM_COPILOT_INDEX,async()=>{new Uue(t.app,async n=>{let o=await t.vectorStoreManager.getDbOps();try{for(let i of n)await o.removeDocs(i);await o.saveDB(),new Hi.Notice(`Successfully removed ${n.length} files from the index.`)}catch(i){console.error("Error removing files from index:",i),new Hi.Notice("An error occurred while removing files from the index.")}}).open()})),Yd(t,$r.CLEAR_COPILOT_CACHE,async()=>{try{await t.fileParserManager.clearPDFCache(),await Dy.getInstance().clearAllCache(),await LB.getInstance().clear();let{AutocompleteCache:o}=await Promise.resolve().then(()=>(Vje(),Z$t));o.getInstance().clear(),new Hi.Notice("All Copilot caches cleared successfully")}catch(n){console.error("Error clearing Copilot caches:",n),new Hi.Notice("Failed to clear Copilot caches")}}),Yd(t,$r.TOGGLE_AUTOCOMPLETE,()=>{let o=!ue().enableAutocomplete;dt("enableAutocomplete",o),new Hi.Notice(`Copilot autocomplete ${o?"enabled":"disabled"}`)}),cBt(t,$r.ADD_SELECTION_TO_CHAT_CONTEXT,async n=>{let o=Sh();if(o!=="copilot_plus"&&o!=="project"){new Hi.Notice("Selected text context is only available in Copilot Plus and Project modes");return}let i=n.getSelection();if(!i){new Hi.Notice("No text selected");return}let a=t.app.workspace.getActiveFile();if(!a){new Hi.Notice("No active file");return}let s=n.listSelections()[0];if(!s){new Hi.Notice("Could not determine selection range");return}let u=s.anchor.line+1,l=s.head.line+1,c={id:Jx(),content:i,noteTitle:a.basename,notePath:a.path,startLine:Math.min(u,l),endLine:Math.max(u,l)};Q4e(c),t.activateView()})}xd();var nNe="{copilot-selection}";var xI={title:"",content:"",showInContextMenu:!1,showInSlashMenu:!1,order:Number.MAX_SAFE_INTEGER,modelKey:"",lastUsedMs:0},KN="copilot-command-context-menu-enabled",GN="copilot-command-slash-enabled",JN="copilot-command-context-menu-order",YN="copilot-command-model-key",ZN="copilot-command-last-used",dBt=[{title:"Fix grammar and spelling",content:"Fix the grammar and spelling of {}. Preserve all formatting, line breaks, and special characters. Do not add or remove any content. Return only the corrected text.",showInContextMenu:!0,showInSlashMenu:!0,order:1e3,modelKey:"",lastUsedMs:0},{title:"Translate to Chinese",content:`Translate {} into Chinese:
    1. Preserve the meaning and tone
    2. Maintain appropriate cultural context
    3. Keep formatting and structure
    Return only the translated text.`,showInContextMenu:!0,showInSlashMenu:!0,order:1010,modelKey:"",lastUsedMs:0},{title:"Summarize",content:"Create a bullet-point summary of {}. Each bullet point should capture a key point. Return only the bullet-point summary.",showInContextMenu:!0,showInSlashMenu:!0,order:1020,modelKey:"",lastUsedMs:0},{title:"Simplify",content:"Simplify {} to a 6th-grade reading level (ages 11-12). Use simple sentences, common words, and clear explanations. Maintain the original key concepts. Return only the simplified text.",showInContextMenu:!0,showInSlashMenu:!0,order:1030,modelKey:"",lastUsedMs:0},{title:"Explain like I am 5",content:`Explain {} in simple terms that a 5-year-old would understand:
    1. Use basic vocabulary
    2. Include simple analogies
    3. Break down complex concepts
    Return only the simplified explanation.`,showInContextMenu:!0,showInSlashMenu:!0,order:1040,modelKey:"",lastUsedMs:0},{title:"Emojify",content:`Add relevant emojis to enhance {}. Follow these rules:
    1. Insert emojis at natural breaks in the text
    2. Never place two emojis next to each other
    3. Keep all original text unchanged
    4. Choose emojis that match the context and tone
    Return only the emojified text.`,showInContextMenu:!0,showInSlashMenu:!0,order:1050,modelKey:"",lastUsedMs:0},{title:"Make shorter",content:`Reduce {} to half its length while preserving these elements:
    1. Main ideas and key points
    2. Essential details
    3. Original tone and style
    Return only the shortened text.`,showInContextMenu:!0,showInSlashMenu:!0,order:1060,modelKey:"",lastUsedMs:0},{title:"Make longer",content:`Expand {} to twice its length by:
    1. Adding relevant details and examples
    2. Elaborating on key points
    3. Maintaining the original tone and style
    Return only the expanded text.`,showInContextMenu:!0,showInSlashMenu:!0,order:1070,modelKey:"",lastUsedMs:0},{title:"Generate table of contents",content:"Generate a hierarchical table of contents for {}. Use appropriate heading levels (H1, H2, H3, etc.). Include page numbers if present. Return only the table of contents.",showInContextMenu:!1,showInSlashMenu:!1,order:1080,modelKey:"",lastUsedMs:0},{title:"Generate glossary",content:'Create a glossary of important terms, concepts, and phrases from {}. Format each entry as "Term: Definition". Sort entries alphabetically. Return only the glossary.',showInContextMenu:!1,showInSlashMenu:!1,order:1090,modelKey:"",lastUsedMs:0},{title:"Remove URLs",content:"Remove all URLs from {}. Preserve all other content and formatting. URLs may be in various formats (http, https, www). Return only the text with URLs removed.",showInContextMenu:!1,showInSlashMenu:!1,order:1100,modelKey:"",lastUsedMs:0},{title:"Rewrite as tweet",content:`Rewrite {} as a single tweet with these requirements:
    1. Maximum 280 characters
    2. Use concise, impactful language
    3. Maintain the core message
    Return only the tweet text.`,showInContextMenu:!1,showInSlashMenu:!1,order:1110,modelKey:"",lastUsedMs:0},{title:"Rewrite as tweet thread",content:`Convert {} into a Twitter thread following these rules:
    1. Each tweet must be under 240 characters
    2. Start with "THREAD START" on its own line
    3. Separate tweets with "

---

"
    4. End with "THREAD END" on its own line
    5. Make content engaging and clear
    Return only the formatted thread.`,showInContextMenu:!1,showInSlashMenu:!1,order:1120,modelKey:"",lastUsedMs:0}];var iU=require("obsidian");tr();_2();_2();var IP=EL(),MP=hh([]);function zue(t){let e=IP.get(MP);e.some(r=>r.title===t)||IP.set(MP,[...e,{...xI,title:t}])}function R5(t){let e=IP.get(MP);IP.set(MP,e.filter(r=>r.title!==t))}function j5(t,e){let r=IP.get(MP),n;(e?r.findIndex(i=>i.title===e):-1)!==-1?n=r.map(i=>i.title===e?t:i):n=[...r,t],IP.set(MP,n)}function Hue(t){IP.set(MP,t)}function fBt(){return y2(MP,{store:IP})}function Px(){return IP.get(MP)}C2();wn();kr();function aU(t,e,r){let n=t.trim();return r&&n===r?null:/[#<>:"/\\|?*[\]^\x00-\x1F]/g.test(n)?'Command name contains invalid characters. Avoid using: < > : " / \\ | ? * [ ] ^':e.some(i=>i.title.toLowerCase()===n.toLowerCase())?"A command with this name already exists":null}function sU(t){return encodeURIComponent(t.toLowerCase())}function CI(){return(0,iU.normalizePath)(ue().customPromptsFolder)}function XN(t){return`${CI()}/${t}.md`}function uU(t){if(!(t instanceof iU.TFile)||t.extension!=="md")return!1;let e=CI();return!(!t.path.startsWith(e+"/")||t.path.slice(e.length+1).includes("/"))}function zhn(t){if(t.startsWith("---")){let e=t.indexOf("---",3);if(e!==-1)return t.slice(e+3).trimStart()}return t}async function N5(t){let e=await app.vault.read(t),r=zhn(e),n=app.metadataCache.getFileCache(t),o=n?.frontmatter?.[KN]??xI.showInContextMenu,i=n?.frontmatter?.[GN]??xI.showInSlashMenu,a=n?.frontmatter?.[ZN]??xI.lastUsedMs,s=n?.frontmatter?.[JN]??xI.order,u=n?.frontmatter?.[YN]??xI.modelKey;return{title:t.basename,modelKey:u,content:r,showInContextMenu:o,showInSlashMenu:i,order:s,lastUsedMs:a}}async function Vue(){let t=app.vault.getFiles().filter(r=>uU(r)),e=await Promise.all(t.map(N5));return Hue(e),e}function D5(t){return[...t].sort((e,r)=>e.order===r.order?e.title.localeCompare(r.title):e.order-r.order)}function Hhn(t){return[...t].sort((e,r)=>e.lastUsedMs===r.lastUsedMs?e.title.localeCompare(r.title):r.lastUsedMs-e.lastUsedMs)}function Vhn(t){return[...t].sort((e,r)=>e.title.localeCompare(r.title))}function pBt(t){switch(ue().promptSortStrategy){case"timestamp":return Hhn(t);case"alphabetical":return Vhn(t);case"manual":return D5(t);default:return t}}async function oNe(t,e,r=!1){let o=(await Wue(t,e,app.vault,app.workspace.getActiveFile())).processedPrompt;if(o.includes("{selectedText}")||r)return o;let i=o.indexOf(nNe);return i===-1&&e.trim()?o+`

<selectedText>`+e+"</selectedText>":o.slice(0,i)+e+o.slice(i+nNe.length)}var Whn=/\{(?!copilot-selection\})([^}]+)\}/g;async function Khn(t,e,r){let n=new Map,o=new Set,i;for(;(i=Whn.exec(t))!==null;){let a=i[1].trim(),s={content:"",files:[]};if(a.toLowerCase()==="activenote")if(r){let u=await ML(r,e);u&&(s.content=`## ${iG(r)}

${u}`,s.files.push(r))}else new iU.Notice("No active note found.");else if(a.startsWith("#")){let u=a.slice(1).split(",").map(d=>d.trim()),l=await c4e(e,u),c=[];for(let d of l){let f=await ML(d,e);f&&(c.push(`## ${iG(d)}

${f}`),s.files.push(d))}s.content=c.join(`

`)}else{let u=p4e(a),l=await Rme(e,u),c=[];for(let d of l){let f=await ML(d,e);f&&(c.push(`## ${iG(d)}

${f}`),s.files.push(d))}s.content=c.join(`

`)}s.content?(n.set(a,s.content),s.files.forEach(u=>o.add(u))):a.toLowerCase()!=="activenote"&&(a.startsWith('"')||console.warn(`No notes found for variable: ${a}`))}return{variablesMap:n,includedFiles:o}}async function Wue(t,e,r,n){let o=ue(),i=new Set;if(!o.enableCustomPromptTemplating)return t.includes("{}")&&!e&&n&&i.add(n),{processedPrompt:t+`

`,includedFiles:Array.from(i)};let{variablesMap:a,includedFiles:s}=await Khn(t,r,n);s.forEach(f=>i.add(f));let u=t,l="",c=null;u.includes("{}")&&(u=u.replace(/\{\}/g,"{selectedText}"),e?l+=`selectedText:

${e}`:n?(c=await ML(n,r),l+=`selectedText (entire active note):

${c}`,i.add(n)):l+=`selectedText:

(No selected text or active note available)`);for(let[f,p]of a.entries())f.toLowerCase()==="activenote"&&c!==null||(l?l+=`

${f}:

${p}`:l+=`${f}:

${p}`);let d=fC(u,r);for(let f of d)if(!i.has(f)){let p=await ML(f,r);if(p){let m=`<${O2}> 
 Title: [[${f.basename}]]
Path: ${f.path}

${p}
</${O2}>`;l&&(l+=`

`),l+=`${m}`,i.add(f)}}return{processedPrompt:l?`${u}

${l}`:`${u}

`,includedFiles:Array.from(i)}}xd();var mBt=require("obsidian"),QN=F(X()),hBt=F(wc());function Ghn({content:t,onConfirm:e,onCancel:r,confirmButtonText:n,cancelButtonText:o}){return QN.default.createElement("div",{className:"tw-flex tw-flex-col tw-gap-5"},QN.default.createElement("div",{className:"tw-whitespace-pre-wrap"},t),QN.default.createElement("div",{className:"tw-flex tw-justify-end tw-gap-2"},o&&QN.default.createElement(ge,{variant:"secondary",onClick:r},o),n&&QN.default.createElement(ge,{variant:"default",onClick:e},n)))}var Kc=class extends mBt.Modal{constructor(r,n,o,i,a="Continue",s="Cancel"){super(r);this.onConfirm=n;this.content=o;this.confirmButtonText=a;this.cancelButtonText=s;this.setTitle(i)}onOpen(){let{contentEl:r}=this;this.root=(0,hBt.createRoot)(r);let n=()=>{this.onConfirm(),this.close()},o=()=>{this.close()};this.root.render(QN.default.createElement(Ghn,{content:this.content,onConfirm:n,onCancel:o,confirmButtonText:this.confirmButtonText,cancelButtonText:this.cancelButtonText}))}onClose(){this.root.unmount()}};var Ri=F(X());var Tl=F(X(),1);function L5(t,e,{checkForDefaultPrevented:r=!0}={}){return function(o){if(t?.(o),r===!1||!o.defaultPrevented)return e?.(o)}}var Jhn=F(X(),1);function gBt(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function Kue(...t){return e=>{let r=!1,n=t.map(o=>{let i=gBt(o,e);return!r&&typeof i=="function"&&(r=!0),i});if(r)return()=>{for(let o=0;o<n.length;o++){let i=n[o];typeof i=="function"?i():gBt(t[o],null)}}}}var Pg=F(X(),1),iNe=F(ft(),1);function yBt(t,e){let r=Pg.createContext(e),n=i=>{let{children:a,...s}=i,u=Pg.useMemo(()=>s,Object.values(s));return(0,iNe.jsx)(r.Provider,{value:u,children:a})};n.displayName=t+"Provider";function o(i){let a=Pg.useContext(r);if(a)return a;if(e!==void 0)return e;throw new Error(`\`${i}\` must be used within \`${t}\``)}return[n,o]}function Vi(t,e=[]){let r=[];function n(i,a){let s=Pg.createContext(a),u=r.length;r=[...r,a];let l=d=>{let{scope:f,children:p,...m}=d,h=f?.[t]?.[u]||s,b=Pg.useMemo(()=>m,Object.values(m));return(0,iNe.jsx)(h.Provider,{value:b,children:p})};l.displayName=i+"Provider";function c(d,f){let p=f?.[t]?.[u]||s,m=Pg.useContext(p);if(m)return m;if(a!==void 0)return a;throw new Error(`\`${d}\` must be used within \`${i}\``)}return[l,c]}let o=()=>{let i=r.map(a=>Pg.createContext(a));return function(s){let u=s?.[t]||i;return Pg.useMemo(()=>({[`__scope${t}`]:{...s,[t]:u}}),[s,u])}};return o.scopeName=t,[n,Yhn(o,...e)]}function Yhn(...t){let e=t[0];if(t.length===1)return e;let r=()=>{let n=t.map(o=>({useScope:o(),scopeName:o.scopeName}));return function(i){let a=n.reduce((s,{useScope:u,scopeName:l})=>{let d=u(i)[`__scope${l}`];return{...s,...d}},{});return Pg.useMemo(()=>({[`__scope${e.scopeName}`]:a}),[a])}};return r.scopeName=e.scopeName,r}var OI=F(X(),1);var lU=F(X(),1);function qr(t){let e=lU.useRef(t);return lU.useEffect(()=>{e.current=t}),lU.useMemo(()=>(...r)=>e.current?.(...r),[])}function Gc({prop:t,defaultProp:e,onChange:r=()=>{}}){let[n,o]=Zhn({defaultProp:e,onChange:r}),i=t!==void 0,a=i?t:n,s=qr(r),u=OI.useCallback(l=>{if(i){let d=typeof l=="function"?l(t):l;d!==t&&s(d)}else o(l)},[i,t,o,s]);return[a,u]}function Zhn({defaultProp:t,onChange:e}){let r=OI.useState(t),[n]=r,o=OI.useRef(n),i=qr(e);return OI.useEffect(()=>{o.current!==n&&(i(n),o.current=n)},[n,o,i]),r}var bBt=F(X(),1),rgn=F(os(),1);var Jc=F(X(),1);var cU=F(ft(),1),sNe=Jc.forwardRef((t,e)=>{let{children:r,...n}=t,o=Jc.Children.toArray(r),i=o.find(Qhn);if(i){let a=i.props.children,s=o.map(u=>u===i?Jc.Children.count(a)>1?Jc.Children.only(null):Jc.isValidElement(a)?a.props.children:null:u);return(0,cU.jsx)(aNe,{...n,ref:e,children:Jc.isValidElement(a)?Jc.cloneElement(a,void 0,s):null})}return(0,cU.jsx)(aNe,{...n,ref:e,children:r})});sNe.displayName="Slot";var aNe=Jc.forwardRef((t,e)=>{let{children:r,...n}=t;if(Jc.isValidElement(r)){let o=tgn(r);return Jc.cloneElement(r,{...egn(n,r.props),ref:e?Kue(e,o):o})}return Jc.Children.count(r)>1?Jc.Children.only(null):null});aNe.displayName="SlotClone";var Xhn=({children:t})=>(0,cU.jsx)(cU.Fragment,{children:t});function Qhn(t){return Jc.isValidElement(t)&&t.type===Xhn}function egn(t,e){let r={...e};for(let n in e){let o=t[n],i=e[n];/^on[A-Z]/.test(n)?o&&i?r[n]=(...s)=>{i(...s),o(...s)}:o&&(r[n]=o):n==="style"?r[n]={...o,...i}:n==="className"&&(r[n]=[o,i].filter(Boolean).join(" "))}return{...t,...r}}function tgn(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,r=e&&"isReactWarning"in e&&e.isReactWarning;return r?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,r=e&&"isReactWarning"in e&&e.isReactWarning,r?t.props.ref:t.props.ref||t.ref)}var _Bt=F(ft(),1),ngn=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],vBt=ngn.reduce((t,e)=>{let r=bBt.forwardRef((n,o)=>{let{asChild:i,...a}=n,s=i?sNe:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),(0,_Bt.jsx)(s,{...a,ref:o})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});var Ut=F(X(),1);function Wi(t,e,{checkForDefaultPrevented:r=!0}={}){return function(o){if(t?.(o),r===!1||!o.defaultPrevented)return e?.(o)}}var EI=F(X(),1);var SBt=F(X(),1);function wBt(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function F5(...t){return e=>{let r=!1,n=t.map(o=>{let i=wBt(o,e);return!r&&typeof i=="function"&&(r=!0),i});if(r)return()=>{for(let o=0;o<n.length;o++){let i=n[o];typeof i=="function"?i():wBt(t[o],null)}}}}function Yc(...t){return SBt.useCallback(F5(...t),t)}var Zc=F(X(),1);var dU=F(ft(),1),PI=Zc.forwardRef((t,e)=>{let{children:r,...n}=t,o=Zc.Children.toArray(r),i=o.find(ign);if(i){let a=i.props.children,s=o.map(u=>u===i?Zc.Children.count(a)>1?Zc.Children.only(null):Zc.isValidElement(a)?a.props.children:null:u);return(0,dU.jsx)(uNe,{...n,ref:e,children:Zc.isValidElement(a)?Zc.cloneElement(a,void 0,s):null})}return(0,dU.jsx)(uNe,{...n,ref:e,children:r})});PI.displayName="Slot";var uNe=Zc.forwardRef((t,e)=>{let{children:r,...n}=t;if(Zc.isValidElement(r)){let o=sgn(r);return Zc.cloneElement(r,{...agn(n,r.props),ref:e?F5(e,o):o})}return Zc.Children.count(r)>1?Zc.Children.only(null):null});uNe.displayName="SlotClone";var ogn=({children:t})=>(0,dU.jsx)(dU.Fragment,{children:t});function ign(t){return Zc.isValidElement(t)&&t.type===ogn}function agn(t,e){let r={...e};for(let n in e){let o=t[n],i=e[n];/^on[A-Z]/.test(n)?o&&i?r[n]=(...s)=>{i(...s),o(...s)}:o&&(r[n]=o):n==="style"?r[n]={...o,...i}:n==="className"&&(r[n]=[o,i].filter(Boolean).join(" "))}return{...t,...r}}function sgn(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,r=e&&"isReactWarning"in e&&e.isReactWarning;return r?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,r=e&&"isReactWarning"in e&&e.isReactWarning,r?t.props.ref:t.props.ref||t.ref)}var Gue=F(ft(),1);function xBt(t){let e=t+"CollectionProvider",[r,n]=Vi(e),[o,i]=r(e,{collectionRef:{current:null},itemMap:new Map}),a=p=>{let{scope:m,children:h}=p,b=EI.default.useRef(null),g=EI.default.useRef(new Map).current;return(0,Gue.jsx)(o,{scope:m,itemMap:g,collectionRef:b,children:h})};a.displayName=e;let s=t+"CollectionSlot",u=EI.default.forwardRef((p,m)=>{let{scope:h,children:b}=p,g=i(s,h),y=Yc(m,g.collectionRef);return(0,Gue.jsx)(PI,{ref:y,children:b})});u.displayName=s;let l=t+"CollectionItemSlot",c="data-radix-collection-item",d=EI.default.forwardRef((p,m)=>{let{scope:h,children:b,...g}=p,y=EI.default.useRef(null),w=Yc(m,y),S=i(l,h);return EI.default.useEffect(()=>(S.itemMap.set(y,{ref:y,...g}),()=>void S.itemMap.delete(y))),(0,Gue.jsx)(PI,{[c]:"",ref:w,children:b})});d.displayName=l;function f(p){let m=i(t+"CollectionConsumer",p);return EI.default.useCallback(()=>{let b=m.collectionRef.current;if(!b)return[];let g=Array.from(b.querySelectorAll(`[${c}]`));return Array.from(m.itemMap.values()).sort((S,C)=>g.indexOf(S.ref.current)-g.indexOf(C.ref.current))},[m.collectionRef,m.itemMap])}return[{Provider:a,Slot:u,ItemSlot:d},f,n]}var Jue=F(X(),1),ugn=F(ft(),1),lgn=Jue.createContext(void 0);function TI(t){let e=Jue.useContext(lgn);return t||e||"ltr"}var Wa=F(X(),1);var CBt=F(X(),1),OBt=F(os(),1);var PBt=F(ft(),1),cgn=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],ac=cgn.reduce((t,e)=>{let r=CBt.forwardRef((n,o)=>{let{asChild:i,...a}=n,s=i?PI:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),(0,PBt.jsx)(s,{...a,ref:o})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function Yue(t,e){t&&OBt.flushSync(()=>t.dispatchEvent(e))}var EBt=F(X(),1);function AI(t,e=globalThis?.document){let r=qr(t);EBt.useEffect(()=>{let n=o=>{o.key==="Escape"&&r(o)};return e.addEventListener("keydown",n,{capture:!0}),()=>e.removeEventListener("keydown",n,{capture:!0})},[r,e])}var cNe=F(ft(),1),dgn="DismissableLayer",lNe="dismissableLayer.update",fgn="dismissableLayer.pointerDownOutside",pgn="dismissableLayer.focusOutside",TBt,IBt=Wa.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),dNe=Wa.forwardRef((t,e)=>{let{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:n,onPointerDownOutside:o,onFocusOutside:i,onInteractOutside:a,onDismiss:s,...u}=t,l=Wa.useContext(IBt),[c,d]=Wa.useState(null),f=c?.ownerDocument??globalThis?.document,[,p]=Wa.useState({}),m=Yc(e,E=>d(E)),h=Array.from(l.layers),[b]=[...l.layersWithOutsidePointerEventsDisabled].slice(-1),g=h.indexOf(b),y=c?h.indexOf(c):-1,w=l.layersWithOutsidePointerEventsDisabled.size>0,S=y>=g,C=ggn(E=>{let A=E.target,I=[...l.branches].some(R=>R.contains(A));!S||I||(o?.(E),a?.(E),E.defaultPrevented||s?.())},f),P=ygn(E=>{let A=E.target;[...l.branches].some(R=>R.contains(A))||(i?.(E),a?.(E),E.defaultPrevented||s?.())},f);return AI(E=>{y===l.layers.size-1&&(n?.(E),!E.defaultPrevented&&s&&(E.preventDefault(),s()))},f),Wa.useEffect(()=>{if(c)return r&&(l.layersWithOutsidePointerEventsDisabled.size===0&&(TBt=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),l.layersWithOutsidePointerEventsDisabled.add(c)),l.layers.add(c),ABt(),()=>{r&&l.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=TBt)}},[c,f,r,l]),Wa.useEffect(()=>()=>{c&&(l.layers.delete(c),l.layersWithOutsidePointerEventsDisabled.delete(c),ABt())},[c,l]),Wa.useEffect(()=>{let E=()=>p({});return document.addEventListener(lNe,E),()=>document.removeEventListener(lNe,E)},[]),(0,cNe.jsx)(ac.div,{...u,ref:m,style:{pointerEvents:w?S?"auto":"none":void 0,...t.style},onFocusCapture:Wi(t.onFocusCapture,P.onFocusCapture),onBlurCapture:Wi(t.onBlurCapture,P.onBlurCapture),onPointerDownCapture:Wi(t.onPointerDownCapture,C.onPointerDownCapture)})});dNe.displayName=dgn;var mgn="DismissableLayerBranch",hgn=Wa.forwardRef((t,e)=>{let r=Wa.useContext(IBt),n=Wa.useRef(null),o=Yc(e,n);return Wa.useEffect(()=>{let i=n.current;if(i)return r.branches.add(i),()=>{r.branches.delete(i)}},[r.branches]),(0,cNe.jsx)(ac.div,{...t,ref:o})});hgn.displayName=mgn;function ggn(t,e=globalThis?.document){let r=qr(t),n=Wa.useRef(!1),o=Wa.useRef(()=>{});return Wa.useEffect(()=>{let i=s=>{if(s.target&&!n.current){let l=function(){MBt(fgn,r,c,{discrete:!0})};var u=l;let c={originalEvent:s};s.pointerType==="touch"?(e.removeEventListener("click",o.current),o.current=l,e.addEventListener("click",o.current,{once:!0})):l()}else e.removeEventListener("click",o.current);n.current=!1},a=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(a),e.removeEventListener("pointerdown",i),e.removeEventListener("click",o.current)}},[e,r]),{onPointerDownCapture:()=>n.current=!0}}function ygn(t,e=globalThis?.document){let r=qr(t),n=Wa.useRef(!1);return Wa.useEffect(()=>{let o=i=>{i.target&&!n.current&&MBt(pgn,r,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",o),()=>e.removeEventListener("focusin",o)},[e,r]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function ABt(){let t=new CustomEvent(lNe);document.dispatchEvent(t)}function MBt(t,e,r,{discrete:n}){let o=r.originalEvent.target,i=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:r});e&&o.addEventListener(t,e,{once:!0}),n?Yue(o,i):o.dispatchEvent(i)}var jBt=F(X(),1),fNe=0;function II(){jBt.useEffect(()=>{let t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??RBt()),document.body.insertAdjacentElement("beforeend",t[1]??RBt()),fNe++,()=>{fNe===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),fNe--}},[])}function RBt(){let t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var Eg=F(X(),1);var kBt=F(ft(),1),pNe="focusScope.autoFocusOnMount",mNe="focusScope.autoFocusOnUnmount",NBt={bubbles:!1,cancelable:!0},bgn="FocusScope",hNe=Eg.forwardRef((t,e)=>{let{loop:r=!1,trapped:n=!1,onMountAutoFocus:o,onUnmountAutoFocus:i,...a}=t,[s,u]=Eg.useState(null),l=qr(o),c=qr(i),d=Eg.useRef(null),f=Yc(e,h=>u(h)),p=Eg.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;Eg.useEffect(()=>{if(n){let y=function(P){if(p.paused||!s)return;let E=P.target;s.contains(E)?d.current=E:MI(d.current,{select:!0})},w=function(P){if(p.paused||!s)return;let E=P.relatedTarget;E!==null&&(s.contains(E)||MI(d.current,{select:!0}))},S=function(P){if(document.activeElement===document.body)for(let A of P)A.removedNodes.length>0&&MI(s)};var h=y,b=w,g=S;document.addEventListener("focusin",y),document.addEventListener("focusout",w);let C=new MutationObserver(S);return s&&C.observe(s,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",y),document.removeEventListener("focusout",w),C.disconnect()}}},[n,s,p.paused]),Eg.useEffect(()=>{if(s){LBt.add(p);let h=document.activeElement;if(!s.contains(h)){let g=new CustomEvent(pNe,NBt);s.addEventListener(pNe,l),s.dispatchEvent(g),g.defaultPrevented||(_gn(Cgn($Bt(s)),{select:!0}),document.activeElement===h&&MI(s))}return()=>{s.removeEventListener(pNe,l),setTimeout(()=>{let g=new CustomEvent(mNe,NBt);s.addEventListener(mNe,c),s.dispatchEvent(g),g.defaultPrevented||MI(h??document.body,{select:!0}),s.removeEventListener(mNe,c),LBt.remove(p)},0)}}},[s,l,c,p]);let m=Eg.useCallback(h=>{if(!r&&!n||p.paused)return;let b=h.key==="Tab"&&!h.altKey&&!h.ctrlKey&&!h.metaKey,g=document.activeElement;if(b&&g){let y=h.currentTarget,[w,S]=vgn(y);w&&S?!h.shiftKey&&g===S?(h.preventDefault(),r&&MI(w,{select:!0})):h.shiftKey&&g===w&&(h.preventDefault(),r&&MI(S,{select:!0})):g===y&&h.preventDefault()}},[r,n,p.paused]);return(0,kBt.jsx)(ac.div,{tabIndex:-1,...a,ref:f,onKeyDown:m})});hNe.displayName=bgn;function _gn(t,{select:e=!1}={}){let r=document.activeElement;for(let n of t)if(MI(n,{select:e}),document.activeElement!==r)return}function vgn(t){let e=$Bt(t),r=DBt(e,t),n=DBt(e.reverse(),t);return[r,n]}function $Bt(t){let e=[],r=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{let o=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||o?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)e.push(r.currentNode);return e}function DBt(t,e){for(let r of t)if(!wgn(r,{upTo:e}))return r}function wgn(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function Sgn(t){return t instanceof HTMLInputElement&&"select"in t}function MI(t,{select:e=!1}={}){if(t&&t.focus){let r=document.activeElement;t.focus({preventScroll:!0}),t!==r&&Sgn(t)&&e&&t.select()}}var LBt=xgn();function xgn(){let t=[];return{add(e){let r=t[0];e!==r&&r?.pause(),t=FBt(t,e),t.unshift(e)},remove(e){t=FBt(t,e),t[0]?.resume()}}}function FBt(t,e){let r=[...t],n=r.indexOf(e);return n!==-1&&r.splice(n,1),r}function Cgn(t){return t.filter(e=>e.tagName!=="A")}var Zue=F(X(),1);var BBt=F(X(),1),zn=globalThis?.document?BBt.useLayoutEffect:()=>{};var Ogn=Zue.useId||(()=>{}),Pgn=0;function il(t){let[e,r]=Zue.useState(Ogn());return zn(()=>{t||r(n=>n??String(Pgn++))},[t]),t||(e?`radix-${e}`:"")}var Gm=F(X(),1);var qBt=["top","right","bottom","left"];var Ex=Math.min,qf=Math.max,$5=Math.round,B5=Math.floor,Xy=t=>({x:t,y:t}),Egn={left:"right",right:"left",bottom:"top",top:"bottom"},Tgn={start:"end",end:"start"};function Que(t,e,r){return qf(t,Ex(e,r))}function Tx(t,e){return typeof t=="function"?t(e):t}function Ax(t){return t.split("-")[0]}function eD(t){return t.split("-")[1]}function ele(t){return t==="x"?"y":"x"}function tle(t){return t==="y"?"height":"width"}function RP(t){return["top","bottom"].includes(Ax(t))?"y":"x"}function rle(t){return ele(RP(t))}function UBt(t,e,r){r===void 0&&(r=!1);let n=eD(t),o=rle(t),i=tle(o),a=o==="x"?n===(r?"end":"start")?"right":"left":n==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(a=k5(a)),[a,k5(a)]}function zBt(t){let e=k5(t);return[Xue(t),e,Xue(e)]}function Xue(t){return t.replace(/start|end/g,e=>Tgn[e])}function Agn(t,e,r){let n=["left","right"],o=["right","left"],i=["top","bottom"],a=["bottom","top"];switch(t){case"top":case"bottom":return r?e?o:n:e?n:o;case"left":case"right":return e?i:a;default:return[]}}function HBt(t,e,r,n){let o=eD(t),i=Agn(Ax(t),r==="start",n);return o&&(i=i.map(a=>a+"-"+o),e&&(i=i.concat(i.map(Xue)))),i}function k5(t){return t.replace(/left|right|bottom|top/g,e=>Egn[e])}function Ign(t){return{top:0,right:0,bottom:0,left:0,...t}}function gNe(t){return typeof t!="number"?Ign(t):{top:t,right:t,bottom:t,left:t}}function tD(t){let{x:e,y:r,width:n,height:o}=t;return{width:n,height:o,top:r,left:e,right:e+n,bottom:r+o,x:e,y:r}}function VBt(t,e,r){let{reference:n,floating:o}=t,i=RP(e),a=rle(e),s=tle(a),u=Ax(e),l=i==="y",c=n.x+n.width/2-o.width/2,d=n.y+n.height/2-o.height/2,f=n[s]/2-o[s]/2,p;switch(u){case"top":p={x:c,y:n.y-o.height};break;case"bottom":p={x:c,y:n.y+n.height};break;case"right":p={x:n.x+n.width,y:d};break;case"left":p={x:n.x-o.width,y:d};break;default:p={x:n.x,y:n.y}}switch(eD(e)){case"start":p[a]-=f*(r&&l?-1:1);break;case"end":p[a]+=f*(r&&l?-1:1);break}return p}var GBt=async(t,e,r)=>{let{placement:n="bottom",strategy:o="absolute",middleware:i=[],platform:a}=r,s=i.filter(Boolean),u=await(a.isRTL==null?void 0:a.isRTL(e)),l=await a.getElementRects({reference:t,floating:e,strategy:o}),{x:c,y:d}=VBt(l,n,u),f=n,p={},m=0;for(let h=0;h<s.length;h++){let{name:b,fn:g}=s[h],{x:y,y:w,data:S,reset:C}=await g({x:c,y:d,initialPlacement:n,placement:f,strategy:o,middlewareData:p,rects:l,platform:a,elements:{reference:t,floating:e}});c=y??c,d=w??d,p={...p,[b]:{...p[b],...S}},C&&m<=50&&(m++,typeof C=="object"&&(C.placement&&(f=C.placement),C.rects&&(l=C.rects===!0?await a.getElementRects({reference:t,floating:e,strategy:o}):C.rects),{x:c,y:d}=VBt(l,f,u)),h=-1)}return{x:c,y:d,placement:f,strategy:o,middlewareData:p}};async function fU(t,e){var r;e===void 0&&(e={});let{x:n,y:o,platform:i,rects:a,elements:s,strategy:u}=t,{boundary:l="clippingAncestors",rootBoundary:c="viewport",elementContext:d="floating",altBoundary:f=!1,padding:p=0}=Tx(e,t),m=gNe(p),b=s[f?d==="floating"?"reference":"floating":d],g=tD(await i.getClippingRect({element:(r=await(i.isElement==null?void 0:i.isElement(b)))==null||r?b:b.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(s.floating)),boundary:l,rootBoundary:c,strategy:u})),y=d==="floating"?{x:n,y:o,width:a.floating.width,height:a.floating.height}:a.reference,w=await(i.getOffsetParent==null?void 0:i.getOffsetParent(s.floating)),S=await(i.isElement==null?void 0:i.isElement(w))?await(i.getScale==null?void 0:i.getScale(w))||{x:1,y:1}:{x:1,y:1},C=tD(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:s,rect:y,offsetParent:w,strategy:u}):y);return{top:(g.top-C.top+m.top)/S.y,bottom:(C.bottom-g.bottom+m.bottom)/S.y,left:(g.left-C.left+m.left)/S.x,right:(C.right-g.right+m.right)/S.x}}var JBt=t=>({name:"arrow",options:t,async fn(e){let{x:r,y:n,placement:o,rects:i,platform:a,elements:s,middlewareData:u}=e,{element:l,padding:c=0}=Tx(t,e)||{};if(l==null)return{};let d=gNe(c),f={x:r,y:n},p=rle(o),m=tle(p),h=await a.getDimensions(l),b=p==="y",g=b?"top":"left",y=b?"bottom":"right",w=b?"clientHeight":"clientWidth",S=i.reference[m]+i.reference[p]-f[p]-i.floating[m],C=f[p]-i.reference[p],P=await(a.getOffsetParent==null?void 0:a.getOffsetParent(l)),E=P?P[w]:0;(!E||!await(a.isElement==null?void 0:a.isElement(P)))&&(E=s.floating[w]||i.floating[m]);let A=S/2-C/2,I=E/2-h[m]/2-1,R=Ex(d[g],I),j=Ex(d[y],I),N=R,$=E-h[m]-j,k=E/2-h[m]/2+A,H=Que(N,k,$),V=!u.arrow&&eD(o)!=null&&k!==H&&i.reference[m]/2-(k<N?R:j)-h[m]/2<0,Q=V?k<N?k-N:k-$:0;return{[p]:f[p]+Q,data:{[p]:H,centerOffset:k-H-Q,...V&&{alignmentOffset:Q}},reset:V}}});var YBt=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var r,n;let{placement:o,middlewareData:i,rects:a,initialPlacement:s,platform:u,elements:l}=e,{mainAxis:c=!0,crossAxis:d=!0,fallbackPlacements:f,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:m="none",flipAlignment:h=!0,...b}=Tx(t,e);if((r=i.arrow)!=null&&r.alignmentOffset)return{};let g=Ax(o),y=RP(s),w=Ax(s)===s,S=await(u.isRTL==null?void 0:u.isRTL(l.floating)),C=f||(w||!h?[k5(s)]:zBt(s)),P=m!=="none";!f&&P&&C.push(...HBt(s,h,m,S));let E=[s,...C],A=await fU(e,b),I=[],R=((n=i.flip)==null?void 0:n.overflows)||[];if(c&&I.push(A[g]),d){let k=UBt(o,a,S);I.push(A[k[0]],A[k[1]])}if(R=[...R,{placement:o,overflows:I}],!I.every(k=>k<=0)){var j,N;let k=(((j=i.flip)==null?void 0:j.index)||0)+1,H=E[k];if(H)return{data:{index:k,overflows:R},reset:{placement:H}};let V=(N=R.filter(Q=>Q.overflows[0]<=0).sort((Q,G)=>Q.overflows[1]-G.overflows[1])[0])==null?void 0:N.placement;if(!V)switch(p){case"bestFit":{var $;let Q=($=R.filter(G=>{if(P){let D=RP(G.placement);return D===y||D==="y"}return!0}).map(G=>[G.placement,G.overflows.filter(D=>D>0).reduce((D,B)=>D+B,0)]).sort((G,D)=>G[1]-D[1])[0])==null?void 0:$[0];Q&&(V=Q);break}case"initialPlacement":V=s;break}if(o!==V)return{reset:{placement:V}}}return{}}}};function WBt(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function KBt(t){return qBt.some(e=>t[e]>=0)}var ZBt=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){let{rects:r}=e,{strategy:n="referenceHidden",...o}=Tx(t,e);switch(n){case"referenceHidden":{let i=await fU(e,{...o,elementContext:"reference"}),a=WBt(i,r.reference);return{data:{referenceHiddenOffsets:a,referenceHidden:KBt(a)}}}case"escaped":{let i=await fU(e,{...o,altBoundary:!0}),a=WBt(i,r.floating);return{data:{escapedOffsets:a,escaped:KBt(a)}}}default:return{}}}}};async function Mgn(t,e){let{placement:r,platform:n,elements:o}=t,i=await(n.isRTL==null?void 0:n.isRTL(o.floating)),a=Ax(r),s=eD(r),u=RP(r)==="y",l=["left","top"].includes(a)?-1:1,c=i&&u?-1:1,d=Tx(e,t),{mainAxis:f,crossAxis:p,alignmentAxis:m}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return s&&typeof m=="number"&&(p=s==="end"?m*-1:m),u?{x:p*c,y:f*l}:{x:f*l,y:p*c}}var XBt=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var r,n;let{x:o,y:i,placement:a,middlewareData:s}=e,u=await Mgn(e,t);return a===((r=s.offset)==null?void 0:r.placement)&&(n=s.arrow)!=null&&n.alignmentOffset?{}:{x:o+u.x,y:i+u.y,data:{...u,placement:a}}}}},QBt=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){let{x:r,y:n,placement:o}=e,{mainAxis:i=!0,crossAxis:a=!1,limiter:s={fn:b=>{let{x:g,y}=b;return{x:g,y}}},...u}=Tx(t,e),l={x:r,y:n},c=await fU(e,u),d=RP(Ax(o)),f=ele(d),p=l[f],m=l[d];if(i){let b=f==="y"?"top":"left",g=f==="y"?"bottom":"right",y=p+c[b],w=p-c[g];p=Que(y,p,w)}if(a){let b=d==="y"?"top":"left",g=d==="y"?"bottom":"right",y=m+c[b],w=m-c[g];m=Que(y,m,w)}let h=s.fn({...e,[f]:p,[d]:m});return{...h,data:{x:h.x-r,y:h.y-n,enabled:{[f]:i,[d]:a}}}}}},eqt=function(t){return t===void 0&&(t={}),{options:t,fn(e){let{x:r,y:n,placement:o,rects:i,middlewareData:a}=e,{offset:s=0,mainAxis:u=!0,crossAxis:l=!0}=Tx(t,e),c={x:r,y:n},d=RP(o),f=ele(d),p=c[f],m=c[d],h=Tx(s,e),b=typeof h=="number"?{mainAxis:h,crossAxis:0}:{mainAxis:0,crossAxis:0,...h};if(u){let w=f==="y"?"height":"width",S=i.reference[f]-i.floating[w]+b.mainAxis,C=i.reference[f]+i.reference[w]-b.mainAxis;p<S?p=S:p>C&&(p=C)}if(l){var g,y;let w=f==="y"?"width":"height",S=["top","left"].includes(Ax(o)),C=i.reference[d]-i.floating[w]+(S&&((g=a.offset)==null?void 0:g[d])||0)+(S?0:b.crossAxis),P=i.reference[d]+i.reference[w]+(S?0:((y=a.offset)==null?void 0:y[d])||0)-(S?b.crossAxis:0);m<C?m=C:m>P&&(m=P)}return{[f]:p,[d]:m}}}},tqt=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var r,n;let{placement:o,rects:i,platform:a,elements:s}=e,{apply:u=()=>{},...l}=Tx(t,e),c=await fU(e,l),d=Ax(o),f=eD(o),p=RP(o)==="y",{width:m,height:h}=i.floating,b,g;d==="top"||d==="bottom"?(b=d,g=f===(await(a.isRTL==null?void 0:a.isRTL(s.floating))?"start":"end")?"left":"right"):(g=d,b=f==="end"?"top":"bottom");let y=h-c.top-c.bottom,w=m-c.left-c.right,S=Ex(h-c[b],y),C=Ex(m-c[g],w),P=!e.middlewareData.shift,E=S,A=C;if((r=e.middlewareData.shift)!=null&&r.enabled.x&&(A=w),(n=e.middlewareData.shift)!=null&&n.enabled.y&&(E=y),P&&!f){let R=qf(c.left,0),j=qf(c.right,0),N=qf(c.top,0),$=qf(c.bottom,0);p?A=m-2*(R!==0||j!==0?R+j:qf(c.left,c.right)):E=h-2*(N!==0||$!==0?N+$:qf(c.top,c.bottom))}await u({...e,availableWidth:A,availableHeight:E});let I=await a.getDimensions(s.floating);return m!==I.width||h!==I.height?{reset:{rects:!0}}:{}}}};function nle(){return typeof window<"u"}function nD(t){return nqt(t)?(t.nodeName||"").toLowerCase():"#document"}function Wp(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Qy(t){var e;return(e=(nqt(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function nqt(t){return nle()?t instanceof Node||t instanceof Wp(t).Node:!1}function Tg(t){return nle()?t instanceof Element||t instanceof Wp(t).Element:!1}function eb(t){return nle()?t instanceof HTMLElement||t instanceof Wp(t).HTMLElement:!1}function rqt(t){return!nle()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Wp(t).ShadowRoot}function pU(t){let{overflow:e,overflowX:r,overflowY:n,display:o}=Ag(t);return/auto|scroll|overlay|hidden|clip/.test(e+n+r)&&!["inline","contents"].includes(o)}function oqt(t){return["table","td","th"].includes(nD(t))}function q5(t){return[":popover-open",":modal"].some(e=>{try{return t.matches(e)}catch{return!1}})}function ole(t){let e=ile(),r=Tg(t)?Ag(t):t;return r.transform!=="none"||r.perspective!=="none"||(r.containerType?r.containerType!=="normal":!1)||!e&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!e&&(r.filter?r.filter!=="none":!1)||["transform","perspective","filter"].some(n=>(r.willChange||"").includes(n))||["paint","layout","strict","content"].some(n=>(r.contain||"").includes(n))}function iqt(t){let e=jP(t);for(;eb(e)&&!oD(e);){if(ole(e))return e;if(q5(e))return null;e=jP(e)}return null}function ile(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function oD(t){return["html","body","#document"].includes(nD(t))}function Ag(t){return Wp(t).getComputedStyle(t)}function U5(t){return Tg(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function jP(t){if(nD(t)==="html")return t;let e=t.assignedSlot||t.parentNode||rqt(t)&&t.host||Qy(t);return rqt(e)?e.host:e}function aqt(t){let e=jP(t);return oD(e)?t.ownerDocument?t.ownerDocument.body:t.body:eb(e)&&pU(e)?e:aqt(e)}function rD(t,e,r){var n;e===void 0&&(e=[]),r===void 0&&(r=!0);let o=aqt(t),i=o===((n=t.ownerDocument)==null?void 0:n.body),a=Wp(o);if(i){let s=ale(a);return e.concat(a,a.visualViewport||[],pU(o)?o:[],s&&r?rD(s):[])}return e.concat(o,rD(o,[],r))}function ale(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function lqt(t){let e=Ag(t),r=parseFloat(e.width)||0,n=parseFloat(e.height)||0,o=eb(t),i=o?t.offsetWidth:r,a=o?t.offsetHeight:n,s=$5(r)!==i||$5(n)!==a;return s&&(r=i,n=a),{width:r,height:n,$:s}}function bNe(t){return Tg(t)?t:t.contextElement}function mU(t){let e=bNe(t);if(!eb(e))return Xy(1);let r=e.getBoundingClientRect(),{width:n,height:o,$:i}=lqt(e),a=(i?$5(r.width):r.width)/n,s=(i?$5(r.height):r.height)/o;return(!a||!Number.isFinite(a))&&(a=1),(!s||!Number.isFinite(s))&&(s=1),{x:a,y:s}}var Rgn=Xy(0);function cqt(t){let e=Wp(t);return!ile()||!e.visualViewport?Rgn:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function jgn(t,e,r){return e===void 0&&(e=!1),!r||e&&r!==Wp(t)?!1:e}function iD(t,e,r,n){e===void 0&&(e=!1),r===void 0&&(r=!1);let o=t.getBoundingClientRect(),i=bNe(t),a=Xy(1);e&&(n?Tg(n)&&(a=mU(n)):a=mU(t));let s=jgn(i,r,n)?cqt(i):Xy(0),u=(o.left+s.x)/a.x,l=(o.top+s.y)/a.y,c=o.width/a.x,d=o.height/a.y;if(i){let f=Wp(i),p=n&&Tg(n)?Wp(n):n,m=f,h=ale(m);for(;h&&n&&p!==m;){let b=mU(h),g=h.getBoundingClientRect(),y=Ag(h),w=g.left+(h.clientLeft+parseFloat(y.paddingLeft))*b.x,S=g.top+(h.clientTop+parseFloat(y.paddingTop))*b.y;u*=b.x,l*=b.y,c*=b.x,d*=b.y,u+=w,l+=S,m=Wp(h),h=ale(m)}}return tD({width:c,height:d,x:u,y:l})}function _Ne(t,e){let r=U5(t).scrollLeft;return e?e.left+r:iD(Qy(t)).left+r}function dqt(t,e,r){r===void 0&&(r=!1);let n=t.getBoundingClientRect(),o=n.left+e.scrollLeft-(r?0:_Ne(t,n)),i=n.top+e.scrollTop;return{x:o,y:i}}function Ngn(t){let{elements:e,rect:r,offsetParent:n,strategy:o}=t,i=o==="fixed",a=Qy(n),s=e?q5(e.floating):!1;if(n===a||s&&i)return r;let u={scrollLeft:0,scrollTop:0},l=Xy(1),c=Xy(0),d=eb(n);if((d||!d&&!i)&&((nD(n)!=="body"||pU(a))&&(u=U5(n)),eb(n))){let p=iD(n);l=mU(n),c.x=p.x+n.clientLeft,c.y=p.y+n.clientTop}let f=a&&!d&&!i?dqt(a,u,!0):Xy(0);return{width:r.width*l.x,height:r.height*l.y,x:r.x*l.x-u.scrollLeft*l.x+c.x+f.x,y:r.y*l.y-u.scrollTop*l.y+c.y+f.y}}function Dgn(t){return Array.from(t.getClientRects())}function Lgn(t){let e=Qy(t),r=U5(t),n=t.ownerDocument.body,o=qf(e.scrollWidth,e.clientWidth,n.scrollWidth,n.clientWidth),i=qf(e.scrollHeight,e.clientHeight,n.scrollHeight,n.clientHeight),a=-r.scrollLeft+_Ne(t),s=-r.scrollTop;return Ag(n).direction==="rtl"&&(a+=qf(e.clientWidth,n.clientWidth)-o),{width:o,height:i,x:a,y:s}}function Fgn(t,e){let r=Wp(t),n=Qy(t),o=r.visualViewport,i=n.clientWidth,a=n.clientHeight,s=0,u=0;if(o){i=o.width,a=o.height;let l=ile();(!l||l&&e==="fixed")&&(s=o.offsetLeft,u=o.offsetTop)}return{width:i,height:a,x:s,y:u}}function kgn(t,e){let r=iD(t,!0,e==="fixed"),n=r.top+t.clientTop,o=r.left+t.clientLeft,i=eb(t)?mU(t):Xy(1),a=t.clientWidth*i.x,s=t.clientHeight*i.y,u=o*i.x,l=n*i.y;return{width:a,height:s,x:u,y:l}}function sqt(t,e,r){let n;if(e==="viewport")n=Fgn(t,r);else if(e==="document")n=Lgn(Qy(t));else if(Tg(e))n=kgn(e,r);else{let o=cqt(t);n={x:e.x-o.x,y:e.y-o.y,width:e.width,height:e.height}}return tD(n)}function fqt(t,e){let r=jP(t);return r===e||!Tg(r)||oD(r)?!1:Ag(r).position==="fixed"||fqt(r,e)}function $gn(t,e){let r=e.get(t);if(r)return r;let n=rD(t,[],!1).filter(s=>Tg(s)&&nD(s)!=="body"),o=null,i=Ag(t).position==="fixed",a=i?jP(t):t;for(;Tg(a)&&!oD(a);){let s=Ag(a),u=ole(a);!u&&s.position==="fixed"&&(o=null),(i?!u&&!o:!u&&s.position==="static"&&!!o&&["absolute","fixed"].includes(o.position)||pU(a)&&!u&&fqt(t,a))?n=n.filter(c=>c!==a):o=s,a=jP(a)}return e.set(t,n),n}function Bgn(t){let{element:e,boundary:r,rootBoundary:n,strategy:o}=t,a=[...r==="clippingAncestors"?q5(e)?[]:$gn(e,this._c):[].concat(r),n],s=a[0],u=a.reduce((l,c)=>{let d=sqt(e,c,o);return l.top=qf(d.top,l.top),l.right=Ex(d.right,l.right),l.bottom=Ex(d.bottom,l.bottom),l.left=qf(d.left,l.left),l},sqt(e,s,o));return{width:u.right-u.left,height:u.bottom-u.top,x:u.left,y:u.top}}function qgn(t){let{width:e,height:r}=lqt(t);return{width:e,height:r}}function Ugn(t,e,r){let n=eb(e),o=Qy(e),i=r==="fixed",a=iD(t,!0,i,e),s={scrollLeft:0,scrollTop:0},u=Xy(0);if(n||!n&&!i)if((nD(e)!=="body"||pU(o))&&(s=U5(e)),n){let f=iD(e,!0,i,e);u.x=f.x+e.clientLeft,u.y=f.y+e.clientTop}else o&&(u.x=_Ne(o));let l=o&&!n&&!i?dqt(o,s):Xy(0),c=a.left+s.scrollLeft-u.x-l.x,d=a.top+s.scrollTop-u.y-l.y;return{x:c,y:d,width:a.width,height:a.height}}function yNe(t){return Ag(t).position==="static"}function uqt(t,e){if(!eb(t)||Ag(t).position==="fixed")return null;if(e)return e(t);let r=t.offsetParent;return Qy(t)===r&&(r=r.ownerDocument.body),r}function pqt(t,e){let r=Wp(t);if(q5(t))return r;if(!eb(t)){let o=jP(t);for(;o&&!oD(o);){if(Tg(o)&&!yNe(o))return o;o=jP(o)}return r}let n=uqt(t,e);for(;n&&oqt(n)&&yNe(n);)n=uqt(n,e);return n&&oD(n)&&yNe(n)&&!ole(n)?r:n||iqt(t)||r}var zgn=async function(t){let e=this.getOffsetParent||pqt,r=this.getDimensions,n=await r(t.floating);return{reference:Ugn(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function Hgn(t){return Ag(t).direction==="rtl"}var mqt={convertOffsetParentRelativeRectToViewportRelativeRect:Ngn,getDocumentElement:Qy,getClippingRect:Bgn,getOffsetParent:pqt,getElementRects:zgn,getClientRects:Dgn,getDimensions:qgn,getScale:mU,isElement:Tg,isRTL:Hgn};function Vgn(t,e){let r=null,n,o=Qy(t);function i(){var s;clearTimeout(n),(s=r)==null||s.disconnect(),r=null}function a(s,u){s===void 0&&(s=!1),u===void 0&&(u=1),i();let{left:l,top:c,width:d,height:f}=t.getBoundingClientRect();if(s||e(),!d||!f)return;let p=B5(c),m=B5(o.clientWidth-(l+d)),h=B5(o.clientHeight-(c+f)),b=B5(l),y={rootMargin:-p+"px "+-m+"px "+-h+"px "+-b+"px",threshold:qf(0,Ex(1,u))||1},w=!0;function S(C){let P=C[0].intersectionRatio;if(P!==u){if(!w)return a();P?a(!1,P):n=setTimeout(()=>{a(!1,1e-7)},1e3)}w=!1}try{r=new IntersectionObserver(S,{...y,root:o.ownerDocument})}catch{r=new IntersectionObserver(S,y)}r.observe(t)}return a(!0),i}function NP(t,e,r,n){n===void 0&&(n={});let{ancestorScroll:o=!0,ancestorResize:i=!0,elementResize:a=typeof ResizeObserver=="function",layoutShift:s=typeof IntersectionObserver=="function",animationFrame:u=!1}=n,l=bNe(t),c=o||i?[...l?rD(l):[],...rD(e)]:[];c.forEach(g=>{o&&g.addEventListener("scroll",r,{passive:!0}),i&&g.addEventListener("resize",r)});let d=l&&s?Vgn(l,r):null,f=-1,p=null;a&&(p=new ResizeObserver(g=>{let[y]=g;y&&y.target===l&&p&&(p.unobserve(e),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var w;(w=p)==null||w.observe(e)})),r()}),l&&!u&&p.observe(l),p.observe(e));let m,h=u?iD(t):null;u&&b();function b(){let g=iD(t);h&&(g.x!==h.x||g.y!==h.y||g.width!==h.width||g.height!==h.height)&&r(),h=g,m=requestAnimationFrame(b)}return r(),()=>{var g;c.forEach(y=>{o&&y.removeEventListener("scroll",r),i&&y.removeEventListener("resize",r)}),d?.(),(g=p)==null||g.disconnect(),p=null,u&&cancelAnimationFrame(m)}}var hqt=XBt;var gqt=QBt,yqt=YBt,bqt=tqt,_qt=ZBt,vNe=JBt;var vqt=eqt,wNe=(t,e,r)=>{let n=new Map,o={platform:mqt,...r},i={...o.platform,_c:n};return GBt(t,e,{...o,platform:i})};var al=F(X(),1),lle=F(X(),1),Sqt=F(os(),1),sle=typeof document<"u"?lle.useLayoutEffect:lle.useEffect;function ule(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let r,n,o;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(r=t.length,r!==e.length)return!1;for(n=r;n--!==0;)if(!ule(t[n],e[n]))return!1;return!0}if(o=Object.keys(t),r=o.length,r!==Object.keys(e).length)return!1;for(n=r;n--!==0;)if(!{}.hasOwnProperty.call(e,o[n]))return!1;for(n=r;n--!==0;){let i=o[n];if(!(i==="_owner"&&t.$$typeof)&&!ule(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}function xqt(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function wqt(t,e){let r=xqt(t);return Math.round(e*r)/r}function SNe(t){let e=al.useRef(t);return sle(()=>{e.current=t}),e}function RI(t){t===void 0&&(t={});let{placement:e="bottom",strategy:r="absolute",middleware:n=[],platform:o,elements:{reference:i,floating:a}={},transform:s=!0,whileElementsMounted:u,open:l}=t,[c,d]=al.useState({x:0,y:0,strategy:r,placement:e,middlewareData:{},isPositioned:!1}),[f,p]=al.useState(n);ule(f,n)||p(n);let[m,h]=al.useState(null),[b,g]=al.useState(null),y=al.useCallback(G=>{G!==P.current&&(P.current=G,h(G))},[]),w=al.useCallback(G=>{G!==E.current&&(E.current=G,g(G))},[]),S=i||m,C=a||b,P=al.useRef(null),E=al.useRef(null),A=al.useRef(c),I=u!=null,R=SNe(u),j=SNe(o),N=SNe(l),$=al.useCallback(()=>{if(!P.current||!E.current)return;let G={placement:e,strategy:r,middleware:f};j.current&&(G.platform=j.current),wNe(P.current,E.current,G).then(D=>{let B={...D,isPositioned:N.current!==!1};k.current&&!ule(A.current,B)&&(A.current=B,Sqt.flushSync(()=>{d(B)}))})},[f,e,r,j,N]);sle(()=>{l===!1&&A.current.isPositioned&&(A.current.isPositioned=!1,d(G=>({...G,isPositioned:!1})))},[l]);let k=al.useRef(!1);sle(()=>(k.current=!0,()=>{k.current=!1}),[]),sle(()=>{if(S&&(P.current=S),C&&(E.current=C),S&&C){if(R.current)return R.current(S,C,$);$()}},[S,C,$,R,I]);let H=al.useMemo(()=>({reference:P,floating:E,setReference:y,setFloating:w}),[y,w]),V=al.useMemo(()=>({reference:S,floating:C}),[S,C]),Q=al.useMemo(()=>{let G={position:r,left:0,top:0};if(!V.floating)return G;let D=wqt(V.floating,c.x),B=wqt(V.floating,c.y);return s?{...G,transform:"translate("+D+"px, "+B+"px)",...xqt(V.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:D,top:B}},[r,s,V.floating,c.x,c.y]);return al.useMemo(()=>({...c,update:$,refs:H,elements:V,floatingStyles:Q}),[c,$,H,V,Q])}var Wgn=t=>{function e(r){return{}.hasOwnProperty.call(r,"current")}return{name:"arrow",options:t,fn(r){let{element:n,padding:o}=typeof t=="function"?t(r):t;return n&&e(n)?n.current!=null?vNe({element:n.current,padding:o}).fn(r):{}:n?vNe({element:n,padding:o}).fn(r):{}}}},jI=(t,e)=>({...hqt(t),options:[t,e]}),NI=(t,e)=>({...gqt(t),options:[t,e]}),DI=(t,e)=>({...vqt(t),options:[t,e]}),LI=(t,e)=>({...yqt(t),options:[t,e]}),FI=(t,e)=>({...bqt(t),options:[t,e]});var kI=(t,e)=>({..._qt(t),options:[t,e]});var $I=(t,e)=>({...Wgn(t),options:[t,e]});var Cqt=F(X(),1);var xNe=F(ft(),1),Kgn="Arrow",Oqt=Cqt.forwardRef((t,e)=>{let{children:r,width:n=10,height:o=5,...i}=t;return(0,xNe.jsx)(ac.svg,{...i,ref:e,width:n,height:o,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?r:(0,xNe.jsx)("polygon",{points:"0,0 30,0 15,10"})})});Oqt.displayName=Kgn;var Pqt=Oqt;var Eqt=F(X(),1);function Ix(t){let[e,r]=Eqt.useState(void 0);return zn(()=>{if(t){r({width:t.offsetWidth,height:t.offsetHeight});let n=new ResizeObserver(o=>{if(!Array.isArray(o)||!o.length)return;let i=o[0],a,s;if("borderBoxSize"in i){let u=i.borderBoxSize,l=Array.isArray(u)?u[0]:u;a=l.inlineSize,s=l.blockSize}else a=t.offsetWidth,s=t.offsetHeight;r({width:a,height:s})});return n.observe(t,{box:"border-box"}),()=>n.unobserve(t)}else r(void 0)},[t]),e}var BI=F(ft(),1);var CNe="Popper",[Tqt,ONe]=Vi(CNe),[Jgn,Aqt]=Tqt(CNe),Iqt=t=>{let{__scopePopper:e,children:r}=t,[n,o]=Gm.useState(null);return(0,BI.jsx)(Jgn,{scope:e,anchor:n,onAnchorChange:o,children:r})};Iqt.displayName=CNe;var Mqt="PopperAnchor",Rqt=Gm.forwardRef((t,e)=>{let{__scopePopper:r,virtualRef:n,...o}=t,i=Aqt(Mqt,r),a=Gm.useRef(null),s=Yc(e,a);return Gm.useEffect(()=>{i.onAnchorChange(n?.current||a.current)}),n?null:(0,BI.jsx)(ac.div,{...o,ref:s})});Rqt.displayName=Mqt;var PNe="PopperContent",[Ygn,Zgn]=Tqt(PNe),jqt=Gm.forwardRef((t,e)=>{let{__scopePopper:r,side:n="bottom",sideOffset:o=0,align:i="center",alignOffset:a=0,arrowPadding:s=0,avoidCollisions:u=!0,collisionBoundary:l=[],collisionPadding:c=0,sticky:d="partial",hideWhenDetached:f=!1,updatePositionStrategy:p="optimized",onPlaced:m,...h}=t,b=Aqt(PNe,r),[g,y]=Gm.useState(null),w=Yc(e,Y=>y(Y)),[S,C]=Gm.useState(null),P=Ix(S),E=P?.width??0,A=P?.height??0,I=n+(i!=="center"?"-"+i:""),R=typeof c=="number"?c:{top:0,right:0,bottom:0,left:0,...c},j=Array.isArray(l)?l:[l],N=j.length>0,$={padding:R,boundary:j.filter(Qgn),altBoundary:N},{refs:k,floatingStyles:H,placement:V,isPositioned:Q,middlewareData:G}=RI({strategy:"fixed",placement:I,whileElementsMounted:(...Y)=>NP(...Y,{animationFrame:p==="always"}),elements:{reference:b.anchor},middleware:[jI({mainAxis:o+A,alignmentAxis:a}),u&&NI({mainAxis:!0,crossAxis:!1,limiter:d==="partial"?DI():void 0,...$}),u&&LI({...$}),FI({...$,apply:({elements:Y,rects:ae,availableWidth:we,availableHeight:de})=>{let{width:Ue,height:Ve}=ae.reference,rt=Y.floating.style;rt.setProperty("--radix-popper-available-width",`${we}px`),rt.setProperty("--radix-popper-available-height",`${de}px`),rt.setProperty("--radix-popper-anchor-width",`${Ue}px`),rt.setProperty("--radix-popper-anchor-height",`${Ve}px`)}}),S&&$I({element:S,padding:s}),eyn({arrowWidth:E,arrowHeight:A}),f&&kI({strategy:"referenceHidden",...$})]}),[D,B]=Lqt(V),q=qr(m);zn(()=>{Q&&q?.()},[Q,q]);let K=G.arrow?.x,U=G.arrow?.y,te=G.arrow?.centerOffset!==0,[z,W]=Gm.useState();return zn(()=>{g&&W(window.getComputedStyle(g).zIndex)},[g]),(0,BI.jsx)("div",{ref:k.setFloating,"data-radix-popper-content-wrapper":"",style:{...H,transform:Q?H.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:z,"--radix-popper-transform-origin":[G.transformOrigin?.x,G.transformOrigin?.y].join(" "),...G.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:(0,BI.jsx)(Ygn,{scope:r,placedSide:D,onArrowChange:C,arrowX:K,arrowY:U,shouldHideArrow:te,children:(0,BI.jsx)(ac.div,{"data-side":D,"data-align":B,...h,ref:w,style:{...h.style,animation:Q?void 0:"none"}})})})});jqt.displayName=PNe;var Nqt="PopperArrow",Xgn={top:"bottom",right:"left",bottom:"top",left:"right"},Dqt=Gm.forwardRef(function(e,r){let{__scopePopper:n,...o}=e,i=Zgn(Nqt,n),a=Xgn[i.placedSide];return(0,BI.jsx)("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[a]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:(0,BI.jsx)(Pqt,{...o,ref:r,style:{...o.style,display:"block"}})})});Dqt.displayName=Nqt;function Qgn(t){return t!==null}var eyn=t=>({name:"transformOrigin",options:t,fn(e){let{placement:r,rects:n,middlewareData:o}=e,a=o.arrow?.centerOffset!==0,s=a?0:t.arrowWidth,u=a?0:t.arrowHeight,[l,c]=Lqt(r),d={start:"0%",center:"50%",end:"100%"}[c],f=(o.arrow?.x??0)+s/2,p=(o.arrow?.y??0)+u/2,m="",h="";return l==="bottom"?(m=a?d:`${f}px`,h=`${-u}px`):l==="top"?(m=a?d:`${f}px`,h=`${n.floating.height+u}px`):l==="right"?(m=`${-u}px`,h=a?d:`${p}px`):l==="left"&&(m=`${n.floating.width+u}px`,h=a?d:`${p}px`),{data:{x:m,y:h}}}});function Lqt(t){let[e,r="center"]=t.split("-");return[e,r]}var ENe=Iqt,Fqt=Rqt,kqt=jqt,$qt=Dqt;var cle=F(X(),1),Bqt=F(os(),1);var qqt=F(ft(),1),ryn="Portal",TNe=cle.forwardRef((t,e)=>{let{container:r,...n}=t,[o,i]=cle.useState(!1);zn(()=>i(!0),[]);let a=r||o&&globalThis?.document?.body;return a?Bqt.default.createPortal((0,qqt.jsx)(ac.div,{...n,ref:e}),a):null});TNe.displayName=ryn;var Kp=F(X(),1);var zqt=F(X(),1);function Uqt(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function nyn(...t){return e=>{let r=!1,n=t.map(o=>{let i=Uqt(o,e);return!r&&typeof i=="function"&&(r=!0),i});if(r)return()=>{for(let o=0;o<n.length;o++){let i=n[o];typeof i=="function"?i():Uqt(t[o],null)}}}}function Hqt(...t){return zqt.useCallback(nyn(...t),t)}var Vqt=F(X(),1);function oyn(t,e){return Vqt.useReducer((r,n)=>e[r][n]??r,t)}var Xc=t=>{let{present:e,children:r}=t,n=iyn(e),o=typeof r=="function"?r({present:n.isPresent}):Kp.Children.only(r),i=Hqt(n.ref,ayn(o));return typeof r=="function"||n.isPresent?Kp.cloneElement(o,{ref:i}):null};Xc.displayName="Presence";function iyn(t){let[e,r]=Kp.useState(),n=Kp.useRef({}),o=Kp.useRef(t),i=Kp.useRef("none"),a=t?"mounted":"unmounted",[s,u]=oyn(a,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return Kp.useEffect(()=>{let l=dle(n.current);i.current=s==="mounted"?l:"none"},[s]),zn(()=>{let l=n.current,c=o.current;if(c!==t){let f=i.current,p=dle(l);t?u("MOUNT"):p==="none"||l?.display==="none"?u("UNMOUNT"):u(c&&f!==p?"ANIMATION_OUT":"UNMOUNT"),o.current=t}},[t,u]),zn(()=>{if(e){let l,c=e.ownerDocument.defaultView??window,d=p=>{let h=dle(n.current).includes(p.animationName);if(p.target===e&&h&&(u("ANIMATION_END"),!o.current)){let b=e.style.animationFillMode;e.style.animationFillMode="forwards",l=c.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=b)})}},f=p=>{p.target===e&&(i.current=dle(n.current))};return e.addEventListener("animationstart",f),e.addEventListener("animationcancel",d),e.addEventListener("animationend",d),()=>{c.clearTimeout(l),e.removeEventListener("animationstart",f),e.removeEventListener("animationcancel",d),e.removeEventListener("animationend",d)}}else u("ANIMATION_END")},[e,u]),{isPresent:["mounted","unmountSuspended"].includes(s),ref:Kp.useCallback(l=>{l&&(n.current=getComputedStyle(l)),r(l)},[])}}function dle(t){return t?.animationName||"none"}function ayn(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,r=e&&"isReactWarning"in e&&e.isReactWarning;return r?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,r=e&&"isReactWarning"in e&&e.isReactWarning,r?t.props.ref:t.props.ref||t.ref)}var sc=F(X(),1);function aD(t,e,{checkForDefaultPrevented:r=!0}={}){return function(o){if(t?.(o),r===!1||!o.defaultPrevented)return e?.(o)}}var qI=F(X(),1);var Kqt=F(X(),1);function Wqt(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function ANe(...t){return e=>{let r=!1,n=t.map(o=>{let i=Wqt(o,e);return!r&&typeof i=="function"&&(r=!0),i});if(r)return()=>{for(let o=0;o<n.length;o++){let i=n[o];typeof i=="function"?i():Wqt(t[o],null)}}}}function z5(...t){return Kqt.useCallback(ANe(...t),t)}var Qc=F(X(),1);var hU=F(ft(),1),gU=Qc.forwardRef((t,e)=>{let{children:r,...n}=t,o=Qc.Children.toArray(r),i=o.find(uyn);if(i){let a=i.props.children,s=o.map(u=>u===i?Qc.Children.count(a)>1?Qc.Children.only(null):Qc.isValidElement(a)?a.props.children:null:u);return(0,hU.jsx)(INe,{...n,ref:e,children:Qc.isValidElement(a)?Qc.cloneElement(a,void 0,s):null})}return(0,hU.jsx)(INe,{...n,ref:e,children:r})});gU.displayName="Slot";var INe=Qc.forwardRef((t,e)=>{let{children:r,...n}=t;if(Qc.isValidElement(r)){let o=cyn(r);return Qc.cloneElement(r,{...lyn(n,r.props),ref:e?ANe(e,o):o})}return Qc.Children.count(r)>1?Qc.Children.only(null):null});INe.displayName="SlotClone";var syn=({children:t})=>(0,hU.jsx)(hU.Fragment,{children:t});function uyn(t){return Qc.isValidElement(t)&&t.type===syn}function lyn(t,e){let r={...e};for(let n in e){let o=t[n],i=e[n];/^on[A-Z]/.test(n)?o&&i?r[n]=(...s)=>{i(...s),o(...s)}:o&&(r[n]=o):n==="style"?r[n]={...o,...i}:n==="className"&&(r[n]=[o,i].filter(Boolean).join(" "))}return{...t,...r}}function cyn(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,r=e&&"isReactWarning"in e&&e.isReactWarning;return r?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,r=e&&"isReactWarning"in e&&e.isReactWarning,r?t.props.ref:t.props.ref||t.ref)}var fle=F(ft(),1);function Gqt(t){let e=t+"CollectionProvider",[r,n]=Vi(e),[o,i]=r(e,{collectionRef:{current:null},itemMap:new Map}),a=p=>{let{scope:m,children:h}=p,b=qI.default.useRef(null),g=qI.default.useRef(new Map).current;return(0,fle.jsx)(o,{scope:m,itemMap:g,collectionRef:b,children:h})};a.displayName=e;let s=t+"CollectionSlot",u=qI.default.forwardRef((p,m)=>{let{scope:h,children:b}=p,g=i(s,h),y=z5(m,g.collectionRef);return(0,fle.jsx)(gU,{ref:y,children:b})});u.displayName=s;let l=t+"CollectionItemSlot",c="data-radix-collection-item",d=qI.default.forwardRef((p,m)=>{let{scope:h,children:b,...g}=p,y=qI.default.useRef(null),w=z5(m,y),S=i(l,h);return qI.default.useEffect(()=>(S.itemMap.set(y,{ref:y,...g}),()=>void S.itemMap.delete(y))),(0,fle.jsx)(gU,{[c]:"",ref:w,children:b})});d.displayName=l;function f(p){let m=i(t+"CollectionConsumer",p);return qI.default.useCallback(()=>{let b=m.collectionRef.current;if(!b)return[];let g=Array.from(b.querySelectorAll(`[${c}]`));return Array.from(m.itemMap.values()).sort((S,C)=>g.indexOf(S.ref.current)-g.indexOf(C.ref.current))},[m.collectionRef,m.itemMap])}return[{Provider:a,Slot:u,ItemSlot:d},f,n]}var Jqt=F(X(),1),dyn=F(os(),1);var Yqt=F(ft(),1),fyn=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],MNe=fyn.reduce((t,e)=>{let r=Jqt.forwardRef((n,o)=>{let{asChild:i,...a}=n,s=i?gU:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),(0,Yqt.jsx)(s,{...a,ref:o})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});var UI=F(ft(),1),RNe="rovingFocusGroup.onEntryFocus",pyn={bubbles:!1,cancelable:!0},ple="RovingFocusGroup",[jNe,Zqt,myn]=Gqt(ple),[hyn,NNe]=Vi(ple,[myn]),[gyn,yyn]=hyn(ple),Xqt=sc.forwardRef((t,e)=>(0,UI.jsx)(jNe.Provider,{scope:t.__scopeRovingFocusGroup,children:(0,UI.jsx)(jNe.Slot,{scope:t.__scopeRovingFocusGroup,children:(0,UI.jsx)(byn,{...t,ref:e})})}));Xqt.displayName=ple;var byn=sc.forwardRef((t,e)=>{let{__scopeRovingFocusGroup:r,orientation:n,loop:o=!1,dir:i,currentTabStopId:a,defaultCurrentTabStopId:s,onCurrentTabStopIdChange:u,onEntryFocus:l,preventScrollOnEntryFocus:c=!1,...d}=t,f=sc.useRef(null),p=z5(e,f),m=TI(i),[h=null,b]=Gc({prop:a,defaultProp:s,onChange:u}),[g,y]=sc.useState(!1),w=qr(l),S=Zqt(r),C=sc.useRef(!1),[P,E]=sc.useState(0);return sc.useEffect(()=>{let A=f.current;if(A)return A.addEventListener(RNe,w),()=>A.removeEventListener(RNe,w)},[w]),(0,UI.jsx)(gyn,{scope:r,orientation:n,dir:m,loop:o,currentTabStopId:h,onItemFocus:sc.useCallback(A=>b(A),[b]),onItemShiftTab:sc.useCallback(()=>y(!0),[]),onFocusableItemAdd:sc.useCallback(()=>E(A=>A+1),[]),onFocusableItemRemove:sc.useCallback(()=>E(A=>A-1),[]),children:(0,UI.jsx)(MNe.div,{tabIndex:g||P===0?-1:0,"data-orientation":n,...d,ref:p,style:{outline:"none",...t.style},onMouseDown:aD(t.onMouseDown,()=>{C.current=!0}),onFocus:aD(t.onFocus,A=>{let I=!C.current;if(A.target===A.currentTarget&&I&&!g){let R=new CustomEvent(RNe,pyn);if(A.currentTarget.dispatchEvent(R),!R.defaultPrevented){let j=S().filter(V=>V.focusable),N=j.find(V=>V.active),$=j.find(V=>V.id===h),H=[N,$,...j].filter(Boolean).map(V=>V.ref.current);tUt(H,c)}}C.current=!1}),onBlur:aD(t.onBlur,()=>y(!1))})})}),Qqt="RovingFocusGroupItem",eUt=sc.forwardRef((t,e)=>{let{__scopeRovingFocusGroup:r,focusable:n=!0,active:o=!1,tabStopId:i,...a}=t,s=il(),u=i||s,l=yyn(Qqt,r),c=l.currentTabStopId===u,d=Zqt(r),{onFocusableItemAdd:f,onFocusableItemRemove:p}=l;return sc.useEffect(()=>{if(n)return f(),()=>p()},[n,f,p]),(0,UI.jsx)(jNe.ItemSlot,{scope:r,id:u,focusable:n,active:o,children:(0,UI.jsx)(MNe.span,{tabIndex:c?0:-1,"data-orientation":l.orientation,...a,ref:e,onMouseDown:aD(t.onMouseDown,m=>{n?l.onItemFocus(u):m.preventDefault()}),onFocus:aD(t.onFocus,()=>l.onItemFocus(u)),onKeyDown:aD(t.onKeyDown,m=>{if(m.key==="Tab"&&m.shiftKey){l.onItemShiftTab();return}if(m.target!==m.currentTarget)return;let h=wyn(m,l.orientation,l.dir);if(h!==void 0){if(m.metaKey||m.ctrlKey||m.altKey||m.shiftKey)return;m.preventDefault();let g=d().filter(y=>y.focusable).map(y=>y.ref.current);if(h==="last")g.reverse();else if(h==="prev"||h==="next"){h==="prev"&&g.reverse();let y=g.indexOf(m.currentTarget);g=l.loop?Syn(g,y+1):g.slice(y+1)}setTimeout(()=>tUt(g))}})})})});eUt.displayName=Qqt;var _yn={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function vyn(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function wyn(t,e,r){let n=vyn(t.key,r);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return _yn[n]}function tUt(t,e=!1){let r=document.activeElement;for(let n of t)if(n===r||(n.focus({preventScroll:e}),document.activeElement!==r))return}function Syn(t,e){return t.map((r,n)=>t[(e+n)%t.length])}var rUt=Xqt,nUt=eUt;var Cyn=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},yU=new WeakMap,mle=new WeakMap,hle={},DNe=0,oUt=function(t){return t&&(t.host||oUt(t.parentNode))},Oyn=function(t,e){return e.map(function(r){if(t.contains(r))return r;var n=oUt(r);return n&&t.contains(n)?n:(console.error("aria-hidden",r,"in not contained inside",t,". Doing nothing"),null)}).filter(function(r){return!!r})},Pyn=function(t,e,r,n){var o=Oyn(e,Array.isArray(t)?t:[t]);hle[r]||(hle[r]=new WeakMap);var i=hle[r],a=[],s=new Set,u=new Set(o),l=function(d){!d||s.has(d)||(s.add(d),l(d.parentNode))};o.forEach(l);var c=function(d){!d||u.has(d)||Array.prototype.forEach.call(d.children,function(f){if(s.has(f))c(f);else try{var p=f.getAttribute(n),m=p!==null&&p!=="false",h=(yU.get(f)||0)+1,b=(i.get(f)||0)+1;yU.set(f,h),i.set(f,b),a.push(f),h===1&&m&&mle.set(f,!0),b===1&&f.setAttribute(r,"true"),m||f.setAttribute(n,"true")}catch(g){console.error("aria-hidden: cannot operate on ",f,g)}})};return c(e),s.clear(),DNe++,function(){a.forEach(function(d){var f=yU.get(d)-1,p=i.get(d)-1;yU.set(d,f),i.set(d,p),f||(mle.has(d)||d.removeAttribute(n),mle.delete(d)),p||d.removeAttribute(r)}),DNe--,DNe||(yU=new WeakMap,yU=new WeakMap,mle=new WeakMap,hle={})}},zI=function(t,e,r){r===void 0&&(r="data-aria-hidden");var n=Array.from(Array.isArray(t)?t:[t]),o=e||Cyn(t);return o?(n.push.apply(n,Array.from(o.querySelectorAll("[aria-live]"))),Pyn(n,o,r,"aria-hidden")):function(){return null}};var ci=function(){return ci=Object.assign||function(e){for(var r,n=1,o=arguments.length;n<o;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},ci.apply(this,arguments)};function HI(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,n=Object.getOwnPropertySymbols(t);o<n.length;o++)e.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(t,n[o])&&(r[n[o]]=t[n[o]]);return r}function bU(t,e,r){if(r||arguments.length===2)for(var n=0,o=e.length,i;n<o;n++)(i||!(n in e))&&(i||(i=Array.prototype.slice.call(e,0,n)),i[n]=e[n]);return t.concat(i||Array.prototype.slice.call(e))}var vle=F(X());var Zd=F(X());var tb="right-scroll-bar-position",rb="width-before-scroll-bar",LNe="with-scroll-bars-hidden",FNe="--removed-body-scroll-bar-size";function gle(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}var iUt=F(X());function aUt(t,e){var r=(0,iUt.useState)(function(){return{value:t,callback:e,facade:{get current(){return r.value},set current(n){var o=r.value;o!==n&&(r.value=n,r.callback(n,o))}}}})[0];return r.callback=e,r.facade}var yle=F(X());var Eyn=typeof window<"u"?yle.useLayoutEffect:yle.useEffect,sUt=new WeakMap;function sD(t,e){var r=aUt(e||null,function(n){return t.forEach(function(o){return gle(o,n)})});return Eyn(function(){var n=sUt.get(r);if(n){var o=new Set(n),i=new Set(t),a=r.current;o.forEach(function(s){i.has(s)||gle(s,null)}),i.forEach(function(s){o.has(s)||gle(s,a)})}sUt.set(r,t)},[t]),r}function Tyn(t){return t}function Ayn(t,e){e===void 0&&(e=Tyn);var r=[],n=!1,o={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:t},useMedium:function(i){var a=e(i,n);return r.push(a),function(){r=r.filter(function(s){return s!==a})}},assignSyncMedium:function(i){for(n=!0;r.length;){var a=r;r=[],a.forEach(i)}r={push:function(s){return i(s)},filter:function(){return r}}},assignMedium:function(i){n=!0;var a=[];if(r.length){var s=r;r=[],s.forEach(i),a=r}var u=function(){var c=a;a=[],c.forEach(i)},l=function(){return Promise.resolve().then(u)};l(),r={push:function(c){a.push(c),l()},filter:function(c){return a=a.filter(c),r}}}};return o}function uD(t){t===void 0&&(t={});var e=Ayn(null);return e.options=ci({async:!0,ssr:!1},t),e}var uUt=F(X()),lUt=function(t){var e=t.sideCar,r=HI(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=e.read();if(!n)throw new Error("Sidecar medium not found");return uUt.createElement(n,ci({},r))};lUt.isSideCarExport=!0;function lD(t,e){return t.useMedium(e),lUt}var ble=uD();var kNe=function(){},H5=Zd.forwardRef(function(t,e){var r=Zd.useRef(null),n=Zd.useState({onScrollCapture:kNe,onWheelCapture:kNe,onTouchMoveCapture:kNe}),o=n[0],i=n[1],a=t.forwardProps,s=t.children,u=t.className,l=t.removeScrollBar,c=t.enabled,d=t.shards,f=t.sideCar,p=t.noIsolation,m=t.inert,h=t.allowPinchZoom,b=t.as,g=b===void 0?"div":b,y=t.gapMode,w=HI(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),S=f,C=sD([r,e]),P=ci(ci({},w),o);return Zd.createElement(Zd.Fragment,null,c&&Zd.createElement(S,{sideCar:ble,removeScrollBar:l,shards:d,noIsolation:p,inert:m,setCallbacks:i,allowPinchZoom:!!h,lockRef:r,gapMode:y}),a?Zd.cloneElement(Zd.Children.only(s),ci(ci({},P),{ref:C})):Zd.createElement(g,ci({},P,{className:u,ref:C}),s))});H5.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};H5.classNames={fullWidth:rb,zeroRight:tb};var ca=F(X());var vU=F(X());var fUt=F(X());var cUt;var dUt=function(){if(cUt)return cUt;if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function Iyn(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=dUt();return e&&t.setAttribute("nonce",e),t}function Myn(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function Ryn(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var $Ne=function(){var t=0,e=null;return{add:function(r){t==0&&(e=Iyn())&&(Myn(e,r),Ryn(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}};var BNe=function(){var t=$Ne();return function(e,r){fUt.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&r])}};var DP=function(){var t=BNe(),e=function(r){var n=r.styles,o=r.dynamic;return t(n,o),null};return e};var jyn={left:0,top:0,right:0,gap:0},qNe=function(t){return parseInt(t||"",10)||0},Nyn=function(t){var e=window.getComputedStyle(document.body),r=e[t==="padding"?"paddingLeft":"marginLeft"],n=e[t==="padding"?"paddingTop":"marginTop"],o=e[t==="padding"?"paddingRight":"marginRight"];return[qNe(r),qNe(n),qNe(o)]},UNe=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return jyn;var e=Nyn(t),r=document.documentElement.clientWidth,n=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,n-r+e[2]-e[0])}};var Dyn=DP(),_U="data-scroll-locked",Lyn=function(t,e,r,n){var o=t.left,i=t.top,a=t.right,s=t.gap;return r===void 0&&(r="margin"),`
  .`.concat(LNe,` {
   overflow: hidden `).concat(n,`;
   padding-right: `).concat(s,"px ").concat(n,`;
  }
  body[`).concat(_U,`] {
    overflow: hidden `).concat(n,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(n,";"),r==="margin"&&`
    padding-left: `.concat(o,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(a,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(s,"px ").concat(n,`;
    `),r==="padding"&&"padding-right: ".concat(s,"px ").concat(n,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(tb,` {
    right: `).concat(s,"px ").concat(n,`;
  }
  
  .`).concat(rb,` {
    margin-right: `).concat(s,"px ").concat(n,`;
  }
  
  .`).concat(tb," .").concat(tb,` {
    right: 0 `).concat(n,`;
  }
  
  .`).concat(rb," .").concat(rb,` {
    margin-right: 0 `).concat(n,`;
  }
  
  body[`).concat(_U,`] {
    `).concat(FNe,": ").concat(s,`px;
  }
`)},pUt=function(){var t=parseInt(document.body.getAttribute(_U)||"0",10);return isFinite(t)?t:0},Fyn=function(){vU.useEffect(function(){return document.body.setAttribute(_U,(pUt()+1).toString()),function(){var t=pUt()-1;t<=0?document.body.removeAttribute(_U):document.body.setAttribute(_U,t.toString())}},[])},cD=function(t){var e=t.noRelative,r=t.noImportant,n=t.gapMode,o=n===void 0?"margin":n;Fyn();var i=vU.useMemo(function(){return UNe(o)},[o]);return vU.createElement(Dyn,{styles:Lyn(i,!e,o,r?"":"!important")})};var zNe=!1;if(typeof window<"u")try{V5=Object.defineProperty({},"passive",{get:function(){return zNe=!0,!0}}),window.addEventListener("test",V5,V5),window.removeEventListener("test",V5,V5)}catch{zNe=!1}var V5,dD=zNe?{passive:!1}:!1;var kyn=function(t){return t.tagName==="TEXTAREA"},mUt=function(t,e){if(!(t instanceof Element))return!1;var r=window.getComputedStyle(t);return r[e]!=="hidden"&&!(r.overflowY===r.overflowX&&!kyn(t)&&r[e]==="visible")},$yn=function(t){return mUt(t,"overflowY")},Byn=function(t){return mUt(t,"overflowX")},HNe=function(t,e){var r=e.ownerDocument,n=e;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var o=hUt(t,n);if(o){var i=gUt(t,n),a=i[1],s=i[2];if(a>s)return!0}n=n.parentNode}while(n&&n!==r.body);return!1},qyn=function(t){var e=t.scrollTop,r=t.scrollHeight,n=t.clientHeight;return[e,r,n]},Uyn=function(t){var e=t.scrollLeft,r=t.scrollWidth,n=t.clientWidth;return[e,r,n]},hUt=function(t,e){return t==="v"?$yn(e):Byn(e)},gUt=function(t,e){return t==="v"?qyn(e):Uyn(e)},zyn=function(t,e){return t==="h"&&e==="rtl"?-1:1},yUt=function(t,e,r,n,o){var i=zyn(t,window.getComputedStyle(e).direction),a=i*n,s=r.target,u=e.contains(s),l=!1,c=a>0,d=0,f=0;do{var p=gUt(t,s),m=p[0],h=p[1],b=p[2],g=h-b-i*m;(m||g)&&hUt(t,s)&&(d+=g,f+=m),s instanceof ShadowRoot?s=s.host:s=s.parentNode}while(!u&&s!==document.body||u&&(e.contains(s)||e===s));return(c&&(o&&Math.abs(d)<1||!o&&a>d)||!c&&(o&&Math.abs(f)<1||!o&&-a>f))&&(l=!0),l};var _le=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},bUt=function(t){return[t.deltaX,t.deltaY]},_Ut=function(t){return t&&"current"in t?t.current:t},Hyn=function(t,e){return t[0]===e[0]&&t[1]===e[1]},Vyn=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},Wyn=0,wU=[];function vUt(t){var e=ca.useRef([]),r=ca.useRef([0,0]),n=ca.useRef(),o=ca.useState(Wyn++)[0],i=ca.useState(DP)[0],a=ca.useRef(t);ca.useEffect(function(){a.current=t},[t]),ca.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(o));var h=bU([t.lockRef.current],(t.shards||[]).map(_Ut),!0).filter(Boolean);return h.forEach(function(b){return b.classList.add("allow-interactivity-".concat(o))}),function(){document.body.classList.remove("block-interactivity-".concat(o)),h.forEach(function(b){return b.classList.remove("allow-interactivity-".concat(o))})}}},[t.inert,t.lockRef.current,t.shards]);var s=ca.useCallback(function(h,b){if("touches"in h&&h.touches.length===2||h.type==="wheel"&&h.ctrlKey)return!a.current.allowPinchZoom;var g=_le(h),y=r.current,w="deltaX"in h?h.deltaX:y[0]-g[0],S="deltaY"in h?h.deltaY:y[1]-g[1],C,P=h.target,E=Math.abs(w)>Math.abs(S)?"h":"v";if("touches"in h&&E==="h"&&P.type==="range")return!1;var A=HNe(E,P);if(!A)return!0;if(A?C=E:(C=E==="v"?"h":"v",A=HNe(E,P)),!A)return!1;if(!n.current&&"changedTouches"in h&&(w||S)&&(n.current=C),!C)return!0;var I=n.current||C;return yUt(I,b,h,I==="h"?w:S,!0)},[]),u=ca.useCallback(function(h){var b=h;if(!(!wU.length||wU[wU.length-1]!==i)){var g="deltaY"in b?bUt(b):_le(b),y=e.current.filter(function(C){return C.name===b.type&&(C.target===b.target||b.target===C.shadowParent)&&Hyn(C.delta,g)})[0];if(y&&y.should){b.cancelable&&b.preventDefault();return}if(!y){var w=(a.current.shards||[]).map(_Ut).filter(Boolean).filter(function(C){return C.contains(b.target)}),S=w.length>0?s(b,w[0]):!a.current.noIsolation;S&&b.cancelable&&b.preventDefault()}}},[]),l=ca.useCallback(function(h,b,g,y){var w={name:h,delta:b,target:g,should:y,shadowParent:Kyn(g)};e.current.push(w),setTimeout(function(){e.current=e.current.filter(function(S){return S!==w})},1)},[]),c=ca.useCallback(function(h){r.current=_le(h),n.current=void 0},[]),d=ca.useCallback(function(h){l(h.type,bUt(h),h.target,s(h,t.lockRef.current))},[]),f=ca.useCallback(function(h){l(h.type,_le(h),h.target,s(h,t.lockRef.current))},[]);ca.useEffect(function(){return wU.push(i),t.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:f}),document.addEventListener("wheel",u,dD),document.addEventListener("touchmove",u,dD),document.addEventListener("touchstart",c,dD),function(){wU=wU.filter(function(h){return h!==i}),document.removeEventListener("wheel",u,dD),document.removeEventListener("touchmove",u,dD),document.removeEventListener("touchstart",c,dD)}},[]);var p=t.removeScrollBar,m=t.inert;return ca.createElement(ca.Fragment,null,m?ca.createElement(i,{styles:Vyn(o)}):null,p?ca.createElement(cD,{gapMode:t.gapMode}):null)}function Kyn(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}var wUt=lD(ble,vUt);var SUt=vle.forwardRef(function(t,e){return vle.createElement(H5,ci({},t,{ref:e,sideCar:wUt}))});SUt.classNames=H5.classNames;var VNe=SUt;var Ir=F(ft(),1),WNe=["Enter"," "],Gyn=["ArrowDown","PageUp","Home"],CUt=["ArrowUp","PageDown","End"],Jyn=[...Gyn,...CUt],Yyn={ltr:[...WNe,"ArrowRight"],rtl:[...WNe,"ArrowLeft"]},Zyn={ltr:["ArrowLeft"],rtl:["ArrowRight"]},J5="Menu",[K5,Xyn,Qyn]=xBt(J5),[fD,KNe]=Vi(J5,[Qyn,ONe,NNe]),Y5=ONe(),OUt=NNe(),[PUt,VI]=fD(J5),[ebn,Z5]=fD(J5),EUt=t=>{let{__scopeMenu:e,open:r=!1,children:n,dir:o,onOpenChange:i,modal:a=!0}=t,s=Y5(e),[u,l]=Ut.useState(null),c=Ut.useRef(!1),d=qr(i),f=TI(o);return Ut.useEffect(()=>{let p=()=>{c.current=!0,document.addEventListener("pointerdown",m,{capture:!0,once:!0}),document.addEventListener("pointermove",m,{capture:!0,once:!0})},m=()=>c.current=!1;return document.addEventListener("keydown",p,{capture:!0}),()=>{document.removeEventListener("keydown",p,{capture:!0}),document.removeEventListener("pointerdown",m,{capture:!0}),document.removeEventListener("pointermove",m,{capture:!0})}},[]),(0,Ir.jsx)(ENe,{...s,children:(0,Ir.jsx)(PUt,{scope:e,open:r,onOpenChange:d,content:u,onContentChange:l,children:(0,Ir.jsx)(ebn,{scope:e,onClose:Ut.useCallback(()=>d(!1),[d]),isUsingKeyboardRef:c,dir:f,modal:a,children:n})})})};EUt.displayName=J5;var tbn="MenuAnchor",GNe=Ut.forwardRef((t,e)=>{let{__scopeMenu:r,...n}=t,o=Y5(r);return(0,Ir.jsx)(Fqt,{...o,...n,ref:e})});GNe.displayName=tbn;var JNe="MenuPortal",[rbn,TUt]=fD(JNe,{forceMount:void 0}),AUt=t=>{let{__scopeMenu:e,forceMount:r,children:n,container:o}=t,i=VI(JNe,e);return(0,Ir.jsx)(rbn,{scope:e,forceMount:r,children:(0,Ir.jsx)(Xc,{present:r||i.open,children:(0,Ir.jsx)(TNe,{asChild:!0,container:o,children:n})})})};AUt.displayName=JNe;var Ig="MenuContent",[nbn,YNe]=fD(Ig),IUt=Ut.forwardRef((t,e)=>{let r=TUt(Ig,t.__scopeMenu),{forceMount:n=r.forceMount,...o}=t,i=VI(Ig,t.__scopeMenu),a=Z5(Ig,t.__scopeMenu);return(0,Ir.jsx)(K5.Provider,{scope:t.__scopeMenu,children:(0,Ir.jsx)(Xc,{present:n||i.open,children:(0,Ir.jsx)(K5.Slot,{scope:t.__scopeMenu,children:a.modal?(0,Ir.jsx)(obn,{...o,ref:e}):(0,Ir.jsx)(ibn,{...o,ref:e})})})})}),obn=Ut.forwardRef((t,e)=>{let r=VI(Ig,t.__scopeMenu),n=Ut.useRef(null),o=Yc(e,n);return Ut.useEffect(()=>{let i=n.current;if(i)return zI(i)},[]),(0,Ir.jsx)(ZNe,{...t,ref:o,trapFocus:r.open,disableOutsidePointerEvents:r.open,disableOutsideScroll:!0,onFocusOutside:Wi(t.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>r.onOpenChange(!1)})}),ibn=Ut.forwardRef((t,e)=>{let r=VI(Ig,t.__scopeMenu);return(0,Ir.jsx)(ZNe,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>r.onOpenChange(!1)})}),ZNe=Ut.forwardRef((t,e)=>{let{__scopeMenu:r,loop:n=!1,trapFocus:o,onOpenAutoFocus:i,onCloseAutoFocus:a,disableOutsidePointerEvents:s,onEntryFocus:u,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:d,onInteractOutside:f,onDismiss:p,disableOutsideScroll:m,...h}=t,b=VI(Ig,r),g=Z5(Ig,r),y=Y5(r),w=OUt(r),S=Xyn(r),[C,P]=Ut.useState(null),E=Ut.useRef(null),A=Yc(e,E,b.onContentChange),I=Ut.useRef(0),R=Ut.useRef(""),j=Ut.useRef(0),N=Ut.useRef(null),$=Ut.useRef("right"),k=Ut.useRef(0),H=m?VNe:Ut.Fragment,V=m?{as:PI,allowPinchZoom:!0}:void 0,Q=D=>{let B=R.current+D,q=S().filter(Y=>!Y.disabled),K=document.activeElement,U=q.find(Y=>Y.ref.current===K)?.textValue,te=q.map(Y=>Y.textValue),z=bbn(te,B,U),W=q.find(Y=>Y.textValue===z)?.ref.current;(function Y(ae){R.current=ae,window.clearTimeout(I.current),ae!==""&&(I.current=window.setTimeout(()=>Y(""),1e3))})(B),W&&setTimeout(()=>W.focus())};Ut.useEffect(()=>()=>window.clearTimeout(I.current),[]),II();let G=Ut.useCallback(D=>$.current===N.current?.side&&vbn(D,N.current?.area),[]);return(0,Ir.jsx)(nbn,{scope:r,searchRef:R,onItemEnter:Ut.useCallback(D=>{G(D)&&D.preventDefault()},[G]),onItemLeave:Ut.useCallback(D=>{G(D)||(E.current?.focus(),P(null))},[G]),onTriggerLeave:Ut.useCallback(D=>{G(D)&&D.preventDefault()},[G]),pointerGraceTimerRef:j,onPointerGraceIntentChange:Ut.useCallback(D=>{N.current=D},[]),children:(0,Ir.jsx)(H,{...V,children:(0,Ir.jsx)(hNe,{asChild:!0,trapped:o,onMountAutoFocus:Wi(i,D=>{D.preventDefault(),E.current?.focus({preventScroll:!0})}),onUnmountAutoFocus:a,children:(0,Ir.jsx)(dNe,{asChild:!0,disableOutsidePointerEvents:s,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:d,onInteractOutside:f,onDismiss:p,children:(0,Ir.jsx)(rUt,{asChild:!0,...w,dir:g.dir,orientation:"vertical",loop:n,currentTabStopId:C,onCurrentTabStopIdChange:P,onEntryFocus:Wi(u,D=>{g.isUsingKeyboardRef.current||D.preventDefault()}),preventScrollOnEntryFocus:!0,children:(0,Ir.jsx)(kqt,{role:"menu","aria-orientation":"vertical","data-state":WUt(b.open),"data-radix-menu-content":"",dir:g.dir,...y,...h,ref:A,style:{outline:"none",...h.style},onKeyDown:Wi(h.onKeyDown,D=>{let q=D.target.closest("[data-radix-menu-content]")===D.currentTarget,K=D.ctrlKey||D.altKey||D.metaKey,U=D.key.length===1;q&&(D.key==="Tab"&&D.preventDefault(),!K&&U&&Q(D.key));let te=E.current;if(D.target!==te||!Jyn.includes(D.key))return;D.preventDefault();let W=S().filter(Y=>!Y.disabled).map(Y=>Y.ref.current);CUt.includes(D.key)&&W.reverse(),gbn(W)}),onBlur:Wi(t.onBlur,D=>{D.currentTarget.contains(D.target)||(window.clearTimeout(I.current),R.current="")}),onPointerMove:Wi(t.onPointerMove,G5(D=>{let B=D.target,q=k.current!==D.clientX;if(D.currentTarget.contains(B)&&q){let K=D.clientX>k.current?"right":"left";$.current=K,k.current=D.clientX}}))})})})})})})});IUt.displayName=Ig;var abn="MenuGroup",XNe=Ut.forwardRef((t,e)=>{let{__scopeMenu:r,...n}=t;return(0,Ir.jsx)(ac.div,{role:"group",...n,ref:e})});XNe.displayName=abn;var sbn="MenuLabel",MUt=Ut.forwardRef((t,e)=>{let{__scopeMenu:r,...n}=t;return(0,Ir.jsx)(ac.div,{...n,ref:e})});MUt.displayName=sbn;var wle="MenuItem",xUt="menu.itemSelect",xle=Ut.forwardRef((t,e)=>{let{disabled:r=!1,onSelect:n,...o}=t,i=Ut.useRef(null),a=Z5(wle,t.__scopeMenu),s=YNe(wle,t.__scopeMenu),u=Yc(e,i),l=Ut.useRef(!1),c=()=>{let d=i.current;if(!r&&d){let f=new CustomEvent(xUt,{bubbles:!0,cancelable:!0});d.addEventListener(xUt,p=>n?.(p),{once:!0}),Yue(d,f),f.defaultPrevented?l.current=!1:a.onClose()}};return(0,Ir.jsx)(RUt,{...o,ref:u,disabled:r,onClick:Wi(t.onClick,c),onPointerDown:d=>{t.onPointerDown?.(d),l.current=!0},onPointerUp:Wi(t.onPointerUp,d=>{l.current||d.currentTarget?.click()}),onKeyDown:Wi(t.onKeyDown,d=>{let f=s.searchRef.current!=="";r||f&&d.key===" "||WNe.includes(d.key)&&(d.currentTarget.click(),d.preventDefault())})})});xle.displayName=wle;var RUt=Ut.forwardRef((t,e)=>{let{__scopeMenu:r,disabled:n=!1,textValue:o,...i}=t,a=YNe(wle,r),s=OUt(r),u=Ut.useRef(null),l=Yc(e,u),[c,d]=Ut.useState(!1),[f,p]=Ut.useState("");return Ut.useEffect(()=>{let m=u.current;m&&p((m.textContent??"").trim())},[i.children]),(0,Ir.jsx)(K5.ItemSlot,{scope:r,disabled:n,textValue:o??f,children:(0,Ir.jsx)(nUt,{asChild:!0,...s,focusable:!n,children:(0,Ir.jsx)(ac.div,{role:"menuitem","data-highlighted":c?"":void 0,"aria-disabled":n||void 0,"data-disabled":n?"":void 0,...i,ref:l,onPointerMove:Wi(t.onPointerMove,G5(m=>{n?a.onItemLeave(m):(a.onItemEnter(m),m.defaultPrevented||m.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:Wi(t.onPointerLeave,G5(m=>a.onItemLeave(m))),onFocus:Wi(t.onFocus,()=>d(!0)),onBlur:Wi(t.onBlur,()=>d(!1))})})})}),ubn="MenuCheckboxItem",jUt=Ut.forwardRef((t,e)=>{let{checked:r=!1,onCheckedChange:n,...o}=t;return(0,Ir.jsx)(kUt,{scope:t.__scopeMenu,checked:r,children:(0,Ir.jsx)(xle,{role:"menuitemcheckbox","aria-checked":Sle(r)?"mixed":r,...o,ref:e,"data-state":tDe(r),onSelect:Wi(o.onSelect,()=>n?.(Sle(r)?!0:!r),{checkForDefaultPrevented:!1})})})});jUt.displayName=ubn;var NUt="MenuRadioGroup",[lbn,cbn]=fD(NUt,{value:void 0,onValueChange:()=>{}}),DUt=Ut.forwardRef((t,e)=>{let{value:r,onValueChange:n,...o}=t,i=qr(n);return(0,Ir.jsx)(lbn,{scope:t.__scopeMenu,value:r,onValueChange:i,children:(0,Ir.jsx)(XNe,{...o,ref:e})})});DUt.displayName=NUt;var LUt="MenuRadioItem",FUt=Ut.forwardRef((t,e)=>{let{value:r,...n}=t,o=cbn(LUt,t.__scopeMenu),i=r===o.value;return(0,Ir.jsx)(kUt,{scope:t.__scopeMenu,checked:i,children:(0,Ir.jsx)(xle,{role:"menuitemradio","aria-checked":i,...n,ref:e,"data-state":tDe(i),onSelect:Wi(n.onSelect,()=>o.onValueChange?.(r),{checkForDefaultPrevented:!1})})})});FUt.displayName=LUt;var QNe="MenuItemIndicator",[kUt,dbn]=fD(QNe,{checked:!1}),$Ut=Ut.forwardRef((t,e)=>{let{__scopeMenu:r,forceMount:n,...o}=t,i=dbn(QNe,r);return(0,Ir.jsx)(Xc,{present:n||Sle(i.checked)||i.checked===!0,children:(0,Ir.jsx)(ac.span,{...o,ref:e,"data-state":tDe(i.checked)})})});$Ut.displayName=QNe;var fbn="MenuSeparator",BUt=Ut.forwardRef((t,e)=>{let{__scopeMenu:r,...n}=t;return(0,Ir.jsx)(ac.div,{role:"separator","aria-orientation":"horizontal",...n,ref:e})});BUt.displayName=fbn;var pbn="MenuArrow",qUt=Ut.forwardRef((t,e)=>{let{__scopeMenu:r,...n}=t,o=Y5(r);return(0,Ir.jsx)($qt,{...o,...n,ref:e})});qUt.displayName=pbn;var eDe="MenuSub",[mbn,UUt]=fD(eDe),hbn=t=>{let{__scopeMenu:e,children:r,open:n=!1,onOpenChange:o}=t,i=VI(eDe,e),a=Y5(e),[s,u]=Ut.useState(null),[l,c]=Ut.useState(null),d=qr(o);return Ut.useEffect(()=>(i.open===!1&&d(!1),()=>d(!1)),[i.open,d]),(0,Ir.jsx)(ENe,{...a,children:(0,Ir.jsx)(PUt,{scope:e,open:n,onOpenChange:d,content:l,onContentChange:c,children:(0,Ir.jsx)(mbn,{scope:e,contentId:il(),triggerId:il(),trigger:s,onTriggerChange:u,children:r})})})};hbn.displayName=eDe;var W5="MenuSubTrigger",zUt=Ut.forwardRef((t,e)=>{let r=VI(W5,t.__scopeMenu),n=Z5(W5,t.__scopeMenu),o=UUt(W5,t.__scopeMenu),i=YNe(W5,t.__scopeMenu),a=Ut.useRef(null),{pointerGraceTimerRef:s,onPointerGraceIntentChange:u}=i,l={__scopeMenu:t.__scopeMenu},c=Ut.useCallback(()=>{a.current&&window.clearTimeout(a.current),a.current=null},[]);return Ut.useEffect(()=>c,[c]),Ut.useEffect(()=>{let d=s.current;return()=>{window.clearTimeout(d),u(null)}},[s,u]),(0,Ir.jsx)(GNe,{asChild:!0,...l,children:(0,Ir.jsx)(RUt,{id:o.triggerId,"aria-haspopup":"menu","aria-expanded":r.open,"aria-controls":o.contentId,"data-state":WUt(r.open),...t,ref:F5(e,o.onTriggerChange),onClick:d=>{t.onClick?.(d),!(t.disabled||d.defaultPrevented)&&(d.currentTarget.focus(),r.open||r.onOpenChange(!0))},onPointerMove:Wi(t.onPointerMove,G5(d=>{i.onItemEnter(d),!d.defaultPrevented&&!t.disabled&&!r.open&&!a.current&&(i.onPointerGraceIntentChange(null),a.current=window.setTimeout(()=>{r.onOpenChange(!0),c()},100))})),onPointerLeave:Wi(t.onPointerLeave,G5(d=>{c();let f=r.content?.getBoundingClientRect();if(f){let p=r.content?.dataset.side,m=p==="right",h=m?-5:5,b=f[m?"left":"right"],g=f[m?"right":"left"];i.onPointerGraceIntentChange({area:[{x:d.clientX+h,y:d.clientY},{x:b,y:f.top},{x:g,y:f.top},{x:g,y:f.bottom},{x:b,y:f.bottom}],side:p}),window.clearTimeout(s.current),s.current=window.setTimeout(()=>i.onPointerGraceIntentChange(null),300)}else{if(i.onTriggerLeave(d),d.defaultPrevented)return;i.onPointerGraceIntentChange(null)}})),onKeyDown:Wi(t.onKeyDown,d=>{let f=i.searchRef.current!=="";t.disabled||f&&d.key===" "||Yyn[n.dir].includes(d.key)&&(r.onOpenChange(!0),r.content?.focus(),d.preventDefault())})})})});zUt.displayName=W5;var HUt="MenuSubContent",VUt=Ut.forwardRef((t,e)=>{let r=TUt(Ig,t.__scopeMenu),{forceMount:n=r.forceMount,...o}=t,i=VI(Ig,t.__scopeMenu),a=Z5(Ig,t.__scopeMenu),s=UUt(HUt,t.__scopeMenu),u=Ut.useRef(null),l=Yc(e,u);return(0,Ir.jsx)(K5.Provider,{scope:t.__scopeMenu,children:(0,Ir.jsx)(Xc,{present:n||i.open,children:(0,Ir.jsx)(K5.Slot,{scope:t.__scopeMenu,children:(0,Ir.jsx)(ZNe,{id:s.contentId,"aria-labelledby":s.triggerId,...o,ref:l,align:"start",side:a.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:c=>{a.isUsingKeyboardRef.current&&u.current?.focus(),c.preventDefault()},onCloseAutoFocus:c=>c.preventDefault(),onFocusOutside:Wi(t.onFocusOutside,c=>{c.target!==s.trigger&&i.onOpenChange(!1)}),onEscapeKeyDown:Wi(t.onEscapeKeyDown,c=>{a.onClose(),c.preventDefault()}),onKeyDown:Wi(t.onKeyDown,c=>{let d=c.currentTarget.contains(c.target),f=Zyn[a.dir].includes(c.key);d&&f&&(i.onOpenChange(!1),s.trigger?.focus(),c.preventDefault())})})})})})});VUt.displayName=HUt;function WUt(t){return t?"open":"closed"}function Sle(t){return t==="indeterminate"}function tDe(t){return Sle(t)?"indeterminate":t?"checked":"unchecked"}function gbn(t){let e=document.activeElement;for(let r of t)if(r===e||(r.focus(),document.activeElement!==e))return}function ybn(t,e){return t.map((r,n)=>t[(e+n)%t.length])}function bbn(t,e,r){let o=e.length>1&&Array.from(e).every(l=>l===e[0])?e[0]:e,i=r?t.indexOf(r):-1,a=ybn(t,Math.max(i,0));o.length===1&&(a=a.filter(l=>l!==r));let u=a.find(l=>l.toLowerCase().startsWith(o.toLowerCase()));return u!==r?u:void 0}function _bn(t,e){let{x:r,y:n}=t,o=!1;for(let i=0,a=e.length-1;i<e.length;a=i++){let s=e[i].x,u=e[i].y,l=e[a].x,c=e[a].y;u>n!=c>n&&r<(l-s)*(n-u)/(c-u)+s&&(o=!o)}return o}function vbn(t,e){if(!e)return!1;let r={x:t.clientX,y:t.clientY};return _bn(r,e)}function G5(t){return e=>e.pointerType==="mouse"?t(e):void 0}var KUt=EUt,GUt=GNe,JUt=AUt,YUt=IUt,ZUt=XNe,XUt=MUt,QUt=xle,ezt=jUt,tzt=DUt,rzt=FUt,nzt=$Ut,ozt=BUt,izt=qUt;var azt=zUt,szt=VUt;var uc=F(ft(),1),rDe="DropdownMenu",[Sbn,Ati]=Vi(rDe,[KNe]),Uf=KNe(),[xbn,uzt]=Sbn(rDe),X5=t=>{let{__scopeDropdownMenu:e,children:r,dir:n,open:o,defaultOpen:i,onOpenChange:a,modal:s=!0}=t,u=Uf(e),l=Tl.useRef(null),[c=!1,d]=Gc({prop:o,defaultProp:i,onChange:a});return(0,uc.jsx)(xbn,{scope:e,triggerId:il(),triggerRef:l,contentId:il(),open:c,onOpenChange:d,onOpenToggle:Tl.useCallback(()=>d(f=>!f),[d]),modal:s,children:(0,uc.jsx)(KUt,{...u,open:c,onOpenChange:d,dir:n,modal:s,children:r})})};X5.displayName=rDe;var lzt="DropdownMenuTrigger",Q5=Tl.forwardRef((t,e)=>{let{__scopeDropdownMenu:r,disabled:n=!1,...o}=t,i=uzt(lzt,r),a=Uf(r);return(0,uc.jsx)(GUt,{asChild:!0,...a,children:(0,uc.jsx)(vBt.button,{type:"button",id:i.triggerId,"aria-haspopup":"menu","aria-expanded":i.open,"aria-controls":i.open?i.contentId:void 0,"data-state":i.open?"open":"closed","data-disabled":n?"":void 0,disabled:n,...o,ref:Kue(e,i.triggerRef),onPointerDown:L5(t.onPointerDown,s=>{!n&&s.button===0&&s.ctrlKey===!1&&(i.onOpenToggle(),i.open||s.preventDefault())}),onKeyDown:L5(t.onKeyDown,s=>{n||(["Enter"," "].includes(s.key)&&i.onOpenToggle(),s.key==="ArrowDown"&&i.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(s.key)&&s.preventDefault())})})})});Q5.displayName=lzt;var Cbn="DropdownMenuPortal",czt=t=>{let{__scopeDropdownMenu:e,...r}=t,n=Uf(e);return(0,uc.jsx)(JUt,{...n,...r})};czt.displayName=Cbn;var dzt="DropdownMenuContent",fzt=Tl.forwardRef((t,e)=>{let{__scopeDropdownMenu:r,...n}=t,o=uzt(dzt,r),i=Uf(r),a=Tl.useRef(!1);return(0,uc.jsx)(YUt,{id:o.contentId,"aria-labelledby":o.triggerId,...i,...n,ref:e,onCloseAutoFocus:L5(t.onCloseAutoFocus,s=>{a.current||o.triggerRef.current?.focus(),a.current=!1,s.preventDefault()}),onInteractOutside:L5(t.onInteractOutside,s=>{let u=s.detail.originalEvent,l=u.button===0&&u.ctrlKey===!0,c=u.button===2||l;(!o.modal||c)&&(a.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});fzt.displayName=dzt;var Obn="DropdownMenuGroup",Pbn=Tl.forwardRef((t,e)=>{let{__scopeDropdownMenu:r,...n}=t,o=Uf(r);return(0,uc.jsx)(ZUt,{...o,...n,ref:e})});Pbn.displayName=Obn;var Ebn="DropdownMenuLabel",pzt=Tl.forwardRef((t,e)=>{let{__scopeDropdownMenu:r,...n}=t,o=Uf(r);return(0,uc.jsx)(XUt,{...o,...n,ref:e})});pzt.displayName=Ebn;var Tbn="DropdownMenuItem",mzt=Tl.forwardRef((t,e)=>{let{__scopeDropdownMenu:r,...n}=t,o=Uf(r);return(0,uc.jsx)(QUt,{...o,...n,ref:e})});mzt.displayName=Tbn;var Abn="DropdownMenuCheckboxItem",hzt=Tl.forwardRef((t,e)=>{let{__scopeDropdownMenu:r,...n}=t,o=Uf(r);return(0,uc.jsx)(ezt,{...o,...n,ref:e})});hzt.displayName=Abn;var Ibn="DropdownMenuRadioGroup",Mbn=Tl.forwardRef((t,e)=>{let{__scopeDropdownMenu:r,...n}=t,o=Uf(r);return(0,uc.jsx)(tzt,{...o,...n,ref:e})});Mbn.displayName=Ibn;var Rbn="DropdownMenuRadioItem",gzt=Tl.forwardRef((t,e)=>{let{__scopeDropdownMenu:r,...n}=t,o=Uf(r);return(0,uc.jsx)(rzt,{...o,...n,ref:e})});gzt.displayName=Rbn;var jbn="DropdownMenuItemIndicator",yzt=Tl.forwardRef((t,e)=>{let{__scopeDropdownMenu:r,...n}=t,o=Uf(r);return(0,uc.jsx)(nzt,{...o,...n,ref:e})});yzt.displayName=jbn;var Nbn="DropdownMenuSeparator",bzt=Tl.forwardRef((t,e)=>{let{__scopeDropdownMenu:r,...n}=t,o=Uf(r);return(0,uc.jsx)(ozt,{...o,...n,ref:e})});bzt.displayName=Nbn;var Dbn="DropdownMenuArrow",Lbn=Tl.forwardRef((t,e)=>{let{__scopeDropdownMenu:r,...n}=t,o=Uf(r);return(0,uc.jsx)(izt,{...o,...n,ref:e})});Lbn.displayName=Dbn;var Fbn="DropdownMenuSubTrigger",_zt=Tl.forwardRef((t,e)=>{let{__scopeDropdownMenu:r,...n}=t,o=Uf(r);return(0,uc.jsx)(azt,{...o,...n,ref:e})});_zt.displayName=Fbn;var kbn="DropdownMenuSubContent",vzt=Tl.forwardRef((t,e)=>{let{__scopeDropdownMenu:r,...n}=t,o=Uf(r);return(0,uc.jsx)(szt,{...o,...n,ref:e,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});vzt.displayName=kbn;var wzt=X5,Szt=Q5,xzt=czt,nDe=fzt;var oDe=pzt,iDe=mzt,aDe=hzt;var sDe=gzt,uDe=yzt,lDe=bzt;var cDe=_zt,dDe=vzt;var pD=wzt,mD=Szt;var Bbn=Ri.forwardRef(({className:t,inset:e,children:r,...n},o)=>Ri.createElement(cDe,{ref:o,className:_e("tw-flex tw-cursor-default tw-select-none tw-items-center tw-gap-2 tw-rounded-sm tw-px-2 tw-py-1.5 tw-text-sm tw-outline-none focus:tw-bg-dropdown-hover data-[state=open]:tw-bg-dropdown-hover [&_svg]:tw-pointer-events-none [&_svg]:tw-size-4 [&_svg]:tw-shrink-0",e&&"tw-pl-8",t),...n},r,Ri.createElement(AC,{className:"tw-ml-auto"})));Bbn.displayName=cDe.displayName;var qbn=Ri.forwardRef(({className:t,...e},r)=>Ri.createElement(dDe,{ref:r,className:_e("tw-z-[50] tw-min-w-32 tw-overflow-hidden tw-rounded-md tw-border tw-bg-primary tw-p-1 tw-text-normal tw-shadow-lg data-[state=open]:tw-animate-in data-[state=closed]:tw-animate-out data-[state=closed]:tw-fade-out-0 data-[state=open]:tw-fade-in-0 data-[state=closed]:tw-zoom-out-95 data-[state=open]:tw-zoom-in-95 data-[side=bottom]:tw-slide-in-from-top-2 data-[side=left]:tw-slide-in-from-right-2 data-[side=right]:tw-slide-in-from-left-2 data-[side=top]:tw-slide-in-from-bottom-2",t),...e}));qbn.displayName=dDe.displayName;var nb=Ri.forwardRef(({className:t,sideOffset:e=4,container:r,...n},o)=>Ri.createElement(xzt,{container:r??activeDocument.body},Ri.createElement(nDe,{ref:o,sideOffset:e,className:_e("tw-z-[50] tw-min-w-32 tw-overflow-hidden tw-rounded-md tw-border tw-border-solid tw-border-border tw-bg-primary tw-p-1 tw-text-normal tw-shadow-md","data-[state=open]:tw-animate-in data-[state=closed]:tw-animate-out data-[state=closed]:tw-fade-out-0 data-[state=open]:tw-fade-in-0 data-[state=closed]:tw-zoom-out-95 data-[state=open]:tw-zoom-in-95 data-[side=bottom]:tw-slide-in-from-top-2 data-[side=left]:tw-slide-in-from-right-2 data-[side=right]:tw-slide-in-from-left-2 data-[side=top]:tw-slide-in-from-bottom-2",t),...n})));nb.displayName=nDe.displayName;var hi=Ri.forwardRef(({className:t,inset:e,...r},n)=>Ri.createElement(iDe,{ref:n,className:_e("tw-relative tw-flex tw-cursor-default tw-select-none tw-items-center tw-gap-2 tw-rounded-sm tw-px-2 tw-py-1.5 tw-text-sm tw-outline-none tw-transition-colors focus:tw-bg-dropdown-hover focus:tw-text-normal data-[disabled]:tw-pointer-events-none data-[disabled]:tw-opacity-50 [&>svg]:tw-size-4 [&>svg]:tw-shrink-0",e&&"tw-pl-8",t),...r}));hi.displayName=iDe.displayName;var Ubn=Ri.forwardRef(({className:t,children:e,checked:r,...n},o)=>Ri.createElement(aDe,{ref:o,className:_e("tw-relative tw-flex tw-cursor-default tw-select-none tw-items-center tw-rounded-sm tw-py-1.5 tw-pl-8 tw-pr-2 tw-text-sm tw-outline-none tw-transition-colors focus:tw-bg-dropdown-hover focus:tw-text-normal data-[disabled]:tw-pointer-events-none data-[disabled]:tw-opacity-50",t),checked:r,...n},Ri.createElement("span",{className:"tw-absolute tw-left-2 tw-flex tw-size-3.5 tw-items-center tw-justify-center"},Ri.createElement(uDe,null,Ri.createElement(kl,{className:"tw-size-4"}))),e));Ubn.displayName=aDe.displayName;var zbn=Ri.forwardRef(({className:t,children:e,...r},n)=>Ri.createElement(sDe,{ref:n,className:_e("tw-relative tw-flex tw-cursor-default tw-select-none tw-items-center tw-rounded-sm tw-py-1.5 tw-pl-8 tw-pr-2 tw-text-sm tw-outline-none tw-transition-colors focus:tw-bg-dropdown-hover focus:tw-text-normal data-[disabled]:tw-pointer-events-none data-[disabled]:tw-opacity-50",t),...r},Ri.createElement("span",{className:"tw-absolute tw-left-2 tw-flex tw-size-3.5 tw-items-center tw-justify-center"},Ri.createElement(uDe,null,Ri.createElement(C4,{className:"tw-size-2 tw-fill-current"}))),e));zbn.displayName=sDe.displayName;var Hbn=Ri.forwardRef(({className:t,inset:e,...r},n)=>Ri.createElement(oDe,{ref:n,className:_e("tw-px-2 tw-py-1.5 tw-text-sm tw-font-semibold",e&&"tw-pl-8",t),...r}));Hbn.displayName=oDe.displayName;var Vbn=Ri.forwardRef(({className:t,...e},r)=>Ri.createElement(lDe,{ref:r,className:_e("-tw-mx-1 tw-my-1 tw-h-px",t),...e}));Vbn.displayName=lDe.displayName;var Wbn=({className:t,...e})=>Ri.createElement("span",{className:_e("tw-ml-auto tw-text-xs tw-tracking-widest tw-opacity-60",t),...e});Wbn.displayName="DropdownMenuShortcut";var eW=F(X());var SU=eW.forwardRef(({checked:t=!1,onCheckedChange:e,disabled:r=!1,className:n,...o},i)=>{let a=()=>{r||e?.(!t)},s=u=>{r||(u.key==="Enter"||u.key===" ")&&(u.preventDefault(),e?.(!t))};return eW.createElement("div",{role:"switch","aria-checked":t,"aria-disabled":r,"data-state":t?"checked":"unchecked","data-disabled":r?"":void 0,ref:i,tabIndex:r?-1:0,className:_e("tw-relative tw-inline-flex tw-h-5.5 tw-w-10 tw-shrink-0 tw-cursor-pointer tw-items-center tw-rounded-full tw-transition-colors","focus-visible:tw-outline-none focus-visible:tw-ring-2 focus-visible:tw-ring-ring focus-visible:tw-ring-offset-2",t?"tw-bg-interactive-accent":"tw-bg-[--background-modifier-border-hover]",r&&"tw-cursor-not-allowed tw-opacity-50",n),onClick:a,onKeyDown:s,...o},eW.createElement("div",{className:_e("tw-pointer-events-none tw-block tw-size-4 tw-rounded-full tw-bg-toggle-thumb tw-shadow-lg tw-ring-0 tw-transition-transform",t?"tw-translate-x-5.5":"tw-translate-x-0.5")}))});SU.displayName="SettingSwitch";var nW=F(X());var Qr=F(X(),1);function ob(t,e,{checkForDefaultPrevented:r=!0}={}){return function(o){if(t?.(o),r===!1||!o.defaultPrevented)return e?.(o)}}var Ozt=F(X(),1);function Czt(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function Kbn(...t){return e=>{let r=!1,n=t.map(o=>{let i=Czt(o,e);return!r&&typeof i=="function"&&(r=!0),i});if(r)return()=>{for(let o=0;o<n.length;o++){let i=n[o];typeof i=="function"?i():Czt(t[o],null)}}}}function ib(...t){return Ozt.useCallback(Kbn(...t),t)}var LP=F(X(),1),Pzt=F(ft(),1);function Cle(t,e=[]){let r=[];function n(i,a){let s=LP.createContext(a),u=r.length;r=[...r,a];let l=d=>{let{scope:f,children:p,...m}=d,h=f?.[t]?.[u]||s,b=LP.useMemo(()=>m,Object.values(m));return(0,Pzt.jsx)(h.Provider,{value:b,children:p})};l.displayName=i+"Provider";function c(d,f){let p=f?.[t]?.[u]||s,m=LP.useContext(p);if(m)return m;if(a!==void 0)return a;throw new Error(`\`${d}\` must be used within \`${i}\``)}return[l,c]}let o=()=>{let i=r.map(a=>LP.createContext(a));return function(s){let u=s?.[t]||i;return LP.useMemo(()=>({[`__scope${t}`]:{...s,[t]:u}}),[s,u])}};return o.scopeName=t,[n,Gbn(o,...e)]}function Gbn(...t){let e=t[0];if(t.length===1)return e;let r=()=>{let n=t.map(o=>({useScope:o(),scopeName:o.scopeName}));return function(i){let a=n.reduce((s,{useScope:u,scopeName:l})=>{let d=u(i)[`__scope${l}`];return{...s,...d}},{});return LP.useMemo(()=>({[`__scope${e.scopeName}`]:a}),[a])}};return r.scopeName=e.scopeName,r}var Ka=F(X(),1);var Ezt=F(X(),1),Tzt=F(os(),1);var Azt=F(ft(),1),Jbn=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Mg=Jbn.reduce((t,e)=>{let r=PC(`Primitive.${e}`),n=Ezt.forwardRef((o,i)=>{let{asChild:a,...s}=o,u=a?r:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),(0,Azt.jsx)(u,{...s,ref:i})});return n.displayName=`Primitive.${e}`,{...t,[e]:n}},{});function Izt(t,e){t&&Tzt.flushSync(()=>t.dispatchEvent(e))}var xU=F(X(),1);function hD(t){let e=xU.useRef(t);return xU.useEffect(()=>{e.current=t}),xU.useMemo(()=>(...r)=>e.current?.(...r),[])}var Mzt=F(X(),1);function Rzt(t,e=globalThis?.document){let r=hD(t);Mzt.useEffect(()=>{let n=o=>{o.key==="Escape"&&r(o)};return e.addEventListener("keydown",n,{capture:!0}),()=>e.removeEventListener("keydown",n,{capture:!0})},[r,e])}var pDe=F(ft(),1),Ybn="DismissableLayer",fDe="dismissableLayer.update",Zbn="dismissableLayer.pointerDownOutside",Xbn="dismissableLayer.focusOutside",jzt,Dzt=Ka.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),mDe=Ka.forwardRef((t,e)=>{let{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:n,onPointerDownOutside:o,onFocusOutside:i,onInteractOutside:a,onDismiss:s,...u}=t,l=Ka.useContext(Dzt),[c,d]=Ka.useState(null),f=c?.ownerDocument??globalThis?.document,[,p]=Ka.useState({}),m=ib(e,E=>d(E)),h=Array.from(l.layers),[b]=[...l.layersWithOutsidePointerEventsDisabled].slice(-1),g=h.indexOf(b),y=c?h.indexOf(c):-1,w=l.layersWithOutsidePointerEventsDisabled.size>0,S=y>=g,C=t_n(E=>{let A=E.target,I=[...l.branches].some(R=>R.contains(A));!S||I||(o?.(E),a?.(E),E.defaultPrevented||s?.())},f),P=r_n(E=>{let A=E.target;[...l.branches].some(R=>R.contains(A))||(i?.(E),a?.(E),E.defaultPrevented||s?.())},f);return Rzt(E=>{y===l.layers.size-1&&(n?.(E),!E.defaultPrevented&&s&&(E.preventDefault(),s()))},f),Ka.useEffect(()=>{if(c)return r&&(l.layersWithOutsidePointerEventsDisabled.size===0&&(jzt=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),l.layersWithOutsidePointerEventsDisabled.add(c)),l.layers.add(c),Nzt(),()=>{r&&l.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=jzt)}},[c,f,r,l]),Ka.useEffect(()=>()=>{c&&(l.layers.delete(c),l.layersWithOutsidePointerEventsDisabled.delete(c),Nzt())},[c,l]),Ka.useEffect(()=>{let E=()=>p({});return document.addEventListener(fDe,E),()=>document.removeEventListener(fDe,E)},[]),(0,pDe.jsx)(Mg.div,{...u,ref:m,style:{pointerEvents:w?S?"auto":"none":void 0,...t.style},onFocusCapture:ob(t.onFocusCapture,P.onFocusCapture),onBlurCapture:ob(t.onBlurCapture,P.onBlurCapture),onPointerDownCapture:ob(t.onPointerDownCapture,C.onPointerDownCapture)})});mDe.displayName=Ybn;var Qbn="DismissableLayerBranch",e_n=Ka.forwardRef((t,e)=>{let r=Ka.useContext(Dzt),n=Ka.useRef(null),o=ib(e,n);return Ka.useEffect(()=>{let i=n.current;if(i)return r.branches.add(i),()=>{r.branches.delete(i)}},[r.branches]),(0,pDe.jsx)(Mg.div,{...t,ref:o})});e_n.displayName=Qbn;function t_n(t,e=globalThis?.document){let r=hD(t),n=Ka.useRef(!1),o=Ka.useRef(()=>{});return Ka.useEffect(()=>{let i=s=>{if(s.target&&!n.current){let l=function(){Lzt(Zbn,r,c,{discrete:!0})};var u=l;let c={originalEvent:s};s.pointerType==="touch"?(e.removeEventListener("click",o.current),o.current=l,e.addEventListener("click",o.current,{once:!0})):l()}else e.removeEventListener("click",o.current);n.current=!1},a=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(a),e.removeEventListener("pointerdown",i),e.removeEventListener("click",o.current)}},[e,r]),{onPointerDownCapture:()=>n.current=!0}}function r_n(t,e=globalThis?.document){let r=hD(t),n=Ka.useRef(!1);return Ka.useEffect(()=>{let o=i=>{i.target&&!n.current&&Lzt(Xbn,r,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",o),()=>e.removeEventListener("focusin",o)},[e,r]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function Nzt(){let t=new CustomEvent(fDe);document.dispatchEvent(t)}function Lzt(t,e,r,{discrete:n}){let o=r.originalEvent.target,i=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:r});e&&o.addEventListener(t,e,{once:!0}),n?Izt(o,i):o.dispatchEvent(i)}var hDe=F(X(),1);var Fzt=F(X(),1),Gp=globalThis?.document?Fzt.useLayoutEffect:()=>{};var n_n=hDe[" useId ".trim().toString()]||(()=>{}),o_n=0;function kzt(t){let[e,r]=hDe.useState(n_n());return Gp(()=>{t||r(n=>n??String(o_n++))},[t]),t||(e?`radix-${e}`:"")}var Jm=F(X(),1);var $zt=F(X(),1);var gDe=F(ft(),1),i_n="Arrow",Bzt=$zt.forwardRef((t,e)=>{let{children:r,width:n=10,height:o=5,...i}=t;return(0,gDe.jsx)(Mg.svg,{...i,ref:e,width:n,height:o,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?r:(0,gDe.jsx)("polygon",{points:"0,0 30,0 15,10"})})});Bzt.displayName=i_n;var qzt=Bzt;var Uzt=F(X(),1);function zzt(t){let[e,r]=Uzt.useState(void 0);return Gp(()=>{if(t){r({width:t.offsetWidth,height:t.offsetHeight});let n=new ResizeObserver(o=>{if(!Array.isArray(o)||!o.length)return;let i=o[0],a,s;if("borderBoxSize"in i){let u=i.borderBoxSize,l=Array.isArray(u)?u[0]:u;a=l.inlineSize,s=l.blockSize}else a=t.offsetWidth,s=t.offsetHeight;r({width:a,height:s})});return n.observe(t,{box:"border-box"}),()=>n.unobserve(t)}else r(void 0)},[t]),e}var WI=F(ft(),1);var yDe="Popper",[Hzt,bDe]=Cle(yDe),[s_n,Vzt]=Hzt(yDe),Wzt=t=>{let{__scopePopper:e,children:r}=t,[n,o]=Jm.useState(null);return(0,WI.jsx)(s_n,{scope:e,anchor:n,onAnchorChange:o,children:r})};Wzt.displayName=yDe;var Kzt="PopperAnchor",Gzt=Jm.forwardRef((t,e)=>{let{__scopePopper:r,virtualRef:n,...o}=t,i=Vzt(Kzt,r),a=Jm.useRef(null),s=ib(e,a);return Jm.useEffect(()=>{i.onAnchorChange(n?.current||a.current)}),n?null:(0,WI.jsx)(Mg.div,{...o,ref:s})});Gzt.displayName=Kzt;var _De="PopperContent",[u_n,l_n]=Hzt(_De),Jzt=Jm.forwardRef((t,e)=>{let{__scopePopper:r,side:n="bottom",sideOffset:o=0,align:i="center",alignOffset:a=0,arrowPadding:s=0,avoidCollisions:u=!0,collisionBoundary:l=[],collisionPadding:c=0,sticky:d="partial",hideWhenDetached:f=!1,updatePositionStrategy:p="optimized",onPlaced:m,...h}=t,b=Vzt(_De,r),[g,y]=Jm.useState(null),w=ib(e,Y=>y(Y)),[S,C]=Jm.useState(null),P=zzt(S),E=P?.width??0,A=P?.height??0,I=n+(i!=="center"?"-"+i:""),R=typeof c=="number"?c:{top:0,right:0,bottom:0,left:0,...c},j=Array.isArray(l)?l:[l],N=j.length>0,$={padding:R,boundary:j.filter(d_n),altBoundary:N},{refs:k,floatingStyles:H,placement:V,isPositioned:Q,middlewareData:G}=RI({strategy:"fixed",placement:I,whileElementsMounted:(...Y)=>NP(...Y,{animationFrame:p==="always"}),elements:{reference:b.anchor},middleware:[jI({mainAxis:o+A,alignmentAxis:a}),u&&NI({mainAxis:!0,crossAxis:!1,limiter:d==="partial"?DI():void 0,...$}),u&&LI({...$}),FI({...$,apply:({elements:Y,rects:ae,availableWidth:we,availableHeight:de})=>{let{width:Ue,height:Ve}=ae.reference,rt=Y.floating.style;rt.setProperty("--radix-popper-available-width",`${we}px`),rt.setProperty("--radix-popper-available-height",`${de}px`),rt.setProperty("--radix-popper-anchor-width",`${Ue}px`),rt.setProperty("--radix-popper-anchor-height",`${Ve}px`)}}),S&&$I({element:S,padding:s}),f_n({arrowWidth:E,arrowHeight:A}),f&&kI({strategy:"referenceHidden",...$})]}),[D,B]=Xzt(V),q=hD(m);Gp(()=>{Q&&q?.()},[Q,q]);let K=G.arrow?.x,U=G.arrow?.y,te=G.arrow?.centerOffset!==0,[z,W]=Jm.useState();return Gp(()=>{g&&W(window.getComputedStyle(g).zIndex)},[g]),(0,WI.jsx)("div",{ref:k.setFloating,"data-radix-popper-content-wrapper":"",style:{...H,transform:Q?H.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:z,"--radix-popper-transform-origin":[G.transformOrigin?.x,G.transformOrigin?.y].join(" "),...G.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:(0,WI.jsx)(u_n,{scope:r,placedSide:D,onArrowChange:C,arrowX:K,arrowY:U,shouldHideArrow:te,children:(0,WI.jsx)(Mg.div,{"data-side":D,"data-align":B,...h,ref:w,style:{...h.style,animation:Q?void 0:"none"}})})})});Jzt.displayName=_De;var Yzt="PopperArrow",c_n={top:"bottom",right:"left",bottom:"top",left:"right"},Zzt=Jm.forwardRef(function(e,r){let{__scopePopper:n,...o}=e,i=l_n(Yzt,n),a=c_n[i.placedSide];return(0,WI.jsx)("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[a]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:(0,WI.jsx)(qzt,{...o,ref:r,style:{...o.style,display:"block"}})})});Zzt.displayName=Yzt;function d_n(t){return t!==null}var f_n=t=>({name:"transformOrigin",options:t,fn(e){let{placement:r,rects:n,middlewareData:o}=e,a=o.arrow?.centerOffset!==0,s=a?0:t.arrowWidth,u=a?0:t.arrowHeight,[l,c]=Xzt(r),d={start:"0%",center:"50%",end:"100%"}[c],f=(o.arrow?.x??0)+s/2,p=(o.arrow?.y??0)+u/2,m="",h="";return l==="bottom"?(m=a?d:`${f}px`,h=`${-u}px`):l==="top"?(m=a?d:`${f}px`,h=`${n.floating.height+u}px`):l==="right"?(m=`${-u}px`,h=a?d:`${p}px`):l==="left"&&(m=`${n.floating.width+u}px`,h=a?d:`${p}px`),{data:{x:m,y:h}}}});function Xzt(t){let[e,r="center"]=t.split("-");return[e,r]}var Qzt=Wzt,e2t=Gzt,t2t=Jzt,r2t=Zzt;var Ole=F(X(),1),n2t=F(os(),1);var o2t=F(ft(),1),m_n="Portal",vDe=Ole.forwardRef((t,e)=>{let{container:r,...n}=t,[o,i]=Ole.useState(!1);Gp(()=>i(!0),[]);let a=r||o&&globalThis?.document?.body;return a?n2t.default.createPortal((0,o2t.jsx)(Mg.div,{...n,ref:e}),a):null});vDe.displayName=m_n;var Jp=F(X(),1);var i2t=F(X(),1);function h_n(t,e){return i2t.useReducer((r,n)=>e[r][n]??r,t)}var Ele=t=>{let{present:e,children:r}=t,n=g_n(e),o=typeof r=="function"?r({present:n.isPresent}):Jp.Children.only(r),i=ib(n.ref,y_n(o));return typeof r=="function"||n.isPresent?Jp.cloneElement(o,{ref:i}):null};Ele.displayName="Presence";function g_n(t){let[e,r]=Jp.useState(),n=Jp.useRef(null),o=Jp.useRef(t),i=Jp.useRef("none"),a=t?"mounted":"unmounted",[s,u]=h_n(a,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return Jp.useEffect(()=>{let l=Ple(n.current);i.current=s==="mounted"?l:"none"},[s]),Gp(()=>{let l=n.current,c=o.current;if(c!==t){let f=i.current,p=Ple(l);t?u("MOUNT"):p==="none"||l?.display==="none"?u("UNMOUNT"):u(c&&f!==p?"ANIMATION_OUT":"UNMOUNT"),o.current=t}},[t,u]),Gp(()=>{if(e){let l,c=e.ownerDocument.defaultView??window,d=p=>{let h=Ple(n.current).includes(p.animationName);if(p.target===e&&h&&(u("ANIMATION_END"),!o.current)){let b=e.style.animationFillMode;e.style.animationFillMode="forwards",l=c.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=b)})}},f=p=>{p.target===e&&(i.current=Ple(n.current))};return e.addEventListener("animationstart",f),e.addEventListener("animationcancel",d),e.addEventListener("animationend",d),()=>{c.clearTimeout(l),e.removeEventListener("animationstart",f),e.removeEventListener("animationcancel",d),e.removeEventListener("animationend",d)}}else u("ANIMATION_END")},[e,u]),{isPresent:["mounted","unmountSuspended"].includes(s),ref:Jp.useCallback(l=>{n.current=l?getComputedStyle(l):null,r(l)},[])}}function Ple(t){return t?.animationName||"none"}function y_n(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,r=e&&"isReactWarning"in e&&e.isReactWarning;return r?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,r=e&&"isReactWarning"in e&&e.isReactWarning,r?t.props.ref:t.props.ref||t.ref)}var Rg=F(X(),1);var Tle=F(X(),1);var b_n=Rg[" useInsertionEffect ".trim().toString()]||Gp;function a2t({prop:t,defaultProp:e,onChange:r=()=>{},caller:n}){let[o,i,a]=__n({defaultProp:e,onChange:r}),s=t!==void 0,u=s?t:o;{let c=Rg.useRef(t!==void 0);Rg.useEffect(()=>{let d=c.current;d!==s&&console.warn(`${n} is changing from ${d?"controlled":"uncontrolled"} to ${s?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),c.current=s},[s,n])}let l=Rg.useCallback(c=>{if(s){let d=v_n(c)?c(t):c;d!==t&&a.current?.(d)}else i(c)},[s,t,i,a]);return[u,l]}function __n({defaultProp:t,onChange:e}){let[r,n]=Rg.useState(t),o=Rg.useRef(r),i=Rg.useRef(e);return b_n(()=>{i.current=e},[e]),Rg.useEffect(()=>{o.current!==r&&(i.current?.(r),o.current=r)},[r,o]),[r,n,i]}function v_n(t){return typeof t=="function"}var bri=Symbol("RADIX:SYNC_STATE");var c2t=F(X(),1);var s2t=F(X(),1),w_n=F(os(),1);var u2t=F(ft(),1),S_n=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],l2t=S_n.reduce((t,e)=>{let r=PC(`Primitive.${e}`),n=s2t.forwardRef((o,i)=>{let{asChild:a,...s}=o,u=a?r:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),(0,u2t.jsx)(u,{...s,ref:i})});return n.displayName=`Primitive.${e}`,{...t,[e]:n}},{});var d2t=F(ft(),1),x_n=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),C_n="VisuallyHidden",f2t=c2t.forwardRef((t,e)=>(0,d2t.jsx)(l2t.span,{...t,ref:e,style:{...x_n,...t.style}}));f2t.displayName=C_n;var p2t=f2t;var sl=F(ft(),1),[Ale,Nri]=Cle("Tooltip",[bDe]),Ile=bDe(),m2t="TooltipProvider",P_n=700,wDe="tooltip.open",[E_n,xDe]=Ale(m2t),h2t=t=>{let{__scopeTooltip:e,delayDuration:r=P_n,skipDelayDuration:n=300,disableHoverableContent:o=!1,children:i}=t,a=Qr.useRef(!0),s=Qr.useRef(!1),u=Qr.useRef(0);return Qr.useEffect(()=>{let l=u.current;return()=>window.clearTimeout(l)},[]),(0,sl.jsx)(E_n,{scope:e,isOpenDelayedRef:a,delayDuration:r,onOpen:Qr.useCallback(()=>{window.clearTimeout(u.current),a.current=!1},[]),onClose:Qr.useCallback(()=>{window.clearTimeout(u.current),u.current=window.setTimeout(()=>a.current=!0,n)},[n]),isPointerInTransitRef:s,onPointerInTransitChange:Qr.useCallback(l=>{s.current=l},[]),disableHoverableContent:o,children:i})};h2t.displayName=m2t;var tW="Tooltip",[T_n,rW]=Ale(tW),g2t=t=>{let{__scopeTooltip:e,children:r,open:n,defaultOpen:o,onOpenChange:i,disableHoverableContent:a,delayDuration:s}=t,u=xDe(tW,t.__scopeTooltip),l=Ile(e),[c,d]=Qr.useState(null),f=kzt(),p=Qr.useRef(0),m=a??u.disableHoverableContent,h=s??u.delayDuration,b=Qr.useRef(!1),[g,y]=a2t({prop:n,defaultProp:o??!1,onChange:E=>{E?(u.onOpen(),document.dispatchEvent(new CustomEvent(wDe))):u.onClose(),i?.(E)},caller:tW}),w=Qr.useMemo(()=>g?b.current?"delayed-open":"instant-open":"closed",[g]),S=Qr.useCallback(()=>{window.clearTimeout(p.current),p.current=0,b.current=!1,y(!0)},[y]),C=Qr.useCallback(()=>{window.clearTimeout(p.current),p.current=0,y(!1)},[y]),P=Qr.useCallback(()=>{window.clearTimeout(p.current),p.current=window.setTimeout(()=>{b.current=!0,y(!0),p.current=0},h)},[h,y]);return Qr.useEffect(()=>()=>{p.current&&(window.clearTimeout(p.current),p.current=0)},[]),(0,sl.jsx)(Qzt,{...l,children:(0,sl.jsx)(T_n,{scope:e,contentId:f,open:g,stateAttribute:w,trigger:c,onTriggerChange:d,onTriggerEnter:Qr.useCallback(()=>{u.isOpenDelayedRef.current?P():S()},[u.isOpenDelayedRef,P,S]),onTriggerLeave:Qr.useCallback(()=>{m?C():(window.clearTimeout(p.current),p.current=0)},[C,m]),onOpen:S,onClose:C,disableHoverableContent:m,children:r})})};g2t.displayName=tW;var SDe="TooltipTrigger",y2t=Qr.forwardRef((t,e)=>{let{__scopeTooltip:r,...n}=t,o=rW(SDe,r),i=xDe(SDe,r),a=Ile(r),s=Qr.useRef(null),u=ib(e,s,o.onTriggerChange),l=Qr.useRef(!1),c=Qr.useRef(!1),d=Qr.useCallback(()=>l.current=!1,[]);return Qr.useEffect(()=>()=>document.removeEventListener("pointerup",d),[d]),(0,sl.jsx)(e2t,{asChild:!0,...a,children:(0,sl.jsx)(Mg.button,{"aria-describedby":o.open?o.contentId:void 0,"data-state":o.stateAttribute,...n,ref:u,onPointerMove:ob(t.onPointerMove,f=>{f.pointerType!=="touch"&&!c.current&&!i.isPointerInTransitRef.current&&(o.onTriggerEnter(),c.current=!0)}),onPointerLeave:ob(t.onPointerLeave,()=>{o.onTriggerLeave(),c.current=!1}),onPointerDown:ob(t.onPointerDown,()=>{o.open&&o.onClose(),l.current=!0,document.addEventListener("pointerup",d,{once:!0})}),onFocus:ob(t.onFocus,()=>{l.current||o.onOpen()}),onBlur:ob(t.onBlur,o.onClose),onClick:ob(t.onClick,o.onClose)})})});y2t.displayName=SDe;var CDe="TooltipPortal",[A_n,I_n]=Ale(CDe,{forceMount:void 0}),b2t=t=>{let{__scopeTooltip:e,forceMount:r,children:n,container:o}=t,i=rW(CDe,e);return(0,sl.jsx)(A_n,{scope:e,forceMount:r,children:(0,sl.jsx)(Ele,{present:r||i.open,children:(0,sl.jsx)(vDe,{asChild:!0,container:o,children:n})})})};b2t.displayName=CDe;var CU="TooltipContent",_2t=Qr.forwardRef((t,e)=>{let r=I_n(CU,t.__scopeTooltip),{forceMount:n=r.forceMount,side:o="top",...i}=t,a=rW(CU,t.__scopeTooltip);return(0,sl.jsx)(Ele,{present:n||a.open,children:a.disableHoverableContent?(0,sl.jsx)(v2t,{side:o,...i,ref:e}):(0,sl.jsx)(M_n,{side:o,...i,ref:e})})}),M_n=Qr.forwardRef((t,e)=>{let r=rW(CU,t.__scopeTooltip),n=xDe(CU,t.__scopeTooltip),o=Qr.useRef(null),i=ib(e,o),[a,s]=Qr.useState(null),{trigger:u,onClose:l}=r,c=o.current,{onPointerInTransitChange:d}=n,f=Qr.useCallback(()=>{s(null),d(!1)},[d]),p=Qr.useCallback((m,h)=>{let b=m.currentTarget,g={x:m.clientX,y:m.clientY},y=L_n(g,b.getBoundingClientRect()),w=F_n(g,y),S=k_n(h.getBoundingClientRect()),C=B_n([...w,...S]);s(C),d(!0)},[d]);return Qr.useEffect(()=>()=>f(),[f]),Qr.useEffect(()=>{if(u&&c){let m=b=>p(b,c),h=b=>p(b,u);return u.addEventListener("pointerleave",m),c.addEventListener("pointerleave",h),()=>{u.removeEventListener("pointerleave",m),c.removeEventListener("pointerleave",h)}}},[u,c,p,f]),Qr.useEffect(()=>{if(a){let m=h=>{let b=h.target,g={x:h.clientX,y:h.clientY},y=u?.contains(b)||c?.contains(b),w=!$_n(g,a);y?f():w&&(f(),l())};return document.addEventListener("pointermove",m),()=>document.removeEventListener("pointermove",m)}},[u,c,a,l,f]),(0,sl.jsx)(v2t,{...t,ref:i})}),[R_n,j_n]=Ale(tW,{isInside:!1}),N_n=M8e("TooltipContent"),v2t=Qr.forwardRef((t,e)=>{let{__scopeTooltip:r,children:n,"aria-label":o,onEscapeKeyDown:i,onPointerDownOutside:a,...s}=t,u=rW(CU,r),l=Ile(r),{onClose:c}=u;return Qr.useEffect(()=>(document.addEventListener(wDe,c),()=>document.removeEventListener(wDe,c)),[c]),Qr.useEffect(()=>{if(u.trigger){let d=f=>{f.target?.contains(u.trigger)&&c()};return window.addEventListener("scroll",d,{capture:!0}),()=>window.removeEventListener("scroll",d,{capture:!0})}},[u.trigger,c]),(0,sl.jsx)(mDe,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:a,onFocusOutside:d=>d.preventDefault(),onDismiss:c,children:(0,sl.jsxs)(t2t,{"data-state":u.stateAttribute,...l,...s,ref:e,style:{...s.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[(0,sl.jsx)(N_n,{children:n}),(0,sl.jsx)(R_n,{scope:r,isInside:!0,children:(0,sl.jsx)(p2t,{id:u.contentId,role:"tooltip",children:o||n})})]})})});_2t.displayName=CU;var w2t="TooltipArrow",D_n=Qr.forwardRef((t,e)=>{let{__scopeTooltip:r,...n}=t,o=Ile(r);return j_n(w2t,r).isInside?null:(0,sl.jsx)(r2t,{...o,...n,ref:e})});D_n.displayName=w2t;function L_n(t,e){let r=Math.abs(e.top-t.y),n=Math.abs(e.bottom-t.y),o=Math.abs(e.right-t.x),i=Math.abs(e.left-t.x);switch(Math.min(r,n,o,i)){case i:return"left";case o:return"right";case r:return"top";case n:return"bottom";default:throw new Error("unreachable")}}function F_n(t,e,r=5){let n=[];switch(e){case"top":n.push({x:t.x-r,y:t.y+r},{x:t.x+r,y:t.y+r});break;case"bottom":n.push({x:t.x-r,y:t.y-r},{x:t.x+r,y:t.y-r});break;case"left":n.push({x:t.x+r,y:t.y-r},{x:t.x+r,y:t.y+r});break;case"right":n.push({x:t.x-r,y:t.y-r},{x:t.x-r,y:t.y+r});break}return n}function k_n(t){let{top:e,right:r,bottom:n,left:o}=t;return[{x:o,y:e},{x:r,y:e},{x:r,y:n},{x:o,y:n}]}function $_n(t,e){let{x:r,y:n}=t,o=!1;for(let i=0,a=e.length-1;i<e.length;a=i++){let s=e[i],u=e[a],l=s.x,c=s.y,d=u.x,f=u.y;c>n!=f>n&&r<(d-l)*(n-c)/(f-c)+l&&(o=!o)}return o}function B_n(t){let e=t.slice();return e.sort((r,n)=>r.x<n.x?-1:r.x>n.x?1:r.y<n.y?-1:r.y>n.y?1:0),q_n(e)}function q_n(t){if(t.length<=1)return t.slice();let e=[];for(let n=0;n<t.length;n++){let o=t[n];for(;e.length>=2;){let i=e[e.length-1],a=e[e.length-2];if((i.x-a.x)*(o.y-a.y)>=(i.y-a.y)*(o.x-a.x))e.pop();else break}e.push(o)}e.pop();let r=[];for(let n=t.length-1;n>=0;n--){let o=t[n];for(;r.length>=2;){let i=r[r.length-1],a=r[r.length-2];if((i.x-a.x)*(o.y-a.y)>=(i.y-a.y)*(o.x-a.x))r.pop();else break}r.push(o)}return r.pop(),e.length===1&&r.length===1&&e[0].x===r[0].x&&e[0].y===r[0].y?e:e.concat(r)}var Mle=h2t,S2t=g2t,x2t=y2t,C2t=b2t,ODe=_2t;var po=Mle,Mt=S2t,Rt=x2t,It=nW.forwardRef(({className:t,sideOffset:e=4,...r},n)=>nW.createElement(C2t,{container:activeDocument.body},nW.createElement(ODe,{ref:n,sideOffset:e,className:_e("tw-z-[50] tw-overflow-hidden tw-rounded-md tw-border tw-border-solid tw-border-border tw-bg-secondary tw-px-3 tw-py-1.5 tw-text-xs tw-text-normal tw-animate-in tw-fade-in-0 tw-zoom-in-95 data-[state=closed]:tw-animate-out data-[state=closed]:tw-fade-out-0 data-[state=closed]:tw-zoom-out-95 data-[side=bottom]:tw-slide-in-from-top-2 data-[side=left]:tw-slide-in-from-right-2 data-[side=right]:tw-slide-in-from-left-2 data-[side=top]:tw-slide-in-from-bottom-2",t),...r})));It.displayName=ODe.displayName;kr();tr();var Ym=require("obsidian"),Lt=F(X());async function U_n(){try{await qi.getInstance().indexVaultToVectorStore(),new Ym.Notice("Vault index refreshed.")}catch(t){console.error("Error refreshing vault index:",t),new Ym.Notice("Failed to refresh vault index. Check console for details.")}}async function z_n(){try{await qi.getInstance().indexVaultToVectorStore(!0),new Ym.Notice("Vault force reindexed.")}catch(t){console.error("Error force reindexing vault:",t),new Ym.Notice("Failed to force reindex vault. Check console for details.")}}async function Rle(){let t=yc();if(!t){new Ym.Notice("No project is currently selected to reload.");return}try{CE(!0),await Dy.getInstance().invalidateMarkdownContext(t,!0);let e=app.plugins.getPlugin("copilot");if(e&&e.projectManager)await e.projectManager.getProjectContext(t.id),new Ym.Notice(`Project context for "${t.name}" reloaded successfully.`);else throw new Error("Copilot plugin or ProjectManager not available.")}catch(e){console.error("Error reloading project context:",e),new Ym.Notice("Failed to reload project context. Check console for details.")}finally{CE(!1)}}async function H_n(){let t=yc();if(!t){new Ym.Notice("No project is currently selected to rebuild.");return}new Kc(app,async()=>{try{CE(!0),new Ym.Notice(`Force rebuilding context for project: ${t.name}... This will take some time and re-fetch all data.`,1e4),await Dy.getInstance().clearForProject(t),new Ym.Notice(`Cache for project "${t.name}" has been cleared.`);let r=app.plugins.getPlugin("copilot");if(r&&r.projectManager)await r.projectManager.getProjectContext(t.id),new Ym.Notice(`Project context for "${t.name}" rebuilt successfully from scratch.`);else throw new Error("Copilot plugin or ProjectManager not available for rebuild.")}catch(r){console.error("Error force rebuilding project context:",r),new Ym.Notice("Failed to force rebuild project context. Check console for details.")}finally{CE(!1)}},`DANGER: This will permanently delete all cached data (markdown, web URLs, YouTube transcripts, and processed file content) for the project "${t.name}" from both memory and disk. The context will then be rebuilt from scratch, re-fetching all remote data and re-processing all local files. This cannot be undone. Are you absolutely sure?`,"Force Rebuild Project Context").open()}function P2t({onNewChat:t,onSaveAsNote:e,onLoadHistory:r,onModeChange:n,onCloseProject:o}){let i=Tn(),[a,s]=Xg(),u=DB(),l=c=>{s(c),n(c),c!=="project"&&(fR(null),o?.())};return Lt.default.createElement("div",{className:"tw-flex tw-w-full tw-items-center tw-justify-between tw-p-1"},Lt.default.createElement("div",{className:"tw-flex-1"},Lt.default.createElement(X5,null,Lt.default.createElement(Q5,{asChild:!0},Lt.default.createElement(ge,{variant:"ghost2",size:"fit",className:"tw-ml-1"},a==="llm_chain"&&"chat",a==="vault_qa"&&"vault QA",a==="copilot_plus"&&Lt.default.createElement("div",{className:"tw-flex tw-items-center tw-gap-1"},Lt.default.createElement(Ih,{className:"tw-size-4"}),"copilot plus (beta)"),a==="project"&&"projects (alpha)",Lt.default.createElement(ki,{className:"tw-mt-0.5 tw-size-5"}))),Lt.default.createElement(nb,{align:"start"},Lt.default.createElement(hi,{onSelect:()=>{l("llm_chain")}},"chat"),Lt.default.createElement(hi,{onSelect:()=>{l("vault_qa")}},"vault QA"),u?Lt.default.createElement(hi,{onSelect:()=>{l("copilot_plus")}},Lt.default.createElement("div",{className:"tw-flex tw-items-center tw-gap-1"},Lt.default.createElement(Ih,{className:"tw-size-4"}),"copilot plus (beta)")):Lt.default.createElement(hi,{onSelect:()=>{LR(mC.CHAT_MODE_SELECT),o?.()}},"copilot plus (beta)",Lt.default.createElement(NC,{className:"tw-size-3"})),u?Lt.default.createElement(hi,{className:"tw-flex tw-items-center tw-gap-1",onSelect:()=>{l("project")}},Lt.default.createElement(RR,{className:"tw-size-4"}),"projects (alpha)"):Lt.default.createElement(hi,{onSelect:()=>{LR(mC.CHAT_MODE_SELECT),o?.()}},"copilot plus (beta)",Lt.default.createElement(NC,{className:"tw-size-3"}))))),Lt.default.createElement("div",null,Lt.default.createElement(Mt,null,Lt.default.createElement(Rt,{asChild:!0},Lt.default.createElement(ge,{variant:"ghost2",size:"icon",title:"New Chat",onClick:t},Lt.default.createElement(B4,{className:"tw-size-4"}))),Lt.default.createElement(It,null,"New Chat")),!i.autosaveChat&&Lt.default.createElement(Mt,null,Lt.default.createElement(Rt,{asChild:!0},Lt.default.createElement(ge,{variant:"ghost2",size:"icon",title:"Save Chat as Note",onClick:e},Lt.default.createElement(A4,{className:"tw-size-4"}))),Lt.default.createElement(It,null,"Save Chat as Note")),Lt.default.createElement(Mt,null,Lt.default.createElement(Rt,{asChild:!0},Lt.default.createElement(ge,{variant:"ghost2",size:"icon",title:"Chat History",onClick:r},Lt.default.createElement(F4,{className:"tw-size-4"}))),Lt.default.createElement(It,null,"Chat History")),Lt.default.createElement(X5,null,Lt.default.createElement(Q5,{asChild:!0},Lt.default.createElement(ge,{variant:"ghost2",size:"icon",title:"Advanced Settings"},Lt.default.createElement(YE,{className:"tw-size-4"}))),Lt.default.createElement(nb,{align:"end",className:"tw-w-64"},Lt.default.createElement(hi,{className:"tw-flex tw-justify-between",onSelect:c=>{c.preventDefault(),dt("showSuggestedPrompts",!i.showSuggestedPrompts)}},Lt.default.createElement("div",{className:"tw-flex tw-items-center tw-gap-2"},Lt.default.createElement(Ih,{className:"tw-size-4"}),"Suggested Prompt"),Lt.default.createElement(SU,{checked:i.showSuggestedPrompts})),Lt.default.createElement(hi,{className:"tw-flex tw-justify-between",onSelect:c=>{c.preventDefault(),dt("showRelevantNotes",!i.showRelevantNotes)}},Lt.default.createElement("div",{className:"tw-flex tw-items-center tw-gap-2"},Lt.default.createElement(ly,{className:"tw-size-4"}),"Relevant Note"),Lt.default.createElement(SU,{checked:i.showRelevantNotes})),a==="project"?Lt.default.createElement(Lt.default.Fragment,null,Lt.default.createElement(hi,{className:"tw-flex tw-items-center tw-gap-2",onSelect:()=>Rle()},Lt.default.createElement(Gb,{className:"tw-size-4"}),"Reload Current Project"),Lt.default.createElement(hi,{className:"tw-flex tw-items-center tw-gap-2",onSelect:()=>H_n()},Lt.default.createElement(Ef,{className:"tw-size-4"}),"Force Rebuild Context")):Lt.default.createElement(Lt.default.Fragment,null,Lt.default.createElement(hi,{className:"tw-flex tw-items-center tw-gap-2",onSelect:()=>U_n()},Lt.default.createElement(Gb,{className:"tw-size-4"}),"Refresh Vault Index"),Lt.default.createElement(hi,{className:"tw-flex tw-items-center tw-gap-2",onSelect:()=>{new Kc(app,()=>z_n(),"This will delete and rebuild your entire vault index from scratch. This operation cannot be undone. Are you sure you want to proceed?","Force Reindex Vault").open()}},Lt.default.createElement(Ef,{className:"tw-size-4"}),"Force Reindex Vault"))))))}xd();var E2t=require("obsidian");var jle=require("obsidian"),OU=class extends jle.FuzzySuggestModal{constructor(e){super(e),this.activeNote=e.workspace.getActiveFile()}getOrderedNotes(e=[]){let r=this.app.workspace.getLastOpenFiles().map(i=>this.app.vault.getAbstractFileByPath(i)).filter(i=>i instanceof jle.TFile&&(i.extension==="md"||i.extension==="pdf"||i.extension==="canvas")&&!e.includes(i.path)&&i.path!==this.activeNote?.path),o=this.app.vault.getFiles().filter(i=>i.extension==="md"||i.extension==="pdf"||i.extension==="canvas").filter(i=>!r.some(a=>a.path===i.path)&&!e.includes(i.path)&&i.path!==this.activeNote?.path);return[...this.activeNote?[this.activeNote]:[],...r,...o]}formatNoteTitle(e,r,n){let o=e;return r&&(o+=" (current)"),n==="pdf"?o+=" (PDF)":n==="canvas"&&(o+=" (Canvas)"),o}};var KI=class extends OU{constructor({app:e,onNoteSelect:r,excludeNotePaths:n,titleOnly:o=!1}){super(e),this.onNoteSelect=r,this.availableNotes=this.getOrderedNotes(n),this.titleOnly=o}getItems(){if(this.titleOnly){let e=new Map;return this.availableNotes.forEach(r=>{e.set(r.basename,r)}),Array.from(e.values())}return this.availableNotes}getItemText(e){let r=e.path===this.activeNote?.path;return this.formatNoteTitle(e.basename,r,e.extension)}onChooseItem(e,r){this.onNoteSelect(e)}renderSuggestion(e,r){let n=r.createDiv({cls:"pointer-events-none"});if(e.item instanceof E2t.TFile){let o=n.createDiv(),i=e.item;o.setText(this.formatNoteTitle(i.basename,i===this.activeNote,i.extension)),this.titleOnly||n.createDiv({cls:"mt-1 text-muted text-xs"}).setText(i.path)}}};var Nle=class{constructor(e,r){this.app=e,this.onImagesSelected=r}open(){let e=document.createElement("input");e.type="file",e.accept="image/*",e.multiple=!0,e.style.display="none",e.addEventListener("change",()=>{let r=Array.from(e.files||[]);this.onImagesSelected(r),document.body.removeChild(e)}),document.body.appendChild(e),e.click()}};var T2t=require("obsidian"),oW=class extends T2t.FuzzySuggestModal{constructor(e,r,n,o=[]){super(e),this.promptTitles=r,this.onChoosePromptTitle=n,this.descriptions=o}getItems(){return this.promptTitles}getItemText(e){let r=this.promptTitles.indexOf(e),n=this.descriptions[r];return n?`${e} (${n})`:e}onChooseItem(e,r){let n=this.promptTitles.findIndex(i=>e.startsWith(i+" (")||e===i),o=n>=0?this.promptTitles[n]:e;this.onChoosePromptTitle(o)}};var Mx=F(X());wn();kr();var PDe=({capabilities:t=[],iconSize:e=16})=>Mx.default.createElement(Mx.default.Fragment,null,t.sort((r,n)=>r.localeCompare(n)).map((r,n)=>{switch(r){case"reasoning":return Mx.default.createElement(RC,{key:n,className:"tw-text-model-capabilities-blue",style:{width:e,height:e}});case"vision":return Mx.default.createElement(MC,{key:n,className:"tw-text-model-capabilities-green",style:{width:e,height:e}});case"websearch":return Mx.default.createElement(MR,{key:n,className:"tw-text-model-capabilities-blue",style:{width:e,height:e}});default:return null}})),EDe=({model:t,iconSize:e=14})=>{let r=t.displayName||t.name;return Mx.default.createElement("div",{className:"tw-flex tw-items-center tw-gap-1"},Mx.default.createElement("span",null,r),t.capabilities&&t.capabilities.length>0&&Mx.default.createElement("div",{className:"tw-flex tw-items-center tw-gap-0.5"},Mx.default.createElement(PDe,{capabilities:t.capabilities,iconSize:e})))},Dle=t=>{let e=t.displayName||t.name,r=`(${xf(t.provider)})`;return`${e} ${r}`},iW=t=>{let e=t.displayName||t.name,r=`(${xf(t.provider,t)})`,n=t.capabilities?.map(o=>{switch(o){case"reasoning":return"Reasoning";case"vision":return"Vision";case"websearch":return"Websearch";default:return""}}).join("|")||"";return`${e} ${r} ${n}`};xd();var A2t=require("obsidian");kr();var PU=class t{constructor(){}static getInstance(){return t.instance||(t.instance=new t),t.instance}async processEmbeddedPDFs(e,r,n){let o=/!\[\[(.*?\.pdf)\]\]/g,i=[...e.matchAll(o)];for(let a of i){let s=a[1],u=r.getAbstractFileByPath(s);if(u instanceof A2t.TFile)try{let l=await n.parseFile(u,r);e=e.replace(a[0],`

Embedded PDF (${s}):
${l}

`)}catch(l){console.error(`Error processing embedded PDF ${s}:`,l),e=e.replace(a[0],`

Embedded PDF (${s}): [Error: Could not process PDF]

`)}}return e}async processContextNotes(e,r,n,o,i,a,s){let u="",l=async(d,f=O2)=>{try{if(e.has(d.path)){console.log(`Skipping note ${d.path} as it was included via custom prompt.`);return}if(console.log(`Processing note: ${d.path}, extension: ${d.extension}, chain: ${s}`),!r.supportsExtension(d.extension)){console.warn(`Unsupported file type: ${d.extension}`);return}if(s!=="copilot_plus"&&d.extension!=="md"&&d.extension!=="canvas"){console.warn(`File type ${d.extension} requires Copilot Plus mode for context processing.`);return}let p=await r.parseFile(d,n);d.extension==="md"&&s==="copilot_plus"&&(p=await this.processEmbeddedPDFs(p,n,r)),u+=`

 <${f}> 
 Title: [[${d.basename}]]
Path: ${d.path}

${p}
</${f}>`}catch(p){console.error(`Error processing file ${d.path}:`,p),u+=`

 <${f}_error> 
 Title: [[${d.basename}]]
Path: ${d.path}

[Error: Could not process file]
</${f}_error>`}},c=new Set;i&&a&&(await l(a,"active_note"),c.add(a.path));for(let d of o)c.has(d.path)||(await l(d),c.add(d.path));return u}async hasEmbeddedPDFs(e){return/!\[\[(.*?\.pdf)\]\]/g.test(e)}async addNoteToContext(e,r,n,o,i,a){if(n.some(l=>l.path===e.path))return;let s=await r.read(e),u=await this.hasEmbeddedPDFs(s);o&&e.path===o.path&&a(!0),i(l=>[...l,Object.assign(e,{wasAddedViaReference:!0,hasEmbeddedPDFs:u})])}processSelectedTextContexts(){let e=wG();if(!e||e.length===0)return"";let r="";for(let n of e){let o=n.startLine===n.endLine?`L${n.startLine}`:`L${n.startLine}-${n.endLine}`;r+=`

 <selected_text> 
 Title: [[${n.noteTitle}]]
Path: ${n.notePath}
Lines: ${o}

${n.content}
</selected_text>`}return r}};var Lle=require("obsidian");var Yp=class t{static getInstance(){return t.instance||(t.instance=new t),t.instance}async createCommand(e,r,n=!1){n||zue(e);let o=CI(),i=XN(e);await app.vault.adapter.exists(o)||await app.vault.createFolder(o);let s=await app.vault.create(i,r);await app.fileManager.processFrontMatter(s,u=>{u[KN]=!1,u[GN]=!1,u[JN]=Number.MAX_SAFE_INTEGER,u[YN]="",u[ZN]=0})}async recordUsage(e){this.updateCommand({...e,lastUsedMs:Date.now()},e.title)}async updateCommand(e,r,n=!1){n||j5(e,r);let o=app.vault.getAbstractFileByPath(XN(e.title));if(e.title!==r){let i=XN(e.title);if(app.vault.getAbstractFileByPath(i))throw new Mr("Error saving custom prompt. Please check if the title already exists.");let s=XN(r),u=app.vault.getAbstractFileByPath(s);u instanceof Lle.TFile&&(await app.vault.rename(u,i),o=u)}o||(await this.createCommand(e.title,e.content,n),o=app.vault.getAbstractFileByPath(XN(e.title))),o instanceof Lle.TFile&&(await app.vault.modify(o,e.content),await app.fileManager.processFrontMatter(o,i=>{i[KN]=e.showInContextMenu,i[GN]=e.showInSlashMenu,i[JN]=e.order,i[YN]=e.modelKey,i[ZN]=e.lastUsedMs}))}async updateCommands(e){Hue(e),await Promise.all(e.map(r=>this.updateCommand(r,r.title,!0)))}async deleteCommand(e){R5(e.title);let r=app.vault.getAbstractFileByPath(XN(e.title));r instanceof Lle.TFile&&await app.vault.delete(r)}};tr();wn();var JI=require("obsidian"),at=F(X());var yn=F(X()),Ci=F(F2t());function GI(t,e,r,n){function o(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function s(c){try{l(n.next(c))}catch(d){a(d)}}function u(c){try{l(n.throw(c))}catch(d){a(d)}}function l(c){c.done?i(c.value):o(c.value).then(s,u)}l((n=n.apply(t,e||[])).next())})}var K_n=new Map([["1km","application/vnd.1000minds.decision-model+xml"],["3dml","text/vnd.in3d.3dml"],["3ds","image/x-3ds"],["3g2","video/3gpp2"],["3gp","video/3gp"],["3gpp","video/3gpp"],["3mf","model/3mf"],["7z","application/x-7z-compressed"],["7zip","application/x-7z-compressed"],["123","application/vnd.lotus-1-2-3"],["aab","application/x-authorware-bin"],["aac","audio/x-acc"],["aam","application/x-authorware-map"],["aas","application/x-authorware-seg"],["abw","application/x-abiword"],["ac","application/vnd.nokia.n-gage.ac+xml"],["ac3","audio/ac3"],["acc","application/vnd.americandynamics.acc"],["ace","application/x-ace-compressed"],["acu","application/vnd.acucobol"],["acutc","application/vnd.acucorp"],["adp","audio/adpcm"],["aep","application/vnd.audiograph"],["afm","application/x-font-type1"],["afp","application/vnd.ibm.modcap"],["ahead","application/vnd.ahead.space"],["ai","application/pdf"],["aif","audio/x-aiff"],["aifc","audio/x-aiff"],["aiff","audio/x-aiff"],["air","application/vnd.adobe.air-application-installer-package+zip"],["ait","application/vnd.dvb.ait"],["ami","application/vnd.amiga.ami"],["amr","audio/amr"],["apk","application/vnd.android.package-archive"],["apng","image/apng"],["appcache","text/cache-manifest"],["application","application/x-ms-application"],["apr","application/vnd.lotus-approach"],["arc","application/x-freearc"],["arj","application/x-arj"],["asc","application/pgp-signature"],["asf","video/x-ms-asf"],["asm","text/x-asm"],["aso","application/vnd.accpac.simply.aso"],["asx","video/x-ms-asf"],["atc","application/vnd.acucorp"],["atom","application/atom+xml"],["atomcat","application/atomcat+xml"],["atomdeleted","application/atomdeleted+xml"],["atomsvc","application/atomsvc+xml"],["atx","application/vnd.antix.game-component"],["au","audio/x-au"],["avi","video/x-msvideo"],["avif","image/avif"],["aw","application/applixware"],["azf","application/vnd.airzip.filesecure.azf"],["azs","application/vnd.airzip.filesecure.azs"],["azv","image/vnd.airzip.accelerator.azv"],["azw","application/vnd.amazon.ebook"],["b16","image/vnd.pco.b16"],["bat","application/x-msdownload"],["bcpio","application/x-bcpio"],["bdf","application/x-font-bdf"],["bdm","application/vnd.syncml.dm+wbxml"],["bdoc","application/x-bdoc"],["bed","application/vnd.realvnc.bed"],["bh2","application/vnd.fujitsu.oasysprs"],["bin","application/octet-stream"],["blb","application/x-blorb"],["blorb","application/x-blorb"],["bmi","application/vnd.bmi"],["bmml","application/vnd.balsamiq.bmml+xml"],["bmp","image/bmp"],["book","application/vnd.framemaker"],["box","application/vnd.previewsystems.box"],["boz","application/x-bzip2"],["bpk","application/octet-stream"],["bpmn","application/octet-stream"],["bsp","model/vnd.valve.source.compiled-map"],["btif","image/prs.btif"],["buffer","application/octet-stream"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["c","text/x-c"],["c4d","application/vnd.clonk.c4group"],["c4f","application/vnd.clonk.c4group"],["c4g","application/vnd.clonk.c4group"],["c4p","application/vnd.clonk.c4group"],["c4u","application/vnd.clonk.c4group"],["c11amc","application/vnd.cluetrust.cartomobile-config"],["c11amz","application/vnd.cluetrust.cartomobile-config-pkg"],["cab","application/vnd.ms-cab-compressed"],["caf","audio/x-caf"],["cap","application/vnd.tcpdump.pcap"],["car","application/vnd.curl.car"],["cat","application/vnd.ms-pki.seccat"],["cb7","application/x-cbr"],["cba","application/x-cbr"],["cbr","application/x-cbr"],["cbt","application/x-cbr"],["cbz","application/x-cbr"],["cc","text/x-c"],["cco","application/x-cocoa"],["cct","application/x-director"],["ccxml","application/ccxml+xml"],["cdbcmsg","application/vnd.contact.cmsg"],["cda","application/x-cdf"],["cdf","application/x-netcdf"],["cdfx","application/cdfx+xml"],["cdkey","application/vnd.mediastation.cdkey"],["cdmia","application/cdmi-capability"],["cdmic","application/cdmi-container"],["cdmid","application/cdmi-domain"],["cdmio","application/cdmi-object"],["cdmiq","application/cdmi-queue"],["cdr","application/cdr"],["cdx","chemical/x-cdx"],["cdxml","application/vnd.chemdraw+xml"],["cdy","application/vnd.cinderella"],["cer","application/pkix-cert"],["cfs","application/x-cfs-compressed"],["cgm","image/cgm"],["chat","application/x-chat"],["chm","application/vnd.ms-htmlhelp"],["chrt","application/vnd.kde.kchart"],["cif","chemical/x-cif"],["cii","application/vnd.anser-web-certificate-issue-initiation"],["cil","application/vnd.ms-artgalry"],["cjs","application/node"],["cla","application/vnd.claymore"],["class","application/octet-stream"],["clkk","application/vnd.crick.clicker.keyboard"],["clkp","application/vnd.crick.clicker.palette"],["clkt","application/vnd.crick.clicker.template"],["clkw","application/vnd.crick.clicker.wordbank"],["clkx","application/vnd.crick.clicker"],["clp","application/x-msclip"],["cmc","application/vnd.cosmocaller"],["cmdf","chemical/x-cmdf"],["cml","chemical/x-cml"],["cmp","application/vnd.yellowriver-custom-menu"],["cmx","image/x-cmx"],["cod","application/vnd.rim.cod"],["coffee","text/coffeescript"],["com","application/x-msdownload"],["conf","text/plain"],["cpio","application/x-cpio"],["cpp","text/x-c"],["cpt","application/mac-compactpro"],["crd","application/x-mscardfile"],["crl","application/pkix-crl"],["crt","application/x-x509-ca-cert"],["crx","application/x-chrome-extension"],["cryptonote","application/vnd.rig.cryptonote"],["csh","application/x-csh"],["csl","application/vnd.citationstyles.style+xml"],["csml","chemical/x-csml"],["csp","application/vnd.commonspace"],["csr","application/octet-stream"],["css","text/css"],["cst","application/x-director"],["csv","text/csv"],["cu","application/cu-seeme"],["curl","text/vnd.curl"],["cww","application/prs.cww"],["cxt","application/x-director"],["cxx","text/x-c"],["dae","model/vnd.collada+xml"],["daf","application/vnd.mobius.daf"],["dart","application/vnd.dart"],["dataless","application/vnd.fdsn.seed"],["davmount","application/davmount+xml"],["dbf","application/vnd.dbf"],["dbk","application/docbook+xml"],["dcr","application/x-director"],["dcurl","text/vnd.curl.dcurl"],["dd2","application/vnd.oma.dd2+xml"],["ddd","application/vnd.fujixerox.ddd"],["ddf","application/vnd.syncml.dmddf+xml"],["dds","image/vnd.ms-dds"],["deb","application/x-debian-package"],["def","text/plain"],["deploy","application/octet-stream"],["der","application/x-x509-ca-cert"],["dfac","application/vnd.dreamfactory"],["dgc","application/x-dgc-compressed"],["dic","text/x-c"],["dir","application/x-director"],["dis","application/vnd.mobius.dis"],["disposition-notification","message/disposition-notification"],["dist","application/octet-stream"],["distz","application/octet-stream"],["djv","image/vnd.djvu"],["djvu","image/vnd.djvu"],["dll","application/octet-stream"],["dmg","application/x-apple-diskimage"],["dmn","application/octet-stream"],["dmp","application/vnd.tcpdump.pcap"],["dms","application/octet-stream"],["dna","application/vnd.dna"],["doc","application/msword"],["docm","application/vnd.ms-word.template.macroEnabled.12"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["dot","application/msword"],["dotm","application/vnd.ms-word.template.macroEnabled.12"],["dotx","application/vnd.openxmlformats-officedocument.wordprocessingml.template"],["dp","application/vnd.osgi.dp"],["dpg","application/vnd.dpgraph"],["dra","audio/vnd.dra"],["drle","image/dicom-rle"],["dsc","text/prs.lines.tag"],["dssc","application/dssc+der"],["dtb","application/x-dtbook+xml"],["dtd","application/xml-dtd"],["dts","audio/vnd.dts"],["dtshd","audio/vnd.dts.hd"],["dump","application/octet-stream"],["dvb","video/vnd.dvb.file"],["dvi","application/x-dvi"],["dwd","application/atsc-dwd+xml"],["dwf","model/vnd.dwf"],["dwg","image/vnd.dwg"],["dxf","image/vnd.dxf"],["dxp","application/vnd.spotfire.dxp"],["dxr","application/x-director"],["ear","application/java-archive"],["ecelp4800","audio/vnd.nuera.ecelp4800"],["ecelp7470","audio/vnd.nuera.ecelp7470"],["ecelp9600","audio/vnd.nuera.ecelp9600"],["ecma","application/ecmascript"],["edm","application/vnd.novadigm.edm"],["edx","application/vnd.novadigm.edx"],["efif","application/vnd.picsel"],["ei6","application/vnd.pg.osasli"],["elc","application/octet-stream"],["emf","image/emf"],["eml","message/rfc822"],["emma","application/emma+xml"],["emotionml","application/emotionml+xml"],["emz","application/x-msmetafile"],["eol","audio/vnd.digital-winds"],["eot","application/vnd.ms-fontobject"],["eps","application/postscript"],["epub","application/epub+zip"],["es","application/ecmascript"],["es3","application/vnd.eszigno3+xml"],["esa","application/vnd.osgi.subsystem"],["esf","application/vnd.epson.esf"],["et3","application/vnd.eszigno3+xml"],["etx","text/x-setext"],["eva","application/x-eva"],["evy","application/x-envoy"],["exe","application/octet-stream"],["exi","application/exi"],["exp","application/express"],["exr","image/aces"],["ext","application/vnd.novadigm.ext"],["ez","application/andrew-inset"],["ez2","application/vnd.ezpix-album"],["ez3","application/vnd.ezpix-package"],["f","text/x-fortran"],["f4v","video/mp4"],["f77","text/x-fortran"],["f90","text/x-fortran"],["fbs","image/vnd.fastbidsheet"],["fcdt","application/vnd.adobe.formscentral.fcdt"],["fcs","application/vnd.isac.fcs"],["fdf","application/vnd.fdf"],["fdt","application/fdt+xml"],["fe_launch","application/vnd.denovo.fcselayout-link"],["fg5","application/vnd.fujitsu.oasysgp"],["fgd","application/x-director"],["fh","image/x-freehand"],["fh4","image/x-freehand"],["fh5","image/x-freehand"],["fh7","image/x-freehand"],["fhc","image/x-freehand"],["fig","application/x-xfig"],["fits","image/fits"],["flac","audio/x-flac"],["fli","video/x-fli"],["flo","application/vnd.micrografx.flo"],["flv","video/x-flv"],["flw","application/vnd.kde.kivio"],["flx","text/vnd.fmi.flexstor"],["fly","text/vnd.fly"],["fm","application/vnd.framemaker"],["fnc","application/vnd.frogans.fnc"],["fo","application/vnd.software602.filler.form+xml"],["for","text/x-fortran"],["fpx","image/vnd.fpx"],["frame","application/vnd.framemaker"],["fsc","application/vnd.fsc.weblaunch"],["fst","image/vnd.fst"],["ftc","application/vnd.fluxtime.clip"],["fti","application/vnd.anser-web-funds-transfer-initiation"],["fvt","video/vnd.fvt"],["fxp","application/vnd.adobe.fxp"],["fxpl","application/vnd.adobe.fxp"],["fzs","application/vnd.fuzzysheet"],["g2w","application/vnd.geoplan"],["g3","image/g3fax"],["g3w","application/vnd.geospace"],["gac","application/vnd.groove-account"],["gam","application/x-tads"],["gbr","application/rpki-ghostbusters"],["gca","application/x-gca-compressed"],["gdl","model/vnd.gdl"],["gdoc","application/vnd.google-apps.document"],["geo","application/vnd.dynageo"],["geojson","application/geo+json"],["gex","application/vnd.geometry-explorer"],["ggb","application/vnd.geogebra.file"],["ggt","application/vnd.geogebra.tool"],["ghf","application/vnd.groove-help"],["gif","image/gif"],["gim","application/vnd.groove-identity-message"],["glb","model/gltf-binary"],["gltf","model/gltf+json"],["gml","application/gml+xml"],["gmx","application/vnd.gmx"],["gnumeric","application/x-gnumeric"],["gpg","application/gpg-keys"],["gph","application/vnd.flographit"],["gpx","application/gpx+xml"],["gqf","application/vnd.grafeq"],["gqs","application/vnd.grafeq"],["gram","application/srgs"],["gramps","application/x-gramps-xml"],["gre","application/vnd.geometry-explorer"],["grv","application/vnd.groove-injector"],["grxml","application/srgs+xml"],["gsf","application/x-font-ghostscript"],["gsheet","application/vnd.google-apps.spreadsheet"],["gslides","application/vnd.google-apps.presentation"],["gtar","application/x-gtar"],["gtm","application/vnd.groove-tool-message"],["gtw","model/vnd.gtw"],["gv","text/vnd.graphviz"],["gxf","application/gxf"],["gxt","application/vnd.geonext"],["gz","application/gzip"],["gzip","application/gzip"],["h","text/x-c"],["h261","video/h261"],["h263","video/h263"],["h264","video/h264"],["hal","application/vnd.hal+xml"],["hbci","application/vnd.hbci"],["hbs","text/x-handlebars-template"],["hdd","application/x-virtualbox-hdd"],["hdf","application/x-hdf"],["heic","image/heic"],["heics","image/heic-sequence"],["heif","image/heif"],["heifs","image/heif-sequence"],["hej2","image/hej2k"],["held","application/atsc-held+xml"],["hh","text/x-c"],["hjson","application/hjson"],["hlp","application/winhlp"],["hpgl","application/vnd.hp-hpgl"],["hpid","application/vnd.hp-hpid"],["hps","application/vnd.hp-hps"],["hqx","application/mac-binhex40"],["hsj2","image/hsj2"],["htc","text/x-component"],["htke","application/vnd.kenameaapp"],["htm","text/html"],["html","text/html"],["hvd","application/vnd.yamaha.hv-dic"],["hvp","application/vnd.yamaha.hv-voice"],["hvs","application/vnd.yamaha.hv-script"],["i2g","application/vnd.intergeo"],["icc","application/vnd.iccprofile"],["ice","x-conference/x-cooltalk"],["icm","application/vnd.iccprofile"],["ico","image/x-icon"],["ics","text/calendar"],["ief","image/ief"],["ifb","text/calendar"],["ifm","application/vnd.shana.informed.formdata"],["iges","model/iges"],["igl","application/vnd.igloader"],["igm","application/vnd.insors.igm"],["igs","model/iges"],["igx","application/vnd.micrografx.igx"],["iif","application/vnd.shana.informed.interchange"],["img","application/octet-stream"],["imp","application/vnd.accpac.simply.imp"],["ims","application/vnd.ms-ims"],["in","text/plain"],["ini","text/plain"],["ink","application/inkml+xml"],["inkml","application/inkml+xml"],["install","application/x-install-instructions"],["iota","application/vnd.astraea-software.iota"],["ipfix","application/ipfix"],["ipk","application/vnd.shana.informed.package"],["irm","application/vnd.ibm.rights-management"],["irp","application/vnd.irepository.package+xml"],["iso","application/x-iso9660-image"],["itp","application/vnd.shana.informed.formtemplate"],["its","application/its+xml"],["ivp","application/vnd.immervision-ivp"],["ivu","application/vnd.immervision-ivu"],["jad","text/vnd.sun.j2me.app-descriptor"],["jade","text/jade"],["jam","application/vnd.jam"],["jar","application/java-archive"],["jardiff","application/x-java-archive-diff"],["java","text/x-java-source"],["jhc","image/jphc"],["jisp","application/vnd.jisp"],["jls","image/jls"],["jlt","application/vnd.hp-jlyt"],["jng","image/x-jng"],["jnlp","application/x-java-jnlp-file"],["joda","application/vnd.joost.joda-archive"],["jp2","image/jp2"],["jpe","image/jpeg"],["jpeg","image/jpeg"],["jpf","image/jpx"],["jpg","image/jpeg"],["jpg2","image/jp2"],["jpgm","video/jpm"],["jpgv","video/jpeg"],["jph","image/jph"],["jpm","video/jpm"],["jpx","image/jpx"],["js","application/javascript"],["json","application/json"],["json5","application/json5"],["jsonld","application/ld+json"],["jsonl","application/jsonl"],["jsonml","application/jsonml+json"],["jsx","text/jsx"],["jxr","image/jxr"],["jxra","image/jxra"],["jxrs","image/jxrs"],["jxs","image/jxs"],["jxsc","image/jxsc"],["jxsi","image/jxsi"],["jxss","image/jxss"],["kar","audio/midi"],["karbon","application/vnd.kde.karbon"],["kdb","application/octet-stream"],["kdbx","application/x-keepass2"],["key","application/x-iwork-keynote-sffkey"],["kfo","application/vnd.kde.kformula"],["kia","application/vnd.kidspiration"],["kml","application/vnd.google-earth.kml+xml"],["kmz","application/vnd.google-earth.kmz"],["kne","application/vnd.kinar"],["knp","application/vnd.kinar"],["kon","application/vnd.kde.kontour"],["kpr","application/vnd.kde.kpresenter"],["kpt","application/vnd.kde.kpresenter"],["kpxx","application/vnd.ds-keypoint"],["ksp","application/vnd.kde.kspread"],["ktr","application/vnd.kahootz"],["ktx","image/ktx"],["ktx2","image/ktx2"],["ktz","application/vnd.kahootz"],["kwd","application/vnd.kde.kword"],["kwt","application/vnd.kde.kword"],["lasxml","application/vnd.las.las+xml"],["latex","application/x-latex"],["lbd","application/vnd.llamagraphics.life-balance.desktop"],["lbe","application/vnd.llamagraphics.life-balance.exchange+xml"],["les","application/vnd.hhe.lesson-player"],["less","text/less"],["lgr","application/lgr+xml"],["lha","application/octet-stream"],["link66","application/vnd.route66.link66+xml"],["list","text/plain"],["list3820","application/vnd.ibm.modcap"],["listafp","application/vnd.ibm.modcap"],["litcoffee","text/coffeescript"],["lnk","application/x-ms-shortcut"],["log","text/plain"],["lostxml","application/lost+xml"],["lrf","application/octet-stream"],["lrm","application/vnd.ms-lrm"],["ltf","application/vnd.frogans.ltf"],["lua","text/x-lua"],["luac","application/x-lua-bytecode"],["lvp","audio/vnd.lucent.voice"],["lwp","application/vnd.lotus-wordpro"],["lzh","application/octet-stream"],["m1v","video/mpeg"],["m2a","audio/mpeg"],["m2v","video/mpeg"],["m3a","audio/mpeg"],["m3u","text/plain"],["m3u8","application/vnd.apple.mpegurl"],["m4a","audio/x-m4a"],["m4p","application/mp4"],["m4s","video/iso.segment"],["m4u","application/vnd.mpegurl"],["m4v","video/x-m4v"],["m13","application/x-msmediaview"],["m14","application/x-msmediaview"],["m21","application/mp21"],["ma","application/mathematica"],["mads","application/mads+xml"],["maei","application/mmt-aei+xml"],["mag","application/vnd.ecowin.chart"],["maker","application/vnd.framemaker"],["man","text/troff"],["manifest","text/cache-manifest"],["map","application/json"],["mar","application/octet-stream"],["markdown","text/markdown"],["mathml","application/mathml+xml"],["mb","application/mathematica"],["mbk","application/vnd.mobius.mbk"],["mbox","application/mbox"],["mc1","application/vnd.medcalcdata"],["mcd","application/vnd.mcd"],["mcurl","text/vnd.curl.mcurl"],["md","text/markdown"],["mdb","application/x-msaccess"],["mdi","image/vnd.ms-modi"],["mdx","text/mdx"],["me","text/troff"],["mesh","model/mesh"],["meta4","application/metalink4+xml"],["metalink","application/metalink+xml"],["mets","application/mets+xml"],["mfm","application/vnd.mfmp"],["mft","application/rpki-manifest"],["mgp","application/vnd.osgeo.mapguide.package"],["mgz","application/vnd.proteus.magazine"],["mid","audio/midi"],["midi","audio/midi"],["mie","application/x-mie"],["mif","application/vnd.mif"],["mime","message/rfc822"],["mj2","video/mj2"],["mjp2","video/mj2"],["mjs","application/javascript"],["mk3d","video/x-matroska"],["mka","audio/x-matroska"],["mkd","text/x-markdown"],["mks","video/x-matroska"],["mkv","video/x-matroska"],["mlp","application/vnd.dolby.mlp"],["mmd","application/vnd.chipnuts.karaoke-mmd"],["mmf","application/vnd.smaf"],["mml","text/mathml"],["mmr","image/vnd.fujixerox.edmics-mmr"],["mng","video/x-mng"],["mny","application/x-msmoney"],["mobi","application/x-mobipocket-ebook"],["mods","application/mods+xml"],["mov","video/quicktime"],["movie","video/x-sgi-movie"],["mp2","audio/mpeg"],["mp2a","audio/mpeg"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mp4a","audio/mp4"],["mp4s","application/mp4"],["mp4v","video/mp4"],["mp21","application/mp21"],["mpc","application/vnd.mophun.certificate"],["mpd","application/dash+xml"],["mpe","video/mpeg"],["mpeg","video/mpeg"],["mpg","video/mpeg"],["mpg4","video/mp4"],["mpga","audio/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["mpm","application/vnd.blueice.multipass"],["mpn","application/vnd.mophun.application"],["mpp","application/vnd.ms-project"],["mpt","application/vnd.ms-project"],["mpy","application/vnd.ibm.minipay"],["mqy","application/vnd.mobius.mqy"],["mrc","application/marc"],["mrcx","application/marcxml+xml"],["ms","text/troff"],["mscml","application/mediaservercontrol+xml"],["mseed","application/vnd.fdsn.mseed"],["mseq","application/vnd.mseq"],["msf","application/vnd.epson.msf"],["msg","application/vnd.ms-outlook"],["msh","model/mesh"],["msi","application/x-msdownload"],["msl","application/vnd.mobius.msl"],["msm","application/octet-stream"],["msp","application/octet-stream"],["msty","application/vnd.muvee.style"],["mtl","model/mtl"],["mts","model/vnd.mts"],["mus","application/vnd.musician"],["musd","application/mmt-usd+xml"],["musicxml","application/vnd.recordare.musicxml+xml"],["mvb","application/x-msmediaview"],["mvt","application/vnd.mapbox-vector-tile"],["mwf","application/vnd.mfer"],["mxf","application/mxf"],["mxl","application/vnd.recordare.musicxml"],["mxmf","audio/mobile-xmf"],["mxml","application/xv+xml"],["mxs","application/vnd.triscape.mxs"],["mxu","video/vnd.mpegurl"],["n-gage","application/vnd.nokia.n-gage.symbian.install"],["n3","text/n3"],["nb","application/mathematica"],["nbp","application/vnd.wolfram.player"],["nc","application/x-netcdf"],["ncx","application/x-dtbncx+xml"],["nfo","text/x-nfo"],["ngdat","application/vnd.nokia.n-gage.data"],["nitf","application/vnd.nitf"],["nlu","application/vnd.neurolanguage.nlu"],["nml","application/vnd.enliven"],["nnd","application/vnd.noblenet-directory"],["nns","application/vnd.noblenet-sealer"],["nnw","application/vnd.noblenet-web"],["npx","image/vnd.net-fpx"],["nq","application/n-quads"],["nsc","application/x-conference"],["nsf","application/vnd.lotus-notes"],["nt","application/n-triples"],["ntf","application/vnd.nitf"],["numbers","application/x-iwork-numbers-sffnumbers"],["nzb","application/x-nzb"],["oa2","application/vnd.fujitsu.oasys2"],["oa3","application/vnd.fujitsu.oasys3"],["oas","application/vnd.fujitsu.oasys"],["obd","application/x-msbinder"],["obgx","application/vnd.openblox.game+xml"],["obj","model/obj"],["oda","application/oda"],["odb","application/vnd.oasis.opendocument.database"],["odc","application/vnd.oasis.opendocument.chart"],["odf","application/vnd.oasis.opendocument.formula"],["odft","application/vnd.oasis.opendocument.formula-template"],["odg","application/vnd.oasis.opendocument.graphics"],["odi","application/vnd.oasis.opendocument.image"],["odm","application/vnd.oasis.opendocument.text-master"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogex","model/vnd.opengex"],["ogg","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["omdoc","application/omdoc+xml"],["onepkg","application/onenote"],["onetmp","application/onenote"],["onetoc","application/onenote"],["onetoc2","application/onenote"],["opf","application/oebps-package+xml"],["opml","text/x-opml"],["oprc","application/vnd.palm"],["opus","audio/ogg"],["org","text/x-org"],["osf","application/vnd.yamaha.openscoreformat"],["osfpvg","application/vnd.yamaha.openscoreformat.osfpvg+xml"],["osm","application/vnd.openstreetmap.data+xml"],["otc","application/vnd.oasis.opendocument.chart-template"],["otf","font/otf"],["otg","application/vnd.oasis.opendocument.graphics-template"],["oth","application/vnd.oasis.opendocument.text-web"],["oti","application/vnd.oasis.opendocument.image-template"],["otp","application/vnd.oasis.opendocument.presentation-template"],["ots","application/vnd.oasis.opendocument.spreadsheet-template"],["ott","application/vnd.oasis.opendocument.text-template"],["ova","application/x-virtualbox-ova"],["ovf","application/x-virtualbox-ovf"],["owl","application/rdf+xml"],["oxps","application/oxps"],["oxt","application/vnd.openofficeorg.extension"],["p","text/x-pascal"],["p7a","application/x-pkcs7-signature"],["p7b","application/x-pkcs7-certificates"],["p7c","application/pkcs7-mime"],["p7m","application/pkcs7-mime"],["p7r","application/x-pkcs7-certreqresp"],["p7s","application/pkcs7-signature"],["p8","application/pkcs8"],["p10","application/x-pkcs10"],["p12","application/x-pkcs12"],["pac","application/x-ns-proxy-autoconfig"],["pages","application/x-iwork-pages-sffpages"],["pas","text/x-pascal"],["paw","application/vnd.pawaafile"],["pbd","application/vnd.powerbuilder6"],["pbm","image/x-portable-bitmap"],["pcap","application/vnd.tcpdump.pcap"],["pcf","application/x-font-pcf"],["pcl","application/vnd.hp-pcl"],["pclxl","application/vnd.hp-pclxl"],["pct","image/x-pict"],["pcurl","application/vnd.curl.pcurl"],["pcx","image/x-pcx"],["pdb","application/x-pilot"],["pde","text/x-processing"],["pdf","application/pdf"],["pem","application/x-x509-user-cert"],["pfa","application/x-font-type1"],["pfb","application/x-font-type1"],["pfm","application/x-font-type1"],["pfr","application/font-tdpfr"],["pfx","application/x-pkcs12"],["pgm","image/x-portable-graymap"],["pgn","application/x-chess-pgn"],["pgp","application/pgp"],["php","application/x-httpd-php"],["php3","application/x-httpd-php"],["php4","application/x-httpd-php"],["phps","application/x-httpd-php-source"],["phtml","application/x-httpd-php"],["pic","image/x-pict"],["pkg","application/octet-stream"],["pki","application/pkixcmp"],["pkipath","application/pkix-pkipath"],["pkpass","application/vnd.apple.pkpass"],["pl","application/x-perl"],["plb","application/vnd.3gpp.pic-bw-large"],["plc","application/vnd.mobius.plc"],["plf","application/vnd.pocketlearn"],["pls","application/pls+xml"],["pm","application/x-perl"],["pml","application/vnd.ctc-posml"],["png","image/png"],["pnm","image/x-portable-anymap"],["portpkg","application/vnd.macports.portpkg"],["pot","application/vnd.ms-powerpoint"],["potm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["potx","application/vnd.openxmlformats-officedocument.presentationml.template"],["ppa","application/vnd.ms-powerpoint"],["ppam","application/vnd.ms-powerpoint.addin.macroEnabled.12"],["ppd","application/vnd.cups-ppd"],["ppm","image/x-portable-pixmap"],["pps","application/vnd.ms-powerpoint"],["ppsm","application/vnd.ms-powerpoint.slideshow.macroEnabled.12"],["ppsx","application/vnd.openxmlformats-officedocument.presentationml.slideshow"],["ppt","application/powerpoint"],["pptm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["pqa","application/vnd.palm"],["prc","application/x-pilot"],["pre","application/vnd.lotus-freelance"],["prf","application/pics-rules"],["provx","application/provenance+xml"],["ps","application/postscript"],["psb","application/vnd.3gpp.pic-bw-small"],["psd","application/x-photoshop"],["psf","application/x-font-linux-psf"],["pskcxml","application/pskc+xml"],["pti","image/prs.pti"],["ptid","application/vnd.pvi.ptid1"],["pub","application/x-mspublisher"],["pvb","application/vnd.3gpp.pic-bw-var"],["pwn","application/vnd.3m.post-it-notes"],["pya","audio/vnd.ms-playready.media.pya"],["pyv","video/vnd.ms-playready.media.pyv"],["qam","application/vnd.epson.quickanime"],["qbo","application/vnd.intu.qbo"],["qfx","application/vnd.intu.qfx"],["qps","application/vnd.publishare-delta-tree"],["qt","video/quicktime"],["qwd","application/vnd.quark.quarkxpress"],["qwt","application/vnd.quark.quarkxpress"],["qxb","application/vnd.quark.quarkxpress"],["qxd","application/vnd.quark.quarkxpress"],["qxl","application/vnd.quark.quarkxpress"],["qxt","application/vnd.quark.quarkxpress"],["ra","audio/x-realaudio"],["ram","audio/x-pn-realaudio"],["raml","application/raml+yaml"],["rapd","application/route-apd+xml"],["rar","application/x-rar"],["ras","image/x-cmu-raster"],["rcprofile","application/vnd.ipunplugged.rcprofile"],["rdf","application/rdf+xml"],["rdz","application/vnd.data-vision.rdz"],["relo","application/p2p-overlay+xml"],["rep","application/vnd.businessobjects"],["res","application/x-dtbresource+xml"],["rgb","image/x-rgb"],["rif","application/reginfo+xml"],["rip","audio/vnd.rip"],["ris","application/x-research-info-systems"],["rl","application/resource-lists+xml"],["rlc","image/vnd.fujixerox.edmics-rlc"],["rld","application/resource-lists-diff+xml"],["rm","audio/x-pn-realaudio"],["rmi","audio/midi"],["rmp","audio/x-pn-realaudio-plugin"],["rms","application/vnd.jcp.javame.midlet-rms"],["rmvb","application/vnd.rn-realmedia-vbr"],["rnc","application/relax-ng-compact-syntax"],["rng","application/xml"],["roa","application/rpki-roa"],["roff","text/troff"],["rp9","application/vnd.cloanto.rp9"],["rpm","audio/x-pn-realaudio-plugin"],["rpss","application/vnd.nokia.radio-presets"],["rpst","application/vnd.nokia.radio-preset"],["rq","application/sparql-query"],["rs","application/rls-services+xml"],["rsa","application/x-pkcs7"],["rsat","application/atsc-rsat+xml"],["rsd","application/rsd+xml"],["rsheet","application/urc-ressheet+xml"],["rss","application/rss+xml"],["rtf","text/rtf"],["rtx","text/richtext"],["run","application/x-makeself"],["rusd","application/route-usd+xml"],["rv","video/vnd.rn-realvideo"],["s","text/x-asm"],["s3m","audio/s3m"],["saf","application/vnd.yamaha.smaf-audio"],["sass","text/x-sass"],["sbml","application/sbml+xml"],["sc","application/vnd.ibm.secure-container"],["scd","application/x-msschedule"],["scm","application/vnd.lotus-screencam"],["scq","application/scvp-cv-request"],["scs","application/scvp-cv-response"],["scss","text/x-scss"],["scurl","text/vnd.curl.scurl"],["sda","application/vnd.stardivision.draw"],["sdc","application/vnd.stardivision.calc"],["sdd","application/vnd.stardivision.impress"],["sdkd","application/vnd.solent.sdkm+xml"],["sdkm","application/vnd.solent.sdkm+xml"],["sdp","application/sdp"],["sdw","application/vnd.stardivision.writer"],["sea","application/octet-stream"],["see","application/vnd.seemail"],["seed","application/vnd.fdsn.seed"],["sema","application/vnd.sema"],["semd","application/vnd.semd"],["semf","application/vnd.semf"],["senmlx","application/senml+xml"],["sensmlx","application/sensml+xml"],["ser","application/java-serialized-object"],["setpay","application/set-payment-initiation"],["setreg","application/set-registration-initiation"],["sfd-hdstx","application/vnd.hydrostatix.sof-data"],["sfs","application/vnd.spotfire.sfs"],["sfv","text/x-sfv"],["sgi","image/sgi"],["sgl","application/vnd.stardivision.writer-global"],["sgm","text/sgml"],["sgml","text/sgml"],["sh","application/x-sh"],["shar","application/x-shar"],["shex","text/shex"],["shf","application/shf+xml"],["shtml","text/html"],["sid","image/x-mrsid-image"],["sieve","application/sieve"],["sig","application/pgp-signature"],["sil","audio/silk"],["silo","model/mesh"],["sis","application/vnd.symbian.install"],["sisx","application/vnd.symbian.install"],["sit","application/x-stuffit"],["sitx","application/x-stuffitx"],["siv","application/sieve"],["skd","application/vnd.koan"],["skm","application/vnd.koan"],["skp","application/vnd.koan"],["skt","application/vnd.koan"],["sldm","application/vnd.ms-powerpoint.slide.macroenabled.12"],["sldx","application/vnd.openxmlformats-officedocument.presentationml.slide"],["slim","text/slim"],["slm","text/slim"],["sls","application/route-s-tsid+xml"],["slt","application/vnd.epson.salt"],["sm","application/vnd.stepmania.stepchart"],["smf","application/vnd.stardivision.math"],["smi","application/smil"],["smil","application/smil"],["smv","video/x-smv"],["smzip","application/vnd.stepmania.package"],["snd","audio/basic"],["snf","application/x-font-snf"],["so","application/octet-stream"],["spc","application/x-pkcs7-certificates"],["spdx","text/spdx"],["spf","application/vnd.yamaha.smaf-phrase"],["spl","application/x-futuresplash"],["spot","text/vnd.in3d.spot"],["spp","application/scvp-vp-response"],["spq","application/scvp-vp-request"],["spx","audio/ogg"],["sql","application/x-sql"],["src","application/x-wais-source"],["srt","application/x-subrip"],["sru","application/sru+xml"],["srx","application/sparql-results+xml"],["ssdl","application/ssdl+xml"],["sse","application/vnd.kodak-descriptor"],["ssf","application/vnd.epson.ssf"],["ssml","application/ssml+xml"],["sst","application/octet-stream"],["st","application/vnd.sailingtracker.track"],["stc","application/vnd.sun.xml.calc.template"],["std","application/vnd.sun.xml.draw.template"],["stf","application/vnd.wt.stf"],["sti","application/vnd.sun.xml.impress.template"],["stk","application/hyperstudio"],["stl","model/stl"],["stpx","model/step+xml"],["stpxz","model/step-xml+zip"],["stpz","model/step+zip"],["str","application/vnd.pg.format"],["stw","application/vnd.sun.xml.writer.template"],["styl","text/stylus"],["stylus","text/stylus"],["sub","text/vnd.dvb.subtitle"],["sus","application/vnd.sus-calendar"],["susp","application/vnd.sus-calendar"],["sv4cpio","application/x-sv4cpio"],["sv4crc","application/x-sv4crc"],["svc","application/vnd.dvb.service"],["svd","application/vnd.svd"],["svg","image/svg+xml"],["svgz","image/svg+xml"],["swa","application/x-director"],["swf","application/x-shockwave-flash"],["swi","application/vnd.aristanetworks.swi"],["swidtag","application/swid+xml"],["sxc","application/vnd.sun.xml.calc"],["sxd","application/vnd.sun.xml.draw"],["sxg","application/vnd.sun.xml.writer.global"],["sxi","application/vnd.sun.xml.impress"],["sxm","application/vnd.sun.xml.math"],["sxw","application/vnd.sun.xml.writer"],["t","text/troff"],["t3","application/x-t3vm-image"],["t38","image/t38"],["taglet","application/vnd.mynfc"],["tao","application/vnd.tao.intent-module-archive"],["tap","image/vnd.tencent.tap"],["tar","application/x-tar"],["tcap","application/vnd.3gpp2.tcap"],["tcl","application/x-tcl"],["td","application/urc-targetdesc+xml"],["teacher","application/vnd.smart.teacher"],["tei","application/tei+xml"],["teicorpus","application/tei+xml"],["tex","application/x-tex"],["texi","application/x-texinfo"],["texinfo","application/x-texinfo"],["text","text/plain"],["tfi","application/thraud+xml"],["tfm","application/x-tex-tfm"],["tfx","image/tiff-fx"],["tga","image/x-tga"],["tgz","application/x-tar"],["thmx","application/vnd.ms-officetheme"],["tif","image/tiff"],["tiff","image/tiff"],["tk","application/x-tcl"],["tmo","application/vnd.tmobile-livetv"],["toml","application/toml"],["torrent","application/x-bittorrent"],["tpl","application/vnd.groove-tool-template"],["tpt","application/vnd.trid.tpt"],["tr","text/troff"],["tra","application/vnd.trueapp"],["trig","application/trig"],["trm","application/x-msterminal"],["ts","video/mp2t"],["tsd","application/timestamped-data"],["tsv","text/tab-separated-values"],["ttc","font/collection"],["ttf","font/ttf"],["ttl","text/turtle"],["ttml","application/ttml+xml"],["twd","application/vnd.simtech-mindmapper"],["twds","application/vnd.simtech-mindmapper"],["txd","application/vnd.genomatix.tuxedo"],["txf","application/vnd.mobius.txf"],["txt","text/plain"],["u8dsn","message/global-delivery-status"],["u8hdr","message/global-headers"],["u8mdn","message/global-disposition-notification"],["u8msg","message/global"],["u32","application/x-authorware-bin"],["ubj","application/ubjson"],["udeb","application/x-debian-package"],["ufd","application/vnd.ufdl"],["ufdl","application/vnd.ufdl"],["ulx","application/x-glulx"],["umj","application/vnd.umajin"],["unityweb","application/vnd.unity"],["uoml","application/vnd.uoml+xml"],["uri","text/uri-list"],["uris","text/uri-list"],["urls","text/uri-list"],["usdz","model/vnd.usdz+zip"],["ustar","application/x-ustar"],["utz","application/vnd.uiq.theme"],["uu","text/x-uuencode"],["uva","audio/vnd.dece.audio"],["uvd","application/vnd.dece.data"],["uvf","application/vnd.dece.data"],["uvg","image/vnd.dece.graphic"],["uvh","video/vnd.dece.hd"],["uvi","image/vnd.dece.graphic"],["uvm","video/vnd.dece.mobile"],["uvp","video/vnd.dece.pd"],["uvs","video/vnd.dece.sd"],["uvt","application/vnd.dece.ttml+xml"],["uvu","video/vnd.uvvu.mp4"],["uvv","video/vnd.dece.video"],["uvva","audio/vnd.dece.audio"],["uvvd","application/vnd.dece.data"],["uvvf","application/vnd.dece.data"],["uvvg","image/vnd.dece.graphic"],["uvvh","video/vnd.dece.hd"],["uvvi","image/vnd.dece.graphic"],["uvvm","video/vnd.dece.mobile"],["uvvp","video/vnd.dece.pd"],["uvvs","video/vnd.dece.sd"],["uvvt","application/vnd.dece.ttml+xml"],["uvvu","video/vnd.uvvu.mp4"],["uvvv","video/vnd.dece.video"],["uvvx","application/vnd.dece.unspecified"],["uvvz","application/vnd.dece.zip"],["uvx","application/vnd.dece.unspecified"],["uvz","application/vnd.dece.zip"],["vbox","application/x-virtualbox-vbox"],["vbox-extpack","application/x-virtualbox-vbox-extpack"],["vcard","text/vcard"],["vcd","application/x-cdlink"],["vcf","text/x-vcard"],["vcg","application/vnd.groove-vcard"],["vcs","text/x-vcalendar"],["vcx","application/vnd.vcx"],["vdi","application/x-virtualbox-vdi"],["vds","model/vnd.sap.vds"],["vhd","application/x-virtualbox-vhd"],["vis","application/vnd.visionary"],["viv","video/vnd.vivo"],["vlc","application/videolan"],["vmdk","application/x-virtualbox-vmdk"],["vob","video/x-ms-vob"],["vor","application/vnd.stardivision.writer"],["vox","application/x-authorware-bin"],["vrml","model/vrml"],["vsd","application/vnd.visio"],["vsf","application/vnd.vsf"],["vss","application/vnd.visio"],["vst","application/vnd.visio"],["vsw","application/vnd.visio"],["vtf","image/vnd.valve.source.texture"],["vtt","text/vtt"],["vtu","model/vnd.vtu"],["vxml","application/voicexml+xml"],["w3d","application/x-director"],["wad","application/x-doom"],["wadl","application/vnd.sun.wadl+xml"],["war","application/java-archive"],["wasm","application/wasm"],["wav","audio/x-wav"],["wax","audio/x-ms-wax"],["wbmp","image/vnd.wap.wbmp"],["wbs","application/vnd.criticaltools.wbs+xml"],["wbxml","application/wbxml"],["wcm","application/vnd.ms-works"],["wdb","application/vnd.ms-works"],["wdp","image/vnd.ms-photo"],["weba","audio/webm"],["webapp","application/x-web-app-manifest+json"],["webm","video/webm"],["webmanifest","application/manifest+json"],["webp","image/webp"],["wg","application/vnd.pmi.widget"],["wgt","application/widget"],["wks","application/vnd.ms-works"],["wm","video/x-ms-wm"],["wma","audio/x-ms-wma"],["wmd","application/x-ms-wmd"],["wmf","image/wmf"],["wml","text/vnd.wap.wml"],["wmlc","application/wmlc"],["wmls","text/vnd.wap.wmlscript"],["wmlsc","application/vnd.wap.wmlscriptc"],["wmv","video/x-ms-wmv"],["wmx","video/x-ms-wmx"],["wmz","application/x-msmetafile"],["woff","font/woff"],["woff2","font/woff2"],["word","application/msword"],["wpd","application/vnd.wordperfect"],["wpl","application/vnd.ms-wpl"],["wps","application/vnd.ms-works"],["wqd","application/vnd.wqd"],["wri","application/x-mswrite"],["wrl","model/vrml"],["wsc","message/vnd.wfa.wsc"],["wsdl","application/wsdl+xml"],["wspolicy","application/wspolicy+xml"],["wtb","application/vnd.webturbo"],["wvx","video/x-ms-wvx"],["x3d","model/x3d+xml"],["x3db","model/x3d+fastinfoset"],["x3dbz","model/x3d+binary"],["x3dv","model/x3d-vrml"],["x3dvz","model/x3d+vrml"],["x3dz","model/x3d+xml"],["x32","application/x-authorware-bin"],["x_b","model/vnd.parasolid.transmit.binary"],["x_t","model/vnd.parasolid.transmit.text"],["xaml","application/xaml+xml"],["xap","application/x-silverlight-app"],["xar","application/vnd.xara"],["xav","application/xcap-att+xml"],["xbap","application/x-ms-xbap"],["xbd","application/vnd.fujixerox.docuworks.binder"],["xbm","image/x-xbitmap"],["xca","application/xcap-caps+xml"],["xcs","application/calendar+xml"],["xdf","application/xcap-diff+xml"],["xdm","application/vnd.syncml.dm+xml"],["xdp","application/vnd.adobe.xdp+xml"],["xdssc","application/dssc+xml"],["xdw","application/vnd.fujixerox.docuworks"],["xel","application/xcap-el+xml"],["xenc","application/xenc+xml"],["xer","application/patch-ops-error+xml"],["xfdf","application/vnd.adobe.xfdf"],["xfdl","application/vnd.xfdl"],["xht","application/xhtml+xml"],["xhtml","application/xhtml+xml"],["xhvml","application/xv+xml"],["xif","image/vnd.xiff"],["xl","application/excel"],["xla","application/vnd.ms-excel"],["xlam","application/vnd.ms-excel.addin.macroEnabled.12"],["xlc","application/vnd.ms-excel"],["xlf","application/xliff+xml"],["xlm","application/vnd.ms-excel"],["xls","application/vnd.ms-excel"],["xlsb","application/vnd.ms-excel.sheet.binary.macroEnabled.12"],["xlsm","application/vnd.ms-excel.sheet.macroEnabled.12"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xlt","application/vnd.ms-excel"],["xltm","application/vnd.ms-excel.template.macroEnabled.12"],["xltx","application/vnd.openxmlformats-officedocument.spreadsheetml.template"],["xlw","application/vnd.ms-excel"],["xm","audio/xm"],["xml","application/xml"],["xns","application/xcap-ns+xml"],["xo","application/vnd.olpc-sugar"],["xop","application/xop+xml"],["xpi","application/x-xpinstall"],["xpl","application/xproc+xml"],["xpm","image/x-xpixmap"],["xpr","application/vnd.is-xpr"],["xps","application/vnd.ms-xpsdocument"],["xpw","application/vnd.intercon.formnet"],["xpx","application/vnd.intercon.formnet"],["xsd","application/xml"],["xsl","application/xml"],["xslt","application/xslt+xml"],["xsm","application/vnd.syncml+xml"],["xspf","application/xspf+xml"],["xul","application/vnd.mozilla.xul+xml"],["xvm","application/xv+xml"],["xvml","application/xv+xml"],["xwd","image/x-xwindowdump"],["xyz","chemical/x-xyz"],["xz","application/x-xz"],["yaml","text/yaml"],["yang","application/yang"],["yin","application/yin+xml"],["yml","text/yaml"],["ymp","text/x-suse-ymp"],["z","application/x-compress"],["z1","application/x-zmachine"],["z2","application/x-zmachine"],["z3","application/x-zmachine"],["z4","application/x-zmachine"],["z5","application/x-zmachine"],["z6","application/x-zmachine"],["z7","application/x-zmachine"],["z8","application/x-zmachine"],["zaz","application/vnd.zzazz.deck+xml"],["zip","application/zip"],["zir","application/vnd.zul"],["zirz","application/vnd.zul"],["zmm","application/vnd.handheld-entertainment+xml"],["zsh","text/x-scriptzsh"]]);function gD(t,e,r){let n=G_n(t),{webkitRelativePath:o}=t,i=typeof e=="string"?e:typeof o=="string"&&o.length>0?o:`./${t.name}`;return typeof n.path!="string"&&k2t(n,"path",i),r!==void 0&&Object.defineProperty(n,"handle",{value:r,writable:!1,configurable:!1,enumerable:!0}),k2t(n,"relativePath",i),n}function G_n(t){let{name:e}=t;if(e&&e.lastIndexOf(".")!==-1&&!t.type){let n=e.split(".").pop().toLowerCase(),o=K_n.get(n);o&&Object.defineProperty(t,"type",{value:o,writable:!1,configurable:!1,enumerable:!0})}return t}function k2t(t,e,r){Object.defineProperty(t,e,{value:r,writable:!1,configurable:!1,enumerable:!0})}var J_n=[".DS_Store","Thumbs.db"];function ADe(t){return GI(this,void 0,void 0,function*(){return Fle(t)&&Y_n(t.dataTransfer)?evn(t.dataTransfer,t.type):Z_n(t)?X_n(t):Array.isArray(t)&&t.every(e=>"getFile"in e&&typeof e.getFile=="function")?Q_n(t):[]})}function Y_n(t){return Fle(t)}function Z_n(t){return Fle(t)&&Fle(t.target)}function Fle(t){return typeof t=="object"&&t!==null}function X_n(t){return TDe(t.target.files).map(e=>gD(e))}function Q_n(t){return GI(this,void 0,void 0,function*(){return(yield Promise.all(t.map(r=>r.getFile()))).map(r=>gD(r))})}function evn(t,e){return GI(this,void 0,void 0,function*(){if(t.items){let r=TDe(t.items).filter(o=>o.kind==="file");if(e!=="drop")return r;let n=yield Promise.all(r.map(tvn));return $2t(q2t(n))}return $2t(TDe(t.files).map(r=>gD(r)))})}function $2t(t){return t.filter(e=>J_n.indexOf(e.name)===-1)}function TDe(t){if(t===null)return[];let e=[];for(let r=0;r<t.length;r++){let n=t[r];e.push(n)}return e}function tvn(t){if(typeof t.webkitGetAsEntry!="function")return B2t(t);let e=t.webkitGetAsEntry();return e&&e.isDirectory?U2t(e):B2t(t,e)}function q2t(t){return t.reduce((e,r)=>[...e,...Array.isArray(r)?q2t(r):[r]],[])}function B2t(t,e){return GI(this,void 0,void 0,function*(){var r;if(globalThis.isSecureContext&&typeof t.getAsFileSystemHandle=="function"){let i=yield t.getAsFileSystemHandle();if(i===null)throw new Error(`${t} is not a File`);if(i!==void 0){let a=yield i.getFile();return a.handle=i,gD(a)}}let n=t.getAsFile();if(!n)throw new Error(`${t} is not a File`);return gD(n,(r=e?.fullPath)!==null&&r!==void 0?r:void 0)})}function rvn(t){return GI(this,void 0,void 0,function*(){return t.isDirectory?U2t(t):nvn(t)})}function U2t(t){let e=t.createReader();return new Promise((r,n)=>{let o=[];function i(){e.readEntries(a=>GI(this,void 0,void 0,function*(){if(a.length){let s=Promise.all(a.map(rvn));o.push(s),i()}else try{let s=yield Promise.all(o);r(s)}catch(s){n(s)}}),a=>{n(a)})}i()})}function nvn(t){return GI(this,void 0,void 0,function*(){return new Promise((e,r)=>{t.file(n=>{let o=gD(n,t.fullPath);e(o)},n=>{r(n)})})})}var kle=F(z2t());function H2t(t){return avn(t)||ivn(t)||Y2t(t)||ovn()}function ovn(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ivn(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function avn(t){if(Array.isArray(t))return MDe(t)}function V2t(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),r.push.apply(r,n)}return r}function W2t(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?V2t(Object(r),!0).forEach(function(n){J2t(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):V2t(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function J2t(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function aW(t,e){return lvn(t)||uvn(t,e)||Y2t(t,e)||svn()}function svn(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Y2t(t,e){if(t){if(typeof t=="string")return MDe(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return MDe(t,e)}}function MDe(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function uvn(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n=[],o=!0,i=!1,a,s;try{for(r=r.call(t);!(o=(a=r.next()).done)&&(n.push(a.value),!(e&&n.length===e));o=!0);}catch(u){i=!0,s=u}finally{try{!o&&r.return!=null&&r.return()}finally{if(i)throw s}}return n}}function lvn(t){if(Array.isArray(t))return t}var cvn=typeof kle.default=="function"?kle.default:kle.default.default,dvn="file-invalid-type",fvn="file-too-large",pvn="file-too-small",mvn="too-many-files";var hvn=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",r=e.split(","),n=r.length>1?"one of ".concat(r.join(", ")):r[0];return{code:dvn,message:"File type must be ".concat(n)}},K2t=function(e){return{code:fvn,message:"File is larger than ".concat(e," ").concat(e===1?"byte":"bytes")}},G2t=function(e){return{code:pvn,message:"File is smaller than ".concat(e," ").concat(e===1?"byte":"bytes")}},Z2t={code:mvn,message:"Too many files"};function RDe(t,e){var r=t.type==="application/x-moz-file"||cvn(t,e);return[r,r?null:hvn(e)]}function jDe(t,e,r){if(yD(t.size))if(yD(e)&&yD(r)){if(t.size>r)return[!1,K2t(r)];if(t.size<e)return[!1,G2t(e)]}else{if(yD(e)&&t.size<e)return[!1,G2t(e)];if(yD(r)&&t.size>r)return[!1,K2t(r)]}return[!0,null]}function yD(t){return t!=null}function X2t(t){var e=t.files,r=t.accept,n=t.minSize,o=t.maxSize,i=t.multiple,a=t.maxFiles,s=t.validator;return!i&&e.length>1||i&&a>=1&&e.length>a?!1:e.every(function(u){var l=RDe(u,r),c=aW(l,1),d=c[0],f=jDe(u,n,o),p=aW(f,1),m=p[0],h=s?s(u):null;return d&&m&&!h})}function sW(t){return typeof t.isPropagationStopped=="function"?t.isPropagationStopped():typeof t.cancelBubble<"u"?t.cancelBubble:!1}function uW(t){return t.dataTransfer?Array.prototype.some.call(t.dataTransfer.types,function(e){return e==="Files"||e==="application/x-moz-file"}):!!t.target&&!!t.target.files}function NDe(t){t.preventDefault()}function gvn(t){return t.indexOf("MSIE")!==-1||t.indexOf("Trident/")!==-1}function yvn(t){return t.indexOf("Edge/")!==-1}function Q2t(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return gvn(t)||yvn(t)}function ab(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return function(n){for(var o=arguments.length,i=new Array(o>1?o-1:0),a=1;a<o;a++)i[a-1]=arguments[a];return e.some(function(s){return!sW(n)&&s&&s.apply(void 0,[n].concat(i)),sW(n)})}}function e4t(){return"showOpenFilePicker"in window}function t4t(t){if(yD(t)){var e=Object.entries(t).filter(function(r){var n=aW(r,2),o=n[0],i=n[1],a=!0;return i4t(o)||(console.warn('Skipped "'.concat(o,'" because it is not a valid MIME type. Check https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types for a list of valid MIME types.')),a=!1),(!Array.isArray(i)||!i.every(a4t))&&(console.warn('Skipped "'.concat(o,'" because an invalid file extension was provided.')),a=!1),a}).reduce(function(r,n){var o=aW(n,2),i=o[0],a=o[1];return W2t(W2t({},r),{},J2t({},i,a))},{});return[{description:"Files",accept:e}]}return t}function r4t(t){if(yD(t))return Object.entries(t).reduce(function(e,r){var n=aW(r,2),o=n[0],i=n[1];return[].concat(H2t(e),[o],H2t(i))},[]).filter(function(e){return i4t(e)||a4t(e)}).join(",")}function n4t(t){return t instanceof DOMException&&(t.name==="AbortError"||t.code===t.ABORT_ERR)}function o4t(t){return t instanceof DOMException&&(t.name==="SecurityError"||t.code===t.SECURITY_ERR)}function i4t(t){return t==="audio/*"||t==="video/*"||t==="image/*"||t==="text/*"||t==="application/*"||/\w+\/[-+.\w]+/g.test(t)}function a4t(t){return/^.*\.[\w]+$/.test(t)}var bvn=["children"],_vn=["open"],vvn=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],wvn=["refKey","onChange","onClick"];function Svn(t){return Ovn(t)||Cvn(t)||l4t(t)||xvn()}function xvn(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Cvn(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Ovn(t){if(Array.isArray(t))return LDe(t)}function DDe(t,e){return Tvn(t)||Evn(t,e)||l4t(t,e)||Pvn()}function Pvn(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function l4t(t,e){if(t){if(typeof t=="string")return LDe(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return LDe(t,e)}}function LDe(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Evn(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n=[],o=!0,i=!1,a,s;try{for(r=r.call(t);!(o=(a=r.next()).done)&&(n.push(a.value),!(e&&n.length===e));o=!0);}catch(u){i=!0,s=u}finally{try{!o&&r.return!=null&&r.return()}finally{if(i)throw s}}return n}}function Tvn(t){if(Array.isArray(t))return t}function s4t(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),r.push.apply(r,n)}return r}function Ga(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?s4t(Object(r),!0).forEach(function(n){FDe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):s4t(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function FDe(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function $le(t,e){if(t==null)return{};var r=Avn(t,e),n,o;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(o=0;o<i.length;o++)n=i[o],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Avn(t,e){if(t==null)return{};var r={},n=Object.keys(t),o,i;for(i=0;i<n.length;i++)o=n[i],!(e.indexOf(o)>=0)&&(r[o]=t[o]);return r}var $De=(0,yn.forwardRef)(function(t,e){var r=t.children,n=$le(t,bvn),o=BDe(n),i=o.open,a=$le(o,_vn);return(0,yn.useImperativeHandle)(e,function(){return{open:i}},[i]),yn.default.createElement(yn.Fragment,null,r(Ga(Ga({},a),{},{open:i})))});$De.displayName="Dropzone";var c4t={disabled:!1,getFilesFromEvent:ADe,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!1,autoFocus:!1};$De.defaultProps=c4t;$De.propTypes={children:Ci.default.func,accept:Ci.default.objectOf(Ci.default.arrayOf(Ci.default.string)),multiple:Ci.default.bool,preventDropOnDocument:Ci.default.bool,noClick:Ci.default.bool,noKeyboard:Ci.default.bool,noDrag:Ci.default.bool,noDragEventsBubbling:Ci.default.bool,minSize:Ci.default.number,maxSize:Ci.default.number,maxFiles:Ci.default.number,disabled:Ci.default.bool,getFilesFromEvent:Ci.default.func,onFileDialogCancel:Ci.default.func,onFileDialogOpen:Ci.default.func,useFsAccessApi:Ci.default.bool,autoFocus:Ci.default.bool,onDragEnter:Ci.default.func,onDragLeave:Ci.default.func,onDragOver:Ci.default.func,onDrop:Ci.default.func,onDropAccepted:Ci.default.func,onDropRejected:Ci.default.func,onError:Ci.default.func,validator:Ci.default.func};var kDe={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,acceptedFiles:[],fileRejections:[]};function BDe(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=Ga(Ga({},c4t),t),r=e.accept,n=e.disabled,o=e.getFilesFromEvent,i=e.maxSize,a=e.minSize,s=e.multiple,u=e.maxFiles,l=e.onDragEnter,c=e.onDragLeave,d=e.onDragOver,f=e.onDrop,p=e.onDropAccepted,m=e.onDropRejected,h=e.onFileDialogCancel,b=e.onFileDialogOpen,g=e.useFsAccessApi,y=e.autoFocus,w=e.preventDropOnDocument,S=e.noClick,C=e.noKeyboard,P=e.noDrag,E=e.noDragEventsBubbling,A=e.onError,I=e.validator,R=(0,yn.useMemo)(function(){return r4t(r)},[r]),j=(0,yn.useMemo)(function(){return t4t(r)},[r]),N=(0,yn.useMemo)(function(){return typeof b=="function"?b:u4t},[b]),$=(0,yn.useMemo)(function(){return typeof h=="function"?h:u4t},[h]),k=(0,yn.useRef)(null),H=(0,yn.useRef)(null),V=(0,yn.useReducer)(Ivn,kDe),Q=DDe(V,2),G=Q[0],D=Q[1],B=G.isFocused,q=G.isFileDialogActive,K=(0,yn.useRef)(typeof window<"u"&&window.isSecureContext&&g&&e4t()),U=function(){!K.current&&q&&setTimeout(function(){if(H.current){var se=H.current.files;se.length||(D({type:"closeDialog"}),$())}},300)};(0,yn.useEffect)(function(){return window.addEventListener("focus",U,!1),function(){window.removeEventListener("focus",U,!1)}},[H,q,$,K]);var te=(0,yn.useRef)([]),z=function(se){k.current&&k.current.contains(se.target)||(se.preventDefault(),te.current=[])};(0,yn.useEffect)(function(){return w&&(document.addEventListener("dragover",NDe,!1),document.addEventListener("drop",z,!1)),function(){w&&(document.removeEventListener("dragover",NDe),document.removeEventListener("drop",z))}},[k,w]),(0,yn.useEffect)(function(){return!n&&y&&k.current&&k.current.focus(),function(){}},[k,y,n]);var W=(0,yn.useCallback)(function(oe){A?A(oe):console.error(oe)},[A]),Y=(0,yn.useCallback)(function(oe){oe.preventDefault(),oe.persist(),ee(oe),te.current=[].concat(Svn(te.current),[oe.target]),uW(oe)&&Promise.resolve(o(oe)).then(function(se){if(!(sW(oe)&&!E)){var le=se.length,Oe=le>0&&X2t({files:se,accept:R,minSize:a,maxSize:i,multiple:s,maxFiles:u,validator:I}),Je=le>0&&!Oe;D({isDragAccept:Oe,isDragReject:Je,isDragActive:!0,type:"setDraggedFiles"}),l&&l(oe)}}).catch(function(se){return W(se)})},[o,l,W,E,R,a,i,s,u,I]),ae=(0,yn.useCallback)(function(oe){oe.preventDefault(),oe.persist(),ee(oe);var se=uW(oe);if(se&&oe.dataTransfer)try{oe.dataTransfer.dropEffect="copy"}catch{}return se&&d&&d(oe),!1},[d,E]),we=(0,yn.useCallback)(function(oe){oe.preventDefault(),oe.persist(),ee(oe);var se=te.current.filter(function(Oe){return k.current&&k.current.contains(Oe)}),le=se.indexOf(oe.target);le!==-1&&se.splice(le,1),te.current=se,!(se.length>0)&&(D({type:"setDraggedFiles",isDragActive:!1,isDragAccept:!1,isDragReject:!1}),uW(oe)&&c&&c(oe))},[k,c,E]),de=(0,yn.useCallback)(function(oe,se){var le=[],Oe=[];oe.forEach(function(Je){var nr=RDe(Je,R),Ji=DDe(nr,2),Ni=Ji[0],cc=Ji[1],cd=jDe(Je,a,i),Di=DDe(cd,2),Jf=Di[0],rf=Di[1],nf=I?I(Je):null;if(Ni&&Jf&&!nf)le.push(Je);else{var _n=[cc,rf];nf&&(_n=_n.concat(nf)),Oe.push({file:Je,errors:_n.filter(function(of){return of})})}}),(!s&&le.length>1||s&&u>=1&&le.length>u)&&(le.forEach(function(Je){Oe.push({file:Je,errors:[Z2t]})}),le.splice(0)),D({acceptedFiles:le,fileRejections:Oe,isDragReject:Oe.length>0,type:"setFiles"}),f&&f(le,Oe,se),Oe.length>0&&m&&m(Oe,se),le.length>0&&p&&p(le,se)},[D,s,R,a,i,u,f,p,m,I]),Ue=(0,yn.useCallback)(function(oe){oe.preventDefault(),oe.persist(),ee(oe),te.current=[],uW(oe)&&Promise.resolve(o(oe)).then(function(se){sW(oe)&&!E||de(se,oe)}).catch(function(se){return W(se)}),D({type:"reset"})},[o,de,W,E]),Ve=(0,yn.useCallback)(function(){if(K.current){D({type:"openDialog"}),N();var oe={multiple:s,types:j};window.showOpenFilePicker(oe).then(function(se){return o(se)}).then(function(se){de(se,null),D({type:"closeDialog"})}).catch(function(se){n4t(se)?($(se),D({type:"closeDialog"})):o4t(se)?(K.current=!1,H.current?(H.current.value=null,H.current.click()):W(new Error("Cannot open the file picker because the https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API is not supported and no <input> was provided."))):W(se)});return}H.current&&(D({type:"openDialog"}),N(),H.current.value=null,H.current.click())},[D,N,$,g,de,W,j,s]),rt=(0,yn.useCallback)(function(oe){!k.current||!k.current.isEqualNode(oe.target)||(oe.key===" "||oe.key==="Enter"||oe.keyCode===32||oe.keyCode===13)&&(oe.preventDefault(),Ve())},[k,Ve]),lr=(0,yn.useCallback)(function(){D({type:"focus"})},[]),bn=(0,yn.useCallback)(function(){D({type:"blur"})},[]),Le=(0,yn.useCallback)(function(){S||(Q2t()?setTimeout(Ve,0):Ve())},[S,Ve]),gt=function(se){return n?null:se},vt=function(se){return C?null:gt(se)},pt=function(se){return P?null:gt(se)},ee=function(se){E&&se.stopPropagation()},et=(0,yn.useMemo)(function(){return function(){var oe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},se=oe.refKey,le=se===void 0?"ref":se,Oe=oe.role,Je=oe.onKeyDown,nr=oe.onFocus,Ji=oe.onBlur,Ni=oe.onClick,cc=oe.onDragEnter,cd=oe.onDragOver,Di=oe.onDragLeave,Jf=oe.onDrop,rf=$le(oe,vvn);return Ga(Ga(FDe({onKeyDown:vt(ab(Je,rt)),onFocus:vt(ab(nr,lr)),onBlur:vt(ab(Ji,bn)),onClick:gt(ab(Ni,Le)),onDragEnter:pt(ab(cc,Y)),onDragOver:pt(ab(cd,ae)),onDragLeave:pt(ab(Di,we)),onDrop:pt(ab(Jf,Ue)),role:typeof Oe=="string"&&Oe!==""?Oe:"presentation"},le,k),!n&&!C?{tabIndex:0}:{}),rf)}},[k,rt,lr,bn,Le,Y,ae,we,Ue,C,P,n]),Re=(0,yn.useCallback)(function(oe){oe.stopPropagation()},[]),Pe=(0,yn.useMemo)(function(){return function(){var oe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},se=oe.refKey,le=se===void 0?"ref":se,Oe=oe.onChange,Je=oe.onClick,nr=$le(oe,wvn),Ji=FDe({accept:R,multiple:s,type:"file",style:{border:0,clip:"rect(0, 0, 0, 0)",clipPath:"inset(50%)",height:"1px",margin:"0 -1px -1px 0",overflow:"hidden",padding:0,position:"absolute",width:"1px",whiteSpace:"nowrap"},onChange:gt(ab(Oe,Ue)),onClick:gt(ab(Je,Re)),tabIndex:-1},le,H);return Ga(Ga({},Ji),nr)}},[H,r,s,Ue,n]);return Ga(Ga({},G),{},{isFocused:B&&!n,getRootProps:et,getInputProps:Pe,rootRef:k,inputRef:H,open:gt(Ve)})}function Ivn(t,e){switch(e.type){case"focus":return Ga(Ga({},t),{},{isFocused:!0});case"blur":return Ga(Ga({},t),{},{isFocused:!1});case"openDialog":return Ga(Ga({},kDe),{},{isFileDialogActive:!0});case"closeDialog":return Ga(Ga({},t),{},{isFileDialogActive:!1});case"setDraggedFiles":return Ga(Ga({},t),{},{isDragActive:e.isDragActive,isDragAccept:e.isDragAccept,isDragReject:e.isDragReject});case"setFiles":return Ga(Ga({},t),{},{acceptedFiles:e.acceptedFiles,fileRejections:e.fileRejections,isDragReject:e.isDragReject});case"reset":return Ga({},kDe);default:return t}}function u4t(){}var p4t=F(X());xd();var Vo=F(X());var Ble=F(X());var Mvn=yF("tw-inline-flex tw-items-center tw-rounded-md tw-px-2.5 tw-py-0.5 tw-text-ui-smaller tw-text-normal tw-transition-colors focus:tw-outline-none",{variants:{variant:{default:"tw-bg-primary-alt tw-shadow",secondary:"tw-bg-secondary-alt",destructive:"tw-bg-modifier-error tw-shadow",outline:"tw-border tw-border-solid tw-border-border"}},defaultVariants:{variant:"default"}}),Zp=Ble.forwardRef(({className:t,variant:e,...r},n)=>Ble.createElement("div",{ref:n,className:_e(Mvn({variant:e}),t),...r}));Zp.displayName="Badge";function d4t({note:t,isActive:e=!1,onRemoveContext:r}){return Vo.default.createElement(Zp,{className:"tw-items-center tw-py-0 tw-pl-2 tw-pr-0.5 tw-text-xs"},Vo.default.createElement("div",{className:"tw-flex tw-items-center tw-gap-1"},Vo.default.createElement("span",{className:"tw-max-w-40 tw-truncate"},t.basename),e&&Vo.default.createElement("span",{className:"tw-text-xs tw-text-faint"},"Current"),t.extension==="pdf"&&Vo.default.createElement("span",{className:"tw-text-xs tw-text-faint"},"pdf")),Vo.default.createElement(ge,{variant:"ghost2",size:"fit",onClick:()=>r(t.path),"aria-label":"Remove from context"},Vo.default.createElement($i,{className:"tw-size-4"})))}function Rvn({url:t,onRemoveUrl:e}){return Vo.default.createElement(Zp,{className:"tw-items-center tw-py-0 tw-pl-2 tw-pr-0.5 tw-text-xs"},Vo.default.createElement("div",{className:"tw-flex tw-items-center tw-gap-1"},Vo.default.createElement("span",{className:"tw-max-w-40 tw-truncate"},t),Vo.default.createElement("span",{className:"tw-text-xs tw-text-faint"},"Link")),Vo.default.createElement(ge,{variant:"ghost2",size:"fit",onClick:()=>e(t),"aria-label":"Remove from context"},Vo.default.createElement($i,{className:"tw-size-4"})))}function jvn({selectedText:t,onRemoveSelectedText:e}){let r=t.startLine===t.endLine?`L${t.startLine}`:`L${t.startLine}-${t.endLine}`;return Vo.default.createElement(Zp,{className:"tw-items-center tw-py-0 tw-pl-2 tw-pr-0.5 tw-text-xs"},Vo.default.createElement("div",{className:"tw-flex tw-items-center tw-gap-1"},Vo.default.createElement("span",{className:"tw-max-w-40 tw-truncate"},t.noteTitle),Vo.default.createElement("span",{className:"tw-text-xs tw-text-faint"},r)),Vo.default.createElement(ge,{variant:"ghost2",size:"fit",onClick:()=>e(t.id),"aria-label":"Remove from context"},Vo.default.createElement($i,{className:"tw-size-4"})))}var f4t=({activeNote:t,contextNotes:e,contextUrls:r,selectedTextContexts:n=[],onAddContext:o,onRemoveContext:i,onRemoveUrl:a,onRemoveSelectedText:s})=>{let u=Vo.default.useMemo(()=>{let d=new Map(e.map(f=>[f.path,f]));return Array.from(d.values()).filter(f=>f.wasAddedManually?!0:!(t&&f.path===t.path))},[e,t]),l=Vo.default.useMemo(()=>Array.from(new Set(r)),[r]),c=u.length>0||l.length>0||n.length>0||!!t;return Vo.default.createElement("div",{className:"tw-flex tw-w-full tw-items-center tw-gap-1"},Vo.default.createElement("div",{className:"tw-flex tw-h-full tw-items-start"},Vo.default.createElement(ge,{onClick:o,variant:"ghost2",size:"fit",className:"tw-ml-1 tw-rounded-sm tw-border tw-border-solid tw-border-border"},Vo.default.createElement(ym,{className:"tw-size-4"}),!c&&Vo.default.createElement("span",{className:"tw-pr-1 tw-text-xs tw-leading-4"},"Add context"))),Vo.default.createElement("div",{className:"tw-flex tw-flex-1 tw-flex-wrap tw-gap-1"},t&&Vo.default.createElement(d4t,{key:t.path,note:t,isActive:!0,onRemoveContext:i}),u.map(d=>Vo.default.createElement(d4t,{key:d.path,note:d,isActive:!1,onRemoveContext:i})),l.map(d=>Vo.default.createElement(Rvn,{key:d,url:d,onRemoveUrl:a})),n.map(d=>Vo.default.createElement(jvn,{key:d.id,selectedText:d,onRemoveSelectedText:s||(()=>{})}))))};var Nvn=({app:t,excludeNotePaths:e,contextNotes:r,setContextNotes:n,includeActiveNote:o,setIncludeActiveNote:i,activeNote:a,contextUrls:s,onRemoveUrl:u,selectedTextContexts:l,onRemoveSelectedText:c})=>{let[d]=Xg(),f=()=>{new KI({app:t,onNoteSelect:m=>{a&&m.path===a.path?(i(!0),n(h=>h.filter(b=>b.path!==m.path))):n(h=>[...h,Object.assign(m,{wasAddedManually:!0})])},excludeNotePaths:e}).open()},p=m=>{let h=r.find(g=>g.path===m);h&&h.wasAddedManually?n(g=>g.filter(y=>y.path!==m)):(i(!1),n(g=>g.filter(y=>y.path!==m)))};return d!=="copilot_plus"&&d!=="project"?null:p4t.default.createElement(f4t,{activeNote:o?a:null,contextNotes:r,onAddContext:f,onRemoveContext:p,contextUrls:s,onRemoveUrl:u,selectedTextContexts:l,onRemoveSelectedText:c})},m4t=Nvn;var h4t=(0,at.forwardRef)(({inputMessage:t,setInputMessage:e,handleSendMessage:r,isGenerating:n,onStopGenerating:o,app:i,contextNotes:a,setContextNotes:s,includeActiveNote:u,setIncludeActiveNote:l,mention:c,selectedImages:d,onAddImage:f,setSelectedImages:p,disableModelSwitch:m,selectedTextContexts:h,onRemoveSelectedText:b},g)=>{let[y,w]=(0,at.useState)(!1),[S,C]=(0,at.useState)([]),P=(0,at.useRef)(null),E=(0,at.useRef)(null),[A,I]=$L(),[R,j]=(0,at.useState)(null),[N]=Xg(),[$]=X4e(),[k,H]=(0,at.useState)(i.workspace.getActiveFile()),[V,Q]=(0,at.useState)(null),G=Tn(),D=N==="copilot_plus"||N==="project",[B,q]=(0,at.useState)(0),K=["Loading the project context...","Processing context files...","If you have many files in context, this can take a while..."];(0,at.useImperativeHandle)(g,()=>({focus:()=>{P.current?.focus()}})),(0,at.useEffect)(()=>{if(N==="project"){Q(yc());let Le=BL(gt=>{Q(gt)});return()=>{Le()}}else Q(null)},[N]),(0,at.useEffect)(()=>{if(!$)return;let Le=setInterval(()=>{q(gt=>(gt+1)%K.length)},3e3);return()=>clearInterval(Le)},[$,K.length]);let U=()=>V&&N==="project"&&V.projectModelKey?V.projectModelKey:A,te=Le=>{if(!D){r();return}r({toolCalls:Le?["@vault"]:[],contextNotes:a,urls:S})},z=async Le=>{let gt=Le.target.value,vt=Le.target.selectionStart,pt=vt>0&&gt[vt-1]==="/";e(gt),W();let et=c.extractAllUrls(gt).filter(Re=>!S.includes(Re));et.length>0&&C(Re=>Array.from(new Set([...Re,...et]))),vt>=2&&gt.slice(vt-2,vt)==="[["?Y(vt):pt?ae(vt,gt):gt.slice(-1)==="@"&&D&&we()},W=()=>{P.current&&(P.current.style.height="auto",P.current.style.height=`${P.current.scrollHeight}px`)};(0,at.useEffect)(()=>{W()},[t]);let Y=Le=>{(async()=>{let vt=PU.getInstance();new KI({app:i,onNoteSelect:async pt=>{let ee=t.slice(0,Le-2),et=t.slice(Le-1),Pe=Nme(pt.basename,i.vault)?pt.basename:pt.path,oe=`${ee}[[${Pe}]]${et}`;e(oe);let se=i.workspace.getActiveFile();pt&&await vt.addNoteToContext(pt,i.vault,a,se,s,l),setTimeout(()=>{if(P.current){let le=Le+Pe.length+2;P.current.setSelectionRange(le,le)}},0)},excludeNotePaths:bn}).open()})()},ae=(Le,gt)=>{let vt=Yp.getInstance(),pt=Px(),ee=pBt(pt.filter(oe=>oe.showInSlashMenu)),et=ee.map(oe=>oe.title),Re=Le-1;new oW(i,et,oe=>{let se=ee.find(le=>le.title===oe);if(se){vt.recordUsage(se);let le="",Oe="";Re>=0&&gt[Re]==="/"&&(le=gt.slice(0,Re),Oe=gt.slice(Re+1));let Je=le+se.content+Oe;e(Je),setTimeout(()=>{if(P.current){let nr=le.length+se.content.length;P.current.setSelectionRange(nr,nr),P.current.focus()}},0)}}).open()},we=()=>{let Le=n6.map(gt=>({title:gt,description:hEt(gt)}));new oW(i,Le.map(gt=>gt.title),gt=>{e(t+gt+" ")},Le.map(gt=>gt.description)).open()},de=Le=>{if(!Le.nativeEvent.isComposing){if(Le.key==="Enter"&&Le.shiftKey&&(JI.Platform.isMacOS?Le.metaKey:Le.ctrlKey)){Le.preventDefault(),Le.stopPropagation(),te(!0);return}if(Le.key==="Enter"){if(!(!Le.shiftKey&&!JI.Platform.isMobile||Le.shiftKey&&JI.Platform.isMobile))return;Le.preventDefault(),te(!1)}}},Ue=(0,at.useCallback)(async Le=>{let gt=Le.clipboardData?.items;if(!gt||!D)return;let vt=Array.from(gt).filter(pt=>pt.type.indexOf("image")!==-1);if(vt.length>0){Le.preventDefault();let ee=(await Promise.all(vt.map(et=>{let Re=et.getAsFile();return Re||null}))).filter(et=>et!==null);ee.length>0&&f(ee)}},[f,D]);(0,at.useEffect)(()=>{let Le=new Set(fC(t,i.vault)),gt=c.extractAllUrls(t);s(vt=>vt.filter(pt=>{if(pt.wasAddedManually===!0)return!0;let et=pt.wasAddedViaReference===!0;return pt.path===k?.path?et?Le.has(pt):u:et?Le.has(pt):!0})),C(vt=>vt.filter(pt=>gt.includes(pt)))},[t,u,k,c,s,i.vault]),(0,at.useEffect)(()=>{let Le,gt=()=>{clearTimeout(Le),Le=setTimeout(()=>{let pt=i.workspace.getActiveFile();H(pt)},100)},vt=i.workspace.on("active-leaf-change",gt);return()=>{clearTimeout(Le),i.workspace.offref(vt)}},[i.workspace]);let{getRootProps:Ve,getInputProps:rt,isDragActive:lr}=BDe({accept:{"image/*":[".png",".gif",".jpeg",".jpg",".webp"]},onDrop:Le=>{f(Le)},noClick:!0,noDragEventsBubbling:!0}),bn=(0,at.useMemo)(()=>[...a.map(Le=>Le.path),...u&&k?[k.path]:[]].filter(Le=>Le!=null),[a,u,k]);return at.default.createElement("div",{className:"tw-flex tw-w-full tw-flex-col tw-gap-0.5 tw-rounded-md tw-border tw-border-solid tw-border-border tw-px-1 tw-pb-1 tw-pt-2 tw-@container/chat-input",ref:E},at.default.createElement(m4t,{app:i,excludeNotePaths:bn,contextNotes:a,setContextNotes:s,includeActiveNote:u,setIncludeActiveNote:l,activeNote:k,contextUrls:S,onRemoveUrl:Le=>C(gt=>gt.filter(vt=>vt!==Le)),selectedTextContexts:h,onRemoveSelectedText:b}),d.length>0&&at.default.createElement("div",{className:"selected-images"},d.map((Le,gt)=>at.default.createElement("div",{key:gt,className:"image-preview-container"},at.default.createElement("img",{src:URL.createObjectURL(Le),alt:Le.name,className:"selected-image-preview"}),at.default.createElement("button",{className:"remove-image-button",onClick:()=>p(vt=>vt.filter((pt,ee)=>ee!==gt)),title:"Remove image"},at.default.createElement($i,{className:"tw-size-4"}))))),at.default.createElement("div",{className:"tw-relative",...D?Ve():{}},$&&at.default.createElement("div",{className:"tw-absolute tw-inset-0 tw-z-modal tw-flex tw-items-center tw-justify-center tw-bg-primary tw-opacity-80 tw-backdrop-blur-sm"},at.default.createElement("div",{className:"tw-flex tw-items-center tw-gap-2"},at.default.createElement($l,{className:"tw-size-4 tw-animate-spin"}),at.default.createElement("span",{className:"tw-text-sm"},K[B]))),at.default.createElement("textarea",{ref:P,className:"tw-max-h-40 tw-min-h-[60px] tw-w-full tw-resize-none tw-overflow-y-auto tw-rounded-md tw-border-none tw-bg-transparent tw-px-2 tw-text-sm tw-text-normal focus-visible:tw-ring-0",placeholder:"Ask anything. [[ for notes. / for custom prompts. "+(D?"@ for tools.":""),value:t,onChange:z,onKeyDown:de,onPaste:Ue,disabled:$}),D&&at.default.createElement(at.default.Fragment,null,at.default.createElement("input",{...rt()}),lr&&at.default.createElement("div",{className:"tw-absolute tw-inset-0 tw-flex tw-items-center tw-justify-center tw-rounded-md tw-border tw-border-dashed tw-bg-primary"},at.default.createElement("span",null,"Drop images here...")))),at.default.createElement("div",{className:"tw-flex tw-h-6 tw-justify-between tw-gap-1 tw-px-1"},n?at.default.createElement("div",{className:"tw-flex tw-items-center tw-gap-1 tw-px-1 tw-text-sm tw-text-faint"},at.default.createElement($l,{className:"tw-size-3 tw-animate-spin"}),at.default.createElement("span",null,"Generating...")):at.default.createElement(pD,{open:y,onOpenChange:w},at.default.createElement(mD,{asChild:!0},at.default.createElement(ge,{variant:"ghost2",size:"fit",disabled:m},R?at.default.createElement("span",{className:"tw-text-error"},"Model Load Failed"):G.activeModels.find(Le=>Le.enabled&&Fr(Le)===U())?at.default.createElement(EDe,{model:G.activeModels.find(Le=>Le.enabled&&Fr(Le)===U()),iconSize:8}):"Select Model",!m&&at.default.createElement(ki,{className:"tw-mt-0.5 tw-size-5"}))),at.default.createElement(nb,{align:"start"},!m&&G.activeModels.filter(Le=>Le.enabled).map(Le=>{let{hasApiKey:gt,errorNotice:vt}=RL(Le,G);return at.default.createElement(hi,{key:Fr(Le),onSelect:async pt=>{if(!gt&&vt){pt.preventDefault(),new JI.Notice(vt);return}try{j(null),I(Fr(Le))}catch(ee){let et="Model switch failed: "+Go(ee);j(et),new JI.Notice(et);let Re=G.activeModels.find(Pe=>Pe.enabled&&Fr(Pe)===A);Re&&I(Fr(Re))}},className:gt?"":"tw-cursor-not-allowed tw-opacity-50"},at.default.createElement(EDe,{model:Le,iconSize:12}))}))),at.default.createElement("div",{className:"tw-flex tw-items-center tw-gap-1"},n?at.default.createElement(ge,{variant:"ghost2",size:"fit",className:"tw-text-muted",onClick:()=>o()},at.default.createElement(GE,{className:"tw-size-4"}),"Stop"):at.default.createElement(at.default.Fragment,null,D&&at.default.createElement(ge,{variant:"ghost2",size:"fit",onClick:()=>{new Nle(i,f).open()}},at.default.createElement(k4,{className:"tw-size-4"})),at.default.createElement(ge,{variant:"ghost2",size:"fit",className:"tw-text-muted",onClick:()=>te(!1)},at.default.createElement(gm,{className:"!tw-size-3"}),at.default.createElement("span",null,"chat")),N==="copilot_plus"&&at.default.createElement(ge,{variant:"ghost2",size:"fit",className:"tw-hidden tw-text-muted @xs/chat-input:tw-inline-flex",onClick:()=>te(!0)},at.default.createElement("div",{className:"tw-flex tw-items-center tw-gap-1"},JI.Platform.isMacOS?at.default.createElement("div",{className:"tw-flex tw-items-center"},at.default.createElement(Hb,{className:"!tw-size-3"}),at.default.createElement(TC,{className:"!tw-size-3"}),at.default.createElement(gm,{className:"!tw-size-3"})):at.default.createElement("div",{className:"tw-flex tw-items-center"},at.default.createElement("span",null,"Ctrl"),at.default.createElement(TC,{className:"tw-size-4"}),at.default.createElement(gm,{className:"!tw-size-3"})),at.default.createElement("span",null,"vault")))))))});h4t.displayName="ChatInput";var g4t=h4t;kr();var y4t=require("obsidian"),_r=F(X()),b4t=({message:t,onCopy:e,isCopied:r,onInsertIntoEditor:n,onRegenerate:o,onEdit:i,onDelete:a,onShowSources:s,hasSources:u})=>_r.default.createElement("div",{className:_e("tw-flex tw-gap-1",{"group-hover:opacity-100 opacity-0":!y4t.Platform.isMobile})},t.sender===_i?_r.default.createElement(_r.default.Fragment,null,_r.default.createElement(Mt,null,_r.default.createElement(Rt,{asChild:!0},_r.default.createElement(ge,{variant:"ghost2",size:"fit",onClick:e,title:"Copy"},r?_r.default.createElement(kl,{className:"tw-size-4"}):_r.default.createElement(uy,{className:"tw-size-4"}))),_r.default.createElement(It,null,"Copy")),_r.default.createElement(Mt,null,_r.default.createElement(Rt,{asChild:!0},_r.default.createElement(ge,{onClick:i,variant:"ghost2",size:"fit",title:"Edit"},_r.default.createElement(vp,{className:"tw-size-4"}))),_r.default.createElement(It,null,"Edit")),_r.default.createElement(Mt,null,_r.default.createElement(Rt,{asChild:!0},_r.default.createElement(ge,{onClick:a,variant:"ghost2",size:"fit",title:"Delete"},_r.default.createElement(bm,{className:"tw-size-4"}))),_r.default.createElement(It,null,"Delete"))):_r.default.createElement(_r.default.Fragment,null,u&&_r.default.createElement(Mt,null,_r.default.createElement(Rt,{asChild:!0},_r.default.createElement(ge,{onClick:s,variant:"ghost2",size:"fit",title:"Show Sources"},_r.default.createElement(RR,{className:"tw-size-4"}))),_r.default.createElement(It,null,"Show Sources")),_r.default.createElement(Mt,null,_r.default.createElement(Rt,{asChild:!0},_r.default.createElement(ge,{onClick:n,variant:"ghost2",size:"fit",title:"Insert / Replace at cursor"},_r.default.createElement(z4,{className:"tw-size-4"}))),_r.default.createElement(It,null,"Insert / Replace at cursor")),_r.default.createElement(Mt,null,_r.default.createElement(Rt,{asChild:!0},_r.default.createElement(ge,{variant:"ghost2",size:"fit",onClick:e,title:"Copy"},r?_r.default.createElement(kl,{className:"tw-size-4"}):_r.default.createElement(uy,{className:"tw-size-4"}))),_r.default.createElement(It,null,"Copy")),_r.default.createElement(Mt,null,_r.default.createElement(Rt,{asChild:!0},_r.default.createElement(ge,{onClick:o,variant:"ghost2",size:"fit",title:"Regenerate"},_r.default.createElement(U4,{className:"tw-size-4"}))),_r.default.createElement(It,null,"Regenerate")),_r.default.createElement(Mt,null,_r.default.createElement(Rt,{asChild:!0},_r.default.createElement(ge,{onClick:a,variant:"ghost2",size:"fit",title:"Delete"},_r.default.createElement(bm,{className:"tw-size-4"}))),_r.default.createElement(It,null,"Delete"))));kr();var _4t=require("obsidian"),qle=class extends _4t.Modal{constructor(e,r){super(e),this.sources=r}onOpen(){let{contentEl:e}=this;e.empty(),e.createEl("h2",{text:"Sources"});let r=this.sources.filter(o=>o.score>=Fme),n=this.sources.filter(o=>o.score<Fme);r.length>0&&(e.createEl("h3",{text:"High Relevance Sources"}),this.createSourceList(e,r)),n.length>0&&(e.createEl("h3",{text:"Lower Relevance Sources"}),this.createSourceList(e,n))}createSourceList(e,r){let n=e.createEl("ul");n.style.listStyleType="none",n.style.padding="0",r.forEach(o=>{let i=n.createEl("li");i.style.marginBottom="1em",i.createEl("a",{href:`obsidian://open?vault=${encodeURIComponent(this.app.vault.getName())}&file=${encodeURIComponent(o.title)}`,text:o.title}).addEventListener("click",s=>{s.preventDefault(),this.app.workspace.openLinkText(o.title,"")}),o.score&&o.score<=1&&i.appendChild(document.createTextNode(` - Relevance score: ${o.score.toFixed(3)}`))})}onClose(){let{contentEl:e}=this;e.empty()}};kr();wn();var $P=require("obsidian");function sb(){}sb.prototype={diff:function(e,r){var n,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=o.callback;typeof o=="function"&&(i=o,o={});var a=this;function s(S){return S=a.postProcess(S,o),i?(setTimeout(function(){i(S)},0),!0):S}e=this.castInput(e,o),r=this.castInput(r,o),e=this.removeEmpty(this.tokenize(e,o)),r=this.removeEmpty(this.tokenize(r,o));var u=r.length,l=e.length,c=1,d=u+l;o.maxEditLength!=null&&(d=Math.min(d,o.maxEditLength));var f=(n=o.timeout)!==null&&n!==void 0?n:1/0,p=Date.now()+f,m=[{oldPos:-1,lastComponent:void 0}],h=this.extractCommon(m[0],r,e,0,o);if(m[0].oldPos+1>=l&&h+1>=u)return s(v4t(a,m[0].lastComponent,r,e,a.useLongestToken));var b=-1/0,g=1/0;function y(){for(var S=Math.max(b,-c);S<=Math.min(g,c);S+=2){var C=void 0,P=m[S-1],E=m[S+1];P&&(m[S-1]=void 0);var A=!1;if(E){var I=E.oldPos-S;A=E&&0<=I&&I<u}var R=P&&P.oldPos+1<l;if(!A&&!R){m[S]=void 0;continue}if(!R||A&&P.oldPos<E.oldPos?C=a.addToPath(E,!0,!1,0,o):C=a.addToPath(P,!1,!0,1,o),h=a.extractCommon(C,r,e,S,o),C.oldPos+1>=l&&h+1>=u)return s(v4t(a,C.lastComponent,r,e,a.useLongestToken));m[S]=C,C.oldPos+1>=l&&(g=Math.min(g,S-1)),h+1>=u&&(b=Math.max(b,S+1))}c++}if(i)(function S(){setTimeout(function(){if(c>d||Date.now()>p)return i();y()||S()},0)})();else for(;c<=d&&Date.now()<=p;){var w=y();if(w)return w}},addToPath:function(e,r,n,o,i){var a=e.lastComponent;return a&&!i.oneChangePerToken&&a.added===r&&a.removed===n?{oldPos:e.oldPos+o,lastComponent:{count:a.count+1,added:r,removed:n,previousComponent:a.previousComponent}}:{oldPos:e.oldPos+o,lastComponent:{count:1,added:r,removed:n,previousComponent:a}}},extractCommon:function(e,r,n,o,i){for(var a=r.length,s=n.length,u=e.oldPos,l=u-o,c=0;l+1<a&&u+1<s&&this.equals(n[u+1],r[l+1],i);)l++,u++,c++,i.oneChangePerToken&&(e.lastComponent={count:1,previousComponent:e.lastComponent,added:!1,removed:!1});return c&&!i.oneChangePerToken&&(e.lastComponent={count:c,previousComponent:e.lastComponent,added:!1,removed:!1}),e.oldPos=u,l},equals:function(e,r,n){return n.comparator?n.comparator(e,r):e===r||n.ignoreCase&&e.toLowerCase()===r.toLowerCase()},removeEmpty:function(e){for(var r=[],n=0;n<e.length;n++)e[n]&&r.push(e[n]);return r},castInput:function(e){return e},tokenize:function(e){return Array.from(e)},join:function(e){return e.join("")},postProcess:function(e){return e}};function v4t(t,e,r,n,o){for(var i=[],a;e;)i.push(e),a=e.previousComponent,delete e.previousComponent,e=a;i.reverse();for(var s=0,u=i.length,l=0,c=0;s<u;s++){var d=i[s];if(d.removed)d.value=t.join(n.slice(c,c+d.count)),c+=d.count;else{if(!d.added&&o){var f=r.slice(l,l+d.count);f=f.map(function(p,m){var h=n[c+m];return h.length>p.length?h:p}),d.value=t.join(f)}else d.value=t.join(r.slice(l,l+d.count));l+=d.count,d.added||(c+=d.count)}}return i}var Toi=new sb;function w4t(t,e){var r;for(r=0;r<t.length&&r<e.length;r++)if(t[r]!=e[r])return t.slice(0,r);return t.slice(0,r)}function S4t(t,e){var r;if(!t||!e||t[t.length-1]!=e[e.length-1])return"";for(r=0;r<t.length&&r<e.length;r++)if(t[t.length-(r+1)]!=e[e.length-(r+1)])return t.slice(-r);return t.slice(-r)}function qDe(t,e,r){if(t.slice(0,e.length)!=e)throw Error("string ".concat(JSON.stringify(t)," doesn't start with prefix ").concat(JSON.stringify(e),"; this is a bug"));return r+t.slice(e.length)}function UDe(t,e,r){if(!e)return t+r;if(t.slice(-e.length)!=e)throw Error("string ".concat(JSON.stringify(t)," doesn't end with suffix ").concat(JSON.stringify(e),"; this is a bug"));return t.slice(0,-e.length)+r}function lW(t,e){return qDe(t,e,"")}function Ule(t,e){return UDe(t,e,"")}function x4t(t,e){return e.slice(0,Dvn(t,e))}function Dvn(t,e){var r=0;t.length>e.length&&(r=t.length-e.length);var n=e.length;t.length<e.length&&(n=t.length);var o=Array(n),i=0;o[0]=0;for(var a=1;a<n;a++){for(e[a]==e[i]?o[a]=o[i]:o[a]=i;i>0&&e[a]!=e[i];)i=o[i];e[a]==e[i]&&i++}i=0;for(var s=r;s<t.length;s++){for(;i>0&&t[s]!=e[i];)i=o[i];t[s]==e[i]&&i++}return i}var zle="a-zA-Z0-9_\\u{C0}-\\u{FF}\\u{D8}-\\u{F6}\\u{F8}-\\u{2C6}\\u{2C8}-\\u{2D7}\\u{2DE}-\\u{2FF}\\u{1E00}-\\u{1EFF}",Lvn=new RegExp("[".concat(zle,"]+|\\s+|[^").concat(zle,"]"),"ug"),dW=new sb;dW.equals=function(t,e,r){return r.ignoreCase&&(t=t.toLowerCase(),e=e.toLowerCase()),t.trim()===e.trim()};dW.tokenize=function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r;if(e.intlSegmenter){if(e.intlSegmenter.resolvedOptions().granularity!="word")throw new Error('The segmenter passed must have a granularity of "word"');r=Array.from(e.intlSegmenter.segment(t),function(i){return i.segment})}else r=t.match(Lvn)||[];var n=[],o=null;return r.forEach(function(i){/\s/.test(i)?o==null?n.push(i):n.push(n.pop()+i):/\s/.test(o)?n[n.length-1]==o?n.push(n.pop()+i):n.push(o+i):n.push(i),o=i}),n};dW.join=function(t){return t.map(function(e,r){return r==0?e:e.replace(/^\s+/,"")}).join("")};dW.postProcess=function(t,e){if(!t||e.oneChangePerToken)return t;var r=null,n=null,o=null;return t.forEach(function(i){i.added?n=i:i.removed?o=i:((n||o)&&C4t(r,o,n,i),r=i,n=null,o=null)}),(n||o)&&C4t(r,o,n,null),t};function O4t(t,e,r){return r?.ignoreWhitespace!=null&&!r.ignoreWhitespace?Fvn(t,e,r):dW.diff(t,e,r)}function C4t(t,e,r,n){if(e&&r){var o=e.value.match(/^\s*/)[0],i=e.value.match(/\s*$/)[0],a=r.value.match(/^\s*/)[0],s=r.value.match(/\s*$/)[0];if(t){var u=w4t(o,a);t.value=UDe(t.value,a,u),e.value=lW(e.value,u),r.value=lW(r.value,u)}if(n){var l=S4t(i,s);n.value=qDe(n.value,s,l),e.value=Ule(e.value,l),r.value=Ule(r.value,l)}}else if(r)t&&(r.value=r.value.replace(/^\s*/,"")),n&&(n.value=n.value.replace(/^\s*/,""));else if(t&&n){var c=n.value.match(/^\s*/)[0],d=e.value.match(/^\s*/)[0],f=e.value.match(/\s*$/)[0],p=w4t(c,d);e.value=lW(e.value,p);var m=S4t(lW(c,p),f);e.value=Ule(e.value,m),n.value=qDe(n.value,c,m),t.value=UDe(t.value,c,c.slice(0,c.length-m.length))}else if(n){var h=n.value.match(/^\s*/)[0],b=e.value.match(/\s*$/)[0],g=x4t(b,h);e.value=Ule(e.value,g)}else if(t){var y=t.value.match(/\s*$/)[0],w=e.value.match(/^\s*/)[0],S=x4t(y,w);e.value=lW(e.value,S)}}var P4t=new sb;P4t.tokenize=function(t){var e=new RegExp("(\\r?\\n)|[".concat(zle,"]+|[^\\S\\n\\r]+|[^").concat(zle,"]"),"ug");return t.match(e)||[]};function Fvn(t,e,r){return P4t.diff(t,e,r)}function kvn(t,e){if(typeof t=="function")e.callback=t;else if(t)for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);return e}var Hle=new sb;Hle.tokenize=function(t,e){e.stripTrailingCr&&(t=t.replace(/\r\n/g,`
`));var r=[],n=t.split(/(\n|\r\n)/);n[n.length-1]||n.pop();for(var o=0;o<n.length;o++){var i=n[o];o%2&&!e.newlineIsToken?r[r.length-1]+=i:r.push(i)}return r};Hle.equals=function(t,e,r){return r.ignoreWhitespace?((!r.newlineIsToken||!t.includes(`
`))&&(t=t.trim()),(!r.newlineIsToken||!e.includes(`
`))&&(e=e.trim())):r.ignoreNewlineAtEof&&!r.newlineIsToken&&(t.endsWith(`
`)&&(t=t.slice(0,-1)),e.endsWith(`
`)&&(e=e.slice(0,-1))),sb.prototype.equals.call(this,t,e,r)};function E4t(t,e,r){var n=kvn(r,{ignoreWhitespace:!0});return Hle.diff(t,e,n)}var $vn=new sb;$vn.tokenize=function(t){return t.split(/(\S.+?[.!?])(?=\s+|$)/)};var Bvn=new sb;Bvn.tokenize=function(t){return t.split(/([{}:;,]|\s+)/)};function zDe(t){"@babel/helpers - typeof";return zDe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zDe(t)}var cW=new sb;cW.useLongestToken=!0;cW.tokenize=Hle.tokenize;cW.castInput=function(t,e){var r=e.undefinedReplacement,n=e.stringifyReplacer,o=n===void 0?function(i,a){return typeof a>"u"?r:a}:n;return typeof t=="string"?t:JSON.stringify(HDe(t,null,null,o),o,"  ")};cW.equals=function(t,e,r){return sb.prototype.equals.call(cW,t.replace(/,([\r\n])/g,"$1"),e.replace(/,([\r\n])/g,"$1"),r)};function HDe(t,e,r,n,o){e=e||[],r=r||[],n&&(t=n(o,t));var i;for(i=0;i<e.length;i+=1)if(e[i]===t)return r[i];var a;if(Object.prototype.toString.call(t)==="[object Array]"){for(e.push(t),a=new Array(t.length),r.push(a),i=0;i<t.length;i+=1)a[i]=HDe(t[i],e,r,n,o);return e.pop(),r.pop(),a}if(t&&t.toJSON&&(t=t.toJSON()),zDe(t)==="object"&&t!==null){e.push(t),a={},r.push(a);var s=[],u;for(u in t)Object.prototype.hasOwnProperty.call(t,u)&&s.push(u);for(s.sort(),i=0;i<s.length;i+=1)u=s[i],a[u]=HDe(t[u],e,r,n,u);e.pop(),r.pop()}else a=t;return a}var VDe=new sb;VDe.tokenize=function(t){return t.slice()};VDe.join=VDe.removeEmpty=function(t){return t};var wr=F(X()),j4t=F(wc());var ub=F(X());Ko();var FP=require("obsidian"),vr=F(X()),T4t=F(wc());var A4t=F(X());function qvn(t){return t.trim().split(`
`).map(r=>"- "+r).join(`
`)}function WDe(t){return t.map(r=>{let n=r.some(a=>a.added),o=r.some(a=>a.removed),i="";return n?i=r.map(a=>a.added?a.value:"").join(`
`):o?i=r.map(a=>a.removed?qvn(a.value):"").join(`
`):r.map(s=>s.value).join(`
`).trim().length>0&&(i="..."),i}).join(`
`)}function fW(t){let e=[],r=[];return t.forEach(n=>{n.added||n.removed?r.push(n):(r.length>0&&(e.push(r),r=[]),e.push([n]))}),r.length>0&&e.push(r),e}var pW="obsidian-copilot-apply-view",Vle=class extends FP.ItemView{constructor(r){super(r);this.root=null;this.state=null}getViewType(){return pW}getDisplayText(){return"Preview Changes"}async setState(r){this.state=r,this.render()}async onOpen(){this.render()}async onClose(){this.root&&(this.root.unmount(),this.root=null)}render(){if(!this.state)return;let r=this.containerEl.children[1];r.empty();let n=r.createDiv();this.root||(this.root=(0,T4t.createRoot)(n)),this.root.render(vr.default.createElement(Uvn,{app:this.app,state:this.state,close:()=>this.leaf.detach()}))}},I4t=(0,vr.memo)(({oldLine:t,newLine:e})=>{let r=O4t(t,e);return vr.default.createElement(vr.default.Fragment,null,r.map((n,o)=>n.added?vr.default.createElement("span",{key:o,className:"tw-text-success"},n.value):n.removed?vr.default.createElement("span",{key:o,className:"tw-text-error tw-line-through"},n.value):vr.default.createElement("span",{key:o},n.value)))});I4t.displayName="WordDiff";var Uvn=({app:t,state:e,close:r})=>{let[n,o]=(0,A4t.useState)(()=>e.changes.map(p=>({...p,accepted:null}))),i=fW(n),a=(0,vr.useRef)([]);if(!e||!e.changes)return fe("Invalid state:",e),vr.default.createElement("div",{className:"tw-flex tw-h-full tw-flex-col tw-items-center tw-justify-center"},vr.default.createElement("div",{className:"tw-text-error"},"Error: Invalid state - missing changes"),vr.default.createElement(ge,{onClick:r,className:"tw-mt-4"},"Close"));let s=async()=>{try{let p=n.map(m=>m.accepted===null?{...m,accepted:!0}:m);await l(p)}catch(p){fe("Error applying changes:",p),new FP.Notice(`Error applying changes: ${p.message}`)}},u=async()=>{try{let p=n.map(m=>m.accepted===null?{...m,accepted:!1}:m);await l(p)}catch(p){fe("Error applying changes:",p),new FP.Notice(`Error applying changes: ${p.message}`)}},l=async p=>{let m=p.filter(b=>b.added?b.accepted===!0:b.removed?b.accepted===!1:!0).map(b=>b.value).join(""),h=t.vault.getAbstractFileByPath(e.path);if(!h||!(h instanceof FP.TFile)){new FP.Notice("File not found:"+e.path),r();return}await t.vault.modify(h,m),new FP.Notice("Changes applied successfully"),r()},c=p=>{if(!i)return;let m=-1;for(let h=p+1;h<i.length;h++){let b=i[h],g=b.some(w=>w.added||w.removed),y=b.some(w=>(w.added||w.removed)&&w.accepted===null);if(g&&y){m=h;break}}m!==-1&&a.current[m]&&a.current[m]?.scrollIntoView({behavior:"smooth",block:"center"})},d=p=>{o(m=>{let h=[...m],b=i?.[p];return b&&b.forEach(g=>{let y=h.findIndex(w=>w===g);y!==-1&&(h[y]={...h[y],accepted:!0})}),h}),setTimeout(()=>c(p),0)},f=p=>{o(m=>{let h=[...m],b=i?.[p];return b&&b.forEach(g=>{let y=h.findIndex(w=>w===g);y!==-1&&(h[y]={...h[y],accepted:!1})}),h}),setTimeout(()=>c(p),0)};return vr.default.createElement("div",{className:"tw-relative tw-flex tw-h-full tw-flex-col"},vr.default.createElement("div",{className:"tw-fixed tw-bottom-2 tw-left-1/2 tw-z-[1] tw-flex tw-gap-2 tw-rounded-md tw-border tw-border-solid tw-border-border tw-bg-secondary tw-p-2"},vr.default.createElement(ge,{variant:"destructive",size:"sm",onClick:u},vr.default.createElement($i,{className:"tw-size-4"}),"Reject"),vr.default.createElement(ge,{variant:"success",size:"sm",onClick:s},vr.default.createElement(kl,{className:"tw-size-4"}),"Accept")),vr.default.createElement("div",{className:"tw-flex tw-items-center tw-border-b tw-border-solid tw-border-border tw-p-2 tw-text-sm tw-font-medium"},e.path),vr.default.createElement("div",{className:"tw-flex-1 tw-overflow-auto tw-p-2"},i?.map((p,m)=>{let h=p.some(g=>g.added||g.removed),b=h?p.every(g=>!g.added&&!g.removed||g.accepted===!0)?"accepted":p.every(g=>!g.added&&!g.removed||g.accepted===!1)?"rejected":"undecided":"unchanged";return vr.default.createElement("div",{key:m,ref:g=>a.current[m]=g,className:_e("tw-mb-4 tw-overflow-hidden tw-rounded-md")},b==="accepted"?vr.default.createElement("div",{className:"tw-flex-1 tw-whitespace-pre-wrap tw-px-2 tw-py-1 tw-font-mono tw-text-sm tw-text-normal"},p.filter(g=>!g.removed).map((g,y)=>vr.default.createElement("div",{key:y},g.value))):b==="rejected"?vr.default.createElement("div",{className:"tw-flex-1 tw-whitespace-pre-wrap tw-px-2 tw-py-1 tw-font-mono tw-text-sm tw-text-normal"},p.filter(g=>!g.added).map((g,y)=>vr.default.createElement("div",{key:y},g.value))):p.map((g,y)=>{if(g.added){let w=p.findIndex((S,C)=>S.removed&&C!==y);if(w!==-1){let S=p[w].value;return vr.default.createElement("div",{key:`${m}-${y}`,className:"tw-relative"},vr.default.createElement("div",{className:"tw-flex-1 tw-whitespace-pre-wrap tw-px-2 tw-py-1 tw-font-mono tw-text-sm"},vr.default.createElement(I4t,{oldLine:S,newLine:g.value})))}}return g.removed&&p.findIndex((S,C)=>S.added&&C!==y)!==-1?null:vr.default.createElement("div",{key:`${m}-${y}`,className:"tw-relative"},vr.default.createElement("div",{className:_e("tw-flex-1 tw-whitespace-pre-wrap tw-px-2 tw-py-1 tw-font-mono tw-text-sm",{"tw-text-success":g.added,"tw-text-error":g.removed,"tw-text-normal":!g.added&&!g.removed,"tw-line-through":g.removed})},g.value))}),h&&b==="undecided"&&vr.default.createElement("div",{className:"tw-flex tw-items-center tw-justify-end tw-border-[0px] tw-border-t tw-border-solid tw-border-border tw-p-2"},vr.default.createElement("div",{className:"tw-flex tw-items-center tw-gap-2"},vr.default.createElement(ge,{variant:"destructive",size:"sm",onClick:()=>f(m)},vr.default.createElement($i,{className:"tw-size-4"}),"Reject"),vr.default.createElement(ge,{variant:"success",size:"sm",onClick:()=>d(m)},vr.default.createElement(kl,{className:"tw-size-4"}),"Accept"))),h&&(b==="accepted"||b==="rejected")&&vr.default.createElement("div",{className:"tw-flex tw-items-center tw-justify-end tw-border-[0px] tw-border-t tw-border-solid tw-border-border tw-p-2"},vr.default.createElement("div",{className:"tw-flex tw-items-center tw-gap-2"},vr.default.createElement("div",{className:"tw-mr-2 tw-text-sm tw-font-medium"},b==="accepted"?vr.default.createElement("div",{className:"tw-flex tw-items-center tw-gap-1 tw-text-success"},vr.default.createElement(kl,{className:"tw-size-4"}),vr.default.createElement("div",null,"Accepted")):vr.default.createElement("div",{className:"tw-flex tw-items-center tw-gap-1 tw-text-error"},vr.default.createElement($i,{className:"tw-size-4"}),vr.default.createElement("div",null,"Rejected"))),vr.default.createElement(ge,{variant:"secondary",size:"sm",onClick:()=>{o(g=>{let y=[...g],w=i?.[m];return w&&w.forEach(S=>{let C=y.findIndex(P=>P===S);C!==-1&&(y[C]={...y[C],accepted:null})}),y})}},"Revert"))))})))};Ko();var kP=require("obsidian"),M4t=require("obsidian");var R4t=({note_path:t,note_content:e,note_changes:r})=>ub.default.createElement("div",{className:"tw-my-2 tw-flex tw-flex-col tw-overflow-hidden tw-rounded-md tw-border tw-border-solid tw-border-border"},t&&ub.default.createElement("div",{className:"tw-flex tw-items-center tw-justify-between tw-gap-2 tw-overflow-hidden tw-border-[0px] tw-border-b tw-border-solid tw-border-border tw-p-2"},ub.default.createElement("div",{className:"tw-flex-1 tw-truncate tw-p-1 tw-text-xs tw-text-muted"},t),ub.default.createElement("div",{className:"tw-flex tw-gap-2"},ub.default.createElement(ge,{className:"tw-text-muted",variant:"ghost2",size:"fit",onClick:()=>{try{let i=r.length>0?WDe(fW(r)):e;navigator.clipboard.writeText(i),new kP.Notice("Content copied to clipboard")}catch(i){fe("Error copying to clipboard:",i),new kP.Notice(`Failed to copy: ${i.message}`)}}},ub.default.createElement(O4,{className:"tw-size-4"}),"Copy"),ub.default.createElement(ge,{className:"tw-text-muted",variant:"ghost2",size:"fit",onClick:async()=>{if(t)try{let i=app.vault.getAbstractFileByPath(t),a=!1;if(!i)try{if(t.includes("/")){let l=t.split("/").slice(0,-1).join("/");app.vault.getAbstractFileByPath(l)||await app.vault.createFolder(l)}if(i=await app.vault.create(t,e),i)new kP.Notice(`Created new file: ${t}`),a=!0;else{new kP.Notice(`Failed to create file: ${t}`);return}a=!0}catch(l){fe("Error creating file:",l),new kP.Notice(`Failed to create file: ${l.message}`);return}if(!(i instanceof M4t.TFile)){new kP.Notice(`Path is not a file: ${t}`);return}let s=app.workspace.getActiveFile();if((!s||s.path!==t)&&(await app.workspace.getLeaf().openFile(i),new kP.Notice(`Switched to ${i.name}`)),a)return;await app.workspace.getLeaf(!0).setViewState({type:pW,active:!0,state:{changes:r,path:t}})}catch(i){fe("Error calling composer apply:",i),new kP.Notice(`Error processing code: ${i.message}`)}}},ub.default.createElement(kl,{className:"tw-size-4"}),app.vault.getAbstractFileByPath(t)?"Preview":"Apply"))),ub.default.createElement("pre",{className:"tw-m-0 tw-border-none"},ub.default.createElement("code",null,r.length>0?WDe(fW(r)):e)));function zvn({context:t}){return!t||t.notes.length===0&&t.urls.length===0?null:wr.default.createElement("div",{className:"tw-flex tw-flex-wrap tw-gap-2"},t.notes.map(e=>wr.default.createElement(Mt,{key:e.path},wr.default.createElement(Rt,{asChild:!0},wr.default.createElement(Zp,{variant:"secondary"},wr.default.createElement("span",{className:"tw-max-w-40 tw-truncate"},e.basename))),wr.default.createElement(It,null,e.path))),t.urls.map(e=>wr.default.createElement(Mt,{key:e},wr.default.createElement(Rt,{asChild:!0},wr.default.createElement(Zp,{variant:"secondary"},wr.default.createElement("span",{className:"tw-max-w-40 tw-truncate"},e))),wr.default.createElement(It,null,e))))}var Hvn=({message:t,app:e,isStreaming:r,onRegenerate:n,onEdit:o,onDelete:i,chatHistory:a=[]})=>{let[s,u]=(0,wr.useState)(!1),[l,c]=(0,wr.useState)(!1),[d,f]=(0,wr.useState)(t.message),p=(0,wr.useRef)(null),m=(0,wr.useRef)(null),h=(0,wr.useRef)(null),b=()=>{!navigator.clipboard||!navigator.clipboard.writeText||navigator.clipboard.writeText(t.message).then(()=>{u(!0),setTimeout(()=>{u(!1)},2e3)})},g=(0,wr.useCallback)(j=>{let N=e.workspace.getActiveFile(),$=N?N.path:"",k=U=>{let te="margin: 0.5rem 0 1.5rem; padding: 0.75rem; border: 1px solid var(--background-modifier-border); border-radius: 4px; background-color: var(--background-secondary)",z="cursor: pointer; color: var(--text-muted); font-size: 0.8em; margin-bottom: 0.5rem; user-select: none",W="margin-top: 0.75rem; padding: 0.75rem; border-radius: 4px; background-color: var(--background-primary)";if(r&&U.includes("<think>"))return U=U.replace(/<think>([\s\S]*?)<\/think>/g,(ae,we)=>`<details style="${te}">
              <summary style="${z}">Thought for a second</summary>
              <div class="tw-text-muted" style="${W}">${we.trim()}</div>
            </details>

`),U=U.replace(/<think>([\s\S]*)$/,(ae,we)=>`<div style="${te}">
              <div style="${z}">Thinking...</div>
              <div class="tw-text-muted" style="${W}">${we.trim()}</div>
            </div>`),U;let Y=/<think>([\s\S]*?)<\/think>/g;return U.replace(Y,(ae,we)=>`<details style="${te}">
            <summary style="${z}">Thought for a second</summary>
            <div class="tw-text-muted" style="${W}">${we.trim()}</div>
          </details>

`)},H=U=>{let te=z=>`\u23F3 Generating changes for ${z}...`;if(r){let z=/(\{[\s\S]*?"type"\s*:\s*"composer"[\s\S]*?)(?=\}|$)/g,W;for(;(W=z.exec(U))!==null;){let Y=W[1],ae=W.index,we=Y.match(/"path"\s*:\s*"([^"]+)"/),de=we?we[1].trim():"...";U=U.substring(0,ae)+te(de);break}}return U},V=(U,te,z)=>U.split(/(```[\s\S]*?```|`[^`]*`)/g).map((Y,ae)=>ae%2===0?Y.replace(te,(we,de)=>{let Ue=e.metadataCache.getFirstLinkpathDest(de,$);return Ue?z(Ue):we}):Y).join(""),Q=j.replace(/\\\[\s*/g,"$$").replace(/\s*\\\]/g,"$$").replace(/\\\(\s*/g,"$").replace(/\s*\\\)/g,"$"),G=H(Q),D=V(G,/!\[\[(.*?)]]/g,U=>`![](${e.vault.getResourcePath(U)})`),B=k(D),q=y(B);return V(q,/(?<!!)\[\[([^\]]+)]]/g,U=>`<a href="obsidian://open?file=${encodeURIComponent(U.path)}">${U.basename}</a>`)},[e,r]),y=j=>{let N=j.split(`

#### Sources:

`);if(N.length!==2)return j;let[$,k]=N,H=k.split(`
`).map(V=>{let Q=V.match(/- \[\[(.*?)\]\]/);return Q?`<li>[[${Q[1]}]]</li>`:V}).join(`
`);return $+`

<br/>
<details><summary>Sources</summary>
<ul>
`+H+`
</ul>
</details>`};(0,wr.useEffect)(()=>{let j=[],N=!1;if(p.current&&t.sender!==_i){p.current.innerHTML="",m.current||(m.current=new $P.Component);let $=g(t.message);if(!N&&($P.MarkdownRenderer.renderMarkdown($,p.current,"",m.current),!r)){let k=p.current.querySelectorAll("pre");k.length>0&&k.forEach(H=>{if(N)return;let V=H.querySelector("code");if(!V)return;let Q=V.textContent||"";try{if(Q.trim().startsWith("{")&&Q.trim().endsWith("}")){let G=JSON.parse(Q);if(G.type==="composer"&&G.path&&(typeof G.content=="string"||typeof G.canvas_json=="string")){let D;typeof G.content=="string"?D=G.content:D=JSON.stringify(G.canvas_json);let B=G.path.trim();B.startsWith("/")&&(B=B.slice(1));let q=document.createElement("div");H.parentNode?.replaceChild(q,H);let K=(0,j4t.createRoot)(q);j.push(K);let U=e.vault.getAbstractFileByPath(B),te=[];(async()=>{if(U instanceof $P.TFile){let z=await e.vault.read(U);te=E4t(z,D,{newlineIsToken:!0})}else{let z=B.split("/").pop()?.split(".")[0],W=D.split(`
`);(W[0]===`# ${z}
`||W[0]===`## ${z}`)&&W.shift(),D=W.join(`
`)}N||K.render(wr.default.createElement(R4t,{note_path:B,note_content:D,note_changes:te}))})()}}}catch(G){console.error("Failed to parse composer JSON:",G)}})}}return()=>{N=!0,setTimeout(()=>{m.current&&(m.current.unload(),m.current=null),j.forEach($=>{try{$.unmount()}catch{}})},0)}},[t,e,m,r,g]),(0,wr.useEffect)(()=>{l&&h.current&&w(h.current)},[l]),(0,wr.useEffect)(()=>{f(t.message)},[t.message]);let w=j=>{j.style.height="auto",j.style.height=`${j.scrollHeight}px`},S=j=>{f(j.target.value),w(j.target)},C=j=>{j.nativeEvent.isComposing||j.key==="Enter"&&!j.shiftKey&&(j.preventDefault(),E())},P=()=>{c(!0)},E=()=>{c(!1),o&&o(d)},A=()=>{t.sources&&t.sources.length>0&&new qle(e,t.sources).open()},I=()=>{let j=e.workspace.getMostRecentLeaf();if((!j||!(j.view instanceof $P.MarkdownView))&&(j=e.workspace.getLeaf(!1),!j||!(j.view instanceof $P.MarkdownView)))return;let $=j.view.editor.getSelection().length>0;S2(t.message,$)},R=()=>t.content?wr.default.createElement("div",{className:"tw-flex tw-flex-col tw-gap-3"},t.content.map((j,N)=>j.type==="text"?wr.default.createElement("div",{key:N},t.sender===_i&&l?wr.default.createElement("textarea",{ref:h,value:d,onChange:S,onKeyDown:C,onBlur:E,autoFocus:!0,className:"edit-textarea"}):t.sender===_i?wr.default.createElement("div",{className:"tw-whitespace-pre-wrap tw-break-words tw-text-[calc(var(--font-text-size)_-_2px)] tw-font-normal"},t.message):wr.default.createElement("div",{ref:p,className:t.isErrorMessage?"tw-text-error":""})):j.type==="image_url"?wr.default.createElement("div",{key:N,className:"message-image-content"},wr.default.createElement("img",{src:j.image_url.url,alt:"User uploaded image",className:"chat-message-image"})):null)):t.sender===_i&&l?wr.default.createElement("textarea",{ref:h,value:d,onChange:S,onKeyDown:C,onBlur:E,autoFocus:!0,className:"edit-textarea"}):t.sender===_i?wr.default.createElement("div",{className:"tw-whitespace-pre-wrap tw-break-words tw-text-[calc(var(--font-text-size)_-_2px)] tw-font-normal"},t.message):wr.default.createElement("div",{ref:p,className:t.isErrorMessage?"tw-text-error":""});return wr.default.createElement("div",{className:"tw-my-1 tw-flex tw-w-full tw-flex-col"},wr.default.createElement("div",{className:_e("tw-group tw-mx-2 tw-flex tw-gap-2 tw-rounded-md tw-p-2",t.sender===_i&&"tw-border tw-border-solid tw-border-border")},wr.default.createElement("div",{className:"tw-w-6 tw-shrink-0"},t.sender===_i?wr.default.createElement(H4,null):wr.default.createElement(AR,null)),wr.default.createElement("div",{className:"tw-flex tw-max-w-full tw-grow tw-flex-col tw-gap-2 tw-overflow-hidden"},!l&&wr.default.createElement(zvn,{context:t.context}),wr.default.createElement("div",{className:"message-content"},R()),!r&&wr.default.createElement("div",{className:"tw-flex tw-items-center tw-justify-between"},wr.default.createElement("div",{className:"tw-text-xs tw-text-faint"},t.timestamp?.display),wr.default.createElement(b4t,{message:t,onCopy:b,isCopied:s,onInsertIntoEditor:I,onRegenerate:n,onEdit:P,onDelete:i,onShowSources:A,hasSources:!!(t.sources&&t.sources.length>0)})))))},KDe=Hvn;var td=F(X(),1);function N4t(t,e,{checkForDefaultPrevented:r=!0}={}){return function(o){if(t?.(o),r===!1||!o.defaultPrevented)return e?.(o)}}var L4t=F(X(),1);function D4t(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function GDe(...t){return e=>{let r=!1,n=t.map(o=>{let i=D4t(o,e);return!r&&typeof i=="function"&&(r=!0),i});if(r)return()=>{for(let o=0;o<n.length;o++){let i=n[o];typeof i=="function"?i():D4t(t[o],null)}}}}function F4t(...t){return L4t.useCallback(GDe(...t),t)}var k4t=F(X(),1),Jvn=F(os(),1);var ed=F(X(),1);var EU=F(ft(),1),YDe=ed.forwardRef((t,e)=>{let{children:r,...n}=t,o=ed.Children.toArray(r),i=o.find(Wvn);if(i){let a=i.props.children,s=o.map(u=>u===i?ed.Children.count(a)>1?ed.Children.only(null):ed.isValidElement(a)?a.props.children:null:u);return(0,EU.jsx)(JDe,{...n,ref:e,children:ed.isValidElement(a)?ed.cloneElement(a,void 0,s):null})}return(0,EU.jsx)(JDe,{...n,ref:e,children:r})});YDe.displayName="Slot";var JDe=ed.forwardRef((t,e)=>{let{children:r,...n}=t;if(ed.isValidElement(r)){let o=Gvn(r);return ed.cloneElement(r,{...Kvn(n,r.props),ref:e?GDe(e,o):o})}return ed.Children.count(r)>1?ed.Children.only(null):null});JDe.displayName="SlotClone";var Vvn=({children:t})=>(0,EU.jsx)(EU.Fragment,{children:t});function Wvn(t){return ed.isValidElement(t)&&t.type===Vvn}function Kvn(t,e){let r={...e};for(let n in e){let o=t[n],i=e[n];/^on[A-Z]/.test(n)?o&&i?r[n]=(...s)=>{i(...s),o(...s)}:o&&(r[n]=o):n==="style"?r[n]={...o,...i}:n==="className"&&(r[n]=[o,i].filter(Boolean).join(" "))}return{...t,...r}}function Gvn(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,r=e&&"isReactWarning"in e&&e.isReactWarning;return r?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,r=e&&"isReactWarning"in e&&e.isReactWarning,r?t.props.ref:t.props.ref||t.ref)}var $4t=F(ft(),1),Yvn=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Wle=Yvn.reduce((t,e)=>{let r=k4t.forwardRef((n,o)=>{let{asChild:i,...a}=n,s=i?YDe:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),(0,$4t.jsx)(s,{...a,ref:o})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});var bD=F(ft(),1),ZDe="Collapsible",[Zvn,wii]=Vi(ZDe),[Xvn,XDe]=Zvn(ZDe),B4t=td.forwardRef((t,e)=>{let{__scopeCollapsible:r,open:n,defaultOpen:o,disabled:i,onOpenChange:a,...s}=t,[u=!1,l]=Gc({prop:n,defaultProp:o,onChange:a});return(0,bD.jsx)(Xvn,{scope:r,disabled:i,contentId:il(),open:u,onOpenToggle:td.useCallback(()=>l(c=>!c),[l]),children:(0,bD.jsx)(Wle.div,{"data-state":rLe(u),"data-disabled":i?"":void 0,...s,ref:e})})});B4t.displayName=ZDe;var q4t="CollapsibleTrigger",QDe=td.forwardRef((t,e)=>{let{__scopeCollapsible:r,...n}=t,o=XDe(q4t,r);return(0,bD.jsx)(Wle.button,{type:"button","aria-controls":o.contentId,"aria-expanded":o.open||!1,"data-state":rLe(o.open),"data-disabled":o.disabled?"":void 0,disabled:o.disabled,...n,ref:e,onClick:N4t(t.onClick,o.onOpenToggle)})});QDe.displayName=q4t;var eLe="CollapsibleContent",tLe=td.forwardRef((t,e)=>{let{forceMount:r,...n}=t,o=XDe(eLe,t.__scopeCollapsible);return(0,bD.jsx)(Xc,{present:r||o.open,children:({present:i})=>(0,bD.jsx)(Qvn,{...n,ref:e,present:i})})});tLe.displayName=eLe;var Qvn=td.forwardRef((t,e)=>{let{__scopeCollapsible:r,present:n,children:o,...i}=t,a=XDe(eLe,r),[s,u]=td.useState(n),l=td.useRef(null),c=F4t(e,l),d=td.useRef(0),f=d.current,p=td.useRef(0),m=p.current,h=a.open||s,b=td.useRef(h),g=td.useRef(void 0);return td.useEffect(()=>{let y=requestAnimationFrame(()=>b.current=!1);return()=>cancelAnimationFrame(y)},[]),zn(()=>{let y=l.current;if(y){g.current=g.current||{transitionDuration:y.style.transitionDuration,animationName:y.style.animationName},y.style.transitionDuration="0s",y.style.animationName="none";let w=y.getBoundingClientRect();d.current=w.height,p.current=w.width,b.current||(y.style.transitionDuration=g.current.transitionDuration,y.style.animationName=g.current.animationName),u(n)}},[a.open,n]),(0,bD.jsx)(Wle.div,{"data-state":rLe(a.open),"data-disabled":a.disabled?"":void 0,id:a.contentId,hidden:!h,...i,ref:c,style:{"--radix-collapsible-content-height":f?`${f}px`:void 0,"--radix-collapsible-content-width":m?`${m}px`:void 0,...t.style},children:h&&o})});function rLe(t){return t?"open":"closed"}var U4t=B4t;var BP=U4t,_D=QDe,qP=tLe;var bW=F(X());var Ta=F(X(),1);function Rx(t,e,{checkForDefaultPrevented:r=!0}={}){return function(o){if(t?.(o),r===!1||!o.defaultPrevented)return e?.(o)}}var H4t=F(X(),1);function z4t(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function nLe(...t){return e=>{let r=!1,n=t.map(o=>{let i=z4t(o,e);return!r&&typeof i=="function"&&(r=!0),i});if(r)return()=>{for(let o=0;o<n.length;o++){let i=n[o];typeof i=="function"?i():z4t(t[o],null)}}}}function lb(...t){return H4t.useCallback(nLe(...t),t)}var Ja=F(X(),1);var V4t=F(X(),1),W4t=F(os(),1);var rd=F(X(),1);var TU=F(ft(),1),mW=rd.forwardRef((t,e)=>{let{children:r,...n}=t,o=rd.Children.toArray(r),i=o.find(rwn);if(i){let a=i.props.children,s=o.map(u=>u===i?rd.Children.count(a)>1?rd.Children.only(null):rd.isValidElement(a)?a.props.children:null:u);return(0,TU.jsx)(oLe,{...n,ref:e,children:rd.isValidElement(a)?rd.cloneElement(a,void 0,s):null})}return(0,TU.jsx)(oLe,{...n,ref:e,children:r})});mW.displayName="Slot";var oLe=rd.forwardRef((t,e)=>{let{children:r,...n}=t;if(rd.isValidElement(r)){let o=own(r);return rd.cloneElement(r,{...nwn(n,r.props),ref:e?nLe(e,o):o})}return rd.Children.count(r)>1?rd.Children.only(null):null});oLe.displayName="SlotClone";var twn=({children:t})=>(0,TU.jsx)(TU.Fragment,{children:t});function rwn(t){return rd.isValidElement(t)&&t.type===twn}function nwn(t,e){let r={...e};for(let n in e){let o=t[n],i=e[n];/^on[A-Z]/.test(n)?o&&i?r[n]=(...s)=>{i(...s),o(...s)}:o&&(r[n]=o):n==="style"?r[n]={...o,...i}:n==="className"&&(r[n]=[o,i].filter(Boolean).join(" "))}return{...t,...r}}function own(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,r=e&&"isReactWarning"in e&&e.isReactWarning;return r?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,r=e&&"isReactWarning"in e&&e.isReactWarning,r?t.props.ref:t.props.ref||t.ref)}var K4t=F(ft(),1),iwn=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],zf=iwn.reduce((t,e)=>{let r=V4t.forwardRef((n,o)=>{let{asChild:i,...a}=n,s=i?mW:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),(0,K4t.jsx)(s,{...a,ref:o})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function G4t(t,e){t&&W4t.flushSync(()=>t.dispatchEvent(e))}var aLe=F(ft(),1),awn="DismissableLayer",iLe="dismissableLayer.update",swn="dismissableLayer.pointerDownOutside",uwn="dismissableLayer.focusOutside",J4t,Z4t=Ja.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),sLe=Ja.forwardRef((t,e)=>{let{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:n,onPointerDownOutside:o,onFocusOutside:i,onInteractOutside:a,onDismiss:s,...u}=t,l=Ja.useContext(Z4t),[c,d]=Ja.useState(null),f=c?.ownerDocument??globalThis?.document,[,p]=Ja.useState({}),m=lb(e,E=>d(E)),h=Array.from(l.layers),[b]=[...l.layersWithOutsidePointerEventsDisabled].slice(-1),g=h.indexOf(b),y=c?h.indexOf(c):-1,w=l.layersWithOutsidePointerEventsDisabled.size>0,S=y>=g,C=dwn(E=>{let A=E.target,I=[...l.branches].some(R=>R.contains(A));!S||I||(o?.(E),a?.(E),E.defaultPrevented||s?.())},f),P=fwn(E=>{let A=E.target;[...l.branches].some(R=>R.contains(A))||(i?.(E),a?.(E),E.defaultPrevented||s?.())},f);return AI(E=>{y===l.layers.size-1&&(n?.(E),!E.defaultPrevented&&s&&(E.preventDefault(),s()))},f),Ja.useEffect(()=>{if(c)return r&&(l.layersWithOutsidePointerEventsDisabled.size===0&&(J4t=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),l.layersWithOutsidePointerEventsDisabled.add(c)),l.layers.add(c),Y4t(),()=>{r&&l.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=J4t)}},[c,f,r,l]),Ja.useEffect(()=>()=>{c&&(l.layers.delete(c),l.layersWithOutsidePointerEventsDisabled.delete(c),Y4t())},[c,l]),Ja.useEffect(()=>{let E=()=>p({});return document.addEventListener(iLe,E),()=>document.removeEventListener(iLe,E)},[]),(0,aLe.jsx)(zf.div,{...u,ref:m,style:{pointerEvents:w?S?"auto":"none":void 0,...t.style},onFocusCapture:Rx(t.onFocusCapture,P.onFocusCapture),onBlurCapture:Rx(t.onBlurCapture,P.onBlurCapture),onPointerDownCapture:Rx(t.onPointerDownCapture,C.onPointerDownCapture)})});sLe.displayName=awn;var lwn="DismissableLayerBranch",cwn=Ja.forwardRef((t,e)=>{let r=Ja.useContext(Z4t),n=Ja.useRef(null),o=lb(e,n);return Ja.useEffect(()=>{let i=n.current;if(i)return r.branches.add(i),()=>{r.branches.delete(i)}},[r.branches]),(0,aLe.jsx)(zf.div,{...t,ref:o})});cwn.displayName=lwn;function dwn(t,e=globalThis?.document){let r=qr(t),n=Ja.useRef(!1),o=Ja.useRef(()=>{});return Ja.useEffect(()=>{let i=s=>{if(s.target&&!n.current){let l=function(){X4t(swn,r,c,{discrete:!0})};var u=l;let c={originalEvent:s};s.pointerType==="touch"?(e.removeEventListener("click",o.current),o.current=l,e.addEventListener("click",o.current,{once:!0})):l()}else e.removeEventListener("click",o.current);n.current=!1},a=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(a),e.removeEventListener("pointerdown",i),e.removeEventListener("click",o.current)}},[e,r]),{onPointerDownCapture:()=>n.current=!0}}function fwn(t,e=globalThis?.document){let r=qr(t),n=Ja.useRef(!1);return Ja.useEffect(()=>{let o=i=>{i.target&&!n.current&&X4t(uwn,r,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",o),()=>e.removeEventListener("focusin",o)},[e,r]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function Y4t(){let t=new CustomEvent(iLe);document.dispatchEvent(t)}function X4t(t,e,r,{discrete:n}){let o=r.originalEvent.target,i=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:r});e&&o.addEventListener(t,e,{once:!0}),n?G4t(o,i):o.dispatchEvent(i)}var jg=F(X(),1);var n3t=F(ft(),1),uLe="focusScope.autoFocusOnMount",lLe="focusScope.autoFocusOnUnmount",Q4t={bubbles:!1,cancelable:!0},pwn="FocusScope",cLe=jg.forwardRef((t,e)=>{let{loop:r=!1,trapped:n=!1,onMountAutoFocus:o,onUnmountAutoFocus:i,...a}=t,[s,u]=jg.useState(null),l=qr(o),c=qr(i),d=jg.useRef(null),f=lb(e,h=>u(h)),p=jg.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;jg.useEffect(()=>{if(n){let y=function(P){if(p.paused||!s)return;let E=P.target;s.contains(E)?d.current=E:YI(d.current,{select:!0})},w=function(P){if(p.paused||!s)return;let E=P.relatedTarget;E!==null&&(s.contains(E)||YI(d.current,{select:!0}))},S=function(P){if(document.activeElement===document.body)for(let A of P)A.removedNodes.length>0&&YI(s)};var h=y,b=w,g=S;document.addEventListener("focusin",y),document.addEventListener("focusout",w);let C=new MutationObserver(S);return s&&C.observe(s,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",y),document.removeEventListener("focusout",w),C.disconnect()}}},[n,s,p.paused]),jg.useEffect(()=>{if(s){t3t.add(p);let h=document.activeElement;if(!s.contains(h)){let g=new CustomEvent(uLe,Q4t);s.addEventListener(uLe,l),s.dispatchEvent(g),g.defaultPrevented||(mwn(_wn(o3t(s)),{select:!0}),document.activeElement===h&&YI(s))}return()=>{s.removeEventListener(uLe,l),setTimeout(()=>{let g=new CustomEvent(lLe,Q4t);s.addEventListener(lLe,c),s.dispatchEvent(g),g.defaultPrevented||YI(h??document.body,{select:!0}),s.removeEventListener(lLe,c),t3t.remove(p)},0)}}},[s,l,c,p]);let m=jg.useCallback(h=>{if(!r&&!n||p.paused)return;let b=h.key==="Tab"&&!h.altKey&&!h.ctrlKey&&!h.metaKey,g=document.activeElement;if(b&&g){let y=h.currentTarget,[w,S]=hwn(y);w&&S?!h.shiftKey&&g===S?(h.preventDefault(),r&&YI(w,{select:!0})):h.shiftKey&&g===w&&(h.preventDefault(),r&&YI(S,{select:!0})):g===y&&h.preventDefault()}},[r,n,p.paused]);return(0,n3t.jsx)(zf.div,{tabIndex:-1,...a,ref:f,onKeyDown:m})});cLe.displayName=pwn;function mwn(t,{select:e=!1}={}){let r=document.activeElement;for(let n of t)if(YI(n,{select:e}),document.activeElement!==r)return}function hwn(t){let e=o3t(t),r=e3t(e,t),n=e3t(e.reverse(),t);return[r,n]}function o3t(t){let e=[],r=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{let o=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||o?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)e.push(r.currentNode);return e}function e3t(t,e){for(let r of t)if(!gwn(r,{upTo:e}))return r}function gwn(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function ywn(t){return t instanceof HTMLInputElement&&"select"in t}function YI(t,{select:e=!1}={}){if(t&&t.focus){let r=document.activeElement;t.focus({preventScroll:!0}),t!==r&&ywn(t)&&e&&t.select()}}var t3t=bwn();function bwn(){let t=[];return{add(e){let r=t[0];e!==r&&r?.pause(),t=r3t(t,e),t.unshift(e)},remove(e){t=r3t(t,e),t[0]?.resume()}}}function r3t(t,e){let r=[...t],n=r.indexOf(e);return n!==-1&&r.splice(n,1),r}function _wn(t){return t.filter(e=>e.tagName!=="A")}var Zm=F(X(),1);var i3t=F(X(),1);var dLe=F(ft(),1),vwn="Arrow",a3t=i3t.forwardRef((t,e)=>{let{children:r,width:n=10,height:o=5,...i}=t;return(0,dLe.jsx)(zf.svg,{...i,ref:e,width:n,height:o,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?r:(0,dLe.jsx)("polygon",{points:"0,0 30,0 15,10"})})});a3t.displayName=vwn;var s3t=a3t;var ZI=F(ft(),1);var fLe="Popper",[u3t,pLe]=Vi(fLe),[Swn,l3t]=u3t(fLe),c3t=t=>{let{__scopePopper:e,children:r}=t,[n,o]=Zm.useState(null);return(0,ZI.jsx)(Swn,{scope:e,anchor:n,onAnchorChange:o,children:r})};c3t.displayName=fLe;var d3t="PopperAnchor",f3t=Zm.forwardRef((t,e)=>{let{__scopePopper:r,virtualRef:n,...o}=t,i=l3t(d3t,r),a=Zm.useRef(null),s=lb(e,a);return Zm.useEffect(()=>{i.onAnchorChange(n?.current||a.current)}),n?null:(0,ZI.jsx)(zf.div,{...o,ref:s})});f3t.displayName=d3t;var mLe="PopperContent",[xwn,Cwn]=u3t(mLe),p3t=Zm.forwardRef((t,e)=>{let{__scopePopper:r,side:n="bottom",sideOffset:o=0,align:i="center",alignOffset:a=0,arrowPadding:s=0,avoidCollisions:u=!0,collisionBoundary:l=[],collisionPadding:c=0,sticky:d="partial",hideWhenDetached:f=!1,updatePositionStrategy:p="optimized",onPlaced:m,...h}=t,b=l3t(mLe,r),[g,y]=Zm.useState(null),w=lb(e,Y=>y(Y)),[S,C]=Zm.useState(null),P=Ix(S),E=P?.width??0,A=P?.height??0,I=n+(i!=="center"?"-"+i:""),R=typeof c=="number"?c:{top:0,right:0,bottom:0,left:0,...c},j=Array.isArray(l)?l:[l],N=j.length>0,$={padding:R,boundary:j.filter(Pwn),altBoundary:N},{refs:k,floatingStyles:H,placement:V,isPositioned:Q,middlewareData:G}=RI({strategy:"fixed",placement:I,whileElementsMounted:(...Y)=>NP(...Y,{animationFrame:p==="always"}),elements:{reference:b.anchor},middleware:[jI({mainAxis:o+A,alignmentAxis:a}),u&&NI({mainAxis:!0,crossAxis:!1,limiter:d==="partial"?DI():void 0,...$}),u&&LI({...$}),FI({...$,apply:({elements:Y,rects:ae,availableWidth:we,availableHeight:de})=>{let{width:Ue,height:Ve}=ae.reference,rt=Y.floating.style;rt.setProperty("--radix-popper-available-width",`${we}px`),rt.setProperty("--radix-popper-available-height",`${de}px`),rt.setProperty("--radix-popper-anchor-width",`${Ue}px`),rt.setProperty("--radix-popper-anchor-height",`${Ve}px`)}}),S&&$I({element:S,padding:s}),Ewn({arrowWidth:E,arrowHeight:A}),f&&kI({strategy:"referenceHidden",...$})]}),[D,B]=g3t(V),q=qr(m);zn(()=>{Q&&q?.()},[Q,q]);let K=G.arrow?.x,U=G.arrow?.y,te=G.arrow?.centerOffset!==0,[z,W]=Zm.useState();return zn(()=>{g&&W(window.getComputedStyle(g).zIndex)},[g]),(0,ZI.jsx)("div",{ref:k.setFloating,"data-radix-popper-content-wrapper":"",style:{...H,transform:Q?H.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:z,"--radix-popper-transform-origin":[G.transformOrigin?.x,G.transformOrigin?.y].join(" "),...G.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:(0,ZI.jsx)(xwn,{scope:r,placedSide:D,onArrowChange:C,arrowX:K,arrowY:U,shouldHideArrow:te,children:(0,ZI.jsx)(zf.div,{"data-side":D,"data-align":B,...h,ref:w,style:{...h.style,animation:Q?void 0:"none"}})})})});p3t.displayName=mLe;var m3t="PopperArrow",Own={top:"bottom",right:"left",bottom:"top",left:"right"},h3t=Zm.forwardRef(function(e,r){let{__scopePopper:n,...o}=e,i=Cwn(m3t,n),a=Own[i.placedSide];return(0,ZI.jsx)("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[a]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:(0,ZI.jsx)(s3t,{...o,ref:r,style:{...o.style,display:"block"}})})});h3t.displayName=m3t;function Pwn(t){return t!==null}var Ewn=t=>({name:"transformOrigin",options:t,fn(e){let{placement:r,rects:n,middlewareData:o}=e,a=o.arrow?.centerOffset!==0,s=a?0:t.arrowWidth,u=a?0:t.arrowHeight,[l,c]=g3t(r),d={start:"0%",center:"50%",end:"100%"}[c],f=(o.arrow?.x??0)+s/2,p=(o.arrow?.y??0)+u/2,m="",h="";return l==="bottom"?(m=a?d:`${f}px`,h=`${-u}px`):l==="top"?(m=a?d:`${f}px`,h=`${n.floating.height+u}px`):l==="right"?(m=`${-u}px`,h=a?d:`${p}px`):l==="left"&&(m=`${n.floating.width+u}px`,h=a?d:`${p}px`),{data:{x:m,y:h}}}});function g3t(t){let[e,r="center"]=t.split("-");return[e,r]}var y3t=c3t,hLe=f3t,b3t=p3t,_3t=h3t;var Kle=F(X(),1),v3t=F(os(),1);var w3t=F(ft(),1),Awn="Portal",gLe=Kle.forwardRef((t,e)=>{let{container:r,...n}=t,[o,i]=Kle.useState(!1);zn(()=>i(!0),[]);let a=r||o&&globalThis?.document?.body;return a?v3t.default.createPortal((0,w3t.jsx)(zf.div,{...n,ref:e}),a):null});gLe.displayName=Awn;var Yle=F(X());var Xd=F(X());var Gle=uD();var yLe=function(){},hW=Xd.forwardRef(function(t,e){var r=Xd.useRef(null),n=Xd.useState({onScrollCapture:yLe,onWheelCapture:yLe,onTouchMoveCapture:yLe}),o=n[0],i=n[1],a=t.forwardProps,s=t.children,u=t.className,l=t.removeScrollBar,c=t.enabled,d=t.shards,f=t.sideCar,p=t.noIsolation,m=t.inert,h=t.allowPinchZoom,b=t.as,g=b===void 0?"div":b,y=t.gapMode,w=HI(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),S=f,C=sD([r,e]),P=ci(ci({},w),o);return Xd.createElement(Xd.Fragment,null,c&&Xd.createElement(S,{sideCar:Gle,removeScrollBar:l,shards:d,noIsolation:p,inert:m,setCallbacks:i,allowPinchZoom:!!h,lockRef:r,gapMode:y}),a?Xd.cloneElement(Xd.Children.only(s),ci(ci({},P),{ref:C})):Xd.createElement(g,ci({},P,{className:u,ref:C}),s))});hW.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};hW.classNames={fullWidth:rb,zeroRight:tb};var da=F(X());var bLe=!1;if(typeof window<"u")try{gW=Object.defineProperty({},"passive",{get:function(){return bLe=!0,!0}}),window.addEventListener("test",gW,gW),window.removeEventListener("test",gW,gW)}catch{bLe=!1}var gW,vD=bLe?{passive:!1}:!1;var Iwn=function(t){return t.tagName==="TEXTAREA"},S3t=function(t,e){if(!(t instanceof Element))return!1;var r=window.getComputedStyle(t);return r[e]!=="hidden"&&!(r.overflowY===r.overflowX&&!Iwn(t)&&r[e]==="visible")},Mwn=function(t){return S3t(t,"overflowY")},Rwn=function(t){return S3t(t,"overflowX")},_Le=function(t,e){var r=e.ownerDocument,n=e;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var o=x3t(t,n);if(o){var i=C3t(t,n),a=i[1],s=i[2];if(a>s)return!0}n=n.parentNode}while(n&&n!==r.body);return!1},jwn=function(t){var e=t.scrollTop,r=t.scrollHeight,n=t.clientHeight;return[e,r,n]},Nwn=function(t){var e=t.scrollLeft,r=t.scrollWidth,n=t.clientWidth;return[e,r,n]},x3t=function(t,e){return t==="v"?Mwn(e):Rwn(e)},C3t=function(t,e){return t==="v"?jwn(e):Nwn(e)},Dwn=function(t,e){return t==="h"&&e==="rtl"?-1:1},O3t=function(t,e,r,n,o){var i=Dwn(t,window.getComputedStyle(e).direction),a=i*n,s=r.target,u=e.contains(s),l=!1,c=a>0,d=0,f=0;do{var p=C3t(t,s),m=p[0],h=p[1],b=p[2],g=h-b-i*m;(m||g)&&x3t(t,s)&&(d+=g,f+=m),s instanceof ShadowRoot?s=s.host:s=s.parentNode}while(!u&&s!==document.body||u&&(e.contains(s)||e===s));return(c&&(o&&Math.abs(d)<1||!o&&a>d)||!c&&(o&&Math.abs(f)<1||!o&&-a>f))&&(l=!0),l};var Jle=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},P3t=function(t){return[t.deltaX,t.deltaY]},E3t=function(t){return t&&"current"in t?t.current:t},Lwn=function(t,e){return t[0]===e[0]&&t[1]===e[1]},Fwn=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},kwn=0,AU=[];function T3t(t){var e=da.useRef([]),r=da.useRef([0,0]),n=da.useRef(),o=da.useState(kwn++)[0],i=da.useState(DP)[0],a=da.useRef(t);da.useEffect(function(){a.current=t},[t]),da.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(o));var h=bU([t.lockRef.current],(t.shards||[]).map(E3t),!0).filter(Boolean);return h.forEach(function(b){return b.classList.add("allow-interactivity-".concat(o))}),function(){document.body.classList.remove("block-interactivity-".concat(o)),h.forEach(function(b){return b.classList.remove("allow-interactivity-".concat(o))})}}},[t.inert,t.lockRef.current,t.shards]);var s=da.useCallback(function(h,b){if("touches"in h&&h.touches.length===2||h.type==="wheel"&&h.ctrlKey)return!a.current.allowPinchZoom;var g=Jle(h),y=r.current,w="deltaX"in h?h.deltaX:y[0]-g[0],S="deltaY"in h?h.deltaY:y[1]-g[1],C,P=h.target,E=Math.abs(w)>Math.abs(S)?"h":"v";if("touches"in h&&E==="h"&&P.type==="range")return!1;var A=_Le(E,P);if(!A)return!0;if(A?C=E:(C=E==="v"?"h":"v",A=_Le(E,P)),!A)return!1;if(!n.current&&"changedTouches"in h&&(w||S)&&(n.current=C),!C)return!0;var I=n.current||C;return O3t(I,b,h,I==="h"?w:S,!0)},[]),u=da.useCallback(function(h){var b=h;if(!(!AU.length||AU[AU.length-1]!==i)){var g="deltaY"in b?P3t(b):Jle(b),y=e.current.filter(function(C){return C.name===b.type&&(C.target===b.target||b.target===C.shadowParent)&&Lwn(C.delta,g)})[0];if(y&&y.should){b.cancelable&&b.preventDefault();return}if(!y){var w=(a.current.shards||[]).map(E3t).filter(Boolean).filter(function(C){return C.contains(b.target)}),S=w.length>0?s(b,w[0]):!a.current.noIsolation;S&&b.cancelable&&b.preventDefault()}}},[]),l=da.useCallback(function(h,b,g,y){var w={name:h,delta:b,target:g,should:y,shadowParent:$wn(g)};e.current.push(w),setTimeout(function(){e.current=e.current.filter(function(S){return S!==w})},1)},[]),c=da.useCallback(function(h){r.current=Jle(h),n.current=void 0},[]),d=da.useCallback(function(h){l(h.type,P3t(h),h.target,s(h,t.lockRef.current))},[]),f=da.useCallback(function(h){l(h.type,Jle(h),h.target,s(h,t.lockRef.current))},[]);da.useEffect(function(){return AU.push(i),t.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:f}),document.addEventListener("wheel",u,vD),document.addEventListener("touchmove",u,vD),document.addEventListener("touchstart",c,vD),function(){AU=AU.filter(function(h){return h!==i}),document.removeEventListener("wheel",u,vD),document.removeEventListener("touchmove",u,vD),document.removeEventListener("touchstart",c,vD)}},[]);var p=t.removeScrollBar,m=t.inert;return da.createElement(da.Fragment,null,m?da.createElement(i,{styles:Fwn(o)}):null,p?da.createElement(cD,{gapMode:t.gapMode}):null)}function $wn(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}var A3t=lD(Gle,T3t);var I3t=Yle.forwardRef(function(t,e){return Yle.createElement(hW,ci({},t,{ref:e,sideCar:A3t}))});I3t.classNames=hW.classNames;var vLe=I3t;var ul=F(ft(),1),wLe="Popover",[M3t,Lai]=Vi(wLe,[pLe]),yW=pLe(),[Bwn,XI]=M3t(wLe),R3t=t=>{let{__scopePopover:e,children:r,open:n,defaultOpen:o,onOpenChange:i,modal:a=!1}=t,s=yW(e),u=Ta.useRef(null),[l,c]=Ta.useState(!1),[d=!1,f]=Gc({prop:n,defaultProp:o,onChange:i});return(0,ul.jsx)(y3t,{...s,children:(0,ul.jsx)(Bwn,{scope:e,contentId:il(),triggerRef:u,open:d,onOpenChange:f,onOpenToggle:Ta.useCallback(()=>f(p=>!p),[f]),hasCustomAnchor:l,onCustomAnchorAdd:Ta.useCallback(()=>c(!0),[]),onCustomAnchorRemove:Ta.useCallback(()=>c(!1),[]),modal:a,children:r})})};R3t.displayName=wLe;var j3t="PopoverAnchor",qwn=Ta.forwardRef((t,e)=>{let{__scopePopover:r,...n}=t,o=XI(j3t,r),i=yW(r),{onCustomAnchorAdd:a,onCustomAnchorRemove:s}=o;return Ta.useEffect(()=>(a(),()=>s()),[a,s]),(0,ul.jsx)(hLe,{...i,...n,ref:e})});qwn.displayName=j3t;var N3t="PopoverTrigger",D3t=Ta.forwardRef((t,e)=>{let{__scopePopover:r,...n}=t,o=XI(N3t,r),i=yW(r),a=lb(e,o.triggerRef),s=(0,ul.jsx)(zf.button,{type:"button","aria-haspopup":"dialog","aria-expanded":o.open,"aria-controls":o.contentId,"data-state":q3t(o.open),...n,ref:a,onClick:Rx(t.onClick,o.onOpenToggle)});return o.hasCustomAnchor?s:(0,ul.jsx)(hLe,{asChild:!0,...i,children:s})});D3t.displayName=N3t;var SLe="PopoverPortal",[Uwn,zwn]=M3t(SLe,{forceMount:void 0}),L3t=t=>{let{__scopePopover:e,forceMount:r,children:n,container:o}=t,i=XI(SLe,e);return(0,ul.jsx)(Uwn,{scope:e,forceMount:r,children:(0,ul.jsx)(Xc,{present:r||i.open,children:(0,ul.jsx)(gLe,{asChild:!0,container:o,children:n})})})};L3t.displayName=SLe;var IU="PopoverContent",F3t=Ta.forwardRef((t,e)=>{let r=zwn(IU,t.__scopePopover),{forceMount:n=r.forceMount,...o}=t,i=XI(IU,t.__scopePopover);return(0,ul.jsx)(Xc,{present:n||i.open,children:i.modal?(0,ul.jsx)(Hwn,{...o,ref:e}):(0,ul.jsx)(Vwn,{...o,ref:e})})});F3t.displayName=IU;var Hwn=Ta.forwardRef((t,e)=>{let r=XI(IU,t.__scopePopover),n=Ta.useRef(null),o=lb(e,n),i=Ta.useRef(!1);return Ta.useEffect(()=>{let a=n.current;if(a)return zI(a)},[]),(0,ul.jsx)(vLe,{as:mW,allowPinchZoom:!0,children:(0,ul.jsx)(k3t,{...t,ref:o,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Rx(t.onCloseAutoFocus,a=>{a.preventDefault(),i.current||r.triggerRef.current?.focus()}),onPointerDownOutside:Rx(t.onPointerDownOutside,a=>{let s=a.detail.originalEvent,u=s.button===0&&s.ctrlKey===!0,l=s.button===2||u;i.current=l},{checkForDefaultPrevented:!1}),onFocusOutside:Rx(t.onFocusOutside,a=>a.preventDefault(),{checkForDefaultPrevented:!1})})})}),Vwn=Ta.forwardRef((t,e)=>{let r=XI(IU,t.__scopePopover),n=Ta.useRef(!1),o=Ta.useRef(!1);return(0,ul.jsx)(k3t,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{t.onCloseAutoFocus?.(i),i.defaultPrevented||(n.current||r.triggerRef.current?.focus(),i.preventDefault()),n.current=!1,o.current=!1},onInteractOutside:i=>{t.onInteractOutside?.(i),i.defaultPrevented||(n.current=!0,i.detail.originalEvent.type==="pointerdown"&&(o.current=!0));let a=i.target;r.triggerRef.current?.contains(a)&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&o.current&&i.preventDefault()}})}),k3t=Ta.forwardRef((t,e)=>{let{__scopePopover:r,trapFocus:n,onOpenAutoFocus:o,onCloseAutoFocus:i,disableOutsidePointerEvents:a,onEscapeKeyDown:s,onPointerDownOutside:u,onFocusOutside:l,onInteractOutside:c,...d}=t,f=XI(IU,r),p=yW(r);return II(),(0,ul.jsx)(cLe,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:o,onUnmountAutoFocus:i,children:(0,ul.jsx)(sLe,{asChild:!0,disableOutsidePointerEvents:a,onInteractOutside:c,onEscapeKeyDown:s,onPointerDownOutside:u,onFocusOutside:l,onDismiss:()=>f.onOpenChange(!1),children:(0,ul.jsx)(b3t,{"data-state":q3t(f.open),role:"dialog",id:f.contentId,...p,...d,ref:e,style:{...d.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),$3t="PopoverClose",B3t=Ta.forwardRef((t,e)=>{let{__scopePopover:r,...n}=t,o=XI($3t,r);return(0,ul.jsx)(zf.button,{type:"button",...n,ref:e,onClick:Rx(t.onClick,()=>o.onOpenChange(!1))})});B3t.displayName=$3t;var Wwn="PopoverArrow",Kwn=Ta.forwardRef((t,e)=>{let{__scopePopover:r,...n}=t,o=yW(r);return(0,ul.jsx)(_3t,{...o,...n,ref:e})});Kwn.displayName=Wwn;function q3t(t){return t?"open":"closed"}var U3t=R3t;var z3t=D3t,H3t=L3t,xLe=F3t,V3t=B3t;var Zle=U3t,Xle=z3t;var _W=bW.forwardRef(({className:t,align:e="center",sideOffset:r=4,container:n,...o},i)=>bW.createElement(H3t,{container:n??activeDocument.body},bW.createElement(xLe,{ref:i,align:e,sideOffset:r,className:_e("tw-z-popover tw-w-72 tw-rounded-md tw-border tw-border-solid tw-border-border tw-bg-primary tw-p-4 tw-text-normal tw-shadow-md tw-outline-none data-[state=open]:tw-animate-in data-[state=closed]:tw-animate-out data-[state=closed]:tw-fade-out-0 data-[state=open]:tw-fade-in-0 data-[state=closed]:tw-zoom-out-95 data-[state=open]:tw-zoom-in-95 data-[side=bottom]:tw-slide-in-from-top-2 data-[side=left]:tw-slide-in-from-right-2 data-[side=right]:tw-slide-in-from-left-2 data-[side=top]:tw-slide-in-from-bottom-2",t),...o})));_W.displayName=xLe.displayName;var CLe=V3t;kr();var OLe=F(X()),Qle=OLe.createContext(void 0),MU=OLe.createContext(void 0);var RU=F(X());function PLe(){let[t,e]=(0,RU.useState)(null),r=(0,RU.useContext)(MU);return(0,RU.useEffect)(()=>{let n=()=>{let o=app.workspace.getActiveFile();e(o)};return r?.addEventListener(vh.ACTIVE_LEAF_CHANGE,n),()=>{r?.removeEventListener(vh.ACTIVE_LEAF_CHANGE,n)}},[r]),t}var vW=require("obsidian"),Ke=F(X());function Jwn(t){let[e,r]=(0,Ke.useState)([]),n=PLe();return(0,Ke.useEffect)(()=>{async function o(){if(!n?.path)return;let i=await qi.getInstance().getDb(),a=await Due({db:i,filePath:n.path});r(a)}o()},[n?.path,t]),e}function Ywn(t,e){let[r,n]=(0,Ke.useState)(!0);return(0,Ke.useEffect)(()=>{if(!t)return;async function o(){let i=await qi.getInstance().hasIndex(t);n(i)}o()},[t,e]),r}function Zwn({score:t}){let e=Nue(t),r="\u{1F534}";return e===2&&(r="\u{1F7E0}"),e===3&&(r="\u{1F7E2}"),Ke.default.createElement("span",{className:"tw-text-sm"},r)}function Xwn({note:t,onAddToChat:e,onNavigateToNote:r}){let[n,o]=(0,Ke.useState)(!1),[i,a]=(0,Ke.useState)(null),s=(0,Ke.useCallback)(async()=>{if(i)return;let u=app.vault.getAbstractFileByPath(t.document.path);if(u instanceof vW.TFile){let l=await app.vault.cachedRead(u),c=l;if(l.startsWith("---")){let d=l.indexOf("---",3);d!==-1&&(c=l.slice(d+3).trim())}a(c.slice(0,1e3)+(c.length>1e3?"...":""))}},[i,t.document.path]);return(0,Ke.useEffect)(()=>{n&&s()},[n,s]),Ke.default.createElement(BP,{open:n,onOpenChange:o,className:"tw-rounded-md tw-border tw-border-solid tw-border-border"},Ke.default.createElement("div",{className:_e("tw-flex tw-items-center tw-justify-between tw-gap-2 tw-p-2")},Ke.default.createElement(ge,{variant:"ghost2",size:"icon",className:"tw-shrink-0",asChild:!0},Ke.default.createElement(_D,null,Ke.default.createElement(AC,{className:_e("tw-size-4 tw-transition-transform tw-duration-200",{"rotate-90":n})}))),Ke.default.createElement("div",{className:"tw-flex tw-shrink-0 tw-items-center tw-gap-2"},Ke.default.createElement(Zwn,{score:t.metadata.similarityScore??0})),Ke.default.createElement("div",{className:"tw-flex-1 tw-overflow-hidden"},Ke.default.createElement("a",{onClick:u=>{u.preventDefault();let l=u.metaKey||u.ctrlKey;r(l)},onAuxClick:u=>{u.button===1&&(u.preventDefault(),r(!0))},className:"tw-block tw-w-full tw-truncate tw-text-sm tw-font-bold tw-text-normal"},t.document.title)),Ke.default.createElement(Mt,null,Ke.default.createElement(Rt,{asChild:!0},Ke.default.createElement(ge,{variant:"ghost2",size:"icon",onClick:e,className:"tw-shrink-0"},Ke.default.createElement(hm,{className:"tw-size-4"}))),Ke.default.createElement(It,null,"Add to Chat"))),Ke.default.createElement(qP,null,Ke.default.createElement("div",{className:"tw-border-[0px] tw-border-t tw-border-solid tw-border-border tw-px-4 tw-py-2"},Ke.default.createElement("div",{className:"tw-whitespace-pre-wrap tw-text-wrap tw-break-all tw-text-xs tw-text-muted tw-opacity-75"},t.document.path),i&&Ke.default.createElement("div",{className:"tw-overflow-hidden tw-whitespace-pre-wrap tw-border-t tw-border-border tw-pb-4 tw-pt-2 tw-text-xs tw-text-normal"},i)),Ke.default.createElement("div",{className:"tw-flex tw-items-center tw-gap-4 tw-border-[0px] tw-border-t tw-border-solid tw-border-border tw-px-4 tw-py-2 tw-text-xs tw-text-muted"},t.metadata.similarityScore!=null&&Ke.default.createElement("div",{className:"tw-flex tw-items-center tw-gap-1"},Ke.default.createElement("span",null,"Similarity: ",(t.metadata.similarityScore*100).toFixed(1),"%")),t.metadata.hasOutgoingLinks&&Ke.default.createElement("div",{className:"tw-flex tw-items-center tw-gap-1"},Ke.default.createElement(N4,{className:"tw-size-4"}),Ke.default.createElement("span",null,"Outgoing links")),t.metadata.hasBacklinks&&Ke.default.createElement("div",{className:"tw-flex tw-items-center tw-gap-1"},Ke.default.createElement(j4,{className:"tw-size-4"}),Ke.default.createElement("span",null,"Backlinks")))))}function Qwn({note:t,onAddToChat:e,onNavigateToNote:r,children:n}){return Ke.default.createElement(Zle,{key:t.document.path},Ke.default.createElement(Xle,{asChild:!0},n),Ke.default.createElement(_W,{className:"tw-flex tw-w-fit tw-min-w-72 tw-max-w-96 tw-flex-col tw-gap-2 tw-overflow-hidden"},Ke.default.createElement("span",{className:"tw-text-sm tw-text-normal"},t.document.title),Ke.default.createElement("span",{className:"tw-text-xs tw-text-muted"},t.document.path),Ke.default.createElement("div",{className:"tw-flex tw-gap-2"},Ke.default.createElement("button",{onClick:e,className:"tw-inline-flex tw-items-center tw-gap-2 tw-border tw-border-solid tw-border-border !tw-bg-transparent !tw-shadow-none hover:!tw-bg-interactive-hover"},"Add to Chat ",Ke.default.createElement(hm,{className:"tw-size-4"})),Ke.default.createElement("button",{onClick:o=>{let i=o.metaKey||o.ctrlKey;r(i)},className:"tw-inline-flex tw-items-center tw-gap-2 tw-border tw-border-solid tw-border-border !tw-bg-transparent !tw-shadow-none hover:!tw-bg-interactive-hover"},"Navigate to Note ",Ke.default.createElement(x4,{className:"tw-size-4"})))))}var ece=(0,Ke.memo)(({className:t,onInsertToChat:e,defaultOpen:r=!1})=>{let[n,o]=(0,Ke.useState)(0),[i,a]=(0,Ke.useState)(r),s=Jwn(n),u=PLe(),l=Ywn(u?.path??"",n),c=(p,m=!1)=>{let h=app.vault.getAbstractFileByPath(p);h instanceof vW.TFile&&app.workspace.getLeaf(m).openFile(h)},d=p=>{e(`[[${p}]]`)},f=async()=>{u&&(await qi.getInstance().reindexFile(u),new vW.Notice(`Reindexed ${u.name}`),o(n+1))};return Ke.default.createElement("div",{className:_e("tw-w-full tw-border tw-border-solid tw-border-transparent tw-border-b-border tw-pb-2",t)},Ke.default.createElement(BP,{open:i,onOpenChange:a},Ke.default.createElement("div",{className:"tw-flex tw-items-center tw-justify-between tw-pb-2 tw-pl-1"},Ke.default.createElement("div",{className:"tw-flex tw-flex-1 tw-items-center tw-gap-2"},Ke.default.createElement("span",{className:"tw-font-semibold tw-text-normal"},"Relevant Notes"),Ke.default.createElement(Mt,null,Ke.default.createElement(Rt,{asChild:!0},Ke.default.createElement(Wb,{className:"tw-size-4 tw-text-muted"})),Ke.default.createElement(It,{side:"bottom",className:"tw-w-64"},"Relevance is a combination of semantic similarity and links.")),!l&&Ke.default.createElement(Mt,null,Ke.default.createElement(Rt,{asChild:!0},Ke.default.createElement(Ef,{className:"tw-size-4 tw-text-warning"})),Ke.default.createElement(It,{side:"bottom"},"Note has not been indexed"))),Ke.default.createElement("div",{className:"tw-flex tw-items-center"},Ke.default.createElement(Mt,null,Ke.default.createElement(Rt,{asChild:!0},Ke.default.createElement(ge,{variant:"ghost2",size:"icon",onClick:f},Ke.default.createElement(q4,{className:"tw-size-4"}))),Ke.default.createElement(It,{side:"bottom"},"Reindex Current Note")),s.length>0&&Ke.default.createElement(_D,{asChild:!0},Ke.default.createElement(ge,{variant:"ghost2",size:"icon"},i?Ke.default.createElement(sy,{className:"tw-size-5"}):Ke.default.createElement(ki,{className:"tw-size-5"}))))),s.length===0&&Ke.default.createElement("div",{className:"tw-flex tw-max-h-12 tw-flex-wrap tw-gap-x-2 tw-gap-y-1 tw-overflow-y-hidden tw-px-1"},Ke.default.createElement("span",{className:"tw-text-xs tw-text-muted"},"No relevant notes found")),!i&&s.length>0&&Ke.default.createElement("div",{className:"tw-flex tw-max-h-6 tw-flex-wrap tw-gap-x-2 tw-gap-y-1 tw-overflow-y-hidden tw-px-1"},s.map(p=>Ke.default.createElement(Qwn,{key:p.document.path,note:p,onAddToChat:()=>d(p.document.title),onNavigateToNote:m=>c(p.document.path,m)},Ke.default.createElement(Zp,{variant:"outline",key:p.document.path,className:"tw-max-w-40 tw-text-xs tw-text-muted hover:tw-cursor-pointer hover:tw-bg-interactive-hover"},Ke.default.createElement("span",{className:"tw-truncate"},p.document.title))))),Ke.default.createElement(qP,null,Ke.default.createElement("div",{className:"tw-flex tw-max-h-screen tw-flex-col tw-gap-2 tw-overflow-y-auto tw-px-1 tw-py-2"},s.map(p=>Ke.default.createElement(Xwn,{note:p,key:p.document.path,onAddToChat:()=>d(p.document.title),onNavigateToNote:m=>c(p.document.path,m)}))))))});ece.displayName="RelevantNotes";xd();var Xp=F(X());var wW=Xp.forwardRef(({className:t,...e},r)=>Xp.createElement("div",{ref:r,className:_e("tw-rounded-xl tw-border tw-border-border tw-bg-primary tw-text-normal tw-shadow",t),...e}));wW.displayName="Card";var SW=Xp.forwardRef(({className:t,...e},r)=>Xp.createElement("div",{ref:r,className:_e("tw-flex tw-flex-col tw-space-y-1.5 tw-p-6",t),...e}));SW.displayName="CardHeader";var ELe=Xp.forwardRef(({className:t,...e},r)=>Xp.createElement("div",{ref:r,className:_e("tw-font-semibold tw-leading-none tw-tracking-tight",t),...e}));ELe.displayName="CardTitle";var e0n=Xp.forwardRef(({className:t,...e},r)=>Xp.createElement("div",{ref:r,className:_e("tw-text-sm tw-text-muted",t),...e}));e0n.displayName="CardDescription";var xW=Xp.forwardRef(({className:t,...e},r)=>Xp.createElement("div",{ref:r,className:_e("tw-p-6 tw-pt-0",t),...e}));xW.displayName="CardContent";var t0n=Xp.forwardRef(({className:t,...e},r)=>Xp.createElement("div",{ref:r,className:_e("tw-flex tw-items-center tw-p-6 tw-pt-0",t),...e}));t0n.displayName="CardFooter";kr();tr();var Ki=F(X()),TLe={activeNote:{title:"Active Note Insights",prompts:["Provide three follow-up questions worded as if I'm asking you based on {activeNote}?","What key questions does {activeNote} answer?","Give me a quick recap of {activeNote} in two sentences."]},quoteNote:{title:"Note Link Chat",prompts:["Based on [[<note>]], what improvements should we focus on next?","Summarize the key points from [[<note>]].","Summarize the recent updates from [[<note>]].","Roast my writing in [[<note>]] and give concrete actionable feedback"]},fun:{title:"Test LLM",prompts:["9.11 and 9.8, which is bigger?","What's the longest river in the world?","If a lead ball and a feather are dropped simultaneously from the same height, which will reach the ground first?"]},qaVault:{title:"Vault Q&A",prompts:["What insights can I gather about <topic> from my notes?","Explain <concept> based on my stored notes.","Highlight important details on <topic> from my notes.","Based on my notes on <topic>, what is the question that I should be asking, but am not?"]},copilotPlus:{title:"Copilot Plus",prompts:["Give me a recap of last week @vault","What are the key takeaways from my notes on <topic> @vault","Summarize <url> in under 10 bullet points","@youtube <video_url>","@websearch what are most recent updates in the AI industry","What are the key insights from this paper <arxiv_url>","What new methods are proposed in this paper [[<note_with_embedded_pdf>]]"]}},W3t={llm_chain:["activeNote","quoteNote","fun"],vault_qa:["qaVault","qaVault","quoteNote"],copilot_plus:["copilotPlus","copilotPlus","copilotPlus"],project:["copilotPlus","copilotPlus","copilotPlus"]};function r0n(t="llm_chain"){let e=W3t[t]||W3t.llm_chain,r={};return e.map(n=>(r[n]||(r[n]=[...TLe[n].prompts].sort(()=>Math.random()-.5)),{title:TLe[n].title,text:r[n].pop()||TLe[n].prompts[0]}))}var K3t=({onClick:t})=>{let[e]=Xg(),r=(0,Ki.useMemo)(()=>r0n(e),[e]),o=Tn().indexVaultToVectorStore;return Ki.default.createElement("div",{className:"tw-flex tw-flex-col tw-gap-4"},Ki.default.createElement(wW,{className:"tw-w-full tw-bg-transparent"},Ki.default.createElement(SW,{className:"tw-px-2"},Ki.default.createElement(ELe,null,"Suggested Prompts")),Ki.default.createElement(xW,{className:"tw-p-2 tw-pt-0"},Ki.default.createElement("div",{className:"tw-flex tw-flex-col tw-gap-2"},r.map((i,a)=>Ki.default.createElement("div",{key:a,className:"tw-flex tw-justify-between tw-gap-2 tw-rounded-md tw-border tw-border-solid tw-border-border tw-p-2 tw-text-sm"},Ki.default.createElement("div",{className:"tw-flex tw-flex-col tw-gap-1"},Ki.default.createElement("div",{className:"tw-text-muted"},i.title),Ki.default.createElement("div",null,i.text)),Ki.default.createElement("div",{className:"tw-flex tw-h-full tw-items-start"},Ki.default.createElement(Mt,null,Ki.default.createElement(Rt,{asChild:!0},Ki.default.createElement(ge,{variant:"ghost2",size:"fit",className:"tw-text-muted",onClick:()=>t(i.text)},Ki.default.createElement(hm,{className:"tw-size-4"}))),Ki.default.createElement(It,null,"Add to Chat")))))))),e==="vault_qa"&&Ki.default.createElement("div",{className:"tw-rounded-md tw-border tw-border-solid tw-border-border tw-p-2 tw-text-sm"},"Please note that this is a retrieval-based QA. Questions should contain keywords and concepts that exist literally in your vault"),e==="vault_qa"&&o==="NEVER"&&Ki.default.createElement("div",{className:"tw-rounded-md tw-border tw-border-solid tw-border-border tw-p-2 tw-text-sm"},Ki.default.createElement("div",null,Ki.default.createElement(Ef,{className:"tw-size-4"})," Your auto-index strategy is set to"," ",Ki.default.createElement("b",null,"NEVER"),". Before proceeding, click the"," ",Ki.default.createElement("span",{className:"tw-text-accent"},"Refresh Index")," button below or run the"," ",Ki.default.createElement("span",{className:"tw-text-accent"},"Copilot command: Index (refresh) vault for QA")," ","to update the index.")))};tr();var Qd=F(X()),G3t=(0,Qd.memo)(({chatHistory:t,currentAiMessage:e,loading:r,loadingMessage:n,app:o,onRegenerate:i,onEdit:a,onDelete:s,onInsertToChat:u,onReplaceChat:l,showHelperComponents:c=!0})=>{let[d,f]=(0,Qd.useState)(""),p=Tn(),m=()=>{let b=document.querySelector("[data-testid='chat-messages']");b&&(b.scrollTop=b.scrollHeight)};if((0,Qd.useEffect)(()=>{r||m()},[r]),(0,Qd.useEffect)(()=>{let b;return r?b=setInterval(()=>{f(g=>g.length<6?g+".":"")},200):f(""),()=>clearInterval(b)},[r]),!t.filter(b=>b.isVisible).length&&!e)return Qd.default.createElement("div",{className:"tw-flex tw-size-full tw-flex-col tw-gap-2 tw-overflow-y-auto"},c&&p.showRelevantNotes&&Qd.default.createElement(ece,{onInsertToChat:u,defaultOpen:!0,key:"relevant-notes-before-chat"}),c&&p.showSuggestedPrompts&&Qd.default.createElement(K3t,{onClick:l}));let h=()=>n?`${n} ${d}`:d;return Qd.default.createElement("div",{className:"tw-flex tw-h-full tw-flex-1 tw-flex-col tw-overflow-hidden"},c&&p.showRelevantNotes&&Qd.default.createElement(ece,{className:"tw-mb-4",onInsertToChat:u,defaultOpen:!1,key:"relevant-notes-in-chat"}),Qd.default.createElement("div",{"data-testid":"chat-messages",className:"tw-mt-auto tw-box-border tw-flex tw-w-full tw-flex-1 tw-select-text tw-flex-col tw-items-start tw-justify-start tw-overflow-y-auto tw-scroll-smooth tw-break-words tw-text-[calc(var(--font-text-size)_-_2px)]"},t.map((b,g)=>b.isVisible&&Qd.default.createElement(KDe,{key:g,message:b,app:o,isStreaming:!1,onRegenerate:()=>i(g),onEdit:y=>a(g,y),onDelete:()=>s(g),chatHistory:t})),(e||r)&&Qd.default.createElement(KDe,{key:`ai_message_${e}`,message:{sender:"AI",message:e||h(),isVisible:!0,timestamp:null},app:o,isStreaming:!0,onDelete:()=>{},chatHistory:t})))});G3t.displayName="ChatMessages";var J3t=G3t;wn();var tce=F(X());function rce(t){let[e,r]=(0,tce.useState)(null);(0,tce.useEffect)(()=>{(async()=>{let i=await y4e();i.version&&r(i.version)})()},[]);let n=e!==null&&uG(e,t);return{latestVersion:e,hasUpdate:n}}tr();wn();var Ng=F(X());function Y3t({currentVersion:t}){let{latestVersion:e,hasUpdate:r}=rce(t),n=Tn().lastDismissedVersion,[o,i]=(0,Ng.useState)(!0),a=r&&e&&uG(e,t)&&n!==e,s=()=>{e&&(i(!1),setTimeout(()=>{dt("lastDismissedVersion",e)},300))};return a?Ng.default.createElement("div",{className:_e("tw-min-h-14 tw-overflow-hidden",o?"tw-duration-300 tw-animate-in tw-slide-in-from-top":"tw-duration-300 tw-animate-out tw-slide-out-to-top")},Ng.default.createElement("div",{className:"tw-mb-1 tw-flex tw-items-center tw-justify-between tw-gap-2 tw-rounded-md tw-border tw-border-solid tw-border-border tw-p-2 tw-pl-3 tw-text-xs"},Ng.default.createElement("div",{className:"tw-flex tw-items-center tw-gap-2"},Ng.default.createElement("span",{className:"tw-font-medium"},"Update available:"),Ng.default.createElement("a",{href:"https://github.com/logancyang/obsidian-copilot/releases/latest",target:"_blank",rel:"noopener noreferrer",className:"tw-text-normal"},"v",e)),Ng.default.createElement("div",{className:"tw-flex tw-items-center tw-gap-2"},Ng.default.createElement(ge,{size:"fit",variant:"ghost2",className:"tw-text-accent hover:tw-text-accent-hover",onClick:()=>{window.open("obsidian://show-plugin?id=copilot","_blank"),s()}},"Update"),Ng.default.createElement(ge,{variant:"ghost2",size:"icon",onClick:s},Ng.default.createElement($i,{className:"tw-size-4"}))))):null}var Z3t=require("obsidian");var jU=class extends Z3t.FuzzySuggestModal{constructor(r,n){super(r);this.onChooseFolder=n}getItems(){let r=new Set,n=Fne(this.app);return this.app.vault.getAllLoadedFiles().forEach(o=>{o.parent?.path&&o.parent.path!=="/"&&!n.some(a=>o.parent.path===a||o.parent.path.startsWith(a+"/"))&&r.add(o.parent.path)}),Array.from(r)}getItemText(r){return r}onChooseItem(r,n){this.onChooseFolder(r)}};var ALe=require("obsidian");var CW=class extends OU{constructor({app:e,onFileSelect:r,excludeFilePaths:n,titleOnly:o=!1}){super(e),this.onFileSelect=r,this.availableNotes=this.getOrderedProjectFiles(n),this.titleOnly=o,this.setTitle("Select File")}getOrderedProjectFiles(e=[]){let r=["mp3","mp4","m4a","wav","webm"],n=this.app.workspace.getLastOpenFiles().map(a=>this.app.vault.getAbstractFileByPath(a)).filter(a=>a instanceof ALe.TFile&&!e.includes(a.path)&&a.path!==this.activeNote?.path&&!r.includes(a.extension.toLowerCase())),i=this.app.vault.getFiles().filter(a=>!r.includes(a.extension.toLowerCase())).filter(a=>!n.some(s=>s.path===a.path)&&!e.includes(a.path)&&a.path!==this.activeNote?.path);return[...this.activeNote?[this.activeNote]:[],...n,...i]}getItems(){if(this.titleOnly){let e=new Map;return this.availableNotes.forEach(r=>{e.set(r.basename,r)}),Array.from(e.values())}return this.availableNotes}getItemText(e){let r=e.path===this.activeNote?.path;return this.formatNoteTitle(e.basename,r,e.extension)}onChooseItem(e,r){this.onFileSelect(e)}renderSuggestion(e,r){let n=r.createDiv({cls:"pointer-events-none"});if(e.item instanceof ALe.TFile){let o=n.createDiv(),i=e.item;o.setText(this.formatNoteTitle(i.basename,i===this.activeNote,i.extension)),this.titleOnly||n.createDiv({cls:"mt-1 text-muted text-xs"}).setText(i.path)}}formatNoteTitle(e,r,n){let o=e;return r&&(o+=" (current)"),n&&(o+=` (${n.toUpperCase()})`),o}};wn();var X3t=require("obsidian"),NU=class extends X3t.FuzzySuggestModal{constructor(r,n){super(r);this.onChooseTag=n}getItems(){let r=app.vault.getMarkdownFiles(),n=new Set;for(let o of r)iR(o).forEach(a=>n.add(a));return Array.from(n)}getItemText(r){return r}onChooseItem(r,n){this.onChooseTag(r)}};var DU=F(X());var nce=F(X()),n0n=2;function o0n(t,e){return e&&e>1?t.current?t.current.offsetHeight<t.current.scrollHeight:!1:(t.current&&t.current?.offsetWidth+n0n<t.current?.scrollWidth)??!1}function i0n(t){switch(t){case 2:return"tw-line-clamp-2";case 3:return"tw-line-clamp-3";default:return""}}var QI=({children:t,className:e,lineClamp:r,tooltipContent:n,...o})=>{let i=(0,nce.useRef)(null),[a,s]=(0,nce.useState)(!1);return DU.default.createElement(po,{delayDuration:0},DU.default.createElement(Mt,{open:a,onOpenChange:l=>{s(l&&o0n(i,r))}},DU.default.createElement(Rt,{asChild:!0},DU.default.createElement("div",{...o,ref:i,className:_e("tw-max-w-full tw-text-normal",(!r||r<=1)&&"tw-truncate",r&&i0n(r),e),"data-testid":"truncatedText"},t)),DU.default.createElement(It,{className:"tw-max-w-64 tw-text-wrap tw-break-words"},n??t)))};var AW=F(X());var sHt=F(X(),1),xt=F(X(),1),uce=(0,xt.createContext)(null);uce.displayName="PanelGroupContext";var fs={group:"data-panel-group",groupDirection:"data-panel-group-direction",groupId:"data-panel-group-id",panel:"data-panel",panelCollapsible:"data-panel-collapsible",panelId:"data-panel-id",panelSize:"data-panel-size",resizeHandle:"data-resize-handle",resizeHandleActive:"data-resize-handle-active",resizeHandleEnabled:"data-panel-resize-handle-enabled",resizeHandleId:"data-panel-resize-handle-id",resizeHandleState:"data-resize-handle-state"},LLe=10,SD=xt.useLayoutEffect,Q3t=sHt.useId,a0n=typeof Q3t=="function"?Q3t:()=>null,s0n=0;function FLe(t=null){let e=a0n(),r=(0,xt.useRef)(t||e||null);return r.current===null&&(r.current=""+s0n++),t??r.current}function uHt({children:t,className:e="",collapsedSize:r,collapsible:n,defaultSize:o,forwardedRef:i,id:a,maxSize:s,minSize:u,onCollapse:l,onExpand:c,onResize:d,order:f,style:p,tagName:m="div",...h}){let b=(0,xt.useContext)(uce);if(b===null)throw Error("Panel components must be rendered within a PanelGroup container");let{collapsePanel:g,expandPanel:y,getPanelSize:w,getPanelStyle:S,groupId:C,isPanelCollapsed:P,reevaluatePanelConstraints:E,registerPanel:A,resizePanel:I,unregisterPanel:R}=b,j=FLe(a),N=(0,xt.useRef)({callbacks:{onCollapse:l,onExpand:c,onResize:d},constraints:{collapsedSize:r,collapsible:n,defaultSize:o,maxSize:s,minSize:u},id:j,idIsFromProps:a!==void 0,order:f});(0,xt.useRef)({didLogMissingDefaultSizeWarning:!1}),SD(()=>{let{callbacks:k,constraints:H}=N.current,V={...H};N.current.id=j,N.current.idIsFromProps=a!==void 0,N.current.order=f,k.onCollapse=l,k.onExpand=c,k.onResize=d,H.collapsedSize=r,H.collapsible=n,H.defaultSize=o,H.maxSize=s,H.minSize=u,(V.collapsedSize!==H.collapsedSize||V.collapsible!==H.collapsible||V.maxSize!==H.maxSize||V.minSize!==H.minSize)&&E(N.current,V)}),SD(()=>{let k=N.current;return A(k),()=>{R(k)}},[f,j,A,R]),(0,xt.useImperativeHandle)(i,()=>({collapse:()=>{g(N.current)},expand:k=>{y(N.current,k)},getId(){return j},getSize(){return w(N.current)},isCollapsed(){return P(N.current)},isExpanded(){return!P(N.current)},resize:k=>{I(N.current,k)}}),[g,y,w,P,j,I]);let $=S(N.current,o);return(0,xt.createElement)(m,{...h,children:t,className:e,id:j,style:{...$,...p},[fs.groupId]:C,[fs.panel]:"",[fs.panelCollapsible]:n||void 0,[fs.panelId]:j,[fs.panelSize]:parseFloat(""+$.flexGrow).toFixed(1)})}var kLe=(0,xt.forwardRef)((t,e)=>(0,xt.createElement)(uHt,{...t,forwardedRef:e}));uHt.displayName="Panel";kLe.displayName="forwardRef(Panel)";var u0n;function l0n(){return u0n}var DLe=null,c0n=!0,ice=-1,UP=null;function d0n(t,e){if(e){let r=(e&pHt)!==0,n=(e&mHt)!==0,o=(e&hHt)!==0,i=(e&gHt)!==0;if(r)return o?"se-resize":i?"ne-resize":"e-resize";if(n)return o?"sw-resize":i?"nw-resize":"w-resize";if(o)return"s-resize";if(i)return"n-resize"}switch(t){case"horizontal":return"ew-resize";case"intersection":return"move";case"vertical":return"ns-resize"}}function f0n(){UP!==null&&(document.head.removeChild(UP),DLe=null,UP=null,ice=-1)}function ILe(t,e){var r,n;if(!c0n)return;let o=d0n(t,e);if(DLe!==o){if(DLe=o,UP===null){UP=document.createElement("style");let a=l0n();a&&UP.setAttribute("nonce",a),document.head.appendChild(UP)}if(ice>=0){var i;(i=UP.sheet)===null||i===void 0||i.removeRule(ice)}ice=(r=(n=UP.sheet)===null||n===void 0?void 0:n.insertRule(`*{cursor: ${o} !important;}`))!==null&&r!==void 0?r:-1}}function lHt(t){return t.type==="keydown"}function cHt(t){return t.type.startsWith("pointer")}function dHt(t){return t.type.startsWith("mouse")}function lce(t){if(cHt(t)){if(t.isPrimary)return{x:t.clientX,y:t.clientY}}else if(dHt(t))return{x:t.clientX,y:t.clientY};return{x:1/0,y:1/0}}function p0n(){if(typeof matchMedia=="function")return matchMedia("(pointer:coarse)").matches?"coarse":"fine"}function m0n(t,e,r){return r?t.x<e.x+e.width&&t.x+t.width>e.x&&t.y<e.y+e.height&&t.y+t.height>e.y:t.x<=e.x+e.width&&t.x+t.width>=e.x&&t.y<=e.y+e.height&&t.y+t.height>=e.y}function h0n(t,e){if(t===e)throw new Error("Cannot compare node with itself");let r={a:rHt(t),b:rHt(e)},n;for(;r.a.at(-1)===r.b.at(-1);)t=r.a.pop(),e=r.b.pop(),n=t;fn(n,"Stacking order can only be calculated for elements with a common ancestor");let o={a:tHt(eHt(r.a)),b:tHt(eHt(r.b))};if(o.a===o.b){let i=n.childNodes,a={a:r.a.at(-1),b:r.b.at(-1)},s=i.length;for(;s--;){let u=i[s];if(u===a.a)return 1;if(u===a.b)return-1}}return Math.sign(o.a-o.b)}var g0n=/\b(?:position|zIndex|opacity|transform|webkitTransform|mixBlendMode|filter|webkitFilter|isolation)\b/;function y0n(t){var e;let r=getComputedStyle((e=fHt(t))!==null&&e!==void 0?e:t).display;return r==="flex"||r==="inline-flex"}function b0n(t){let e=getComputedStyle(t);return!!(e.position==="fixed"||e.zIndex!=="auto"&&(e.position!=="static"||y0n(t))||+e.opacity<1||"transform"in e&&e.transform!=="none"||"webkitTransform"in e&&e.webkitTransform!=="none"||"mixBlendMode"in e&&e.mixBlendMode!=="normal"||"filter"in e&&e.filter!=="none"||"webkitFilter"in e&&e.webkitFilter!=="none"||"isolation"in e&&e.isolation==="isolate"||g0n.test(e.willChange)||e.webkitOverflowScrolling==="touch")}function eHt(t){let e=t.length;for(;e--;){let r=t[e];if(fn(r,"Missing node"),b0n(r))return r}return null}function tHt(t){return t&&Number(getComputedStyle(t).zIndex)||0}function rHt(t){let e=[];for(;t;)e.push(t),t=fHt(t);return e}function fHt(t){let{parentNode:e}=t;return e&&e instanceof ShadowRoot?e.host:e}var pHt=1,mHt=2,hHt=4,gHt=8,_0n=p0n()==="coarse",cb=[],$U=!1,eM=new Map,cce=new Map,EW=new Set;function v0n(t,e,r,n,o){var i;let{ownerDocument:a}=e,s={direction:r,element:e,hitAreaMargins:n,setResizeHandlerState:o},u=(i=eM.get(a))!==null&&i!==void 0?i:0;return eM.set(a,u+1),EW.add(s),ace(),function(){var c;cce.delete(t),EW.delete(s);let d=(c=eM.get(a))!==null&&c!==void 0?c:1;if(eM.set(a,d-1),ace(),d===1&&eM.delete(a),cb.includes(s)){let f=cb.indexOf(s);f>=0&&cb.splice(f,1),BLe(),o("up",!0,null)}}}function w0n(t){let{target:e}=t,{x:r,y:n}=lce(t);$U=!0,$Le({target:e,x:r,y:n}),ace(),cb.length>0&&(sce("down",t),t.preventDefault(),yHt(e)||t.stopImmediatePropagation())}function MLe(t){let{x:e,y:r}=lce(t);if($U&&t.buttons===0&&($U=!1,sce("up",t)),!$U){let{target:n}=t;$Le({target:n,x:e,y:r})}sce("move",t),BLe(),cb.length>0&&t.preventDefault()}function RLe(t){let{target:e}=t,{x:r,y:n}=lce(t);cce.clear(),$U=!1,cb.length>0&&(t.preventDefault(),yHt(e)||t.stopImmediatePropagation()),sce("up",t),$Le({target:e,x:r,y:n}),BLe(),ace()}function yHt(t){let e=t;for(;e;){if(e.hasAttribute(fs.resizeHandle))return!0;e=e.parentElement}return!1}function $Le({target:t,x:e,y:r}){cb.splice(0);let n=null;(t instanceof HTMLElement||t instanceof SVGElement)&&(n=t),EW.forEach(o=>{let{element:i,hitAreaMargins:a}=o,s=i.getBoundingClientRect(),{bottom:u,left:l,right:c,top:d}=s,f=_0n?a.coarse:a.fine;if(e>=l-f&&e<=c+f&&r>=d-f&&r<=u+f){if(n!==null&&document.contains(n)&&i!==n&&!i.contains(n)&&!n.contains(i)&&h0n(n,i)>0){let m=n,h=!1;for(;m&&!m.contains(i);){if(m0n(m.getBoundingClientRect(),s,!0)){h=!0;break}m=m.parentElement}if(h)return}cb.push(o)}})}function jLe(t,e){cce.set(t,e)}function BLe(){let t=!1,e=!1;cb.forEach(n=>{let{direction:o}=n;o==="horizontal"?t=!0:e=!0});let r=0;cce.forEach(n=>{r|=n}),t&&e?ILe("intersection",r):t?ILe("horizontal",r):e?ILe("vertical",r):f0n()}var NLe=new AbortController;function ace(){NLe.abort(),NLe=new AbortController;let t={capture:!0,signal:NLe.signal};EW.size&&($U?(cb.length>0&&eM.forEach((e,r)=>{let{body:n}=r;e>0&&(n.addEventListener("contextmenu",RLe,t),n.addEventListener("pointerleave",MLe,t),n.addEventListener("pointermove",MLe,t))}),eM.forEach((e,r)=>{let{body:n}=r;n.addEventListener("pointerup",RLe,t),n.addEventListener("pointercancel",RLe,t)})):eM.forEach((e,r)=>{let{body:n}=r;e>0&&(n.addEventListener("pointerdown",w0n,t),n.addEventListener("pointermove",MLe,t))}))}function sce(t,e){EW.forEach(r=>{let{setResizeHandlerState:n}=r,o=cb.includes(r);n(t,o,e)})}function S0n(){let[t,e]=(0,xt.useState)(0);return(0,xt.useCallback)(()=>e(r=>r+1),[])}function fn(t,e){if(!t)throw console.error(e),Error(e)}function xD(t,e,r=LLe){return t.toFixed(r)===e.toFixed(r)?0:t>e?1:-1}function zP(t,e,r=LLe){return xD(t,e,r)===0}function Xm(t,e,r){return xD(t,e,r)===0}function x0n(t,e,r){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++){let o=t[n],i=e[n];if(!Xm(o,i,r))return!1}return!0}function kU({panelConstraints:t,panelIndex:e,size:r}){let n=t[e];fn(n!=null,`Panel constraints not found for index ${e}`);let{collapsedSize:o=0,collapsible:i,maxSize:a=100,minSize:s=0}=n;if(xD(r,s)<0)if(i){let u=(o+s)/2;xD(r,u)<0?r=o:r=s}else r=s;return r=Math.min(a,r),r=parseFloat(r.toFixed(LLe)),r}function OW({delta:t,initialLayout:e,panelConstraints:r,pivotIndices:n,prevLayout:o,trigger:i}){if(Xm(t,0))return e;let a=[...e],[s,u]=n;fn(s!=null,"Invalid first pivot index"),fn(u!=null,"Invalid second pivot index");let l=0;if(i==="keyboard"){{let d=t<0?u:s,f=r[d];fn(f,`Panel constraints not found for index ${d}`);let{collapsedSize:p=0,collapsible:m,minSize:h=0}=f;if(m){let b=e[d];if(fn(b!=null,`Previous layout not found for panel index ${d}`),Xm(b,p)){let g=h-b;xD(g,Math.abs(t))>0&&(t=t<0?0-g:g)}}}{let d=t<0?s:u,f=r[d];fn(f,`No panel constraints found for index ${d}`);let{collapsedSize:p=0,collapsible:m,minSize:h=0}=f;if(m){let b=e[d];if(fn(b!=null,`Previous layout not found for panel index ${d}`),Xm(b,h)){let g=b-p;xD(g,Math.abs(t))>0&&(t=t<0?0-g:g)}}}}{let d=t<0?1:-1,f=t<0?u:s,p=0;for(;;){let h=e[f];fn(h!=null,`Previous layout not found for panel index ${f}`);let g=kU({panelConstraints:r,panelIndex:f,size:100})-h;if(p+=g,f+=d,f<0||f>=r.length)break}let m=Math.min(Math.abs(t),Math.abs(p));t=t<0?0-m:m}{let f=t<0?s:u;for(;f>=0&&f<r.length;){let p=Math.abs(t)-Math.abs(l),m=e[f];fn(m!=null,`Previous layout not found for panel index ${f}`);let h=m-p,b=kU({panelConstraints:r,panelIndex:f,size:h});if(!Xm(m,b)&&(l+=m-b,a[f]=b,l.toPrecision(3).localeCompare(Math.abs(t).toPrecision(3),void 0,{numeric:!0})>=0))break;t<0?f--:f++}}if(x0n(o,a))return o;{let d=t<0?u:s,f=e[d];fn(f!=null,`Previous layout not found for panel index ${d}`);let p=f+l,m=kU({panelConstraints:r,panelIndex:d,size:p});if(a[d]=m,!Xm(m,p)){let h=p-m,g=t<0?u:s;for(;g>=0&&g<r.length;){let y=a[g];fn(y!=null,`Previous layout not found for panel index ${g}`);let w=y+h,S=kU({panelConstraints:r,panelIndex:g,size:w});if(Xm(y,S)||(h-=S-y,a[g]=S),Xm(h,0))break;t>0?g--:g++}}}let c=a.reduce((d,f)=>f+d,0);return Xm(c,100)?a:o}function C0n({layout:t,panelsArray:e,pivotIndices:r}){let n=0,o=100,i=0,a=0,s=r[0];fn(s!=null,"No pivot index found"),e.forEach((d,f)=>{let{constraints:p}=d,{maxSize:m=100,minSize:h=0}=p;f===s?(n=h,o=m):(i+=h,a+=m)});let u=Math.min(o,100-i),l=Math.max(n,100-a),c=t[s];return{valueMax:u,valueMin:l,valueNow:c}}function TW(t,e=document){return Array.from(e.querySelectorAll(`[${fs.resizeHandleId}][data-panel-group-id="${t}"]`))}function bHt(t,e,r=document){let o=TW(t,r).findIndex(i=>i.getAttribute(fs.resizeHandleId)===e);return o??null}function _Ht(t,e,r){let n=bHt(t,e,r);return n!=null?[n,n+1]:[-1,-1]}function O0n(t){return t instanceof HTMLElement?!0:typeof t=="object"&&t!==null&&"tagName"in t&&"getAttribute"in t}function vHt(t,e=document){if(O0n(e)&&e.dataset.panelGroupId==t)return e;let r=e.querySelector(`[data-panel-group][data-panel-group-id="${t}"]`);return r||null}function dce(t,e=document){let r=e.querySelector(`[${fs.resizeHandleId}="${t}"]`);return r||null}function P0n(t,e,r,n=document){var o,i,a,s;let u=dce(e,n),l=TW(t,n),c=u?l.indexOf(u):-1,d=(o=(i=r[c])===null||i===void 0?void 0:i.id)!==null&&o!==void 0?o:null,f=(a=(s=r[c+1])===null||s===void 0?void 0:s.id)!==null&&a!==void 0?a:null;return[d,f]}function E0n({committedValuesRef:t,eagerValuesRef:e,groupId:r,layout:n,panelDataArray:o,panelGroupElement:i,setLayout:a}){(0,xt.useRef)({didWarnAboutMissingResizeHandle:!1}),SD(()=>{if(!i)return;let s=TW(r,i);for(let u=0;u<o.length-1;u++){let{valueMax:l,valueMin:c,valueNow:d}=C0n({layout:n,panelsArray:o,pivotIndices:[u,u+1]}),f=s[u];if(f!=null){let p=o[u];fn(p,`No panel data found for index "${u}"`),f.setAttribute("aria-controls",p.id),f.setAttribute("aria-valuemax",""+Math.round(l)),f.setAttribute("aria-valuemin",""+Math.round(c)),f.setAttribute("aria-valuenow",d!=null?""+Math.round(d):"")}}return()=>{s.forEach((u,l)=>{u.removeAttribute("aria-controls"),u.removeAttribute("aria-valuemax"),u.removeAttribute("aria-valuemin"),u.removeAttribute("aria-valuenow")})}},[r,n,o,i]),(0,xt.useEffect)(()=>{if(!i)return;let s=e.current;fn(s,"Eager values not found");let{panelDataArray:u}=s,l=vHt(r,i);fn(l!=null,`No group found for id "${r}"`);let c=TW(r,i);fn(c,`No resize handles found for group id "${r}"`);let d=c.map(f=>{let p=f.getAttribute(fs.resizeHandleId);fn(p,"Resize handle element has no handle id attribute");let[m,h]=P0n(r,p,u,i);if(m==null||h==null)return()=>{};let b=g=>{if(!g.defaultPrevented)switch(g.key){case"Enter":{g.preventDefault();let y=u.findIndex(w=>w.id===m);if(y>=0){let w=u[y];fn(w,`No panel data found for index ${y}`);let S=n[y],{collapsedSize:C=0,collapsible:P,minSize:E=0}=w.constraints;if(S!=null&&P){let A=OW({delta:Xm(S,C)?E-C:C-S,initialLayout:n,panelConstraints:u.map(I=>I.constraints),pivotIndices:_Ht(r,p,i),prevLayout:n,trigger:"keyboard"});n!==A&&a(A)}}break}}};return f.addEventListener("keydown",b),()=>{f.removeEventListener("keydown",b)}});return()=>{d.forEach(f=>f())}},[i,t,e,r,n,o,a])}function nHt(t,e){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}function wHt(t,e){let r=t==="horizontal",{x:n,y:o}=lce(e);return r?n:o}function T0n(t,e,r,n,o){let i=r==="horizontal",a=dce(e,o);fn(a,`No resize handle element found for id "${e}"`);let s=a.getAttribute(fs.groupId);fn(s,"Resize handle element has no group id attribute");let{initialCursorPosition:u}=n,l=wHt(r,t),c=vHt(s,o);fn(c,`No group element found for id "${s}"`);let d=c.getBoundingClientRect(),f=i?d.width:d.height;return(l-u)/f*100}function A0n(t,e,r,n,o,i){if(lHt(t)){let a=r==="horizontal",s=0;t.shiftKey?s=100:o!=null?s=o:s=10;let u=0;switch(t.key){case"ArrowDown":u=a?0:s;break;case"ArrowLeft":u=a?-s:0;break;case"ArrowRight":u=a?s:0;break;case"ArrowUp":u=a?0:-s;break;case"End":u=100;break;case"Home":u=-100;break}return u}else return n==null?0:T0n(t,e,r,n,i)}function I0n({panelDataArray:t}){let e=Array(t.length),r=t.map(i=>i.constraints),n=0,o=100;for(let i=0;i<t.length;i++){let a=r[i];fn(a,`Panel constraints not found for index ${i}`);let{defaultSize:s}=a;s!=null&&(n++,e[i]=s,o-=s)}for(let i=0;i<t.length;i++){let a=r[i];fn(a,`Panel constraints not found for index ${i}`);let{defaultSize:s}=a;if(s!=null)continue;let u=t.length-n,l=o/u;n++,e[i]=l,o-=l}return e}function LU(t,e,r){e.forEach((n,o)=>{let i=t[o];fn(i,`Panel data not found for index ${o}`);let{callbacks:a,constraints:s,id:u}=i,{collapsedSize:l=0,collapsible:c}=s,d=r[u];if(d==null||n!==d){r[u]=n;let{onCollapse:f,onExpand:p,onResize:m}=a;m&&m(n,d),c&&(f||p)&&(p&&(d==null||zP(d,l))&&!zP(n,l)&&p(),f&&(d==null||!zP(d,l))&&zP(n,l)&&f())}})}function oce(t,e){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++)if(t[r]!=e[r])return!1;return!0}function M0n({defaultSize:t,dragState:e,layout:r,panelData:n,panelIndex:o,precision:i=3}){let a=r[o],s;return a==null?s=t!=null?t.toPrecision(i):"1":n.length===1?s="1":s=a.toPrecision(i),{flexBasis:0,flexGrow:s,flexShrink:1,overflow:"hidden",pointerEvents:e!==null?"none":void 0}}function R0n(t,e=10){let r=null;return(...o)=>{r!==null&&clearTimeout(r),r=setTimeout(()=>{t(...o)},e)}}function oHt(t){try{if(typeof localStorage<"u")t.getItem=e=>localStorage.getItem(e),t.setItem=(e,r)=>{localStorage.setItem(e,r)};else throw new Error("localStorage not supported in this environment")}catch(e){console.error(e),t.getItem=()=>null,t.setItem=()=>{}}}function SHt(t){return`react-resizable-panels:${t}`}function xHt(t){return t.map(e=>{let{constraints:r,id:n,idIsFromProps:o,order:i}=e;return o?n:i?`${i}:${JSON.stringify(r)}`:JSON.stringify(r)}).sort((e,r)=>e.localeCompare(r)).join(",")}function CHt(t,e){try{let r=SHt(t),n=e.getItem(r);if(n){let o=JSON.parse(n);if(typeof o=="object"&&o!=null)return o}}catch{}return null}function j0n(t,e,r){var n,o;let i=(n=CHt(t,r))!==null&&n!==void 0?n:{},a=xHt(e);return(o=i[a])!==null&&o!==void 0?o:null}function N0n(t,e,r,n,o){var i;let a=SHt(t),s=xHt(e),u=(i=CHt(t,o))!==null&&i!==void 0?i:{};u[s]={expandToSizes:Object.fromEntries(r.entries()),layout:n};try{o.setItem(a,JSON.stringify(u))}catch(l){console.error(l)}}function iHt({layout:t,panelConstraints:e}){let r=[...t],n=r.reduce((i,a)=>i+a,0);if(r.length!==e.length)throw Error(`Invalid ${e.length} panel layout: ${r.map(i=>`${i}%`).join(", ")}`);if(!Xm(n,100)&&r.length>0)for(let i=0;i<e.length;i++){let a=r[i];fn(a!=null,`No layout data found for index ${i}`);let s=100/n*a;r[i]=s}let o=0;for(let i=0;i<e.length;i++){let a=r[i];fn(a!=null,`No layout data found for index ${i}`);let s=kU({panelConstraints:e,panelIndex:i,size:a});a!=s&&(o+=a-s,r[i]=s)}if(!Xm(o,0))for(let i=0;i<e.length;i++){let a=r[i];fn(a!=null,`No layout data found for index ${i}`);let s=a+o,u=kU({panelConstraints:e,panelIndex:i,size:s});if(a!==u&&(o-=u-a,r[i]=u,Xm(o,0)))break}return r}var D0n=100,PW={getItem:t=>(oHt(PW),PW.getItem(t)),setItem:(t,e)=>{oHt(PW),PW.setItem(t,e)}},aHt={};function OHt({autoSaveId:t=null,children:e,className:r="",direction:n,forwardedRef:o,id:i=null,onLayout:a=null,keyboardResizeBy:s=null,storage:u=PW,style:l,tagName:c="div",...d}){let f=FLe(i),p=(0,xt.useRef)(null),[m,h]=(0,xt.useState)(null),[b,g]=(0,xt.useState)([]),y=S0n(),w=(0,xt.useRef)({}),S=(0,xt.useRef)(new Map),C=(0,xt.useRef)(0),P=(0,xt.useRef)({autoSaveId:t,direction:n,dragState:m,id:f,keyboardResizeBy:s,onLayout:a,storage:u}),E=(0,xt.useRef)({layout:b,panelDataArray:[],panelDataArrayChanged:!1});(0,xt.useRef)({didLogIdAndOrderWarning:!1,didLogPanelConstraintsWarning:!1,prevPanelIds:[]}),(0,xt.useImperativeHandle)(o,()=>({getId:()=>P.current.id,getLayout:()=>{let{layout:U}=E.current;return U},setLayout:U=>{let{onLayout:te}=P.current,{layout:z,panelDataArray:W}=E.current,Y=iHt({layout:U,panelConstraints:W.map(ae=>ae.constraints)});nHt(z,Y)||(g(Y),E.current.layout=Y,te&&te(Y),LU(W,Y,w.current))}}),[]),SD(()=>{P.current.autoSaveId=t,P.current.direction=n,P.current.dragState=m,P.current.id=f,P.current.onLayout=a,P.current.storage=u}),E0n({committedValuesRef:P,eagerValuesRef:E,groupId:f,layout:b,panelDataArray:E.current.panelDataArray,setLayout:g,panelGroupElement:p.current}),(0,xt.useEffect)(()=>{let{panelDataArray:U}=E.current;if(t){if(b.length===0||b.length!==U.length)return;let te=aHt[t];te==null&&(te=R0n(N0n,D0n),aHt[t]=te);let z=[...U],W=new Map(S.current);te(t,z,W,b,u)}},[t,b,u]),(0,xt.useEffect)(()=>{});let A=(0,xt.useCallback)(U=>{let{onLayout:te}=P.current,{layout:z,panelDataArray:W}=E.current;if(U.constraints.collapsible){let Y=W.map(Ue=>Ue.constraints),{collapsedSize:ae=0,panelSize:we,pivotIndices:de}=wD(W,U,z);if(fn(we!=null,`Panel size not found for panel "${U.id}"`),!zP(we,ae)){S.current.set(U.id,we);let Ve=FU(W,U)===W.length-1?we-ae:ae-we,rt=OW({delta:Ve,initialLayout:z,panelConstraints:Y,pivotIndices:de,prevLayout:z,trigger:"imperative-api"});oce(z,rt)||(g(rt),E.current.layout=rt,te&&te(rt),LU(W,rt,w.current))}}},[]),I=(0,xt.useCallback)((U,te)=>{let{onLayout:z}=P.current,{layout:W,panelDataArray:Y}=E.current;if(U.constraints.collapsible){let ae=Y.map(lr=>lr.constraints),{collapsedSize:we=0,panelSize:de=0,minSize:Ue=0,pivotIndices:Ve}=wD(Y,U,W),rt=te??Ue;if(zP(de,we)){let lr=S.current.get(U.id),bn=lr!=null&&lr>=rt?lr:rt,gt=FU(Y,U)===Y.length-1?de-bn:bn-de,vt=OW({delta:gt,initialLayout:W,panelConstraints:ae,pivotIndices:Ve,prevLayout:W,trigger:"imperative-api"});oce(W,vt)||(g(vt),E.current.layout=vt,z&&z(vt),LU(Y,vt,w.current))}}},[]),R=(0,xt.useCallback)(U=>{let{layout:te,panelDataArray:z}=E.current,{panelSize:W}=wD(z,U,te);return fn(W!=null,`Panel size not found for panel "${U.id}"`),W},[]),j=(0,xt.useCallback)((U,te)=>{let{panelDataArray:z}=E.current,W=FU(z,U);return M0n({defaultSize:te,dragState:m,layout:b,panelData:z,panelIndex:W})},[m,b]),N=(0,xt.useCallback)(U=>{let{layout:te,panelDataArray:z}=E.current,{collapsedSize:W=0,collapsible:Y,panelSize:ae}=wD(z,U,te);return fn(ae!=null,`Panel size not found for panel "${U.id}"`),Y===!0&&zP(ae,W)},[]),$=(0,xt.useCallback)(U=>{let{layout:te,panelDataArray:z}=E.current,{collapsedSize:W=0,collapsible:Y,panelSize:ae}=wD(z,U,te);return fn(ae!=null,`Panel size not found for panel "${U.id}"`),!Y||xD(ae,W)>0},[]),k=(0,xt.useCallback)(U=>{let{panelDataArray:te}=E.current;te.push(U),te.sort((z,W)=>{let Y=z.order,ae=W.order;return Y==null&&ae==null?0:Y==null?-1:ae==null?1:Y-ae}),E.current.panelDataArrayChanged=!0,y()},[y]);SD(()=>{if(E.current.panelDataArrayChanged){E.current.panelDataArrayChanged=!1;let{autoSaveId:U,onLayout:te,storage:z}=P.current,{layout:W,panelDataArray:Y}=E.current,ae=null;if(U){let de=j0n(U,Y,z);de&&(S.current=new Map(Object.entries(de.expandToSizes)),ae=de.layout)}ae==null&&(ae=I0n({panelDataArray:Y}));let we=iHt({layout:ae,panelConstraints:Y.map(de=>de.constraints)});nHt(W,we)||(g(we),E.current.layout=we,te&&te(we),LU(Y,we,w.current))}}),SD(()=>{let U=E.current;return()=>{U.layout=[]}},[]);let H=(0,xt.useCallback)(U=>{let te=!1,z=p.current;return z&&window.getComputedStyle(z,null).getPropertyValue("direction")==="rtl"&&(te=!0),function(Y){Y.preventDefault();let ae=p.current;if(!ae)return()=>null;let{direction:we,dragState:de,id:Ue,keyboardResizeBy:Ve,onLayout:rt}=P.current,{layout:lr,panelDataArray:bn}=E.current,{initialLayout:Le}=de??{},gt=_Ht(Ue,U,ae),vt=A0n(Y,U,we,de,Ve,ae),pt=we==="horizontal";pt&&te&&(vt=-vt);let ee=bn.map(Pe=>Pe.constraints),et=OW({delta:vt,initialLayout:Le??lr,panelConstraints:ee,pivotIndices:gt,prevLayout:lr,trigger:lHt(Y)?"keyboard":"mouse-or-touch"}),Re=!oce(lr,et);(cHt(Y)||dHt(Y))&&C.current!=vt&&(C.current=vt,!Re&&vt!==0?pt?jLe(U,vt<0?pHt:mHt):jLe(U,vt<0?hHt:gHt):jLe(U,0)),Re&&(g(et),E.current.layout=et,rt&&rt(et),LU(bn,et,w.current))}},[]),V=(0,xt.useCallback)((U,te)=>{let{onLayout:z}=P.current,{layout:W,panelDataArray:Y}=E.current,ae=Y.map(lr=>lr.constraints),{panelSize:we,pivotIndices:de}=wD(Y,U,W);fn(we!=null,`Panel size not found for panel "${U.id}"`);let Ve=FU(Y,U)===Y.length-1?we-te:te-we,rt=OW({delta:Ve,initialLayout:W,panelConstraints:ae,pivotIndices:de,prevLayout:W,trigger:"imperative-api"});oce(W,rt)||(g(rt),E.current.layout=rt,z&&z(rt),LU(Y,rt,w.current))},[]),Q=(0,xt.useCallback)((U,te)=>{let{layout:z,panelDataArray:W}=E.current,{collapsedSize:Y=0,collapsible:ae}=te,{collapsedSize:we=0,collapsible:de,maxSize:Ue=100,minSize:Ve=0}=U.constraints,{panelSize:rt}=wD(W,U,z);rt!=null&&(ae&&de&&zP(rt,Y)?zP(Y,we)||V(U,we):rt<Ve?V(U,Ve):rt>Ue&&V(U,Ue))},[V]),G=(0,xt.useCallback)((U,te)=>{let{direction:z}=P.current,{layout:W}=E.current;if(!p.current)return;let Y=dce(U,p.current);fn(Y,`Drag handle element not found for id "${U}"`);let ae=wHt(z,te);h({dragHandleId:U,dragHandleRect:Y.getBoundingClientRect(),initialCursorPosition:ae,initialLayout:W})},[]),D=(0,xt.useCallback)(()=>{h(null)},[]),B=(0,xt.useCallback)(U=>{let{panelDataArray:te}=E.current,z=FU(te,U);z>=0&&(te.splice(z,1),delete w.current[U.id],E.current.panelDataArrayChanged=!0,y())},[y]),q=(0,xt.useMemo)(()=>({collapsePanel:A,direction:n,dragState:m,expandPanel:I,getPanelSize:R,getPanelStyle:j,groupId:f,isPanelCollapsed:N,isPanelExpanded:$,reevaluatePanelConstraints:Q,registerPanel:k,registerResizeHandle:H,resizePanel:V,startDragging:G,stopDragging:D,unregisterPanel:B,panelGroupElement:p.current}),[A,m,n,I,R,j,f,N,$,Q,k,H,V,G,D,B]),K={display:"flex",flexDirection:n==="horizontal"?"row":"column",height:"100%",overflow:"hidden",width:"100%"};return(0,xt.createElement)(uce.Provider,{value:q},(0,xt.createElement)(c,{...d,children:e,className:r,id:i,ref:p,style:{...K,...l},[fs.group]:"",[fs.groupDirection]:n,[fs.groupId]:f}))}var qLe=(0,xt.forwardRef)((t,e)=>(0,xt.createElement)(OHt,{...t,forwardedRef:e}));OHt.displayName="PanelGroup";qLe.displayName="forwardRef(PanelGroup)";function FU(t,e){return t.findIndex(r=>r===e||r.id===e.id)}function wD(t,e,r){let n=FU(t,e),i=n===t.length-1?[n-1,n]:[n,n+1],a=r[n];return{...e.constraints,panelSize:a,pivotIndices:i}}function L0n({disabled:t,handleId:e,resizeHandler:r,panelGroupElement:n}){(0,xt.useEffect)(()=>{if(t||r==null||n==null)return;let o=dce(e,n);if(o==null)return;let i=a=>{if(!a.defaultPrevented)switch(a.key){case"ArrowDown":case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"End":case"Home":{a.preventDefault(),r(a);break}case"F6":{a.preventDefault();let s=o.getAttribute(fs.groupId);fn(s,`No group element found for id "${s}"`);let u=TW(s,n),l=bHt(s,e,n);fn(l!==null,`No resize element found for id "${e}"`);let c=a.shiftKey?l>0?l-1:u.length-1:l+1<u.length?l+1:0;u[c].focus();break}}};return o.addEventListener("keydown",i),()=>{o.removeEventListener("keydown",i)}},[n,t,e,r])}function ULe({children:t=null,className:e="",disabled:r=!1,hitAreaMargins:n,id:o,onBlur:i,onClick:a,onDragging:s,onFocus:u,onPointerDown:l,onPointerUp:c,style:d={},tabIndex:f=0,tagName:p="div",...m}){var h,b;let g=(0,xt.useRef)(null),y=(0,xt.useRef)({onClick:a,onDragging:s,onPointerDown:l,onPointerUp:c});(0,xt.useEffect)(()=>{y.current.onClick=a,y.current.onDragging=s,y.current.onPointerDown=l,y.current.onPointerUp=c});let w=(0,xt.useContext)(uce);if(w===null)throw Error("PanelResizeHandle components must be rendered within a PanelGroup container");let{direction:S,groupId:C,registerResizeHandle:P,startDragging:E,stopDragging:A,panelGroupElement:I}=w,R=FLe(o),[j,N]=(0,xt.useState)("inactive"),[$,k]=(0,xt.useState)(!1),[H,V]=(0,xt.useState)(null),Q=(0,xt.useRef)({state:j});SD(()=>{Q.current.state=j}),(0,xt.useEffect)(()=>{if(r)V(null);else{let q=P(R);V(()=>q)}},[r,R,P]);let G=(h=n?.coarse)!==null&&h!==void 0?h:15,D=(b=n?.fine)!==null&&b!==void 0?b:5;return(0,xt.useEffect)(()=>{if(r||H==null)return;let q=g.current;fn(q,"Element ref not attached");let K=!1;return v0n(R,q,S,{coarse:G,fine:D},(te,z,W)=>{if(!z){N("inactive");return}switch(te){case"down":{N("drag"),K=!1,fn(W,'Expected event to be defined for "down" action'),E(R,W);let{onDragging:Y,onPointerDown:ae}=y.current;Y?.(!0),ae?.();break}case"move":{let{state:Y}=Q.current;K=!0,Y!=="drag"&&N("hover"),fn(W,'Expected event to be defined for "move" action'),H(W);break}case"up":{N("hover"),A();let{onClick:Y,onDragging:ae,onPointerUp:we}=y.current;ae?.(!1),we?.(),K||Y?.();break}}})},[G,S,r,D,P,R,H,E,A]),L0n({disabled:r,handleId:R,resizeHandler:H,panelGroupElement:I}),(0,xt.createElement)(p,{...m,children:t,className:e,id:o,onBlur:()=>{k(!1),i?.()},onFocus:()=>{k(!0),u?.()},ref:g,role:"separator",style:{...{touchAction:"none",userSelect:"none"},...d},tabIndex:f,[fs.groupDirection]:S,[fs.groupId]:C,[fs.resizeHandle]:"",[fs.resizeHandleActive]:j==="drag"?"pointer":$?"keyboard":void 0,[fs.resizeHandleEnabled]:!r,[fs.resizeHandleId]:R,[fs.resizeHandleState]:j})}ULe.displayName="PanelResizeHandle";var PHt=({className:t,...e})=>AW.createElement(qLe,{className:_e("tw-flex tw-size-full data-[panel-group-direction=vertical]:tw-flex-col",t),...e}),zLe=kLe,EHt=({withHandle:t,className:e,...r})=>AW.createElement(ULe,{className:_e("tw-relative tw-flex tw-w-px tw-items-center tw-justify-center tw-bg-[var(--background-modifier-border)] after:tw-absolute after:tw-inset-y-0 after:tw-left-1/2 after:tw-w-1 after:tw--translate-x-1/2 focus-visible:tw-outline-none focus-visible:tw-ring-1 focus-visible:tw-ring-ring focus-visible:tw-ring-offset-1 data-[panel-group-direction=vertical]:tw-h-px data-[panel-group-direction=vertical]:tw-w-full data-[panel-group-direction=vertical]:after:tw-left-0 data-[panel-group-direction=vertical]:after:tw-h-1 data-[panel-group-direction=vertical]:after:tw-w-full data-[panel-group-direction=vertical]:after:tw--translate-y-1/2 data-[panel-group-direction=vertical]:after:tw-translate-x-0 [&[data-panel-group-direction=vertical]>div]:tw-rotate-90",e),...r},t&&AW.createElement("div",{className:"tw-z-sidedock tw-flex tw-h-4 tw-w-3 tw-items-center tw-justify-center tw-rounded-sm tw-border tw-border-solid tw-border-border"},AW.createElement(Vb,{className:"tw-size-2.5"})));var Nx=F(X());var Xt=F(X(),1);var THt=F(X(),1),k0n=F(os(),1);var AHt=F(ft(),1),$0n=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],BU=$0n.reduce((t,e)=>{let r=PC(`Primitive.${e}`),n=THt.forwardRef((o,i)=>{let{asChild:a,...s}=o,u=a?r:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),(0,AHt.jsx)(u,{...s,ref:i})});return n.displayName=`Primitive.${e}`,{...t,[e]:n}},{});var Qp=F(X(),1);var MHt=F(X(),1);function IHt(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function B0n(...t){return e=>{let r=!1,n=t.map(o=>{let i=IHt(o,e);return!r&&typeof i=="function"&&(r=!0),i});if(r)return()=>{for(let o=0;o<n.length;o++){let i=n[o];typeof i=="function"?i():IHt(t[o],null)}}}}function HP(...t){return MHt.useCallback(B0n(...t),t)}var RHt=F(X(),1),IW=globalThis?.document?RHt.useLayoutEffect:()=>{};var jHt=F(X(),1);function q0n(t,e){return jHt.useReducer((r,n)=>e[r][n]??r,t)}var qU=t=>{let{present:e,children:r}=t,n=U0n(e),o=typeof r=="function"?r({present:n.isPresent}):Qp.Children.only(r),i=HP(n.ref,z0n(o));return typeof r=="function"||n.isPresent?Qp.cloneElement(o,{ref:i}):null};qU.displayName="Presence";function U0n(t){let[e,r]=Qp.useState(),n=Qp.useRef(null),o=Qp.useRef(t),i=Qp.useRef("none"),a=t?"mounted":"unmounted",[s,u]=q0n(a,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return Qp.useEffect(()=>{let l=fce(n.current);i.current=s==="mounted"?l:"none"},[s]),IW(()=>{let l=n.current,c=o.current;if(c!==t){let f=i.current,p=fce(l);t?u("MOUNT"):p==="none"||l?.display==="none"?u("UNMOUNT"):u(c&&f!==p?"ANIMATION_OUT":"UNMOUNT"),o.current=t}},[t,u]),IW(()=>{if(e){let l,c=e.ownerDocument.defaultView??window,d=p=>{let h=fce(n.current).includes(p.animationName);if(p.target===e&&h&&(u("ANIMATION_END"),!o.current)){let b=e.style.animationFillMode;e.style.animationFillMode="forwards",l=c.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=b)})}},f=p=>{p.target===e&&(i.current=fce(n.current))};return e.addEventListener("animationstart",f),e.addEventListener("animationcancel",d),e.addEventListener("animationend",d),()=>{c.clearTimeout(l),e.removeEventListener("animationstart",f),e.removeEventListener("animationcancel",d),e.removeEventListener("animationend",d)}}else u("ANIMATION_END")},[e,u]),{isPresent:["mounted","unmountSuspended"].includes(s),ref:Qp.useCallback(l=>{n.current=l?getComputedStyle(l):null,r(l)},[])}}function fce(t){return t?.animationName||"none"}function z0n(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,r=e&&"isReactWarning"in e&&e.isReactWarning;return r?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,r=e&&"isReactWarning"in e&&e.isReactWarning,r?t.props.ref:t.props.ref||t.ref)}var VP=F(X(),1),NHt=F(ft(),1);function DHt(t,e=[]){let r=[];function n(i,a){let s=VP.createContext(a),u=r.length;r=[...r,a];let l=d=>{let{scope:f,children:p,...m}=d,h=f?.[t]?.[u]||s,b=VP.useMemo(()=>m,Object.values(m));return(0,NHt.jsx)(h.Provider,{value:b,children:p})};l.displayName=i+"Provider";function c(d,f){let p=f?.[t]?.[u]||s,m=VP.useContext(p);if(m)return m;if(a!==void 0)return a;throw new Error(`\`${d}\` must be used within \`${i}\``)}return[l,c]}let o=()=>{let i=r.map(a=>VP.createContext(a));return function(s){let u=s?.[t]||i;return VP.useMemo(()=>({[`__scope${t}`]:{...s,[t]:u}}),[s,u])}};return o.scopeName=t,[n,H0n(o,...e)]}function H0n(...t){let e=t[0];if(t.length===1)return e;let r=()=>{let n=t.map(o=>({useScope:o(),scopeName:o.scopeName}));return function(i){let a=n.reduce((s,{useScope:u,scopeName:l})=>{let d=u(i)[`__scope${l}`];return{...s,...d}},{});return VP.useMemo(()=>({[`__scope${e.scopeName}`]:a}),[a])}};return r.scopeName=e.scopeName,r}var UU=F(X(),1);function tM(t){let e=UU.useRef(t);return UU.useEffect(()=>{e.current=t}),UU.useMemo(()=>(...r)=>e.current?.(...r),[])}var pce=F(X(),1),V0n=F(ft(),1),W0n=pce.createContext(void 0);function LHt(t){let e=pce.useContext(W0n);return t||e||"ltr"}function FHt(t,[e,r]){return Math.min(r,Math.max(e,t))}function rM(t,e,{checkForDefaultPrevented:r=!0}={}){return function(o){if(t?.(o),r===!1||!o.defaultPrevented)return e?.(o)}}var $Ht=F(X(),1),ni=F(ft(),1);function K0n(t,e){return $Ht.useReducer((r,n)=>e[r][n]??r,t)}var HLe="ScrollArea",[BHt,dui]=DHt(HLe),[G0n,Dg]=BHt(HLe),qHt=Xt.forwardRef((t,e)=>{let{__scopeScrollArea:r,type:n="hover",dir:o,scrollHideDelay:i=600,...a}=t,[s,u]=Xt.useState(null),[l,c]=Xt.useState(null),[d,f]=Xt.useState(null),[p,m]=Xt.useState(null),[h,b]=Xt.useState(null),[g,y]=Xt.useState(0),[w,S]=Xt.useState(0),[C,P]=Xt.useState(!1),[E,A]=Xt.useState(!1),I=HP(e,j=>u(j)),R=LHt(o);return(0,ni.jsx)(G0n,{scope:r,type:n,dir:R,scrollHideDelay:i,scrollArea:s,viewport:l,onViewportChange:c,content:d,onContentChange:f,scrollbarX:p,onScrollbarXChange:m,scrollbarXEnabled:C,onScrollbarXEnabledChange:P,scrollbarY:h,onScrollbarYChange:b,scrollbarYEnabled:E,onScrollbarYEnabledChange:A,onCornerWidthChange:y,onCornerHeightChange:S,children:(0,ni.jsx)(BU.div,{dir:R,...a,ref:I,style:{position:"relative","--radix-scroll-area-corner-width":g+"px","--radix-scroll-area-corner-height":w+"px",...t.style}})})});qHt.displayName=HLe;var UHt="ScrollAreaViewport",zHt=Xt.forwardRef((t,e)=>{let{__scopeScrollArea:r,children:n,nonce:o,...i}=t,a=Dg(UHt,r),s=Xt.useRef(null),u=HP(e,s,a.onViewportChange);return(0,ni.jsxs)(ni.Fragment,{children:[(0,ni.jsx)("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:o}),(0,ni.jsx)(BU.div,{"data-radix-scroll-area-viewport":"",...i,ref:u,style:{overflowX:a.scrollbarXEnabled?"scroll":"hidden",overflowY:a.scrollbarYEnabled?"scroll":"hidden",...t.style},children:(0,ni.jsx)("div",{ref:a.onContentChange,style:{minWidth:"100%",display:"table"},children:n})})]})});zHt.displayName=UHt;var jx="ScrollAreaScrollbar",gce=Xt.forwardRef((t,e)=>{let{forceMount:r,...n}=t,o=Dg(jx,t.__scopeScrollArea),{onScrollbarXEnabledChange:i,onScrollbarYEnabledChange:a}=o,s=t.orientation==="horizontal";return Xt.useEffect(()=>(s?i(!0):a(!0),()=>{s?i(!1):a(!1)}),[s,i,a]),o.type==="hover"?(0,ni.jsx)(J0n,{...n,ref:e,forceMount:r}):o.type==="scroll"?(0,ni.jsx)(Y0n,{...n,ref:e,forceMount:r}):o.type==="auto"?(0,ni.jsx)(HHt,{...n,ref:e,forceMount:r}):o.type==="always"?(0,ni.jsx)(VLe,{...n,ref:e}):null});gce.displayName=jx;var J0n=Xt.forwardRef((t,e)=>{let{forceMount:r,...n}=t,o=Dg(jx,t.__scopeScrollArea),[i,a]=Xt.useState(!1);return Xt.useEffect(()=>{let s=o.scrollArea,u=0;if(s){let l=()=>{window.clearTimeout(u),a(!0)},c=()=>{u=window.setTimeout(()=>a(!1),o.scrollHideDelay)};return s.addEventListener("pointerenter",l),s.addEventListener("pointerleave",c),()=>{window.clearTimeout(u),s.removeEventListener("pointerenter",l),s.removeEventListener("pointerleave",c)}}},[o.scrollArea,o.scrollHideDelay]),(0,ni.jsx)(qU,{present:r||i,children:(0,ni.jsx)(HHt,{"data-state":i?"visible":"hidden",...n,ref:e})})}),Y0n=Xt.forwardRef((t,e)=>{let{forceMount:r,...n}=t,o=Dg(jx,t.__scopeScrollArea),i=t.orientation==="horizontal",a=bce(()=>u("SCROLL_END"),100),[s,u]=K0n("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return Xt.useEffect(()=>{if(s==="idle"){let l=window.setTimeout(()=>u("HIDE"),o.scrollHideDelay);return()=>window.clearTimeout(l)}},[s,o.scrollHideDelay,u]),Xt.useEffect(()=>{let l=o.viewport,c=i?"scrollLeft":"scrollTop";if(l){let d=l[c],f=()=>{let p=l[c];d!==p&&(u("SCROLL"),a()),d=p};return l.addEventListener("scroll",f),()=>l.removeEventListener("scroll",f)}},[o.viewport,i,u,a]),(0,ni.jsx)(qU,{present:r||s!=="hidden",children:(0,ni.jsx)(VLe,{"data-state":s==="hidden"?"hidden":"visible",...n,ref:e,onPointerEnter:rM(t.onPointerEnter,()=>u("POINTER_ENTER")),onPointerLeave:rM(t.onPointerLeave,()=>u("POINTER_LEAVE"))})})}),HHt=Xt.forwardRef((t,e)=>{let r=Dg(jx,t.__scopeScrollArea),{forceMount:n,...o}=t,[i,a]=Xt.useState(!1),s=t.orientation==="horizontal",u=bce(()=>{if(r.viewport){let l=r.viewport.offsetWidth<r.viewport.scrollWidth,c=r.viewport.offsetHeight<r.viewport.scrollHeight;a(s?l:c)}},10);return zU(r.viewport,u),zU(r.content,u),(0,ni.jsx)(qU,{present:n||i,children:(0,ni.jsx)(VLe,{"data-state":i?"visible":"hidden",...o,ref:e})})}),VLe=Xt.forwardRef((t,e)=>{let{orientation:r="vertical",...n}=t,o=Dg(jx,t.__scopeScrollArea),i=Xt.useRef(null),a=Xt.useRef(0),[s,u]=Xt.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),l=GHt(s.viewport,s.content),c={...n,sizes:s,onSizesChange:u,hasThumb:l>0&&l<1,onThumbChange:f=>i.current=f,onThumbPointerUp:()=>a.current=0,onThumbPointerDown:f=>a.current=f};function d(f,p){return rSn(f,a.current,s,p)}return r==="horizontal"?(0,ni.jsx)(Z0n,{...c,ref:e,onThumbPositionChange:()=>{if(o.viewport&&i.current){let f=o.viewport.scrollLeft,p=kHt(f,s,o.dir);i.current.style.transform=`translate3d(${p}px, 0, 0)`}},onWheelScroll:f=>{o.viewport&&(o.viewport.scrollLeft=f)},onDragScroll:f=>{o.viewport&&(o.viewport.scrollLeft=d(f,o.dir))}}):r==="vertical"?(0,ni.jsx)(X0n,{...c,ref:e,onThumbPositionChange:()=>{if(o.viewport&&i.current){let f=o.viewport.scrollTop,p=kHt(f,s);i.current.style.transform=`translate3d(0, ${p}px, 0)`}},onWheelScroll:f=>{o.viewport&&(o.viewport.scrollTop=f)},onDragScroll:f=>{o.viewport&&(o.viewport.scrollTop=d(f))}}):null}),Z0n=Xt.forwardRef((t,e)=>{let{sizes:r,onSizesChange:n,...o}=t,i=Dg(jx,t.__scopeScrollArea),[a,s]=Xt.useState(),u=Xt.useRef(null),l=HP(e,u,i.onScrollbarXChange);return Xt.useEffect(()=>{u.current&&s(getComputedStyle(u.current))},[u]),(0,ni.jsx)(WHt,{"data-orientation":"horizontal",...o,ref:l,sizes:r,style:{bottom:0,left:i.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:i.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":yce(r)+"px",...t.style},onThumbPointerDown:c=>t.onThumbPointerDown(c.x),onDragScroll:c=>t.onDragScroll(c.x),onWheelScroll:(c,d)=>{if(i.viewport){let f=i.viewport.scrollLeft+c.deltaX;t.onWheelScroll(f),YHt(f,d)&&c.preventDefault()}},onResize:()=>{u.current&&i.viewport&&a&&n({content:i.viewport.scrollWidth,viewport:i.viewport.offsetWidth,scrollbar:{size:u.current.clientWidth,paddingStart:hce(a.paddingLeft),paddingEnd:hce(a.paddingRight)}})}})}),X0n=Xt.forwardRef((t,e)=>{let{sizes:r,onSizesChange:n,...o}=t,i=Dg(jx,t.__scopeScrollArea),[a,s]=Xt.useState(),u=Xt.useRef(null),l=HP(e,u,i.onScrollbarYChange);return Xt.useEffect(()=>{u.current&&s(getComputedStyle(u.current))},[u]),(0,ni.jsx)(WHt,{"data-orientation":"vertical",...o,ref:l,sizes:r,style:{top:0,right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":yce(r)+"px",...t.style},onThumbPointerDown:c=>t.onThumbPointerDown(c.y),onDragScroll:c=>t.onDragScroll(c.y),onWheelScroll:(c,d)=>{if(i.viewport){let f=i.viewport.scrollTop+c.deltaY;t.onWheelScroll(f),YHt(f,d)&&c.preventDefault()}},onResize:()=>{u.current&&i.viewport&&a&&n({content:i.viewport.scrollHeight,viewport:i.viewport.offsetHeight,scrollbar:{size:u.current.clientHeight,paddingStart:hce(a.paddingTop),paddingEnd:hce(a.paddingBottom)}})}})}),[Q0n,VHt]=BHt(jx),WHt=Xt.forwardRef((t,e)=>{let{__scopeScrollArea:r,sizes:n,hasThumb:o,onThumbChange:i,onThumbPointerUp:a,onThumbPointerDown:s,onThumbPositionChange:u,onDragScroll:l,onWheelScroll:c,onResize:d,...f}=t,p=Dg(jx,r),[m,h]=Xt.useState(null),b=HP(e,I=>h(I)),g=Xt.useRef(null),y=Xt.useRef(""),w=p.viewport,S=n.content-n.viewport,C=tM(c),P=tM(u),E=bce(d,10);function A(I){if(g.current){let R=I.clientX-g.current.left,j=I.clientY-g.current.top;l({x:R,y:j})}}return Xt.useEffect(()=>{let I=R=>{let j=R.target;m?.contains(j)&&C(R,S)};return document.addEventListener("wheel",I,{passive:!1}),()=>document.removeEventListener("wheel",I,{passive:!1})},[w,m,S,C]),Xt.useEffect(P,[n,P]),zU(m,E),zU(p.content,E),(0,ni.jsx)(Q0n,{scope:r,scrollbar:m,hasThumb:o,onThumbChange:tM(i),onThumbPointerUp:tM(a),onThumbPositionChange:P,onThumbPointerDown:tM(s),children:(0,ni.jsx)(BU.div,{...f,ref:b,style:{position:"absolute",...f.style},onPointerDown:rM(t.onPointerDown,I=>{I.button===0&&(I.target.setPointerCapture(I.pointerId),g.current=m.getBoundingClientRect(),y.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",p.viewport&&(p.viewport.style.scrollBehavior="auto"),A(I))}),onPointerMove:rM(t.onPointerMove,A),onPointerUp:rM(t.onPointerUp,I=>{let R=I.target;R.hasPointerCapture(I.pointerId)&&R.releasePointerCapture(I.pointerId),document.body.style.webkitUserSelect=y.current,p.viewport&&(p.viewport.style.scrollBehavior=""),g.current=null})})})}),mce="ScrollAreaThumb",WLe=Xt.forwardRef((t,e)=>{let{forceMount:r,...n}=t,o=VHt(mce,t.__scopeScrollArea);return(0,ni.jsx)(qU,{present:r||o.hasThumb,children:(0,ni.jsx)(eSn,{ref:e,...n})})}),eSn=Xt.forwardRef((t,e)=>{let{__scopeScrollArea:r,style:n,...o}=t,i=Dg(mce,r),a=VHt(mce,r),{onThumbPositionChange:s}=a,u=HP(e,d=>a.onThumbChange(d)),l=Xt.useRef(void 0),c=bce(()=>{l.current&&(l.current(),l.current=void 0)},100);return Xt.useEffect(()=>{let d=i.viewport;if(d){let f=()=>{if(c(),!l.current){let p=nSn(d,s);l.current=p,s()}};return s(),d.addEventListener("scroll",f),()=>d.removeEventListener("scroll",f)}},[i.viewport,c,s]),(0,ni.jsx)(BU.div,{"data-state":a.hasThumb?"visible":"hidden",...o,ref:u,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...n},onPointerDownCapture:rM(t.onPointerDownCapture,d=>{let p=d.target.getBoundingClientRect(),m=d.clientX-p.left,h=d.clientY-p.top;a.onThumbPointerDown({x:m,y:h})}),onPointerUp:rM(t.onPointerUp,a.onThumbPointerUp)})});WLe.displayName=mce;var KLe="ScrollAreaCorner",KHt=Xt.forwardRef((t,e)=>{let r=Dg(KLe,t.__scopeScrollArea),n=!!(r.scrollbarX&&r.scrollbarY);return r.type!=="scroll"&&n?(0,ni.jsx)(tSn,{...t,ref:e}):null});KHt.displayName=KLe;var tSn=Xt.forwardRef((t,e)=>{let{__scopeScrollArea:r,...n}=t,o=Dg(KLe,r),[i,a]=Xt.useState(0),[s,u]=Xt.useState(0),l=!!(i&&s);return zU(o.scrollbarX,()=>{let c=o.scrollbarX?.offsetHeight||0;o.onCornerHeightChange(c),u(c)}),zU(o.scrollbarY,()=>{let c=o.scrollbarY?.offsetWidth||0;o.onCornerWidthChange(c),a(c)}),l?(0,ni.jsx)(BU.div,{...n,ref:e,style:{width:i,height:s,position:"absolute",right:o.dir==="ltr"?0:void 0,left:o.dir==="rtl"?0:void 0,bottom:0,...t.style}}):null});function hce(t){return t?parseInt(t,10):0}function GHt(t,e){let r=t/e;return isNaN(r)?0:r}function yce(t){let e=GHt(t.viewport,t.content),r=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,n=(t.scrollbar.size-r)*e;return Math.max(n,18)}function rSn(t,e,r,n="ltr"){let o=yce(r),i=o/2,a=e||i,s=o-a,u=r.scrollbar.paddingStart+a,l=r.scrollbar.size-r.scrollbar.paddingEnd-s,c=r.content-r.viewport,d=n==="ltr"?[0,c]:[c*-1,0];return JHt([u,l],d)(t)}function kHt(t,e,r="ltr"){let n=yce(e),o=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,i=e.scrollbar.size-o,a=e.content-e.viewport,s=i-n,u=r==="ltr"?[0,a]:[a*-1,0],l=FHt(t,u);return JHt([0,a],[0,s])(l)}function JHt(t,e){return r=>{if(t[0]===t[1]||e[0]===e[1])return e[0];let n=(e[1]-e[0])/(t[1]-t[0]);return e[0]+n*(r-t[0])}}function YHt(t,e){return t>0&&t<e}var nSn=(t,e=()=>{})=>{let r={left:t.scrollLeft,top:t.scrollTop},n=0;return function o(){let i={left:t.scrollLeft,top:t.scrollTop},a=r.left!==i.left,s=r.top!==i.top;(a||s)&&e(),r=i,n=window.requestAnimationFrame(o)}(),()=>window.cancelAnimationFrame(n)};function bce(t,e){let r=tM(t),n=Xt.useRef(0);return Xt.useEffect(()=>()=>window.clearTimeout(n.current),[]),Xt.useCallback(()=>{window.clearTimeout(n.current),n.current=window.setTimeout(r,e)},[r,e])}function zU(t,e){let r=tM(e);IW(()=>{let n=0;if(t){let o=new ResizeObserver(()=>{cancelAnimationFrame(n),n=window.requestAnimationFrame(r)});return o.observe(t),()=>{window.cancelAnimationFrame(n),o.unobserve(t)}}},[t,r])}var GLe=qHt,ZHt=zHt;var XHt=KHt;var _ce=Nx.forwardRef(({className:t,children:e,...r},n)=>Nx.createElement(GLe,{ref:n,className:_e("tw-relative tw-overflow-hidden",t),...r},Nx.createElement(ZHt,{className:"tw-size-full tw-rounded-[inherit] [&>div:first-child]:!tw-block"},e),Nx.createElement(QHt,null),Nx.createElement(XHt,null)));_ce.displayName=GLe.displayName;var QHt=Nx.forwardRef(({className:t,orientation:e="vertical",...r},n)=>Nx.createElement(gce,{ref:n,orientation:e,className:_e("tw-flex tw-touch-none tw-select-none tw-transition-colors",e==="vertical"&&"tw-h-full tw-w-2.5 tw-border-l tw-border-l-transparent tw-p-px",e==="horizontal"&&"tw-h-2.5 tw-flex-col tw-border-t tw-border-t-transparent tw-p-px",t),...r},Nx.createElement(WLe,{className:"tw-relative tw-flex-1 tw-rounded-full tw-bg-[var(--background-modifier-border)]"})));QHt.displayName=gce.displayName;var HU=F(X());var vce=F(X());var so=vce.forwardRef(({className:t,type:e,...r},n)=>vce.createElement("input",{type:e,className:_e("!tw-h-9 !tw-min-w-[50px] !tw-rounded-md !tw-border tw-border-solid tw-border-border !tw-bg-transparent !tw-px-3 !tw-py-1 !tw-text-sm !tw-transition-colors md:!tw-text-base","focus-visible:!tw-shadow-sm focus-visible:!tw-outline-none focus-visible:!tw-ring-1 focus-visible:!tw-ring-ring","placeholder:tw-text-sm","tw-flex tw-w-full tw-shadow-sm placeholder:tw-text-muted disabled:tw-cursor-not-allowed disabled:tw-opacity-50",t),ref:n,...r}));so.displayName="Input";var wce=({value:t,onChange:e,placeholder:r="Search..."})=>HU.default.createElement("div",{className:"tw-relative"},HU.default.createElement(so,{type:"text",placeholder:r,value:t,onChange:n=>e(n.target.value),className:"tw-pr-10"}),t&&HU.default.createElement(ge,{variant:"secondary",onClick:()=>e(""),className:"tw-absolute tw-right-8 tw-top-1/2 tw-size-4 -tw-translate-y-1/2 tw-transform tw-rounded-full tw-p-0 tw-transition-colors","aria-label":"Clear search"},HU.default.createElement(JE,{className:"tw-size-4 tw-text-muted/60 hover:tw-text-accent-hover"})),HU.default.createElement(jR,{className:"tw-absolute tw-right-3 tw-top-1/2 tw-size-4 -tw-translate-y-1/2 tw-transform tw-text-muted"}));var Sce=F(X());var oVt=F(X(),1);var eVt=F(X(),1),iSn=F(os(),1);var tVt=F(ft(),1),aSn=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],rVt=aSn.reduce((t,e)=>{let r=PC(`Primitive.${e}`),n=eVt.forwardRef((o,i)=>{let{asChild:a,...s}=o,u=a?r:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),(0,tVt.jsx)(u,{...s,ref:i})});return n.displayName=`Primitive.${e}`,{...t,[e]:n}},{});var iVt=F(ft(),1),sSn="Separator",nVt="horizontal",uSn=["horizontal","vertical"],aVt=oVt.forwardRef((t,e)=>{let{decorative:r,orientation:n=nVt,...o}=t,i=lSn(n)?n:nVt,s=r?{role:"none"}:{"aria-orientation":i==="vertical"?i:void 0,role:"separator"};return(0,iVt.jsx)(rVt.div,{"data-orientation":i,...s,...o,ref:e})});aVt.displayName=sSn;function lSn(t){return uSn.includes(t)}var JLe=aVt;var MW=Sce.forwardRef(({className:t,orientation:e="horizontal",decorative:r=!0,...n},o)=>Sce.createElement(JLe,{ref:o,decorative:r,orientation:e,className:_e("tw-shrink-0 tw-bg-[var(--background-modifier-border)]",e==="horizontal"?"tw-h-px tw-w-full":"tw-h-full tw-w-px",t),...n}));MW.displayName=JLe.displayName;wn();var Cce=require("obsidian"),je=F(X()),uVt=F(wc());function dSn({extension:t,size:e="tw-size-4"}){let r=t.toLowerCase().replace("*.","");return["jpg","jpeg","png","gif","svg"].includes(r)?je.default.createElement(R4,{className:`tw-text-context-manager-blue ${e}`}):["mp3","wav","ogg"].includes(r)?je.default.createElement(M4,{className:`tw-text-context-manager-purple ${e}`}):["mp4","mov","avi"].includes(r)?je.default.createElement(D4,{className:`tw-text-context-manager-orange ${e}`}):["md","txt","mdx","markdown"].includes(r)?je.default.createElement(ly,{className:`${e}`}):je.default.createElement(ly,{className:`tw-text-faint ${e}`})}var YLe=({IconComponent:t,title:e,iconColorClassName:r,onAddClick:n,tooltip:o})=>je.default.createElement("div",{className:"tw-mb-3 tw-flex tw-items-center tw-justify-between"},je.default.createElement("div",{className:"tw-flex tw-items-center"},je.default.createElement(t,{className:`tw-mr-2 tw-size-4 ${r}`}),je.default.createElement("h3",{className:`tw-text-sm tw-font-semibold ${r}`},e),o&&je.default.createElement(po,{delayDuration:0},je.default.createElement(Mt,null,je.default.createElement(Rt,{asChild:!0},je.default.createElement(oi,{className:"tw-ml-2 tw-size-4 tw-text-muted"})),je.default.createElement(It,null,je.default.createElement("div",{className:"tw-max-w-80"},o))))),je.default.createElement(ge,{variant:"ghost",size:"fit",className:"tw-text-muted hover:tw-bg-secondary",title:`Add new ${e.toLowerCase()}`,onClick:n},je.default.createElement(hm,{className:`tw-size-4 ${r}`}))),sVt=({title:t,IconComponent:e,iconColorClassName:r,items:n,activeItem:o,activeSection:i,sectionType:a,renderIcon:s,onItemClick:u,onAddClick:l,onDeleteItem:c,tooltip:d})=>je.default.createElement("div",null,je.default.createElement(YLe,{IconComponent:e,title:t,iconColorClassName:r,onAddClick:l,tooltip:d}),je.default.createElement("div",{className:"tw-space-y-1"},n.map(f=>je.default.createElement("div",{key:f.id,className:_e("tw-group tw-flex tw-cursor-pointer tw-items-center tw-justify-between tw-rounded-md tw-p-2 hover:tw-bg-secondary/50",i===a&&o===f.id&&"tw-bg-secondary tw-text-normal"),onClick:()=>u(f.id,f.name)},je.default.createElement("div",{className:"tw-flex tw-min-w-0 tw-flex-1 tw-items-center"},s?s(f):je.default.createElement(e,{className:`tw-mr-2 tw-size-4 ${r}`}),je.default.createElement(QI,{className:"tw-flex-1 tw-text-sm"},f.name)),je.default.createElement("div",{className:"tw-flex tw-items-center tw-gap-2"},je.default.createElement("span",{className:"tw-text-xs tw-text-muted group-hover:tw-hidden"},f.count||0),je.default.createElement($i,{className:"tw-hidden tw-size-4 tw-shrink-0 tw-text-muted hover:tw-text-warning group-hover:tw-block group-hover:tw-flex-none",onClick:p=>c(p,f)}))))));function fSn({item:t,viewMode:e,onDelete:r}){let n=t.id.split(".").pop()||"",o=t.isIgnored?ym:$i;return je.default.createElement("div",{className:"tw-group tw-flex tw-cursor-pointer tw-items-center tw-rounded-lg tw-border tw-border-solid tw-border-border tw-p-2 tw-transition-shadow hover:tw-shadow-md"},je.default.createElement("div",{className:"tw-mr-2 tw-shrink-0"},je.default.createElement(dSn,{extension:n,size:"tw-size-8"})),je.default.createElement("div",{className:"tw-flex tw-min-w-0 tw-flex-1 tw-flex-col"},je.default.createElement(QI,{className:"tw-flex-1 tw-text-sm tw-font-medium"},t.isIgnored&&je.default.createElement("span",{className:"tw-text-sm tw-text-error"}," (Ignored files)"),t.name),t.id&&je.default.createElement(QI,{className:"tw-flex-1 tw-text-xs tw-text-faint"},t.id)),je.default.createElement("div",{className:"tw-ml-auto tw-flex tw-min-w-[24px] tw-items-center tw-justify-end tw-gap-2"},je.default.createElement(o,{className:"tw-hidden tw-size-4 tw-shrink-0 tw-text-muted hover:tw-text-warning group-hover:tw-block group-hover:tw-flex-none",onClick:i=>r(i,t)})))}function pSn({initialProject:t,onSave:e,onCancel:r,app:n}){let{inclusions:o,exclusions:i}=(0,je.useMemo)(()=>Ud({inclusions:t?.contextSource.inclusions,exclusions:t?.contextSource.exclusions,isProject:!0}),[t.contextSource]),a=(0,je.useMemo)(()=>n.vault.getFiles(),[n.vault]),s=(0,je.useCallback)((B,q,K)=>{let U=B.filter(we=>Hs(we,q,K)),te=(we,de,Ue,Ve)=>{de&&de.forEach(rt=>{let lr={[Ue]:[rt]};Hs(we,lr,null)&&!Ve[rt].some(bn=>bn.id===we.path)&&Ve[rt].push({id:we.path,name:we.basename})})},z={},W={},Y={},ae=[];return(q?.tagPatterns??[]).forEach(we=>{z[we]=[]}),(q?.folderPatterns??[]).forEach(we=>{W[we]=[]}),(q?.extensionPatterns??[]).forEach(we=>{Y[we]=[]}),U.forEach(we=>{te(we,q?.tagPatterns,"tagPatterns",z),te(we,q?.folderPatterns,"folderPatterns",W),te(we,q?.extensionPatterns,"extensionPatterns",Y),q?.notePatterns&&Hs(we,{notePatterns:q.notePatterns},null)&&!ae.some(de=>de.id===we.path)&&ae.push({id:we.path,name:we.basename})}),{tags:z,folders:W,extensions:Y,notes:ae}},[]),[u,l]=(0,je.useState)(()=>s(a,o,i)),[c,d]=(0,je.useState)(()=>{let B=a.filter(q=>i&&Hs(q,i,null));return{files:new Set(B)}}),f=(0,je.useRef)(u),p=(0,je.useRef)(c),[m,h]=(0,je.useState)(""),[b,g]=(0,je.useState)(null),[y,w]=(0,je.useState)(null),S=(0,je.useCallback)((B,q)=>{let K=Object.keys(B.tags),U=Object.keys(B.folders),te=Object.keys(B.extensions),z=B.notes.map(W=>{let Y=q.find(ae=>ae.path===W.id);if(Y)return KV(Y)}).filter(Boolean);return WV({tagPatterns:K,folderPatterns:U,extensionPatterns:te,notePatterns:z})},[]),C=(0,je.useCallback)(B=>{let q=new Array(...B.files).map(K=>KV(K));return WV({notePatterns:q})||""},[]);(0,je.useEffect)(()=>{f.current=u,p.current=c},[u,c]);let P=(0,je.useMemo)(()=>{let B=[],q=(U,te)=>{te.forEach(z=>{U.some(W=>W.id===z.id)||U.push({id:z.id,name:z.name})})};return[u.tags,u.folders,u.extensions,{notes:u.notes}].forEach(U=>{Object.values(U).forEach(te=>{q(B,te)})}),B},[u]),E=(0,je.useCallback)(B=>{let q=[],K=[],U=[];return B.split(",").map(z=>z.trim()).filter(z=>z).forEach(z=>{z.startsWith("#")?q.push(z.substring(1)):z.startsWith(".")||z.startsWith("*.")?U.push(z.replace("*","")):K.push(z)}),{tags:q,titles:K,extensions:U}},[]),A=(0,je.useMemo)(()=>{if(m){let B=E(m);return P.filter(q=>{let K=a.find(ae=>ae.path===q.id);if(!K)return!1;let U=K.extension==="md",te=B.tags.length>0&&U&&B.tags.some(ae=>iR(K).some(de=>(de.startsWith("#")?de.substring(1):de).toLowerCase().includes(ae.toLowerCase()))),z=B.titles.length>0&&B.titles.some(ae=>K.basename.toLowerCase().includes(ae.toLowerCase())),W=B.extensions.length>0&&B.extensions.some(ae=>`.${K.extension}`.toLowerCase()===ae.toLowerCase());return B.tags.length>0||B.titles.length>0||B.extensions.length>0?te||z||W:!1}).map(q=>({id:q.id,name:q.name}))}if(b==="tags"&&y){let B=u.tags[y];return B||[]}if(b==="folders"&&y){let B=u.folders[y];return B||[]}if(b==="files")return u.notes;if(b==="extensions"&&y){let B=u.extensions[y];return B||[]}return b==="ignoreFiles"?Array.from(c.files).map(B=>({id:B.path,name:B.basename})):[]},[m,b,y,E,P,a,u.tags,u.folders,u.notes,u.extensions,c.files]),I=(0,je.useCallback)(B=>[...B].sort((q,K)=>q.name.toLowerCase().localeCompare(K.name.toLowerCase())),[]),R=(0,je.useCallback)((B,q)=>Object.entries(B).sort(([K],[U])=>K.localeCompare(U)).map(([K,U])=>({id:K,name:q?q(K):K,count:U.length})),[]),j=(0,je.useCallback)((B,q,K)=>{let U=W=>a.filter(Y=>Hs(Y,W,null)).map(Y=>({id:Y.path,name:Y.basename})),te=[...p.current.files],z=U(K).map(W=>({...W,isIgnored:te.some(Y=>Y.path===W.id)}));l(W=>({...W,[B]:{...W[B],[q]:z}}))},[a]),N=(0,je.useCallback)((B,q)=>{let K={tags:{...B.tags},folders:{...B.folders},extensions:{...B.extensions},notes:[...B.notes]},U=te=>{Object.keys(te).forEach(z=>{te[z]=te[z].filter(W=>W.id!==q)})};return U(K.tags),U(K.folders),U(K.extensions),K.notes=K.notes.filter(te=>te.id!==q),K},[]),$=(0,je.useCallback)((B,q=null,K=!0)=>{g(B),w(q),K&&h("")},[]),k=(0,je.useMemo)(()=>{let B=q=>(K,U)=>{K.stopPropagation(),l(te=>{let z={...te[q]};return delete z[U.id],{...te,[q]:z}})};return{delete:{tag:B("tags"),folder:B("folders"),extension:B("extensions")},add:{tag:()=>{new NU(n,q=>{let K=kne(q);j("tags",K,{tagPatterns:[K]})}).open()},folder:()=>{new jU(n,q=>{j("folders",q,{folderPatterns:[q]})}).open()},file:()=>{new CW({app:n,onFileSelect:q=>{u.notes.find(U=>U.id===q.path)||(d(U=>{let te=new Set(U.files);return te.delete(q),{...U,files:te}}),l(U=>({...U,notes:[...U.notes,{id:q.path,name:q.basename}]})))},excludeFilePaths:[],titleOnly:!1}).open()},extension:()=>{new Cce.Notice("Adding extension is temporarily not supported.")},ignoreFile:()=>{new CW({app:n,onFileSelect:q=>{c.files.has(q)||(d(U=>{let te=new Set(U.files);return te.add(q),{...U,files:te}}),l(U=>N(U,q.path)))},excludeFilePaths:[],titleOnly:!1}).open()}},click:{tag:q=>{$("tags",q)},folder:q=>{$("folders",q)},extension:q=>{$("extensions",q)},files:()=>{$("files")},ignoreFiles:()=>{$("ignoreFiles")}}}},[n,u.notes,c.files,j,N,$]),H=()=>m?`Search Results for: "${m}"`:b==="tags"&&y?`Tag: ${y}`:b==="folders"&&y?`Folder: ${y}`:b==="files"?"Files":b==="extensions"&&y?`Extension: ${y}`:b==="ignoreFiles"?"Ignore Files":"Select a category to view items",V=(B,q)=>{B.stopPropagation();let K=a.find(U=>U.path===q.id);K&&(d(U=>{let te=new Set(U.files);return te.add(K),{...U,files:te}}),l(U=>N(U,q.id)))},Q=(0,je.useCallback)(()=>{let B=S(f.current,a),q=C(p.current),{inclusions:K,exclusions:U}=Ud({inclusions:B,exclusions:q,isProject:!0}),te=s(a,K,U);l(te)},[a,C,S,s]),G=(B,q)=>{B.stopPropagation();let K=a.find(U=>U.path===q.id);K&&(d(U=>{let te=new Set(U.files);return te.delete(K),{...U,files:te}}),Q())},D=()=>{let B=S(u,a),q=C(c);e({...t,contextSource:{...t.contextSource,inclusions:B,exclusions:q}})};return je.default.createElement("div",{className:"tw-flex tw-h-full tw-flex-col"},je.default.createElement(PHt,{direction:"horizontal",className:"tw-flex-1"},je.default.createElement(zLe,{defaultSize:30,minSize:20,maxSize:40},je.default.createElement("div",{className:"tw-flex tw-h-full tw-flex-col"},je.default.createElement("div",{className:"tw-border-b tw-p-4"},je.default.createElement("h2",{className:"tw-text-lg tw-font-semibold"},"File Context")),je.default.createElement(_ce,{className:"tw-max-h-[500px] tw-flex-1"},je.default.createElement("div",{className:"tw-space-y-6 tw-p-4"},je.default.createElement(sVt,{title:"Tags",IconComponent:NR,iconColorClassName:"tw-text-context-manager-orange",items:R(u.tags,B=>B.slice(1)),activeItem:y,activeSection:b,sectionType:"tags",renderIcon:B=>je.default.createElement("span",{className:"tw-mr-2 tw-text-faint"},"#"),onItemClick:k.click.tag,onAddClick:k.add.tag,onDeleteItem:(B,q)=>k.delete.tag(B,q),tooltip:"must be in note property"}),je.default.createElement(MW,null),je.default.createElement(sVt,{title:"Folders",IconComponent:cy,iconColorClassName:"tw-text-context-manager-yellow",items:R(u.folders),activeItem:y,activeSection:b,sectionType:"folders",onItemClick:k.click.folder,onAddClick:k.add.folder,onDeleteItem:(B,q)=>k.delete.folder(B,q)}),je.default.createElement(MW,null),je.default.createElement("div",null,je.default.createElement(YLe,{IconComponent:ly,title:"Files",iconColorClassName:"tw-text-context-manager-blue",onAddClick:k.add.file}),je.default.createElement("div",{className:_e("tw-cursor-pointer tw-rounded-md tw-p-2 tw-text-sm hover:tw-bg-secondary/50",b==="files"&&"tw-bg-secondary tw-text-normal"),onClick:k.click.files},"Files (",u.notes.length,")")),je.default.createElement(MW,null),je.default.createElement("div",null,je.default.createElement(YLe,{IconComponent:$i,title:"Ignore Files",iconColorClassName:"tw-text-context-manager-red",onAddClick:k.add.ignoreFile}),je.default.createElement("div",{className:_e("tw-cursor-pointer tw-rounded-md tw-p-2 tw-text-sm hover:tw-bg-secondary/50",b==="ignoreFiles"&&"tw-bg-secondary tw-text-normal"),onClick:k.click.ignoreFiles},"Ignore Files (",c.files.size,")")))))),je.default.createElement(EHt,{withHandle:!0}),je.default.createElement(zLe,{defaultSize:70},je.default.createElement("div",{className:"tw-flex tw-h-full tw-flex-col"},je.default.createElement("div",{className:"tw-border-b tw-p-4"},je.default.createElement(wce,{placeholder:"Custom search: title, #tag1, .jpg",value:m,onChange:B=>{h(B),B&&$("search",null,!1)}})),je.default.createElement("div",{className:"tw-p-4"},je.default.createElement("h3",{className:"tw-text-lg tw-font-medium tw-text-muted"},H())),je.default.createElement(_ce,{className:"tw-max-h-[400px] tw-flex-1 tw-p-4 tw-pt-0"},A.length===0?je.default.createElement("div",{className:"tw-mt-10 tw-text-center tw-text-muted"},b?"No items found.":"Select a category from the sidebar to view items."):je.default.createElement("div",{className:"tw-space-y-2",style:{display:"block"}},I(A).map(B=>je.default.createElement(fSn,{key:B.id,item:B,viewMode:"list",onDelete:b==="ignoreFiles"||B.isIgnored?G:V}))))))),je.default.createElement("div",{className:"tw-flex tw-justify-end tw-gap-2 tw-border-t tw-p-1"},je.default.createElement(ge,{variant:"ghost",onClick:r},"Cancel"),je.default.createElement(ge,{onClick:D},"Save")))}var xce=class extends Cce.Modal{constructor(r,n,o){super(r);this.onSave=n;this.initialProject=o}onOpen(){let{contentEl:r,modalEl:n}=this;this.root=(0,uVt.createRoot)(r),n.style.minWidth="50vw";let o=a=>{this.onSave(a),this.close()},i=()=>{this.close()};this.root.render(je.default.createElement(pSn,{initialProject:this.initialProject,onSave:o,onCancel:i,app:this.app}))}onClose(){this.root&&this.root.unmount()}};var WU=F(X());var Oce=F(X());var mVt=F(X(),1);var cVt=F(X(),1),dVt=F(os(),1);var nd=F(X(),1);var lVt=F(X(),1);function mSn(t,e){typeof t=="function"?t(e):t!=null&&(t.current=e)}function CD(...t){return e=>t.forEach(r=>mSn(r,e))}function Oi(...t){return lVt.useCallback(CD(...t),t)}var VU=F(ft(),1),XLe=nd.forwardRef((t,e)=>{let{children:r,...n}=t,o=nd.Children.toArray(r),i=o.find(gSn);if(i){let a=i.props.children,s=o.map(u=>u===i?nd.Children.count(a)>1?nd.Children.only(null):nd.isValidElement(a)?a.props.children:null:u);return(0,VU.jsx)(ZLe,{...n,ref:e,children:nd.isValidElement(a)?nd.cloneElement(a,void 0,s):null})}return(0,VU.jsx)(ZLe,{...n,ref:e,children:r})});XLe.displayName="Slot";var ZLe=nd.forwardRef((t,e)=>{let{children:r,...n}=t;if(nd.isValidElement(r)){let o=bSn(r);return nd.cloneElement(r,{...ySn(n,r.props),ref:e?CD(e,o):o})}return nd.Children.count(r)>1?nd.Children.only(null):null});ZLe.displayName="SlotClone";var hSn=({children:t})=>(0,VU.jsx)(VU.Fragment,{children:t});function gSn(t){return nd.isValidElement(t)&&t.type===hSn}function ySn(t,e){let r={...e};for(let n in e){let o=t[n],i=e[n];/^on[A-Z]/.test(n)?o&&i?r[n]=(...s)=>{i(...s),o(...s)}:o&&(r[n]=o):n==="style"?r[n]={...o,...i}:n==="className"&&(r[n]=[o,i].filter(Boolean).join(" "))}return{...t,...r}}function bSn(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,r=e&&"isReactWarning"in e&&e.isReactWarning;return r?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,r=e&&"isReactWarning"in e&&e.isReactWarning,r?t.props.ref:t.props.ref||t.ref)}var fVt=F(ft(),1),_Sn=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],uo=_Sn.reduce((t,e)=>{let r=cVt.forwardRef((n,o)=>{let{asChild:i,...a}=n,s=i?XLe:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),(0,fVt.jsx)(s,{...a,ref:o})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function pVt(t,e){t&&dVt.flushSync(()=>t.dispatchEvent(e))}var hVt=F(ft(),1),vSn="Label",gVt=mVt.forwardRef((t,e)=>(0,hVt.jsx)(uo.label,{...t,ref:e,onMouseDown:r=>{r.target.closest("button, input, select, textarea")||(t.onMouseDown?.(r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));gVt.displayName=vSn;var QLe=gVt;var SSn=yF("tw-text-sm tw-font-medium tw-leading-none peer-disabled:tw-cursor-not-allowed peer-disabled:tw-opacity-70"),Hf=Oce.forwardRef(({className:t,...e},r)=>Oce.createElement(QLe,{ref:r,className:_e(SSn(),t),...e}));Hf.displayName=QLe.displayName;var Hn=({label:t,required:e=!1,error:r=!1,description:n,errorMessage:o="This field is required",children:i})=>WU.default.createElement("div",{className:"tw-space-y-2"},WU.default.createElement(Hf,{className:r?"tw-text-error":""},t," ",e&&WU.default.createElement("span",{className:"tw-text-error"},"*")),n&&WU.default.createElement("p",{className:"tw-text-sm tw-text-muted"},n),i,r&&WU.default.createElement("p",{className:"tw-text-xs tw-text-error"},o));var OD=F(X());function Pce({options:t,placeholder:e,containerClassName:r,className:n,...o}){return OD.default.createElement("div",{className:_e("tw-group tw-relative tw-w-full",r)},OD.default.createElement("select",{className:_e("tw-w-full tw-appearance-none","tw-flex tw-h-9 tw-rounded-md tw-border tw-border-solid tw-border-border tw-bg-dropdown tw-px-3 tw-py-1 tw-pr-8","tw-text-sm tw-shadow tw-transition-colors","focus:tw-outline-none focus:tw-ring-1 focus:tw-ring-ring","disabled:tw-cursor-not-allowed disabled:tw-opacity-50","hover:tw-bg-interactive-hover hover:tw-text-normal",n),...o},e&&OD.default.createElement("option",{value:"",disabled:!0},e),t.map(i=>OD.default.createElement("option",{key:i.value,value:i.value},i.label))),OD.default.createElement("div",{className:_e("tw-pointer-events-none tw-absolute tw-inset-y-0 tw-right-0 tw-flex tw-items-center tw-pr-2","tw-transition-colors group-hover:[&>svg]:tw-text-normal",o.disabled&&"tw-opacity-50")},OD.default.createElement(ki,{className:"tw-size-4"})))}var oM=F(X());var PD=F(X());var ji=F(X(),1);function KU(t,[e,r]){return Math.min(r,Math.max(e,t))}function gi(t,e,{checkForDefaultPrevented:r=!0}={}){return function(o){if(t?.(o),r===!1||!o.defaultPrevented)return e?.(o)}}var Ece=F(X(),1);function GU(t){let e=Ece.useRef({value:t,previous:t});return Ece.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var nM=F(X(),1);var WP=F(X(),1),yVt=F(ft(),1);function bVt(t,e=[]){let r=[];function n(i,a){let s=WP.createContext(a),u=r.length;r=[...r,a];function l(d){let{scope:f,children:p,...m}=d,h=f?.[t][u]||s,b=WP.useMemo(()=>m,Object.values(m));return(0,yVt.jsx)(h.Provider,{value:b,children:p})}function c(d,f){let p=f?.[t][u]||s,m=WP.useContext(p);if(m)return m;if(a!==void 0)return a;throw new Error(`\`${d}\` must be used within \`${i}\``)}return l.displayName=i+"Provider",[l,c]}let o=()=>{let i=r.map(a=>WP.createContext(a));return function(s){let u=s?.[t]||i;return WP.useMemo(()=>({[`__scope${t}`]:{...s,[t]:u}}),[s,u])}};return o.scopeName=t,[n,xSn(o,...e)]}function xSn(...t){let e=t[0];if(t.length===1)return e;let r=()=>{let n=t.map(o=>({useScope:o(),scopeName:o.scopeName}));return function(i){let a=n.reduce((s,{useScope:u,scopeName:l})=>{let d=u(i)[`__scope${l}`];return{...s,...d}},{});return WP.useMemo(()=>({[`__scope${e.scopeName}`]:a}),[a])}};return r.scopeName=e.scopeName,r}var od=F(X(),1);var JU=F(ft(),1),Tce=od.forwardRef((t,e)=>{let{children:r,...n}=t,o=od.Children.toArray(r),i=o.find(OSn);if(i){let a=i.props.children,s=o.map(u=>u===i?od.Children.count(a)>1?od.Children.only(null):od.isValidElement(a)?a.props.children:null:u);return(0,JU.jsx)(eFe,{...n,ref:e,children:od.isValidElement(a)?od.cloneElement(a,void 0,s):null})}return(0,JU.jsx)(eFe,{...n,ref:e,children:r})});Tce.displayName="Slot";var eFe=od.forwardRef((t,e)=>{let{children:r,...n}=t;if(od.isValidElement(r)){let o=ESn(r);return od.cloneElement(r,{...PSn(n,r.props),ref:e?CD(e,o):o})}return od.Children.count(r)>1?od.Children.only(null):null});eFe.displayName="SlotClone";var CSn=({children:t})=>(0,JU.jsx)(JU.Fragment,{children:t});function OSn(t){return od.isValidElement(t)&&t.type===CSn}function PSn(t,e){let r={...e};for(let n in e){let o=t[n],i=e[n];/^on[A-Z]/.test(n)?o&&i?r[n]=(...s)=>{i(...s),o(...s)}:o&&(r[n]=o):n==="style"?r[n]={...o,...i}:n==="className"&&(r[n]=[o,i].filter(Boolean).join(" "))}return{...t,...r}}function ESn(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,r=e&&"isReactWarning"in e&&e.isReactWarning;return r?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,r=e&&"isReactWarning"in e&&e.isReactWarning,r?t.props.ref:t.props.ref||t.ref)}var Ace=F(ft(),1);function Ice(t){let e=t+"CollectionProvider",[r,n]=bVt(e),[o,i]=r(e,{collectionRef:{current:null},itemMap:new Map}),a=p=>{let{scope:m,children:h}=p,b=nM.default.useRef(null),g=nM.default.useRef(new Map).current;return(0,Ace.jsx)(o,{scope:m,itemMap:g,collectionRef:b,children:h})};a.displayName=e;let s=t+"CollectionSlot",u=nM.default.forwardRef((p,m)=>{let{scope:h,children:b}=p,g=i(s,h),y=Oi(m,g.collectionRef);return(0,Ace.jsx)(Tce,{ref:y,children:b})});u.displayName=s;let l=t+"CollectionItemSlot",c="data-radix-collection-item",d=nM.default.forwardRef((p,m)=>{let{scope:h,children:b,...g}=p,y=nM.default.useRef(null),w=Oi(m,y),S=i(l,h);return nM.default.useEffect(()=>(S.itemMap.set(y,{ref:y,...g}),()=>void S.itemMap.delete(y))),(0,Ace.jsx)(Tce,{[c]:"",ref:w,children:b})});d.displayName=l;function f(p){let m=i(t+"CollectionConsumer",p);return nM.default.useCallback(()=>{let b=m.collectionRef.current;if(!b)return[];let g=Array.from(b.querySelectorAll(`[${c}]`));return Array.from(m.itemMap.values()).sort((S,C)=>g.indexOf(S.ref.current)-g.indexOf(C.ref.current))},[m.collectionRef,m.itemMap])}return[{Provider:a,Slot:u,ItemSlot:d},f,n]}var Al=F(ft(),1),_Vt=["PageUp","PageDown"],vVt=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],wVt={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},YU="Slider",[tFe,TSn,ASn]=Ice(YU),[SVt,Cli]=Vi(YU,[ASn]),[ISn,Mce]=SVt(YU),xVt=ji.forwardRef((t,e)=>{let{name:r,min:n=0,max:o=100,step:i=1,orientation:a="horizontal",disabled:s=!1,minStepsBetweenThumbs:u=0,defaultValue:l=[n],value:c,onValueChange:d=()=>{},onValueCommit:f=()=>{},inverted:p=!1,form:m,...h}=t,b=ji.useRef(new Set),g=ji.useRef(0),w=a==="horizontal"?MSn:RSn,[S=[],C]=Gc({prop:c,defaultProp:l,onChange:j=>{[...b.current][g.current]?.focus(),d(j)}}),P=ji.useRef(S);function E(j){let N=FSn(S,j);R(j,N)}function A(j){R(j,g.current)}function I(){let j=P.current[g.current];S[g.current]!==j&&f(S)}function R(j,N,{commit:$}={commit:!1}){let k=qSn(i),H=USn(Math.round((j-n)/i)*i+n,k),V=KU(H,[n,o]);C((Q=[])=>{let G=DSn(Q,V,N);if(BSn(G,u*i)){g.current=G.indexOf(V);let D=String(G)!==String(Q);return D&&$&&f(G),D?G:Q}else return Q})}return(0,Al.jsx)(ISn,{scope:t.__scopeSlider,name:r,disabled:s,min:n,max:o,valueIndexToChangeRef:g,thumbs:b.current,values:S,orientation:a,form:m,children:(0,Al.jsx)(tFe.Provider,{scope:t.__scopeSlider,children:(0,Al.jsx)(tFe.Slot,{scope:t.__scopeSlider,children:(0,Al.jsx)(w,{"aria-disabled":s,"data-disabled":s?"":void 0,...h,ref:e,onPointerDown:gi(h.onPointerDown,()=>{s||(P.current=S)}),min:n,max:o,inverted:p,onSlideStart:s?void 0:E,onSlideMove:s?void 0:A,onSlideEnd:s?void 0:I,onHomeKeyDown:()=>!s&&R(n,0,{commit:!0}),onEndKeyDown:()=>!s&&R(o,S.length-1,{commit:!0}),onStepKeyDown:({event:j,direction:N})=>{if(!s){let H=_Vt.includes(j.key)||j.shiftKey&&vVt.includes(j.key)?10:1,V=g.current,Q=S[V],G=i*H*N;R(Q+G,V,{commit:!0})}}})})})})});xVt.displayName=YU;var[CVt,OVt]=SVt(YU,{startEdge:"left",endEdge:"right",size:"width",direction:1}),MSn=ji.forwardRef((t,e)=>{let{min:r,max:n,dir:o,inverted:i,onSlideStart:a,onSlideMove:s,onSlideEnd:u,onStepKeyDown:l,...c}=t,[d,f]=ji.useState(null),p=Oi(e,w=>f(w)),m=ji.useRef(),h=TI(o),b=h==="ltr",g=b&&!i||!b&&i;function y(w){let S=m.current||d.getBoundingClientRect(),C=[0,S.width],E=oFe(C,g?[r,n]:[n,r]);return m.current=S,E(w-S.left)}return(0,Al.jsx)(CVt,{scope:t.__scopeSlider,startEdge:g?"left":"right",endEdge:g?"right":"left",direction:g?1:-1,size:"width",children:(0,Al.jsx)(PVt,{dir:h,"data-orientation":"horizontal",...c,ref:p,style:{...c.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:w=>{let S=y(w.clientX);a?.(S)},onSlideMove:w=>{let S=y(w.clientX);s?.(S)},onSlideEnd:()=>{m.current=void 0,u?.()},onStepKeyDown:w=>{let C=wVt[g?"from-left":"from-right"].includes(w.key);l?.({event:w,direction:C?-1:1})}})})}),RSn=ji.forwardRef((t,e)=>{let{min:r,max:n,inverted:o,onSlideStart:i,onSlideMove:a,onSlideEnd:s,onStepKeyDown:u,...l}=t,c=ji.useRef(null),d=Oi(e,c),f=ji.useRef(),p=!o;function m(h){let b=f.current||c.current.getBoundingClientRect(),g=[0,b.height],w=oFe(g,p?[n,r]:[r,n]);return f.current=b,w(h-b.top)}return(0,Al.jsx)(CVt,{scope:t.__scopeSlider,startEdge:p?"bottom":"top",endEdge:p?"top":"bottom",size:"height",direction:p?1:-1,children:(0,Al.jsx)(PVt,{"data-orientation":"vertical",...l,ref:d,style:{...l.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:h=>{let b=m(h.clientY);i?.(b)},onSlideMove:h=>{let b=m(h.clientY);a?.(b)},onSlideEnd:()=>{f.current=void 0,s?.()},onStepKeyDown:h=>{let g=wVt[p?"from-bottom":"from-top"].includes(h.key);u?.({event:h,direction:g?-1:1})}})})}),PVt=ji.forwardRef((t,e)=>{let{__scopeSlider:r,onSlideStart:n,onSlideMove:o,onSlideEnd:i,onHomeKeyDown:a,onEndKeyDown:s,onStepKeyDown:u,...l}=t,c=Mce(YU,r);return(0,Al.jsx)(uo.span,{...l,ref:e,onKeyDown:gi(t.onKeyDown,d=>{d.key==="Home"?(a(d),d.preventDefault()):d.key==="End"?(s(d),d.preventDefault()):_Vt.concat(vVt).includes(d.key)&&(u(d),d.preventDefault())}),onPointerDown:gi(t.onPointerDown,d=>{let f=d.target;f.setPointerCapture(d.pointerId),d.preventDefault(),c.thumbs.has(f)?f.focus():n(d)}),onPointerMove:gi(t.onPointerMove,d=>{d.target.hasPointerCapture(d.pointerId)&&o(d)}),onPointerUp:gi(t.onPointerUp,d=>{let f=d.target;f.hasPointerCapture(d.pointerId)&&(f.releasePointerCapture(d.pointerId),i(d))})})}),EVt="SliderTrack",TVt=ji.forwardRef((t,e)=>{let{__scopeSlider:r,...n}=t,o=Mce(EVt,r);return(0,Al.jsx)(uo.span,{"data-disabled":o.disabled?"":void 0,"data-orientation":o.orientation,...n,ref:e})});TVt.displayName=EVt;var rFe="SliderRange",AVt=ji.forwardRef((t,e)=>{let{__scopeSlider:r,...n}=t,o=Mce(rFe,r),i=OVt(rFe,r),a=ji.useRef(null),s=Oi(e,a),u=o.values.length,l=o.values.map(f=>MVt(f,o.min,o.max)),c=u>1?Math.min(...l):0,d=100-Math.max(...l);return(0,Al.jsx)(uo.span,{"data-orientation":o.orientation,"data-disabled":o.disabled?"":void 0,...n,ref:s,style:{...t.style,[i.startEdge]:c+"%",[i.endEdge]:d+"%"}})});AVt.displayName=rFe;var nFe="SliderThumb",IVt=ji.forwardRef((t,e)=>{let r=TSn(t.__scopeSlider),[n,o]=ji.useState(null),i=Oi(e,s=>o(s)),a=ji.useMemo(()=>n?r().findIndex(s=>s.ref.current===n):-1,[r,n]);return(0,Al.jsx)(jSn,{...t,ref:i,index:a})}),jSn=ji.forwardRef((t,e)=>{let{__scopeSlider:r,index:n,name:o,...i}=t,a=Mce(nFe,r),s=OVt(nFe,r),[u,l]=ji.useState(null),c=Oi(e,y=>l(y)),d=u?a.form||!!u.closest("form"):!0,f=Ix(u),p=a.values[n],m=p===void 0?0:MVt(p,a.min,a.max),h=LSn(n,a.values.length),b=f?.[s.size],g=b?kSn(b,m,s.direction):0;return ji.useEffect(()=>{if(u)return a.thumbs.add(u),()=>{a.thumbs.delete(u)}},[u,a.thumbs]),(0,Al.jsxs)("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[s.startEdge]:`calc(${m}% + ${g}px)`},children:[(0,Al.jsx)(tFe.ItemSlot,{scope:t.__scopeSlider,children:(0,Al.jsx)(uo.span,{role:"slider","aria-label":t["aria-label"]||h,"aria-valuemin":a.min,"aria-valuenow":p,"aria-valuemax":a.max,"aria-orientation":a.orientation,"data-orientation":a.orientation,"data-disabled":a.disabled?"":void 0,tabIndex:a.disabled?void 0:0,...i,ref:c,style:p===void 0?{display:"none"}:t.style,onFocus:gi(t.onFocus,()=>{a.valueIndexToChangeRef.current=n})})}),d&&(0,Al.jsx)(NSn,{name:o??(a.name?a.name+(a.values.length>1?"[]":""):void 0),form:a.form,value:p},n)]})});IVt.displayName=nFe;var NSn=t=>{let{value:e,...r}=t,n=ji.useRef(null),o=GU(e);return ji.useEffect(()=>{let i=n.current,a=window.HTMLInputElement.prototype,u=Object.getOwnPropertyDescriptor(a,"value").set;if(o!==e&&u){let l=new Event("input",{bubbles:!0});u.call(i,e),i.dispatchEvent(l)}},[o,e]),(0,Al.jsx)("input",{style:{display:"none"},...r,ref:n,defaultValue:e})};function DSn(t=[],e,r){let n=[...t];return n[r]=e,n.sort((o,i)=>o-i)}function MVt(t,e,r){let i=100/(r-e)*(t-e);return KU(i,[0,100])}function LSn(t,e){return e>2?`Value ${t+1} of ${e}`:e===2?["Minimum","Maximum"][t]:void 0}function FSn(t,e){if(t.length===1)return 0;let r=t.map(o=>Math.abs(o-e)),n=Math.min(...r);return r.indexOf(n)}function kSn(t,e,r){let n=t/2,i=oFe([0,50],[0,n]);return(n-i(e)*r)*r}function $Sn(t){return t.slice(0,-1).map((e,r)=>t[r+1]-e)}function BSn(t,e){if(e>0){let r=$Sn(t);return Math.min(...r)>=e}return!0}function oFe(t,e){return r=>{if(t[0]===t[1]||e[0]===e[1])return e[0];let n=(e[1]-e[0])/(t[1]-t[0]);return e[0]+n*(r-t[0])}}function qSn(t){return(String(t).split(".")[1]||"").length}function USn(t,e){let r=Math.pow(10,e);return Math.round(t*r)/r}var iFe=xVt,RVt=TVt,jVt=AVt,NVt=IVt;var aFe=PD.forwardRef(({className:t,...e},r)=>PD.createElement(iFe,{ref:r,className:_e("tw-relative tw-flex tw-w-full tw-touch-none tw-select-none tw-items-center",t),...e},PD.createElement(RVt,{className:"tw-relative tw-h-1.5 tw-w-full tw-grow tw-overflow-hidden tw-rounded-full tw-border tw-border-solid tw-bg-interactive-accent/20 tw-border-interactive-accent/30"},PD.createElement(jVt,{className:"tw-absolute tw-h-full tw-bg-interactive-accent"})),PD.createElement(NVt,{className:"tw-block tw-size-4 tw-rounded-full tw-border tw-bg-toggle-thumb tw-shadow tw-transition-colors focus-visible:tw-outline-none focus-visible:tw-ring-1 focus-visible:tw-ring-ring disabled:tw-pointer-events-none disabled:tw-opacity-50"})));aFe.displayName=iFe.displayName;function Dx({value:t,onChange:e,min:r,max:n,step:o,disabled:i,className:a}){let[s,u]=(0,oM.useState)(t);return(0,oM.useEffect)(()=>{u(t)},[t]),oM.default.createElement("div",{className:_e("tw-flex tw-items-center tw-gap-4",a)},oM.default.createElement(aFe,{value:[s],onValueChange:([l])=>u(l),onValueCommit:([l])=>e?.(l),min:r,max:n,step:o,disabled:i,className:"tw-flex-1"}),oM.default.createElement("div",{className:"tw-min-w-[40px] tw-text-right tw-text-sm"},s))}var Lg=F(X());var KP=Lg.forwardRef(({className:t,value:e,...r},n)=>{let o=Lg.useRef(null),i=Lg.useCallback(()=>{let s=o.current;if(s){s.style.height="auto";let u=Math.min(s.scrollHeight,300);s.style.height=`${u}px`}},[]);Lg.useLayoutEffect(()=>{i()},[e,i]),Lg.useEffect(()=>(i(),window.addEventListener("resize",i),()=>window.removeEventListener("resize",i)),[i]);let a=s=>{o.current=s,typeof n=="function"?n(s):n&&(n.current=s)};return Lg.createElement("textarea",{className:_e("tw-min-w-fit tw-resize-y tw-overflow-auto tw-border-solid","tw-flex tw-max-h-[300px] tw-min-h-[60px] tw-w-full tw-rounded-md tw-border tw-bg-transparent tw-px-3 tw-py-2 tw-text-base tw-shadow-sm placeholder:tw-text-muted focus-visible:tw-outline-none focus-visible:tw-ring-1 focus-visible:tw-ring-ring disabled:tw-cursor-not-allowed disabled:tw-opacity-50 md:tw-text-sm",t),value:e,ref:a,onChange:s=>{i(),r.onChange?.(s)},onInput:i,onCompositionEnd:i,onPaste:()=>{setTimeout(i,0)},...r})});KP.displayName="Textarea";tr();wn();var ZU=require("obsidian"),ar=F(X()),DVt=F(wc());kr();function HSn({initialProject:t,onSave:e,onCancel:r}){let n=Tn(),[o,i]=(0,ar.useState)(!1),[a,s]=(0,ar.useState)({name:!1,systemPrompt:!1,projectModelKey:!1,inclusions:!1}),[u,l]=(0,ar.useState)(t||{id:b4e(),name:"",description:"",systemPrompt:"",projectModelKey:"",modelConfigs:{temperature:bh.TEMPERATURE,maxTokens:bh.MAX_TOKENS},contextSource:{inclusions:"",exclusions:"",webUrls:"",youtubeUrls:""},created:Date.now(),UsageTimestamps:Date.now()}),c=Qh(u.contextSource.inclusions||u.contextSource.exclusions||"nothing").reverse().join(","),d=h=>{new xce(app,async g=>{l(g)},h).open()},f=()=>u.name&&u.projectModelKey,p=(h,b)=>{l(g=>{if(typeof b=="string"&&h==="projectModelKey"&&(b=b.trim()),Array.isArray(b)&&b.every(y=>typeof y=="string")&&(b=b.map(y=>y.trim()).filter(Boolean)),h.includes(".")){let[y,w]=h.split("."),C=g[y];if(typeof C=="object"&&C!==null)return{...g,[y]:{...C,[w]:b}}}return{...g,[h]:b}})},m=async()=>{u.name&&(u.name=u.name.trim());let b=["name","projectModelKey"].filter(g=>!u[g]);if(b.length>0){s(g=>({...g,...Object.fromEntries(b.map(y=>[y,!0]))})),new ZU.Notice("Please fill in all required fields");return}try{i(!0),await e(u)}catch(g){new ZU.Notice(Go(g)),s(y=>({...y,name:!0}))}finally{i(!1)}};return ar.default.createElement("div",{className:"tw-flex tw-flex-col tw-gap-2 tw-p-4"},ar.default.createElement("div",{className:"tw-mb-2 tw-text-xl tw-font-bold tw-text-normal"},t?"Edit Project":"New Project"),ar.default.createElement("div",{className:"tw-flex tw-flex-col tw-gap-2"},ar.default.createElement(Hn,{label:"Project Name",required:!0,error:a.name&&!u.name,errorMessage:"Project name is required"},ar.default.createElement(so,{type:"text",value:u.name,onChange:h=>p("name",h.target.value),onBlur:()=>s(h=>({...h,name:!0})),className:"tw-w-full"})),ar.default.createElement(Hn,{label:"Description",description:"Briefly describe the purpose and goals of the project"},ar.default.createElement(so,{type:"text",value:u.description,onChange:h=>p("description",h.target.value),className:"tw-w-full"})),ar.default.createElement(Hn,{label:"Project System Prompt",description:"Custom instructions for how the AI should behave in this project context"},ar.default.createElement(KP,{value:u.systemPrompt,onChange:h=>p("systemPrompt",h.target.value),onBlur:()=>s(h=>({...h,systemPrompt:!0})),className:"tw-min-h-32"})),ar.default.createElement(Hn,{label:"Default Model",required:!0,error:a.projectModelKey&&!u.projectModelKey,errorMessage:"Default model is required"},ar.default.createElement(Pce,{value:u.projectModelKey,onChange:h=>{let b=h.target.value,g=n.activeModels.find(S=>S.enabled&&Fr(S)===b);if(!g)return;let{hasApiKey:y,errorNotice:w}=RL(g,n);if(!y&&w){new ZU.Notice(w);return}p("projectModelKey",b)},onBlur:()=>s(h=>({...h,projectModelKey:!0})),placeholder:"Select a model",options:n.activeModels.filter(h=>h.enabled&&h.projectEnabled).map(h=>({label:iW(h),value:Fr(h)}))})),ar.default.createElement("div",{className:"tw-space-y-4"},ar.default.createElement("div",{className:"tw-text-base tw-font-medium"},"Model Configuration"),ar.default.createElement("div",{className:"tw-grid tw-grid-cols-1 tw-gap-4"},ar.default.createElement(Hn,{label:"Temperature"},ar.default.createElement(Dx,{value:u.modelConfigs?.temperature??bh.TEMPERATURE,onChange:h=>p("modelConfigs.temperature",h),min:0,max:2,step:.01,className:"tw-w-full"})),ar.default.createElement(Hn,{label:"Token Limit"},ar.default.createElement(Dx,{value:u.modelConfigs?.maxTokens??bh.MAX_TOKENS,onChange:h=>p("modelConfigs.maxTokens",h),min:1,max:65e3,step:1,className:"tw-w-full"})))),ar.default.createElement("div",{className:"tw-space-y-4"},ar.default.createElement("div",{className:"tw-text-base tw-font-medium"},"Context Sources"),ar.default.createElement(Hn,{label:ar.default.createElement("div",{className:"tw-flex tw-items-center tw-gap-2"},ar.default.createElement("span",null,"File Context"),ar.default.createElement(po,{delayDuration:0},ar.default.createElement(Mt,null,ar.default.createElement(Rt,{asChild:!0},ar.default.createElement(oi,{className:"tw-size-4 tw-text-muted"})),ar.default.createElement(It,null,ar.default.createElement("div",{className:"tw-max-w-80"},ar.default.createElement("strong",null,"Supported File Types:"),ar.default.createElement("br",null),ar.default.createElement("strong",null,"\u2022 Documents:")," pdf, doc, docx, ppt, pptx, epub, txt, rtf and many more",ar.default.createElement("br",null),ar.default.createElement("strong",null,"\u2022 Images:")," jpg, png, svg, gif, bmp, webp, tiff",ar.default.createElement("br",null),ar.default.createElement("strong",null,"\u2022 Spreadsheets:")," xlsx, xls, csv, numbers"))))),description:"Define patterns to include specific files, folders or tags (specified in the note property) in the project context."},ar.default.createElement("div",{className:"tw-flex tw-items-center tw-gap-2"},ar.default.createElement("div",{className:"tw-flex tw-flex-1 tw-flex-row"},ar.default.createElement(QI,{className:"tw-max-w-[100px] tw-text-sm tw-text-accent"},c)),ar.default.createElement(ge,{variant:"secondary",onClick:()=>{d(u)}},"Manage Context"))),ar.default.createElement(Hn,{label:"Web URLs"},ar.default.createElement(KP,{value:u.contextSource?.webUrls,onChange:h=>{let g=h.target.value.split(`
`).map(y=>{if(!y.trim())return y;try{return new URL(y.trim()),y}catch{return y}});p("contextSource.webUrls",g.join(`
`))},placeholder:"Enter web URLs, one per line",className:"tw-min-h-20 tw-w-full"})),ar.default.createElement(Hn,{label:"YouTube URLs"},ar.default.createElement(KP,{value:u.contextSource?.youtubeUrls,onChange:h=>{let g=h.target.value.split(`
`).map(y=>{if(!y.trim())return y;try{let w=new URL(y.trim());return w.hostname.includes("youtube.com")||w.hostname.includes("youtu.be"),y}catch{return y}});p("contextSource.youtubeUrls",g.join(`
`))},placeholder:"Enter YouTube URLs, one per line",className:"tw-min-h-20 tw-w-full"})))),ar.default.createElement("div",{className:"tw-mt-4 tw-flex tw-items-center tw-justify-end tw-gap-2"},ar.default.createElement(ge,{variant:"ghost",onClick:r,disabled:o},"Cancel"),ar.default.createElement(ge,{onClick:m,disabled:o||!f()},o?"Saving...":"Save")))}var RW=class extends ZU.Modal{constructor(r,n,o){super(r);this.onSave=n;this.initialProject=o}onOpen(){let{contentEl:r}=this;this.root=(0,DVt.createRoot)(r);let n=async i=>{await this.onSave(i),this.close()},o=()=>{this.close()};this.root.render(ar.default.createElement(HSn,{initialProject:this.initialProject,onSave:n,onCancel:o}))}onClose(){this.root.unmount()}};var Pi=F(X());var ct=F(X(),1),AFe=F(os(),1);var Ya=F(X(),1);var uFe=F(ft(),1),VSn="DismissableLayer",sFe="dismissableLayer.update",WSn="dismissableLayer.pointerDownOutside",KSn="dismissableLayer.focusOutside",LVt,kVt=Ya.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),lFe=Ya.forwardRef((t,e)=>{let{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:n,onPointerDownOutside:o,onFocusOutside:i,onInteractOutside:a,onDismiss:s,...u}=t,l=Ya.useContext(kVt),[c,d]=Ya.useState(null),f=c?.ownerDocument??globalThis?.document,[,p]=Ya.useState({}),m=Oi(e,E=>d(E)),h=Array.from(l.layers),[b]=[...l.layersWithOutsidePointerEventsDisabled].slice(-1),g=h.indexOf(b),y=c?h.indexOf(c):-1,w=l.layersWithOutsidePointerEventsDisabled.size>0,S=y>=g,C=YSn(E=>{let A=E.target,I=[...l.branches].some(R=>R.contains(A));!S||I||(o?.(E),a?.(E),E.defaultPrevented||s?.())},f),P=ZSn(E=>{let A=E.target;[...l.branches].some(R=>R.contains(A))||(i?.(E),a?.(E),E.defaultPrevented||s?.())},f);return AI(E=>{y===l.layers.size-1&&(n?.(E),!E.defaultPrevented&&s&&(E.preventDefault(),s()))},f),Ya.useEffect(()=>{if(c)return r&&(l.layersWithOutsidePointerEventsDisabled.size===0&&(LVt=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),l.layersWithOutsidePointerEventsDisabled.add(c)),l.layers.add(c),FVt(),()=>{r&&l.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=LVt)}},[c,f,r,l]),Ya.useEffect(()=>()=>{c&&(l.layers.delete(c),l.layersWithOutsidePointerEventsDisabled.delete(c),FVt())},[c,l]),Ya.useEffect(()=>{let E=()=>p({});return document.addEventListener(sFe,E),()=>document.removeEventListener(sFe,E)},[]),(0,uFe.jsx)(uo.div,{...u,ref:m,style:{pointerEvents:w?S?"auto":"none":void 0,...t.style},onFocusCapture:gi(t.onFocusCapture,P.onFocusCapture),onBlurCapture:gi(t.onBlurCapture,P.onBlurCapture),onPointerDownCapture:gi(t.onPointerDownCapture,C.onPointerDownCapture)})});lFe.displayName=VSn;var GSn="DismissableLayerBranch",JSn=Ya.forwardRef((t,e)=>{let r=Ya.useContext(kVt),n=Ya.useRef(null),o=Oi(e,n);return Ya.useEffect(()=>{let i=n.current;if(i)return r.branches.add(i),()=>{r.branches.delete(i)}},[r.branches]),(0,uFe.jsx)(uo.div,{...t,ref:o})});JSn.displayName=GSn;function YSn(t,e=globalThis?.document){let r=qr(t),n=Ya.useRef(!1),o=Ya.useRef(()=>{});return Ya.useEffect(()=>{let i=s=>{if(s.target&&!n.current){let l=function(){$Vt(WSn,r,c,{discrete:!0})};var u=l;let c={originalEvent:s};s.pointerType==="touch"?(e.removeEventListener("click",o.current),o.current=l,e.addEventListener("click",o.current,{once:!0})):l()}else e.removeEventListener("click",o.current);n.current=!1},a=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(a),e.removeEventListener("pointerdown",i),e.removeEventListener("click",o.current)}},[e,r]),{onPointerDownCapture:()=>n.current=!0}}function ZSn(t,e=globalThis?.document){let r=qr(t),n=Ya.useRef(!1);return Ya.useEffect(()=>{let o=i=>{i.target&&!n.current&&$Vt(KSn,r,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",o),()=>e.removeEventListener("focusin",o)},[e,r]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function FVt(){let t=new CustomEvent(sFe);document.dispatchEvent(t)}function $Vt(t,e,r,{discrete:n}){let o=r.originalEvent.target,i=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:r});e&&o.addEventListener(t,e,{once:!0}),n?pVt(o,i):o.dispatchEvent(i)}var Fg=F(X(),1);var HVt=F(ft(),1),cFe="focusScope.autoFocusOnMount",dFe="focusScope.autoFocusOnUnmount",BVt={bubbles:!1,cancelable:!0},XSn="FocusScope",fFe=Fg.forwardRef((t,e)=>{let{loop:r=!1,trapped:n=!1,onMountAutoFocus:o,onUnmountAutoFocus:i,...a}=t,[s,u]=Fg.useState(null),l=qr(o),c=qr(i),d=Fg.useRef(null),f=Oi(e,h=>u(h)),p=Fg.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;Fg.useEffect(()=>{if(n){let y=function(P){if(p.paused||!s)return;let E=P.target;s.contains(E)?d.current=E:iM(d.current,{select:!0})},w=function(P){if(p.paused||!s)return;let E=P.relatedTarget;E!==null&&(s.contains(E)||iM(d.current,{select:!0}))},S=function(P){if(document.activeElement===document.body)for(let A of P)A.removedNodes.length>0&&iM(s)};var h=y,b=w,g=S;document.addEventListener("focusin",y),document.addEventListener("focusout",w);let C=new MutationObserver(S);return s&&C.observe(s,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",y),document.removeEventListener("focusout",w),C.disconnect()}}},[n,s,p.paused]),Fg.useEffect(()=>{if(s){UVt.add(p);let h=document.activeElement;if(!s.contains(h)){let g=new CustomEvent(cFe,BVt);s.addEventListener(cFe,l),s.dispatchEvent(g),g.defaultPrevented||(QSn(oxn(VVt(s)),{select:!0}),document.activeElement===h&&iM(s))}return()=>{s.removeEventListener(cFe,l),setTimeout(()=>{let g=new CustomEvent(dFe,BVt);s.addEventListener(dFe,c),s.dispatchEvent(g),g.defaultPrevented||iM(h??document.body,{select:!0}),s.removeEventListener(dFe,c),UVt.remove(p)},0)}}},[s,l,c,p]);let m=Fg.useCallback(h=>{if(!r&&!n||p.paused)return;let b=h.key==="Tab"&&!h.altKey&&!h.ctrlKey&&!h.metaKey,g=document.activeElement;if(b&&g){let y=h.currentTarget,[w,S]=exn(y);w&&S?!h.shiftKey&&g===S?(h.preventDefault(),r&&iM(w,{select:!0})):h.shiftKey&&g===w&&(h.preventDefault(),r&&iM(S,{select:!0})):g===y&&h.preventDefault()}},[r,n,p.paused]);return(0,HVt.jsx)(uo.div,{tabIndex:-1,...a,ref:f,onKeyDown:m})});fFe.displayName=XSn;function QSn(t,{select:e=!1}={}){let r=document.activeElement;for(let n of t)if(iM(n,{select:e}),document.activeElement!==r)return}function exn(t){let e=VVt(t),r=qVt(e,t),n=qVt(e.reverse(),t);return[r,n]}function VVt(t){let e=[],r=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{let o=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||o?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)e.push(r.currentNode);return e}function qVt(t,e){for(let r of t)if(!txn(r,{upTo:e}))return r}function txn(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function rxn(t){return t instanceof HTMLInputElement&&"select"in t}function iM(t,{select:e=!1}={}){if(t&&t.focus){let r=document.activeElement;t.focus({preventScroll:!0}),t!==r&&rxn(t)&&e&&t.select()}}var UVt=nxn();function nxn(){let t=[];return{add(e){let r=t[0];e!==r&&r?.pause(),t=zVt(t,e),t.unshift(e)},remove(e){t=zVt(t,e),t[0]?.resume()}}}function zVt(t,e){let r=[...t],n=r.indexOf(e);return n!==-1&&r.splice(n,1),r}function oxn(t){return t.filter(e=>e.tagName!=="A")}var Qm=F(X(),1);var WVt=F(X(),1);var pFe=F(ft(),1),ixn="Arrow",KVt=WVt.forwardRef((t,e)=>{let{children:r,width:n=10,height:o=5,...i}=t;return(0,pFe.jsx)(uo.svg,{...i,ref:e,width:n,height:o,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?r:(0,pFe.jsx)("polygon",{points:"0,0 30,0 15,10"})})});KVt.displayName=ixn;var GVt=KVt;var GP=F(X(),1),JVt=F(ft(),1);function YVt(t,e=[]){let r=[];function n(i,a){let s=GP.createContext(a),u=r.length;r=[...r,a];function l(d){let{scope:f,children:p,...m}=d,h=f?.[t][u]||s,b=GP.useMemo(()=>m,Object.values(m));return(0,JVt.jsx)(h.Provider,{value:b,children:p})}function c(d,f){let p=f?.[t][u]||s,m=GP.useContext(p);if(m)return m;if(a!==void 0)return a;throw new Error(`\`${d}\` must be used within \`${i}\``)}return l.displayName=i+"Provider",[l,c]}let o=()=>{let i=r.map(a=>GP.createContext(a));return function(s){let u=s?.[t]||i;return GP.useMemo(()=>({[`__scope${t}`]:{...s,[t]:u}}),[s,u])}};return o.scopeName=t,[n,sxn(o,...e)]}function sxn(...t){let e=t[0];if(t.length===1)return e;let r=()=>{let n=t.map(o=>({useScope:o(),scopeName:o.scopeName}));return function(i){let a=n.reduce((s,{useScope:u,scopeName:l})=>{let d=u(i)[`__scope${l}`];return{...s,...d}},{});return GP.useMemo(()=>({[`__scope${e.scopeName}`]:a}),[a])}};return r.scopeName=e.scopeName,r}var aM=F(ft(),1);var mFe="Popper",[ZVt,hFe]=YVt(mFe),[uxn,XVt]=ZVt(mFe),QVt=t=>{let{__scopePopper:e,children:r}=t,[n,o]=Qm.useState(null);return(0,aM.jsx)(uxn,{scope:e,anchor:n,onAnchorChange:o,children:r})};QVt.displayName=mFe;var e8t="PopperAnchor",t8t=Qm.forwardRef((t,e)=>{let{__scopePopper:r,virtualRef:n,...o}=t,i=XVt(e8t,r),a=Qm.useRef(null),s=Oi(e,a);return Qm.useEffect(()=>{i.onAnchorChange(n?.current||a.current)}),n?null:(0,aM.jsx)(uo.div,{...o,ref:s})});t8t.displayName=e8t;var gFe="PopperContent",[lxn,cxn]=ZVt(gFe),r8t=Qm.forwardRef((t,e)=>{let{__scopePopper:r,side:n="bottom",sideOffset:o=0,align:i="center",alignOffset:a=0,arrowPadding:s=0,avoidCollisions:u=!0,collisionBoundary:l=[],collisionPadding:c=0,sticky:d="partial",hideWhenDetached:f=!1,updatePositionStrategy:p="optimized",onPlaced:m,...h}=t,b=XVt(gFe,r),[g,y]=Qm.useState(null),w=Oi(e,Y=>y(Y)),[S,C]=Qm.useState(null),P=Ix(S),E=P?.width??0,A=P?.height??0,I=n+(i!=="center"?"-"+i:""),R=typeof c=="number"?c:{top:0,right:0,bottom:0,left:0,...c},j=Array.isArray(l)?l:[l],N=j.length>0,$={padding:R,boundary:j.filter(fxn),altBoundary:N},{refs:k,floatingStyles:H,placement:V,isPositioned:Q,middlewareData:G}=RI({strategy:"fixed",placement:I,whileElementsMounted:(...Y)=>NP(...Y,{animationFrame:p==="always"}),elements:{reference:b.anchor},middleware:[jI({mainAxis:o+A,alignmentAxis:a}),u&&NI({mainAxis:!0,crossAxis:!1,limiter:d==="partial"?DI():void 0,...$}),u&&LI({...$}),FI({...$,apply:({elements:Y,rects:ae,availableWidth:we,availableHeight:de})=>{let{width:Ue,height:Ve}=ae.reference,rt=Y.floating.style;rt.setProperty("--radix-popper-available-width",`${we}px`),rt.setProperty("--radix-popper-available-height",`${de}px`),rt.setProperty("--radix-popper-anchor-width",`${Ue}px`),rt.setProperty("--radix-popper-anchor-height",`${Ve}px`)}}),S&&$I({element:S,padding:s}),pxn({arrowWidth:E,arrowHeight:A}),f&&kI({strategy:"referenceHidden",...$})]}),[D,B]=i8t(V),q=qr(m);zn(()=>{Q&&q?.()},[Q,q]);let K=G.arrow?.x,U=G.arrow?.y,te=G.arrow?.centerOffset!==0,[z,W]=Qm.useState();return zn(()=>{g&&W(window.getComputedStyle(g).zIndex)},[g]),(0,aM.jsx)("div",{ref:k.setFloating,"data-radix-popper-content-wrapper":"",style:{...H,transform:Q?H.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:z,"--radix-popper-transform-origin":[G.transformOrigin?.x,G.transformOrigin?.y].join(" "),...G.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:(0,aM.jsx)(lxn,{scope:r,placedSide:D,onArrowChange:C,arrowX:K,arrowY:U,shouldHideArrow:te,children:(0,aM.jsx)(uo.div,{"data-side":D,"data-align":B,...h,ref:w,style:{...h.style,animation:Q?void 0:"none"}})})})});r8t.displayName=gFe;var n8t="PopperArrow",dxn={top:"bottom",right:"left",bottom:"top",left:"right"},o8t=Qm.forwardRef(function(e,r){let{__scopePopper:n,...o}=e,i=cxn(n8t,n),a=dxn[i.placedSide];return(0,aM.jsx)("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[a]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:(0,aM.jsx)(GVt,{...o,ref:r,style:{...o.style,display:"block"}})})});o8t.displayName=n8t;function fxn(t){return t!==null}var pxn=t=>({name:"transformOrigin",options:t,fn(e){let{placement:r,rects:n,middlewareData:o}=e,a=o.arrow?.centerOffset!==0,s=a?0:t.arrowWidth,u=a?0:t.arrowHeight,[l,c]=i8t(r),d={start:"0%",center:"50%",end:"100%"}[c],f=(o.arrow?.x??0)+s/2,p=(o.arrow?.y??0)+u/2,m="",h="";return l==="bottom"?(m=a?d:`${f}px`,h=`${-u}px`):l==="top"?(m=a?d:`${f}px`,h=`${n.floating.height+u}px`):l==="right"?(m=`${-u}px`,h=a?d:`${p}px`):l==="left"&&(m=`${n.floating.width+u}px`,h=a?d:`${p}px`),{data:{x:m,y:h}}}});function i8t(t){let[e,r="center"]=t.split("-");return[e,r]}var a8t=QVt,s8t=t8t,u8t=r8t,l8t=o8t;var Rce=F(X(),1),c8t=F(os(),1);var d8t=F(ft(),1),hxn="Portal",yFe=Rce.forwardRef((t,e)=>{let{container:r,...n}=t,[o,i]=Rce.useState(!1);zn(()=>i(!0),[]);let a=r||o&&globalThis?.document?.body;return a?c8t.default.createPortal((0,d8t.jsx)(uo.div,{...n,ref:e}),a):null});yFe.displayName=hxn;var id=F(X(),1);var XU=F(ft(),1),_Fe=id.forwardRef((t,e)=>{let{children:r,...n}=t,o=id.Children.toArray(r),i=o.find(yxn);if(i){let a=i.props.children,s=o.map(u=>u===i?id.Children.count(a)>1?id.Children.only(null):id.isValidElement(a)?a.props.children:null:u);return(0,XU.jsx)(bFe,{...n,ref:e,children:id.isValidElement(a)?id.cloneElement(a,void 0,s):null})}return(0,XU.jsx)(bFe,{...n,ref:e,children:r})});_Fe.displayName="Slot";var bFe=id.forwardRef((t,e)=>{let{children:r,...n}=t;if(id.isValidElement(r)){let o=_xn(r);return id.cloneElement(r,{...bxn(n,r.props),ref:e?CD(e,o):o})}return id.Children.count(r)>1?id.Children.only(null):null});bFe.displayName="SlotClone";var gxn=({children:t})=>(0,XU.jsx)(XU.Fragment,{children:t});function yxn(t){return id.isValidElement(t)&&t.type===gxn}function bxn(t,e){let r={...e};for(let n in e){let o=t[n],i=e[n];/^on[A-Z]/.test(n)?o&&i?r[n]=(...s)=>{i(...s),o(...s)}:o&&(r[n]=o):n==="style"?r[n]={...o,...i}:n==="className"&&(r[n]=[o,i].filter(Boolean).join(" "))}return{...t,...r}}function _xn(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,r=e&&"isReactWarning"in e&&e.isReactWarning;return r?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,r=e&&"isReactWarning"in e&&e.isReactWarning,r?t.props.ref:t.props.ref||t.ref)}var f8t=F(X(),1);var p8t=F(ft(),1),vxn="VisuallyHidden",vFe=f8t.forwardRef((t,e)=>(0,p8t.jsx)(uo.span,{...t,ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...t.style}}));vFe.displayName=vxn;var Dce=F(X());var ef=F(X());var jce=uD();var wFe=function(){},jW=ef.forwardRef(function(t,e){var r=ef.useRef(null),n=ef.useState({onScrollCapture:wFe,onWheelCapture:wFe,onTouchMoveCapture:wFe}),o=n[0],i=n[1],a=t.forwardProps,s=t.children,u=t.className,l=t.removeScrollBar,c=t.enabled,d=t.shards,f=t.sideCar,p=t.noIsolation,m=t.inert,h=t.allowPinchZoom,b=t.as,g=b===void 0?"div":b,y=t.gapMode,w=HI(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),S=f,C=sD([r,e]),P=ci(ci({},w),o);return ef.createElement(ef.Fragment,null,c&&ef.createElement(S,{sideCar:jce,removeScrollBar:l,shards:d,noIsolation:p,inert:m,setCallbacks:i,allowPinchZoom:!!h,lockRef:r,gapMode:y}),a?ef.cloneElement(ef.Children.only(s),ci(ci({},P),{ref:C})):ef.createElement(g,ci({},P,{className:u,ref:C}),s))});jW.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};jW.classNames={fullWidth:rb,zeroRight:tb};var fa=F(X());var SFe=!1;if(typeof window<"u")try{NW=Object.defineProperty({},"passive",{get:function(){return SFe=!0,!0}}),window.addEventListener("test",NW,NW),window.removeEventListener("test",NW,NW)}catch{SFe=!1}var NW,ED=SFe?{passive:!1}:!1;var wxn=function(t){return t.tagName==="TEXTAREA"},m8t=function(t,e){if(!(t instanceof Element))return!1;var r=window.getComputedStyle(t);return r[e]!=="hidden"&&!(r.overflowY===r.overflowX&&!wxn(t)&&r[e]==="visible")},Sxn=function(t){return m8t(t,"overflowY")},xxn=function(t){return m8t(t,"overflowX")},xFe=function(t,e){var r=e.ownerDocument,n=e;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var o=h8t(t,n);if(o){var i=g8t(t,n),a=i[1],s=i[2];if(a>s)return!0}n=n.parentNode}while(n&&n!==r.body);return!1},Cxn=function(t){var e=t.scrollTop,r=t.scrollHeight,n=t.clientHeight;return[e,r,n]},Oxn=function(t){var e=t.scrollLeft,r=t.scrollWidth,n=t.clientWidth;return[e,r,n]},h8t=function(t,e){return t==="v"?Sxn(e):xxn(e)},g8t=function(t,e){return t==="v"?Cxn(e):Oxn(e)},Pxn=function(t,e){return t==="h"&&e==="rtl"?-1:1},y8t=function(t,e,r,n,o){var i=Pxn(t,window.getComputedStyle(e).direction),a=i*n,s=r.target,u=e.contains(s),l=!1,c=a>0,d=0,f=0;do{var p=g8t(t,s),m=p[0],h=p[1],b=p[2],g=h-b-i*m;(m||g)&&h8t(t,s)&&(d+=g,f+=m),s instanceof ShadowRoot?s=s.host:s=s.parentNode}while(!u&&s!==document.body||u&&(e.contains(s)||e===s));return(c&&(o&&Math.abs(d)<1||!o&&a>d)||!c&&(o&&Math.abs(f)<1||!o&&-a>f))&&(l=!0),l};var Nce=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},b8t=function(t){return[t.deltaX,t.deltaY]},_8t=function(t){return t&&"current"in t?t.current:t},Exn=function(t,e){return t[0]===e[0]&&t[1]===e[1]},Txn=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},Axn=0,QU=[];function v8t(t){var e=fa.useRef([]),r=fa.useRef([0,0]),n=fa.useRef(),o=fa.useState(Axn++)[0],i=fa.useState(DP)[0],a=fa.useRef(t);fa.useEffect(function(){a.current=t},[t]),fa.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(o));var h=bU([t.lockRef.current],(t.shards||[]).map(_8t),!0).filter(Boolean);return h.forEach(function(b){return b.classList.add("allow-interactivity-".concat(o))}),function(){document.body.classList.remove("block-interactivity-".concat(o)),h.forEach(function(b){return b.classList.remove("allow-interactivity-".concat(o))})}}},[t.inert,t.lockRef.current,t.shards]);var s=fa.useCallback(function(h,b){if("touches"in h&&h.touches.length===2||h.type==="wheel"&&h.ctrlKey)return!a.current.allowPinchZoom;var g=Nce(h),y=r.current,w="deltaX"in h?h.deltaX:y[0]-g[0],S="deltaY"in h?h.deltaY:y[1]-g[1],C,P=h.target,E=Math.abs(w)>Math.abs(S)?"h":"v";if("touches"in h&&E==="h"&&P.type==="range")return!1;var A=xFe(E,P);if(!A)return!0;if(A?C=E:(C=E==="v"?"h":"v",A=xFe(E,P)),!A)return!1;if(!n.current&&"changedTouches"in h&&(w||S)&&(n.current=C),!C)return!0;var I=n.current||C;return y8t(I,b,h,I==="h"?w:S,!0)},[]),u=fa.useCallback(function(h){var b=h;if(!(!QU.length||QU[QU.length-1]!==i)){var g="deltaY"in b?b8t(b):Nce(b),y=e.current.filter(function(C){return C.name===b.type&&(C.target===b.target||b.target===C.shadowParent)&&Exn(C.delta,g)})[0];if(y&&y.should){b.cancelable&&b.preventDefault();return}if(!y){var w=(a.current.shards||[]).map(_8t).filter(Boolean).filter(function(C){return C.contains(b.target)}),S=w.length>0?s(b,w[0]):!a.current.noIsolation;S&&b.cancelable&&b.preventDefault()}}},[]),l=fa.useCallback(function(h,b,g,y){var w={name:h,delta:b,target:g,should:y,shadowParent:Ixn(g)};e.current.push(w),setTimeout(function(){e.current=e.current.filter(function(S){return S!==w})},1)},[]),c=fa.useCallback(function(h){r.current=Nce(h),n.current=void 0},[]),d=fa.useCallback(function(h){l(h.type,b8t(h),h.target,s(h,t.lockRef.current))},[]),f=fa.useCallback(function(h){l(h.type,Nce(h),h.target,s(h,t.lockRef.current))},[]);fa.useEffect(function(){return QU.push(i),t.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:f}),document.addEventListener("wheel",u,ED),document.addEventListener("touchmove",u,ED),document.addEventListener("touchstart",c,ED),function(){QU=QU.filter(function(h){return h!==i}),document.removeEventListener("wheel",u,ED),document.removeEventListener("touchmove",u,ED),document.removeEventListener("touchstart",c,ED)}},[]);var p=t.removeScrollBar,m=t.inert;return fa.createElement(fa.Fragment,null,m?fa.createElement(i,{styles:Txn(o)}):null,p?fa.createElement(cD,{gapMode:t.gapMode}):null)}function Ixn(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}var w8t=lD(jce,v8t);var S8t=Dce.forwardRef(function(t,e){return Dce.createElement(jW,ci({},t,{ref:e,sideCar:w8t}))});S8t.classNames=jW.classNames;var DW=S8t;var ur=F(ft(),1),Mxn=[" ","Enter","ArrowUp","ArrowDown"],Rxn=[" ","Enter"],FW="Select",[Fce,kce,jxn]=Ice(FW),[ez,mdi]=Vi(FW,[jxn,hFe]),$ce=hFe(),[Nxn,sM]=ez(FW),[Dxn,Lxn]=ez(FW),x8t=t=>{let{__scopeSelect:e,children:r,open:n,defaultOpen:o,onOpenChange:i,value:a,defaultValue:s,onValueChange:u,dir:l,name:c,autoComplete:d,disabled:f,required:p,form:m}=t,h=$ce(e),[b,g]=ct.useState(null),[y,w]=ct.useState(null),[S,C]=ct.useState(!1),P=TI(l),[E=!1,A]=Gc({prop:n,defaultProp:o,onChange:i}),[I,R]=Gc({prop:a,defaultProp:s,onChange:u}),j=ct.useRef(null),N=b?m||!!b.closest("form"):!0,[$,k]=ct.useState(new Set),H=Array.from($).map(V=>V.props.value).join(";");return(0,ur.jsx)(a8t,{...h,children:(0,ur.jsxs)(Nxn,{required:p,scope:e,trigger:b,onTriggerChange:g,valueNode:y,onValueNodeChange:w,valueNodeHasChildren:S,onValueNodeHasChildrenChange:C,contentId:il(),value:I,onValueChange:R,open:E,onOpenChange:A,dir:P,triggerPointerDownPosRef:j,disabled:f,children:[(0,ur.jsx)(Fce.Provider,{scope:e,children:(0,ur.jsx)(Dxn,{scope:t.__scopeSelect,onNativeOptionAdd:ct.useCallback(V=>{k(Q=>new Set(Q).add(V))},[]),onNativeOptionRemove:ct.useCallback(V=>{k(Q=>{let G=new Set(Q);return G.delete(V),G})},[]),children:r})}),N?(0,ur.jsxs)(G8t,{"aria-hidden":!0,required:p,tabIndex:-1,name:c,autoComplete:d,value:I,onChange:V=>R(V.target.value),disabled:f,form:m,children:[I===void 0?(0,ur.jsx)("option",{value:""}):null,Array.from($)]},H):null]})})};x8t.displayName=FW;var C8t="SelectTrigger",O8t=ct.forwardRef((t,e)=>{let{__scopeSelect:r,disabled:n=!1,...o}=t,i=$ce(r),a=sM(C8t,r),s=a.disabled||n,u=Oi(e,a.onTriggerChange),l=kce(r),c=ct.useRef("touch"),[d,f,p]=J8t(h=>{let b=l().filter(w=>!w.disabled),g=b.find(w=>w.value===a.value),y=Y8t(b,h,g);y!==void 0&&a.onValueChange(y.value)}),m=h=>{s||(a.onOpenChange(!0),p()),h&&(a.triggerPointerDownPosRef.current={x:Math.round(h.pageX),y:Math.round(h.pageY)})};return(0,ur.jsx)(s8t,{asChild:!0,...i,children:(0,ur.jsx)(uo.button,{type:"button",role:"combobox","aria-controls":a.contentId,"aria-expanded":a.open,"aria-required":a.required,"aria-autocomplete":"none",dir:a.dir,"data-state":a.open?"open":"closed",disabled:s,"data-disabled":s?"":void 0,"data-placeholder":K8t(a.value)?"":void 0,...o,ref:u,onClick:gi(o.onClick,h=>{h.currentTarget.focus(),c.current!=="mouse"&&m(h)}),onPointerDown:gi(o.onPointerDown,h=>{c.current=h.pointerType;let b=h.target;b.hasPointerCapture(h.pointerId)&&b.releasePointerCapture(h.pointerId),h.button===0&&h.ctrlKey===!1&&h.pointerType==="mouse"&&(m(h),h.preventDefault())}),onKeyDown:gi(o.onKeyDown,h=>{let b=d.current!=="";!(h.ctrlKey||h.altKey||h.metaKey)&&h.key.length===1&&f(h.key),!(b&&h.key===" ")&&Mxn.includes(h.key)&&(m(),h.preventDefault())})})})});O8t.displayName=C8t;var P8t="SelectValue",E8t=ct.forwardRef((t,e)=>{let{__scopeSelect:r,className:n,style:o,children:i,placeholder:a="",...s}=t,u=sM(P8t,r),{onValueNodeHasChildrenChange:l}=u,c=i!==void 0,d=Oi(e,u.onValueNodeChange);return zn(()=>{l(c)},[l,c]),(0,ur.jsx)(uo.span,{...s,ref:d,style:{pointerEvents:"none"},children:K8t(u.value)?(0,ur.jsx)(ur.Fragment,{children:a}):i})});E8t.displayName=P8t;var Fxn="SelectIcon",T8t=ct.forwardRef((t,e)=>{let{__scopeSelect:r,children:n,...o}=t;return(0,ur.jsx)(uo.span,{"aria-hidden":!0,...o,ref:e,children:n||"\u25BC"})});T8t.displayName=Fxn;var kxn="SelectPortal",A8t=t=>(0,ur.jsx)(yFe,{asChild:!0,...t});A8t.displayName=kxn;var TD="SelectContent",I8t=ct.forwardRef((t,e)=>{let r=sM(TD,t.__scopeSelect),[n,o]=ct.useState();if(zn(()=>{o(new DocumentFragment)},[]),!r.open){let i=n;return i?AFe.createPortal((0,ur.jsx)(M8t,{scope:t.__scopeSelect,children:(0,ur.jsx)(Fce.Slot,{scope:t.__scopeSelect,children:(0,ur.jsx)("div",{children:t.children})})}),i):null}return(0,ur.jsx)(R8t,{...t,ref:e})});I8t.displayName=TD;var db=10,[M8t,uM]=ez(TD),$xn="SelectContentImpl",R8t=ct.forwardRef((t,e)=>{let{__scopeSelect:r,position:n="item-aligned",onCloseAutoFocus:o,onEscapeKeyDown:i,onPointerDownOutside:a,side:s,sideOffset:u,align:l,alignOffset:c,arrowPadding:d,collisionBoundary:f,collisionPadding:p,sticky:m,hideWhenDetached:h,avoidCollisions:b,...g}=t,y=sM(TD,r),[w,S]=ct.useState(null),[C,P]=ct.useState(null),E=Oi(e,Y=>S(Y)),[A,I]=ct.useState(null),[R,j]=ct.useState(null),N=kce(r),[$,k]=ct.useState(!1),H=ct.useRef(!1);ct.useEffect(()=>{if(w)return zI(w)},[w]),II();let V=ct.useCallback(Y=>{let[ae,...we]=N().map(Ve=>Ve.ref.current),[de]=we.slice(-1),Ue=document.activeElement;for(let Ve of Y)if(Ve===Ue||(Ve?.scrollIntoView({block:"nearest"}),Ve===ae&&C&&(C.scrollTop=0),Ve===de&&C&&(C.scrollTop=C.scrollHeight),Ve?.focus(),document.activeElement!==Ue))return},[N,C]),Q=ct.useCallback(()=>V([A,w]),[V,A,w]);ct.useEffect(()=>{$&&Q()},[$,Q]);let{onOpenChange:G,triggerPointerDownPosRef:D}=y;ct.useEffect(()=>{if(w){let Y={x:0,y:0},ae=de=>{Y={x:Math.abs(Math.round(de.pageX)-(D.current?.x??0)),y:Math.abs(Math.round(de.pageY)-(D.current?.y??0))}},we=de=>{Y.x<=10&&Y.y<=10?de.preventDefault():w.contains(de.target)||G(!1),document.removeEventListener("pointermove",ae),D.current=null};return D.current!==null&&(document.addEventListener("pointermove",ae),document.addEventListener("pointerup",we,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",ae),document.removeEventListener("pointerup",we,{capture:!0})}}},[w,G,D]),ct.useEffect(()=>{let Y=()=>G(!1);return window.addEventListener("blur",Y),window.addEventListener("resize",Y),()=>{window.removeEventListener("blur",Y),window.removeEventListener("resize",Y)}},[G]);let[B,q]=J8t(Y=>{let ae=N().filter(Ue=>!Ue.disabled),we=ae.find(Ue=>Ue.ref.current===document.activeElement),de=Y8t(ae,Y,we);de&&setTimeout(()=>de.ref.current.focus())}),K=ct.useCallback((Y,ae,we)=>{let de=!H.current&&!we;(y.value!==void 0&&y.value===ae||de)&&(I(Y),de&&(H.current=!0))},[y.value]),U=ct.useCallback(()=>w?.focus(),[w]),te=ct.useCallback((Y,ae,we)=>{let de=!H.current&&!we;(y.value!==void 0&&y.value===ae||de)&&j(Y)},[y.value]),z=n==="popper"?CFe:j8t,W=z===CFe?{side:s,sideOffset:u,align:l,alignOffset:c,arrowPadding:d,collisionBoundary:f,collisionPadding:p,sticky:m,hideWhenDetached:h,avoidCollisions:b}:{};return(0,ur.jsx)(M8t,{scope:r,content:w,viewport:C,onViewportChange:P,itemRefCallback:K,selectedItem:A,onItemLeave:U,itemTextRefCallback:te,focusSelectedItem:Q,selectedItemText:R,position:n,isPositioned:$,searchRef:B,children:(0,ur.jsx)(DW,{as:_Fe,allowPinchZoom:!0,children:(0,ur.jsx)(fFe,{asChild:!0,trapped:y.open,onMountAutoFocus:Y=>{Y.preventDefault()},onUnmountAutoFocus:gi(o,Y=>{y.trigger?.focus({preventScroll:!0}),Y.preventDefault()}),children:(0,ur.jsx)(lFe,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:a,onFocusOutside:Y=>Y.preventDefault(),onDismiss:()=>y.onOpenChange(!1),children:(0,ur.jsx)(z,{role:"listbox",id:y.contentId,"data-state":y.open?"open":"closed",dir:y.dir,onContextMenu:Y=>Y.preventDefault(),...g,...W,onPlaced:()=>k(!0),ref:E,style:{display:"flex",flexDirection:"column",outline:"none",...g.style},onKeyDown:gi(g.onKeyDown,Y=>{let ae=Y.ctrlKey||Y.altKey||Y.metaKey;if(Y.key==="Tab"&&Y.preventDefault(),!ae&&Y.key.length===1&&q(Y.key),["ArrowUp","ArrowDown","Home","End"].includes(Y.key)){let de=N().filter(Ue=>!Ue.disabled).map(Ue=>Ue.ref.current);if(["ArrowUp","End"].includes(Y.key)&&(de=de.slice().reverse()),["ArrowUp","ArrowDown"].includes(Y.key)){let Ue=Y.target,Ve=de.indexOf(Ue);de=de.slice(Ve+1)}setTimeout(()=>V(de)),Y.preventDefault()}})})})})})})});R8t.displayName=$xn;var Bxn="SelectItemAlignedPosition",j8t=ct.forwardRef((t,e)=>{let{__scopeSelect:r,onPlaced:n,...o}=t,i=sM(TD,r),a=uM(TD,r),[s,u]=ct.useState(null),[l,c]=ct.useState(null),d=Oi(e,E=>c(E)),f=kce(r),p=ct.useRef(!1),m=ct.useRef(!0),{viewport:h,selectedItem:b,selectedItemText:g,focusSelectedItem:y}=a,w=ct.useCallback(()=>{if(i.trigger&&i.valueNode&&s&&l&&h&&b&&g){let E=i.trigger.getBoundingClientRect(),A=l.getBoundingClientRect(),I=i.valueNode.getBoundingClientRect(),R=g.getBoundingClientRect();if(i.dir!=="rtl"){let Ue=R.left-A.left,Ve=I.left-Ue,rt=E.left-Ve,lr=E.width+rt,bn=Math.max(lr,A.width),Le=window.innerWidth-db,gt=KU(Ve,[db,Math.max(db,Le-bn)]);s.style.minWidth=lr+"px",s.style.left=gt+"px"}else{let Ue=A.right-R.right,Ve=window.innerWidth-I.right-Ue,rt=window.innerWidth-E.right-Ve,lr=E.width+rt,bn=Math.max(lr,A.width),Le=window.innerWidth-db,gt=KU(Ve,[db,Math.max(db,Le-bn)]);s.style.minWidth=lr+"px",s.style.right=gt+"px"}let j=f(),N=window.innerHeight-db*2,$=h.scrollHeight,k=window.getComputedStyle(l),H=parseInt(k.borderTopWidth,10),V=parseInt(k.paddingTop,10),Q=parseInt(k.borderBottomWidth,10),G=parseInt(k.paddingBottom,10),D=H+V+$+G+Q,B=Math.min(b.offsetHeight*5,D),q=window.getComputedStyle(h),K=parseInt(q.paddingTop,10),U=parseInt(q.paddingBottom,10),te=E.top+E.height/2-db,z=N-te,W=b.offsetHeight/2,Y=b.offsetTop+W,ae=H+V+Y,we=D-ae;if(ae<=te){let Ue=j.length>0&&b===j[j.length-1].ref.current;s.style.bottom="0px";let Ve=l.clientHeight-h.offsetTop-h.offsetHeight,rt=Math.max(z,W+(Ue?U:0)+Ve+Q),lr=ae+rt;s.style.height=lr+"px"}else{let Ue=j.length>0&&b===j[0].ref.current;s.style.top="0px";let rt=Math.max(te,H+h.offsetTop+(Ue?K:0)+W)+we;s.style.height=rt+"px",h.scrollTop=ae-te+h.offsetTop}s.style.margin=`${db}px 0`,s.style.minHeight=B+"px",s.style.maxHeight=N+"px",n?.(),requestAnimationFrame(()=>p.current=!0)}},[f,i.trigger,i.valueNode,s,l,h,b,g,i.dir,n]);zn(()=>w(),[w]);let[S,C]=ct.useState();zn(()=>{l&&C(window.getComputedStyle(l).zIndex)},[l]);let P=ct.useCallback(E=>{E&&m.current===!0&&(w(),y?.(),m.current=!1)},[w,y]);return(0,ur.jsx)(Uxn,{scope:r,contentWrapper:s,shouldExpandOnScrollRef:p,onScrollButtonChange:P,children:(0,ur.jsx)("div",{ref:u,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:S},children:(0,ur.jsx)(uo.div,{...o,ref:d,style:{boxSizing:"border-box",maxHeight:"100%",...o.style}})})})});j8t.displayName=Bxn;var qxn="SelectPopperPosition",CFe=ct.forwardRef((t,e)=>{let{__scopeSelect:r,align:n="start",collisionPadding:o=db,...i}=t,a=$ce(r);return(0,ur.jsx)(u8t,{...a,...i,ref:e,align:n,collisionPadding:o,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});CFe.displayName=qxn;var[Uxn,IFe]=ez(TD,{}),OFe="SelectViewport",N8t=ct.forwardRef((t,e)=>{let{__scopeSelect:r,nonce:n,...o}=t,i=uM(OFe,r),a=IFe(OFe,r),s=Oi(e,i.onViewportChange),u=ct.useRef(0);return(0,ur.jsxs)(ur.Fragment,{children:[(0,ur.jsx)("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),(0,ur.jsx)(Fce.Slot,{scope:r,children:(0,ur.jsx)(uo.div,{"data-radix-select-viewport":"",role:"presentation",...o,ref:s,style:{position:"relative",flex:1,overflow:"hidden auto",...o.style},onScroll:gi(o.onScroll,l=>{let c=l.currentTarget,{contentWrapper:d,shouldExpandOnScrollRef:f}=a;if(f?.current&&d){let p=Math.abs(u.current-c.scrollTop);if(p>0){let m=window.innerHeight-db*2,h=parseFloat(d.style.minHeight),b=parseFloat(d.style.height),g=Math.max(h,b);if(g<m){let y=g+p,w=Math.min(m,y),S=y-w;d.style.height=w+"px",d.style.bottom==="0px"&&(c.scrollTop=S>0?S:0,d.style.justifyContent="flex-end")}}}u.current=c.scrollTop})})})]})});N8t.displayName=OFe;var D8t="SelectGroup",[zxn,Hxn]=ez(D8t),Vxn=ct.forwardRef((t,e)=>{let{__scopeSelect:r,...n}=t,o=il();return(0,ur.jsx)(zxn,{scope:r,id:o,children:(0,ur.jsx)(uo.div,{role:"group","aria-labelledby":o,...n,ref:e})})});Vxn.displayName=D8t;var L8t="SelectLabel",F8t=ct.forwardRef((t,e)=>{let{__scopeSelect:r,...n}=t,o=Hxn(L8t,r);return(0,ur.jsx)(uo.div,{id:o.id,...n,ref:e})});F8t.displayName=L8t;var Lce="SelectItem",[Wxn,k8t]=ez(Lce),$8t=ct.forwardRef((t,e)=>{let{__scopeSelect:r,value:n,disabled:o=!1,textValue:i,...a}=t,s=sM(Lce,r),u=uM(Lce,r),l=s.value===n,[c,d]=ct.useState(i??""),[f,p]=ct.useState(!1),m=Oi(e,y=>u.itemRefCallback?.(y,n,o)),h=il(),b=ct.useRef("touch"),g=()=>{o||(s.onValueChange(n),s.onOpenChange(!1))};if(n==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return(0,ur.jsx)(Wxn,{scope:r,value:n,disabled:o,textId:h,isSelected:l,onItemTextChange:ct.useCallback(y=>{d(w=>w||(y?.textContent??"").trim())},[]),children:(0,ur.jsx)(Fce.ItemSlot,{scope:r,value:n,disabled:o,textValue:c,children:(0,ur.jsx)(uo.div,{role:"option","aria-labelledby":h,"data-highlighted":f?"":void 0,"aria-selected":l&&f,"data-state":l?"checked":"unchecked","aria-disabled":o||void 0,"data-disabled":o?"":void 0,tabIndex:o?void 0:-1,...a,ref:m,onFocus:gi(a.onFocus,()=>p(!0)),onBlur:gi(a.onBlur,()=>p(!1)),onClick:gi(a.onClick,()=>{b.current!=="mouse"&&g()}),onPointerUp:gi(a.onPointerUp,()=>{b.current==="mouse"&&g()}),onPointerDown:gi(a.onPointerDown,y=>{b.current=y.pointerType}),onPointerMove:gi(a.onPointerMove,y=>{b.current=y.pointerType,o?u.onItemLeave?.():b.current==="mouse"&&y.currentTarget.focus({preventScroll:!0})}),onPointerLeave:gi(a.onPointerLeave,y=>{y.currentTarget===document.activeElement&&u.onItemLeave?.()}),onKeyDown:gi(a.onKeyDown,y=>{u.searchRef?.current!==""&&y.key===" "||(Rxn.includes(y.key)&&g(),y.key===" "&&y.preventDefault())})})})})});$8t.displayName=Lce;var LW="SelectItemText",B8t=ct.forwardRef((t,e)=>{let{__scopeSelect:r,className:n,style:o,...i}=t,a=sM(LW,r),s=uM(LW,r),u=k8t(LW,r),l=Lxn(LW,r),[c,d]=ct.useState(null),f=Oi(e,g=>d(g),u.onItemTextChange,g=>s.itemTextRefCallback?.(g,u.value,u.disabled)),p=c?.textContent,m=ct.useMemo(()=>(0,ur.jsx)("option",{value:u.value,disabled:u.disabled,children:p},u.value),[u.disabled,u.value,p]),{onNativeOptionAdd:h,onNativeOptionRemove:b}=l;return zn(()=>(h(m),()=>b(m)),[h,b,m]),(0,ur.jsxs)(ur.Fragment,{children:[(0,ur.jsx)(uo.span,{id:u.textId,...i,ref:f}),u.isSelected&&a.valueNode&&!a.valueNodeHasChildren?AFe.createPortal(i.children,a.valueNode):null]})});B8t.displayName=LW;var q8t="SelectItemIndicator",U8t=ct.forwardRef((t,e)=>{let{__scopeSelect:r,...n}=t;return k8t(q8t,r).isSelected?(0,ur.jsx)(uo.span,{"aria-hidden":!0,...n,ref:e}):null});U8t.displayName=q8t;var PFe="SelectScrollUpButton",z8t=ct.forwardRef((t,e)=>{let r=uM(PFe,t.__scopeSelect),n=IFe(PFe,t.__scopeSelect),[o,i]=ct.useState(!1),a=Oi(e,n.onScrollButtonChange);return zn(()=>{if(r.viewport&&r.isPositioned){let u=function(){let c=l.scrollTop>0;i(c)};var s=u;let l=r.viewport;return u(),l.addEventListener("scroll",u),()=>l.removeEventListener("scroll",u)}},[r.viewport,r.isPositioned]),o?(0,ur.jsx)(V8t,{...t,ref:a,onAutoScroll:()=>{let{viewport:s,selectedItem:u}=r;s&&u&&(s.scrollTop=s.scrollTop-u.offsetHeight)}}):null});z8t.displayName=PFe;var EFe="SelectScrollDownButton",H8t=ct.forwardRef((t,e)=>{let r=uM(EFe,t.__scopeSelect),n=IFe(EFe,t.__scopeSelect),[o,i]=ct.useState(!1),a=Oi(e,n.onScrollButtonChange);return zn(()=>{if(r.viewport&&r.isPositioned){let u=function(){let c=l.scrollHeight-l.clientHeight,d=Math.ceil(l.scrollTop)<c;i(d)};var s=u;let l=r.viewport;return u(),l.addEventListener("scroll",u),()=>l.removeEventListener("scroll",u)}},[r.viewport,r.isPositioned]),o?(0,ur.jsx)(V8t,{...t,ref:a,onAutoScroll:()=>{let{viewport:s,selectedItem:u}=r;s&&u&&(s.scrollTop=s.scrollTop+u.offsetHeight)}}):null});H8t.displayName=EFe;var V8t=ct.forwardRef((t,e)=>{let{__scopeSelect:r,onAutoScroll:n,...o}=t,i=uM("SelectScrollButton",r),a=ct.useRef(null),s=kce(r),u=ct.useCallback(()=>{a.current!==null&&(window.clearInterval(a.current),a.current=null)},[]);return ct.useEffect(()=>()=>u(),[u]),zn(()=>{s().find(c=>c.ref.current===document.activeElement)?.ref.current?.scrollIntoView({block:"nearest"})},[s]),(0,ur.jsx)(uo.div,{"aria-hidden":!0,...o,ref:e,style:{flexShrink:0,...o.style},onPointerDown:gi(o.onPointerDown,()=>{a.current===null&&(a.current=window.setInterval(n,50))}),onPointerMove:gi(o.onPointerMove,()=>{i.onItemLeave?.(),a.current===null&&(a.current=window.setInterval(n,50))}),onPointerLeave:gi(o.onPointerLeave,()=>{u()})})}),Kxn="SelectSeparator",W8t=ct.forwardRef((t,e)=>{let{__scopeSelect:r,...n}=t;return(0,ur.jsx)(uo.div,{"aria-hidden":!0,...n,ref:e})});W8t.displayName=Kxn;var TFe="SelectArrow",Gxn=ct.forwardRef((t,e)=>{let{__scopeSelect:r,...n}=t,o=$ce(r),i=sM(TFe,r),a=uM(TFe,r);return i.open&&a.position==="popper"?(0,ur.jsx)(l8t,{...o,...n,ref:e}):null});Gxn.displayName=TFe;function K8t(t){return t===""||t===void 0}var G8t=ct.forwardRef((t,e)=>{let{value:r,...n}=t,o=ct.useRef(null),i=Oi(e,o),a=GU(r);return ct.useEffect(()=>{let s=o.current,u=window.HTMLSelectElement.prototype,c=Object.getOwnPropertyDescriptor(u,"value").set;if(a!==r&&c){let d=new Event("change",{bubbles:!0});c.call(s,r),s.dispatchEvent(d)}},[a,r]),(0,ur.jsx)(vFe,{asChild:!0,children:(0,ur.jsx)("select",{...n,ref:i,defaultValue:r})})});G8t.displayName="BubbleSelect";function J8t(t){let e=qr(t),r=ct.useRef(""),n=ct.useRef(0),o=ct.useCallback(a=>{let s=r.current+a;e(s),function u(l){r.current=l,window.clearTimeout(n.current),l!==""&&(n.current=window.setTimeout(()=>u(""),1e3))}(s)},[e]),i=ct.useCallback(()=>{r.current="",window.clearTimeout(n.current)},[]);return ct.useEffect(()=>()=>window.clearTimeout(n.current),[]),[r,o,i]}function Y8t(t,e,r){let o=e.length>1&&Array.from(e).every(l=>l===e[0])?e[0]:e,i=r?t.indexOf(r):-1,a=Jxn(t,Math.max(i,0));o.length===1&&(a=a.filter(l=>l!==r));let u=a.find(l=>l.textValue.toLowerCase().startsWith(o.toLowerCase()));return u!==r?u:void 0}function Jxn(t,e){return t.map((r,n)=>t[(e+n)%t.length])}var Z8t=x8t,MFe=O8t,X8t=E8t,Q8t=T8t,e6t=A8t,RFe=I8t,t6t=N8t;var jFe=F8t,NFe=$8t,r6t=B8t,n6t=U8t,DFe=z8t,LFe=H8t,FFe=W8t;var tz=Z8t;var rz=X8t,AD=Pi.forwardRef(({className:t,children:e,...r},n)=>Pi.createElement(MFe,{ref:n,className:_e("tw-border-solid !tw-bg-dropdown !tw-shadow-sm tw-transition-colors","focus-visible:tw-shadow-sm focus-visible:tw-outline-none focus-visible:tw-ring-1 focus-visible:tw-ring-ring","hover:data-[state=closed]:!tw-bg-interactive-accent hover:data-[state=closed]:!tw-text-on-accent","tw-flex tw-h-9 tw-w-full tw-items-center tw-justify-between tw-whitespace-nowrap tw-rounded-md tw-border tw-border-border tw-px-3 tw-py-1 tw-text-sm tw-ring-offset-ring placeholder:tw-text-muted focus:tw-outline-none focus:tw-ring-1 focus:tw-ring-ring disabled:tw-cursor-not-allowed disabled:tw-opacity-50 [&>span]:tw-line-clamp-1",t),...r},e,Pi.createElement(Q8t,{asChild:!0},Pi.createElement(ki,{className:"tw-size-4"}))));AD.displayName=MFe.displayName;var o6t=Pi.forwardRef(({className:t,...e},r)=>Pi.createElement(DFe,{ref:r,className:_e("tw-flex tw-cursor-default tw-items-center tw-justify-center tw-py-1",t),...e},Pi.createElement(sy,{className:"tw-size-4"})));o6t.displayName=DFe.displayName;var i6t=Pi.forwardRef(({className:t,...e},r)=>Pi.createElement(LFe,{ref:r,className:_e("tw-flex tw-cursor-default tw-items-center tw-justify-center tw-py-1",t),...e},Pi.createElement(ki,{className:"tw-size-4"})));i6t.displayName=LFe.displayName;var ID=Pi.forwardRef(({className:t,children:e,position:r="popper",container:n,...o},i)=>Pi.createElement(e6t,{container:n},Pi.createElement(RFe,{ref:i,className:_e("tw-relative tw-z-modal tw-max-h-96 tw-min-w-32 tw-overflow-hidden tw-rounded-md tw-border tw-bg-primary tw-text-normal tw-shadow-md data-[state=open]:tw-animate-in data-[state=closed]:tw-animate-out data-[state=closed]:tw-fade-out-0 data-[state=open]:tw-fade-in-0 data-[state=closed]:tw-zoom-out-95 data-[state=open]:tw-zoom-in-95 data-[side=bottom]:tw-slide-in-from-top-2 data-[side=left]:tw-slide-in-from-right-2 data-[side=right]:tw-slide-in-from-left-2 data-[side=top]:tw-slide-in-from-bottom-2",r==="popper"&&"data-[side=bottom]:tw-translate-y-1 data-[side=left]:-tw-translate-x-1 data-[side=right]:tw-translate-x-1 data-[side=top]:-tw-translate-y-1",t),position:r,...o},Pi.createElement(o6t,null),Pi.createElement(t6t,{className:_e("tw-p-1",r==="popper"&&"tw-h-[var(--radix-select-trigger-height)] tw-w-full tw-min-w-[var(--radix-select-trigger-width)]")},e),Pi.createElement(i6t,null))));ID.displayName=RFe.displayName;var Zxn=Pi.forwardRef(({className:t,...e},r)=>Pi.createElement(jFe,{ref:r,className:_e("tw-px-2 tw-py-1.5 tw-text-sm tw-font-semibold",t),...e}));Zxn.displayName=jFe.displayName;var MD=Pi.forwardRef(({className:t,children:e,...r},n)=>Pi.createElement(NFe,{ref:n,className:_e("tw-relative tw-flex tw-w-full tw-cursor-default tw-select-none tw-items-center tw-rounded-sm tw-py-1.5 tw-pl-2 tw-pr-8 tw-text-sm tw-outline-none focus:tw-bg-interactive-accent focus:tw-text-on-accent data-[disabled]:tw-pointer-events-none data-[disabled]:tw-opacity-50",t),...r},Pi.createElement("span",{className:"tw-absolute tw-right-2 tw-flex tw-size-3.5 tw-items-center tw-justify-center"},Pi.createElement(n6t,null,Pi.createElement(kl,{className:"tw-size-4"}))),Pi.createElement(r6t,null,e)));MD.displayName=NFe.displayName;var Xxn=Pi.forwardRef(({className:t,...e},r)=>Pi.createElement(FFe,{ref:r,className:_e("-tw-mx-1 tw-my-1 tw-h-px tw-bg-primary-alt",t),...e}));Xxn.displayName=FFe.displayName;Ko();tr();var s6t=require("obsidian"),Ne=F(X());function Qxn(t,e,r={}){let{caseSensitive:n=!1,searchInName:o=!0,searchInDescription:i=!0}=r;if(!e.trim())return!0;let a=n?e:e.toLowerCase();return!!(o&&(n?t.name:t.name.toLowerCase()).includes(a)||i&&t.description&&(n?t.description:t.description.toLowerCase()).includes(a))}function a6t(t,e,r={}){return!t||t.length===0?[]:e.trim()?t.filter(n=>Qxn(n,e,r)):t}function eCn({project:t,loadContext:e,onEdit:r,onDelete:n}){return Ne.default.createElement("div",{className:"tw-group tw-flex tw-cursor-pointer tw-items-center tw-justify-between tw-gap-2 tw-rounded-lg tw-border tw-border-solid tw-border-border tw-p-3 tw-transition-all tw-duration-200 tw-bg-secondary/40 hover:tw-border-interactive-accent hover:tw-text-accent hover:tw-shadow-[0_2px_12px_rgba(0,0,0,0.1)] active:tw-scale-[0.98]",onClick:()=>e(t)},Ne.default.createElement("div",{className:"tw-flex tw-flex-1 tw-items-center tw-gap-2 tw-overflow-hidden"},Ne.default.createElement("div",{className:"tw-text-accent"},Ne.default.createElement(cy,{className:"tw-size-4"})),Ne.default.createElement("div",{className:"tw-flex tw-flex-1 tw-flex-col tw-gap-1.5 tw-overflow-hidden"},Ne.default.createElement("span",{className:"tw-w-full tw-truncate tw-text-[13px] tw-font-medium tw-text-normal"},t.name),t.description&&Ne.default.createElement("span",{className:"tw-w-full tw-truncate tw-text-[12px] tw-text-muted/80"},t.description))),Ne.default.createElement("div",{className:"tw-flex tw-flex-row tw-items-center tw-gap-1 tw-opacity-100 tw-transition-opacity tw-duration-200"},Ne.default.createElement(Mt,null,Ne.default.createElement(Rt,{asChild:!0},Ne.default.createElement(ge,{variant:"ghost2",size:"icon",onClick:o=>{o.stopPropagation(),r(t)}},Ne.default.createElement(jC,{className:"tw-size-4"}))),Ne.default.createElement(It,{side:"bottom"},"Edit Project")),Ne.default.createElement(Mt,null,Ne.default.createElement(Rt,{asChild:!0},Ne.default.createElement(ge,{variant:"ghost2",size:"icon",onClick:o=>{o.stopPropagation(),e(t)}},Ne.default.createElement(vF,{className:"tw-size-4"}))),Ne.default.createElement(It,{side:"bottom"},"Start Chat")),Ne.default.createElement(Mt,null,Ne.default.createElement(Rt,{asChild:!0},Ne.default.createElement(ge,{variant:"ghost2",size:"icon",onClick:o=>{o.stopPropagation(),new Kc(app,()=>n(t),`Are you sure you want to delete project "${t.name}"?`,"Delete Project").open()}},Ne.default.createElement(bm,{className:"tw-size-4"}))),Ne.default.createElement(It,{side:"bottom"},"Delete Project"))))}var kFe=(0,Ne.memo)(({className:t,projects:e,defaultOpen:r=!1,app:n,onProjectAdded:o,onEditProject:i,hasMessages:a=!1,showChatUI:s,onClose:u,inputRef:l})=>{let[c,d]=(0,Ne.useState)(r),[f,p]=(0,Ne.useState)(!1),[m,h]=(0,Ne.useState)(null),[b,g]=(0,Ne.useState)("");(0,Ne.useEffect)(()=>{a&&d(!1)},[a]);let y=(0,Ne.useMemo)(()=>a6t(e,b),[e,b]),w=()=>{new RW(n,async I=>{o(I)}).open()},S=A=>{new RW(n,async R=>{i(A,R),m&&m.name===A.name&&h(R)},A).open()},C=A=>{let R=(e||[]).filter(j=>j.name!==A.name);m?.name===A.name&&P(!1),dt("projectList",R),new s6t.Notice(`Project "${A.name}" deleted successfully`)},P=(A,I)=>{if(A){if(!I){fe("Must be exist one project.");return}h(I),p(!0),d(!1)}else{h(null),p(!1),d(!0),s(!1),fR(null);return}},E=A=>{h(A),p(!0),d(!1),s(!0),fR(A),setTimeout(()=>{l.current&&l.current.focus()},0)};return Ne.default.createElement("div",{className:_e("tw-flex tw-flex-col",t)},Ne.default.createElement("div",{className:"tw-overflow-y-auto"},Ne.default.createElement("div",{className:"tw-flex tw-flex-col"},f&&m?Ne.default.createElement("div",{className:"tw-flex tw-items-center tw-justify-between tw-px-2 tw-py-3"},Ne.default.createElement("div",{className:"tw-flex tw-items-center tw-gap-2"},Ne.default.createElement("span",{className:"tw-font-semibold tw-text-normal"},"Projects"),Ne.default.createElement(tz,{value:m.name,onValueChange:A=>{let I=e.find(R=>R.name===A);I&&E(I)}},Ne.default.createElement(AD,{className:"tw-w-[200px]"},Ne.default.createElement(rz,null,Ne.default.createElement("div",{className:"tw-flex tw-items-center tw-gap-2"},Ne.default.createElement(cy,{className:"tw-size-4 tw-text-accent/70"}),Ne.default.createElement("span",null,m.name)))),Ne.default.createElement(ID,null,e.map(A=>Ne.default.createElement(MD,{key:A.name,value:A.name,className:"tw-flex tw-items-center tw-gap-2"},Ne.default.createElement("div",{className:"tw-flex tw-items-center tw-gap-2"},Ne.default.createElement(cy,{className:"tw-size-4"}),A.name)))))),Ne.default.createElement("div",{className:"tw-flex tw-items-center tw-gap-2"},Ne.default.createElement(ge,{variant:"secondary",onClick:()=>S(m),className:"hover:tw-text-on-accent hover:tw-bg-accent/50"},Ne.default.createElement(jC,{className:"tw-mr-1 tw-size-4"}),"Edit"),Ne.default.createElement(Mt,null,Ne.default.createElement(Rt,{asChild:!0},Ne.default.createElement(ge,{variant:"ghost2",size:"icon",onClick:()=>{P(!1)},"aria-label":"Close Current Project"},Ne.default.createElement($i,{className:"tw-size-4"}))),Ne.default.createElement(It,{side:"bottom"},"Close Current Project")))):Ne.default.createElement(BP,{open:c,onOpenChange:d,className:"tw-transition-all tw-duration-200 tw-ease-in-out"},Ne.default.createElement("div",{className:"tw-flex tw-items-center tw-justify-between tw-px-4 tw-py-3"},Ne.default.createElement("div",{className:"tw-flex tw-flex-1 tw-items-center tw-gap-2"},Ne.default.createElement("span",{className:"tw-font-semibold tw-text-normal"},"Projects"),Ne.default.createElement(Mt,null,Ne.default.createElement(Rt,{asChild:!0},Ne.default.createElement(Wb,{className:"tw-size-4 tw-text-muted"})),Ne.default.createElement(It,{side:"bottom",className:"tw-w-64"},"Manage your projects with different contexts and configurations."))),Ne.default.createElement("div",{className:"tw-flex tw-items-center tw-gap-2"},Ne.default.createElement(ge,{className:"tw-px-2",variant:"secondary",onClick:w},"Create",Ne.default.createElement(ym,{className:"tw-size-3"})),e.length>0&&Ne.default.createElement(_D,{asChild:!0},Ne.default.createElement(ge,{variant:"ghost2",size:"icon"},c?Ne.default.createElement(sy,{className:"tw-size-5"}):Ne.default.createElement(ki,{className:"tw-size-5"}))),Ne.default.createElement(Mt,null,Ne.default.createElement(Rt,{asChild:!0},Ne.default.createElement(ge,{variant:"ghost2",size:"icon",onClick:()=>u(),"aria-label":"close project mode"},Ne.default.createElement($i,{className:"tw-size-4"}))),Ne.default.createElement(It,{side:"bottom"},"Close Project Mode")))),e.length===0&&Ne.default.createElement("div",{className:"tw-px-4 tw-py-2 tw-text-xs tw-text-muted tw-bg-secondary/30"},"No projects available"),Ne.default.createElement(qP,{className:"tw-transition-all tw-duration-200 tw-ease-in-out"},Ne.default.createElement("div",{className:"tw-relative tw-bg-secondary/30"},e.length>0&&Ne.default.createElement("div",{className:"tw-px-4 tw-pb-2 tw-pt-3"},Ne.default.createElement("div",{className:"tw-relative"},Ne.default.createElement(wce,{value:b,onChange:g,placeholder:"Search projects..."}))),Ne.default.createElement("div",{className:"tw-max-h-[calc(3*5.7rem)] tw-overflow-y-auto tw-px-4 tw-pb-6 tw-pt-3"},Ne.default.createElement("div",{className:"tw-flex tw-flex-col tw-gap-2 @2xl:tw-grid @2xl:tw-grid-cols-2 @4xl:tw-grid-cols-3"},y.map(A=>Ne.default.createElement(eCn,{key:A.name,project:A,loadContext:E,onEdit:S,onDelete:C}))),b.trim()&&y.length===0&&Ne.default.createElement("div",{className:"tw-flex tw-flex-col tw-items-center tw-justify-center tw-py-8 tw-text-muted"},Ne.default.createElement(jR,{className:"tw-mb-3 tw-size-12 tw-text-muted/50"}),Ne.default.createElement("p",{className:"tw-text-base tw-font-medium"},"No matching projects found"),Ne.default.createElement("p",{className:"tw-mt-1 tw-text-sm"},"Try searching with different keywords"))),e.length>0&&Ne.default.createElement("div",{className:"tw-pointer-events-none tw-absolute tw-inset-x-0 tw-bottom-0 tw-h-8 tw-bg-[linear-gradient(to_top,var(--background-primary)_0%,var(--background-primary)_30%,transparent_100%)]"}))))),!f&&Ne.default.createElement("div",{className:"tw-flex tw-flex-col tw-items-center tw-justify-center tw-gap-4 tw-p-8 tw-text-muted tw-bg-secondary/30"},Ne.default.createElement("div",{className:"tw-max-w-[600px] tw-space-y-4"},Ne.default.createElement("p",{className:"tw-text-center tw-text-base"},"Create your project-based AI assistants with custom instructions, context, and model configurations."),Ne.default.createElement("div",{className:"tw-flex tw-flex-col tw-gap-3 tw-text-sm"},Ne.default.createElement("div",{className:"tw-flex tw-items-center tw-gap-2"},Ne.default.createElement(vF,{className:"tw-size-4"}),Ne.default.createElement("span",null,"Click a project card to start chatting")))))))});kFe.displayName="ProjectList";kr();kr();wn();Ko();var $Fe=async(t,e,r,n,o,i={})=>{let a=new AbortController;o(a);try{await e.runChain(t,a,n,r,i)}catch(s){fe("Model request failed:",s);let u="Model request failed: "+Go(s);r({sender:Nb,isErrorMessage:!0,message:`Error: ${u}`,isVisible:!0,timestamp:Nl(new Date)})}};tr();var RD=F(X()),BFe=class{constructor(e){this.plugin=e;this.chatHistory=[];this.plugin=e}addMessage(e){this.chatHistory.push(e),this.plugin.projectManager.getCurrentChainManager().addChatMessage(e)}getMessages(){return this.chatHistory}clearChatHistory(){this.chatHistory=[],this.plugin.projectManager.getCurrentChainManager().clearHistory()}replaceMessages(e){this.chatHistory=[...e]}};function u6t(t){let[e,r]=(0,RD.useState)(t.getMessages());(0,RD.useEffect)(()=>{r([...t.getMessages()])},[t,t.chatHistory]);let n=(0,RD.useCallback)(i=>{t.addMessage(i),r([...t.getMessages()])},[t]),o=(0,RD.useCallback)(()=>{t.clearChatHistory(),r([])},[t]);return[e,n,o]}var l6t=BFe;wn();var c6t=F(mp()),Vf=require("obsidian"),Sr=F(X()),tCn=({sharedState:t,chainManager:e,onSaveChat:r,updateUserMessageHistory:n,fileParserManager:o,plugin:i})=>{let a=Tn(),s=(0,Sr.useContext)(MU),[u,l,c]=u6t(t),[d]=$L(),[f]=Xg(),[p,m]=(0,Sr.useState)(""),[h,b]=(0,Sr.useState)(""),[g,y]=(0,Sr.useState)(null),[w,S]=(0,Sr.useState)(!1),[C,P]=(0,Sr.useState)(Db.DEFAULT),[E,A]=(0,Sr.useState)([]),[I,R]=(0,Sr.useState)(!1),[j,N]=(0,Sr.useState)([]),[$,k]=(0,Sr.useState)(!1),[H]=r3e(),[V,Q]=(0,Sr.useState)(null),[G,D]=Xg(),B=DB(),q=FB.getInstance(),K=PU.getInstance(),U=(0,Sr.useRef)(null);(0,Sr.useEffect)(()=>{let ee=()=>{U.current&&U.current.focus()};return s?.addEventListener(vh.CHAT_IS_VISIBLE,ee),()=>{s?.removeEventListener(vh.CHAT_IS_VISIBLE,ee)}},[s]);let te=(0,Sr.useContext)(Qle),z=i.app||te,W=async({toolCalls:ee,urls:et,contextNotes:Re}={})=>{if(!h&&j.length===0)return;let Pe=Nl(new Date),oe=[];h&&oe.push({type:"text",text:h});for(let of of j){let $x=await of.arrayBuffer(),bb=c6t.Buffer.from($x).toString("base64");oe.push({type:"image_url",image_url:{url:`data:${of.type};base64,${bb}`}})}let se=[...Re||[]],le=z.workspace.getActiveFile();I&&G!=="project"&&le&&!se.some(of=>of.path===le.path)&&se.push(le);let Oe={message:h||"Image message",originalMessage:h,sender:_i,isVisible:!0,timestamp:Pe,content:oe,context:{notes:se,urls:et||[],selectedTextContexts:H}};b(""),N([]),l(Oe),S(!0),P(Db.DEFAULT);let Je=h,nr=await o4e();h.includes("@composer")&&nr!==""&&(Je=h+`

<output_format>
`+nr+`
</output_format>`);let{processedPrompt:Ji,includedFiles:Ni}=await Wue(Je||"","",z.vault,z.workspace.getActiveFile()),cc=f==="copilot_plus"?await q.processUrls(h||""):{urlContext:"",imageUrls:[]},cd=new Set(Ni.map(of=>of.path)),Di=await K.processContextNotes(cd,o,z.vault,se,I,le,f),Jf=K.processSelectedTextContexts(),rf=Ji+cc.urlContext+Di+Jf,nf=h;ee&&(nf+=" "+ee.join(`
`));let _n={message:rf,originalMessage:nf,sender:_i,isVisible:!1,timestamp:Pe,content:oe,context:{notes:se,urls:f==="copilot_plus"?[...et||[],...cc.imageUrls]:et||[],selectedTextContexts:H}};l(_n),h&&n(h),await $Fe(_n,e,l,m,y,{debug:a.debug,updateLoadingMessage:P}),S(!1),P(Db.DEFAULT)},Y=(0,Sr.useCallback)(async()=>{if(!z){console.error("App instance is not available.");return}let ee=u.filter(Pe=>Pe.isVisible);if(ee.length===0){new Vf.Notice("No messages to save.");return}let et=ee[0].timestamp?.epoch||Date.now(),Re=ee.map(Pe=>`**${Pe.sender}**: ${Pe.message}
[Timestamp: ${Pe.timestamp?.display}]`).join(`

`);try{z.vault.getAbstractFileByPath(a.defaultSaveFolder)||await z.vault.createFolder(a.defaultSaveFolder);let{fileName:oe}=Nl(new Date(et)),se=ee.find(Di=>Di.sender===_i),le=se?se.message.split(/\s+/).slice(0,10).join(" ").replace(/[\\/:*?"<>|]/g,"").trim():"Untitled Chat",Oe=a.defaultConversationNoteName||"{$date}_{$time}__{$topic}";Oe=Oe.replace("{$topic}",le.slice(0,100).replace(/\s+/g,"_")).replace("{$date}",oe.split("_")[0]).replace("{$time}",oe.split("_")[1]);let Je=Oe.replace(/[\\/:*?"<>|]/g,"_"),nr=yc(),Ji=nr?`${nr.id}__`:"",Ni=`${a.defaultSaveFolder}/${Ji}${Je}.md`,cc=`---
epoch: ${et}
modelKey: ${d}
${nr?`projectId: ${nr.id}`:""}
${nr?`projectName: ${nr.name}`:""}
tags:
  - ${a.defaultConversationTag}
${nr?`  - project-${nr.name}`:""}
---

${Re}`,cd=z.vault.getAbstractFileByPath(Ni);cd instanceof Vf.TFile?(await z.vault.modify(cd,cc),new Vf.Notice(`Chat updated in existing note: ${Ni}`)):(await z.vault.create(Ni,cc),new Vf.Notice(`Chat saved as note: ${Ni}`))}catch(Pe){console.error("Error saving chat as note:",Go(Pe)),new Vf.Notice("Failed to save chat as note. Check console for details.")}},[z,u,d,a.defaultConversationTag,a.defaultSaveFolder,a.defaultConversationNoteName]),ae=(0,Sr.useCallback)(ee=>{g&&(a.debug&&console.log(`stopping generation..., reason: ${ee}`),g.abort(ee),S(!1),P(Db.DEFAULT))},[g,a.debug]),we=(0,Sr.useCallback)(async ee=>{let et=ee-1;if(et<0||u[et].sender!==_i){new Vf.Notice("Cannot regenerate the first message or a user message.");return}let Re=u[et],Pe=u.slice(0,ee);c(),Pe.forEach(l),e.memoryManager.clearChatMemory();for(let oe=0;oe<Pe.length;oe+=2){let se=Pe[oe],le=Pe[oe+1];se&&le&&await e.memoryManager.getMemory().saveContext({input:se.message},{output:le.message})}S(!0);try{await e.runChain(Re,new AbortController,m,l,{debug:a.debug})&&a.debug&&console.log("Message regenerated successfully")}catch(oe){console.error("Error regenerating message:",oe),new Vf.Notice("Failed to regenerate message. Please try again.")}finally{S(!1)}},[l,e,u,c,a.debug]),de=(0,Sr.useCallback)(async(ee,et)=>{let Re=u[ee].message;if(Re===et)return;let Pe=[...u];for(let oe=ee;oe<Pe.length;oe++)Pe[oe].originalMessage===Re&&(Pe[oe].message=et,Pe[oe].originalMessage=et,Pe[oe].context={notes:[],urls:[]});c(),Pe.forEach(l),await kj(Pe,e.memoryManager),Pe[ee].sender===_i&&ee<Pe.length-1&&we(ee+1)},[l,e.memoryManager,u,c,we]);(0,Sr.useEffect)(((ee,et)=>()=>{let Re=ue().debug,Pe=async oe=>{let le={message:await et(oe.detail.selectedText,oe.detail.eventSubtype),sender:_i,isVisible:Re,timestamp:Nl(new Date)};Re&&l(le),S(!0),await $Fe(le,e,l,m,y,{debug:Re,ignoreSystemMessage:!0}),S(!1)};return s?.addEventListener(ee,Pe),()=>{s?.removeEventListener(ee,Pe)}})($r.APPLY_ADHOC_PROMPT,async(ee,et)=>et?(await Wue(et,ee,z.vault,z.workspace.getActiveFile())).processedPrompt:ee),[]),(0,Sr.useEffect)(()=>{r&&r(Y)},[r,Y]);let Ve=(0,Sr.useCallback)(async ee=>{let et=[...u];et.splice(ee,1),c(),et.forEach(l),await kj(et,e.memoryManager)},[l,e.memoryManager,u,c]),rt=(0,Sr.useCallback)(ee=>{let et=a.projectList||[];if(et.findIndex(se=>se.name===ee.name)>=0)throw new Error(`Project "${ee.name}" already exists, please use a different name`);let Pe=[...et,ee];return dt("projectList",Pe),yc()?.id===ee.id?Rle().then(()=>{new Vf.Notice(`${ee.name} added and context loaded`)}).catch(se=>{console.error("Error loading project context:",se),new Vf.Notice(`${ee.name} added but context loading failed`)}):new Vf.Notice(`${ee.name} added successfully`),!0},[a.projectList]),lr=(0,Sr.useCallback)((ee,et)=>{let Re=a.projectList||[];if(!Re.find(le=>le.name===ee.name))throw new Error(`Project "${ee.name}" does not exist`);let oe=Re.map(le=>le.name===ee.name?et:le);return dt("projectList",oe),yc()?.id===ee.id?(fR(et),Rle().then(()=>{new Vf.Notice(`${ee.name} updated and context reloaded`)}).catch(le=>{console.error("Error reloading project context:",le),new Vf.Notice(`${ee.name} updated but context reload failed`)})):new Vf.Notice(`${ee.name} updated successfully`),!0},[a.projectList]),bn=(0,Sr.useCallback)(ee=>{b(et=>`${et} ${ee} `)},[]),Le=(0,Sr.useCallback)(ee=>{e3e(ee)},[]),gt=(0,Sr.useCallback)(async()=>{ae("new-chat"),await i.handleNewChat(),m(""),A([]),t3e(),G!=="copilot_plus"?R(!1):R(a.includeActiveNoteAsContext)},[ae,i,a.includeActiveNoteAsContext,G]),vt=(0,Sr.useCallback)(()=>{i.loadCopilotChatHistory()},[i]);(0,Sr.useEffect)(()=>{let ee=et=>{let Re=et.detail?.reason||"new-chat";ae(Re)};return s?.addEventListener(vh.ABORT_STREAM,ee),()=>{s?.removeEventListener(vh.ABORT_STREAM,ee)}},[s,ae]),(0,Sr.useEffect)(()=>{a.includeActiveNoteAsContext!==void 0&&(G==="copilot_plus"?R(a.includeActiveNoteAsContext):R(!1))},[a.includeActiveNoteAsContext,G]);let pt=()=>Sr.default.createElement(Sr.default.Fragment,null,Sr.default.createElement("div",{className:"tw-flex tw-size-full tw-flex-col tw-overflow-hidden"},Sr.default.createElement(Y3t,{currentVersion:i.manifest.version}),Sr.default.createElement(J3t,{chatHistory:u,currentAiMessage:p,loading:w,loadingMessage:C,app:z,onRegenerate:we,onEdit:de,onDelete:Ve,onInsertToChat:bn,onReplaceChat:b,showHelperComponents:G!=="project"}),Sr.default.createElement(P2t,{onNewChat:gt,onSaveAsNote:()=>Y(),onLoadHistory:vt,onModeChange:ee=>{Q(G),ee==="project"&&k(!1)}}),Sr.default.createElement(g4t,{ref:U,inputMessage:h,setInputMessage:b,handleSendMessage:W,isGenerating:w,onStopGenerating:()=>ae("user-stopped"),app:z,contextNotes:E,setContextNotes:A,includeActiveNote:I,setIncludeActiveNote:R,mention:q,selectedImages:j,onAddImage:ee=>N(et=>[...et,...ee]),setSelectedImages:N,disableModelSwitch:G==="project",selectedTextContexts:H,onRemoveSelectedText:Le})));return Sr.default.createElement("div",{className:"tw-flex tw-size-full tw-flex-col tw-overflow-hidden"},Sr.default.createElement("div",{className:"tw-h-full"},Sr.default.createElement("div",{className:"tw-relative tw-flex tw-h-full tw-flex-col"},G==="project"&&Sr.default.createElement("div",{className:`${G==="project"?"tw-z-modal":""}`},Sr.default.createElement(kFe,{projects:a.projectList||[],defaultOpen:!0,app:z,hasMessages:!1,onProjectAdded:rt,onEditProject:lr,inputRef:U,onClose:()=>{V?(D(V),Q(null)):D(B?"copilot_plus":"llm_chain")},showChatUI:ee=>k(ee)})),(G!=="project"||G==="project"&&$)&&pt())))},d6t=tCn;kr();var f6t=require("obsidian"),lM=F(X()),p6t=F(wc()),cM=class extends f6t.ItemView{constructor(r,n){super(r);this.plugin=n;this.root=null;this.handleSaveAsNote=null;this.sharedState=n.sharedState,this.app=n.app,this.fileParserManager=n.fileParserManager,this.eventTarget=new EventTarget,this.plugin=n}get chainManager(){return this.plugin.projectManager.getCurrentChainManager()}getViewType(){return _s}getIcon(){return"message-square"}getTitle(){return"Copilot Chat"}getDisplayText(){return"Copilot"}async onOpen(){this.root=(0,p6t.createRoot)(this.containerEl.children[1]);let r=o=>{this.handleSaveAsNote=o},n=o=>{this.plugin.updateUserMessageHistory(o)};this.renderView(r,n)}renderView(r,n){this.root&&this.root.render(lM.createElement(Qle.Provider,{value:this.app},lM.createElement(MU.Provider,{value:this.eventTarget},lM.createElement(lM.StrictMode,null,lM.createElement(Mle,{delayDuration:0},lM.createElement(d6t,{sharedState:this.sharedState,chainManager:this.chainManager,updateUserMessageHistory:n,fileParserManager:this.fileParserManager,plugin:this.plugin,onSaveChat:r}))))))}async saveChat(){this.handleSaveAsNote&&await this.handleSaveAsNote()}updateView(){this.sharedState.replaceMessages(this.plugin.projectManager.getCurrentChainManager().getChatMessages());let r=o=>{this.handleSaveAsNote=o},n=o=>{this.plugin.updateUserMessageHistory(o)};this.renderView(r,n)}async onClose(){this.root&&(this.root.unmount(),this.root=null)}};wn();var m6t=require("obsidian"),Bce=class extends m6t.FuzzySuggestModal{constructor(r,n,o){super(r);this.chatFiles=n;this.onChooseFile=o}getItems(){return this.chatFiles.sort((r,n)=>{let o=s=>{let u=this.app.metadataCache.getFileCache(s)?.frontmatter;return u&&u.epoch?u.epoch:s.stat.ctime},i=o(r);return o(n)-i})}getItemText(r){let o=r.basename.replace(/^[a-zA-Z0-9-]+__/,"").replace(/\{\$date}|\d{8}/g,"").replace(/\{\$time}|\d{6}/g,"").replace(/[@_]/g," ").replace(/\s+/g," ").trim(),i,a=this.app.metadataCache.getFileCache(r)?.frontmatter;return a&&a.epoch?i=Nl(new Date(a.epoch)):i=Nl(new Date(r.stat.ctime)),`${o} - ${i.display}`}onChooseItem(r,n){this.onChooseFile(r)}};kr();kr();function h6t(t){t.addItem(n=>{n.setTitle("Copilot: Add selection to chat context").onClick(()=>{app.commands.executeCommandById(`copilot:${$r.ADD_SELECTION_TO_CHAT_CONTEXT}`)})});let e=Px();e.filter(n=>n.showInContextMenu).length>0&&t.addSeparator(),D5(e.filter(n=>n.showInContextMenu)).forEach(n=>{t.addItem(o=>{o.setTitle(`Copilot: ${n.title}`).onClick(()=>{app.commands.executeCommandById(`copilot:${sU(n.title)}`)})})})}Ko();kr();tr();var c9=require("obsidian"),Pke=F(X()),jWt=F(wc());var qce=class extends Kc{constructor(e,r){super(e,r,"Resetting settings will clear all settings and restore the default values. You will lose any custom settings you have made including the API keys. Are you sure you want to continue?","Reset Settings")}};var kW=F(X());var g6t=({tab:t,isSelected:e,onClick:r,isFirst:n,isLast:o})=>kW.default.createElement("div",{role:"tab",id:`tab-${t.id}`,"aria-controls":`tabpanel-${t.id}`,"aria-selected":e,onClick:r,className:_e("tw-flex tw-flex-row tw-items-center","tw-h-8","tw-px-2 tw-py-1","tw-gap-1.5","tw-cursor-pointer","tw-overflow-hidden","tw-whitespace-nowrap","tw-text-sm","tw-border tw-border-solid tw-border-border","tw-rounded-b-[2px] tw-rounded-t-md","tw-bg-primary","tw-transition-all tw-duration-300 tw-ease-in-out","hover:tw-border-interactive-accent",e&&["!tw-bg-interactive-accent","tw-text-on-accent","!tw-px-3","!tw-max-w-full","tw-transition-all tw-duration-300 tw-ease-in-out","tw-delay-200"],"lg:tw-max-w-32","md:tw-max-w-32")},kW.default.createElement("div",{className:_e("tw-flex tw-items-center tw-justify-center","tw-size-4","tw-transition-transform tw-duration-200 tw-ease-in-out",e?"tw-max-w-[16px] tw-translate-x-0 tw-opacity-100":"tw-max-w-0 tw--translate-x-4 tw-opacity-0")},t.icon),kW.default.createElement("span",{className:_e("tw-text-sm","tw-font-medium","tw-transition-all tw-duration-200 tw-ease-in-out","tw-overflow-hidden tw-whitespace-nowrap","tw-max-w-[100px] tw-translate-x-0 tw-opacity-100")},t.label)),y6t=({id:t,children:e,isSelected:r})=>r?kW.default.createElement("div",{role:"tabpanel",id:`tabpanel-${t}`,"aria-labelledby":`tab-${t}`,className:_e("tw-pt-4","tw-transition-all tw-duration-200 tw-ease-in-out",r?"tw-translate-y-0 tw-opacity-100":"tw-translate-y-2 tw-opacity-0")},e):null;var eh=F(X()),b6t=(0,eh.createContext)(void 0),_6t=({children:t})=>{let[e,r]=(0,eh.useState)("basic"),[n,o]=(0,eh.useState)(null),i=(0,eh.useRef)(!1);return(0,eh.useEffect)(()=>{if(!i.current){let a=document.querySelector(".modal-container");o(a),i.current=!0}},[]),eh.default.createElement(b6t.Provider,{value:{selectedTab:e,setSelectedTab:r,modalContainer:n}},t)},nz=()=>{let t=(0,eh.useContext)(b6t);if(t===void 0)throw new Error("useTab must be used within a TabProvider");return t};tr();var it=F(X());var Il=F(X());var $W=Il.forwardRef(({className:t,...e},r)=>Il.createElement("div",{className:"tw-relative tw-w-full tw-overflow-auto"},Il.createElement("table",{ref:r,className:_e("tw-w-full tw-caption-bottom tw-border-collapse tw-text-sm",t),...e})));$W.displayName="Table";var BW=Il.forwardRef(({className:t,...e},r)=>Il.createElement("thead",{ref:r,className:_e("[&_tr]:tw-border-b",t),...e}));BW.displayName="TableHeader";var qW=Il.forwardRef(({className:t,...e},r)=>Il.createElement("tbody",{ref:r,className:t,...e}));qW.displayName="TableBody";var rCn=Il.forwardRef(({className:t,...e},r)=>Il.createElement("tfoot",{ref:r,className:_e("tw-border-t tw-font-medium tw-bg-primary-alt/50",t),...e}));rCn.displayName="TableFooter";var dM=Il.forwardRef(({className:t,...e},r)=>Il.createElement("tr",{ref:r,className:_e("tw-border-b tw-transition-colors hover:tw-bg-primary-alt/50 data-[state=selected]:tw-bg-primary-alt",t),...e}));dM.displayName="TableRow";var Wf=Il.forwardRef(({className:t,...e},r)=>Il.createElement("th",{ref:r,className:_e("tw-h-10 tw-px-2 tw-text-left tw-align-middle tw-font-medium tw-text-muted [&:has([role=checkbox])]:tw-pr-0 [&>[role=checkbox]]:tw-translate-y-[2px]",t),...e}));Wf.displayName="TableHead";var tf=Il.forwardRef(({className:t,...e},r)=>Il.createElement("td",{ref:r,className:_e("tw-p-2 tw-align-middle [&:has([role=checkbox])]:tw-pr-0 [&>[role=checkbox]]:tw-translate-y-[2px]",t),...e}));tf.displayName="TableCell";var nCn=Il.forwardRef(({className:t,...e},r)=>Il.createElement("caption",{ref:r,className:_e("tw-mt-4 tw-text-sm tw-text-muted",t),...e}));nCn.displayName="TableCaption";var iz=F(X());var th=F(X(),1);var w6t=F(X(),1);function v6t(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function qFe(...t){return e=>{let r=!1,n=t.map(o=>{let i=v6t(o,e);return!r&&typeof i=="function"&&(r=!0),i});if(r)return()=>{for(let o=0;o<n.length;o++){let i=n[o];typeof i=="function"?i():v6t(t[o],null)}}}}function S6t(...t){return w6t.useCallback(qFe(...t),t)}function UFe(t,e,{checkForDefaultPrevented:r=!0}={}){return function(o){if(t?.(o),r===!1||!o.defaultPrevented)return e?.(o)}}var x6t=F(X(),1),uCn=F(os(),1);var ad=F(X(),1);var oz=F(ft(),1),HFe=ad.forwardRef((t,e)=>{let{children:r,...n}=t,o=ad.Children.toArray(r),i=o.find(iCn);if(i){let a=i.props.children,s=o.map(u=>u===i?ad.Children.count(a)>1?ad.Children.only(null):ad.isValidElement(a)?a.props.children:null:u);return(0,oz.jsx)(zFe,{...n,ref:e,children:ad.isValidElement(a)?ad.cloneElement(a,void 0,s):null})}return(0,oz.jsx)(zFe,{...n,ref:e,children:r})});HFe.displayName="Slot";var zFe=ad.forwardRef((t,e)=>{let{children:r,...n}=t;if(ad.isValidElement(r)){let o=sCn(r);return ad.cloneElement(r,{...aCn(n,r.props),ref:e?qFe(e,o):o})}return ad.Children.count(r)>1?ad.Children.only(null):null});zFe.displayName="SlotClone";var oCn=({children:t})=>(0,oz.jsx)(oz.Fragment,{children:t});function iCn(t){return ad.isValidElement(t)&&t.type===oCn}function aCn(t,e){let r={...e};for(let n in e){let o=t[n],i=e[n];/^on[A-Z]/.test(n)?o&&i?r[n]=(...s)=>{i(...s),o(...s)}:o&&(r[n]=o):n==="style"?r[n]={...o,...i}:n==="className"&&(r[n]=[o,i].filter(Boolean).join(" "))}return{...t,...r}}function sCn(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,r=e&&"isReactWarning"in e&&e.isReactWarning;return r?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,r=e&&"isReactWarning"in e&&e.isReactWarning,r?t.props.ref:t.props.ref||t.ref)}var C6t=F(ft(),1),lCn=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],VFe=lCn.reduce((t,e)=>{let r=x6t.forwardRef((n,o)=>{let{asChild:i,...a}=n,s=i?HFe:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),(0,C6t.jsx)(s,{...a,ref:o})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});var pM=F(ft(),1),WFe="Checkbox",[cCn,Vfi]=Vi(WFe),[dCn,fCn]=cCn(WFe),O6t=th.forwardRef((t,e)=>{let{__scopeCheckbox:r,name:n,checked:o,defaultChecked:i,required:a,disabled:s,value:u="on",onCheckedChange:l,form:c,...d}=t,[f,p]=th.useState(null),m=S6t(e,S=>p(S)),h=th.useRef(!1),b=f?c||!!f.closest("form"):!0,[g=!1,y]=Gc({prop:o,defaultProp:i,onChange:l}),w=th.useRef(g);return th.useEffect(()=>{let S=f?.form;if(S){let C=()=>y(w.current);return S.addEventListener("reset",C),()=>S.removeEventListener("reset",C)}},[f,y]),(0,pM.jsxs)(dCn,{scope:r,state:g,disabled:s,children:[(0,pM.jsx)(VFe.button,{type:"button",role:"checkbox","aria-checked":fM(g)?"mixed":g,"aria-required":a,"data-state":T6t(g),"data-disabled":s?"":void 0,disabled:s,value:u,...d,ref:m,onKeyDown:UFe(t.onKeyDown,S=>{S.key==="Enter"&&S.preventDefault()}),onClick:UFe(t.onClick,S=>{y(C=>fM(C)?!0:!C),b&&(h.current=S.isPropagationStopped(),h.current||S.stopPropagation())})}),b&&(0,pM.jsx)(pCn,{control:f,bubbles:!h.current,name:n,value:u,checked:g,required:a,disabled:s,form:c,style:{transform:"translateX(-100%)"},defaultChecked:fM(i)?!1:i})]})});O6t.displayName=WFe;var P6t="CheckboxIndicator",E6t=th.forwardRef((t,e)=>{let{__scopeCheckbox:r,forceMount:n,...o}=t,i=fCn(P6t,r);return(0,pM.jsx)(Xc,{present:n||fM(i.state)||i.state===!0,children:(0,pM.jsx)(VFe.span,{"data-state":T6t(i.state),"data-disabled":i.disabled?"":void 0,...o,ref:e,style:{pointerEvents:"none",...t.style}})})});E6t.displayName=P6t;var pCn=t=>{let{control:e,checked:r,bubbles:n=!0,defaultChecked:o,...i}=t,a=th.useRef(null),s=GU(r),u=Ix(e);th.useEffect(()=>{let c=a.current,d=window.HTMLInputElement.prototype,p=Object.getOwnPropertyDescriptor(d,"checked").set;if(s!==r&&p){let m=new Event("click",{bubbles:n});c.indeterminate=fM(r),p.call(c,fM(r)?!1:r),c.dispatchEvent(m)}},[s,r,n]);let l=th.useRef(fM(r)?!1:r);return(0,pM.jsx)("input",{type:"checkbox","aria-hidden":!0,defaultChecked:o??l.current,...i,tabIndex:-1,ref:a,style:{...t.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function fM(t){return t==="indeterminate"}function T6t(t){return fM(t)?"indeterminate":t?"checked":"unchecked"}var KFe=O6t,A6t=E6t;var sd=iz.forwardRef(({className:t,...e},r)=>iz.createElement(KFe,{ref:r,className:_e("tw-border-solid !tw-bg-transparent tw-p-0 !tw-shadow tw-transition-colors","hover:!tw-bg-interactive-accent hover:!tw-text-on-accent data-[state=checked]:!tw-bg-interactive-accent data-[state=checked]:!tw-text-on-accent","tw-peer tw-size-4 tw-shrink-0 tw-rounded-sm tw-border tw-border-interactive-accent focus-visible:tw-outline-none focus-visible:tw-ring-1 focus-visible:tw-ring-ring disabled:tw-cursor-not-allowed disabled:tw-opacity-50",t),...e},iz.createElement(A6t,{className:_e("tw-flex tw-items-center tw-justify-center tw-text-current")},iz.createElement(kl,{className:"tw-size-4"}))));sd.displayName=KFe.displayName;var Ae=F(X()),$D=F(os());var Es=F(X());function M6t(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return(0,Es.useMemo)(()=>n=>{e.forEach(o=>o(n))},e)}var UW=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function jD(t){let e=Object.prototype.toString.call(t);return e==="[object Window]"||e==="[object global]"}function Uce(t){return"nodeType"in t}function Kf(t){var e,r;return t?jD(t)?t:Uce(t)&&(e=(r=t.ownerDocument)==null?void 0:r.defaultView)!=null?e:window:window}function zce(t){let{Document:e}=Kf(t);return t instanceof e}function az(t){return jD(t)?!1:t instanceof Kf(t).HTMLElement}function JFe(t){return t instanceof Kf(t).SVGElement}function ND(t){return t?jD(t)?t.document:Uce(t)?zce(t)?t:az(t)||JFe(t)?t.ownerDocument:document:document:document}var kg=UW?Es.useLayoutEffect:Es.useEffect;function Hce(t){let e=(0,Es.useRef)(t);return kg(()=>{e.current=t}),(0,Es.useCallback)(function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return e.current==null?void 0:e.current(...n)},[])}function R6t(){let t=(0,Es.useRef)(null),e=(0,Es.useCallback)((n,o)=>{t.current=setInterval(n,o)},[]),r=(0,Es.useCallback)(()=>{t.current!==null&&(clearInterval(t.current),t.current=null)},[]);return[e,r]}function sz(t,e){e===void 0&&(e=[t]);let r=(0,Es.useRef)(t);return kg(()=>{r.current!==t&&(r.current=t)},e),r}function uz(t,e){let r=(0,Es.useRef)();return(0,Es.useMemo)(()=>{let n=t(r.current);return r.current=n,n},[...e])}function zW(t){let e=Hce(t),r=(0,Es.useRef)(null),n=(0,Es.useCallback)(o=>{o!==r.current&&e?.(o,r.current),r.current=o},[]);return[r,n]}function Vce(t){let e=(0,Es.useRef)();return(0,Es.useEffect)(()=>{e.current=t},[t]),e.current}var GFe={};function DD(t,e){return(0,Es.useMemo)(()=>{if(e)return e;let r=GFe[t]==null?0:GFe[t]+1;return GFe[t]=r,t+"-"+r},[t,e])}function j6t(t){return function(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];return n.reduce((i,a)=>{let s=Object.entries(a);for(let[u,l]of s){let c=i[u];c!=null&&(i[u]=c+t*l)}return i},{...e})}}var LD=j6t(1),FD=j6t(-1);function hCn(t){return"clientX"in t&&"clientY"in t}function HW(t){if(!t)return!1;let{KeyboardEvent:e}=Kf(t.target);return e&&t instanceof e}function gCn(t){if(!t)return!1;let{TouchEvent:e}=Kf(t.target);return e&&t instanceof e}function Wce(t){if(gCn(t)){if(t.touches&&t.touches.length){let{clientX:e,clientY:r}=t.touches[0];return{x:e,y:r}}else if(t.changedTouches&&t.changedTouches.length){let{clientX:e,clientY:r}=t.changedTouches[0];return{x:e,y:r}}}return hCn(t)?{x:t.clientX,y:t.clientY}:null}var fb=Object.freeze({Translate:{toString(t){if(!t)return;let{x:e,y:r}=t;return"translate3d("+(e?Math.round(e):0)+"px, "+(r?Math.round(r):0)+"px, 0)"}},Scale:{toString(t){if(!t)return;let{scaleX:e,scaleY:r}=t;return"scaleX("+e+") scaleY("+r+")"}},Transform:{toString(t){if(t)return[fb.Translate.toString(t),fb.Scale.toString(t)].join(" ")}},Transition:{toString(t){let{property:e,duration:r,easing:n}=t;return e+" "+r+"ms "+n}}}),I6t="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function N6t(t){return t.matches(I6t)?t:t.querySelector(I6t)}var kD=F(X()),yCn={display:"none"};function D6t(t){let{id:e,value:r}=t;return kD.default.createElement("div",{id:e,style:yCn},r)}function L6t(t){let{id:e,announcement:r,ariaLiveType:n="assertive"}=t,o={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return kD.default.createElement("div",{id:e,style:o,role:"status","aria-live":n,"aria-atomic":!0},r)}function F6t(){let[t,e]=(0,kD.useState)("");return{announce:(0,kD.useCallback)(n=>{n!=null&&e(n)},[]),announcement:t}}var Y6t=(0,Ae.createContext)(null);function bCn(t){let e=(0,Ae.useContext)(Y6t);(0,Ae.useEffect)(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(t)},[t,e])}function _Cn(){let[t]=(0,Ae.useState)(()=>new Set),e=(0,Ae.useCallback)(n=>(t.add(n),()=>t.delete(n)),[t]);return[(0,Ae.useCallback)(n=>{let{type:o,event:i}=n;t.forEach(a=>{var s;return(s=a[o])==null?void 0:s.call(a,i)})},[t]),e]}var vCn={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},wCn={onDragStart(t){let{active:e}=t;return"Picked up draggable item "+e.id+"."},onDragOver(t){let{active:e,over:r}=t;return r?"Draggable item "+e.id+" was moved over droppable area "+r.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(t){let{active:e,over:r}=t;return r?"Draggable item "+e.id+" was dropped over droppable area "+r.id:"Draggable item "+e.id+" was dropped."},onDragCancel(t){let{active:e}=t;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function SCn(t){let{announcements:e=wCn,container:r,hiddenTextDescribedById:n,screenReaderInstructions:o=vCn}=t,{announce:i,announcement:a}=F6t(),s=DD("DndLiveRegion"),[u,l]=(0,Ae.useState)(!1);if((0,Ae.useEffect)(()=>{l(!0)},[]),bCn((0,Ae.useMemo)(()=>({onDragStart(d){let{active:f}=d;i(e.onDragStart({active:f}))},onDragMove(d){let{active:f,over:p}=d;e.onDragMove&&i(e.onDragMove({active:f,over:p}))},onDragOver(d){let{active:f,over:p}=d;i(e.onDragOver({active:f,over:p}))},onDragEnd(d){let{active:f,over:p}=d;i(e.onDragEnd({active:f,over:p}))},onDragCancel(d){let{active:f,over:p}=d;i(e.onDragCancel({active:f,over:p}))}}),[i,e])),!u)return null;let c=Ae.default.createElement(Ae.default.Fragment,null,Ae.default.createElement(D6t,{id:n,value:o.draggable}),Ae.default.createElement(L6t,{id:s,announcement:a}));return r?(0,$D.createPortal)(c,r):c}var Ml;(function(t){t.DragStart="dragStart",t.DragMove="dragMove",t.DragEnd="dragEnd",t.DragCancel="dragCancel",t.DragOver="dragOver",t.RegisterDroppable="registerDroppable",t.SetDroppableDisabled="setDroppableDisabled",t.UnregisterDroppable="unregisterDroppable"})(Ml||(Ml={}));function Gce(){}function lz(t,e){return(0,Ae.useMemo)(()=>({sensor:t,options:e??{}}),[t,e])}function Yce(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return(0,Ae.useMemo)(()=>[...e].filter(n=>n!=null),[...e])}var pb=Object.freeze({x:0,y:0});function Z6t(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function X6t(t,e){let{data:{value:r}}=t,{data:{value:n}}=e;return r-n}function xCn(t,e){let{data:{value:r}}=t,{data:{value:n}}=e;return n-r}function k6t(t){let{left:e,top:r,height:n,width:o}=t;return[{x:e,y:r},{x:e+o,y:r},{x:e,y:r+n},{x:e+o,y:r+n}]}function oke(t,e){if(!t||t.length===0)return null;let[r]=t;return e?r[e]:r}function $6t(t,e,r){return e===void 0&&(e=t.left),r===void 0&&(r=t.top),{x:e+t.width*.5,y:r+t.height*.5}}var JW=t=>{let{collisionRect:e,droppableRects:r,droppableContainers:n}=t,o=$6t(e,e.left,e.top),i=[];for(let a of n){let{id:s}=a,u=r.get(s);if(u){let l=Z6t($6t(u),o);i.push({id:s,data:{droppableContainer:a,value:l}})}}return i.sort(X6t)},Q6t=t=>{let{collisionRect:e,droppableRects:r,droppableContainers:n}=t,o=k6t(e),i=[];for(let a of n){let{id:s}=a,u=r.get(s);if(u){let l=k6t(u),c=o.reduce((f,p,m)=>f+Z6t(l[m],p),0),d=Number((c/4).toFixed(4));i.push({id:s,data:{droppableContainer:a,value:d}})}}return i.sort(X6t)};function CCn(t,e){let r=Math.max(e.top,t.top),n=Math.max(e.left,t.left),o=Math.min(e.left+e.width,t.left+t.width),i=Math.min(e.top+e.height,t.top+t.height),a=o-n,s=i-r;if(n<o&&r<i){let u=e.width*e.height,l=t.width*t.height,c=a*s,d=c/(u+l-c);return Number(d.toFixed(4))}return 0}var OCn=t=>{let{collisionRect:e,droppableRects:r,droppableContainers:n}=t,o=[];for(let i of n){let{id:a}=i,s=r.get(a);if(s){let u=CCn(s,e);u>0&&o.push({id:a,data:{droppableContainer:i,value:u}})}}return o.sort(xCn)};function PCn(t,e,r){return{...t,scaleX:e&&r?e.width/r.width:1,scaleY:e&&r?e.height/r.height:1}}function e5t(t,e){return t&&e?{x:t.left-e.left,y:t.top-e.top}:pb}function ECn(t){return function(r){for(var n=arguments.length,o=new Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];return o.reduce((a,s)=>({...a,top:a.top+t*s.y,bottom:a.bottom+t*s.y,left:a.left+t*s.x,right:a.right+t*s.x}),{...r})}}var TCn=ECn(1);function ACn(t){if(t.startsWith("matrix3d(")){let e=t.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(t.startsWith("matrix(")){let e=t.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function ICn(t,e,r){let n=ACn(e);if(!n)return t;let{scaleX:o,scaleY:i,x:a,y:s}=n,u=t.left-a-(1-o)*parseFloat(r),l=t.top-s-(1-i)*parseFloat(r.slice(r.indexOf(" ")+1)),c=o?t.width/o:t.width,d=i?t.height/i:t.height;return{width:c,height:d,top:l,right:u+c,bottom:l+d,left:u}}var MCn={ignoreTransform:!1};function UD(t,e){e===void 0&&(e=MCn);let r=t.getBoundingClientRect();if(e.ignoreTransform){let{transform:l,transformOrigin:c}=Kf(t).getComputedStyle(t);l&&(r=ICn(r,l,c))}let{top:n,left:o,width:i,height:a,bottom:s,right:u}=r;return{top:n,left:o,width:i,height:a,bottom:s,right:u}}function B6t(t){return UD(t,{ignoreTransform:!0})}function RCn(t){let e=t.innerWidth,r=t.innerHeight;return{top:0,left:0,right:e,bottom:r,width:e,height:r}}function jCn(t,e){return e===void 0&&(e=Kf(t).getComputedStyle(t)),e.position==="fixed"}function NCn(t,e){e===void 0&&(e=Kf(t).getComputedStyle(t));let r=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(o=>{let i=e[o];return typeof i=="string"?r.test(i):!1})}function YW(t,e){let r=[];function n(o){if(e!=null&&r.length>=e||!o)return r;if(zce(o)&&o.scrollingElement!=null&&!r.includes(o.scrollingElement))return r.push(o.scrollingElement),r;if(!az(o)||JFe(o)||r.includes(o))return r;let i=Kf(t).getComputedStyle(o);return o!==t&&NCn(o,i)&&r.push(o),jCn(o,i)?r:n(o.parentNode)}return t?n(t):r}function t5t(t){let[e]=YW(t,1);return e??null}function YFe(t){return!UW||!t?null:jD(t)?t:Uce(t)?zce(t)||t===ND(t).scrollingElement?window:az(t)?t:null:null}function r5t(t){return jD(t)?t.scrollX:t.scrollLeft}function n5t(t){return jD(t)?t.scrollY:t.scrollTop}function QFe(t){return{x:r5t(t),y:n5t(t)}}var lc;(function(t){t[t.Forward=1]="Forward",t[t.Backward=-1]="Backward"})(lc||(lc={}));function o5t(t){return!UW||!t?!1:t===document.scrollingElement}function i5t(t){let e={x:0,y:0},r=o5t(t)?{height:window.innerHeight,width:window.innerWidth}:{height:t.clientHeight,width:t.clientWidth},n={x:t.scrollWidth-r.width,y:t.scrollHeight-r.height},o=t.scrollTop<=e.y,i=t.scrollLeft<=e.x,a=t.scrollTop>=n.y,s=t.scrollLeft>=n.x;return{isTop:o,isLeft:i,isBottom:a,isRight:s,maxScroll:n,minScroll:e}}var DCn={x:.2,y:.2};function LCn(t,e,r,n,o){let{top:i,left:a,right:s,bottom:u}=r;n===void 0&&(n=10),o===void 0&&(o=DCn);let{isTop:l,isBottom:c,isLeft:d,isRight:f}=i5t(t),p={x:0,y:0},m={x:0,y:0},h={height:e.height*o.y,width:e.width*o.x};return!l&&i<=e.top+h.height?(p.y=lc.Backward,m.y=n*Math.abs((e.top+h.height-i)/h.height)):!c&&u>=e.bottom-h.height&&(p.y=lc.Forward,m.y=n*Math.abs((e.bottom-h.height-u)/h.height)),!f&&s>=e.right-h.width?(p.x=lc.Forward,m.x=n*Math.abs((e.right-h.width-s)/h.width)):!d&&a<=e.left+h.width&&(p.x=lc.Backward,m.x=n*Math.abs((e.left+h.width-a)/h.width)),{direction:p,speed:m}}function FCn(t){if(t===document.scrollingElement){let{innerWidth:i,innerHeight:a}=window;return{top:0,left:0,right:i,bottom:a,width:i,height:a}}let{top:e,left:r,right:n,bottom:o}=t.getBoundingClientRect();return{top:e,left:r,right:n,bottom:o,width:t.clientWidth,height:t.clientHeight}}function a5t(t){return t.reduce((e,r)=>LD(e,QFe(r)),pb)}function kCn(t){return t.reduce((e,r)=>e+r5t(r),0)}function $Cn(t){return t.reduce((e,r)=>e+n5t(r),0)}function BCn(t,e){if(e===void 0&&(e=UD),!t)return;let{top:r,left:n,bottom:o,right:i}=e(t);t5t(t)&&(o<=0||i<=0||r>=window.innerHeight||n>=window.innerWidth)&&t.scrollIntoView({block:"center",inline:"center"})}var qCn=[["x",["left","right"],kCn],["y",["top","bottom"],$Cn]],WW=class{constructor(e,r){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;let n=YW(r),o=a5t(n);this.rect={...e},this.width=e.width,this.height=e.height;for(let[i,a,s]of qCn)for(let u of a)Object.defineProperty(this,u,{get:()=>{let l=s(n),c=o[i]-l;return this.rect[u]+c},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}},BD=class{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(r=>{var n;return(n=this.target)==null?void 0:n.removeEventListener(...r)})},this.target=e}add(e,r,n){var o;(o=this.target)==null||o.addEventListener(e,r,n),this.listeners.push([e,r,n])}};function UCn(t){let{EventTarget:e}=Kf(t);return t instanceof e?t:ND(t)}function ZFe(t,e){let r=Math.abs(t.x),n=Math.abs(t.y);return typeof e=="number"?Math.sqrt(r**2+n**2)>e:"x"in e&&"y"in e?r>e.x&&n>e.y:"x"in e?r>e.x:"y"in e?n>e.y:!1}var $g;(function(t){t.Click="click",t.DragStart="dragstart",t.Keydown="keydown",t.ContextMenu="contextmenu",t.Resize="resize",t.SelectionChange="selectionchange",t.VisibilityChange="visibilitychange"})($g||($g={}));function q6t(t){t.preventDefault()}function zCn(t){t.stopPropagation()}var Nn;(function(t){t.Space="Space",t.Down="ArrowDown",t.Right="ArrowRight",t.Left="ArrowLeft",t.Up="ArrowUp",t.Esc="Escape",t.Enter="Enter",t.Tab="Tab"})(Nn||(Nn={}));var s5t={start:[Nn.Space,Nn.Enter],cancel:[Nn.Esc],end:[Nn.Space,Nn.Enter,Nn.Tab]},HCn=(t,e)=>{let{currentCoordinates:r}=e;switch(t.code){case Nn.Right:return{...r,x:r.x+25};case Nn.Left:return{...r,x:r.x-25};case Nn.Down:return{...r,y:r.y+25};case Nn.Up:return{...r,y:r.y-25}}},hM=class{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;let{event:{target:r}}=e;this.props=e,this.listeners=new BD(ND(r)),this.windowListeners=new BD(Kf(r)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add($g.Resize,this.handleCancel),this.windowListeners.add($g.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add($g.Keydown,this.handleKeyDown))}handleStart(){let{activeNode:e,onStart:r}=this.props,n=e.node.current;n&&BCn(n),r(pb)}handleKeyDown(e){if(HW(e)){let{active:r,context:n,options:o}=this.props,{keyboardCodes:i=s5t,coordinateGetter:a=HCn,scrollBehavior:s="smooth"}=o,{code:u}=e;if(i.end.includes(u)){this.handleEnd(e);return}if(i.cancel.includes(u)){this.handleCancel(e);return}let{collisionRect:l}=n.current,c=l?{x:l.left,y:l.top}:pb;this.referenceCoordinates||(this.referenceCoordinates=c);let d=a(e,{active:r,context:n.current,currentCoordinates:c});if(d){let f=FD(d,c),p={x:0,y:0},{scrollableAncestors:m}=n.current;for(let h of m){let b=e.code,{isTop:g,isRight:y,isLeft:w,isBottom:S,maxScroll:C,minScroll:P}=i5t(h),E=FCn(h),A={x:Math.min(b===Nn.Right?E.right-E.width/2:E.right,Math.max(b===Nn.Right?E.left:E.left+E.width/2,d.x)),y:Math.min(b===Nn.Down?E.bottom-E.height/2:E.bottom,Math.max(b===Nn.Down?E.top:E.top+E.height/2,d.y))},I=b===Nn.Right&&!y||b===Nn.Left&&!w,R=b===Nn.Down&&!S||b===Nn.Up&&!g;if(I&&A.x!==d.x){let j=h.scrollLeft+f.x,N=b===Nn.Right&&j<=C.x||b===Nn.Left&&j>=P.x;if(N&&!f.y){h.scrollTo({left:j,behavior:s});return}N?p.x=h.scrollLeft-j:p.x=b===Nn.Right?h.scrollLeft-C.x:h.scrollLeft-P.x,p.x&&h.scrollBy({left:-p.x,behavior:s});break}else if(R&&A.y!==d.y){let j=h.scrollTop+f.y,N=b===Nn.Down&&j<=C.y||b===Nn.Up&&j>=P.y;if(N&&!f.x){h.scrollTo({top:j,behavior:s});return}N?p.y=h.scrollTop-j:p.y=b===Nn.Down?h.scrollTop-C.y:h.scrollTop-P.y,p.y&&h.scrollBy({top:-p.y,behavior:s});break}}this.handleMove(e,LD(FD(d,this.referenceCoordinates),p))}}}handleMove(e,r){let{onMove:n}=this.props;e.preventDefault(),n(r)}handleEnd(e){let{onEnd:r}=this.props;e.preventDefault(),this.detach(),r()}handleCancel(e){let{onCancel:r}=this.props;e.preventDefault(),this.detach(),r()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}};hM.activators=[{eventName:"onKeyDown",handler:(t,e,r)=>{let{keyboardCodes:n=s5t,onActivation:o}=e,{active:i}=r,{code:a}=t.nativeEvent;if(n.start.includes(a)){let s=i.activatorNode.current;return s&&t.target!==s?!1:(t.preventDefault(),o?.({event:t.nativeEvent}),!0)}return!1}}];function U6t(t){return!!(t&&"distance"in t)}function z6t(t){return!!(t&&"delay"in t)}var KW=class{constructor(e,r,n){var o;n===void 0&&(n=UCn(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=r;let{event:i}=e,{target:a}=i;this.props=e,this.events=r,this.document=ND(a),this.documentListeners=new BD(this.document),this.listeners=new BD(n),this.windowListeners=new BD(Kf(a)),this.initialCoordinates=(o=Wce(i))!=null?o:pb,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){let{events:e,props:{options:{activationConstraint:r,bypassActivationConstraint:n}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add($g.Resize,this.handleCancel),this.windowListeners.add($g.DragStart,q6t),this.windowListeners.add($g.VisibilityChange,this.handleCancel),this.windowListeners.add($g.ContextMenu,q6t),this.documentListeners.add($g.Keydown,this.handleKeydown),r){if(n!=null&&n({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(z6t(r)){this.timeoutId=setTimeout(this.handleStart,r.delay),this.handlePending(r);return}if(U6t(r)){this.handlePending(r);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,r){let{active:n,onPending:o}=this.props;o(n,e,this.initialCoordinates,r)}handleStart(){let{initialCoordinates:e}=this,{onStart:r}=this.props;e&&(this.activated=!0,this.documentListeners.add($g.Click,zCn,{capture:!0}),this.removeTextSelection(),this.documentListeners.add($g.SelectionChange,this.removeTextSelection),r(e))}handleMove(e){var r;let{activated:n,initialCoordinates:o,props:i}=this,{onMove:a,options:{activationConstraint:s}}=i;if(!o)return;let u=(r=Wce(e))!=null?r:pb,l=FD(o,u);if(!n&&s){if(U6t(s)){if(s.tolerance!=null&&ZFe(l,s.tolerance))return this.handleCancel();if(ZFe(l,s.distance))return this.handleStart()}if(z6t(s)&&ZFe(l,s.tolerance))return this.handleCancel();this.handlePending(s,l);return}e.cancelable&&e.preventDefault(),a(u)}handleEnd(){let{onAbort:e,onEnd:r}=this.props;this.detach(),this.activated||e(this.props.active),r()}handleCancel(){let{onAbort:e,onCancel:r}=this.props;this.detach(),this.activated||e(this.props.active),r()}handleKeydown(e){e.code===Nn.Esc&&this.handleCancel()}removeTextSelection(){var e;(e=this.document.getSelection())==null||e.removeAllRanges()}},VCn={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}},gM=class extends KW{constructor(e){let{event:r}=e,n=ND(r.target);super(e,VCn,n)}};gM.activators=[{eventName:"onPointerDown",handler:(t,e)=>{let{nativeEvent:r}=t,{onActivation:n}=e;return!r.isPrimary||r.button!==0?!1:(n?.({event:r}),!0)}}];var WCn={move:{name:"mousemove"},end:{name:"mouseup"}},eke;(function(t){t[t.RightClick=2]="RightClick"})(eke||(eke={}));var tke=class extends KW{constructor(e){super(e,WCn,ND(e.event.target))}};tke.activators=[{eventName:"onMouseDown",handler:(t,e)=>{let{nativeEvent:r}=t,{onActivation:n}=e;return r.button===eke.RightClick?!1:(n?.({event:r}),!0)}}];var XFe={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}},rke=class extends KW{constructor(e){super(e,XFe)}static setup(){return window.addEventListener(XFe.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(XFe.move.name,e)};function e(){}}};rke.activators=[{eventName:"onTouchStart",handler:(t,e)=>{let{nativeEvent:r}=t,{onActivation:n}=e,{touches:o}=r;return o.length>1?!1:(n?.({event:r}),!0)}}];var VW;(function(t){t[t.Pointer=0]="Pointer",t[t.DraggableRect=1]="DraggableRect"})(VW||(VW={}));var Jce;(function(t){t[t.TreeOrder=0]="TreeOrder",t[t.ReversedTreeOrder=1]="ReversedTreeOrder"})(Jce||(Jce={}));function KCn(t){let{acceleration:e,activator:r=VW.Pointer,canScroll:n,draggingRect:o,enabled:i,interval:a=5,order:s=Jce.TreeOrder,pointerCoordinates:u,scrollableAncestors:l,scrollableAncestorRects:c,delta:d,threshold:f}=t,p=JCn({delta:d,disabled:!i}),[m,h]=R6t(),b=(0,Ae.useRef)({x:0,y:0}),g=(0,Ae.useRef)({x:0,y:0}),y=(0,Ae.useMemo)(()=>{switch(r){case VW.Pointer:return u?{top:u.y,bottom:u.y,left:u.x,right:u.x}:null;case VW.DraggableRect:return o}},[r,o,u]),w=(0,Ae.useRef)(null),S=(0,Ae.useCallback)(()=>{let P=w.current;if(!P)return;let E=b.current.x*g.current.x,A=b.current.y*g.current.y;P.scrollBy(E,A)},[]),C=(0,Ae.useMemo)(()=>s===Jce.TreeOrder?[...l].reverse():l,[s,l]);(0,Ae.useEffect)(()=>{if(!i||!l.length||!y){h();return}for(let P of C){if(n?.(P)===!1)continue;let E=l.indexOf(P),A=c[E];if(!A)continue;let{direction:I,speed:R}=LCn(P,A,y,e,f);for(let j of["x","y"])p[j][I[j]]||(R[j]=0,I[j]=0);if(R.x>0||R.y>0){h(),w.current=P,m(S,a),b.current=R,g.current=I;return}}b.current={x:0,y:0},g.current={x:0,y:0},h()},[e,S,n,h,i,a,JSON.stringify(y),JSON.stringify(p),m,l,C,c,JSON.stringify(f)])}var GCn={x:{[lc.Backward]:!1,[lc.Forward]:!1},y:{[lc.Backward]:!1,[lc.Forward]:!1}};function JCn(t){let{delta:e,disabled:r}=t,n=Vce(e);return uz(o=>{if(r||!n||!o)return GCn;let i={x:Math.sign(e.x-n.x),y:Math.sign(e.y-n.y)};return{x:{[lc.Backward]:o.x[lc.Backward]||i.x===-1,[lc.Forward]:o.x[lc.Forward]||i.x===1},y:{[lc.Backward]:o.y[lc.Backward]||i.y===-1,[lc.Forward]:o.y[lc.Forward]||i.y===1}}},[r,e,n])}function YCn(t,e){let r=e!=null?t.get(e):void 0,n=r?r.node.current:null;return uz(o=>{var i;return e==null?null:(i=n??o)!=null?i:null},[n,e])}function ZCn(t,e){return(0,Ae.useMemo)(()=>t.reduce((r,n)=>{let{sensor:o}=n,i=o.activators.map(a=>({eventName:a.eventName,handler:e(a.handler,n)}));return[...r,...i]},[]),[t,e])}var GW;(function(t){t[t.Always=0]="Always",t[t.BeforeDragging=1]="BeforeDragging",t[t.WhileDragging=2]="WhileDragging"})(GW||(GW={}));var nke;(function(t){t.Optimized="optimized"})(nke||(nke={}));var H6t=new Map;function XCn(t,e){let{dragging:r,dependencies:n,config:o}=e,[i,a]=(0,Ae.useState)(null),{frequency:s,measure:u,strategy:l}=o,c=(0,Ae.useRef)(t),d=b(),f=sz(d),p=(0,Ae.useCallback)(function(g){g===void 0&&(g=[]),!f.current&&a(y=>y===null?g:y.concat(g.filter(w=>!y.includes(w))))},[f]),m=(0,Ae.useRef)(null),h=uz(g=>{if(d&&!r)return H6t;if(!g||g===H6t||c.current!==t||i!=null){let y=new Map;for(let w of t){if(!w)continue;if(i&&i.length>0&&!i.includes(w.id)&&w.rect.current){y.set(w.id,w.rect.current);continue}let S=w.node.current,C=S?new WW(u(S),S):null;w.rect.current=C,C&&y.set(w.id,C)}return y}return g},[t,i,r,d,u]);return(0,Ae.useEffect)(()=>{c.current=t},[t]),(0,Ae.useEffect)(()=>{d||p()},[r,d]),(0,Ae.useEffect)(()=>{i&&i.length>0&&a(null)},[JSON.stringify(i)]),(0,Ae.useEffect)(()=>{d||typeof s!="number"||m.current!==null||(m.current=setTimeout(()=>{p(),m.current=null},s))},[s,d,p,...n]),{droppableRects:h,measureDroppableContainers:p,measuringScheduled:i!=null};function b(){switch(l){case GW.Always:return!1;case GW.BeforeDragging:return r;default:return!r}}}function u5t(t,e){return uz(r=>t?r||(typeof e=="function"?e(t):t):null,[e,t])}function QCn(t,e){return u5t(t,e)}function eOn(t){let{callback:e,disabled:r}=t,n=Hce(e),o=(0,Ae.useMemo)(()=>{if(r||typeof window>"u"||typeof window.MutationObserver>"u")return;let{MutationObserver:i}=window;return new i(n)},[n,r]);return(0,Ae.useEffect)(()=>()=>o?.disconnect(),[o]),o}function Zce(t){let{callback:e,disabled:r}=t,n=Hce(e),o=(0,Ae.useMemo)(()=>{if(r||typeof window>"u"||typeof window.ResizeObserver>"u")return;let{ResizeObserver:i}=window;return new i(n)},[r]);return(0,Ae.useEffect)(()=>()=>o?.disconnect(),[o]),o}function tOn(t){return new WW(UD(t),t)}function V6t(t,e,r){e===void 0&&(e=tOn);let[n,o]=(0,Ae.useState)(null);function i(){o(u=>{if(!t)return null;if(t.isConnected===!1){var l;return(l=u??r)!=null?l:null}let c=e(t);return JSON.stringify(u)===JSON.stringify(c)?u:c})}let a=eOn({callback(u){if(t)for(let l of u){let{type:c,target:d}=l;if(c==="childList"&&d instanceof HTMLElement&&d.contains(t)){i();break}}}}),s=Zce({callback:i});return kg(()=>{i(),t?(s?.observe(t),a?.observe(document.body,{childList:!0,subtree:!0})):(s?.disconnect(),a?.disconnect())},[t]),n}function rOn(t){let e=u5t(t);return e5t(t,e)}var W6t=[];function nOn(t){let e=(0,Ae.useRef)(t),r=uz(n=>t?n&&n!==W6t&&t&&e.current&&t.parentNode===e.current.parentNode?n:YW(t):W6t,[t]);return(0,Ae.useEffect)(()=>{e.current=t},[t]),r}function oOn(t){let[e,r]=(0,Ae.useState)(null),n=(0,Ae.useRef)(t),o=(0,Ae.useCallback)(i=>{let a=YFe(i.target);a&&r(s=>s?(s.set(a,QFe(a)),new Map(s)):null)},[]);return(0,Ae.useEffect)(()=>{let i=n.current;if(t!==i){a(i);let s=t.map(u=>{let l=YFe(u);return l?(l.addEventListener("scroll",o,{passive:!0}),[l,QFe(l)]):null}).filter(u=>u!=null);r(s.length?new Map(s):null),n.current=t}return()=>{a(t),a(i)};function a(s){s.forEach(u=>{let l=YFe(u);l?.removeEventListener("scroll",o)})}},[o,t]),(0,Ae.useMemo)(()=>t.length?e?Array.from(e.values()).reduce((i,a)=>LD(i,a),pb):a5t(t):pb,[t,e])}function K6t(t,e){e===void 0&&(e=[]);let r=(0,Ae.useRef)(null);return(0,Ae.useEffect)(()=>{r.current=null},e),(0,Ae.useEffect)(()=>{let n=t!==pb;n&&!r.current&&(r.current=t),!n&&r.current&&(r.current=null)},[t]),r.current?FD(t,r.current):pb}function iOn(t){(0,Ae.useEffect)(()=>{if(!UW)return;let e=t.map(r=>{let{sensor:n}=r;return n.setup==null?void 0:n.setup()});return()=>{for(let r of e)r?.()}},t.map(e=>{let{sensor:r}=e;return r}))}function aOn(t,e){return(0,Ae.useMemo)(()=>t.reduce((r,n)=>{let{eventName:o,handler:i}=n;return r[o]=a=>{i(a,e)},r},{}),[t,e])}function l5t(t){return(0,Ae.useMemo)(()=>t?RCn(t):null,[t])}var G6t=[];function sOn(t,e){e===void 0&&(e=UD);let[r]=t,n=l5t(r?Kf(r):null),[o,i]=(0,Ae.useState)(G6t);function a(){i(()=>t.length?t.map(u=>o5t(u)?n:new WW(e(u),u)):G6t)}let s=Zce({callback:a});return kg(()=>{s?.disconnect(),a(),t.forEach(u=>s?.observe(u))},[t]),o}function uOn(t){if(!t)return null;if(t.children.length>1)return t;let e=t.children[0];return az(e)?e:t}function lOn(t){let{measure:e}=t,[r,n]=(0,Ae.useState)(null),o=(0,Ae.useCallback)(l=>{for(let{target:c}of l)if(az(c)){n(d=>{let f=e(c);return d?{...d,width:f.width,height:f.height}:f});break}},[e]),i=Zce({callback:o}),a=(0,Ae.useCallback)(l=>{let c=uOn(l);i?.disconnect(),c&&i?.observe(c),n(c?e(c):null)},[e,i]),[s,u]=zW(a);return(0,Ae.useMemo)(()=>({nodeRef:s,rect:r,setRef:u}),[r,s,u])}var cOn=[{sensor:gM,options:{}},{sensor:hM,options:{}}],dOn={current:{}},Kce={draggable:{measure:B6t},droppable:{measure:B6t,strategy:GW.WhileDragging,frequency:nke.Optimized},dragOverlay:{measure:UD}},qD=class extends Map{get(e){var r;return e!=null&&(r=super.get(e))!=null?r:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:r}=e;return!r})}getNodeFor(e){var r,n;return(r=(n=this.get(e))==null?void 0:n.node.current)!=null?r:void 0}},fOn={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new qD,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Gce},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Kce,measureDroppableContainers:Gce,windowRect:null,measuringScheduled:!1},pOn={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Gce,draggableNodes:new Map,over:null,measureDroppableContainers:Gce},Xce=(0,Ae.createContext)(pOn),c5t=(0,Ae.createContext)(fOn);function mOn(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new qD}}}function hOn(t,e){switch(e.type){case Ml.DragStart:return{...t,draggable:{...t.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case Ml.DragMove:return t.draggable.active==null?t:{...t,draggable:{...t.draggable,translate:{x:e.coordinates.x-t.draggable.initialCoordinates.x,y:e.coordinates.y-t.draggable.initialCoordinates.y}}};case Ml.DragEnd:case Ml.DragCancel:return{...t,draggable:{...t.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case Ml.RegisterDroppable:{let{element:r}=e,{id:n}=r,o=new qD(t.droppable.containers);return o.set(n,r),{...t,droppable:{...t.droppable,containers:o}}}case Ml.SetDroppableDisabled:{let{id:r,key:n,disabled:o}=e,i=t.droppable.containers.get(r);if(!i||n!==i.key)return t;let a=new qD(t.droppable.containers);return a.set(r,{...i,disabled:o}),{...t,droppable:{...t.droppable,containers:a}}}case Ml.UnregisterDroppable:{let{id:r,key:n}=e,o=t.droppable.containers.get(r);if(!o||n!==o.key)return t;let i=new qD(t.droppable.containers);return i.delete(r),{...t,droppable:{...t.droppable,containers:i}}}default:return t}}function gOn(t){let{disabled:e}=t,{active:r,activatorEvent:n,draggableNodes:o}=(0,Ae.useContext)(Xce),i=Vce(n),a=Vce(r?.id);return(0,Ae.useEffect)(()=>{if(!e&&!n&&i&&a!=null){if(!HW(i)||document.activeElement===i.target)return;let s=o.get(a);if(!s)return;let{activatorNode:u,node:l}=s;if(!u.current&&!l.current)return;requestAnimationFrame(()=>{for(let c of[u.current,l.current]){if(!c)continue;let d=N6t(c);if(d){d.focus();break}}})}},[n,e,o,a,i]),null}function yOn(t,e){let{transform:r,...n}=e;return t!=null&&t.length?t.reduce((o,i)=>i({transform:o,...n}),r):r}function bOn(t){return(0,Ae.useMemo)(()=>({draggable:{...Kce.draggable,...t?.draggable},droppable:{...Kce.droppable,...t?.droppable},dragOverlay:{...Kce.dragOverlay,...t?.dragOverlay}}),[t?.draggable,t?.droppable,t?.dragOverlay])}function _On(t){let{activeNode:e,measure:r,initialRect:n,config:o=!0}=t,i=(0,Ae.useRef)(!1),{x:a,y:s}=typeof o=="boolean"?{x:o,y:o}:o;kg(()=>{if(!a&&!s||!e){i.current=!1;return}if(i.current||!n)return;let l=e?.node.current;if(!l||l.isConnected===!1)return;let c=r(l),d=e5t(c,n);if(a||(d.x=0),s||(d.y=0),i.current=!0,Math.abs(d.x)>0||Math.abs(d.y)>0){let f=t5t(l);f&&f.scrollBy({top:d.y,left:d.x})}},[e,a,s,n,r])}var d5t=(0,Ae.createContext)({...pb,scaleX:1,scaleY:1}),mM;(function(t){t[t.Uninitialized=0]="Uninitialized",t[t.Initializing=1]="Initializing",t[t.Initialized=2]="Initialized"})(mM||(mM={}));var ZW=(0,Ae.memo)(function(e){var r,n,o,i;let{id:a,accessibility:s,autoScroll:u=!0,children:l,sensors:c=cOn,collisionDetection:d=OCn,measuring:f,modifiers:p,...m}=e,h=(0,Ae.useReducer)(hOn,void 0,mOn),[b,g]=h,[y,w]=_Cn(),[S,C]=(0,Ae.useState)(mM.Uninitialized),P=S===mM.Initialized,{draggable:{active:E,nodes:A,translate:I},droppable:{containers:R}}=b,j=E!=null?A.get(E):null,N=(0,Ae.useRef)({initial:null,translated:null}),$=(0,Ae.useMemo)(()=>{var Xa;return E!=null?{id:E,data:(Xa=j?.data)!=null?Xa:dOn,rect:N}:null},[E,j]),k=(0,Ae.useRef)(null),[H,V]=(0,Ae.useState)(null),[Q,G]=(0,Ae.useState)(null),D=sz(m,Object.values(m)),B=DD("DndDescribedBy",a),q=(0,Ae.useMemo)(()=>R.getEnabled(),[R]),K=bOn(f),{droppableRects:U,measureDroppableContainers:te,measuringScheduled:z}=XCn(q,{dragging:P,dependencies:[I.x,I.y],config:K.droppable}),W=YCn(A,E),Y=(0,Ae.useMemo)(()=>Q?Wce(Q):null,[Q]),ae=bb(),we=QCn(W,K.draggable.measure);_On({activeNode:E!=null?A.get(E):null,config:ae.layoutShiftCompensation,initialRect:we,measure:K.draggable.measure});let de=V6t(W,K.draggable.measure,we),Ue=V6t(W?W.parentElement:null),Ve=(0,Ae.useRef)({activatorEvent:null,active:null,activeNode:W,collisionRect:null,collisions:null,droppableRects:U,draggableNodes:A,draggingNode:null,draggingNodeRect:null,droppableContainers:R,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),rt=R.getNodeFor((r=Ve.current.over)==null?void 0:r.id),lr=lOn({measure:K.dragOverlay.measure}),bn=(n=lr.nodeRef.current)!=null?n:W,Le=P?(o=lr.rect)!=null?o:de:null,gt=!!(lr.nodeRef.current&&lr.rect),vt=rOn(gt?null:de),pt=l5t(bn?Kf(bn):null),ee=nOn(P?rt??W:null),et=sOn(ee),Re=yOn(p,{transform:{x:I.x-vt.x,y:I.y-vt.y,scaleX:1,scaleY:1},activatorEvent:Q,active:$,activeNodeRect:de,containerNodeRect:Ue,draggingNodeRect:Le,over:Ve.current.over,overlayNodeRect:lr.rect,scrollableAncestors:ee,scrollableAncestorRects:et,windowRect:pt}),Pe=Y?LD(Y,I):null,oe=oOn(ee),se=K6t(oe),le=K6t(oe,[de]),Oe=LD(Re,se),Je=Le?TCn(Le,Re):null,nr=$&&Je?d({active:$,collisionRect:Je,droppableRects:U,droppableContainers:q,pointerCoordinates:Pe}):null,Ji=oke(nr,"id"),[Ni,cc]=(0,Ae.useState)(null),cd=gt?Re:LD(Re,le),Di=PCn(cd,(i=Ni?.rect)!=null?i:null,de),Jf=(0,Ae.useRef)(null),rf=(0,Ae.useCallback)((Xa,Is)=>{let{sensor:Aa,options:af}=Is;if(k.current==null)return;let dd=A.get(k.current);if(!dd)return;let ps=Xa.nativeEvent,Yf=new Aa({active:k.current,activeNode:dd,event:ps,options:af,context:Ve,onAbort(Pn){if(!A.get(Pn))return;let{onDragAbort:uf}=D.current,em={id:Pn};uf?.(em),y({type:"onDragAbort",event:em})},onPending(Pn,Ye,uf,em){if(!A.get(Pn))return;let{onDragPending:Bx}=D.current,Cn={id:Pn,constraint:Ye,initialCoordinates:uf,offset:em};Bx?.(Cn),y({type:"onDragPending",event:Cn})},onStart(Pn){let Ye=k.current;if(Ye==null)return;let uf=A.get(Ye);if(!uf)return;let{onDragStart:em}=D.current,cl={activatorEvent:ps,active:{id:Ye,data:uf.data,rect:N}};(0,$D.unstable_batchedUpdates)(()=>{em?.(cl),C(mM.Initializing),g({type:Ml.DragStart,initialCoordinates:Pn,active:Ye}),y({type:"onDragStart",event:cl}),V(Jf.current),G(ps)})},onMove(Pn){g({type:Ml.DragMove,coordinates:Pn})},onEnd:sf(Ml.DragEnd),onCancel:sf(Ml.DragCancel)});Jf.current=Yf;function sf(Pn){return async function(){let{active:uf,collisions:em,over:cl,scrollAdjustedTranslate:Bx}=Ve.current,Cn=null;if(uf&&Bx){let{cancelDrop:Ug}=D.current;Cn={activatorEvent:ps,active:uf,collisions:em,delta:Bx,over:cl},Pn===Ml.DragEnd&&typeof Ug=="function"&&await Promise.resolve(Ug(Cn))&&(Pn=Ml.DragCancel)}k.current=null,(0,$D.unstable_batchedUpdates)(()=>{g({type:Pn}),C(mM.Uninitialized),cc(null),V(null),G(null),Jf.current=null;let Ug=Pn===Ml.DragEnd?"onDragEnd":"onDragCancel";if(Cn){let pz=D.current[Ug];pz?.(Cn),y({type:Ug,event:Cn})}})}}},[A]),nf=(0,Ae.useCallback)((Xa,Is)=>(Aa,af)=>{let dd=Aa.nativeEvent,ps=A.get(af);if(k.current!==null||!ps||dd.dndKit||dd.defaultPrevented)return;let Yf={active:ps};Xa(Aa,Is.options,Yf)===!0&&(dd.dndKit={capturedBy:Is.sensor},k.current=af,rf(Aa,Is))},[A,rf]),_n=ZCn(c,nf);iOn(c),kg(()=>{de&&S===mM.Initializing&&C(mM.Initialized)},[de,S]),(0,Ae.useEffect)(()=>{let{onDragMove:Xa}=D.current,{active:Is,activatorEvent:Aa,collisions:af,over:dd}=Ve.current;if(!Is||!Aa)return;let ps={active:Is,activatorEvent:Aa,collisions:af,delta:{x:Oe.x,y:Oe.y},over:dd};(0,$D.unstable_batchedUpdates)(()=>{Xa?.(ps),y({type:"onDragMove",event:ps})})},[Oe.x,Oe.y]),(0,Ae.useEffect)(()=>{let{active:Xa,activatorEvent:Is,collisions:Aa,droppableContainers:af,scrollAdjustedTranslate:dd}=Ve.current;if(!Xa||k.current==null||!Is||!dd)return;let{onDragOver:ps}=D.current,Yf=af.get(Ji),sf=Yf&&Yf.rect.current?{id:Yf.id,rect:Yf.rect.current,data:Yf.data,disabled:Yf.disabled}:null,Pn={active:Xa,activatorEvent:Is,collisions:Aa,delta:{x:dd.x,y:dd.y},over:sf};(0,$D.unstable_batchedUpdates)(()=>{cc(sf),ps?.(Pn),y({type:"onDragOver",event:Pn})})},[Ji]),kg(()=>{Ve.current={activatorEvent:Q,active:$,activeNode:W,collisionRect:Je,collisions:nr,droppableRects:U,draggableNodes:A,draggingNode:bn,draggingNodeRect:Le,droppableContainers:R,over:Ni,scrollableAncestors:ee,scrollAdjustedTranslate:Oe},N.current={initial:Le,translated:Je}},[$,W,nr,Je,A,bn,Le,U,R,Ni,ee,Oe]),KCn({...ae,delta:I,draggingRect:Je,pointerCoordinates:Pe,scrollableAncestors:ee,scrollableAncestorRects:et});let of=(0,Ae.useMemo)(()=>({active:$,activeNode:W,activeNodeRect:de,activatorEvent:Q,collisions:nr,containerNodeRect:Ue,dragOverlay:lr,draggableNodes:A,droppableContainers:R,droppableRects:U,over:Ni,measureDroppableContainers:te,scrollableAncestors:ee,scrollableAncestorRects:et,measuringConfiguration:K,measuringScheduled:z,windowRect:pt}),[$,W,de,Q,nr,Ue,lr,A,R,U,Ni,te,ee,et,K,z,pt]),$x=(0,Ae.useMemo)(()=>({activatorEvent:Q,activators:_n,active:$,activeNodeRect:de,ariaDescribedById:{draggable:B},dispatch:g,draggableNodes:A,over:Ni,measureDroppableContainers:te}),[Q,_n,$,de,g,B,A,Ni,te]);return Ae.default.createElement(Y6t.Provider,{value:w},Ae.default.createElement(Xce.Provider,{value:$x},Ae.default.createElement(c5t.Provider,{value:of},Ae.default.createElement(d5t.Provider,{value:Di},l)),Ae.default.createElement(gOn,{disabled:s?.restoreFocus===!1})),Ae.default.createElement(SCn,{...s,hiddenTextDescribedById:B}));function bb(){let Xa=H?.autoScrollEnabled===!1,Is=typeof u=="object"?u.enabled===!1:u===!1,Aa=P&&!Xa&&!Is;return typeof u=="object"?{...u,enabled:Aa}:{enabled:Aa}}}),vOn=(0,Ae.createContext)(null),J6t="button",wOn="Draggable";function f5t(t){let{id:e,data:r,disabled:n=!1,attributes:o}=t,i=DD(wOn),{activators:a,activatorEvent:s,active:u,activeNodeRect:l,ariaDescribedById:c,draggableNodes:d,over:f}=(0,Ae.useContext)(Xce),{role:p=J6t,roleDescription:m="draggable",tabIndex:h=0}=o??{},b=u?.id===e,g=(0,Ae.useContext)(b?d5t:vOn),[y,w]=zW(),[S,C]=zW(),P=aOn(a,e),E=sz(r);kg(()=>(d.set(e,{id:e,key:i,node:y,activatorNode:S,data:E}),()=>{let I=d.get(e);I&&I.key===i&&d.delete(e)}),[d,e]);let A=(0,Ae.useMemo)(()=>({role:p,tabIndex:h,"aria-disabled":n,"aria-pressed":b&&p===J6t?!0:void 0,"aria-roledescription":m,"aria-describedby":c.draggable}),[n,p,h,b,m,c.draggable]);return{active:u,activatorEvent:s,activeNodeRect:l,attributes:A,isDragging:b,listeners:n?void 0:P,node:y,over:f,setNodeRef:w,setActivatorNodeRef:C,transform:g}}function p5t(){return(0,Ae.useContext)(c5t)}var SOn="Droppable",xOn={timeout:25};function m5t(t){let{data:e,disabled:r=!1,id:n,resizeObserverConfig:o}=t,i=DD(SOn),{active:a,dispatch:s,over:u,measureDroppableContainers:l}=(0,Ae.useContext)(Xce),c=(0,Ae.useRef)({disabled:r}),d=(0,Ae.useRef)(!1),f=(0,Ae.useRef)(null),p=(0,Ae.useRef)(null),{disabled:m,updateMeasurementsFor:h,timeout:b}={...xOn,...o},g=sz(h??n),y=(0,Ae.useCallback)(()=>{if(!d.current){d.current=!0;return}p.current!=null&&clearTimeout(p.current),p.current=setTimeout(()=>{l(Array.isArray(g.current)?g.current:[g.current]),p.current=null},b)},[b]),w=Zce({callback:y,disabled:m||!a}),S=(0,Ae.useCallback)((A,I)=>{w&&(I&&(w.unobserve(I),d.current=!1),A&&w.observe(A))},[w]),[C,P]=zW(S),E=sz(e);return(0,Ae.useEffect)(()=>{!w||!C.current||(w.disconnect(),d.current=!1,w.observe(C.current))},[C,w]),(0,Ae.useEffect)(()=>(s({type:Ml.RegisterDroppable,element:{id:n,key:i,disabled:r,node:C,rect:f,data:E}}),()=>s({type:Ml.UnregisterDroppable,key:i,id:n})),[n]),(0,Ae.useEffect)(()=>{r!==c.current.disabled&&(s({type:Ml.SetDroppableDisabled,id:n,key:i,disabled:r}),c.current.disabled=r)},[n,i,r,s]),{active:a,rect:f,isOver:u?.id===n,node:C,over:u,setNodeRef:P}}var Ts=F(X());function rde(t,e,r){let n=t.slice();return n.splice(r<0?n.length+r:r,0,n.splice(e,1)[0]),n}function COn(t,e){return t.reduce((r,n,o)=>{let i=e.get(n);return i&&(r[o]=i),r},Array(t.length))}function Qce(t){return t!==null&&t>=0}function OOn(t,e){if(t===e)return!0;if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}function POn(t){return typeof t=="boolean"?{draggable:t,droppable:t}:t}var h5t=t=>{let{rects:e,activeIndex:r,overIndex:n,index:o}=t,i=rde(e,n,r),a=e[o],s=i[o];return!s||!a?null:{x:s.left-a.left,y:s.top-a.top,scaleX:s.width/a.width,scaleY:s.height/a.height}};var ede={scaleX:1,scaleY:1},XW=t=>{var e;let{activeIndex:r,activeNodeRect:n,index:o,rects:i,overIndex:a}=t,s=(e=i[r])!=null?e:n;if(!s)return null;if(o===r){let l=i[a];return l?{x:0,y:r<a?l.top+l.height-(s.top+s.height):l.top-s.top,...ede}:null}let u=EOn(i,o,r);return o>r&&o<=a?{x:0,y:-s.height-u,...ede}:o<r&&o>=a?{x:0,y:s.height+u,...ede}:{x:0,y:0,...ede}};function EOn(t,e,r){let n=t[e],o=t[e-1],i=t[e+1];return n?r<e?o?n.top-(o.top+o.height):i?i.top-(n.top+n.height):0:i?i.top-(n.top+n.height):o?n.top-(o.top+o.height):0:0}var g5t="Sortable",y5t=Ts.default.createContext({activeIndex:-1,containerId:g5t,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:h5t,disabled:{draggable:!1,droppable:!1}});function QW(t){let{children:e,id:r,items:n,strategy:o=h5t,disabled:i=!1}=t,{active:a,dragOverlay:s,droppableRects:u,over:l,measureDroppableContainers:c}=p5t(),d=DD(g5t,r),f=s.rect!==null,p=(0,Ts.useMemo)(()=>n.map(P=>typeof P=="object"&&"id"in P?P.id:P),[n]),m=a!=null,h=a?p.indexOf(a.id):-1,b=l?p.indexOf(l.id):-1,g=(0,Ts.useRef)(p),y=!OOn(p,g.current),w=b!==-1&&h===-1||y,S=POn(i);kg(()=>{y&&m&&c(p)},[y,p,m,c]),(0,Ts.useEffect)(()=>{g.current=p},[p]);let C=(0,Ts.useMemo)(()=>({activeIndex:h,containerId:d,disabled:S,disableTransforms:w,items:p,overIndex:b,useDragOverlay:f,sortedRects:COn(p,u),strategy:o}),[h,d,S.draggable,S.droppable,w,p,b,u,f,o]);return Ts.default.createElement(y5t.Provider,{value:C},e)}var TOn=t=>{let{id:e,items:r,activeIndex:n,overIndex:o}=t;return rde(r,n,o).indexOf(e)},AOn=t=>{let{containerId:e,isSorting:r,wasDragging:n,index:o,items:i,newIndex:a,previousItems:s,previousContainerId:u,transition:l}=t;return!l||!n||s!==i&&o===a?!1:r?!0:a!==o&&e===u},IOn={duration:200,easing:"ease"},b5t="transform",MOn=fb.Transition.toString({property:b5t,duration:0,easing:"linear"}),ROn={roleDescription:"sortable"};function jOn(t){let{disabled:e,index:r,node:n,rect:o}=t,[i,a]=(0,Ts.useState)(null),s=(0,Ts.useRef)(r);return kg(()=>{if(!e&&r!==s.current&&n.current){let u=o.current;if(u){let l=UD(n.current,{ignoreTransform:!0}),c={x:u.left-l.left,y:u.top-l.top,scaleX:u.width/l.width,scaleY:u.height/l.height};(c.x||c.y)&&a(c)}}r!==s.current&&(s.current=r)},[e,r,n,o]),(0,Ts.useEffect)(()=>{i&&a(null)},[i]),i}function e9(t){let{animateLayoutChanges:e=AOn,attributes:r,disabled:n,data:o,getNewIndex:i=TOn,id:a,strategy:s,resizeObserverConfig:u,transition:l=IOn}=t,{items:c,containerId:d,activeIndex:f,disabled:p,disableTransforms:m,sortedRects:h,overIndex:b,useDragOverlay:g,strategy:y}=(0,Ts.useContext)(y5t),w=NOn(n,p),S=c.indexOf(a),C=(0,Ts.useMemo)(()=>({sortable:{containerId:d,index:S,items:c},...o}),[d,o,S,c]),P=(0,Ts.useMemo)(()=>c.slice(c.indexOf(a)),[c,a]),{rect:E,node:A,isOver:I,setNodeRef:R}=m5t({id:a,data:C,disabled:w.droppable,resizeObserverConfig:{updateMeasurementsFor:P,...u}}),{active:j,activatorEvent:N,activeNodeRect:$,attributes:k,setNodeRef:H,listeners:V,isDragging:Q,over:G,setActivatorNodeRef:D,transform:B}=f5t({id:a,data:C,attributes:{...ROn,...r},disabled:w.draggable}),q=M6t(R,H),K=!!j,U=K&&!m&&Qce(f)&&Qce(b),te=!g&&Q,z=te&&U?B:null,Y=U?z??(s??y)({rects:h,activeNodeRect:$,activeIndex:f,overIndex:b,index:S}):null,ae=Qce(f)&&Qce(b)?i({id:a,items:c,activeIndex:f,overIndex:b}):S,we=j?.id,de=(0,Ts.useRef)({activeId:we,items:c,newIndex:ae,containerId:d}),Ue=c!==de.current.items,Ve=e({active:j,containerId:d,isDragging:Q,isSorting:K,id:a,index:S,items:c,newIndex:de.current.newIndex,previousItems:de.current.items,previousContainerId:de.current.containerId,transition:l,wasDragging:de.current.activeId!=null}),rt=jOn({disabled:!Ve,index:S,node:A,rect:E});return(0,Ts.useEffect)(()=>{K&&de.current.newIndex!==ae&&(de.current.newIndex=ae),d!==de.current.containerId&&(de.current.containerId=d),c!==de.current.items&&(de.current.items=c)},[K,ae,d,c]),(0,Ts.useEffect)(()=>{if(we===de.current.activeId)return;if(we!=null&&de.current.activeId==null){de.current.activeId=we;return}let bn=setTimeout(()=>{de.current.activeId=we},50);return()=>clearTimeout(bn)},[we]),{active:j,activeIndex:f,attributes:k,data:C,rect:E,index:S,newIndex:ae,items:c,isOver:I,isSorting:K,isDragging:Q,listeners:V,node:A,overIndex:b,over:G,setNodeRef:q,setActivatorNodeRef:D,setDroppableNodeRef:R,setDraggableNodeRef:H,transform:rt??Y,transition:lr()};function lr(){if(rt||Ue&&de.current.newIndex===S)return MOn;if(!(te&&!HW(N)||!l)&&(K||Ve))return fb.Transition.toString({...l,property:b5t})}}function NOn(t,e){var r,n;return typeof t=="boolean"?{draggable:t,droppable:!1}:{draggable:(r=t?.draggable)!=null?r:e.draggable,droppable:(n=t?.droppable)!=null?n:e.droppable}}function tde(t){if(!t)return!1;let e=t.data.current;return!!(e&&"sortable"in e&&typeof e.sortable=="object"&&"containerId"in e.sortable&&"items"in e.sortable&&"index"in e.sortable)}var DOn=[Nn.Down,Nn.Right,Nn.Up,Nn.Left],nde=(t,e)=>{let{context:{active:r,collisionRect:n,droppableRects:o,droppableContainers:i,over:a,scrollableAncestors:s}}=e;if(DOn.includes(t.code)){if(t.preventDefault(),!r||!n)return;let u=[];i.getEnabled().forEach(d=>{if(!d||d!=null&&d.disabled)return;let f=o.get(d.id);if(f)switch(t.code){case Nn.Down:n.top<f.top&&u.push(d);break;case Nn.Up:n.top>f.top&&u.push(d);break;case Nn.Left:n.left>f.left&&u.push(d);break;case Nn.Right:n.left<f.left&&u.push(d);break}});let l=Q6t({active:r,collisionRect:n,droppableRects:o,droppableContainers:u,pointerCoordinates:null}),c=oke(l,"id");if(c===a?.id&&l.length>1&&(c=l[1].id),c!=null){let d=i.get(r.id),f=i.get(c),p=f?o.get(f.id):null,m=f?.node.current;if(m&&p&&d&&f){let b=YW(m).some((P,E)=>s[E]!==P),g=_5t(d,f),y=LOn(d,f),w=b||!g?{x:0,y:0}:{x:y?n.width-p.width:0,y:y?n.height-p.height:0},S={x:p.left,y:p.top};return w.x&&w.y?S:FD(S,w)}}}};function _5t(t,e){return!tde(t)||!tde(e)?!1:t.data.current.sortable.containerId===e.data.current.sortable.containerId}function LOn(t,e){return!tde(t)||!tde(e)||!_5t(t,e)?!1:t.data.current.sortable.index<e.data.current.sortable.index}tr();tr();C2();var ode=F(X()),ike=(0,ode.createContext)(null),t9=()=>(0,ode.useContext)(ike);var s9=require("obsidian");var w5t=require("obsidian");var Wo=F(X()),S5t=F(wc());tr();Ko();var Lx=F(X());function v5t(){return Lx.default.createElement("ul",{className:"tw-m-0 tw-px-4 tw-text-sm"},Lx.default.createElement("li",null,Lx.default.createElement("span",{className:"tw-font-medium tw-text-accent"},"{}")," represents the selected text."),Lx.default.createElement("li",null,Lx.default.createElement("span",{className:"tw-font-medium tw-text-accent"},"{[[Note Title]]}")," represents a note."),Lx.default.createElement("li",null,Lx.default.createElement("span",{className:"tw-font-medium tw-text-accent"},"{activeNote}")," represents the active note."),Lx.default.createElement("li",null,Lx.default.createElement("span",{className:"tw-font-medium tw-text-accent"},"{#tag1, #tag2}")," represents ALL notes with ANY of the specified tags in their property (an OR operation)."))}function FOn({commands:t,command:e,onConfirm:r,onCancel:n}){let i=Tn().activeModels.filter(f=>f.enabled).map(f=>({label:Dle(f),value:Fr(f)})),[a,s]=(0,Wo.useState)(e),[u,l]=(0,Wo.useState)({}),c=(f,p)=>{s(m=>({...m,[f]:p})),l(m=>({...m,[f]:void 0}))},d=()=>{let f={},p=aU(a.title,t,e.title);if(p&&(f.title=p),a.content.trim()||(f.content="Prompt is required"),Object.keys(f).length>0){l(f);return}r(a)};return Wo.default.createElement("div",{className:"tw-flex tw-flex-col tw-gap-4 tw-p-4"},Wo.default.createElement("div",{className:"tw-flex tw-flex-col tw-gap-2"},Wo.default.createElement(Hf,{htmlFor:"title"},"Name"),Wo.default.createElement(so,{id:"title",value:a.title,onChange:f=>c("title",f.target.value),placeholder:"Enter command name"}),u.title&&Wo.default.createElement("div",{className:"tw-text-sm tw-text-error"},u.title)),Wo.default.createElement("div",{className:"tw-flex tw-flex-col tw-gap-2"},Wo.default.createElement(Hf,{htmlFor:"content"},"Prompt"),Wo.default.createElement(v5t,null),Wo.default.createElement(KP,{id:"content",value:a.content,onChange:f=>c("content",f.target.value),placeholder:"Enter command prompt",className:"tw-min-h-[200px]"}),u.content&&Wo.default.createElement("div",{className:"tw-text-sm tw-text-error"},u.content)),Wo.default.createElement("div",{className:"tw-flex tw-flex-col tw-gap-2"},Wo.default.createElement(Hf,{htmlFor:"modelKey"},"Model (Optional)"),Wo.default.createElement("div",{className:"tw-group tw-relative tw-w-full"},Wo.default.createElement("select",{value:a.modelKey,onChange:f=>{let p=f.target.value;if(!p){c("modelKey","");return}if(!i.find(h=>h.value===p)){fe(`Model ${p} not found`),c("modelKey","");return}c("modelKey",f.target.value)},className:_e("tw-w-full tw-appearance-none","tw-flex tw-h-9 tw-rounded-md tw-border tw-border-solid tw-border-border tw-bg-dropdown tw-px-3 tw-py-1 tw-pr-8","tw-text-sm !tw-shadow tw-transition-colors","focus:tw-outline-none focus:tw-ring-1 focus:tw-ring-ring","disabled:tw-cursor-not-allowed disabled:tw-opacity-50","hover:tw-bg-interactive-hover hover:tw-text-normal")},Wo.default.createElement("option",{value:""},"Inherit from chat model"),i.map(f=>Wo.default.createElement("option",{key:f.value,value:f.value.toString()},f.label))),Wo.default.createElement("div",{className:_e("tw-pointer-events-none tw-absolute tw-inset-y-0 tw-right-0 tw-flex tw-items-center tw-pr-2","tw-transition-colors group-hover:[&>svg]:tw-text-normal")},Wo.default.createElement(ki,{className:"tw-size-4"})))),Wo.default.createElement("div",{className:"tw-flex tw-items-center tw-gap-2"},Wo.default.createElement(sd,{id:"showInContextMenu",checked:a.showInContextMenu,onCheckedChange:f=>c("showInContextMenu",f)}),Wo.default.createElement(Hf,{htmlFor:"showInContextMenu"},"Show in context menu")),Wo.default.createElement("div",{className:"tw-flex tw-items-center tw-gap-2"},Wo.default.createElement(sd,{id:"showInSlashMenu",checked:a.showInSlashMenu,onCheckedChange:f=>c("showInSlashMenu",f)}),Wo.default.createElement(Hf,{htmlFor:"showInSlashMenu"},"Show in slash menu")),Wo.default.createElement("div",{className:"tw-flex tw-justify-end tw-gap-2"},Wo.default.createElement(ge,{variant:"secondary",onClick:n},"Cancel"),Wo.default.createElement(ge,{variant:"default",onClick:d},"Save")))}var ide=class extends w5t.Modal{constructor(r,n,o,i){super(r);this.commands=n;this.command=o;this.onUpdate=i;this.setTitle("Edit Command")}onOpen(){let{contentEl:r}=this;this.root=(0,S5t.createRoot)(r);let n=o=>{this.onUpdate(o),this.close()};this.root.render(Wo.default.createElement(FOn,{commands:this.commands,command:this.command,onConfirm:n,onCancel:()=>this.close()}))}onClose(){this.root.unmount()}};var pa=F(X());var rh=F(X());Ko();wn();function Fx({value:t,onChange:e,placeholder:r,disabled:n,className:o}){let[i,a]=(0,rh.useState)(!1),s=(0,rh.useRef)(null),u=(0,rh.useRef)(!0);return(0,rh.useEffect)(()=>{(async()=>{if(u.current&&t&&s.current){try{s.current.value=await Gn(t)}catch(c){fe("Failed to decrypt value:"+Go(c)),s.current.value=t}u.current=!1}else s.current&&(s.current.value=t||"")})()},[t]),rh.default.createElement("div",{className:_e("tw-relative",o)},rh.default.createElement(so,{ref:s,type:i?"text":"password",onChange:l=>e?.(l.target.value),placeholder:r,disabled:n,className:_e("tw-w-full !tw-pr-7")}),rh.default.createElement("div",{onClick:()=>!n&&a(!i),className:_e("tw-absolute tw-inset-y-0 tw-right-2 tw-flex tw-items-center tw-justify-center","tw-cursor-pointer",n&&"tw-cursor-not-allowed tw-opacity-50"),role:"button","aria-label":i?"Hide password":"Show password"},i?rh.default.createElement(I4,{className:_e("tw-size-3.5","tw-text-muted/60 hover:tw-text-accent","tw-transition-colors tw-duration-200")}):rh.default.createElement(MC,{className:_e("tw-size-3.5","tw-text-muted/60 hover:tw-text-accent","tw-transition-colors tw-duration-200")})))}var ld=F(X());var Gi=F(X(),1);function kx(t,e,{checkForDefaultPrevented:r=!0}={}){return function(o){if(t?.(o),r===!1||!o.defaultPrevented)return e?.(o)}}var C5t=F(X(),1);function x5t(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function ake(...t){return e=>{let r=!1,n=t.map(o=>{let i=x5t(o,e);return!r&&typeof i=="function"&&(r=!0),i});if(r)return()=>{for(let o=0;o<n.length;o++){let i=n[o];typeof i=="function"?i():x5t(t[o],null)}}}}function JP(...t){return C5t.useCallback(ake(...t),t)}var Za=F(X(),1);var O5t=F(X(),1),P5t=F(os(),1);var ud=F(X(),1);var cz=F(ft(),1),r9=ud.forwardRef((t,e)=>{let{children:r,...n}=t,o=ud.Children.toArray(r),i=o.find($On);if(i){let a=i.props.children,s=o.map(u=>u===i?ud.Children.count(a)>1?ud.Children.only(null):ud.isValidElement(a)?a.props.children:null:u);return(0,cz.jsx)(ske,{...n,ref:e,children:ud.isValidElement(a)?ud.cloneElement(a,void 0,s):null})}return(0,cz.jsx)(ske,{...n,ref:e,children:r})});r9.displayName="Slot";var ske=ud.forwardRef((t,e)=>{let{children:r,...n}=t;if(ud.isValidElement(r)){let o=qOn(r);return ud.cloneElement(r,{...BOn(n,r.props),ref:e?ake(e,o):o})}return ud.Children.count(r)>1?ud.Children.only(null):null});ske.displayName="SlotClone";var kOn=({children:t})=>(0,cz.jsx)(cz.Fragment,{children:t});function $On(t){return ud.isValidElement(t)&&t.type===kOn}function BOn(t,e){let r={...e};for(let n in e){let o=t[n],i=e[n];/^on[A-Z]/.test(n)?o&&i?r[n]=(...s)=>{i(...s),o(...s)}:o&&(r[n]=o):n==="style"?r[n]={...o,...i}:n==="className"&&(r[n]=[o,i].filter(Boolean).join(" "))}return{...t,...r}}function qOn(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,r=e&&"isReactWarning"in e&&e.isReactWarning;return r?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,r=e&&"isReactWarning"in e&&e.isReactWarning,r?t.props.ref:t.props.ref||t.ref)}var E5t=F(ft(),1),UOn=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],nh=UOn.reduce((t,e)=>{let r=O5t.forwardRef((n,o)=>{let{asChild:i,...a}=n,s=i?r9:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),(0,E5t.jsx)(s,{...a,ref:o})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function T5t(t,e){t&&P5t.flushSync(()=>t.dispatchEvent(e))}var lke=F(ft(),1),zOn="DismissableLayer",uke="dismissableLayer.update",HOn="dismissableLayer.pointerDownOutside",VOn="dismissableLayer.focusOutside",A5t,M5t=Za.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),cke=Za.forwardRef((t,e)=>{let{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:n,onPointerDownOutside:o,onFocusOutside:i,onInteractOutside:a,onDismiss:s,...u}=t,l=Za.useContext(M5t),[c,d]=Za.useState(null),f=c?.ownerDocument??globalThis?.document,[,p]=Za.useState({}),m=JP(e,E=>d(E)),h=Array.from(l.layers),[b]=[...l.layersWithOutsidePointerEventsDisabled].slice(-1),g=h.indexOf(b),y=c?h.indexOf(c):-1,w=l.layersWithOutsidePointerEventsDisabled.size>0,S=y>=g,C=GOn(E=>{let A=E.target,I=[...l.branches].some(R=>R.contains(A));!S||I||(o?.(E),a?.(E),E.defaultPrevented||s?.())},f),P=JOn(E=>{let A=E.target;[...l.branches].some(R=>R.contains(A))||(i?.(E),a?.(E),E.defaultPrevented||s?.())},f);return AI(E=>{y===l.layers.size-1&&(n?.(E),!E.defaultPrevented&&s&&(E.preventDefault(),s()))},f),Za.useEffect(()=>{if(c)return r&&(l.layersWithOutsidePointerEventsDisabled.size===0&&(A5t=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),l.layersWithOutsidePointerEventsDisabled.add(c)),l.layers.add(c),I5t(),()=>{r&&l.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=A5t)}},[c,f,r,l]),Za.useEffect(()=>()=>{c&&(l.layers.delete(c),l.layersWithOutsidePointerEventsDisabled.delete(c),I5t())},[c,l]),Za.useEffect(()=>{let E=()=>p({});return document.addEventListener(uke,E),()=>document.removeEventListener(uke,E)},[]),(0,lke.jsx)(nh.div,{...u,ref:m,style:{pointerEvents:w?S?"auto":"none":void 0,...t.style},onFocusCapture:kx(t.onFocusCapture,P.onFocusCapture),onBlurCapture:kx(t.onBlurCapture,P.onBlurCapture),onPointerDownCapture:kx(t.onPointerDownCapture,C.onPointerDownCapture)})});cke.displayName=zOn;var WOn="DismissableLayerBranch",KOn=Za.forwardRef((t,e)=>{let r=Za.useContext(M5t),n=Za.useRef(null),o=JP(e,n);return Za.useEffect(()=>{let i=n.current;if(i)return r.branches.add(i),()=>{r.branches.delete(i)}},[r.branches]),(0,lke.jsx)(nh.div,{...t,ref:o})});KOn.displayName=WOn;function GOn(t,e=globalThis?.document){let r=qr(t),n=Za.useRef(!1),o=Za.useRef(()=>{});return Za.useEffect(()=>{let i=s=>{if(s.target&&!n.current){let l=function(){R5t(HOn,r,c,{discrete:!0})};var u=l;let c={originalEvent:s};s.pointerType==="touch"?(e.removeEventListener("click",o.current),o.current=l,e.addEventListener("click",o.current,{once:!0})):l()}else e.removeEventListener("click",o.current);n.current=!1},a=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(a),e.removeEventListener("pointerdown",i),e.removeEventListener("click",o.current)}},[e,r]),{onPointerDownCapture:()=>n.current=!0}}function JOn(t,e=globalThis?.document){let r=qr(t),n=Za.useRef(!1);return Za.useEffect(()=>{let o=i=>{i.target&&!n.current&&R5t(VOn,r,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",o),()=>e.removeEventListener("focusin",o)},[e,r]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function I5t(){let t=new CustomEvent(uke);document.dispatchEvent(t)}function R5t(t,e,r,{discrete:n}){let o=r.originalEvent.target,i=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:r});e&&o.addEventListener(t,e,{once:!0}),n?T5t(o,i):o.dispatchEvent(i)}var Bg=F(X(),1);var F5t=F(ft(),1),dke="focusScope.autoFocusOnMount",fke="focusScope.autoFocusOnUnmount",j5t={bubbles:!1,cancelable:!0},YOn="FocusScope",pke=Bg.forwardRef((t,e)=>{let{loop:r=!1,trapped:n=!1,onMountAutoFocus:o,onUnmountAutoFocus:i,...a}=t,[s,u]=Bg.useState(null),l=qr(o),c=qr(i),d=Bg.useRef(null),f=JP(e,h=>u(h)),p=Bg.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;Bg.useEffect(()=>{if(n){let y=function(P){if(p.paused||!s)return;let E=P.target;s.contains(E)?d.current=E:yM(d.current,{select:!0})},w=function(P){if(p.paused||!s)return;let E=P.relatedTarget;E!==null&&(s.contains(E)||yM(d.current,{select:!0}))},S=function(P){if(document.activeElement===document.body)for(let A of P)A.removedNodes.length>0&&yM(s)};var h=y,b=w,g=S;document.addEventListener("focusin",y),document.addEventListener("focusout",w);let C=new MutationObserver(S);return s&&C.observe(s,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",y),document.removeEventListener("focusout",w),C.disconnect()}}},[n,s,p.paused]),Bg.useEffect(()=>{if(s){D5t.add(p);let h=document.activeElement;if(!s.contains(h)){let g=new CustomEvent(dke,j5t);s.addEventListener(dke,l),s.dispatchEvent(g),g.defaultPrevented||(ZOn(rPn(k5t(s)),{select:!0}),document.activeElement===h&&yM(s))}return()=>{s.removeEventListener(dke,l),setTimeout(()=>{let g=new CustomEvent(fke,j5t);s.addEventListener(fke,c),s.dispatchEvent(g),g.defaultPrevented||yM(h??document.body,{select:!0}),s.removeEventListener(fke,c),D5t.remove(p)},0)}}},[s,l,c,p]);let m=Bg.useCallback(h=>{if(!r&&!n||p.paused)return;let b=h.key==="Tab"&&!h.altKey&&!h.ctrlKey&&!h.metaKey,g=document.activeElement;if(b&&g){let y=h.currentTarget,[w,S]=XOn(y);w&&S?!h.shiftKey&&g===S?(h.preventDefault(),r&&yM(w,{select:!0})):h.shiftKey&&g===w&&(h.preventDefault(),r&&yM(S,{select:!0})):g===y&&h.preventDefault()}},[r,n,p.paused]);return(0,F5t.jsx)(nh.div,{tabIndex:-1,...a,ref:f,onKeyDown:m})});pke.displayName=YOn;function ZOn(t,{select:e=!1}={}){let r=document.activeElement;for(let n of t)if(yM(n,{select:e}),document.activeElement!==r)return}function XOn(t){let e=k5t(t),r=N5t(e,t),n=N5t(e.reverse(),t);return[r,n]}function k5t(t){let e=[],r=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{let o=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||o?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)e.push(r.currentNode);return e}function N5t(t,e){for(let r of t)if(!QOn(r,{upTo:e}))return r}function QOn(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function ePn(t){return t instanceof HTMLInputElement&&"select"in t}function yM(t,{select:e=!1}={}){if(t&&t.focus){let r=document.activeElement;t.focus({preventScroll:!0}),t!==r&&ePn(t)&&e&&t.select()}}var D5t=tPn();function tPn(){let t=[];return{add(e){let r=t[0];e!==r&&r?.pause(),t=L5t(t,e),t.unshift(e)},remove(e){t=L5t(t,e),t[0]?.resume()}}}function L5t(t,e){let r=[...t],n=r.indexOf(e);return n!==-1&&r.splice(n,1),r}function rPn(t){return t.filter(e=>e.tagName!=="A")}var ade=F(X(),1),$5t=F(os(),1);var B5t=F(ft(),1),nPn="Portal",mke=ade.forwardRef((t,e)=>{let{container:r,...n}=t,[o,i]=ade.useState(!1);zn(()=>i(!0),[]);let a=r||o&&globalThis?.document?.body;return a?$5t.default.createPortal((0,B5t.jsx)(nh.div,{...n,ref:e}),a):null});mke.displayName=nPn;var Ei=F(ft(),1),hke="Dialog",[q5t,ami]=Vi(hke),[oPn,mb]=q5t(hke),U5t=t=>{let{__scopeDialog:e,children:r,open:n,defaultOpen:o,onOpenChange:i,modal:a=!0}=t,s=Gi.useRef(null),u=Gi.useRef(null),[l=!1,c]=Gc({prop:n,defaultProp:o,onChange:i});return(0,Ei.jsx)(oPn,{scope:e,triggerRef:s,contentRef:u,contentId:il(),titleId:il(),descriptionId:il(),open:l,onOpenChange:c,onOpenToggle:Gi.useCallback(()=>c(d=>!d),[c]),modal:a,children:r})};U5t.displayName=hke;var z5t="DialogTrigger",H5t=Gi.forwardRef((t,e)=>{let{__scopeDialog:r,...n}=t,o=mb(z5t,r),i=JP(e,o.triggerRef);return(0,Ei.jsx)(nh.button,{type:"button","aria-haspopup":"dialog","aria-expanded":o.open,"aria-controls":o.contentId,"data-state":bke(o.open),...n,ref:i,onClick:kx(t.onClick,o.onOpenToggle)})});H5t.displayName=z5t;var gke="DialogPortal",[iPn,V5t]=q5t(gke,{forceMount:void 0}),W5t=t=>{let{__scopeDialog:e,forceMount:r,children:n,container:o}=t,i=mb(gke,e);return(0,Ei.jsx)(iPn,{scope:e,forceMount:r,children:Gi.Children.map(n,a=>(0,Ei.jsx)(Xc,{present:r||i.open,children:(0,Ei.jsx)(mke,{asChild:!0,container:o,children:a})}))})};W5t.displayName=gke;var sde="DialogOverlay",K5t=Gi.forwardRef((t,e)=>{let r=V5t(sde,t.__scopeDialog),{forceMount:n=r.forceMount,...o}=t,i=mb(sde,t.__scopeDialog);return i.modal?(0,Ei.jsx)(Xc,{present:n||i.open,children:(0,Ei.jsx)(aPn,{...o,ref:e})}):null});K5t.displayName=sde;var aPn=Gi.forwardRef((t,e)=>{let{__scopeDialog:r,...n}=t,o=mb(sde,r);return(0,Ei.jsx)(DW,{as:r9,allowPinchZoom:!0,shards:[o.contentRef],children:(0,Ei.jsx)(nh.div,{"data-state":bke(o.open),...n,ref:e,style:{pointerEvents:"auto",...n.style}})})}),zD="DialogContent",G5t=Gi.forwardRef((t,e)=>{let r=V5t(zD,t.__scopeDialog),{forceMount:n=r.forceMount,...o}=t,i=mb(zD,t.__scopeDialog);return(0,Ei.jsx)(Xc,{present:n||i.open,children:i.modal?(0,Ei.jsx)(sPn,{...o,ref:e}):(0,Ei.jsx)(uPn,{...o,ref:e})})});G5t.displayName=zD;var sPn=Gi.forwardRef((t,e)=>{let r=mb(zD,t.__scopeDialog),n=Gi.useRef(null),o=JP(e,r.contentRef,n);return Gi.useEffect(()=>{let i=n.current;if(i)return zI(i)},[]),(0,Ei.jsx)(J5t,{...t,ref:o,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:kx(t.onCloseAutoFocus,i=>{i.preventDefault(),r.triggerRef.current?.focus()}),onPointerDownOutside:kx(t.onPointerDownOutside,i=>{let a=i.detail.originalEvent,s=a.button===0&&a.ctrlKey===!0;(a.button===2||s)&&i.preventDefault()}),onFocusOutside:kx(t.onFocusOutside,i=>i.preventDefault())})}),uPn=Gi.forwardRef((t,e)=>{let r=mb(zD,t.__scopeDialog),n=Gi.useRef(!1),o=Gi.useRef(!1);return(0,Ei.jsx)(J5t,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{t.onCloseAutoFocus?.(i),i.defaultPrevented||(n.current||r.triggerRef.current?.focus(),i.preventDefault()),n.current=!1,o.current=!1},onInteractOutside:i=>{t.onInteractOutside?.(i),i.defaultPrevented||(n.current=!0,i.detail.originalEvent.type==="pointerdown"&&(o.current=!0));let a=i.target;r.triggerRef.current?.contains(a)&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&o.current&&i.preventDefault()}})}),J5t=Gi.forwardRef((t,e)=>{let{__scopeDialog:r,trapFocus:n,onOpenAutoFocus:o,onCloseAutoFocus:i,...a}=t,s=mb(zD,r),u=Gi.useRef(null),l=JP(e,u);return II(),(0,Ei.jsxs)(Ei.Fragment,{children:[(0,Ei.jsx)(pke,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:o,onUnmountAutoFocus:i,children:(0,Ei.jsx)(cke,{role:"dialog",id:s.contentId,"aria-describedby":s.descriptionId,"aria-labelledby":s.titleId,"data-state":bke(s.open),...a,ref:l,onDismiss:()=>s.onOpenChange(!1)})}),(0,Ei.jsxs)(Ei.Fragment,{children:[(0,Ei.jsx)(lPn,{titleId:s.titleId}),(0,Ei.jsx)(dPn,{contentRef:u,descriptionId:s.descriptionId})]})]})}),yke="DialogTitle",Y5t=Gi.forwardRef((t,e)=>{let{__scopeDialog:r,...n}=t,o=mb(yke,r);return(0,Ei.jsx)(nh.h2,{id:o.titleId,...n,ref:e})});Y5t.displayName=yke;var Z5t="DialogDescription",X5t=Gi.forwardRef((t,e)=>{let{__scopeDialog:r,...n}=t,o=mb(Z5t,r);return(0,Ei.jsx)(nh.p,{id:o.descriptionId,...n,ref:e})});X5t.displayName=Z5t;var Q5t="DialogClose",eWt=Gi.forwardRef((t,e)=>{let{__scopeDialog:r,...n}=t,o=mb(Q5t,r);return(0,Ei.jsx)(nh.button,{type:"button",...n,ref:e,onClick:kx(t.onClick,()=>o.onOpenChange(!1))})});eWt.displayName=Q5t;function bke(t){return t?"open":"closed"}var tWt="DialogTitleWarning",[smi,rWt]=yBt(tWt,{contentName:zD,titleName:yke,docsSlug:"dialog"}),lPn=({titleId:t})=>{let e=rWt(tWt),r=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return Gi.useEffect(()=>{t&&(document.getElementById(t)||console.error(r))},[r,t]),null},cPn="DialogDescriptionWarning",dPn=({contentRef:t,descriptionId:e})=>{let n=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${rWt(cPn).contentName}}.`;return Gi.useEffect(()=>{let o=t.current?.getAttribute("aria-describedby");e&&o&&(document.getElementById(e)||console.warn(n))},[n,t,e]),null},nWt=U5t,oWt=H5t,iWt=W5t,_ke=K5t,vke=G5t,wke=Y5t,Ske=X5t,aWt=eWt;var ude=nWt,sWt=oWt,pPn=iWt;var uWt=ld.forwardRef(({className:t,...e},r)=>ld.createElement(_ke,{ref:r,className:_e("tw-fixed tw-inset-0 tw-z-modal data-[state=open]:tw-animate-in data-[state=closed]:tw-animate-out data-[state=closed]:tw-fade-out-0 data-[state=open]:tw-fade-in-0","tw-bg-overlay/50",t),...e}));uWt.displayName=_ke.displayName;var n9=ld.forwardRef(({className:t,children:e,container:r,...n},o)=>ld.createElement(pPn,{container:r},ld.createElement(uWt,null),ld.createElement(vke,{ref:o,className:_e("tw-fixed tw-left-1/2 tw-top-1/2 tw-z-modal tw-grid tw-w-full tw-max-w-lg -tw-translate-x-1/2 -tw-translate-y-1/2 tw-gap-4 tw-border tw-bg-primary tw-p-6 tw-shadow-lg tw-duration-200 data-[state=open]:tw-animate-in data-[state=closed]:tw-animate-out data-[state=closed]:tw-fade-out-0 data-[state=open]:tw-fade-in-0 data-[state=closed]:tw-zoom-out-95 data-[state=open]:tw-zoom-in-95 data-[state=closed]:tw-slide-out-to-left-1/2 data-[state=closed]:tw-slide-out-to-top-[48%] data-[state=open]:tw-slide-in-from-left-1/2 data-[state=open]:tw-slide-in-from-top-[48%] sm:tw-rounded-lg",t),...n},e,ld.createElement(aWt,{className:"clickable-icon tw-absolute tw-right-4 tw-top-4 tw-border-none tw-bg-transparent tw-text-faint tw-outline-none hover:tw-bg-transparent hover:tw-bg-opacity-100 hover:tw-text-normal focus-visible:tw-text-normal focus-visible:tw-outline-none focus-visible:tw-ring-0"},ld.createElement($i,{className:"tw-size-4"}),ld.createElement("span",{className:"tw-sr-only"},"Close")))));n9.displayName=vke.displayName;var o9=({className:t,...e})=>ld.createElement("div",{className:_e("tw-flex tw-flex-col tw-space-y-0.5 tw-text-center sm:tw-text-left",t),...e});o9.displayName="DialogHeader";var mPn=({className:t,...e})=>ld.createElement("div",{className:_e("tw-flex tw-flex-col-reverse sm:tw-flex-row sm:tw-justify-end sm:tw-space-x-2",t),...e});mPn.displayName="DialogFooter";var i9=ld.forwardRef(({className:t,...e},r)=>ld.createElement(wke,{ref:r,className:_e("tw-mt-0 tw-text-lg tw-font-semibold tw-leading-none tw-tracking-tight",t),...e}));i9.displayName=wke.displayName;var a9=ld.forwardRef(({className:t,...e},r)=>ld.createElement(Ske,{ref:r,className:_e("tw-text-sm tw-text-muted",t),...e}));a9.displayName=Ske.displayName;wn();function pn(t){let{title:e,description:r,className:n,disabled:o}=t,{modalContainer:i}=nz(),a="onChange"in t?t.onChange:void 0,s=(0,pa.useMemo)(()=>{if(a)return sG(l=>{a(l)},1e3)},[a]),u=()=>{switch(t.type){case"text":case"number":return pa.default.createElement(so,{type:t.type,defaultValue:t.value,onChange:l=>{s?.(l.target.value)},placeholder:t.placeholder,disabled:o,className:"tw-w-full sm:tw-w-[200px]"});case"password":return pa.default.createElement(Fx,{value:t.value!==void 0?String(t.value):void 0,onChange:l=>{s?.(l)},placeholder:t.placeholder,disabled:o,className:"tw-w-full sm:tw-w-[200px]"});case"textarea":return pa.default.createElement(KP,{defaultValue:t.value,onChange:l=>{s?.(l.target.value)},placeholder:t.placeholder,rows:t.rows||3,disabled:o,className:"tw-min-h-[80px] tw-w-full sm:tw-w-[300px]"});case"switch":return pa.default.createElement(SU,{checked:t.checked,onCheckedChange:t.onCheckedChange,disabled:o});case"select":return pa.default.createElement("div",{className:"tw-group tw-relative tw-w-full sm:tw-w-[200px]"},pa.default.createElement("select",{value:t.value?.toString(),onChange:l=>t.onChange?.(l.target.value),disabled:o,className:_e("tw-w-full tw-appearance-none","tw-flex tw-h-9 tw-rounded-md tw-border tw-border-solid tw-border-border tw-bg-dropdown tw-px-3 tw-py-1 tw-pr-8","tw-text-sm !tw-shadow tw-transition-colors","focus:tw-outline-none focus:tw-ring-1 focus:tw-ring-ring","disabled:tw-cursor-not-allowed disabled:tw-opacity-50","hover:tw-bg-interactive-hover hover:tw-text-normal")},t.placeholder&&pa.default.createElement("option",{value:"",disabled:!0},t.placeholder),t.options.map(l=>pa.default.createElement("option",{key:l.value,value:l.value.toString()},l.label))),pa.default.createElement("div",{className:_e("tw-pointer-events-none tw-absolute tw-inset-y-0 tw-right-0 tw-flex tw-items-center tw-pr-2","tw-transition-colors group-hover:[&>svg]:tw-text-normal",o&&"tw-opacity-50")},pa.default.createElement(ki,{className:"tw-size-4"})));case"slider":return pa.default.createElement(Dx,{value:t.value||0,onChange:t.onChange,min:t.min,max:t.max,step:t.step,disabled:o,className:"tw-w-full sm:tw-w-[300px]"});case"dialog":return pa.default.createElement(ude,null,pa.default.createElement(sWt,{asChild:!0},t.trigger),pa.default.createElement(n9,{container:i},(t.dialogTitle||t.dialogDescription)&&pa.default.createElement(o9,null,t.dialogTitle&&pa.default.createElement(i9,null,t.dialogTitle),t.dialogDescription&&pa.default.createElement(a9,null,t.dialogDescription)),t.children));case"custom":return t.children}};return pa.default.createElement("div",{className:_e("tw-flex tw-flex-col tw-items-start tw-justify-between tw-gap-4 tw-py-4 sm:tw-flex-row sm:tw-items-center","tw-w-full",n)},pa.default.createElement("div",{className:"tw-w-full tw-space-y-1.5 sm:tw-w-[300px]"},pa.default.createElement("div",{className:"tw-text-sm tw-font-medium tw-leading-none"},e),r&&pa.default.createElement("div",{className:"tw-text-xs tw-text-muted"},r)),pa.default.createElement("div",{className:"tw-w-full tw-flex-1 sm:tw-flex sm:tw-justify-end"},u()))}tr();function hPn(t){let r=`${CI()}/unsupported`;return app.vault.getAbstractFileByPath(r)||app.vault.createFolder(r),Promise.all(t.map(async o=>{let i=`${r}/${o.title}.md`,a=await app.vault.create(i,o.content);await app.fileManager.processFrontMatter(a,s=>{s[KN]=o.showInContextMenu,s[GN]=o.showInSlashMenu,s[JN]=o.order,s[YN]=o.modelKey,s[ZN]=0})}))}async function lWt(){let t=ue().inlineEditCommands;if(!t||t.length===0)return;let e=[],r=[],n=Px(),o=t.map((a,s)=>({title:a.name,content:a.prompt,showInContextMenu:a.showInContextMenu,showInSlashMenu:!1,order:s*10,modelKey:a.modelKey??"",lastUsedMs:0}));for(let a of o){let s=aU(a.title,n);s?r.push({...a,title:encodeURIComponent(a.title),content:`> ${s} 

Original name: ${a.title} 

${a.content}`}):e.push(a)}await Yp.getInstance().updateCommands([...n.map(a=>({...a,showInSlashMenu:!0})),...e]);let i=`We have upgraded your commands to the new format. They are now also stored as notes in ${CI()}.`;r.length>0&&(await hPn(r),i+=`

We found ${r.length} unsupported commands. They are saved in ${CI()}/unsupported. To fix them, please resolve the errors and move the note file out of the unsupported folder.`),dt("inlineEditCommands",[]),new Kc(app,()=>{},i,"\u{1F680} New Copilot Custom Commands","OK","").open()}async function xke(){let t=Px(),e=dBt.filter(n=>!t.some(o=>o.title===n.title)),r=[...t,...e];Yp.getInstance().updateCommands(r)}async function cWt(){if(ue().suggestedDefaultCommands)return;Px().length===0&&(new Kc(app,()=>{xke()},"Would you like to add Copilot recommended commands in your custom prompts folder? These commands will be available through the right-click context menu and slash commands in chat.","Welcome to Copilot","Confirm","Skip").open(),dt("suggestedDefaultCommands",!0))}var gPn=({command:t,commands:e,onUpdate:r,onRemove:n})=>{let{attributes:o,listeners:i,setNodeRef:a,transform:s,transition:u,isDragging:l}=e9({id:t.title}),c={transform:fb.Transform.toString(s),transition:u},d=()=>{n(t)};return it.default.createElement(dM,{ref:a,style:c,className:_e("tw-transition-colors",l&&"tw-relative tw-z-[100] tw-cursor-grabbing tw-shadow-lg tw-backdrop-blur-sm tw-border-accent/50")},it.default.createElement(tf,{className:"tw-w-10"},it.default.createElement("div",{...o,...i,className:"tw-flex tw-cursor-grab tw-items-center tw-justify-center"},it.default.createElement(Vb,{className:"tw-size-4"}))),it.default.createElement(tf,null,t.title),it.default.createElement(tf,{className:"tw-text-center"},it.default.createElement(sd,{checked:t.showInContextMenu,onCheckedChange:f=>{r({...t,showInContextMenu:f===!0},t.title)},className:"tw-mx-auto"})),it.default.createElement(tf,{className:"tw-text-center"},it.default.createElement(sd,{checked:t.showInSlashMenu,onCheckedChange:f=>r({...t,showInSlashMenu:f===!0},t.title),className:"tw-mx-auto"})),it.default.createElement(tf,{className:"tw-text-center"},it.default.createElement("div",{className:"tw-flex tw-justify-center tw-space-x-1"},it.default.createElement(ge,{variant:"ghost",size:"icon",onClick:()=>{new ide(app,e,t,async p=>{await r(p,t.title)}).open()}},it.default.createElement(Kb,{className:"tw-size-4"})),it.default.createElement(ge,{variant:"ghost",size:"icon",onClick:()=>{new Kc(app,d,`Are you sure you want to delete the command "${t.title}"? This will permanently remove the command file and cannot be undone.`,"Delete Command","Delete","Cancel").open()}},it.default.createElement(bm,{className:"tw-size-4"})))))},dWt=()=>{let t=fBt(),e=(0,it.useMemo)(()=>D5([...t]),[t]),[r,n]=it.default.useState(""),o=Tn(),i=Yce(lz(gM,{activationConstraint:{distance:8}}),lz(hM,{coordinateGetter:nde})),a=aU(r,e),s=!a&&r.trim()!=="",u=async()=>{if(s)try{await Yp.getInstance().createCommand(r.trim(),""),n(""),new s9.Notice(`Command "${r.trim()}" created successfully!`)}catch(p){console.error("Failed to create command:",p),new s9.Notice("Failed to create command. Please try again.")}},l=async(p,m)=>{await Yp.getInstance().updateCommand(p,m)},c=async p=>{try{await Yp.getInstance().deleteCommand(p),new s9.Notice(`Command "${p.title}" deleted successfully!`)}catch(m){throw console.error("Failed to delete command:",m),new s9.Notice("Failed to delete command. Please try again."),m}},d=async p=>{let{active:m,over:h}=p;if(!h||m.id===h.id)return;let b=e.findIndex(S=>S.title===m.id),g=e.findIndex(S=>S.title===h.id);if(b===-1||g===-1)return;let y=[...e],[w]=y.splice(b,1);y.splice(g,0,w);for(let S=0;S<y.length;S++)y[S]={...y[S],order:S*10};await Yp.getInstance().updateCommands(y)},f=t9();return it.default.createElement("div",{className:"tw-space-y-4"},it.default.createElement("section",null,it.default.createElement("div",{className:"tw-mb-4 tw-flex tw-flex-col tw-gap-2"},it.default.createElement("div",{className:"tw-text-xl tw-font-bold"},"Custom Commands"),it.default.createElement("div",{className:"tw-text-sm tw-text-muted"},"Custom commands are preset prompts that you can trigger in the editor by right-clicking and selecting them from the context menu or by using a ",it.default.createElement("code",null,"/")," command in the chat to load them into your chat input.")),it.default.createElement(pn,{type:"text",title:"Custom Prompts Folder Name",description:"Folder where custom prompts are stored",value:o.customPromptsFolder,onChange:p=>{dt("customPromptsFolder",p),Vue()},placeholder:"copilot-custom-prompts"}),it.default.createElement(pn,{type:"switch",title:"Custom Prompt Templating",description:"Process variables like {activenote}, {foldername}, or {#tag} in prompts. Disable for raw prompts.",checked:o.enableCustomPromptTemplating,onCheckedChange:p=>{dt("enableCustomPromptTemplating",p)}}),it.default.createElement(pn,{type:"select",title:"Custom Prompts Sort Strategy",description:"Sort order for slash command menu prompts",value:o.promptSortStrategy,onChange:p=>dt("promptSortStrategy",p),options:[{label:"Recency",value:"timestamp"},{label:"Alphabetical",value:"alphabetical"},{label:"Manual",value:"manual"}]}),it.default.createElement("div",{className:"tw-flex tw-items-start tw-gap-2 tw-rounded-md tw-border tw-border-solid tw-border-border tw-p-4 tw-text-muted"},it.default.createElement(RC,{className:"tw-size-5"})," ",it.default.createElement("div",null,"Commands are automatically loaded from .md files in your custom prompts folder"," ",it.default.createElement("strong",null,o.customPromptsFolder),". Modifying the files will also update the command settings.")),it.default.createElement("div",{className:"tw-flex tw-flex-col tw-gap-4"},it.default.createElement(ZW,{sensors:i,collisionDetection:JW,onDragEnd:d},it.default.createElement($W,null,it.default.createElement(BW,null,it.default.createElement(dM,null,it.default.createElement(Wf,{className:"tw-w-10"}),it.default.createElement(Wf,null,"Name"),it.default.createElement(Wf,{className:"tw-w-24 tw-text-center"},it.default.createElement("div",{className:"tw-flex tw-items-center tw-justify-center tw-gap-1"},"In Menu",it.default.createElement(po,null,it.default.createElement(Mt,null,it.default.createElement(Rt,{asChild:!0},it.default.createElement(Wb,{className:"tw-size-4"})),it.default.createElement(It,{className:"tw-max-w-xs tw-text-xs"},"If enabled, the command will be available in the context menu when you right-click in the editor."))))),it.default.createElement(Wf,{className:"tw-w-28 tw-text-center"},it.default.createElement("div",{className:"tw-flex tw-items-center tw-justify-center tw-gap-1"},"Slash Cmd",it.default.createElement(po,null,it.default.createElement(Mt,null,it.default.createElement(Rt,{asChild:!0},it.default.createElement(Wb,{className:"tw-size-4"})),it.default.createElement(It,{className:"tw-max-w-xs tw-text-xs"},"If enabled, the command will be available as a slash command in the chat."))))),it.default.createElement(Wf,{className:"tw-w-32 tw-text-center"},"Actions"))),it.default.createElement(QW,{items:e.map(p=>p.title),strategy:XW},it.default.createElement(qW,null,e.length===0?it.default.createElement(dM,null,it.default.createElement(tf,{colSpan:5,className:"tw-py-8 tw-text-center tw-text-muted"},"No custom prompt files found.")):e.map(p=>it.default.createElement(gPn,{key:p.title,command:p,commands:e,onUpdate:l,onRemove:c})))))),it.default.createElement("div",{className:"tw-flex tw-w-full tw-justify-between"},it.default.createElement("div",null,it.default.createElement(ge,{variant:"secondary",onClick:()=>new Kc(app,xke,"This will add default commands to your custom prompts folder. Do you want to continue?","Generate Default Commands").open()},"Generate Default Commands")),it.default.createElement(Zle,null,it.default.createElement(Xle,{asChild:!0},it.default.createElement(ge,{variant:"default",className:"tw-gap-2"},it.default.createElement(ym,{className:"tw-size-4"}),"Add Command")),it.default.createElement(_W,{container:f,className:"tw-w-80",align:"end"},it.default.createElement("div",{className:"tw-flex tw-flex-col tw-gap-4"},it.default.createElement("div",{className:"tw-space-y-2"},it.default.createElement("div",{className:"tw-text-lg tw-font-medium tw-leading-none"},"Create New Command"),it.default.createElement("p",{className:"tw-text-sm tw-text-muted"},"Enter a name for your new custom command. A markdown file will be created in your custom prompts folder.")),it.default.createElement("div",{className:"tw-space-y-2"},it.default.createElement(so,{placeholder:"Command name",value:r,onChange:p=>n(p.target.value),onKeyDown:p=>{p.key==="Enter"&&s&&u()}}),a&&it.default.createElement("p",{className:"tw-text-sm tw-text-error"},a)),it.default.createElement("div",{className:"tw-flex tw-justify-end tw-gap-2"},it.default.createElement(CLe,{asChild:!0},it.default.createElement(ge,{variant:"secondary",size:"sm",onClick:()=>{n("")}},"Cancel")),it.default.createElement(CLe,{asChild:!0},it.default.createElement(ge,{size:"sm",onClick:u,disabled:!s},"Create"))))))))))};var Dn=F(X());tr();var HD=F(X()),fWt=()=>{let t=Tn();return HD.default.createElement("div",{className:"tw-space-y-4"},HD.default.createElement("section",null,HD.default.createElement(pn,{type:"textarea",title:"User System Prompt",description:"Customize the system prompt for all messages, may result in unexpected behavior!",value:t.userSystemPrompt,onChange:e=>dt("userSystemPrompt",e),placeholder:"Enter your system prompt here..."}),HD.default.createElement("div",{className:"tw-space-y-4"},HD.default.createElement(pn,{type:"switch",title:"Enable Encryption",description:"Enable encryption for the API keys.",checked:t.enableEncryption,onCheckedChange:e=>{dt("enableEncryption",e)}}),HD.default.createElement(pn,{type:"switch",title:"Debug Mode",description:"Debug mode will log some debug message to the console.",checked:t.debug,onCheckedChange:e=>{dt("debug",e)}}))))};xd();var dz=class extends Kc{constructor(e,r){super(e,r,"Changing this setting means you have to rebuild the index for your entire vault, do you wish to proceed?","Rebuild Index")}};kr();tr();var ll=F(X()),pWt=require("obsidian"),mWt=F(wc());tr();function yPn({onConfirm:t,onCancel:e}){let r=ue();return ll.default.createElement("div",{className:"tw-flex tw-flex-col tw-gap-4"},ll.default.createElement("div",null,ll.default.createElement("p",null,"Thanks for purchasing ",ll.default.createElement("b",null,"Copilot Plus"),"! You have unlocked the full power of Copilot, featuring chat context, PDF and image support, exclusive chat and embedding models, and much more!"),ll.default.createElement("p",null,"Would you like to apply the Copilot Plus settings now? You can always change this later in Settings."),ll.default.createElement("ul",{className:"tw-pl-4"},ll.default.createElement("li",null,"Default mode: ",ll.default.createElement("b",{className:"tw-text-accent"},"Copilot Plus")),ll.default.createElement("li",null,"Chat model: ",ll.default.createElement("b",{className:"tw-text-accent"},BAe)),ll.default.createElement("li",null,ll.default.createElement("div",null,"Embedding model:"," ",ll.default.createElement("b",{className:"tw-text-accent"},qAe)),r.embeddingModelKey!==UAe&&ll.default.createElement("div",{className:"tw-flex tw-items-center tw-gap-1 tw-text-sm tw-text-warning"},ll.default.createElement(Ef,{className:"tw-size-4"})," It will rebuild your embeddings for the entire vault")))),ll.default.createElement("div",{className:"tw-flex tw-w-full tw-justify-end tw-gap-2"},ll.default.createElement(ge,{variant:"ghost",onClick:e},"Apply Later"),ll.default.createElement(ge,{variant:"default",onClick:t},"Apply Now")))}var lde=class extends pWt.Modal{constructor(e){super(e),this.setTitle("Welcome to Copilot Plus \u{1F680}")}onOpen(){let{contentEl:e}=this;this.root=(0,mWt.createRoot)(e);let r=()=>{tEt(),this.close()},n=()=>{this.close()};this.root.render(ll.default.createElement(yPn,{onConfirm:r,onCancel:n}))}onClose(){this.root.unmount()}};kr();tr();var As=F(X());function hWt(){let t=Tn(),[e,r]=(0,As.useState)(null),[n,o]=(0,As.useState)(!1),i=DB(),[a,s]=(0,As.useState)(t.plusLicenseKey);return(0,As.useEffect)(()=>{s(t.plusLicenseKey)},[t.plusLicenseKey]),As.default.createElement("section",{className:"tw-flex tw-flex-col tw-gap-4 tw-rounded-lg tw-bg-secondary tw-p-4"},As.default.createElement("div",{className:"tw-flex tw-items-center tw-justify-between tw-gap-2 tw-text-xl tw-font-bold"},As.default.createElement("span",null,"Copilot Plus (beta)"),i&&As.default.createElement(Zp,{variant:"outline",className:"tw-text-success"},"Active")),As.default.createElement("div",{className:"tw-flex tw-flex-col tw-gap-2 tw-text-sm tw-text-muted"},As.default.createElement("div",null,"Copilot Plus takes your Obsidian experience to the next level with cutting-edge AI capabilities. This premium tier unlocks advanced features, including chat context, PDF and image support, web search integration, exclusive chat and embedding models, and much more."),As.default.createElement("div",null,"Currently in beta, Copilot Plus is evolving fast, with new features and improvements rolling out regularly. Join now to secure the lowest price and get early access!")),As.default.createElement("div",{className:"tw-flex tw-items-center tw-gap-2"},As.default.createElement(Fx,{className:"tw-w-full",placeholder:"Enter your license key",value:a,onChange:u=>{s(u)}}),As.default.createElement(ge,{disabled:n,onClick:async()=>{dt("plusLicenseKey",a),o(!0);let u=await zne();o(!1),u?(r(null),new lde(app).open()):r("Invalid license key")},className:"tw-min-w-20"},n?As.default.createElement($l,{className:"tw-size-4 tw-animate-spin"}):"Apply"),As.default.createElement(ge,{variant:"secondary",onClick:()=>LR(mC.SETTINGS)},"Join Now ",As.default.createElement(IR,{className:"tw-size-4"}))),As.default.createElement("div",{className:"tw-text-error"},e))}wn();var fz=require("obsidian"),Ge=F(X());kr();Ko();tr();kr();var bPn={openai:t=>t.data?.map(e=>({id:e.id,name:e.id,provider:"openai"}))||[],google:t=>t.models?.map(e=>{let r=e.name.split("models/")?.[1];return{id:r,name:r,provider:"google"}})||[],anthropic:t=>t.data?.map(e=>({id:e.id,name:e.id,provider:"anthropic"}))||[],mistralai:t=>t.data?.map(e=>({id:e.id,name:e.id,provider:"mistralai"}))||[],cohereai:t=>t.models?.map(e=>({id:e.name,name:e.name,provider:"cohereai"}))||[],deepseek:t=>t.data?.map(e=>({id:e.id,name:e.id,provider:"deepseek"}))||[],groq:t=>t.data?.map(e=>({id:e.id,name:e.id,provider:"groq"}))||[],xai:t=>t.data?.map(e=>({id:e.id,name:e.id,provider:"xai"}))||[],openrouterai:t=>t.data?.map(e=>({id:e.id,name:e.id,provider:"openrouterai"}))||[]},_Pn=t=>e=>e.data&&Array.isArray(e.data)?e.data.map(r=>({id:r.id||r.name||String(Math.random()),name:r.name||r.id||r.display_name||"Unknown Model",provider:t})):e.models&&Array.isArray(e.models)?e.models.map(r=>({id:r.id||r.name||String(Math.random()),name:r.name||r.displayName||r.id||"Unknown Model",provider:t})):Array.isArray(e)?e.map(r=>({id:r.id||r.name||String(Math.random()),name:r.name||r.id||"Unknown Model",provider:t})):[],vPn=t=>bPn[t]||_Pn(t),gWt=(t,e)=>{let r=vPn(t);try{return r(e)}catch(n){return console.error(`Error parsing ${t} model data:`,n),[]}};wn();var hb=require("obsidian"),zt=F(X()),yWt=F(wc());function wPn({onClose:t}){let e=Tn(),[r,n]=(0,zt.useState)(new Set),[o,i]=(0,zt.useState)(new Set),[a,s]=(0,zt.useState)(null),[u,l]=(0,zt.useState)({}),[c,d]=(0,zt.useState)(null),[f,p]=(0,zt.useState)(null),[m,h]=(0,zt.useState)(null),[b,g]=(0,zt.useState)(!1),y=(0,zt.useRef)(o);(0,zt.useEffect)(()=>{y.current=o},[o]),(0,zt.useEffect)(()=>(i(new Set),s(null),h(null),()=>{y.current.forEach(I=>{let R=jb[I];dt(R,"")})}),[]);let w=I=>{let R=jb[I];return e[R]??""},S=Dme().map(I=>{let R=I,j=w(R);return{provider:R,apiKey:j,isVerified:!!j&&!o.has(R)}}),C=(I,R)=>{w(I)!==R&&(dt(jb[I],R),i(N=>new Set(N).add(I)),l(N=>({...N,[I]:void 0})),p(N=>N===I?null:N))},P=async(I,R)=>{n(j=>new Set(j).add(I));try{ie(`Verifying ${I} API key`);let j=Rb(I).testModel;if(!j){new hb.Notice("API key verification failed: No default test model found for the selected provider.",1e4);return}let N={name:j,provider:I,apiKey:R,enabled:!0};await Kl.instance.getCurrentChainManager().chatModelManager.ping(N),new hb.Notice("API key verified successfully!"),i($=>{let k=new Set($);return k.delete(I),k})}catch(j){console.error("API key verification failed:",j),new hb.Notice("API key verification failed: "+Go(j),1e4)}finally{n(j=>{let N=new Set(j);return N.delete(I),N})}},E=async(I,R)=>{d(I),p(null);try{R=await Gn(R);let j=Rb(I).listModelURL,N={Authorization:`Bearer ${R}`};I==="google"?(j+=`?key=${R}`,N={}):I==="anthropic"&&(N={"x-api-key":R,"anthropic-version":"2023-06-01"});let $=async Q=>{let G=new AbortController,D=setTimeout(()=>G.abort(),3e3);try{let B=await(Q?js:fetch)(j,{headers:N,signal:G.signal,method:"GET"});if(!B.ok){let q=Go(await B.json());throw fe(q),new Error(`Failed to fetch models: ${B.statusText} 
 detail: `+q)}return B}finally{clearTimeout(D)}},k;try{k=await $(!1)}catch(Q){console.log("First fetch attempt failed, trying with safeFetch...");try{k=await $(!0)}catch(G){let D=`
without CORS Error: `+Go(Q)+`
with CORS Error: `+Go(G);throw new Error(D)}}let H=await k.json(),V=gWt(I,H);l(Q=>({...Q,[I]:V})),d(null)}catch(j){console.error(`Error fetching models for ${I}:`,j),p(I),d(null),new hb.Notice(`Failed to load models for ${xf(I)}: ${Go(j)}`,5e3)}},A=async()=>{if(!m){new hb.Notice("Please select a model first");return}g(!0);try{let I=w(m.provider),R={name:m.name,provider:m.provider,apiKey:I,enabled:!0};if(await Kl.instance.getCurrentChainManager().chatModelManager.ping(R),e.activeModels.find(N=>N.name===m.name&&N.provider===m.provider))new hb.Notice(`Model ${m.name} verified successfully! It already exists in your models list.`);else{let N=[...e.activeModels,R];dt("activeModels",N),new hb.Notice(`Model ${m.name} verified successfully and added to your models list!`)}}catch(I){console.error("Model verification failed:",I),new hb.Notice("Model verification failed: "+Go(I),1e4)}finally{g(!1)}};return zt.default.createElement("div",{className:"tw-max-h-[600px] tw-overflow-y-auto tw-p-4 sm:tw-max-w-[500px]"},zt.default.createElement("div",{className:"tw-mb-4"},zt.default.createElement("h2",{className:"tw-text-xl tw-font-bold"},"AI Provider Settings"),zt.default.createElement("p",{className:"tw-text-sm tw-text-muted"},"Configure your AI providers by adding their API keys.")),zt.default.createElement("div",{className:"tw-space-y-6 tw-py-4"},zt.default.createElement("div",{className:"tw-space-y-4"},S.map(I=>zt.default.createElement(zt.default.Fragment,{key:I.provider},zt.default.createElement("div",{className:"tw-flex tw-flex-col tw-gap-2"},zt.default.createElement("div",{className:"tw-flex tw-items-end tw-gap-2 tw-font-medium"},zt.default.createElement("div",{className:"tw-truncate"},xf(I.provider))),zt.default.createElement("div",{className:"tw-flex tw-flex-row tw-items-center tw-gap-2"},zt.default.createElement("div",{className:"tw-flex-1"},zt.default.createElement(Fx,{className:"tw-max-w-full",value:I.apiKey,onChange:R=>C(I.provider,R),disabled:r.has(I.provider)})),zt.default.createElement("div",{className:"tw-w-[72px]"},I.isVerified?zt.default.createElement("span",{className:"tw-flex tw-h-9 tw-items-center tw-justify-center tw-text-sm tw-text-success"},"Verified"):zt.default.createElement(ge,{onClick:()=>P(I.provider,I.apiKey),disabled:!I.apiKey||r.size>0,variant:"secondary",size:"sm",className:"tw-w-full tw-whitespace-nowrap"},r.has(I.provider)?zt.default.createElement($l,{className:"tw-mr-2 tw-size-4 tw-animate-spin"}):"Verify")),zt.default.createElement("div",{className:""},zt.default.createElement(ge,{onClick:()=>{let R=a===I.provider?null:I.provider;s(R),R&&I.apiKey&&u[I.provider]===void 0&&c!==I.provider&&f!==I.provider&&E(I.provider,I.apiKey)},disabled:!I.apiKey||r.size>0,variant:"secondary",size:"sm",className:"tw-flex tw-w-full tw-items-center tw-justify-center tw-gap-1 tw-whitespace-nowrap tw-p-0.5"},"Add Model",a===I.provider?zt.default.createElement(sy,{className:"tw-ml-1 tw-size-4"}):zt.default.createElement(ki,{className:"tw-ml-1 tw-size-4"})))),zt.default.createElement("div",null,Rb(I.provider).keyManagementURL&&zt.default.createElement("a",{href:Rb(I.provider).keyManagementURL,target:"_blank",rel:"noopener noreferrer",className:"tw-text-[10px] tw-text-accent hover:tw-text-accent-hover sm:tw-text-xs"},"Get ",xf(I.provider)," Key"))),zt.default.createElement(BP,{open:a===I.provider,className:"tw-mt-2"},zt.default.createElement(qP,{className:"tw-rounded-md tw-p-3"},zt.default.createElement("div",{className:"tw-flex tw-flex-col tw-gap-2"},zt.default.createElement(Hn,{label:"Model",description:"Add the currently selected model to model List. After adding, please check the Model Tab."},zt.default.createElement("div",null,zt.default.createElement("div",{className:"tw-flex tw-items-center tw-gap-2"},zt.default.createElement("div",{className:"tw-flex-1"},zt.default.createElement(Pce,{options:u[I.provider]?.sort((R,j)=>R.name.localeCompare(j.name)).map(R=>({label:R.name,value:R.id}))||[],onChange:R=>{let j=R.target.value,N=u[I.provider]?.find($=>$.id===j);N&&h({id:N.id,name:N.name,provider:I.provider})},onClick:()=>{I.apiKey&&u[I.provider]===void 0&&c!==I.provider&&f!==I.provider&&E(I.provider,I.apiKey)},value:m?.provider===I.provider?m.id:"",placeholder:"Select Model",disabled:!I.apiKey||c===I.provider||f===I.provider&&u[I.provider]!==null})),zt.default.createElement("div",{className:"tw-w-[72px]"},zt.default.createElement(ge,{onClick:A,disabled:!m||m.provider!==I.provider||b,variant:"secondary",size:"sm",className:"tw-w-full tw-whitespace-nowrap"},b?zt.default.createElement($l,{className:"tw-mr-2 tw-size-4 tw-animate-spin"}):"Add"))),zt.default.createElement("div",{className:"tw-mt-1 tw-text-xs"},c===I.provider&&zt.default.createElement("div",{className:"tw-p-1 tw-text-muted"},"Loading models..."),f===I.provider&&zt.default.createElement("div",{className:"tw-p-1 tw-text-error"},"Failed to load models.",u[I.provider]===null&&" Check API Key or network."),u[I.provider]&&u[I.provider].length===0&&zt.default.createElement("div",{className:"tw-p-1 tw-text-muted"},"No models available for this provider."),u[I.provider]===void 0&&f!==I.provider&&c!==I.provider&&zt.default.createElement("div",{className:"tw-p-1 tw-text-muted"},"Click to load models or expand to try again if API key was changed."))))))))))),zt.default.createElement("div",{className:"tw-mt-4 tw-flex tw-justify-end"},zt.default.createElement(ge,{onClick:t},"Close")))}var cde=class extends hb.Modal{constructor(e){super(e)}onOpen(){let{contentEl:e}=this;this.root=(0,yWt.createRoot)(e),this.root.render(zt.default.createElement(wPn,{onClose:()=>this.close()}))}onClose(){this.root.unmount()}};var xPn={llm_chain:"Chat",vault_qa:"Vault QA (Basic)",copilot_plus:"Copilot Plus (beta)",project:"Projects (alpha)"},bWt=()=>{let t=Tn(),[e,r]=(0,Ge.useState)(!1),[n,o]=(0,Ge.useState)(t.defaultConversationNoteName||"{$date}_{$time}__{$topic}"),i=async l=>{l!==t.embeddingModelKey&&new dz(app,async()=>{dt("embeddingModelKey",l),await qi.getInstance().indexVaultToVectorStore(!0)}).open()},a=()=>{r(!0);try{let l=n||"{$date}_{$time}__{$topic}",d=["{$date}","{$time}","{$topic}"].filter(g=>!l.includes(g));if(d.length>0){new fz.Notice(`Error: Missing required variables: ${d.join(", ")}`,4e3);return}let f=/[\\/:*?"<>|]/,p=l.replace(/\{\$date}/g,"").replace(/\{\$time}/g,"").replace(/\{\$topic}/g,"");if(f.test(p)){new fz.Notice('Error: Format contains illegal characters (\\/:*?"<>|)',4e3);return}let{fileName:m}=Nl(new Date),b=l.replace("{$topic}","test topic name".slice(0,100).replace(/\s+/g,"_")).replace("{$date}",m.split("_")[0]).replace("{$time}",m.split("_")[1]);dt("defaultConversationNoteName",l),o(l),new fz.Notice(`Format applied successfully! Example: ${b}`,4e3)}catch(l){new fz.Notice(`Error applying format: ${l.message}`,4e3)}finally{r(!1)}},s=!!t.activeModels.find(l=>l.enabled&&Fr(l)===t.defaultModelKey),u=t.activeModels.filter(l=>l.enabled).map(l=>({label:iW(l),value:Fr(l)}));return Ge.default.createElement("div",{className:"tw-space-y-4"},Ge.default.createElement(hWt,null),Ge.default.createElement("section",null,Ge.default.createElement("div",{className:"tw-mb-3 tw-text-xl tw-font-bold"},"General"),Ge.default.createElement("div",{className:"tw-space-y-4"},Ge.default.createElement("div",{className:"tw-space-y-4"},Ge.default.createElement(pn,{type:"custom",title:"API Keys",description:Ge.default.createElement("div",{className:"tw-flex tw-items-center tw-gap-1.5"},Ge.default.createElement("span",{className:"tw-leading-none"},"Configure API keys for different AI providers"),Ge.default.createElement(po,{delayDuration:0},Ge.default.createElement(Mt,null,Ge.default.createElement(Rt,{asChild:!0},Ge.default.createElement(oi,{className:"tw-size-4"})),Ge.default.createElement(It,{className:"tw-flex tw-max-w-96 tw-flex-col tw-gap-2 tw-py-4"},Ge.default.createElement("div",{className:"tw-text-sm tw-font-medium tw-text-accent"},"API key required for chat and QA features"),Ge.default.createElement("div",{className:"tw-text-xs tw-text-muted"},"To enable chat and QA functionality, please provide an API key from your selected provider.")))))},Ge.default.createElement(ge,{onClick:()=>{new cde(app).open()},variant:"secondary",className:"tw-flex tw-w-full tw-items-center tw-justify-center tw-gap-2 sm:tw-w-auto sm:tw-justify-start"},"Set Keys",Ge.default.createElement($4,{className:"tw-size-4"})))),Ge.default.createElement(pn,{type:"select",title:"Default Chat Model",description:"Select the Chat model to use",value:s?t.defaultModelKey:"Select Model",onChange:l=>{let c=t.activeModels.find(p=>p.enabled&&Fr(p)===l);if(!c)return;let{hasApiKey:d,errorNotice:f}=RL(c,t);if(!d&&f){new fz.Notice(f);return}dt("defaultModelKey",l)},options:s?u:[{label:"Select Model",value:"Select Model"},...u],placeholder:"Model"}),Ge.default.createElement(pn,{type:"select",title:"Embedding Model",description:Ge.default.createElement("div",{className:"tw-space-y-2"},Ge.default.createElement("div",{className:"tw-flex tw-items-center tw-gap-1.5"},Ge.default.createElement("span",{className:"tw-font-medium tw-leading-none tw-text-accent"},"Core Feature: Powers Semantic Search & QA"),Ge.default.createElement(po,{delayDuration:0},Ge.default.createElement(Mt,null,Ge.default.createElement(Rt,{asChild:!0},Ge.default.createElement(oi,{className:"tw-size-4"})),Ge.default.createElement(It,{className:"tw-flex tw-max-w-96 tw-flex-col tw-gap-2"},Ge.default.createElement("div",{className:"tw-pt-2 tw-text-sm tw-text-muted"},"This model converts text into vector representations, essential for semantic search and QA functionality. Changing the embedding model will:"),Ge.default.createElement("ul",{className:"tw-pl-4 tw-text-sm tw-text-muted"},Ge.default.createElement("li",null,"Require rebuilding your vault's vector index"),Ge.default.createElement("li",null,"Affect semantic search quality"),Ge.default.createElement("li",null,"Impact QA feature performance"))))))),value:t.embeddingModelKey,onChange:i,options:t.activeEmbeddingModels.map(l=>({label:iW(l),value:Fr(l)})),placeholder:"Model"}),Ge.default.createElement(pn,{type:"select",title:"Default Mode",description:Ge.default.createElement("div",{className:"tw-flex tw-items-center tw-gap-1.5"},Ge.default.createElement("span",{className:"tw-leading-none"},"Select the default chat mode"),Ge.default.createElement(po,{delayDuration:0},Ge.default.createElement(Mt,null,Ge.default.createElement(Rt,{asChild:!0},Ge.default.createElement(oi,{className:"tw-size-4"})),Ge.default.createElement(It,{className:"tw-flex tw-max-w-96 tw-flex-col tw-gap-2"},Ge.default.createElement("ul",{className:"tw-pl-4 tw-text-sm tw-text-muted"},Ge.default.createElement("li",null,Ge.default.createElement("strong",null,"Chat:")," Regular chat mode for general conversations and tasks. ",Ge.default.createElement("i",null,"Free to use with your own API key.")),Ge.default.createElement("li",null,Ge.default.createElement("strong",null,"Vault QA (Basic):")," Ask questions about your vault content with semantic search. ",Ge.default.createElement("i",null,"Free to use with your own API key.")),Ge.default.createElement("li",null,Ge.default.createElement("strong",null,"Copilot Plus:")," Covers all features of the 2 free modes, plus advanced paid features including chat context menu, advanced search, AI agents, and more. Check out"," ",Ge.default.createElement("a",{href:zAe(mC.MODE_SELECT_TOOLTIP),target:"_blank",rel:"noopener noreferrer",className:"tw-text-accent hover:tw-text-accent-hover"},"obsidiancopilot.com")," ","for more details.")))))),value:t.defaultChainType,onChange:l=>dt("defaultChainType",l),options:Object.entries(xPn).map(([l,c])=>({label:c,value:l}))}),Ge.default.createElement(pn,{type:"select",title:"Open Plugin In",description:"Choose where to open the plugin",value:t.defaultOpenArea,onChange:l=>dt("defaultOpenArea",l),options:[{label:"Sidebar View",value:"view"},{label:"Editor",value:"editor"}]}),Ge.default.createElement(pn,{type:"text",title:"Default Conversation Folder Name",description:"The default folder name where chat conversations will be saved. Default is 'copilot-conversations'",value:t.defaultSaveFolder,onChange:l=>dt("defaultSaveFolder",l),placeholder:"copilot-conversations"}),Ge.default.createElement(pn,{type:"text",title:"Default Conversation Tag",description:"The default tag to be used when saving a conversation. Default is 'ai-conversations'",value:t.defaultConversationTag,onChange:l=>dt("defaultConversationTag",l),placeholder:"ai-conversations"}),Ge.default.createElement(pn,{type:"custom",title:"Conversation Filename Template",description:Ge.default.createElement("div",{className:"tw-flex tw-items-start tw-gap-1.5 "},Ge.default.createElement("span",{className:"tw-leading-none"},"Customize the format of saved conversation note names."),Ge.default.createElement(po,{delayDuration:0},Ge.default.createElement(Mt,null,Ge.default.createElement(Rt,{asChild:!0},Ge.default.createElement(oi,{className:"tw-size-4"})),Ge.default.createElement(It,{className:"tw-flex tw-max-w-96 tw-flex-col tw-gap-2 tw-py-4"},Ge.default.createElement("div",{className:"tw-text-sm tw-font-medium tw-text-accent"},"Note: All the following variables must be included in the template."),Ge.default.createElement("div",null,Ge.default.createElement("div",{className:"tw-text-sm tw-font-medium tw-text-muted"},"Available variables:"),Ge.default.createElement("ul",{className:"tw-pl-4 tw-text-sm tw-text-muted"},Ge.default.createElement("li",null,Ge.default.createElement("strong",null,"{$date}"),": Date in YYYYMMDD format"),Ge.default.createElement("li",null,Ge.default.createElement("strong",null,"{$time}"),": Time in HHMMSS format"),Ge.default.createElement("li",null,Ge.default.createElement("strong",null,"{$topic}"),": Chat conversation topic")),Ge.default.createElement("i",{className:"tw-mt-2 tw-text-sm tw-text-muted"},"Example: ","{$date}_{$time}__{$topic}"," \u2192 20250114_153232__polish_this_article_[[Readme]]"))))))},Ge.default.createElement("div",{className:"tw-flex tw-w-[320px] tw-items-center tw-gap-1.5"},Ge.default.createElement(so,{type:"text",className:_e("tw-min-w-[80px] tw-grow tw-transition-all tw-duration-200",e?"tw-w-[80px]":"tw-w-[120px]"),placeholder:"{$date}_{$time}__{$topic}",value:n,onChange:l=>o(l.target.value),disabled:e}),Ge.default.createElement(ge,{onClick:()=>a(),disabled:e,variant:"secondary"},e?Ge.default.createElement(Ge.default.Fragment,null,Ge.default.createElement($l,{className:"tw-mr-2 tw-size-4 tw-animate-spin"}),"Apply"):"Apply"))),Ge.default.createElement(pn,{type:"switch",title:"Autosave Chat",description:"Automatically save the chat when starting a new one or when the plugin reloads",checked:t.autosaveChat,onCheckedChange:l=>dt("autosaveChat",l)}),Ge.default.createElement(pn,{type:"switch",title:"Suggested Prompts",description:"Show suggested prompts in the chat view",checked:t.showSuggestedPrompts,onCheckedChange:l=>dt("showSuggestedPrompts",l)}),Ge.default.createElement(pn,{type:"switch",title:"Relevant Notes",description:"Show relevant notes in the chat view",checked:t.showRelevantNotes,onCheckedChange:l=>dt("showRelevantNotes",l)}))))};kr();tr();var VD=require("obsidian"),Vn=F(X()),_Wt=()=>{let t=Tn(),e=t.autocompleteAcceptKey||_h.KEYBIND,[r,n]=(0,Vn.useState)(!1),o=[{value:"Tab",label:"Tab"},{value:"Space",label:"Space"},{value:"ArrowRight",label:"Right Arrow"}],i=u=>{dt("autocompleteAcceptKey",u),new VD.Notice(`Autocomplete accept key set to: ${u}`)},a=()=>{dt("autocompleteAcceptKey",_h.KEYBIND),new VD.Notice(`Autocomplete accept key reset to: ${_h.KEYBIND}`)},s=async()=>{if(!r){n(!0),new VD.Notice("Rebuilding word index...");try{let l=await WN.getInstance(app.vault).rescan(c=>{c.processedFiles===c.totalFiles&&new VD.Notice(`Word index complete! Found ${c.foundWords} words from ${c.processedFiles} files.`)});new VD.Notice(`Word index rebuilt successfully! ${l.wordCount} unique words indexed.`)}catch(u){console.error("Failed to refresh word index:",u),new VD.Notice("Failed to refresh word index. Check console for details.")}finally{n(!1)}}};return Vn.default.createElement("div",{className:"tw-flex tw-flex-col tw-gap-4"},Vn.default.createElement("section",{className:"tw-flex tw-flex-col tw-gap-4"},Vn.default.createElement("div",{className:"tw-flex tw-items-center tw-py-4"},Vn.default.createElement(Zp,{variant:"secondary",className:"tw-text-accent"},"Plus Required")),Vn.default.createElement("div",{className:"tw-flex tw-flex-col tw-gap-4"},Vn.default.createElement(pn,{type:"switch",title:"Include Current Note in Context Menu",description:"Automatically include the current note in the chat context menu by default when sending messages to the AI.",checked:t.includeActiveNoteAsContext,onCheckedChange:u=>{dt("includeActiveNoteAsContext",u)}}),Vn.default.createElement(pn,{type:"switch",title:"Images in Markdown",description:"Pass embedded images in markdown to the AI along with the text. Only works with multimodal models.",checked:t.passMarkdownImages,onCheckedChange:u=>{dt("passMarkdownImages",u)}}),Vn.default.createElement("div",{className:"tw-pt-4 tw-text-xl tw-font-semibold"},"Autocomplete"),Vn.default.createElement(pn,{type:"switch",title:"Sentence Autocomplete",description:Vn.default.createElement("div",{className:"tw-flex tw-items-center tw-gap-1.5"},Vn.default.createElement("span",{className:"tw-leading-none"},"Enable AI-powered sentence autocomplete suggestions while typing")),checked:t.enableAutocomplete,onCheckedChange:u=>dt("enableAutocomplete",u)}),Vn.default.createElement(pn,{type:"switch",title:"Word Completion",description:"Suggest completions for partially typed words based on your vault's content. Requires at least 3 characters to trigger.",checked:t.enableWordCompletion,onCheckedChange:u=>{dt("enableWordCompletion",u)}}),Vn.default.createElement(pn,{type:"custom",title:"Word Index Management",description:"Rebuild the word index to include new words from your vault. The index is automatically built when the plugin loads."},Vn.default.createElement(ge,{onClick:s,disabled:r,className:"tw-flex tw-items-center tw-gap-2"},Vn.default.createElement(Gb,{className:_e("tw-size-4",r&&"tw-animate-spin")}),r?"Rebuilding...":"Refresh Word Index")),Vn.default.createElement(pn,{type:"custom",title:"Autocomplete Accept Suggestion Key",description:Vn.default.createElement("div",{className:"tw-flex tw-items-center tw-gap-1.5"},Vn.default.createElement("span",{className:"tw-leading-none"},"The key used to accept autocomplete suggestions"),Vn.default.createElement(po,{delayDuration:0},Vn.default.createElement(Mt,null,Vn.default.createElement(Rt,{asChild:!0},Vn.default.createElement(oi,{className:"tw-size-4"})),Vn.default.createElement(It,{className:"tw-flex tw-max-w-96 tw-flex-col tw-gap-2"},Vn.default.createElement("div",{className:"tw-text-sm tw-text-muted"},'Select the key you want to use for accepting suggestions. Default is "Tab".')))))},Vn.default.createElement("div",{className:"tw-flex tw-items-center tw-gap-2"},Vn.default.createElement(tz,{value:e,onValueChange:i},Vn.default.createElement(AD,{className:"tw-w-[180px]"},Vn.default.createElement(rz,{placeholder:"Select key"})),Vn.default.createElement(ID,null,o.map(u=>Vn.default.createElement(MD,{key:u.value,value:u.value},u.label)))),e&&e!==_h.KEYBIND&&Vn.default.createElement(ge,{variant:"ghost",onClick:a,className:"tw-h-8 tw-text-xs"},"Reset to Default"))),Vn.default.createElement(pn,{type:"switch",title:"Allow Additional Context",description:"Allow the AI to access relevant notes to provide more relevant suggestions. When off, the AI can only see the current note context.",checked:t.allowAdditionalContext,onCheckedChange:u=>{dt("allowAdditionalContext",u)}}))))};kr();Ko();tr();var De=F(X());tr();kr();wn();var u9=require("obsidian");var Cke=({open:t,onOpenChange:e,onAdd:r,ping:n,isEmbeddingModel:o=!1})=>{let{modalContainer:i}=nz(),a=ue(),s=o?"openai":"openai",[u,l]=(0,De.useState)(null),[c,d]=(0,De.useState)(!1),[f,p]=(0,De.useState)(!1),[m,h]=(0,De.useState)({name:!1,instanceName:!1,deploymentName:!1,embeddingDeploymentName:!1,apiVersion:!1,displayName:!1}),b=(D,B)=>{h(q=>({...q,[D]:B}))},g=()=>{h({name:!1,instanceName:!1,deploymentName:!1,embeddingDeploymentName:!1,apiVersion:!1,displayName:!1})},y=()=>{let D=!0,B={...m};return B.name=!C.name,C.name||(D=!1),C.provider==="azure openai"&&(B.instanceName=!C.azureOpenAIApiInstanceName,B.apiVersion=!C.azureOpenAIApiVersion,o?(B.embeddingDeploymentName=!C.azureOpenAIApiEmbeddingDeploymentName,C.azureOpenAIApiEmbeddingDeploymentName||(D=!1)):(B.deploymentName=!C.azureOpenAIApiDeploymentName,C.azureOpenAIApiDeploymentName||(D=!1)),(!C.azureOpenAIApiInstanceName||!C.azureOpenAIApiVersion)&&(D=!1)),h(B),D},w=D=>a[jb[D]]||"",S=(D=s)=>{let B={name:"",provider:D,enabled:!0,isBuiltIn:!1,baseUrl:"",apiKey:w(D),isEmbeddingModel:o,capabilities:[]};return o?B:{...B,stream:!0}},[C,P]=(0,De.useState)(S()),E=D=>({...D,name:D.name?.trim(),baseUrl:D.baseUrl?.trim(),apiKey:D.apiKey?.trim(),openAIOrgId:D.openAIOrgId?.trim(),azureOpenAIApiInstanceName:D.azureOpenAIApiInstanceName?.trim(),azureOpenAIApiDeploymentName:D.azureOpenAIApiDeploymentName?.trim(),azureOpenAIApiEmbeddingDeploymentName:D.azureOpenAIApiEmbeddingDeploymentName?.trim(),azureOpenAIApiVersion:D.azureOpenAIApiVersion?.trim()}),[A,I]=(0,De.useState)(Rb(s)),R=()=>!!(C.name&&C.provider),j=()=>f||!R(),N=()=>{if(!y()){new u9.Notice("Please fill in all required fields");return}let D=E(C);r(D),e(!1),P(S()),g()},$=D=>{I(Rb(D)),P({...C,provider:D,apiKey:w(D),...D==="openai"?{openAIOrgId:a.openAIOrgId}:{},...D==="azure openai"?{azureOpenAIApiInstanceName:a.azureOpenAIApiInstanceName,azureOpenAIApiDeploymentName:a.azureOpenAIApiDeploymentName,azureOpenAIApiVersion:a.azureOpenAIApiVersion,azureOpenAIApiEmbeddingDeploymentName:a.azureOpenAIApiEmbeddingDeploymentName}:{}})},k=D=>{D||(P(S()),g(),d(!1)),e(D)},H=async()=>{if(!y()){new u9.Notice("Please fill in all required fields");return}p(!0);try{let D=E(C);await n(D),new u9.Notice("Model verification successful!")}catch(D){console.error(D);let B=Go(D);new u9.Notice("Model verification failed: "+B)}finally{p(!1)}},V=()=>{let B=(()=>{switch(C.provider){case"openai":return De.default.createElement(Hn,{label:"OpenAI Organization ID",description:"Enter OpenAI Organization ID if applicable"},De.default.createElement(so,{type:"text",placeholder:"Enter OpenAI Organization ID if applicable",value:C.openAIOrgId||"",onChange:q=>P({...C,openAIOrgId:q.target.value})}));case"azure openai":return De.default.createElement(De.default.Fragment,null,De.default.createElement(Hn,{label:"Instance Name",required:!0,error:m.instanceName,errorMessage:"Instance name is required"},De.default.createElement(so,{type:"text",placeholder:"Enter Azure OpenAI API Instance Name",value:C.azureOpenAIApiInstanceName||"",onChange:q=>{P({...C,azureOpenAIApiInstanceName:q.target.value}),b("instanceName",!1)}})),o?De.default.createElement(Hn,{label:"Embedding Deployment Name",required:!0,error:m.embeddingDeploymentName,errorMessage:"Embedding deployment name is required"},De.default.createElement(so,{type:"text",placeholder:"Enter Azure OpenAI API Embedding Deployment Name",value:C.azureOpenAIApiEmbeddingDeploymentName||"",onChange:q=>{P({...C,azureOpenAIApiEmbeddingDeploymentName:q.target.value}),b("embeddingDeploymentName",!1)}})):De.default.createElement(Hn,{label:"Deployment Name",required:!0,error:m.deploymentName,errorMessage:"Deployment name is required",description:"This is your actual model, no need to pass a model name separately."},De.default.createElement(so,{type:"text",placeholder:"Enter Azure OpenAI API Deployment Name",value:C.azureOpenAIApiDeploymentName||"",onChange:q=>{P({...C,azureOpenAIApiDeploymentName:q.target.value}),b("deploymentName",!1)}})),De.default.createElement(Hn,{label:"API Version",required:!0,error:m.apiVersion,errorMessage:"API version is required"},De.default.createElement(so,{type:"text",placeholder:"Enter Azure OpenAI API Version",value:C.azureOpenAIApiVersion||"",onChange:q=>{P({...C,azureOpenAIApiVersion:q.target.value}),b("apiVersion",!1)}})));default:return null}})();return B?De.default.createElement(BP,{open:c,onOpenChange:d,className:"tw-space-y-2 tw-rounded-lg tw-border tw-pt-4"},De.default.createElement("div",{className:"tw-flex tw-items-center tw-justify-between"},De.default.createElement(Hf,null,"Additional ",xf(C.provider)," Settings"),De.default.createElement(_D,{asChild:!0},De.default.createElement(ge,{variant:"ghost",size:"sm",className:"tw-w-9 tw-p-0"},De.default.createElement(ki,{className:"tw-size-4"}),De.default.createElement("span",{className:"tw-sr-only"},"Toggle")))),De.default.createElement(qP,{className:"tw-max-h-[200px] tw-space-y-4 tw-overflow-y-auto tw-pb-0.5 tw-pl-0.5 tw-pr-2"},B)):null},Q=()=>{if(C.provider!=="azure openai")return A.host;let D=C.azureOpenAIApiInstanceName||"[instance]",B=o?C.azureOpenAIApiEmbeddingDeploymentName||"[deployment]":C.azureOpenAIApiDeploymentName||"[deployment]",q=C.azureOpenAIApiVersion||"[api-version]";return`https://${D}.openai.azure.com/openai/deployments/${B}/${o?"embeddings":"chat/completions"}?api-version=${q}`},G=Object.entries(SE).map(([D,B])=>({id:D,label:D.charAt(0).toUpperCase()+D.slice(1),description:B}));return De.default.createElement(ude,{open:t,onOpenChange:k},De.default.createElement(n9,{className:"sm:tw-max-w-[425px]",container:i,ref:D=>l(D)},De.default.createElement(o9,null,De.default.createElement(i9,null,"Add Custom ",o?"Embedding":"Chat"," Model"),De.default.createElement(a9,null,"Add a new model to your collection.")),De.default.createElement("div",{className:"tw-space-y-3"},De.default.createElement(Hn,{label:"Model Name",required:!0,error:m.name,errorMessage:"Model name is required"},De.default.createElement(so,{type:"text",placeholder:`Enter model name (e.g. ${o?"text-embedding-3-small":"gpt-4"})`,value:C.name,onChange:D=>{P({...C,name:D.target.value}),b("name",!1)}})),De.default.createElement(Hn,{label:De.default.createElement("div",{className:"tw-flex tw-items-center tw-gap-1.5"},De.default.createElement("span",{className:"tw-leading-none"},"Display Name"),De.default.createElement(po,{delayDuration:0},De.default.createElement(Mt,null,De.default.createElement(Rt,{asChild:!0},De.default.createElement(oi,{className:"tw-size-4"})),De.default.createElement(It,{align:"start",className:"tw-max-w-96",side:"bottom"},De.default.createElement("div",{className:"tw-flex tw-flex-col tw-gap-0.5 tw-text-sm tw-text-muted"},De.default.createElement("div",{className:"tw-text-[12px] tw-font-bold"},"Suggested format:"),De.default.createElement("div",{className:"tw-text-accent"},"[Source]-[Payment]:[Pretty Model Name]"),De.default.createElement("div",{className:"tw-text-[12px]"},"Example:",De.default.createElement("li",null,"Direct-Paid:Ds-r1"),De.default.createElement("li",null,"OpenRouter-Paid:Ds-r1"),De.default.createElement("li",null,"Perplexity-Paid:lg")))))))},De.default.createElement(so,{type:"text",placeholder:"Custom display name (optional)",value:C.displayName||"",onChange:D=>{P({...C,displayName:D.target.value})}})),De.default.createElement(Hn,{label:"Provider"},De.default.createElement(tz,{value:C.provider,onValueChange:$},De.default.createElement(AD,null,De.default.createElement(rz,{placeholder:"Select provider"})),De.default.createElement(ID,{container:u},Object.values(o?w2(vE,["COPILOT_PLUS","COPILOT_PLUS_JINA"]):w2(pC,["COPILOT_PLUS"])).map(D=>De.default.createElement(MD,{key:D,value:D},xf(D)))))),De.default.createElement(Hn,{label:"Base URL",description:"Leave it blank, unless you are using a proxy."},De.default.createElement(so,{type:"text",placeholder:Q()||"https://api.example.com/v1",value:C.baseUrl||"",onChange:D=>P({...C,baseUrl:D.target.value})})),De.default.createElement(Hn,{label:"API Key"},De.default.createElement(Fx,{placeholder:`Enter ${A.label} API Key`,value:C.apiKey||"",onChange:D=>P({...C,apiKey:D})}),A.keyManagementURL&&De.default.createElement("p",{className:"tw-text-xs tw-text-muted"},De.default.createElement("a",{href:A.keyManagementURL,target:"_blank",rel:"noopener noreferrer"},"Get ",A.label," API Key"))),De.default.createElement(Hn,{label:De.default.createElement("div",{className:"tw-flex tw-items-center tw-gap-1.5"},De.default.createElement("span",{className:"tw-leading-none"},"Model Capabilities"),De.default.createElement(po,{delayDuration:0},De.default.createElement(Mt,null,De.default.createElement(Rt,{asChild:!0},De.default.createElement(oi,{className:"tw-size-4"})),De.default.createElement(It,{align:"start",className:"tw-max-w-96",side:"bottom"},De.default.createElement("div",{className:"tw-text-sm tw-text-muted"},"Only used to display model capabilities, does not affect model functionality")))))},De.default.createElement("div",{className:"tw-flex tw-items-center tw-gap-4"},G.map(({id:D,label:B,description:q})=>De.default.createElement("div",{key:D,className:"tw-flex tw-items-center tw-gap-2"},De.default.createElement(sd,{id:D,checked:C.capabilities?.includes(D),onCheckedChange:K=>{let U=C.capabilities||[];P({...C,capabilities:K?[...U,D]:U.filter(te=>te!==D)})}}),De.default.createElement(Hf,{htmlFor:D,className:"tw-text-sm"},De.default.createElement(po,{delayDuration:0},De.default.createElement(Mt,null,De.default.createElement(Rt,{asChild:!0},De.default.createElement("span",null,B)),De.default.createElement(It,{side:"bottom"},q)))))))),V()),De.default.createElement("div",{className:"tw-flex tw-items-center tw-justify-end tw-gap-4"},De.default.createElement("div",{className:"tw-flex tw-items-center tw-gap-2"},De.default.createElement(sd,{id:"enable-cors",checked:C.enableCors||!1,onCheckedChange:D=>P({...C,enableCors:D})}),De.default.createElement(Hf,{htmlFor:"enable-cors",className:"tw-text-sm"},De.default.createElement("div",{className:"tw-flex tw-items-center tw-gap-1.5"},De.default.createElement("span",null,"Enable CORS"),De.default.createElement(po,{delayDuration:0},De.default.createElement(Mt,null,De.default.createElement(Rt,{asChild:!0},De.default.createElement(oi,{className:"tw-size-4"})),De.default.createElement(It,{align:"start",className:"tw-max-w-96",side:"bottom"},De.default.createElement("div",{className:"tw-text-sm tw-text-muted"},"Only check this option when prompted that CORS is needed"))))))),De.default.createElement("div",{className:"tw-flex tw-gap-2"},De.default.createElement(ge,{variant:"secondary",onClick:N,disabled:j()},"Add Model"),De.default.createElement(ge,{variant:"secondary",onClick:H,disabled:j()},f?De.default.createElement(De.default.Fragment,null,De.default.createElement($l,{className:"tw-mr-2 tw-size-4 tw-animate-spin"}),"Verify"):"Verify")))))};kr();tr();wn();var vWt=require("obsidian"),Ie=F(X()),wWt=F(wc()),CPn=({model:t,onUpdate:e,onCancel:r,isEmbeddingModel:n})=>{let[o,i]=(0,Ie.useState)(t),[a,s]=(0,Ie.useState)(t),[u,l]=(0,Ie.useState)({}),c=ue(),d=y=>c[jb[y]]||"";(0,Ie.useEffect)(()=>{i(t),s(t),t.provider&&l(Rb(t.provider))},[t]);let f=(0,Ie.useMemo)(()=>sG((y,w)=>{e(n,y,w)},500),[n,e]),p=(0,Ie.useCallback)((y,w)=>{i(S=>{let C={...S,[y]:w};return f(a,C),C})},[a,f]);if(!o)return null;let m=()=>{if(!o||!o.provider||o.provider!=="azure-openai")return u.host||"https://api.example.com/v1";let y=o.azureOpenAIApiInstanceName||"[instance]",w=o.isEmbeddingModel?o.azureOpenAIApiEmbeddingDeploymentName||"[deployment]":o.azureOpenAIApiDeploymentName||"[deployment]",S=o.azureOpenAIApiVersion||"[api-version]",C=o.isEmbeddingModel?"embeddings":"chat/completions";return`https://${y}.openai.azure.com/openai/deployments/${w}/${C}?api-version=${S}`},h=Object.entries(SE).map(([y,w])=>({id:y,label:y.charAt(0).toUpperCase()+y.slice(1),description:w})),b=o.apiKey||d(o.provider),g=!n&&o.provider!=="copilot-plus-jina";return Ie.default.createElement("div",{className:"tw-space-y-3 tw-p-4"},Ie.default.createElement("div",{className:"tw-mb-4"},Ie.default.createElement("h2",{className:"tw-text-xl tw-font-bold"},"Model Settings - ",o.name),Ie.default.createElement("p",{className:"tw-text-sm tw-text-muted"},"Customize model parameters")),Ie.default.createElement("div",{className:"tw-space-y-3"},Ie.default.createElement(Hn,{label:"Model Name",required:!0},Ie.default.createElement(so,{type:"text",disabled:o.core,value:o.name,onChange:y=>p("name",y.target.value),placeholder:"Enter model name"})),Ie.default.createElement(Hn,{label:Ie.default.createElement("div",{className:"tw-flex tw-items-center tw-gap-1.5"},Ie.default.createElement("span",{className:"tw-leading-none"},"Display Name"),Ie.default.createElement(po,{delayDuration:0},Ie.default.createElement(Mt,null,Ie.default.createElement(Rt,{asChild:!0},Ie.default.createElement(oi,{className:"tw-size-4"})),Ie.default.createElement(It,{align:"start",className:"tw-max-w-96",side:"bottom"},Ie.default.createElement("div",{className:"tw-flex tw-flex-col tw-gap-0.5 tw-text-sm tw-text-muted"},Ie.default.createElement("div",{className:"tw-text-[12px] tw-font-bold"},"Suggested format:"),Ie.default.createElement("div",{className:"tw-text-accent"},"[Source]-[Payment]:[Pretty Model Name]"),Ie.default.createElement("div",{className:"tw-text-[12px]"},"Example:",Ie.default.createElement("li",null,"Direct-Paid:Ds-r1"),Ie.default.createElement("li",null,"OpenRouter-Paid:Ds-r1"),Ie.default.createElement("li",null,"Perplexity-Paid:lg")))))))},Ie.default.createElement(so,{type:"text",placeholder:"Custom display name (optional)",value:o.displayName||"",onChange:y=>p("displayName",y.target.value)})),Ie.default.createElement(Hn,{label:"Provider"},Ie.default.createElement(so,{type:"text",value:xf(o.provider),disabled:!0})),Ie.default.createElement(Hn,{label:"Base URL",description:"Leave it blank, unless you are using a proxy."},Ie.default.createElement(so,{type:"text",placeholder:m(),value:o.baseUrl||"",onChange:y=>p("baseUrl",y.target.value)})),Ie.default.createElement(Hn,{label:"API Key"},Ie.default.createElement(Fx,{placeholder:`Enter ${u.label||"Provider"} API Key`,value:b,onChange:y=>p("apiKey",y)}),u.keyManagementURL&&Ie.default.createElement("p",{className:"tw-text-xs tw-text-muted"},Ie.default.createElement("a",{href:u.keyManagementURL,target:"_blank",rel:"noopener noreferrer"},"Get ",u.label," API Key"))),g&&Ie.default.createElement(Ie.default.Fragment,null,Ie.default.createElement(Hn,{label:Ie.default.createElement("div",{className:"tw-flex tw-items-center tw-gap-1.5"},Ie.default.createElement("span",{className:"tw-leading-none"},"Model Capabilities"),Ie.default.createElement(po,{delayDuration:0},Ie.default.createElement(Mt,null,Ie.default.createElement(Rt,{asChild:!0},Ie.default.createElement(oi,{className:"tw-size-4"})),Ie.default.createElement(It,{align:"start",className:"tw-max-w-96",side:"bottom"},Ie.default.createElement("div",{className:"tw-text-sm tw-text-muted"},"Only used to display model capabilities, does not affect model functionality")))))},Ie.default.createElement("div",{className:"tw-flex tw-items-center tw-gap-4"},h.map(({id:y,label:w,description:S})=>Ie.default.createElement("div",{key:y,className:"tw-flex tw-items-center tw-gap-2"},Ie.default.createElement(sd,{id:y,checked:o.capabilities?.includes(y),onCheckedChange:C=>{let P=o.capabilities||[],E=C?[...P,y]:P.filter(A=>A!==y);p("capabilities",E)}}),Ie.default.createElement(Hf,{htmlFor:y,className:"tw-text-sm"},Ie.default.createElement(po,{delayDuration:0},Ie.default.createElement(Mt,null,Ie.default.createElement(Rt,{asChild:!0},Ie.default.createElement("span",null,w)),Ie.default.createElement(It,{side:"bottom"},S)))))))),Ie.default.createElement(Hn,{label:Ie.default.createElement("div",{className:"tw-flex tw-items-center tw-gap-2"},"Token limit",Ie.default.createElement(po,{delayDuration:0},Ie.default.createElement(Mt,null,Ie.default.createElement(Rt,{asChild:!0},Ie.default.createElement(oi,{className:"tw-size-4 tw-text-muted"})),Ie.default.createElement(It,{side:"bottom"},Ie.default.createElement("div",{className:"tw-w-[300px]"},Ie.default.createElement("p",null,"The maximum number of ",Ie.default.createElement("em",null,"output tokens")," to generate. Default is"," ",bh.MAX_TOKENS,"."),Ie.default.createElement("em",null,"This number plus the length of your prompt (input tokens) must be smaller than the context window of the model."))))))},Ie.default.createElement(Dx,{value:o.maxTokens??c.maxTokens??bh.MAX_TOKENS,onChange:y=>p("maxTokens",y),min:0,max:65e3,step:100})),Ie.default.createElement(Hn,{label:Ie.default.createElement("div",{className:"tw-flex tw-items-center tw-gap-2"},"Temperature",Ie.default.createElement(po,{delayDuration:0},Ie.default.createElement(Mt,null,Ie.default.createElement(Rt,{asChild:!0},Ie.default.createElement(oi,{className:"tw-size-4 tw-text-muted"})),Ie.default.createElement(It,{side:"bottom"},Ie.default.createElement("div",{className:"tw-max-w-[300px]"},"Default is ",bh.TEMPERATURE,". Higher values will result in more creativeness, but also more mistakes. Set to 0 for no randomness.")))))},Ie.default.createElement(Dx,{value:o.temperature??c.temperature??bh.TEMPERATURE,onChange:y=>p("temperature",y),max:2,min:0,step:.05})),Ie.default.createElement(Hn,{label:Ie.default.createElement("div",{className:"tw-flex tw-items-center tw-gap-2"},"Top-P",Ie.default.createElement(po,{delayDuration:0},Ie.default.createElement(Mt,null,Ie.default.createElement(Rt,{asChild:!0},Ie.default.createElement(oi,{className:"tw-size-4 tw-text-muted"})),Ie.default.createElement(It,{side:"bottom"},Ie.default.createElement("div",{className:"tw-w-[300px]"},"Default value is 0.9, the smaller the value, the less variety in the answers, the easier to understand, the larger the value, the larger the range of the Al's vocabulary, the more diverse")))))},Ie.default.createElement(Dx,{value:o.topP??.9,onChange:y=>p("topP",y),max:1,min:0,step:.05})),Ie.default.createElement(Hn,{label:Ie.default.createElement("div",{className:"tw-flex tw-items-center tw-gap-2"},"Frequency Penalty",Ie.default.createElement(po,{delayDuration:0},Ie.default.createElement(Mt,null,Ie.default.createElement(Rt,{asChild:!0},Ie.default.createElement(oi,{className:"tw-size-4 tw-text-muted"})),Ie.default.createElement(It,{side:"bottom"},Ie.default.createElement("div",{className:"tw-w-[300px]"},Ie.default.createElement("p",null,"The frequency penalty parameter tells the model not to repeat a word that has already been used multiple times in the conversation."),Ie.default.createElement("em",null,"The higher the value, the more the model is penalized for repeating words."))))))},Ie.default.createElement(Dx,{value:o.frequencyPenalty??0,onChange:y=>p("frequencyPenalty",y),max:2,min:0,step:.05})))))},dde=class extends vWt.Modal{constructor(r,n,o,i){super(r);this.model=n;this.isEmbeddingModel=o;this.onUpdate=i}onOpen(){let{contentEl:r}=this;this.root=(0,wWt.createRoot)(r);let n=(i,a,s)=>{this.onUpdate(i,a,s)},o=()=>{this.close()};this.root.render(Ie.default.createElement(CPn,{model:this.model,isEmbeddingModel:this.isEmbeddingModel,onUpdate:n,onCancel:o}))}onClose(){this.root.unmount()}};kr();tr();wn();var Me=F(X());var OPn={reasoning:{icon:RC,color:"tw-text-model-capabilities-blue",tooltip:SE.reasoning},vision:{icon:MC,color:"tw-text-model-capabilities-green",tooltip:SE.vision},websearch:{icon:MR,color:"tw-text-model-capabilities-blue",tooltip:SE.websearch}},PPn=["reasoning","vision","websearch"],EPn=t=>Me.default.createElement(po,{delayDuration:0},Me.default.createElement("div",{className:"tw-mx-auto tw-grid tw-w-16 tw-grid-cols-3 tw-gap-1"},PPn.map(e=>{let r=OPn[e];if(!r)return Me.default.createElement("div",{key:e,className:"tw-w-4"});let n=r.icon;return t.capabilities?.includes(e)?Me.default.createElement(Mt,{key:e},Me.default.createElement(Rt,{asChild:!0},Me.default.createElement("div",{className:"tw-flex tw-items-center tw-justify-center"},Me.default.createElement(n,{className:_e("tw-size-4",r.color)}))),Me.default.createElement(It,{side:"bottom"},r.tooltip)):Me.default.createElement("div",{key:e,className:"tw-flex tw-items-center tw-justify-center"},Me.default.createElement("div",{className:"tw-size-4"}))}))),TPn=({model:t,onEdit:e,onCopy:r,onDelete:n,onUpdateModel:o,id:i})=>{let[a,s]=Me.default.useState(!1),u=t9(),{attributes:l,listeners:c,setNodeRef:d,transform:f,transition:p,isDragging:m}=e9({id:i,disabled:t.core}),h={transform:fb.Transform.toString(f),transition:p};return Me.default.createElement(wW,{ref:d,style:h,className:_e("tw-mb-2",m&&["tw-opacity-90","tw-shadow-lg","tw-border-accent/50","tw-relative","tw-z-[9999]","tw-bg-primary","tw-rounded-lg","tw-transform-gpu"],!t.core&&"tw-touch-none")},Me.default.createElement(SW,{className:"tw-p-3"},Me.default.createElement("div",{className:"tw-flex tw-items-center tw-justify-between"},!t.core&&Me.default.createElement("div",{className:"tw-mr-2 tw-cursor-grab tw-touch-none active:tw-cursor-grabbing",...l,...c},Me.default.createElement(Vb,{className:"tw-size-4"})),Me.default.createElement("div",{className:"tw-flex-1 tw-cursor-pointer",onClick:()=>s(!a)},Me.default.createElement("div",{className:"tw-flex tw-items-center tw-gap-2"},Me.default.createElement("div",{className:"tw-flex tw-size-3 tw-items-center tw-justify-center"},a?Me.default.createElement(ki,{className:"tw-size-3 tw-stroke-[7]"}):Me.default.createElement(AC,{className:"tw-size-3 tw-stroke-[7]"})),Me.default.createElement("div",null,Me.default.createElement("div",{className:"tw-flex tw-items-center tw-gap-1"},Me.default.createElement("span",{className:"tw-font-medium"},t.displayName||t.name),t.capabilities&&t.capabilities.length>0&&Me.default.createElement(PDe,{capabilities:t.capabilities,iconSize:14})),Me.default.createElement("div",{className:"tw-flex tw-items-center tw-gap-2"},Me.default.createElement("span",{className:"tw-bg-secondary tw-text-sm tw-text-muted"},xf(t.provider,t)))))),Me.default.createElement("div",{className:"tw-flex tw-items-center tw-gap-2"},e&&Me.default.createElement(ge,{variant:"ghost",size:"icon",onClick:b=>{b.stopPropagation(),e(t)}},Me.default.createElement(SF,{className:"tw-size-4"})),Me.default.createElement(pD,null,Me.default.createElement(mD,{asChild:!0},Me.default.createElement(ge,{variant:"ghost",size:"icon"},Me.default.createElement(IC,{className:"tw-size-4"}))),Me.default.createElement(nb,{align:"end",container:u},e&&Me.default.createElement(hi,{onClick:b=>{b.stopPropagation(),e(t)}},Me.default.createElement(wF,{className:"tw-mr-2 tw-size-4"}),"Edit"),r&&!t.core&&Me.default.createElement(hi,{onClick:b=>{b.stopPropagation(),r(t)}},Me.default.createElement(uy,{className:"tw-mr-2 tw-size-4"}),"Copy"),!t.core&&Me.default.createElement(hi,{onClick:b=>{b.stopPropagation(),n(Fr(t))},className:"tw-text-error"},Me.default.createElement(bm,{className:"tw-mr-2 tw-size-4"}),"Delete")))))),Me.default.createElement("div",{className:_e("tw-transition-all tw-duration-300 tw-ease-in-out",a?"tw-max-h-20 tw-opacity-100":"tw-max-h-0 tw-overflow-hidden tw-opacity-0")},Me.default.createElement(xW,{className:"tw-p-3 tw-pt-0"},Me.default.createElement("div",{className:"tw-flex tw-justify-around"},!t.isEmbeddingModel&&Me.default.createElement("div",{className:"tw-flex tw-items-center tw-gap-2"},Me.default.createElement("span",{className:"tw-text-sm"},"Enabled"),Me.default.createElement(sd,{checked:t.enabled,onCheckedChange:b=>o({...t,enabled:b})})),Me.default.createElement("div",{className:"tw-flex tw-items-center tw-gap-2"},Me.default.createElement("span",{className:"tw-text-sm"},"CORS"),Me.default.createElement(sd,{checked:t.enableCors,onCheckedChange:b=>o({...t,enableCors:b})}))))))},APn=({model:t,onEdit:e,onCopy:r,onDelete:n,onUpdateModel:o,isEmbeddingModel:i})=>{let{attributes:a,listeners:s,setNodeRef:u,transform:l,transition:c,isDragging:d}=e9({id:Fr(t),disabled:t.core}),f=t9(),p={transform:fb.Transform.toString(l),transition:c},m=e||!t.core||r&&!t.core;return Me.default.createElement(dM,{ref:u,style:p,className:_e("tw-transition-colors tw-duration-200 hover:tw-bg-interactive-accent/10",d&&"tw-relative tw-z-[100] tw-cursor-grabbing tw-shadow-lg tw-backdrop-blur-sm tw-border-accent/50 tw-bg-primary/90")},Me.default.createElement(tf,{className:"tw-w-6 tw-px-2"},!t.core&&Me.default.createElement(ge,{variant:"ghost",size:"icon",className:"tw-size-6 tw-cursor-grab tw-touch-none tw-p-0 hover:tw-cursor-grab active:tw-cursor-grabbing",...a,...s},Me.default.createElement(Vb,{className:"tw-size-4 tw-transition-colors"}))),Me.default.createElement(tf,{className:"tw-pl-0"},t.displayName||t.name),Me.default.createElement(tf,null,xf(t.provider,t)),Me.default.createElement(tf,null,EPn(t)),!i&&Me.default.createElement(tf,{className:"tw-text-center"},Me.default.createElement(sd,{id:`${Fr(t)}-enabled`,checked:t.enabled,onCheckedChange:h=>o({...t,enabled:h}),className:"tw-mx-auto"})),Me.default.createElement(tf,{className:"tw-text-center"},Me.default.createElement(sd,{id:`${Fr(t)}-enableCors`,checked:t.enableCors,onCheckedChange:h=>o({...t,enableCors:h}),className:"tw-mx-auto"})),Me.default.createElement(tf,{className:"tw-text-center"},Me.default.createElement("div",{className:"tw-flex tw-justify-center tw-gap-2"},e&&Me.default.createElement(ge,{variant:"ghost",size:"icon",onClick:()=>e(t),className:"tw-shadow-sm tw-transition-shadow hover:tw-shadow-md"},Me.default.createElement(SF,{className:"tw-size-4"})),m&&Me.default.createElement(pD,null,Me.default.createElement(mD,{asChild:!0},Me.default.createElement(ge,{variant:"ghost",size:"icon"},Me.default.createElement(IC,{className:"tw-size-4"}))),Me.default.createElement(nb,{align:"end",container:f},e&&Me.default.createElement(hi,{onClick:()=>e(t)},Me.default.createElement(wF,{className:"tw-mr-2 tw-size-4"}),"Edit"),r&&!t.core&&Me.default.createElement(hi,{onClick:()=>r(t)},Me.default.createElement(uy,{className:"tw-mr-2 tw-size-4"}),"Copy"),!t.core&&Me.default.createElement(hi,{onClick:()=>n(Fr(t)),className:"tw-text-error"},Me.default.createElement(bm,{className:"tw-mr-2 tw-size-4"}),"Delete"))))))},Oke=({models:t,onEdit:e,onCopy:r,onDelete:n,onAdd:o,onUpdateModel:i,onReorderModels:a,onRefresh:s,title:u})=>{let l=!!(t.length>0&&t[0].isEmbeddingModel),c=Yce(lz(gM),lz(hM,{coordinateGetter:nde})),d=t.findIndex(h=>!h.core),f=h=>b=>{let{transform:g,active:y,activeNodeRect:w,over:S}=b;if(!y||!w)return g;let C=t.findIndex(R=>Fr(R)===y.id),P=t.filter(R=>!R.core).length,E=w.height,A=(d-C)*E,I=(d+P-1-C)*E;if(h&&S){let R=t.findIndex(N=>Fr(N)===S.id);if(t[R].core||R<d)return{...g,x:0,y:C*E}}return{...g,x:0,y:Math.min(Math.max(A,g.y),I)}},p=h=>{let{active:b,over:g}=h;if(g&&b.id!==g.id){let y=t.findIndex(P=>Fr(P)===b.id),w=t.findIndex(P=>Fr(P)===g.id),S=t[w];if(w<d||S.core)return;let C=rde(t,y,w);a?.(C)}},m=()=>Me.default.createElement("div",{className:"tw-relative md:tw-hidden"},Me.default.createElement(ZW,{sensors:c,collisionDetection:JW,onDragEnd:p,modifiers:[f(!0)]},Me.default.createElement(QW,{items:t.map(h=>Fr(h)),strategy:XW},Me.default.createElement("div",{className:"tw-relative tw-space-y-2"},t.map(h=>Me.default.createElement(TPn,{key:Fr(h),id:Fr(h),model:h,onEdit:e,onCopy:r,onDelete:n,onUpdateModel:i}))))));return Me.default.createElement("div",{className:"tw-mb-4"},Me.default.createElement("div",{className:"tw-hidden md:tw-block"},Me.default.createElement(ZW,{sensors:c,collisionDetection:JW,onDragEnd:p,modifiers:[f(!1)]},Me.default.createElement("div",{className:"tw-relative tw-overflow-hidden"},Me.default.createElement($W,null,Me.default.createElement(BW,null,Me.default.createElement(dM,null,Me.default.createElement(Wf,{className:"tw-w-6 tw-px-2"}),Me.default.createElement(Wf,{className:"tw-pl-0"},"Model"),Me.default.createElement(Wf,null,"Provider"),Me.default.createElement(Wf,{className:"tw-text-center"},"Capabilities"),!l&&Me.default.createElement(Wf,{className:"tw-text-center"},"Enable"),Me.default.createElement(Wf,{className:"tw-text-center"},"CORS"),Me.default.createElement(Wf,{className:"tw-w-[100px] tw-text-center"},"Actions"))),Me.default.createElement(qW,{className:"tw-relative"},Me.default.createElement(QW,{items:t.map(h=>Fr(h)),strategy:XW},t.map(h=>Me.default.createElement(APn,{key:Fr(h),model:h,onEdit:e,onCopy:r,onDelete:n,onUpdateModel:i,isEmbeddingModel:l})))))))),m(),Me.default.createElement("div",{className:"tw-mt-4 tw-flex tw-justify-end tw-gap-2"},s&&Me.default.createElement(ge,{onClick:s,variant:"secondary",className:"tw-flex tw-items-center tw-gap-2"},Me.default.createElement(Gb,{className:"tw-size-4"}),"Refresh Built-in Models"),Me.default.createElement(ge,{onClick:o,variant:"secondary",className:"tw-flex tw-items-center tw-gap-2"},Me.default.createElement(ym,{className:"tw-size-4"}),"Add Custom Model")))};wn();var fde=require("obsidian"),Gf=F(X()),SWt=()=>{let t=Tn(),[e,r]=(0,Gf.useState)(!1),[n,o]=(0,Gf.useState)(!1),i=(h,b=!1)=>{let g={...w2(h,["isBuiltIn","core","projectEnabled","plusExclusive","believerExclusive","capabilities","displayName","dimensions"]),name:`${h.name} (copy)`},y=b?"activeEmbeddingModels":"activeModels";dt(y,[...t[y],g])},a=(h,b=!1)=>{dt(b?"activeEmbeddingModels":"activeModels",h)},s=h=>{let[b,g]=h.split("|"),y=t.activeModels.filter(S=>!(S.name===b&&S.provider===g)),w=t.defaultModelKey;if(h===t.defaultModelKey){let S=y.find(C=>C.enabled);w=S?`${S.name}|${S.provider}`:""}_E({activeModels:y,defaultModelKey:w})},u=(h,b,g)=>{let y=h?"activeEmbeddingModels":"activeModels",w=t[y].findIndex(S=>S.name===b.name&&S.provider===b.provider);if(w!==-1){let S=[...t[y]];S[w]=g,dt(y,S)}else new fde.Notice("Could not find model to update"),fe("Could not find model to update:",b)},l=h=>{let b=t.activeModels.map(g=>g.name===h.name&&g.provider===h.provider?h:g);dt("activeModels",b)},c=h=>{let[b,g]=h.split("|"),y=t.activeEmbeddingModels.filter(w=>!(w.name===b&&w.provider===g));dt("activeEmbeddingModels",y)},d=h=>{let b=t.activeEmbeddingModels.map(g=>g.name===h.name&&g.provider===h.provider?h:g);dt("activeEmbeddingModels",b)},f=()=>{let h=t.activeModels.filter(g=>!g.isBuiltIn),b=[...Mb,...h];dt("activeModels",b),new fde.Notice("Chat models refreshed successfully")},p=()=>{let h=t.activeEmbeddingModels.filter(g=>!g.isBuiltIn),b=[...oR,...h];dt("activeEmbeddingModels",b),new fde.Notice("Embedding models refreshed successfully")},m=(h,b=!1)=>{new dde(app,h,b,u).open()};return Gf.default.createElement("div",{className:"tw-space-y-4"},Gf.default.createElement("section",null,Gf.default.createElement("div",{className:"tw-mb-3 tw-text-xl tw-font-bold"},"Chat Models"),Gf.default.createElement(Oke,{models:t.activeModels,onEdit:h=>m(h),onCopy:h=>i(h),onDelete:s,onAdd:()=>r(!0),onUpdateModel:l,onReorderModels:h=>a(h),onRefresh:f,title:"Chat Model"}),Gf.default.createElement(Cke,{open:e,onOpenChange:r,onAdd:h=>{let b=[...t.activeModels,h];dt("activeModels",b)},ping:h=>Kl.instance.getCurrentChainManager().chatModelManager.ping(h)}),Gf.default.createElement("div",{className:"tw-space-y-4"},Gf.default.createElement(pn,{type:"slider",title:"Conversation turns in context",description:"The number of previous conversation turns to include in the context. Default is 15 turns, i.e. 30 messages.",value:t.contextTurns,onChange:h=>dt("contextTurns",h),min:1,max:50,step:1}))),Gf.default.createElement("section",null,Gf.default.createElement("div",{className:"tw-mb-3 tw-text-xl tw-font-bold"},"Embedding Models"),Gf.default.createElement(Oke,{models:t.activeEmbeddingModels,onEdit:h=>m(h,!0),onDelete:c,onCopy:h=>i(h,!0),onAdd:()=>o(!0),onUpdateModel:d,onReorderModels:h=>a(h,!0),onRefresh:p,title:"Embedding Model"}),Gf.default.createElement(Cke,{open:n,onOpenChange:o,onAdd:h=>{let b=[...t.activeEmbeddingModels,h];dt("activeEmbeddingModels",b)},isEmbeddingModel:!0,ping:h=>Us.getInstance().ping(h)})))};var EWt=require("obsidian");var xn=F(X()),TWt=F(wc());var xWt=require("obsidian"),qg=F(X()),CWt=F(wc());function IPn({onConfirm:t,onCancel:e}){let[r,n]=(0,qg.useState)(""),[o,i]=(0,qg.useState)(null),a=u=>{if(u.includes(" ")){i("Extension cannot contain spaces");return}i(null),t(u)};return qg.default.createElement("div",{className:"tw-flex tw-flex-col tw-gap-4"},qg.default.createElement("div",{className:"tw-flex tw-flex-col tw-gap-2"},qg.default.createElement(so,{placeholder:"Enter the extension (e.g. txt, excalidraw.md)",value:r,onChange:u=>{n(u.target.value),i(null)},onKeyDown:u=>{u.key==="Enter"&&(u.preventDefault(),u.stopPropagation(),a(r))}}),o&&qg.default.createElement("p",{className:"tw-text-sm tw-text-error"},o)),qg.default.createElement("div",{className:"tw-flex tw-justify-end tw-gap-2"},qg.default.createElement(ge,{variant:"secondary",onClick:e},"Cancel"),qg.default.createElement(ge,{variant:"default",onClick:()=>a(r)},"Confirm")))}var pde=class extends xWt.Modal{constructor(r,n){super(r);this.onConfirm=n;this.setTitle("Add Extension")}onOpen(){let{contentEl:r}=this;this.root=(0,CWt.createRoot)(r);let n=i=>{this.onConfirm(i),this.close()},o=()=>{this.close()};this.root.render(qg.default.createElement(IPn,{onConfirm:n,onCancel:o}))}onClose(){this.root.unmount()}};var OWt=require("obsidian"),gb=F(X()),PWt=F(wc());function MPn({onConfirm:t,onCancel:e}){let[r,n]=(0,gb.useState)("");return gb.default.createElement("div",{className:"tw-flex tw-flex-col tw-gap-4"},gb.default.createElement("div",{className:"tw-flex tw-flex-col tw-gap-4"},gb.default.createElement("div",null,"Comma separated list of paths, tags, note titles or file extension e.g. folder1, folder1/folder2, #tag1, #tag2, [[note1]], [[note2]], *.jpg, *.excallidraw.md"),gb.default.createElement(so,{placeholder:"Enter the pattern",value:r,onChange:i=>n(i.target.value),onKeyDown:i=>{i.key==="Enter"&&t(r)}})),gb.default.createElement("div",{className:"tw-flex tw-justify-end tw-gap-2"},gb.default.createElement(ge,{variant:"secondary",onClick:e},"Cancel"),gb.default.createElement(ge,{variant:"default",onClick:()=>t(r)},"Confirm")))}var mde=class extends OWt.Modal{constructor(r,n){super(r);this.onConfirm=n;this.setTitle("Add Custom Pattern")}onOpen(){let{contentEl:r}=this;this.root=(0,PWt.createRoot)(r);let n=i=>{this.onConfirm(i),this.close()},o=()=>{this.close()};this.root.render(gb.default.createElement(MPn,{onConfirm:n,onCancel:o}))}onClose(){this.root.unmount()}};function hde({title:t,patterns:e,onRemove:r}){return xn.default.createElement("div",{className:"tw-grid tw-grid-cols-4 tw-gap-2"},xn.default.createElement("div",{className:"tw-font-bold"},t),xn.default.createElement("ul",{className:"tw-col-span-3 tw-m-0 tw-flex tw-list-inside tw-list-disc tw-flex-col tw-gap-1 tw-pl-0"},e.map(n=>xn.default.createElement("li",{key:n,className:"tw-flex tw-gap-2 tw-rounded-md tw-pl-2 tw-pr-1 hover:tw-bg-dropdown-hover"},xn.default.createElement(QI,{className:"tw-flex-1"},n),xn.default.createElement(ge,{variant:"ghost2",size:"fit",onClick:()=>r(n)},xn.default.createElement($i,{className:"tw-size-4"}))))))}function RPn({value:t,onUpdate:e,container:r}){let[n,o]=(0,xn.useState)(t),i=Qh(n),{tagPatterns:a,extensionPatterns:s,folderPatterns:u,notePatterns:l}=VV(i),c=f=>{let p=WV({tagPatterns:f.tagPatterns??a,extensionPatterns:f.extensionPatterns??s,folderPatterns:f.folderPatterns??u,notePatterns:f.notePatterns??l});o(p),e(p)},d=a.length>0||s.length>0||u.length>0||l.length>0;return xn.default.createElement("div",{className:"tw-mt-2 tw-flex tw-flex-col tw-gap-4"},xn.default.createElement("div",{className:"tw-flex tw-max-h-[400px] tw-flex-col tw-gap-2 tw-overflow-y-auto tw-rounded-md tw-border tw-border-solid tw-border-border tw-p-4"},!d&&xn.default.createElement("div",{className:"tw-text-center tw-text-sm"},"No patterns specified"),a.length>0&&xn.default.createElement(hde,{title:"Tags",patterns:a,onRemove:f=>{let p=a.filter(m=>m!==f);c({tagPatterns:p})}}),s.length>0&&xn.default.createElement(hde,{title:"Extensions",patterns:s,onRemove:f=>{let p=s.filter(m=>m!==f);c({extensionPatterns:p})}}),u.length>0&&xn.default.createElement(hde,{title:"Folders",patterns:u,onRemove:f=>{let p=u.filter(m=>m!==f);c({folderPatterns:p})}}),l.length>0&&xn.default.createElement(hde,{title:"Notes",patterns:l,onRemove:f=>{let p=l.filter(m=>m!==f);c({notePatterns:p})}})),xn.default.createElement("div",{className:"tw-flex tw-justify-end tw-gap-2"},xn.default.createElement(pD,null,xn.default.createElement(mD,{asChild:!0},xn.default.createElement(ge,{variant:"secondary"},"Add...")),xn.default.createElement(nb,{align:"start",container:r},xn.default.createElement(hi,{onSelect:()=>{new NU(app,f=>{let p=kne(f);a.includes(p)||c({tagPatterns:[...a,p]})}).open()}},xn.default.createElement("div",{className:"tw-flex tw-items-center tw-gap-2"},xn.default.createElement(NR,{className:"tw-size-4"}),"Tag")),xn.default.createElement(hi,{onSelect:()=>{new jU(app,f=>{u.includes(f)||c({folderPatterns:[...u,f]})}).open()}},xn.default.createElement("div",{className:"tw-flex tw-items-center tw-gap-2"},xn.default.createElement(cy,{className:"tw-size-4"}),"Folder")),xn.default.createElement(hi,{onSelect:()=>{new KI({app,onNoteSelect:f=>{let p=KV(f);l.includes(p)||c({notePatterns:[...l,p]})},excludeNotePaths:[],titleOnly:!0}).open()}},xn.default.createElement("div",{className:"tw-flex tw-items-center tw-gap-2"},xn.default.createElement(ly,{className:"tw-size-4"}),"Note")),xn.default.createElement(hi,{onSelect:()=>{new pde(app,f=>{let p=ZPt(f);s.includes(p)||c({extensionPatterns:[...s,p]})}).open()}},xn.default.createElement("div",{className:"tw-flex tw-items-center tw-gap-2"},xn.default.createElement(L4,{className:"tw-size-4"}),"Extension")),xn.default.createElement(hi,{onSelect:()=>{new mde(app,f=>{let p=Qh(f),{tagPatterns:m,extensionPatterns:h,folderPatterns:b,notePatterns:g}=VV(p);c({tagPatterns:[...a,...m],extensionPatterns:[...s,...h],folderPatterns:[...u,...b],notePatterns:[...l,...g]})}).open()}},xn.default.createElement("div",{className:"tw-flex tw-items-center tw-gap-2"},xn.default.createElement(DR,{className:"tw-size-4"}),"Custom"))))))}var l9=class extends EWt.Modal{constructor(r,n,o,i){super(r);this.onUpdate=n;this.value=o;this.setTitle(i)}onOpen(){let{contentEl:r}=this;this.root=(0,TWt.createRoot)(r);let n=o=>{this.onUpdate(o)};this.root.render(xn.default.createElement(RPn,{value:this.value,onUpdate:n,container:this.contentEl}))}onClose(){this.root.unmount()}};kr();tr();var Ur=F(X()),AWt=()=>{let t=Tn(),e=r=>{let n=parseInt(r);n!==t.numPartitions&&new dz(app,async()=>{dt("numPartitions",n),await qi.getInstance().indexVaultToVectorStore(!0)}).open()};return Ur.default.createElement("div",{className:"tw-space-y-4"},Ur.default.createElement("section",null,Ur.default.createElement("div",{className:"tw-space-y-4"},Ur.default.createElement(pn,{type:"select",title:"Auto-Index Strategy",description:Ur.default.createElement("div",{className:"tw-flex tw-items-center tw-gap-1.5"},Ur.default.createElement("span",{className:"tw-leading-none"},"Decide when you want the vault to be indexed."),Ur.default.createElement(po,{delayDuration:0},Ur.default.createElement(Mt,null,Ur.default.createElement(Rt,{asChild:!0},Ur.default.createElement(oi,{className:"tw-size-4"})),Ur.default.createElement(It,null,Ur.default.createElement("div",{className:"tw-space-y-2 tw-py-2"},Ur.default.createElement("div",{className:"tw-space-y-1"},Ur.default.createElement("div",{className:"tw-text-sm tw-text-muted"},"Choose when to index your vault:"),Ur.default.createElement("ul",{className:"tw-list-disc tw-space-y-1 tw-pl-2 tw-text-sm"},Ur.default.createElement("li",null,Ur.default.createElement("div",{className:"tw-flex tw-items-center tw-gap-1"},Ur.default.createElement("strong",{className:"tw-inline-block tw-whitespace-nowrap"},"NEVER:"),Ur.default.createElement("span",null,"Manual indexing via command or refresh only"))),Ur.default.createElement("li",null,Ur.default.createElement("div",{className:"tw-flex tw-items-center tw-gap-1"},Ur.default.createElement("strong",{className:"tw-inline-block tw-whitespace-nowrap"},"ON STARTUP:"),Ur.default.createElement("span",null,"Index updates when plugin loads or reloads"))),Ur.default.createElement("li",null,Ur.default.createElement("div",{className:"tw-flex tw-items-center tw-gap-1"},Ur.default.createElement("strong",{className:"tw-inline-block tw-whitespace-nowrap"},"ON MODE SWITCH:"),Ur.default.createElement("span",null,"Updates when entering QA mode (Recommended)"))))),Ur.default.createElement("p",{className:"tw-text-sm tw-text-callout-warning"},"Warning: Cost implications for large vaults with paid models")))))),value:t.indexVaultToVectorStore,onChange:r=>{dt("indexVaultToVectorStore",r)},options:S4e.map(r=>({label:r,value:r})),placeholder:"Strategy"}),Ur.default.createElement(pn,{type:"slider",title:"Max Sources",description:"Copilot goes through your vault to find relevant blocks and passes the top N blocks to the LLM. Default for N is 3. Increase if you want more sources included in the answer generation step.",min:1,max:128,step:1,value:t.maxSourceChunks,onChange:r=>dt("maxSourceChunks",r)}),Ur.default.createElement(pn,{type:"slider",title:"Requests per Minute",description:"Default is 90. Decrease if you are rate limited by your embedding provider.",min:10,max:300,step:10,value:t.embeddingRequestsPerMin,onChange:r=>dt("embeddingRequestsPerMin",r)}),Ur.default.createElement(pn,{type:"slider",title:"Embedding Batch Size",description:"Default is 16. Increase if you are rate limited by your embedding provider.",min:1,max:128,step:1,value:t.embeddingBatchSize,onChange:r=>dt("embeddingBatchSize",r)}),Ur.default.createElement(pn,{type:"select",title:"Number of Partitions",description:"Number of partitions for Copilot index. Default is 1. Increase if you have issues indexing large vaults. Warning: Changes require clearing and rebuilding the index!",value:t.numPartitions.toString(),onChange:e,options:["1","2","3","4","5","6","7","8","12","16","20","24","28","32","36","40"].map(r=>({label:r,value:r}))}),Ur.default.createElement(pn,{type:"custom",title:"Exclusions",description:Ur.default.createElement(Ur.default.Fragment,null,Ur.default.createElement("p",null,"Exclude folders, tags, note titles or file extensions from being indexed. Previously indexed files will remain until a force re-index is performed."))},Ur.default.createElement(ge,{variant:"secondary",onClick:()=>new l9(app,r=>dt("qaExclusions",r),t.qaExclusions,"Manage Exclusions").open()},"Manage")),Ur.default.createElement(pn,{type:"custom",title:"Inclusions",description:Ur.default.createElement("p",null,"Index only the specified paths, tags, or note titles. Exclusions take precedence over inclusions. Previously indexed files will remain until a force re-index is performed.")},Ur.default.createElement(ge,{variant:"secondary",onClick:()=>new l9(app,r=>dt("qaInclusions",r),t.qaInclusions,"Manage Inclusions").open()},"Manage")),Ur.default.createElement(pn,{type:"switch",title:"Enable Obsidian Sync for Copilot index",description:"If enabled, the index will be stored in the .obsidian folder and synced with Obsidian Sync by default. If disabled, it will be stored in .copilot-index folder at vault root.",checked:t.enableIndexSync,onCheckedChange:r=>dt("enableIndexSync",r)}),Ur.default.createElement(pn,{type:"switch",title:"Disable index loading on mobile",description:"When enabled, Copilot index won't be loaded on mobile devices to save resources. Only chat mode will be available. Any existing index from desktop sync will be preserved. Uncheck to enable QA modes on mobile.",checked:t.disableIndexOnMobile,onCheckedChange:r=>dt("disableIndexOnMobile",r)}))))};var MWt=["basic","model","QA","command","plus","advanced"],jPn={basic:Dn.default.createElement(P4,{className:"tw-size-5"}),model:Dn.default.createElement(E4,{className:"tw-size-5"}),QA:Dn.default.createElement(T4,{className:"tw-size-5"}),command:Dn.default.createElement(Hb,{className:"tw-size-5"}),plus:Dn.default.createElement(Ih,{className:"tw-size-5"}),advanced:Dn.default.createElement(DR,{className:"tw-size-5"})},NPn={basic:()=>Dn.default.createElement(bWt,null),model:()=>Dn.default.createElement(SWt,null),QA:()=>Dn.default.createElement(AWt,null),command:()=>Dn.default.createElement(dWt,null),plus:()=>Dn.default.createElement(_Wt,null),advanced:()=>Dn.default.createElement(fWt,null)},IWt=MWt.map(t=>({id:t,icon:jPn[t],label:t.charAt(0).toUpperCase()+t.slice(1)})),DPn=()=>{let{selectedTab:t,setSelectedTab:e}=nz();return Dn.default.createElement("div",{className:"tw-flex tw-flex-col"},Dn.default.createElement("div",{className:"tw-inline-flex tw-rounded-lg"},IWt.map((r,n)=>Dn.default.createElement(g6t,{key:r.id,tab:r,isSelected:t===r.id,onClick:()=>e(r.id),isFirst:n===0,isLast:n===IWt.length-1}))),Dn.default.createElement("div",{className:"tw-w-full tw-border tw-border-solid"}),Dn.default.createElement("div",null,MWt.map(r=>{let n=NPn[r];return Dn.default.createElement(y6t,{key:r,id:r,isSelected:t===r},Dn.default.createElement(n,null))})))},LPn=({plugin:t})=>{let[e,r]=Dn.default.useState(0),{latestVersion:n,hasUpdate:o}=rce(t.manifest.version),i=async()=>{new qce(app,async()=>{r4e(),r(s=>s+1)}).open()};return Dn.default.createElement(_6t,null,Dn.default.createElement("div",null,Dn.default.createElement("div",{className:"tw-flex tw-flex-col tw-gap-2"},Dn.default.createElement("h1",{className:"tw-flex tw-flex-col tw-gap-2 sm:tw-flex-row sm:tw-items-center sm:tw-justify-between"},Dn.default.createElement("div",{className:"tw-flex tw-items-center tw-gap-2"},Dn.default.createElement("span",null,"Copilot Settings"),Dn.default.createElement("div",{className:"tw-flex tw-items-center tw-gap-1"},Dn.default.createElement("span",{className:"tw-text-xs tw-text-muted"},"v",t.manifest.version),n&&Dn.default.createElement(Dn.default.Fragment,null,o?Dn.default.createElement("a",{href:"obsidian://show-plugin?id=copilot",target:"_blank",rel:"noopener noreferrer",className:"tw-text-xs tw-text-accent hover:tw-underline"},"(Update to v",n,")"):Dn.default.createElement("span",{className:"tw-text-xs tw-text-normal"}," (up to date)")))),Dn.default.createElement("div",{className:"tw-self-end sm:tw-self-auto"},Dn.default.createElement(ge,{variant:"secondary",size:"sm",onClick:i},"Reset Settings")))),Dn.default.createElement(DPn,{key:e})))},RWt=LPn;var gde=class extends c9.PluginSettingTab{constructor(e,r){super(e,r),this.plugin=r}async reloadPlugin(){try{this.app.workspace.getLeavesOfType(_s)[0]?.view&&ue().autosaveChat&&await this.plugin.autosaveCurrentChat();let r=this.plugin.app;await r.plugins.disablePlugin("copilot"),await r.plugins.enablePlugin("copilot"),r.setting.openTabById("copilot").display(),new c9.Notice("Plugin reloaded successfully.")}catch(e){new c9.Notice("Failed to reload the plugin. Please reload manually."),console.error("Error reloading plugin:",e)}}display(){let{containerEl:e}=this;e.empty(),e.style.userSelect="text";let r=e.createDiv("div");(0,jWt.createRoot)(r).render(Pke.default.createElement(ike.Provider,{value:e},Pke.default.createElement(RWt,{plugin:this.plugin})))}};tr();var YP=require("obsidian");Ko();wn();yE();um();var yb=require("obsidian"),Et=F(X()),NWt=F(wc());tr();function FPn(t){let[e]=(0,Et.useState)(new w5({returnMessages:!0,memoryKey:"history"})),[r,n]=(0,Et.useState)(null);return(0,Et.useEffect)(()=>{async function o(){let i=await HN.getInstance().createModelInstance(t),a=cp.fromMessages([gE.fromTemplate("You are a helpful assistant. You'll help the user with their content editing needs."),new Tb("history"),Ab.fromTemplate("{input}")]),s=di.from([{input:u=>u.input,memory:()=>e.loadMemoryVariables({})},{input:u=>u.input,history:u=>u.memory.history},a,i]);n(s)}o()},[t,e]),{chatChain:r,chatMemory:e}}function kPn({originalText:t,command:e,onInsert:r,onReplace:n}){let[o,i]=(0,Et.useState)(null),[a,s]=(0,Et.useState)(null),[u,l]=(0,Et.useState)(""),c=(0,Et.useRef)(null),d=(0,Et.useRef)(null),[f,p]=(0,Et.useState)(!0),[m]=$L(),h=Tn(),b=(0,Et.useMemo)(()=>aG(e.modelKey||m,h.activeModels),[e.modelKey,m,h.activeModels]),{chatChain:g,chatMemory:y}=FPn(b),w=e.title,S=(0,Et.useCallback)(async(R,j)=>{if(!g)return console.error("Chat chain not initialized"),new yb.Notice("Chat engine not ready. Please try again."),p(!1),null;try{i(null),s(null),p(!0);let N="",k=await g.bind({signal:j.signal}).stream({input:R});for await(let H of k){if(j.signal.aborted)break;let V=typeof H.content=="string"?H.content:"";N+=V,i(N)}if(!j.signal.aborted){let H=N.trim();return s(H),p(!1),await y.saveContext({input:R},{output:H}),H}return null}catch(N){return fe("Error generating response:",N),p(!1),null}},[g,y]);(0,Et.useEffect)(()=>{let R=new AbortController;C.current=R;async function j(){if(g)try{let N=await oNe(e.content,t);await S(N,R)}catch(N){fe("Error in initial response:",N),p(!1)}}return j(),()=>{R.abort()}},[e.content,t,g,S]);let C=(0,Et.useRef)(null),P=async()=>{if(!u.trim()||!g){g||new yb.Notice("Chat engine not ready. Please try again.");return}let R=new AbortController;C.current=R;let j=await oNe(u,t,!0);try{await S(j,R)&&l("")}finally{R.signal.aborted&&(p(!1),s(o??"")),C.current=null}},E=()=>{C.current&&(C.current.abort(),C.current=null,p(!1))},A=R=>{R.nativeEvent.isComposing||(!f&&a&&!I&&(R.key==="Enter"&&(yb.Platform.isMacOS?R.metaKey:R.ctrlKey)&&!R.shiftKey&&(R.preventDefault(),n(a)),R.key==="Enter"&&(yb.Platform.isMacOS?R.metaKey:R.ctrlKey)&&R.shiftKey&&(R.preventDefault(),r(a))),I&&R.key==="Enter"&&!R.shiftKey&&!R.metaKey&&!R.ctrlKey&&(R.preventDefault(),P()))};(0,Et.useEffect)(()=>{if(c.current&&o&&f){let R=c.current;R.scrollTop=R.scrollHeight}},[o,f]);let I=!f&&u.trim().length>0;return Et.default.createElement("div",{className:"tw-flex tw-flex-col tw-gap-4",onKeyDown:A},Et.default.createElement("div",{className:"tw-max-h-60 tw-overflow-y-auto tw-whitespace-pre-wrap tw-text-muted"},t),Et.default.createElement("div",{className:"tw-flex tw-flex-col tw-gap-2"},w&&Et.default.createElement("div",{className:"tw-flex tw-items-center tw-gap-2 tw-font-bold tw-text-normal"},Et.default.createElement(Kb,{className:"tw-size-4"}),w)),Et.default.createElement("div",{className:"tw-group tw-relative"},Et.default.createElement("textarea",{ref:c,className:"tw-peer tw-h-60 tw-w-full tw-text-text",value:a??o??"loading...",disabled:a==null,onChange:R=>s(R.target.value)}),a&&Et.default.createElement("button",{className:"tw-absolute tw-right-2 tw-top-2 tw-opacity-0 tw-transition-opacity group-hover:tw-opacity-100 peer-focus-visible:!tw-opacity-0",onClick:()=>{navigator.clipboard.writeText(a),new yb.Notice("Copied to clipboard")}},Et.default.createElement(uy,{className:"tw-size-4 hover:tw-text-accent"}))),!f&&a&&Et.default.createElement("div",{className:"tw-flex tw-flex-col tw-gap-2"},Et.default.createElement("textarea",{autoFocus:!0,ref:d,className:"tw-h-20 tw-w-full tw-text-text",placeholder:"Enter follow-up instructions...",value:u,onChange:R=>l(R.target.value)})),Et.default.createElement("div",{className:"tw-flex tw-justify-between tw-gap-2"},Et.default.createElement("div",{className:"tw-flex tw-items-center tw-gap-2 tw-text-xs tw-font-bold tw-text-faint"},Et.default.createElement(AR,{className:"tw-size-4"}),Dle(b)),Et.default.createElement("div",{className:"tw-flex tw-gap-2"},f?Et.default.createElement(ge,{variant:"secondary",onClick:E},"Stop"):I?Et.default.createElement(ge,{onClick:P,className:"tw-flex tw-items-center tw-gap-1"},Et.default.createElement("span",null,"Submit"),Et.default.createElement(gm,{className:"tw-size-3"})):Et.default.createElement(Et.default.Fragment,null,Et.default.createElement(ge,{onClick:()=>r(a??""),className:"tw-flex tw-items-center tw-gap-1"},Et.default.createElement("span",null,"Insert"),Et.default.createElement("div",{className:"tw-flex tw-items-center tw-text-xs tw-text-normal"},yb.Platform.isMacOS?Et.default.createElement(Et.default.Fragment,null,Et.default.createElement(Hb,{className:"tw-size-3"}),Et.default.createElement(TC,{className:"tw-size-3"}),Et.default.createElement(gm,{className:"tw-size-3"})):Et.default.createElement(Et.default.Fragment,null,Et.default.createElement("span",{className:"tw-text-xs"},"Ctrl"),Et.default.createElement(TC,{className:"tw-size-3"}),Et.default.createElement(gm,{className:"tw-size-3"})))),Et.default.createElement(ge,{onClick:()=>n(a??""),className:"tw-flex tw-items-center tw-gap-1"},Et.default.createElement("span",null,"Replace"),Et.default.createElement("div",{className:"tw-flex tw-items-center tw-text-xs tw-text-normal"},yb.Platform.isMacOS?Et.default.createElement(Et.default.Fragment,null,Et.default.createElement(Hb,{className:"tw-size-3"}),Et.default.createElement(gm,{className:"tw-size-3"})):Et.default.createElement(Et.default.Fragment,null,Et.default.createElement("span",{className:"tw-text-xs"},"Ctrl"),Et.default.createElement(gm,{className:"tw-size-3"}))))))))}var yde=class extends yb.Modal{constructor(r,n){super(r);this.configs=n}onOpen(){let{contentEl:r}=this;this.root=(0,NWt.createRoot)(r);let{selectedText:n,command:o}=this.configs,i=s=>{S2(s),this.close()},a=s=>{S2(s,!0),this.close()};this.root.render(Et.default.createElement(kPn,{originalText:n,command:o,onInsert:i,onReplace:a}))}onClose(){this.root.unmount()}};var DWt=F(KAe());var bde=class{constructor(e,r){this.handleFileModify=(0,DWt.default)(async e=>{if(uU(e)){let r=await N5(e);this.registerCommand(r),j5(r,r.title)}},3e3,{leading:!1,trailing:!0});this.handleFileCreation=async e=>{if(uU(e)){let r=await N5(e);this.registerCommand(r),zue(r.title)}};this.handleFileDeletion=async e=>{if(uU(e)){let r=sU(e.basename);this.plugin.removeCommand(r),R5(e.basename)}};this.handleFileRename=async(e,r)=>{let n=r.split("/").pop()?.replace(/\.md$/,"");if(n){let o=sU(n);this.plugin.removeCommand(o),R5(n)}if(uU(e)){let o=await N5(e);this.registerCommand(o),j5(o,o.title)}};this.plugin=e,this.vault=r,this.initializeEventListeners()}async initialize(){await Vue(),this.registerCommands()}async registerCommands(){Px().forEach(r=>{this.registerCommand(r)})}cleanup(){this.vault.off("create",this.handleFileCreation),this.vault.off("delete",this.handleFileDeletion),this.vault.off("rename",this.handleFileRename),this.vault.off("modify",this.handleFileModify)}initializeEventListeners(){this.vault.on("create",this.handleFileCreation),this.vault.on("delete",this.handleFileDeletion),this.vault.on("rename",this.handleFileRename),this.vault.on("modify",this.handleFileModify)}registerCommand(e){let r=sU(e.title);this.plugin.removeCommand(r),this.plugin.addCommand({id:r,name:e.title,editorCallback:n=>{new yde(this.plugin.app,{selectedText:n.getSelection(),command:e}).open(),Yp.getInstance().recordUsage(e)}})}};var _de=class extends YP.Plugin{constructor(){super(...arguments);this.userMessageHistory=[]}async onload(){await this.loadSettings(),this.settingsUnsubscriber=ga(async(r,n)=>{n.enableEncryption?await this.saveData(await H4e(n)):await this.saveData(n),rNe(this,r,n)}),this.addSettingTab(new gde(this.app,this)),this.sharedState=new l6t(this),this.vectorStoreManager=qi.getInstance(),this.brevilabsClient=Ii.getInstance(),this.brevilabsClient.setPluginVersion(this.manifest.version),zne(),this.projectManager=Kl.getInstance(this.app,this.vectorStoreManager,this),this.fileParserManager=new AA(this.brevilabsClient,this.app.vault),this.registerView(_s,r=>new cM(r,this)),this.registerView(pW,r=>new Vle(r)),this.initActiveLeafChangeHandler(),this.addRibbonIcon("message-square","Open Copilot Chat",r=>{this.activateView()}),rNe(this,void 0,ue()),Gj.initTools(this.app.vault),this.registerEvent(this.app.workspace.on("editor-menu",r=>h6t(r))),this.registerEvent(this.app.workspace.on("active-leaf-change",r=>{if(r&&r.view instanceof YP.MarkdownView&&r.view.file){let o=this.app.workspace.getLeavesOfType(_s).find(i=>i.view instanceof cM)?.view;if(o){let i=new CustomEvent(vh.ACTIVE_LEAF_CHANGE);o.eventTarget.dispatchEvent(i)}}})),this.autocompleteService=kue.getInstance(this),this.customCommandRegister=new bde(this,this.app.vault),this.app.workspace.onLayoutReady(()=>{this.customCommandRegister.initialize().then(lWt).then(cWt)})}async onunload(){this.vectorStoreManager&&this.vectorStoreManager.onunload(),this.projectManager&&this.projectManager.onunload(),this.customCommandRegister.cleanup(),this.settingsUnsubscriber?.(),this.autocompleteService?.destroy(),ie("Copilot plugin unloaded")}updateUserMessageHistory(r){this.userMessageHistory=[...this.userMessageHistory,r]}async autosaveCurrentChat(){if(ue().autosaveChat){let r=this.app.workspace.getLeavesOfType(_s)[0]?.view;r&&r.sharedState.chatHistory.length>0&&await r.saveChat()}}async processText(r,n,o,i=!0){let a=await r.getSelection();this.app.workspace.getLeavesOfType(_s).length>0||await this.activateView(),setTimeout(()=>{let u=this.app.workspace.getLeavesOfType(_s).find(l=>l.view instanceof cM)?.view;if(u&&(!i||a)){let l=new CustomEvent(n,{detail:{selectedText:a,eventSubtype:o}});u.eventTarget.dispatchEvent(l)}},0)}processSelection(r,n,o){this.processText(r,n,o)}emitChatIsVisible(){let r=this.app.workspace.getLeavesOfType(_s).find(n=>n.view instanceof cM)?.view;if(r){let n=new CustomEvent(vh.CHAT_IS_VISIBLE);r.eventTarget.dispatchEvent(n)}}initActiveLeafChangeHandler(){this.registerEvent(this.app.workspace.on("active-leaf-change",r=>{r&&r.getViewState().type===_s&&this.emitChatIsVisible()}))}getCurrentEditorOrDummy(){let r=this.app.workspace.getActiveViewOfType(YP.MarkdownView);return{getSelection:()=>{let n=r?.editor?.getSelection();if(n)return n;let o=this.app.workspace.getActiveFile();return o?this.app.vault.cachedRead(o):""},replaceSelection:r?.editor?.replaceSelection.bind(r.editor)||(()=>{})}}processCustomPrompt(r,n){let o=this.getCurrentEditorOrDummy();this.processText(o,r,n,!1)}toggleView(){this.app.workspace.getLeavesOfType(_s).length>0?this.deactivateView():this.activateView()}async activateView(){let r=this.app.workspace.getLeavesOfType(_s);r.length===0?ue().defaultOpenArea==="view"?await this.app.workspace.getRightLeaf(!1).setViewState({type:_s,active:!0}):await this.app.workspace.getLeaf(!0).setViewState({type:_s,active:!0}):this.app.workspace.revealLeaf(r[0]),this.emitChatIsVisible()}async deactivateView(){this.app.workspace.detachLeavesOfType(_s)}async loadSettings(){let r=await this.loadData(),n=n4e(r);_E(n)}mergeActiveModels(r,n){let o=new Map;return r.forEach(i=>{let a=Fr(i),s=o.get(a);s?o.set(a,{...i,isBuiltIn:s.isBuiltIn||i.isBuiltIn}):o.set(a,i)}),Array.from(o.values())}async loadCopilotChatHistory(){let r=await this.getChatHistoryFiles();if(r.length===0){new YP.Notice("No chat history found.");return}new Bce(this.app,r,this.loadChatHistory.bind(this)).open()}async getChatHistoryFiles(){let r=this.app.vault.getAbstractFileByPath(ue().defaultSaveFolder);if(!(r instanceof YP.TFolder))return[];let o=(await this.app.vault.getMarkdownFiles()).filter(s=>s.path.startsWith(r.path)),a=yc()?.id;if(a){let s=`${a}__`;return o.filter(u=>u.basename.startsWith(s))}else return o.filter(s=>!s.basename.match(/^[a-zA-Z0-9-]+__/))}async loadChatHistory(r){await this.autosaveCurrentChat();let n=await this.app.vault.read(r),o=dEt(n);this.sharedState.clearChatHistory(),o.forEach(a=>this.sharedState.addMessage(a)),await kj(o,this.projectManager.getCurrentChainManager().memoryManager);let i=this.app.workspace.getLeavesOfType(_s)[0];i?i.view.updateView():this.activateView()}async handleNewChat(){await this.autosaveCurrentChat();let r=this.app.workspace.getLeavesOfType(_s)[0];if(r){let n=r.view,o=new CustomEvent(vh.ABORT_STREAM,{detail:{reason:"new-chat"}});n.eventTarget.dispatchEvent(o)}this.sharedState.clearChatHistory(),this.projectManager.getCurrentChainManager().memoryManager.clearChatMemory(),r?r.view.updateView():await this.activateView()}async newChat(){await this.handleNewChat()}async customSearchDB(r,n,o){return(await new cx({minSimilarityScore:.3,maxK:20,salientTerms:n,textWeight:o}).getOramaChunks(r,n)).map(s=>({content:s.pageContent,metadata:s.metadata}))}};
/*! Bundled license information:

@langchain/core/dist/utils/fast-json-patch/src/helpers.js:
  (*!
   * https://github.com/Starcounter-Jack/JSON-Patch
   * (c) 2017-2022 Joachim Wester
   * MIT licensed
   *)

@langchain/core/dist/utils/fast-json-patch/src/duplex.js:
  (*!
   * https://github.com/Starcounter-Jack/JSON-Patch
   * (c) 2013-2021 Joachim Wester
   * MIT license
   *)

mustache/mustache.mjs:
  (*!
   * mustache.js - Logic-less {{mustache}} templates with JavaScript
   * http://github.com/janl/mustache.js
   *)

react/cjs/react.production.min.js:
  (**
   * @license React
   * react.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

moment/moment.js:
  (*! moment.js *)
  (*! version : 2.29.4 *)
  (*! authors : Tim Wood, Iskren Chernev, Moment.js contributors *)
  (*! license : MIT *)
  (*! momentjs.com *)

ieee754/index.js:
  (*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> *)

buffer/index.js:
  (*!
   * The buffer module from node.js, for the browser.
   *
   * @author   Feross Aboukhadijeh <https://feross.org>
   * @license  MIT
   *)

scheduler/cjs/scheduler.production.min.js:
  (**
   * @license React
   * scheduler.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

react-dom/cjs/react-dom.production.min.js:
  (**
   * @license React
   * react-dom.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

react/cjs/react-jsx-runtime.production.min.js:
  (**
   * @license React
   * react-jsx-runtime.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

tslib/tslib.es6.js:
  (*! *****************************************************************************
  Copyright (c) Microsoft Corporation.
  
  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.
  
  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** *)

safe-buffer/index.js:
  (*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)

@langchain/core/dist/utils/js-sha1/hash.js:
  (*
   * [js-sha1]{@link https://github.com/emn178/js-sha1}
   *
   * @version 0.6.0
   * @author Chen, Yi-Cyuan [emn178@gmail.com]
   * @copyright Chen, Yi-Cyuan 2014-2017
   * @license MIT
   *)

crypto-js/ripemd160.js:
  (** @preserve
  	(c) 2012 by Cédric Mesnil. All rights reserved.
  
  	Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:
  
  	    - Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
  	    - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.
  
  	THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
  	*)

crypto-js/mode-ctr-gladman.js:
  (** @preserve
   * Counter block mode compatible with  Dr Brian Gladman fileenc.c
   * derived from CryptoJS.mode.CTR
   * Jan Hruby jhruby.web@gmail.com
   *)

lucide-react/dist/esm/shared/src/utils.js:
  (**
   * @license lucide-react v0.462.0 - ISC
   *
   * This source code is licensed under the ISC license.
   * See the LICENSE file in the root directory of this source tree.
   *)

lucide-react/dist/esm/defaultAttributes.js:
  (**
   * @license lucide-react v0.462.0 - ISC
   *
   * This source code is licensed under the ISC license.
   * See the LICENSE file in the root directory of this source tree.
   *)

lucide-react/dist/esm/Icon.js:
  (**
   * @license lucide-react v0.462.0 - ISC
   *
   * This source code is licensed under the ISC license.
   * See the LICENSE file in the root directory of this source tree.
   *)

lucide-react/dist/esm/createLucideIcon.js:
  (**
   * @license lucide-react v0.462.0 - ISC
   *
   * This source code is licensed under the ISC license.
   * See the LICENSE file in the root directory of this source tree.
   *)

lucide-react/dist/esm/icons/arrow-big-up.js:
  (**
   * @license lucide-react v0.462.0 - ISC
   *
   * This source code is licensed under the ISC license.
   * See the LICENSE file in the root directory of this source tree.
   *)

lucide-react/dist/esm/icons/arrow-right.js:
  (**
   * @license lucide-react v0.462.0 - ISC
   *
   * This source code is licensed under the ISC license.
   * See the LICENSE file in the root directory of this source tree.
   *)

lucide-react/dist/esm/icons/bot.js:
  (**
   * @license lucide-react v0.462.0 - ISC
   *
   * This source code is licensed under the ISC license.
   * See the LICENSE file in the root directory of this source tree.
   *)

lucide-react/dist/esm/icons/check.js:
  (**
   * @license lucide-react v0.462.0 - ISC
   *
   * This source code is licensed under the ISC license.
   * See the LICENSE file in the root directory of this source tree.
   *)

lucide-react/dist/esm/icons/chevron-down.js:
  (**
   * @license lucide-react v0.462.0 - ISC
   *
   * This source code is licensed under the ISC license.
   * See the LICENSE file in the root directory of this source tree.
   *)

lucide-react/dist/esm/icons/chevron-right.js:
  (**
   * @license lucide-react v0.462.0 - ISC
   *
   * This source code is licensed under the ISC license.
   * See the LICENSE file in the root directory of this source tree.
   *)

lucide-react/dist/esm/icons/chevron-up.js:
  (**
   * @license lucide-react v0.462.0 - ISC
   *
   * This source code is licensed under the ISC license.
   * See the LICENSE file in the root directory of this source tree.
   *)

lucide-react/dist/esm/icons/circle-help.js:
  (**
   * @license lucide-react v0.462.0 - ISC
   *
   * This source code is licensed under the ISC license.
   * See the LICENSE file in the root directory of this source tree.
   *)

lucide-react/dist/esm/icons/circle-plus.js:
  (**
   * @license lucide-react v0.462.0 - ISC
   *
   * This source code is licensed under the ISC license.
   * See the LICENSE file in the root directory of this source tree.
   *)

lucide-react/dist/esm/icons/circle-stop.js:
  (**
   * @license lucide-react v0.462.0 - ISC
   *
   * This source code is licensed under the ISC license.
   * See the LICENSE file in the root directory of this source tree.
   *)

lucide-react/dist/esm/icons/circle-x.js:
  (**
   * @license lucide-react v0.462.0 - ISC
   *
   * This source code is licensed under the ISC license.
   * See the LICENSE file in the root directory of this source tree.
   *)

lucide-react/dist/esm/icons/circle.js:
  (**
   * @license lucide-react v0.462.0 - ISC
   *
   * This source code is licensed under the ISC license.
   * See the LICENSE file in the root directory of this source tree.
   *)

lucide-react/dist/esm/icons/clipboard.js:
  (**
   * @license lucide-react v0.462.0 - ISC
   *
   * This source code is licensed under the ISC license.
   * See the LICENSE file in the root directory of this source tree.
   *)

lucide-react/dist/esm/icons/cog.js:
  (**
   * @license lucide-react v0.462.0 - ISC
   *
   * This source code is licensed under the ISC license.
   * See the LICENSE file in the root directory of this source tree.
   *)

lucide-react/dist/esm/icons/command.js:
  (**
   * @license lucide-react v0.462.0 - ISC
   *
   * This source code is licensed under the ISC license.
   * See the LICENSE file in the root directory of this source tree.
   *)

lucide-react/dist/esm/icons/copy.js:
  (**
   * @license lucide-react v0.462.0 - ISC
   *
   * This source code is licensed under the ISC license.
   * See the LICENSE file in the root directory of this source tree.
   *)

lucide-react/dist/esm/icons/corner-down-left.js:
  (**
   * @license lucide-react v0.462.0 - ISC
   *
   * This source code is licensed under the ISC license.
   * See the LICENSE file in the root directory of this source tree.
   *)

lucide-react/dist/esm/icons/cpu.js:
  (**
   * @license lucide-react v0.462.0 - ISC
   *
   * This source code is licensed under the ISC license.
   * See the LICENSE file in the root directory of this source tree.
   *)

lucide-react/dist/esm/icons/database.js:
  (**
   * @license lucide-react v0.462.0 - ISC
   *
   * This source code is licensed under the ISC license.
   * See the LICENSE file in the root directory of this source tree.
   *)

lucide-react/dist/esm/icons/download.js:
  (**
   * @license lucide-react v0.462.0 - ISC
   *
   * This source code is licensed under the ISC license.
   * See the LICENSE file in the root directory of this source tree.
   *)

lucide-react/dist/esm/icons/ellipsis-vertical.js:
  (**
   * @license lucide-react v0.462.0 - ISC
   *
   * This source code is licensed under the ISC license.
   * See the LICENSE file in the root directory of this source tree.
   *)

lucide-react/dist/esm/icons/ellipsis.js:
  (**
   * @license lucide-react v0.462.0 - ISC
   *
   * This source code is licensed under the ISC license.
   * See the LICENSE file in the root directory of this source tree.
   *)

lucide-react/dist/esm/icons/external-link.js:
  (**
   * @license lucide-react v0.462.0 - ISC
   *
   * This source code is licensed under the ISC license.
   * See the LICENSE file in the root directory of this source tree.
   *)

lucide-react/dist/esm/icons/eye-off.js:
  (**
   * @license lucide-react v0.462.0 - ISC
   *
   * This source code is licensed under the ISC license.
   * See the LICENSE file in the root directory of this source tree.
   *)

lucide-react/dist/esm/icons/eye.js:
  (**
   * @license lucide-react v0.462.0 - ISC
   *
   * This source code is licensed under the ISC license.
   * See the LICENSE file in the root directory of this source tree.
   *)

lucide-react/dist/esm/icons/file-audio.js:
  (**
   * @license lucide-react v0.462.0 - ISC
   *
   * This source code is licensed under the ISC license.
   * See the LICENSE file in the root directory of this source tree.
   *)

lucide-react/dist/esm/icons/file-image.js:
  (**
   * @license lucide-react v0.462.0 - ISC
   *
   * This source code is licensed under the ISC license.
   * See the LICENSE file in the root directory of this source tree.
   *)

lucide-react/dist/esm/icons/file-input.js:
  (**
   * @license lucide-react v0.462.0 - ISC
   *
   * This source code is licensed under the ISC license.
   * See the LICENSE file in the root directory of this source tree.
   *)

lucide-react/dist/esm/icons/file-output.js:
  (**
   * @license lucide-react v0.462.0 - ISC
   *
   * This source code is licensed under the ISC license.
   * See the LICENSE file in the root directory of this source tree.
   *)

lucide-react/dist/esm/icons/file-text.js:
  (**
   * @license lucide-react v0.462.0 - ISC
   *
   * This source code is licensed under the ISC license.
   * See the LICENSE file in the root directory of this source tree.
   *)

lucide-react/dist/esm/icons/file-video.js:
  (**
   * @license lucide-react v0.462.0 - ISC
   *
   * This source code is licensed under the ISC license.
   * See the LICENSE file in the root directory of this source tree.
   *)

lucide-react/dist/esm/icons/file.js:
  (**
   * @license lucide-react v0.462.0 - ISC
   *
   * This source code is licensed under the ISC license.
   * See the LICENSE file in the root directory of this source tree.
   *)

lucide-react/dist/esm/icons/folder.js:
  (**
   * @license lucide-react v0.462.0 - ISC
   *
   * This source code is licensed under the ISC license.
   * See the LICENSE file in the root directory of this source tree.
   *)

lucide-react/dist/esm/icons/globe.js:
  (**
   * @license lucide-react v0.462.0 - ISC
   *
   * This source code is licensed under the ISC license.
   * See the LICENSE file in the root directory of this source tree.
   *)

lucide-react/dist/esm/icons/grip-vertical.js:
  (**
   * @license lucide-react v0.462.0 - ISC
   *
   * This source code is licensed under the ISC license.
   * See the LICENSE file in the root directory of this source tree.
   *)

lucide-react/dist/esm/icons/history.js:
  (**
   * @license lucide-react v0.462.0 - ISC
   *
   * This source code is licensed under the ISC license.
   * See the LICENSE file in the root directory of this source tree.
   *)

lucide-react/dist/esm/icons/image.js:
  (**
   * @license lucide-react v0.462.0 - ISC
   *
   * This source code is licensed under the ISC license.
   * See the LICENSE file in the root directory of this source tree.
   *)

lucide-react/dist/esm/icons/info.js:
  (**
   * @license lucide-react v0.462.0 - ISC
   *
   * This source code is licensed under the ISC license.
   * See the LICENSE file in the root directory of this source tree.
   *)

lucide-react/dist/esm/icons/key.js:
  (**
   * @license lucide-react v0.462.0 - ISC
   *
   * This source code is licensed under the ISC license.
   * See the LICENSE file in the root directory of this source tree.
   *)

lucide-react/dist/esm/icons/library-big.js:
  (**
   * @license lucide-react v0.462.0 - ISC
   *
   * This source code is licensed under the ISC license.
   * See the LICENSE file in the root directory of this source tree.
   *)

lucide-react/dist/esm/icons/lightbulb.js:
  (**
   * @license lucide-react v0.462.0 - ISC
   *
   * This source code is licensed under the ISC license.
   * See the LICENSE file in the root directory of this source tree.
   *)

lucide-react/dist/esm/icons/loader-circle.js:
  (**
   * @license lucide-react v0.462.0 - ISC
   *
   * This source code is licensed under the ISC license.
   * See the LICENSE file in the root directory of this source tree.
   *)

lucide-react/dist/esm/icons/message-circle-plus.js:
  (**
   * @license lucide-react v0.462.0 - ISC
   *
   * This source code is licensed under the ISC license.
   * See the LICENSE file in the root directory of this source tree.
   *)

lucide-react/dist/esm/icons/message-square.js:
  (**
   * @license lucide-react v0.462.0 - ISC
   *
   * This source code is licensed under the ISC license.
   * See the LICENSE file in the root directory of this source tree.
   *)

lucide-react/dist/esm/icons/pen-line.js:
  (**
   * @license lucide-react v0.462.0 - ISC
   *
   * This source code is licensed under the ISC license.
   * See the LICENSE file in the root directory of this source tree.
   *)

lucide-react/dist/esm/icons/pen.js:
  (**
   * @license lucide-react v0.462.0 - ISC
   *
   * This source code is licensed under the ISC license.
   * See the LICENSE file in the root directory of this source tree.
   *)

lucide-react/dist/esm/icons/pencil-line.js:
  (**
   * @license lucide-react v0.462.0 - ISC
   *
   * This source code is licensed under the ISC license.
   * See the LICENSE file in the root directory of this source tree.
   *)

lucide-react/dist/esm/icons/pencil.js:
  (**
   * @license lucide-react v0.462.0 - ISC
   *
   * This source code is licensed under the ISC license.
   * See the LICENSE file in the root directory of this source tree.
   *)

lucide-react/dist/esm/icons/plus.js:
  (**
   * @license lucide-react v0.462.0 - ISC
   *
   * This source code is licensed under the ISC license.
   * See the LICENSE file in the root directory of this source tree.
   *)

lucide-react/dist/esm/icons/refresh-ccw.js:
  (**
   * @license lucide-react v0.462.0 - ISC
   *
   * This source code is licensed under the ISC license.
   * See the LICENSE file in the root directory of this source tree.
   *)

lucide-react/dist/esm/icons/refresh-cw.js:
  (**
   * @license lucide-react v0.462.0 - ISC
   *
   * This source code is licensed under the ISC license.
   * See the LICENSE file in the root directory of this source tree.
   *)

lucide-react/dist/esm/icons/rotate-cw.js:
  (**
   * @license lucide-react v0.462.0 - ISC
   *
   * This source code is licensed under the ISC license.
   * See the LICENSE file in the root directory of this source tree.
   *)

lucide-react/dist/esm/icons/search.js:
  (**
   * @license lucide-react v0.462.0 - ISC
   *
   * This source code is licensed under the ISC license.
   * See the LICENSE file in the root directory of this source tree.
   *)

lucide-react/dist/esm/icons/sparkles.js:
  (**
   * @license lucide-react v0.462.0 - ISC
   *
   * This source code is licensed under the ISC license.
   * See the LICENSE file in the root directory of this source tree.
   *)

lucide-react/dist/esm/icons/square-arrow-out-up-right.js:
  (**
   * @license lucide-react v0.462.0 - ISC
   *
   * This source code is licensed under the ISC license.
   * See the LICENSE file in the root directory of this source tree.
   *)

lucide-react/dist/esm/icons/square-pen.js:
  (**
   * @license lucide-react v0.462.0 - ISC
   *
   * This source code is licensed under the ISC license.
   * See the LICENSE file in the root directory of this source tree.
   *)

lucide-react/dist/esm/icons/tag.js:
  (**
   * @license lucide-react v0.462.0 - ISC
   *
   * This source code is licensed under the ISC license.
   * See the LICENSE file in the root directory of this source tree.
   *)

lucide-react/dist/esm/icons/text-cursor-input.js:
  (**
   * @license lucide-react v0.462.0 - ISC
   *
   * This source code is licensed under the ISC license.
   * See the LICENSE file in the root directory of this source tree.
   *)

lucide-react/dist/esm/icons/trash-2.js:
  (**
   * @license lucide-react v0.462.0 - ISC
   *
   * This source code is licensed under the ISC license.
   * See the LICENSE file in the root directory of this source tree.
   *)

lucide-react/dist/esm/icons/triangle-alert.js:
  (**
   * @license lucide-react v0.462.0 - ISC
   *
   * This source code is licensed under the ISC license.
   * See the LICENSE file in the root directory of this source tree.
   *)

lucide-react/dist/esm/icons/user.js:
  (**
   * @license lucide-react v0.462.0 - ISC
   *
   * This source code is licensed under the ISC license.
   * See the LICENSE file in the root directory of this source tree.
   *)

lucide-react/dist/esm/icons/wrench.js:
  (**
   * @license lucide-react v0.462.0 - ISC
   *
   * This source code is licensed under the ISC license.
   * See the LICENSE file in the root directory of this source tree.
   *)

lucide-react/dist/esm/icons/x.js:
  (**
   * @license lucide-react v0.462.0 - ISC
   *
   * This source code is licensed under the ISC license.
   * See the LICENSE file in the root directory of this source tree.
   *)

lucide-react/dist/esm/lucide-react.js:
  (**
   * @license lucide-react v0.462.0 - ISC
   *
   * This source code is licensed under the ISC license.
   * See the LICENSE file in the root directory of this source tree.
   *)

@google/generative-ai/dist/index.mjs:
  (**
   * @license
   * Copyright 2024 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@google/generative-ai/dist/index.mjs:
  (**
   * @license
   * Copyright 2024 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
*/

/* nosourcemap */